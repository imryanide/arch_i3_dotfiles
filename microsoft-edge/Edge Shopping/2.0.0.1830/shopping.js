!function(){var t={313:function(t,e,i){"use strict";var n=i(682),o=i(75),a=i(200),r=i(351),s=i(405),l=i(858),c=i(370);function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,l.Z)(t);if(e){var o=(0,l.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,s.Z)(this,i)}}var d=function(t){(0,r.Z)(i,t);var e=u(i);function i(t,n,r){var s;return(0,o.Z)(this,i),s=e.call(this),(0,c.Z)((0,a.Z)(s),"ButtonClicked",void 0),(0,c.Z)((0,a.Z)(s),"Domain",void 0),(0,c.Z)((0,a.Z)(s),"Metadata",void 0),s.ButtonClicked=t,s.Domain=n,s.Metadata=r,s}return(0,n.Z)(i)}(i(183).Z);e.Z=d},135:function(t,e,i){"use strict";var n=i(682),o=i(75),a=i(200),r=i(351),s=i(405),l=i(858),c=i(370);function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,l.Z)(t);if(e){var o=(0,l.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,s.Z)(this,i)}}var d=function(t){(0,r.Z)(i,t);var e=u(i);function i(t,n,r,s,l){var u;return(0,o.Z)(this,i),u=e.call(this),(0,c.Z)((0,a.Z)(u),"EdgeFlyoutStatus",void 0),(0,c.Z)((0,a.Z)(u),"ComparableOffersCount",void 0),(0,c.Z)((0,a.Z)(u),"SavingsAmount",void 0),(0,c.Z)((0,a.Z)(u),"Domain",void 0),(0,c.Z)((0,a.Z)(u),"Metadata",void 0),u.EdgeFlyoutStatus=t,u.ComparableOffersCount=n,u.SavingsAmount=r,u.Domain=s,u.Metadata=l,u}return(0,n.Z)(i)}(i(183).Z);e.Z=d},183:function(t,e,i){"use strict";var n=i(75),o=i(682),a=function(){function t(){(0,n.Z)(this,t)}return(0,o.Z)(t,[{key:"ToString",value:function(){return JSON.stringify(this)}}]),t}();e.Z=a},782:function(t,e,i){"use strict";var n=i(682),o=i(75),a=i(200),r=i(351),s=i(405),l=i(858),c=i(370);function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,l.Z)(t);if(e){var o=(0,l.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,s.Z)(this,i)}}var d=function(t){(0,r.Z)(i,t);var e=u(i);function i(t,n,r,s){var l;return(0,o.Z)(this,i),l=e.call(this),(0,c.Z)((0,a.Z)(l),"Points",void 0),(0,c.Z)((0,a.Z)(l),"MaxPointsLimitPerDomainPerDay",void 0),(0,c.Z)((0,a.Z)(l),"Domain",void 0),(0,c.Z)((0,a.Z)(l),"TotalMaxPointsLimitPerDay",void 0),l.Points=t,l.MaxPointsLimitPerDomainPerDay=n,l.Domain=r,l.TotalMaxPointsLimitPerDay=s,l}return(0,n.Z)(i)}(i(183).Z);e.Z=d},113:function(t,e,i){"use strict";var n,o,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,S;i.d(e,{$S:function(){return c},BN:function(){return C},R:function(){return s},Sl:function(){return I},UA:function(){return m},Vm:function(){return f},in:function(){return r},ps:function(){return d},sj:function(){return E},xu:function(){return u}}),function(t){t[t.Domains=0]="Domains",t[t.Deals=1]="Deals",t[t.Popup=2]="Popup",t[t.Overlay=3]="Overlay",t[t.BaseUXUrl=4]="BaseUXUrl",t[t.EventLogUrl=5]="EventLogUrl",t[t.PriceComparison=6]="PriceComparison",t[t.PriceNotification=7]="PriceNotification",t[t.ImageResize=8]="ImageResize",t[t.EdgeMobileOverlay=9]="EdgeMobileOverlay",t[t.ECOverlay=10]="ECOverlay"}(n||(n={})),function(t){t.Get="GET",t.Post="POST"}(o||(o={})),function(t){t.Json="application/json",t.Text="text/plain"}(a||(a={})),function(t){t.Trace="Trace",t.Debug="Debug",t.Information="Information",t.Warning="Warning",t.Error="Error",t.Critical="Critical",t.None="None"}(r||(r={})),function(t){t.AutoApply="AutoApply",t.ButtonClick="ButtonClick",t.ClientError="ClientError",t.DebugMessage="DebugMessage",t.EdgeFlyoutStatus="EdgeFlyoutStatus",t.CheckoutPageValidation="CheckoutPageValidation",t.CashbackInfo="CashbackInfo",t.OtherSellers="OtherSellers",t.RewardsActivity="RewardsActivity",t.ExpressCheckout="ExpressCheckout",t.EdgeFlyoutStatusDiagnostic="EdgeFlyoutStatusDiagnostic",t.RenderTime="RenderTime",t.PrintableGroceryCouponsOverlay="PrintableGroceryCouponsOverlay",t.CartExtraction="CartExtraction",t.CartExtractionError="CartExtractionError",t.FeedbackClicked="FeedbackClicked",t.ActiveExperiments="ActiveExperiments",t.ProductPageValidation="ProductPageValidation",t.VisibleClippingSelectors="VisibleClippingSelectors",t.PlatformDetection="PlatformDetection",t.ClippingExist="ClippingExist",t.CollectedCoupons="CollectedCoupons",t.PurchaseConfirmation="PurchaseConfirmation",t.CheckoutValidationPerf="CheckoutValidationPerf",t.ManualCouponApplication="ManualCouponApplication"}(s||(s={})),function(t){t.PriceHistoryGraph="PriceHistoryGraph"}(l||(l={})),function(t){t.AutoApply="AutoApply",t.PopupClose="PopupClose",t.CouponCopied="CouponCopied",t.SeeMoreCoupons="SeeMoreCoupons",t.SeeMoreRetailers="SeeMoreRetailers",t.SeeMoreSellers="SeeMoreSellers",t.SeeMoreTopRetailers="SeeMoreTopRetailers",t.SeeMorePaymentOptions="SeeMorePaymentOptions",t.SeeMoreGroceryCoupons="SeeMoreGroceryCoupons",t.SeeMoreExclusiveCoupons="SeeMoreExclusiveCoupons",t.SeeAllPrintableCoupons="SeeAllPrintableCoupons",t.PrintableCouponSelected="PrintableCouponSelected",t.PrintGroceryCoupons="PrintGroceryCoupons",t.FREManage="FREManage",t.FlyoutManage="FlyoutManage",t.FREDismiss="FREDismiss",t.FlyoutDismiss="FlyoutDismiss",t.FlyoutSnooze="FlyoutSnooze",t.FlyoutSnoozeUndo="FlyoutSnoozeUndo",t.RemindLater="RemindLater",t.BannerDismiss="BannerDismiss",t.AutoShowTurnedOff="AutoShowTurnedOff",t.AutoShowTurnedOn="AutoShowTurnedOn",t.FREGotIt="FREGotIt",t.FRENoThanks="FRENoThanks",t.NavigatedToAnotherRetailer="NavigatedToAnotherRetailer",t.ProceedToCheckoutWithImport="ProceedToCheckoutWithImport",t.ProceedToCheckoutWithOutImport="ProceedToCheckoutWithOutImport",t.ProceedToCheckout="ProceedToCheckout",t.UseCoupon="UseCoupon",t.UseRebates="UseRebates",t.ActivateCashBack="ActivateCashBack",t.PreviousCashBack="PreviousCashBack",t.ExpandedPreviousCashBack="ExpandedPreviousCashBack",t.NotificationDismiss="NotificationDismiss",t.OrganicFlowTurnedOff="OrganicFlowTurnedOff",t.OrganicFlowTurnedOn="OrganicFlowTurnedOn",t.RebatesLearnMore="RebatesLearnMore",t.RebatesAccount="RebatesAccount",t.CouponCopiedStackableWithCashBack="CouponCopiedStackableWithCashBack",t.CouponCopiedNonStackableWithCashBack="CouponCopiedNonStackableWithCashBack",t.ShareFB="ShareFB",t.ShareTwitter="ShareTwitter",t.ScrollVideoReviews="ScrollVideoReviews",t.ClickInlineRating="ClickInlineRating",t.ClickExpertReview="ClickExpertReview",t.ClickVideoReview="ClickVideoReview",t.NavigateToRetailerOffer="NavigateToRetailerOffer",t.NavigateToRecommendedDeal="NavigateToRecommendedDeal",t.NavigateToOtherSeller="NavigateToOtherSeller",t.AddToCart="AddToCart",t.TipsGotIt="TipsGotIt",t.TipsDwellTime="TipsDwellTime",t.MicroNotificationClick="MicroNotificationClick",t.AAWithoutEC="AAWithoutEC",t.AAWithEC="AAWithEC",t.ExpressCheckout="EC",t.RewardSignIn="RewardSignIn",t.RewardRedeem="RewardRedeem",t.RewardAdditionalLink="RewardAdditionalLink",t.RewardInfo="RewardInfo",t.ActivateCashbackToEarnReward="ActivateCashbackToEarnReward",t.ActivateCashbackToEarnRewardFail="ActivateCashbackToEarnRewardFail",t.HomePageNotificationHover="HomePageNotificationHover",t.DeletePackageTrackerByGuid="DeletePackageTrackerByGuid",t.PackageTrackingOptIn="PackageTrackingOptIn",t.PackageTrackingOptOut="PackageTrackingOptOut",t.PackageTrackingOrderClick="PackageTrackingOrderClick",t.PriceHistoryGotItBtn="PriceHistoryGotItBtn",t.DigitalGroceryCouponClick="DigitalGroceryCouponClick",t.DigitalGroceryCouponSeeAll="DigitalGroceryCouponSeeAll",t.RewardsClick="RewardsClick",t.ViewAccountActivity="ViewAccountActivity",t.CashbackRetailer="CashbackRetailer",t.SustainabilityShop="SustainabilityShop",t.ECWithoutPayment="ECWithoutPayment",t.ECWithBNPL="ECWithBNPL",t.FeedbackLike="FeedbackLike",t.FeedbackDislike="FeedbackDislike",t.FeedbackDislikeMenu0="FeedbackDislikeMenu0",t.FeedbackDislikeMenu1="FeedbackDislikeMenu1",t.FeedbackDislikeMenu2="FeedbackDislikeMenu2",t.FeedbackDislikeMenu3="FeedbackDislikeMenu3",t.FeedbackDislikeMenu4="FeedbackDislikeMenu4",t.FeedbackClose="FeedbackClose",t.FeedbackSubmit="FeedbackSubmit",t.FeedbackDismiss="FeedbackDismiss",t.SustainabilityLearnMore="SustainabilityLearnMore",t.PinterestNavigateToAnotherRetailer="PinterestNavigateToAnotherRetailer",t.YoutubeNavigateToAnohterRetailer="YoutubeNavigateToAnohterRetailer",t.SaveExclusiveCoupons="SaveExclusiveCoupons",t.DontSaveExclusiveCoupons="DontSaveExclusiveCoupons",t.PriceDropProductPage="PriceDropProductPage",t.PriceDropProductPageHover="PriceDropProductPageHover",t.SustainabilityConfirmationHover="SustainabilityConfirmationHover",t.AttainableInfoIcon="AttainableInfoIcon",t.AttainableInfoIconNotif="AttainableInfoIconNotif",t.AttainableContinueShopping="AttainableContinueShopping",t.DismissGiftCard="DismissGiftCard",t.GroceryItemShopAndActivate="GroceryItemShopAndActivate",t.GroceryItemTooltipViewed="GroceryItemTooltipViewed",t.GroceryItemDisclaimer="GroceryItemDisclaimer",t.JoinNow="JoinNow",t.MaybeLater="MaybeLater",t.NavigatedToAutosMarketplace="NavigatedToAutosMarketplace",t.NavigatedToAutosMarketplaceRecommendation="NavigatedToAutosMarketplaceRecommendation",t.ActivatedGroceryItem="ActivatedGroceryItem",t.Unknown="Unknown"}(c||(c={})),function(t){t.OpenedInCheckout="OpenedInCheckout",t.EmptyCoupons="EmptyCoupons",t.AutoTrigger="AutoTrigger",t.ErrorWrongAutoTrigger="ErrorWrongAutoTrigger",t.UserTrigger="UserTrigger",t.BannerRendered="BannerRendered",t.OnErrorInvoked="OnErrorInvoked",t.BestPrice="BestPrice",t.YouCanSave="YouCanSave",t.RebatesConfirmationNotification="RebatesConfirmationNotification",t.RebatesTurnedOffNotification="RebatesTurnedOffNotification",t.StackableCouponWithCashback="StackableCouponWithCashback",t.NonStackableCouponWithCashback="NonStackableCouponWithCashback",t.CashBackNotActiveAutoApply="CashBackNotActiveAutoApply",t.PriceHistoryPriceDrop="PriceHistoryPriceDrop",t.PriceHistoryPriceIncrease="PriceHistoryPriceIncrease",t.PriceHistoryPriceStable="PriceHistoryPriceStable",t.PriceHistoryDwellTimeHover="PriceHistoryDwellTimeHover",t.PriceHistoryInfoButtonDwellTimeHover="PriceHistoryInfoButtonDwellTimeHover",t.PriceHistoryNoImage="PriceHistoryNoImage",t.PriceHistoryShowMoreInfoTooltip="PriceHistoryShowMoreInfoTooltip",t.PriceHistoryHideMoreInfoTooltip="PriceHistoryHideMoreInfoTooltip",t.ActivateCashBackButton="ActivateCashBackButton",t.CashBackWillNotRender="CashBackWillNotRender",t.CashBackButtonShown="CashBackButtonShown",t.CashBackSignInButtonShown="CashBackSignInButtonShown",t.ErrorPageHandlerFunction="ErrorPageHandlerFunction",t.FlyoutAutoPriceHistoryTrigger="FlyoutAutoPriceHistoryTrigger",t.FlyoutDismissedPriceHistoryTrigger="FlyoutDismissedPriceHistoryTrigger",t.InlineRatingRendered="InlineRatingRendered",t.RatingsAndReviewsRendered="RatingsAndReviewsRendered",t.AutoOpenUsingUrlParam="AutoOpenUsingUrlParam",t.ContextMenuInfo="ContextMenuInfo",t.AddedToCartNotification="AddedToCartNotification",t.CashBackActivated="CashBackActivated",t.ErrorCashBackActivation="ErrorCashBackActivation",t.CheckoutUserDataInvalid="CUDInvalid",t.ExpressCheckout="ECOnly",t.OtherSeller="OtherSeller",t.ModuleViewed="ModuleViewed",t.RewardWillBeRendered="RewardWillBeRendered",t.RewardSignInSuccess="RewardSignInSuccess",t.ErrorRewardSignIn="ErrorRewardSignIn",t.RewardNotification="RewardNotification",t.PackageTrackingCardViewed="PackageTrackingCardViewed",t.ShownOnPinterest="ShownOnPinterest",t.ViewedProductPriceDrop="ViewedProductPriceDrop",t.SustainabilityConfirmation="SustainabilityConfirmation",t.SustainabilityPDP="SustainabilityPDP",t.AutosMarketplaceRenderNotification="AutosMarketplaceNotification",t.AutosMarketplaceRenderViewModule="AutosMarketplaceRenderViewModule",t.AutosMarketplaceShowMoreInfoTooltip="AutosMarketplaceShowMoreInfoTooltip",t.AutosMarketplaceDwellTimeHover="AutosMarketplaceDwellTimeHover",t.PerfSetUp="PerfSetUp",t.PerfViewModule="PerfViewModule",t.PerfAddModulesToShopping="PerfAddModulesToShopping",t.PerfAppendToDOM="PerfAppendToDOM",t.PerfCreateAndRender="PerfCreateAndRender",t.PerfCreateFixedHeader="PerfCreateFixedHeader",t.PerfAddModulesToTabs="PerfAddModulesToTabs",t.ErrorToRecordEngagement="ErrorToRecordEngagement",t.ErrorPaneStuckLoadingState="ErrorPaneStuckLoadingState",t.SavingsFoundShown="SavingsFoundShown",t.ErrorRewardsAdded="ErrorRewardsAdded"}(u||(u={})),function(t){t.Error="Error",t.Negative="Negative",t.Positive="Positive",t.Cancelled="Cancelled"}(d||(d={})),function(t){t.Error="Error",t.Negative="Negative",t.Positive="Positive"}(h||(h={})),function(t){t.Valid="Valid",t.NotApplicable="NotApplicable",t.LowSuccess="LowSuccess",t.MinPurchaseNotMet="MinPurchaseNotMet",t.CalculatedCutOffPriceNotMet="CalculatedCutOffPriceNotMet",t.WorseDiscountPercent="WorseDiscountPercent"}(p||(p={})),function(t){t[t.ApplyCouponsMessage=1]="ApplyCouponsMessage",t[t.AutoApplyCompletedMessage=2]="AutoApplyCompletedMessage",t[t.CheckoutPageMessage=3]="CheckoutPageMessage",t[t.CloseOverlayMessage=4]="CloseOverlayMessage",t[t.ClosedPopupMessage=5]="ClosedPopupMessage",t[t.CountElementsResponse=6]="CountElementsResponse",t[t.CreateOverlayMessage=7]="CreateOverlayMessage",t[t.CreatePopupMessage=8]="CreatePopupMessage",t[t.CreatePriceComparisonMessage=9]="CreatePriceComparisonMessage",t[t.EdgeApplyCouponsMessage=10]="EdgeApplyCouponsMessage",t[t.EmptyResponse=11]="EmptyResponse",t[t.ErrorResponse=12]="ErrorResponse",t[t.GetCompetingPricesMessage=13]="GetCompetingPricesMessage",t[t.GetCompetingPricesResponse=14]="GetCompetingPricesResponse",t[t.GetTextValueResponse=15]="GetTextValueResponse",t[t.GetUIStateMessage=16]="GetUIStateMessage",t[t.GetUIStateResponse=17]="GetUIStateResponse",t[t.MoveProgressBarMessage=18]="MoveProgressBarMessage",t[t.ShowResultMessage=19]="ShowResultMessage",t[t.TelemetryMessage=20]="TelemetryMessage",t[t.UpdateCurrentCouponMessage=21]="UpdateCurrentCouponMessage",t[t.OpalMessage=22]="OpalMessage",t[t.ProductPageMessage=23]="ProductPageMessage",t[t.ProductPageResponse=24]="ProductPageResponse",t[t.EdgeCreateOverlayMessage=25]="EdgeCreateOverlayMessage",t[t.EdgeShowResultMessage=26]="EdgeShowResultMessage",t[t.VerifySelectorsMessage=27]="VerifySelectorsMessage",t[t.VerifySelectorsResponse=28]="VerifySelectorsResponse",t[t.AutoApplyCancelledMessage=29]="AutoApplyCancelledMessage",t[t.ContentInitMessage=30]="ContentInitMessage",t[t.ClearDataMessage=31]="ClearDataMessage",t[t.DOMMutationMessage=32]="DOMMutationMessage",t[t.UpdateCurrencyMessage=33]="UpdateCurrencyMessage",t[t.CheckoutProgressMessage=34]="CheckoutProgressMessage",t[t.ECCreateOverlayMessage=35]="ECCreateOverlayMessage",t[t.ECShowResultMessage=36]="ECShowResultMessage",t[t.ECFieldErrorMessage=37]="ECFieldErrorMessage",t[t.ECCreateUpdatePaymentOverlayMessage=38]="ECCreateUpdatePaymentOverlayMessage",t[t.PrintableGroceryCouponsMessage=39]="PrintableGroceryCouponsMessage",t[t.WalletDrawerCreateOverlayMessage=40]="WalletDrawerCreateOverlayMessage",t[t.WalletDrawerCloseMessage=41]="WalletDrawerCloseMessage",t[t.BackgroundAutoApplyCancelledMessage=42]="BackgroundAutoApplyCancelledMessage"}(f||(f={})),function(t){t[t.IOS=0]="IOS",t[t.Android=1]="Android"}(g||(g={})),function(t){t[t.PlainString=0]="PlainString",t[t.JsonString=1]="JsonString"}(m||(m={})),function(t){t[t.FromBackground=1]="FromBackground",t[t.FromContent=2]="FromContent"}(v||(v={})),function(t){t.HandleBackgroundMessage="HandleBackgroundMessage",t.HandleContentMessage="HandleContentMessage"}(y||(y={})),function(t){t.Opal="Opal",t.Extension="Extension",t.Edge="Edge",t.EdgeMobile="EdgeMobile",t.Sapphire="Sapphire",t.RBC="RBC"}(C||(C={})),function(t){t.AutoApplyCoupons="AutoApplyCoupons",t.CouponClipping="CouponClipping",t.BackgroundAutoApply="BackgroundAutoApply",t.FallBackAutoApply="FallBackAutoApply",t.ProductPageBackgroundAutoApply="ProductPageBackgroundAutoApply",t.BackgroundAAResult="BackgroundAAResult"}(b||(b={})),function(t){t.ProductPageBackgroundAutoApply="ProductPageBackgroundAutoApply",t.BackgroundAutoApply="BackgroundAutoApply",t.ForegroundAutoApply="ForegroundAutoApply"}(S||(S={}));var x,E,A,T,I,D;!function(t){t.VALIDATION_ERROR="VALIDATION_ERROR",t.SERVER_ERROR="SERVER_ERROR"}(x||(x={})),function(t){t.AMEX="A",t.DISCOVER="D",t.MASTERCARD="M",t.VISA="V",t.ZIP="Z"}(E||(E={})),function(t){t.ExpressCheckout="ExpressCheckout",t.ECWithBNPL="ECWithBNPL",t.ECWithoutPayment="ECWithoutPayment"}(A||(A={})),function(t){t.Wallet="Wallet",t.Shopping="Shopping"}(T||(T={})),function(t){t.AutoApplyTransactionsKey="ListOfAutoApplyTransactions",t.CouponClippingTransactionsKey="ListOfCouponClippingTransactions",t.CashbackTransactionsKey="ListOfCashbackTransactions"}(I||(I={})),function(t){t.UserCouponFailed="UserCouponFailed",t.BetterInitialPrice="BetterInitialPrice",t.CouponNotInOurCorpus="CouponNotInOurCorpus",t.ManuallyAppliedCouponNotInOurCorpus="ManuallyAppliedCouponNotInOurCorpus",t.SuggestedCoupon="SuggestedCoupon"}(D||(D={}))},365:function(t,e,i){"use strict";var n=i(75),o=i(682),a=i(370),r=function(){function t(){(0,n.Z)(this,t),(0,a.Z)(this,"stringValue",void 0)}return(0,o.Z)(t,null,[{key:"Create",value:function(e){var i=new t;return i.stringValue=e.stringValue,i}}]),t}();e.Z=r},207:function(t,e,i){"use strict";var n=i(94),o=i(75),a=i(682),r=i(351),s=i(405),l=i(858),c=i(39),u=i.n(c),d=i(135),h=i(113),p=i(13),f=i(657),g=i(731),m=i(340),v=i(400);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,l.Z)(t);if(e){var o=(0,l.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,s.Z)(this,i)}}t=i.hmd(t);var C=function(e){(0,r.Z)(c,e);var i,s,l=y(c);function c(t,e,i,n){return(0,o.Z)(this,c),l.call(this,t,e,i,n)}return(0,a.Z)(c,[{key:"GetNotificationName",value:function(){var t=this.flyoutData.dataStoreModule.CashBackData;return null!=t&&t.isTurnedOff?p.sM.CASHBACKTURNEDOFF:null!=t&&t.isConfirmationPage?p.sM.CASHBACKCONFIRMATION:p.sM.CASHBACK}},{key:"RenderNotification",value:(s=(0,n.Z)(u().mark((function t(e){var i,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=this.flyoutData.dataStoreModule.CashBackData)||!i.shouldRenderCashBackNotification){t.next=14;break}if(null==i||!i.isTurnedOff){t.next=6;break}this.renderTurnedOffCashBackModule(e),t.next=14;break;case 6:if(null==i||!i.isConfirmationPage){t.next=10;break}this.renderConfirmationCashBackModule(e),t.next=14;break;case 10:return t.next=12,this.renderModuleInNotification(e);case 12:return n=t.sent,t.abrupt("return",Promise.resolve(n));case 14:return t.abrupt("return",Promise.resolve(null));case 15:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"ShouldRenderNotification",value:function(){var t,e=this.flyoutData.dataStoreModule.CashBackData,i=!1;return this.stateManagement.getState(m.IY.canRenderAutoApply)||(i=this.flyoutData.common.popupOrigination===g.s.AUTO_SHOW_REBATES),Promise.resolve(null!==(t=e&&e.shouldRenderCashBackNotification&&this.flyoutData.common.isRebatesEnabled&&this.flyoutData.common.openedWith===p.Te.Auto&&(this.flyoutData.common.popupOrigination===g.s.AUTO_SHOW_REBATES_CONFIRMATION||this.flyoutData.common.popupOrigination===g.s.AUTO_SHOW_REBATES_DEACTIVATED||this.flyoutData.common.popupOrigination===g.s.AUTO_SHOW_PERSONALIZED_CASHBACK_CONFIRMATION||this.flyoutData.common.popupOrigination===g.s.AUTO_SHOW_REBATES_ORGANIC||i||e.isConfirmationPage))&&void 0!==t&&t)}},{key:"renderModuleInNotification",value:(i=(0,n.Z)(u().mark((function e(i){var n,o,a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.flyoutData.dataStoreModule.CashBackData,e.next=3,this.renderModule();case 3:if(!(o=e.sent)||!o.element){e.next=12;break}return o.element.style.marginTop="0px",o.element.slot="header-content",o.element.accordion=!1,this.utilities.applyStyles(this.flyoutData.common.shopping,"::part(header) {\n                margin-top: 0px;\n                margin-bottom: 0px;\n                }\n                ::part(sections) {\n                    margin-top: 0px;\n                }"),this.utilities.shouldRenderSmallNotification()&&(a=function e(){n&&n.userRebatesResponse&&n.userRebatesResponse.isRebatesUser&&t&&n.userRebatesResponse.latestCashbackApproved&&o&&r(o.element,n),i.removeEventListener("mouseover",e)},this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getSmallerNotificationCssStyles()),this.utilities.dismissNotificationTimeOut(),n&&n.userRebatesResponse&&n.userRebatesResponse.isRebatesUser&&t&&n.userRebatesResponse.latestCashbackApproved&&o&&(r=this.renderPreviousCashBackModule.bind(this)),i.addEventListener("mouseover",a)),i.appendChild(o.element),e.abrupt("return",o);case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,this)}))),function(t){return i.apply(this,arguments)})},{key:"renderConfirmationCashBackModule",value:function(t){var e=this;if(t){this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var i=this.utilities.createElement("DIV",{id:"divCashBackPopup"});i.slot="header-content";var n=this.utilities.createElement("DIV",{className:"txtMedium"});n.className="divNotificationContent";var o,a,r,s=this.flyoutData.dataStoreModule.CashBackData;if(null!=s&&s.isPersonalizedCashback){(o=this.utilities.createElement("H2",{style:"margin: 0px; font-weight: 500;"})).style.fontSize="20px",o.style.lineHeight="28px";var l=this.utilities.createElement("span");l.textContent=this.retrieveCashBackAmount(),l.style.color="rgb(222, 55, 0)",l.style.fontSize="28px",l.style.lineHeight="36px";var c=this.utilities.createElement("fluent-anchor");c.addEventListener("click",(function(){e.pageHandlerModule.NavigateToBingReates()})),c.href="#",c.textContent=this.flyoutData.strings.pcbBingRebates,c.setAttribute("appearance","hypertext"),c.style.fontSize="20px",c.style.lineHeight="28px",c.className="txtMedium",this.utilities.populateMultipleChildrenHTML(o,this.flyoutData.strings.pcbConfirmationTitle,l,c)}else o=this.utilities.createElement("H2",{style:"margin: 0px; font-weight: 500; font-size: 24px; line-height: 34px;"},this.flyoutData.strings.cbConfirmationTitle);if(null!=s&&s.isPersonalizedCashback){r=this.utilities.createElement("DIV",{style:"position: relative;\n                display: inherit"});var u=this.utilities.createElement("DIV");u.className="infoicon",u.innerHTML=this.assets.getConfirmationInfoIcon(),u.setAttribute("aria-label","hidden"),r.appendChild(u),(a=this.utilities.createElement("P",{className:"txtSmall",style:"line-height: 20px; margin-top: 16px;"},this.flyoutData.strings.pcbConfirmationMessage)).style.color="rgba(0, 0, 0, 0.55)",r.appendChild(a)}else a=this.utilities.createElement("P",{className:"txtSmall",style:"line-height: 20px; margin-top: 16px;"},this.flyoutData.strings.cbConfirmationMessage);var p=this.createSeeOffersButton();n.appendChild(o),null!=s&&s.isPersonalizedCashback?n.appendChild(r):n.appendChild(a),p&&n.appendChild(p),i.appendChild(n),t.appendChild(i);var g=new d.Z(h.xu.RebatesConfirmationNotification);this.logModule.LogInfoEvent(h.R.EdgeFlyoutStatus,"User saw confirmation notification",g,f.g.CouponImpressionId)}}},{key:"renderTurnedOffCashBackModule",value:function(t){var e=this;if(t){this.utilities.applyStyles(t,this.assets.getStyles());var i=this.utilities.createElement("DIV",{id:"divCashBackPopup"});i.slot="header-content";var o=this.utilities.createElement("DIV");o.className="txtMedium divNotificationContent";var a=this.utilities.createElement("H2",{style:"margin: 0px; font-weight: 500; font-size: 24px; line-height: 34px;"},this.flyoutData.strings.cbTurnedOffTitle),r=this.utilities.createElement("P",{className:"txtSmall",style:"line-height: 20px; margin-top: 16px; margin-bottom: 16px;"},this.flyoutData.strings.cbTurnedOffMessage);o.appendChild(a),o.appendChild(r);var s=this.utilities.createBaseActionButton();s.slot="actions",this.styleDefaultState(s,this.flyoutData.strings.cbEnableRebatesButton,!1),s.addEventListener("click",function(){var t=(0,n.Z)(u().mark((function t(i){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.handleActivateCashbackClick(s,i,"Cash back activated from turned off notification");case 2:t.sent?e.styleActivatedState(s,!1,!0):e.styleDefaultState(s,e.flyoutData.strings.cbActivateButtonRefresh,!1);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.appendChild(s),i.appendChild(o),t.appendChild(i);var l=new d.Z(h.xu.RebatesTurnedOffNotification);this.logModule.LogInfoEvent(h.R.EdgeFlyoutStatus,"User saw rebates turned off notification",l,f.g.CouponImpressionId)}}}]),c}(v.Z);e.Z=C},13:function(t,e,i){"use strict";var n,o,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,S,x,E,A,T,I,D,k;i.d(e,{$U:function(){return D},$k:function(){return b},AS:function(){return a},Bl:function(){return g},CS:function(){return o},De:function(){return S},Ee:function(){return f},FA:function(){return y},GX:function(){return m},H7:function(){return p},Jk:function(){return I},M$:function(){return E},Q2:function(){return r},Te:function(){return c},VG:function(){return T},YO:function(){return s},aE:function(){return C},aM:function(){return n},iM:function(){return u},lp:function(){return A},m5:function(){return l},sM:function(){return v},ul:function(){return x},vu:function(){return d},z6:function(){return k}}),function(t){t.Large="txtLarge",t.Medium="txtMedium",t.Small="txtSmall",t.EmptyCoupon="txtEmptyCoupons"}(n||(n={})),function(t){t[t.COUPON=2]="COUPON",t[t.DEAL=2]="DEAL",t[t.PRICECOMPARISON=3]="PRICECOMPARISON",t[t.RECOMMENDATIONS=4]="RECOMMENDATIONS",t[t.SIMILARSELLERS=1]="SIMILARSELLERS",t[t.PRODUCTHISTORY=3]="PRODUCTHISTORY",t[t.TIPS=4]="TIPS",t[t.PAYMENT_OPTIONS=3]="PAYMENT_OPTIONS",t[t.ORDERTRACKING=1]="ORDERTRACKING",t[t.TOP_RETAILERS=4]="TOP_RETAILERS",t[t.GROCERY_COUPON=4]="GROCERY_COUPON",t[t.PRINTABLE_COUPON=4]="PRINTABLE_COUPON",t[t.PRINTABLE_COUPON_AUTO=2]="PRINTABLE_COUPON_AUTO",t[t.GROCERY_CASHBACK=3]="GROCERY_CASHBACK",t[t.PREVIOUS_CASHBACK=1]="PREVIOUS_CASHBACK",t[t.AUTOSMARKETPLACE=3]="AUTOSMARKETPLACE"}(o||(o={})),function(t){t[t.Desktop=1]="Desktop",t[t.Mobile=2]="Mobile"}(a||(a={})),function(t){t[t.Dark=1]="Dark",t[t.Light=2]="Light"}(r||(r={})),function(t){t.Paid="cpc"}(s||(s={})),function(t){t[t.LTR=1]="LTR",t[t.RTL=2]="RTL"}(l||(l={})),function(t){t.Mouse="mouse",t.Keyboard="keyboard",t.Auto="auto",t.Banner="banner"}(c||(c={})),function(t){t.currency="placeholderCurrency"}(u||(u={})),function(t){t.Shipping="shipping",t.Used="Used",t.New="New",t.Refurbished="Refurbished",t.PriceDrop="price drop"}(d||(d={})),function(t){t.clippedSpan="clippedSpan"}(h||(h={})),function(t){t[t.GIFT_CARD=1]="GIFT_CARD",t[t.PRINTABLE_COUPON=2]="PRINTABLE_COUPON",t[t.GROCERY_COUPON=3]="GROCERY_COUPON",t[t.COUPONCLIPPING=4]="COUPONCLIPPING",t[t.SIMILARSELLERS=5]="SIMILARSELLERS",t[t.GROCERY_CASHBACK=6]="GROCERY_CASHBACK",t[t.GROCERY_CASHBACK_ACTIVATED=7]="GROCERY_CASHBACK_ACTIVATED",t[t.COUPON=8]="COUPON",t[t.ATTAINABLECOUPON=9]="ATTAINABLECOUPON",t[t.PRICEHISTORY=10]="PRICEHISTORY",t[t.PRICECOMPARISON=11]="PRICECOMPARISON",t[t.CASHBACK=12]="CASHBACK",t[t.DEALS=13]="DEALS",t[t.RATINGSANDREVIEWS=14]="RATINGSANDREVIEWS",t[t.CHECKOUTAUTOFILL=15]="CHECKOUTAUTOFILL",t[t.RECOMMENDATIONS=16]="RECOMMENDATIONS",t[t.ORDERSTATUSTRACKING=17]="ORDERSTATUSTRACKING",t[t.TOP_RETAILERS=18]="TOP_RETAILERS",t[t.TIPS=19]="TIPS",t[t.REWARD=20]="REWARD",t[t.PAYMENT_OPTIONS=21]="PAYMENT_OPTIONS",t[t.VIRTUAL_CARD=22]="VIRTUAL_CARD",t[t.EXCLUSIVECOUPONS=23]="EXCLUSIVECOUPONS",t[t.SUSTAINABILITY=24]="SUSTAINABILITY",t[t.PINTEREST=25]="PINTEREST",t[t.AUTOSMARKETPLACE=26]="AUTOSMARKETPLACE",t[t.PRODUCTHISTORY=98]="PRODUCTHISTORY",t[t.EMPTYCOUPON=99]="EMPTYCOUPON",t[t.MAX=100]="MAX"}(p||(p={})),function(t){t.CANARY="canary",t.STABLE="stable"}(f||(f={})),function(t){t.PRICECOMPARISON="3",t.PRICEHISTORY="4"}(g||(g={})),function(t){t.CHECKOUTAUTOFILL="CHECKOUTAUTOFILL",t.COUPON="COUPON",t.PRICECOMPARISON="PRICECOMPARISON",t.CASHBACK="CASHBACK",t.EMPTYCOUPON="EMPTYCOUPON",t.PRICEHISTORY="PRICEHISTORY",t.COUPONCLIPPING="COUPONCLIPPING",t.DEALS="DEALS",t.NUDGETIPSDATA="NUDGETIPSDATA",t.RATINGSANDREVIEWS="RATINGSANDREVIEWS",t.RECOMMENDATIONS="RECOMMENDATIONS",t.SIMILARSELLERS="SIMILARSELLERS",t.PRODUCTHISTORY="PRODUCTHISTORY",t.REWARD="REWARD",t.TIPS="TIPS",t.PAYMENT_OPTIONS="PAYMENT_OPTIONS",t.EXCLUSIVECOUPONS="EXCLUSIVECOUPONS",t.ORDERSTATUSTRACKING="ORDERSTATUSTRACKING",t.VIRTUAL_CARD="VIRTUAL_CARD",t.SUSTAINABILITY="SUSTAINABILITY",t.TOP_RETAILERS="TOP_RETAILERS",t.GROCERY_COUPON="GROCERY_COUPON",t.PRINTABLE_COUPON="PRINTABLE_COUPON",t.TRACKING_CONFIRMATION="TRACKING_CONFIRMATION",t.FEEDBACK="FEEDBACK",t.ViewedProductPriceDrop="ViewedProductPriceDrop",t.PINTEREST="PINTEREST",t.ATTAINABLECOUPONS="ATTAINABLECOUPONS",t.GIFT_CARD="GIFT_CARD",t.GROCERY_CASHBACK="GROCERY_CASHBACK",t.GROCERY_CASHBACK_ACTIVATED="GROCERY_CASHBACK_ACTIVATED",t.AUTOSMARKETPLACE="AUTOSMARKETPLACE"}(m||(m={})),function(t){t.CASHBACK="CASHBACK",t.CASHBACKCONFIRMATION="CASHBACKCONFIRMATION",t.CASHBACKTURNEDOFF="CASHBACKTURNEDOFF",t.HOMEPAGE="HOMEPAGE",t.REWARD="REWARD",t.SIMILARSELLERS="SIMILARSELLERS",t.PRICECOMPARISON="PRICECOMPARISON",t.EXCLUSIVECOUPONS="EXCLUSIVECOUPONS",t.MICRONOTIFICATION="MICRONOTIFICATION",t.TRACKING_CONFIRMATION="TRACKING_CONFIRMATION",t.VIRTUAL_CARD="VIRTUAL_CARD",t.ViewedProductPriceDrop="ViewedProductPriceDrop",t.SUSTAINABILITY="SUSTAINABILITY_NOTIFICATION",t.ATTAINABLECOUPONS="ATTAINABLECOUPONS",t.GIFT_CARD="GIFT_CARD",t.AUTOSMARKETPLACE="AUTOSMARKETPLACE_NOTIFICATION",t.GROCERY_CASHBACK="GROCERY_CASHBACK",t.PRICEHISTORY="PRICEHISTORY"}(v||(v={})),function(t){t[t.NOT_ACTIVATING=0]="NOT_ACTIVATING",t[t.STARTED=1]="STARTED",t[t.FAILED=2]="FAILED",t[t.FAILED_SWITCH_TO_MSA_PROFILE=3]="FAILED_SWITCH_TO_MSA_PROFILE",t[t.FAILED_SWITCH_TO_MSA_DECLINED=4]="FAILED_SWITCH_TO_MSA_DECLINED",t[t.FAILED_SIGN_INTO_PROFILE=5]="FAILED_SIGN_INTO_PROFILE",t[t.PENDING_ENROLL_REBATES_USER=6]="PENDING_ENROLL_REBATES_USER",t[t.PENDING_SWITCH_TO_MSA_PROFILE=7]="PENDING_SWITCH_TO_MSA_PROFILE",t[t.PENDING_SIGN_INTO_PROFILE=8]="PENDING_SIGN_INTO_PROFILE",t[t.PENDING_ACTIVATION_IN_PROFILE=9]="PENDING_ACTIVATION_IN_PROFILE",t[t.FAILED_ACTIVATION_NO_RETAILER_DATA=10]="FAILED_ACTIVATION_NO_RETAILER_DATA",t[t.FAILED_ACTIVATION_URL_FETCH=11]="FAILED_ACTIVATION_URL_FETCH",t[t.FAILED_ACTIVATION_INVALID_JSON=12]="FAILED_ACTIVATION_INVALID_JSON",t[t.FAILED_ACTIVATION_URL_PARSING=13]="FAILED_ACTIVATION_URL_PARSING",t[t.FAILED_ACTIVATION_URL_INVALID=14]="FAILED_ACTIVATION_URL_INVALID",t[t.FAILED_ACTIVATION_ENROLL_NAVIGATION_LOAD=15]="FAILED_ACTIVATION_ENROLL_NAVIGATION_LOAD",t[t.FAILED_ACTIVATION_ENROLL_NAVIGATION_TIMED_OUT=16]="FAILED_ACTIVATION_ENROLL_NAVIGATION_TIMED_OUT",t[t.FAILED_ACTIVATION_ATTRIBUTION_NAVIGATION_LOAD=17]="FAILED_ACTIVATION_ATTRIBUTION_NAVIGATION_LOAD",t[t.FAILED_ACTIVATION_ATTRIBUTION_NAVIGATION_TIMED_OUT=18]="FAILED_ACTIVATION_ATTRIBUTION_NAVIGATION_TIMED_OUT",t[t.ACTIVATED=19]="ACTIVATED",t[t.FAILED_ACTIVATION_UNIFIED_API_BACKED_OFF=20]="FAILED_ACTIVATION_UNIFIED_API_BACKED_OFF",t[t.FAILED_ACTIVATION_ENROLL_VERIFY_COOKIE=21]="FAILED_ACTIVATION_ENROLL_VERIFY_COOKIE",t[t.FAILED_ACTIVATION_ENROLL_COOKIE_TIMED_OUT=22]="FAILED_ACTIVATION_ENROLL_COOKIE_TIMED_OUT",t[t.PENDING_BING_SSO=23]="PENDING_BING_SSO",t[t.PENDING_BING_IDENTITY_CHECK=24]="PENDING_BING_IDENTITY_CHECK"}(y||(y={})),function(t){t[t.NOT_ACTIVATING=0]="NOT_ACTIVATING",t[t.STARTED=1]="STARTED",t[t.FAILED=2]="FAILED",t[t.FAILED_SWITCH_TO_MSA_PROFILE=3]="FAILED_SWITCH_TO_MSA_PROFILE",t[t.FAILED_SWITCH_TO_MSA_DECLINED=4]="FAILED_SWITCH_TO_MSA_DECLINED",t[t.FAILED_SIGN_INTO_PROFILE=5]="FAILED_SIGN_INTO_PROFILE",t[t.PENDING_ENROLL_REWARDS_USER=6]="PENDING_ENROLL_REWARDS_USER",t[t.PENDING_SWITCH_TO_MSA_PROFILE=7]="PENDING_SWITCH_TO_MSA_PROFILE",t[t.PENDING_SIGN_INTO_PROFILE=8]="PENDING_SIGN_INTO_PROFILE",t[t.PENDING_ACTIVATION_IN_PROFILE=9]="PENDING_ACTIVATION_IN_PROFILE",t[t.FAILED_ACTIVATION_ENROLL_NAVIGATION_LOAD=10]="FAILED_ACTIVATION_ENROLL_NAVIGATION_LOAD",t[t.FAILED_ACTIVATION_ENROLL_NAVIGATION_TIMED_OUT=11]="FAILED_ACTIVATION_ENROLL_NAVIGATION_TIMED_OUT",t[t.FAILED_ACTIVATION_ATTRIBUTION_NAVIGATION_LOAD=12]="FAILED_ACTIVATION_ATTRIBUTION_NAVIGATION_LOAD",t[t.FAILED_ACTIVATION_ATTRIBUTION_NAVIGATION_TIMED_OUT=13]="FAILED_ACTIVATION_ATTRIBUTION_NAVIGATION_TIMED_OUT",t[t.ACTIVATED=14]="ACTIVATED"}(C||(C={})),function(t){t.CONTEXTUAL="CONTEXTUAL",t.HOME="HOME"}(b||(b={})),function(t){t.VIEWALL="viewAll",t.VIEWALLPC="viewAllPC",t.VIEWPRICEHISTORY="viewPriceHistory"}(S||(S={})),function(t){t.APPLY_COUPON_AND_AUTO_FILL="APPLY_COUPON_AND_AUTO_FILL",t.APPLY_COUPON="APPLY_COUPON",t.AUTO_FILL="AUTO_FILL",t.APPLY_COUPON_AND_AUTO_FILL_FOR_ZIP="APPLY_COUPON_AND_AUTO_FILL_FOR_ZIP",t.AUTO_FILLL_FOR_ZIP="AUTO_FILLL_FOR_ZIP"}(x||(x={})),function(t){t.CARD="card",t.ZIP="zipPay",t.AFFIRM="affirm"}(E||(E={})),function(t){t.PRICEDROP="PRICEDROP",t.PRICEINCREASE="PRICEINCREASE"}(A||(A={})),function(t){t.AUTOS="autos"}(T||(T={})),function(t){t.US="en-us",t.CA="en-ca",t.GB="en-gb"}(I||(I={})),function(t){t.ONLINEONLY="online only"}(D||(D={})),function(t){t.CLOSE="btnFlyoutClose",t.MENU="btnMainMenu",t.MENUCONTENT="divMenuContent",t.SNOOZE="btnFlyoutSnoozeOn",t.SNOOZE_CONTENT="divSnoozeContent"}(k||(k={}))},657:function(t,e,i){"use strict";var n;i.d(e,{g:function(){return n}}),function(t){t.EdgeImpressionId="EdgeImpressionId",t.CouponImpressionId="CouponImpressionId",t.DomainName="DomainName",t.Client="Client"}(n||(n={}))},872:function(t,e,i){"use strict";var n,o,a,r;i.d(e,{_f:function(){return o},bS:function(){return n}}),function(t){t.COUPONS_COPIED="COUPONS_COPIED",t.DISMISSED="DISMISSED",t.FLYOUT_SNOOZED="SNOOZED",t.FLYOUT_SNOOZE_UNDO="FLYOUT_SNOOZE_UNDO",t.FRE_DISMISSED="FRE_DISMISSED",t.FRE_GOT_IT="FRE_GOT_IT",t.FRE_MANAGE="FRE_MANAGE",t.FRE_NO_THANKS="FRE_NO_THANKS",t.FRE_SETTINGS="FRE_SETTINGS",t.MANAGE="MANAGE",t.NAVIGATE_TO_RETAILER="NAVIGATE_TO_RETAILER",t.TRY_ALL_COUPONS="TRY_ALL_COUPONS",t.TURN_OFF_AUTO_SHOW="TURN_OFF_AUTO_SHOW",t.TURN_ON_AUTO_SHOW="TURN_ON_AUTO_SHOW",t.VIEW_MORE_COUPONS="VIEW_MORE_COUPONS",t.VIEW_MORE_RETAILERS="VIEW_MORE_RETAILERS",t.VIEW_MORE_TOP_RETAILERS="VIEW_MORE_TOP_RETAILERS",t.VIEW_MORE_GROCERY_COUPONS="VIEW_MORE_GROCERY_COUPONS",t.LIGHT_DISMISSED="LIGHT_DISMISSED",t.SHOW_MORE_SELLERS="SHOW_MORE_SELLERS",t.REBATES_LEARN_MORE="REBATES_LEARN_MORE",t.REBATES_ACCOUNT="REBATES_ACCOUNT",t.REBATES_HISTORY="REBATES_HISTORY",t.ACTIVATE_CASHBACK="ACTIVATE_CASHBACK",t.EXPAND_PRICE_HISTORY_GRAPH="EXPAND_PRICE_HISTORY_GRAPH",t.HIDE_PRICE_HISTORY_GRAPH="HIDE_PRICE_HISTORY_GRAPH",t.FIRST_HOVER_PRICE_HISTORY_GRAPH="FIRST_HOVER_PRICE_HISTORY_GRAPH",t.VIEW_PRICE_HISTORY="VIEW_PRICE_HISTORY",t.HIDE_PRICE_HISTORY="HIDE_PRICE_HISTORY",t.NAVIGATE_TO_DEAL_OFFER="NAVIGATE_TO_DEAL_OFFER",t.NAVIGATE_TO_PROFESSIONAL_REVIEW="NAVIGATE_TO_PROFESSIONAL_REVIEW",t.NAVIGATE_TO_VIDEO_REVIEW="NAVIGATE_TO_VIDEO_REVIEW",t.TRY_ALL_COUPON_WITH_EXPRESS_CHECKOUT="TRY_ALL_COUPON_WITH_EXPRESS_CHECKOUT",t.TRY_ALL_COUPON_WITH_EXPRESS_CHECKOUT_FORZIP="TRY_ALL_COUPON_WITH_EXPRESS_CHECKOUT_FORZIP",t.EXPRESS_CHECKOUT="EXPRESS_CHECKOUT",t.EXPRESS_CHECKOUT_FORZIP="EXPRESS_CHECKOUT_FORZIP",t.EXPRESS_CHECKOUT_WITHOUT_PAYMENT="EXPRESS_CHECKOUT_WITHOUT_PAYMENT",t.NAVIGATE_TO_RECOMMENDATION_OFFER="NAVIGATE_TO_RECOMMENDATION_OFFER",t.CLIP_COUPON="CLIP_COUPON",t.ACTIVATE_CASHBACK_NEW="ACTIVATE_CASHBACK_NEW",t.NAVIGATE_TO_OTHER_SELLER="NAVIGATE_TO_OTHER_SELLER",t.ADD_TO_CART_FROM_OTHER_SELLER="ADD_TO_CART_FROM_OTHER_SELLER",t.PRODUCT_HISTORY_NAVIGATION="PRODUCT_HISTORY_NAVIGATION",t.PRODUCT_HISTORY_EXPAND_SECTION="PRODUCT_HISTORY_EXPAND_SECTION",t.PRODUCT_HISTORY_COLLAPSE_SECTION="PRODUCT_HISTORY_COLLAPSE_SECTION",t.TIPS_CLICK="TIPS_CLICK",t.OPEN_FLYOUT_MICRO_NOTIFICATION="OPEN_FLYOUT_MICRO_NOTIFICATION",t.WALLET_HUB_NAVIGATION="WALLET_HUB_NAVIGATION",t.PAYMENT_OPTIONS_EXPAND_SECTION="PAYMENT_OPTIONS_EXPAND_SECTION",t.PAYMENT_OPTIONS_COLLAPSE_SECTION="PAYMENT_OPTIONS_COLLAPSE_SECTION",t.EXPRESS_CHECKOUT_ZIP_OPTION_SELECTED="EXPRESS_CHECKOUT_ZIP_OPTION_SELECTED",t.EXPRESS_CHECKOUT_SHOWN_IN_ZIP_FEATURE="EXPRESS_CHECKOUT_SHOWN_IN_ZIP_FEATURE",t.EXPRESS_CHECKOUT_ZIP_OPTION_SHOWN="EXPRESS_CHECKOUT_ZIP_OPTION_SHOWN",t.CONTINUE_TO_ZIP_CLICKED="CONTINUE_TO_ZIP_CLICKED",t.DELETE_TRACKER="DELETE_TRACKER",t.CASHBACK_RETAILER_CLICK="CASHBACK_RETAILER_CLICK",t.ACTIVATE_CASHBACK_RETURNED="ACTIVATE_CASHBACK_RETURNED",t.PRINT_COUPONS_CLICK="PRINT_COUPONS_CLICK",t.SELECT_PRINTABLE_COUPON="SELECT_PRINTABLE_COUPON",t.CLICK_SEEALL_PRINTABLE_COUPON="CLICK_SEEALL_PRINTABLE_COUPON",t.DIGITAL_GROCERY_COUPONS_CLICK="DIGITAL_GROCERY_COUPONS_CLICK",t.DIGITAL_GROCERY_COUPONS_SEEALL="DIGITAL_GROCERY_COUPONS_SEEALL",t.PACKAGE_TRACKING_OPT_IN="PACKAGE_TRACKING_TRACK_ORDER_OPT_IN",t.PACKAGE_TRACKING_OPT_OUT="PACKAGE_TRACKING_TRACK_ORDER_DO_NOT_TRACK",t.PACKAGE_TRACKING_EXPAND_SECTION="PACKAGE_TRACKING_EXPAND_SECTION",t.PACKAGE_TRACKING_SEE_MORE="PACKAGE_TRACKING_SEE_MORE",t.PACKAGE_TRACKING_COLLAPSE_SECTION="PACKAGE_TRACKING_COLLAPSE_SECTION",t.PACKAGE_TRACKING_TRACK_ORDER_DO_NOT_TRACK="PACKAGE_TRACKING_TRACK_ORDER_DO_NOT_TRACK",t.PACKAGE_TRACKING_CARD_CLICKED="PACKAGE_TRACKING_CARD_CLICKED",t.ACTIVATE_REWARDS_NEW="ACTIVATE_REWARDS_NEW",t.REWARDS_SIGNIN_CLICK="REWARDS_SIGNIN_CLICK",t.REWARDS_REDEEM_CLICK="REWARDS_REDEEM_CLICK",t.SUSTAINABILITYSHOP_CLICK="SUSTAINABILITYSHOP_CLICK",t.PWILO_NOTIFICATION_PRICE_DROP="PWILO_NOTIFICATION_PRICE_DROP",t.PWILO_NOTIFICATION_PRICE_DROP_DELETE="PWILO_NOTIFICATION_PRICE_DROP_DELETE",t.PWILO_NOTIFICATION_PRICE_DROP_DISABLE_REMINDERS="PWILO_NOTIFICATION_PRICE_DROP_DISABLE_REMINDERS",t.EXPRESS_CHECKOUT_ZIP_LEARN_MORE_LINK_CLICKED="EXPRESS_CHECKOUT_ZIP_LEARN_MORE_LINK_CLICKED",t.EXPRESS_CHECKOUT_ZIP_PREFERENCE_LINK_CLICKED="EXPRESS_CHECKOUT_ZIP_PREFERENCE_LINK_CLICKED",t.SUSTAINABILITY_LANDING_FULL_LEARN_MORE="SUSTAINABILITY_LANDING_FULL_LEARN_MORE",t.SUSTAINABILITY_LANDING_FOOTER_LEARN_MORE="SUSTAINABILITY_LANDING_FOOTER_LEARN_MORE",t.SUSTAINABILITY_PURCHASE_CONFIRMATION_LEARN_MORE="SUSTAINABILITY_PURCHASE_CONFIRMATION_LEARN_MORE",t.CLICK_PCB_CROSS_SESSION="CLICK_PCB_CROSS_SESSION",t.REWARD_JOIN_NOW="REWARD_JOIN_NOW",t.REWARD_MAYBE_LATER="REWARD_MAYBE_LATER",t.REWARD_DISMISS="REWARD_DISMISS",t.REWARD_LINK_CLICK="REWARD_LINK_CLICK",t.ATTAINABLE_COUPON_CONTINUE="ATTAINABLE_COUPON_CONTINUE",t.ATTAINABLE_COUPON_CLICK="ATTAINABLE_COUPON_CLICK",t.ATTAINABLE_COUPON_VIEWED="ATTAINABLE_COUPON_VIEWED",t.ACTIVATE_CLICK_ITEMIZED_CASHBACK="ACTIVATE_CLICK_ITEMIZED_CASHBACK",t.ACTIVATED_CLICK_ITEMIZED_CASHBACK="ACTIVATED_CLICK_ITEMIZED_CASHBACK",t.CLICK_ITEMIZED_CASHBACK_SEE_ALL="CLICK_ITEMIZED_CASHBACK_SEE_ALL",t.HOVER_INFO_ICON_ITEMIZED_CASHBACK="HOVER_INFO_ICON_ITEMIZED_CASHBACK",t.CLICK_DISCLAIMER_ITEMIZED_CASHBACK="CLICK_DISCLAIMER_ITEMIZED_CASHBACK"}(n||(n={})),function(t){t.CARD_VIEWED="CARD_VIEWED",t.CARD_CLICKED="CARD_CLICKED",t.CARD_DELETED="CARD_DELETED"}(o||(o={})),function(t){t[t.COUPONS_COPIED=0]="COUPONS_COPIED",t[t.DISMISSED=1]="DISMISSED",t[t.FRE_DISMISSED=2]="FRE_DISMISSED",t[t.FRE_GOT_IT=3]="FRE_GOT_IT",t[t.FRE_MANAGE=4]="FRE_MANAGE",t[t.FRE_NO_THANKS=5]="FRE_NO_THANKS",t[t.FRE_SETTINGS=6]="FRE_SETTINGS",t[t.MANAGE=7]="MANAGE",t[t.NAVIGATE_TO_RETAILER=8]="NAVIGATE_TO_RETAILER",t[t.TRY_ALL_COUPONS=9]="TRY_ALL_COUPONS",t[t.TURN_OFF_AUTO_SHOW=10]="TURN_OFF_AUTO_SHOW",t[t.TURN_ON_AUTO_SHOW=11]="TURN_ON_AUTO_SHOW",t[t.VIEW_MORE_COUPONS=12]="VIEW_MORE_COUPONS",t[t.VIEW_MORE_RETAILERS=13]="VIEW_MORE_RETAILERS",t[t.LIGHT_DISMISSED=14]="LIGHT_DISMISSED",t[t.SHOW_MORE_SELLERS=15]="SHOW_MORE_SELLERS",t[t.REBATES_LEARN_MORE=16]="REBATES_LEARN_MORE",t[t.REBATES_ACCOUNT=17]="REBATES_ACCOUNT",t[t.REBATES_HISTORY=18]="REBATES_HISTORY",t[t.ACTIVATE_CASHBACK=19]="ACTIVATE_CASHBACK",t[t.EXPAND_PRICE_HISTORY_GRAPH=20]="EXPAND_PRICE_HISTORY_GRAPH",t[t.HIDE_PRICE_HISTORY_GRAPH=21]="HIDE_PRICE_HISTORY_GRAPH",t[t.FIRST_HOVER_PRICE_HISTORY_GRAPH=22]="FIRST_HOVER_PRICE_HISTORY_GRAPH",t[t.VIEW_PRICE_HISTORY=23]="VIEW_PRICE_HISTORY",t[t.HIDE_PRICE_HISTORY=24]="HIDE_PRICE_HISTORY",t[t.NAVIGATE_TO_DEAL_OFFER=25]="NAVIGATE_TO_DEAL_OFFER",t[t.NAVIGATE_TO_PROFESSIONAL_REVIEW=26]="NAVIGATE_TO_PROFESSIONAL_REVIEW",t[t.NAVIGATE_TO_VIDEO_REVIEW=27]="NAVIGATE_TO_VIDEO_REVIEW",t[t.TRY_ALL_COUPON_WITH_EXPRESS_CHECKOUT=28]="TRY_ALL_COUPON_WITH_EXPRESS_CHECKOUT",t[t.EXPRESS_CHECKOUT=29]="EXPRESS_CHECKOUT",t[t.NAVIGATE_TO_RECOMMENDATION_OFFER=30]="NAVIGATE_TO_RECOMMENDATION_OFFER",t[t.CLIP_COUPON=31]="CLIP_COUPON",t[t.ACTIVATE_CASHBACK_NEW=32]="ACTIVATE_CASHBACK_NEW",t[t.ACTIVATE_REWARDS_NEW=33]="ACTIVATE_REWARDS_NEW",t[t.ADD_TO_CART_FROM_OTHER_SELLER=34]="ADD_TO_CART_FROM_OTHER_SELLER",t[t.PRODUCT_HISTORY_NAVIGATION=35]="PRODUCT_HISTORY_NAVIGATION",t[t.PRODUCT_HISTORY_EXPAND_SECTION=36]="PRODUCT_HISTORY_EXPAND_SECTION",t[t.PRODUCT_HISTORY_COLLAPSE_SECTION=37]="PRODUCT_HISTORY_COLLAPSE_SECTION",t[t.NAVIGATE_TO_OTHER_SELLER=38]="NAVIGATE_TO_OTHER_SELLER",t[t.TIPS_CLICK=39]="TIPS_CLICK",t[t.REWARDS_SIGNIN_CLICK=40]="REWARDS_SIGNIN_CLICK",t[t.REWARDS_REDEEM_CLICK=41]="REWARDS_REDEEM_CLICK",t[t.CASHBACK_OTHERSITES_CLICK=42]="CASHBACK_OTHERSITES_CLICK",t[t.WALLET_HUB_NAVIGATION=43]="WALLET_HUB_NAVIGATION",t[t.PAYMENT_OPTIONS_EXPAND_SECTION=44]="PAYMENT_OPTIONS_EXPAND_SECTION",t[t.PAYMENT_OPTIONS_COLLAPSE_SECTION=45]="PAYMENT_OPTIONS_COLLAPSE_SECTION",t[t.CASHBACK_RETAILER_CLICK=59]="CASHBACK_RETAILER_CLICK",t[t.ACTIVATE_CASHBACK_RETURNED=60]="ACTIVATE_CASHBACK_RETURNED",t[t.PRINT_COUPONS_CLICK=61]="PRINT_COUPONS_CLICK",t[t.SELECT_PRINTABLE_COUPON=62]="SELECT_PRINTABLE_COUPON",t[t.CLICK_SEEALL_PRINTABLE_COUPON=63]="CLICK_SEEALL_PRINTABLE_COUPON",t[t.DIGITAL_GROCERY_COUPONS_CLICK=64]="DIGITAL_GROCERY_COUPONS_CLICK",t[t.DIGITAL_GROCERY_COUPONS_SEEALL=65]="DIGITAL_GROCERY_COUPONS_SEEALL",t[t.PINTEREST_COUPON_COPIED=66]="PINTEREST_COUPON_COPIED",t[t.PINTEREST_CASHBACK_ACTIVATED=67]="PINTEREST_CASHBACK_ACTIVATED",t[t.PINTEREST_VIEW_PRICE_HISTORY=68]="PINTEREST_VIEW_PRICE_HISTORY",t[t.PACKAGE_TRACKING_EXPAND_SECTION=69]="PACKAGE_TRACKING_EXPAND_SECTION",t[t.PACKAGE_TRACKING_COLLAPSE_SECTION=70]="PACKAGE_TRACKING_COLLAPSE_SECTION",t[t.PACKAGE_TRACKING_TRACK_ORDER_OPT_IN=71]="PACKAGE_TRACKING_TRACK_ORDER_OPT_IN",t[t.PACKAGE_TRACKING_TRACK_ORDER_DO_NOT_TRACK=72]="PACKAGE_TRACKING_TRACK_ORDER_DO_NOT_TRACK",t[t.PACKAGE_TRACKING_CARD_CLICKED=73]="PACKAGE_TRACKING_CARD_CLICKED",t[t.PACKAGE_TRACKING_SEE_MORE=74]="PACKAGE_TRACKING_SEE_MORE",t[t.CLICK_PCB_CROSS_SESSION=75]="CLICK_PCB_CROSS_SESSION",t[t.REWARD_JOIN_NOW=76]="REWARD_JOIN_NOW",t[t.REWARD_MAYBE_LATER=77]="REWARD_MAYBE_LATER",t[t.REWARD_DISMISS=78]="REWARD_DISMISS",t[t.REWARD_LINK_CLICK=79]="REWARD_LINK_CLICK",t[t.ATTAINABLE_COUPON_CONTINUE=80]="ATTAINABLE_COUPON_CONTINUE",t[t.ATTAINABLE_COUPON_CLICK=81]="ATTAINABLE_COUPON_CLICK",t[t.ATTAINABLE_COUPON_VIEWED=82]="ATTAINABLE_COUPON_VIEWED"}(a||(a={})),function(t){t[t.CARD_VIEWED=0]="CARD_VIEWED",t[t.CARD_CLICKED=1]="CARD_CLICKED",t[t.CARD_DELETED=2]="CARD_DELETED"}(r||(r={}))},154:function(t,e,i){"use strict";var n,o;i.d(e,{r:function(){return n}}),function(t){t.COUPONS_AVAILABLE="COUPONS_AVAILABLE",t.COUPONS_AUTO_APPLY="COUPONS_AUTO_APPLY",t.COUPONS_CLIPPING="COUPONS_CLIPPING",t.PRICE_COMPARE_LOWER_PRICES="PRICE_COMPARE_LOWER_PRICES",t.PRICE_COMPARE_BEST_PRICE="PRICE_COMPARE_BEST_PRICE",t.REBATES_ACTIVATE_CASHBACK="REBATES_ACTIVATE_CASHBACK",t.REBATES_BING_CONFIRMATION="REBATES_BING_CONFIRMATION",t.PRICE_HISTORY_DROP="PRICE_HISTORY_DROP",t.PRICE_HISTORY_STABLE="PRICE_HISTORY_STABLE",t.PRICE_HISTORY_INCREASE="PRICE_HISTORY_INCREASE",t.DEALS="DEALS",t.PROFESSIONAL_REVIEWS="PROFESSIONAL_REVIEWS",t.VIDEO_REVIEWS="VIDEO_REVIEWS",t.RECOMMENDATIONS="RECOMMENDATIONS",t.ACTIVATE_CASHBACK_NEW="ACTIVATE_CASHBACK_NEW",t.EXPRESS_CHECKOUT="EXPRESS_CHECKOUT",t.ACTIVATE_REWARDS_NEW="ACTIVATE_REWARDS_NEW",t.OTHER_SELLER="OTHER_SELLER",t.PRODUCT_HISTORY="PRODUCT_HISTORY",t.PAYMENT_OPTIONS="PAYMENT_OPTIONS",t.TIPS="TIPS",t.PACKAGE_TRACKING_OPT_IN="PACKAGE_TRACKING_OPT_IN",t.PACKAGE_TRACKING_STATUS_VIEW="PACKAGE_TRACKING_STATUS_VIEW",t.CASHBACK_RETAILER="CASHBACK_RETAILER",t.GROCERY_PRINT_COUPONS="GROCERY_PRINT_COUPONS",t.GROCERY_DIGITAL_COUPONS="GROCERY_DIGITAL_COUPONS",t.PWILO_NOTIFICATION_PRICE_DROP="PWILO_NOTIFICATION_PRICE_DROP",t.SUSTAINABILITY_LANDING_FULL="SUSTAINABILITY_LANDING_FULL",t.SUSTAINABILITY_LANDING_FOOTER="SUSTAINABILITY_LANDING_FOOTER",t.SUSTAINABILITY_PURCHASE_CONFIRMATION="SUSTAINABILITY_PURCHASE_CONFIRMATION",t.ATTAINABLE_COUPONS="ATTAINABLE_COUPONS",t.ITEMIZED_CASHBACK="ITEMIZED_CASHBACK"}(n||(n={})),function(t){t[t.COUPONS_AVAILABLE=0]="COUPONS_AVAILABLE",t[t.COUPONS_AUTO_APPLY=1]="COUPONS_AUTO_APPLY",t[t.COUPONS_CLIPPING=2]="COUPONS_CLIPPING",t[t.PRICE_COMPARE_LOWER_PRICES=3]="PRICE_COMPARE_LOWER_PRICES",t[t.PRICE_COMPARE_BEST_PRICE=4]="PRICE_COMPARE_BEST_PRICE",t[t.PRICE_COMPARE_SHOW_MORE_SELLERS=5]="PRICE_COMPARE_SHOW_MORE_SELLERS",t[t.REBATES_ACTIVATE_CASHBACK=6]="REBATES_ACTIVATE_CASHBACK",t[t.REBATES_BING_CONFIRMATION=7]="REBATES_BING_CONFIRMATION",t[t.PRICE_HISTORY_DROP=8]="PRICE_HISTORY_DROP",t[t.PRICE_HISTORY_STABLE=9]="PRICE_HISTORY_STABLE",t[t.PRICE_HISTORY_INCREASE=10]="PRICE_HISTORY_INCREASE",t[t.DEALS=11]="DEALS",t[t.PROFESSIONAL_REVIEWS=12]="PROFESSIONAL_REVIEWS",t[t.VIDEO_REVIEWS=13]="VIDEO_REVIEWS",t[t.RECOMMENDATIONS=14]="RECOMMENDATIONS",t[t.ACTIVATE_CASHBACK_NEW=15]="ACTIVATE_CASHBACK_NEW",t[t.EXPRESS_CHECKOUT=16]="EXPRESS_CHECKOUT",t[t.ACTIVATE_REWARDS_NEW=17]="ACTIVATE_REWARDS_NEW",t[t.OTHER_SELLER=18]="OTHER_SELLER",t[t.PRODUCT_HISTORY=19]="PRODUCT_HISTORY",t[t.TIPS=20]="TIPS",t[t.PAYMENT_OPTIONS=21]="PAYMENT_OPTIONS",t[t.PWILO_NOTIFICATION_PRICE_DROP=22]="PWILO_NOTIFICATION_PRICE_DROP",t[t.YOUTUBE_COUPONS_HOME=23]="YOUTUBE_COUPONS_HOME",t[t.YOUTUBE_COUPONS_VIDEO=24]="YOUTUBE_COUPONS_VIDEO",t[t.YOUTUBE_COUPONS_RETAILER=25]="YOUTUBE_COUPONS_RETAILER",t[t.YOUTUBE_COUPONS_RETAILER_CHECKOUT=26]="YOUTUBE_COUPONS_RETAILER_CHECKOUT",t[t.YOUTUBE_COUPONS_AUTO_APPLY=27]="YOUTUBE_COUPONS_AUTO_APPLY",t[t.CASHBACK_RETAILER=28]="CASHBACK_RETAILER",t[t.GROCERY_PRINT_COUPONS=29]="GROCERY_PRINT_COUPONS",t[t.GROCERY_DIGITAL_COUPONS=30]="GROCERY_DIGITAL_COUPONS",t[t.PINTEREST_COUPONS_AVAILABLE=31]="PINTEREST_COUPONS_AVAILABLE",t[t.PINTEREST_REBATES_ACTIVATE_CASHBACK=32]="PINTEREST_REBATES_ACTIVATE_CASHBACK",t[t.PINTEREST_PRICE_HISTORY_DROP=33]="PINTEREST_PRICE_HISTORY_DROP",t[t.PINTEREST_PRICE_HISTORY_STABLE=34]="PINTEREST_PRICE_HISTORY_STABLE",t[t.PINTEREST_PRICE_HISTORY_INCREASE=35]="PINTEREST_PRICE_HISTORY_INCREASE",t[t.PACKAGE_TRACKING_OPT_IN=36]="PACKAGE_TRACKING_OPT_IN",t[t.PACKAGE_TRACKING_STATUS_VIEW=37]="PACKAGE_TRACKING_STATUS_VIEW",t[t.ATTAINABLE_COUPONS=38]="ATTAINABLE_COUPONS"}(o||(o={}))},731:function(t,e,i){"use strict";var n,o;i.d(e,{s:function(){return n}}),function(t){t[t.AUTO_SHOW_FRE=0]="AUTO_SHOW_FRE",t[t.AUTO_SHOW_COUPONS_CHECKOUT=1]="AUTO_SHOW_COUPONS_CHECKOUT",t[t.GOT_IT=2]="GOT_IT",t[t.BUTTON_FRE=3]="BUTTON_FRE",t[t.BUTTON=4]="BUTTON",t[t.AUTO_SHOW_LOWER_PRICE_FOUND=5]="AUTO_SHOW_LOWER_PRICE_FOUND",t[t.AUTO_SHOW_BING_SEARCH=6]="AUTO_SHOW_BING_SEARCH",t[t.AUTO_SHOW_REBATES=7]="AUTO_SHOW_REBATES",t[t.AUTO_SHOW_REBATES_CONFIRMATION=8]="AUTO_SHOW_REBATES_CONFIRMATION",t[t.AUTO_SHOW_REBATES_DEACTIVATED=9]="AUTO_SHOW_REBATES_DEACTIVATED",t[t.AUTO_SHOW_REBATES_BING=10]="AUTO_SHOW_REBATES_BING",t[t.AUTO_SHOW_REBATES_ORGANIC=11]="AUTO_SHOW_REBATES_ORGANIC",t[t.BANNER=12]="BANNER",t[t.AUTO_SHOW_PRICE_HISTORY=13]="AUTO_SHOW_PRICE_HISTORY",t[t.AUTO_SHOW_REBATES_ORGANIC_NEW=14]="AUTO_SHOW_REBATES_ORGANIC_NEW",t[t.AUTO_SHOW_REBATES_CHECKOUT=15]="AUTO_SHOW_REBATES_CHECKOUT",t[t.AUTO_SHOW_SERVER_DRIVEN_CHECKOUT=16]="AUTO_SHOW_SERVER_DRIVEN_CHECKOUT",t[t.AUTO_SHOW_PERSONALIZED_CASHBACK=17]="AUTO_SHOW_PERSONALIZED_CASHBACK",t[t.AUTO_SHOW_PERSONALIZED_CASHBACK_CONFIRMATION=18]="AUTO_SHOW_PERSONALIZED_CASHBACK_CONFIRMATION",t[t.AUTO_SHOW_URL_PARAM_REBATES=19]="AUTO_SHOW_URL_PARAM_REBATES",t[t.AUTO_SHOW_URL_PARAM_PRICE_COMPARISON=20]="AUTO_SHOW_URL_PARAM_PRICE_COMPARISON",t[t.AUTO_SHOW_URL_PARAM_PRICE_HISTORY=21]="AUTO_SHOW_URL_PARAM_PRICE_HISTORY",t[t.AUTO_SHOW_EXPRESS_CHECKOUT=22]="AUTO_SHOW_EXPRESS_CHECKOUT",t[t.AUTO_SHOW_SERVER_DRIVEN_ALL_PAGES=23]="AUTO_SHOW_SERVER_DRIVEN_ALL_PAGES",t[t.AUTO_SHOW_SERVER_DRIVEN_CONFIRMATION_PAGE=24]="AUTO_SHOW_SERVER_DRIVEN_CONFIRMATION_PAGE",t[t.AUTO_SHOW_SERVER_DRIVEN_HOME_PAGE=25]="AUTO_SHOW_SERVER_DRIVEN_HOME_PAGE",t[t.AUTO_SHOW_SERVER_DRIVEN_REWARDS=26]="AUTO_SHOW_SERVER_DRIVEN_REWARDS",t[t.AUTO_SHOW_COUPONS_CLIPPING=27]="AUTO_SHOW_COUPONS_CLIPPING",t[t.AUTO_SHOW_REBATES_ACTIVATION_FAILED=28]="AUTO_SHOW_REBATES_ACTIVATION_FAILED",t[t.AUTO_SHOW_REBATES_SWITCHED_TO_MSA=29]="AUTO_SHOW_REBATES_SWITCHED_TO_MSA",t[t.AUTO_SHOW_NOTIFICATION=30]="AUTO_SHOW_NOTIFICATION",t[t.AUTO_SHOW_OTHER_SELLERS=31]="AUTO_SHOW_OTHER_SELLERS",t[t.AUTO_SHOW_ITEM_ADDED_TO_CART_FROM_OTHER_SELLER=32]="AUTO_SHOW_ITEM_ADDED_TO_CART_FROM_OTHER_SELLER",t[t.AUTO_SHOW_PROFESSIONAL_REVIEWS=33]="AUTO_SHOW_PROFESSIONAL_REVIEWS",t[t.PIN_HUB=34]="PIN_HUB",t[t.AUTO_SHOW_VIRTUAL_CARD=35]="AUTO_SHOW_VIRTUAL_CARD",t[t.AUTO_SHOW_BING_CAMPAIGN=36]="AUTO_SHOW_BING_CAMPAIGN",t[t.OPEN_HUB_ICON=37]="OPEN_HUB_ICON",t[t.OPEN_FLYOUT_MICRO_NOTIFICATION=38]="OPEN_FLYOUT_MICRO_NOTIFICATION",t[t.OPEN_FLYOUT_MORE_MENU=39]="OPEN_FLYOUT_MORE_MENU",t[t.AUTO_SHOW_PACKAGE_TRACKING=40]="AUTO_SHOW_PACKAGE_TRACKING",t[t.AUTO_SHOW_SERVER_DRIVEN_NOTIFICATION=41]="AUTO_SHOW_SERVER_DRIVEN_NOTIFICATION",t[t.OPEN_FLYOUT_FROM_EDGE_DRIVER=42]="OPEN_FLYOUT_FROM_EDGE_DRIVER",t[t.AUTO_SHOW_GUEST_DOMAIN_COUPONS=43]="AUTO_SHOW_GUEST_DOMAIN_COUPONS",t[t.AUTO_SHOW_EXCLUSIVE_COUPONS=44]="AUTO_SHOW_EXCLUSIVE_COUPONS",t[t.AUTO_SHOW_SUSTAINABILITY_LANDING=45]="AUTO_SHOW_SUSTAINABILITY_LANDING",t[t.AUTO_SHOW_SUSTAINABILITY_PURCHASE=46]="AUTO_SHOW_SUSTAINABILITY_PURCHASE",t[t.AUTO_SHOW_REWARDS_ACTIVATION_FAILED=47]="AUTO_SHOW_REWARDS_ACTIVATION_FAILED",t[t.AUTO_SHOW_REWARDS_SWITCHED_TO_MSA=48]="AUTO_SHOW_REWARDS_SWITCHED_TO_MSA",t[t.AUTO_SHOW_ATTAINABLE_COUPONS=49]="AUTO_SHOW_ATTAINABLE_COUPONS",t[t.AUTO_SHOW_GIFT_CARD=50]="AUTO_SHOW_GIFT_CARD",t[t.AUTO_SHOW_PRINT_GROCERY=51]="AUTO_SHOW_PRINT_GROCERY",t[t.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK=52]="AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK"}(n||(n={})),function(t){t[t.NONE=0]="NONE",t[t.COUPONS_CHECKOUT=1]="COUPONS_CHECKOUT",t[t.COUPONS_CLIPPING=2]="COUPONS_CLIPPING",t[t.PRICE_COMPARE=4]="PRICE_COMPARE",t[t.PRICE_HISTORY=8]="PRICE_HISTORY",t[t.REBATES_CONFIRMATION=16]="REBATES_CONFIRMATION",t[t.REBATES_BING=32]="REBATES_BING",t[t.REBATES_ORGANIC=64]="REBATES_ORGANIC",t[t.REBATES_CHECKOUT=128]="REBATES_CHECKOUT",t[t.PERSONALIZED_CASHBACK=256]="PERSONALIZED_CASHBACK",t[t.PERSONALIZED_CASHBACK_CONFIRMATION=512]="PERSONALIZED_CASHBACK_CONFIRMATION",t[t.EXPRESS_CHECKOUT=1024]="EXPRESS_CHECKOUT",t[t.REWARDS=2048]="REWARDS",t[t.OTHER_SELLER=4096]="OTHER_SELLER",t[t.REVIEWS=8192]="REVIEWS",t[t.VIRTUAL_CARD=16384]="VIRTUAL_CARD",t[t.PACKAGE_TRACKING=32768]="PACKAGE_TRACKING",t[t.ATTAINABLE_COUPONS=1048576]="ATTAINABLE_COUPONS",t[t.REWARDS_GIFT_CARD=2097152]="REWARDS_GIFT_CARD",t[t.PRINT_GROCERY=4194304]="PRINT_GROCERY",t[t.GROCERY_ITEMIZED_CASHBACK=8388608]="GROCERY_ITEMIZED_CASHBACK"}(o||(o={}))},410:function(t,e,i){"use strict";var n;i.d(e,{$:function(){return n}}),function(t){t.CURRENT_TAB="CURRENT_TAB",t.NEW_FOREGROUND_TAB="NEW_FOREGROUND_TAB",t.NEW_BACKGROUND_TAB="NEW_BACKGROUND_TAB",t.NEW_WINDOW="NEW_WINDOW",t.NEW_IN_PRIVATE_TAB="NEW_IN_PRIVATE_TAB"}(n||(n={}))},913:function(t,e,i){"use strict";var n;i.d(e,{H:function(){return n}}),function(t){t.clippingCheckDiscount="msShoppingExp1",t.attainableCouponsAutoOpen="msShoppingExp2",t.tolokaCoupons="msShoppingExp3",t.autoOpenController="msShoppingExp7",t.sustainability="msShoppingExp4",t.groceryCashback="msShoppingExp10",t.rewardNotification="msShoppingExp16",t.snooze="msShoppingExp18",t.hideCoupons="msShoppingExp19",t.smallNotification="msShoppingExp20",t.remindLaterFooter="msShoppingExp21",t.orderStatusTrackingExp="msShoppingExp23",t.groceryAutoshow="msShoppingExp24",t.calculatedCutOffPriceFiltering="msShoppingExp25",t.couponsValidationCheck="msShoppingExp26",t.disableAutoOpen="msShoppingExp29",t.compressNotifications="msShoppingExp34",t.amazongiftCardExp="msShoppingExp35",t.savingsFoundExp="msShoppingExp36",t.isTrendingOffersEnabled="msShoppingExp39",t.couponsFiltering="msShoppingExp6",t.autoShowControlForFeature="msEdgeShoppingAutoShowControlForFeature",t.autofillAutoPopup="msAutofillAutoPopup",t.bannerShowCashback="msEdgeShoppingBannerRebates",t.bannerShowCoupons="msEdgeShoppingBannerCoupons",t.bannerShowPriceComparison="msEdgeShoppingBannerPriceCompare",t.bannerShowPriceHistory="msEdgeShoppingBannerPriceHistory",t.clarity="msEdgeShoppingClarityEnabled",t.clarityWithCookies="msEdgeShoppingClarityEnabledWithCookies",t.coloredHeader="msShoppingColoredHeader",t.couponsUX="msEdgeShoppingCouponsUXExperimentation",t.expressCheckout="msEdgeShoppingExpressCheckout",t.expressCheckoutFillDetails="msEdgeShoppingExpressCheckoutFillDetails",t.microNotification="msEdgeShoppingNotifications",t.pcBannerUXExperimentation1="msEdgeShoppingPCBannerUXExperimentation1",t.pcBannerUXExperimentation2="msEdgeShoppingPCBannerUXExperimentation2",t.pcBannerUXExperimentation3="msEdgeShoppingPCBannerUXExperimentation3",t.pcBannerUXExperimentation4="msEdgeShoppingPCBannerUXExperimentation4",t.pcBannerUXExperimentation5="msEdgeShoppingPCBannerUXExperimentation5",t.pcBannerUXExperimentation6="msEdgeShoppingPCBannerUXExperimentation6",t.priceDropNotification="msEdgeShoppingServerNotifications",t.ProductPageBackgroundAutoApply="msEdgeShoppingBackgroundAutoApplyForPDPAndHomePage",t.backgroundAutoApply="msEdgeShoppingBackgroundAutoApply",t.rewardFlyout="msEdgeShoppingRewards",t.serverSideRenderingEnabled="msEdgeServerSideShopping",t.showAmazonOtherSellers="msEdgeShoppingOtherSeller",t.showNudgeTipsOverlay="msShoppingExpNudge",t.showPaymentOptions="msZipPayVirtualCard",t.showPaymentOptionsOnProductPage="msEdgeShoppingProductFlyoutWallet",t.showProductHistory="msWebAssistQuery",t.showWalletFooter="msEnableWallet",t.signinRebates="msEdgeShoppingRebatesSignUp",t.signinRewards="msEdgeShoppingRewardsSignUp",t.youtubeCoupons="msEdgeShoppingExclusiveCoupons",t.youtubeCouponsAutoShow="msEdgeShoppingExclusiveCouponsAutoShow"}(n||(n={}))},604:function(t,e,i){"use strict";var n,o,a,r,s,l,c,u,d;i.d(e,{Az:function(){return d},HS:function(){return c},R6:function(){return s},UD:function(){return a},Yi:function(){return o}}),function(t){t.B_Portrait1CTA="B_Portrait1CTA",t.A_Landscape1CTA="A_Landscape1CTA",t.CONTROL="control",t.C_Portrait2CTA="C_Portrait2CTA",t.D_Portrait2CTACurrentPrice="D_Portrait2CTACurrentPrice",t.E_Landscape1CTANoTitle="E_Landscape1CTANoTitle",t.F_Landscape2CTANoTitle="F_Landscape2CTANoTitle",t.G_Landscape1CTANoImage="G_Landscape1CTANoImage",t.H_Landscape2CTANoImage="H_Landscape2CTANoImage"}(n||(n={})),function(t){t.SmallerFootprintBasic="smallerfootprintbasic",t.NoCouponSection="nocouponsection"}(o||(o={})),function(t){t.AS_ReRankDA="AS_ReRankDA",t.AS_FeatureOpt="AS_FeatureOpt",t.AS_DailyCache="AS_DailyCache"}(a||(a={})),function(t){t.BiggerText="BiggerText",t.DropPercentage="DropPercentage"}(r||(r={})),function(t){t.CampaignOnePointFive="OnePointFive",t.CampaignFive="Five"}(s||(s={})),function(t){t.NoDismiss="NoDismiss"}(l||(l={})),function(t){t.ColoredHeaderExp1="ColoredHeaderExp1",t.ColoredHeaderExp2="ColoredHeaderExp2",t.ColoredHeaderExp3="ColoredHeaderExp3",t.ColoredHeaderExp4="ColoredHeaderExp4"}(c||(c={})),function(t){t.Trivia_NoIcon="NoIcon"}(u||(u={})),function(t){t.Rewards_50="Rewards50",t.Rewards_100="Rewards100",t.Rewards_200="Rewards200",t.Rewards_0="Rewards0"}(d||(d={}))},340:function(t,e,i){"use strict";i.d(e,{IY:function(){return o},e1:function(){return n}});var n,o,a=i(75),r=i(682),s=i(370),l=i(135),c=i(113),u=i(657);!function(t){t.onCashbackActivationError="onCashbackActivationError",t.onCashBackActivated="onCashBackActivated",t.onCashBackActivatedForRewards="onCashBackActivatedForRewards",t.telemetryCashBackActivationError="telemetryCashBackActivationError",t.telemetryCashBackActivated="telemetryCashBackActivated",t.StyleActivatedState="StyleActivatedState",t.StyleProcessingState="StyleProcessingState",t.CreateCommissionArrow="CreateCommissionArrow",t.CreateModules="CreateModules",t.CreateInlineRating="CreateInlineRating",t.ModulesRendered="ModulesRendered",t.PWILOPriceHistory="PWILOPriceHistory",t.onRebatesTelemetrySuccess="onRebatesTelemetrySuccess",t.onRebatesTelemetryFail="onRebatesTelemetryFail",t.onRewardsTelemetrySuccess="onRewardsTelemetrySuccess",t.onRewardsTelemetryFail="onRewardsTelemetryFail",t.onMicroNotificationClick="onMicroNotificationClick",t.onNotificationClick="onNotificationClick",t.onFlyoutResize="onFlyoutResize",t.CreateAutoApplyButton="CreateAutoApplyButton",t.pcCreateHeader="pcCreateHeader",t.rebatesSignInPendingSuccess="rebatesSignInPendingSuccess",t.rebatesSignInFail="rebatesSignInFail",t.CreateCouponHeader="CreateCouponHeader",t.PDPUpdate="PDPUpdate",t.CreatePHHeader="CreatePHHEader",t.onDataUpdate="onDataUpdate",t.domainEligibility="domainEligibility",t.pdpEligibility="pdpEligibility",t.flyoutRefresh="flyoutRefresh",t.CreateTrivia="CreateTrivia",t.PWILODeleted="PWILODeleted",t.PWILOEmpty="PWILOEmpty",t.PDPRemoved="PDPRemoved",t.CreateCBLearnMore="CreateCBLearnMore"}(n||(n={})),function(t){t.isAutoApplyVisible="isAutoApplyVisible",t.topModuleName="topModuleName",t.topModulePriority="topModulePriority",t.renderedViewModuleCount="renderedViewModuleCount",t.microNotificationClicked="microNotificationClicked",t.modulesRendered="modulesRendered",t.isProductDetailPage="isProductDetailPage",t.pcLowestPriceImpression="pcLowestPriceImpression",t.canRenderAutoApply="canRenderAutoApply"}(o||(o={}));var d=function(){function t(e,i){(0,a.Z)(this,t),(0,s.Z)(this,"logModule",void 0),(0,s.Z)(this,"shopping",void 0),this.logModule=e,this.shopping=i,this.cleanStateMapping()}return(0,r.Z)(t,[{key:"getState",value:function(e){return t.stateMapping.get(e)}},{key:"setState",value:function(e,i){t.stateMapping.set(e,i)}},{key:"addEventListener",value:function(t,e){try{this.shopping.addEventListener(t,e)}catch(e){var i=u.g.EdgeImpressionId,n=new l.Z(c.xu.OnErrorInvoked);this.logModule.LogErrorEvent(c.R.EdgeFlyoutStatus,"addEventListener exception: ".concat(t," ").concat(e),n,i)}}},{key:"dispatchEvent",value:function(t){try{this.shopping.dispatchEvent(t)}catch(n){var e=u.g.EdgeImpressionId,i=new l.Z(c.xu.OnErrorInvoked);this.logModule.LogErrorEvent(c.R.EdgeFlyoutStatus,"dispatchEvent exception: ".concat(null==t?void 0:t.type," ").concat(n),i,e)}}},{key:"cleanStateMapping",value:function(){t.stateMapping=new Map}}]),t}();(0,s.Z)(d,"stateMapping",new Map),e.ZP=d},629:function(t,e,i){"use strict";var n=i(75),o=i(682),a=i(370),r=function(t){return!!(t instanceof Array&&Object.isFrozen(t))},s=function(t,e){return function(t){if(r(t)&&t.raw&&r(t.raw)&&t.length===t.raw.length&&1===t.length)return t.join("");throw new TypeError("Static Types only allows static Template literals")}(e)},l={createHTML:s,createScript:s,createScriptURL:s},c=function(){function t(){(0,n.Z)(this,t)}return(0,o.Z)(t,null,[{key:"getTrustedHTML",value:function(t){return this.staticPolicy.createHTML("",t)}},{key:"getTrustedScript",value:function(t){return this.staticPolicy.createHTML("",t)}},{key:"getTrustedScriptURL",value:function(t){return this.staticPolicy.createHTML("",t)}}]),t}();(0,a.Z)(c,"staticPolicy",window.trustedTypes?window.trustedTypes.createPolicy("shopping-static",l):l),e.Z=c},400:function(t,e,i){"use strict";i.d(e,{Z:function(){return G}});var n=i(94),o=i(75),a=i(682),r=i(200),s=i(351),l=i(405),c=i(858),u=i(370),d=i(39),h=i.n(d),p=i(557);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,c.Z)(t);if(e){var o=(0,c.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,l.Z)(this,i)}}var g,m,v,y,C,b,S=function(t){(0,s.Z)(i,t);var e=f(i);function i(t,n,a,s,l){var c;return(0,o.Z)(this,i),c=e.call(this),(0,u.Z)((0,r.Z)(c),"CashbackCategory",void 0),(0,u.Z)((0,r.Z)(c),"CashbackCommissionType",void 0),(0,u.Z)((0,r.Z)(c),"CashbackCommissionValue",void 0),(0,u.Z)((0,r.Z)(c),"Domain",void 0),(0,u.Z)((0,r.Z)(c),"AffiliateNetworkName",void 0),c.CashbackCategory=null!=t?t:"",c.CashbackCommissionType=null!=n?n:"",c.CashbackCommissionValue=null!=a?a:"",c.Domain=null!=s?s:"",c.AffiliateNetworkName=null!=l?l:"",c}return(0,a.Z)(i)}(i(183).Z),x=i(313),E=i(135),A=i(782),T=i(113),I=i(826),D=i(629),k=function(){function t(){(0,o.Z)(this,t)}return(0,a.Z)(t,[{key:"getStyles",value:function(){return"\n        #divErrorCashbackActivation {\n            display: grid;\n            margin-bottom: 5px;\n            grid-template-columns: auto auto;\n            grid-gap: 10px;\n            justify-content: center;\n            width: 100%;\n        }\n        #divCashBackPopup {\n            display: flex;\n            flex-direction: row;\n            text-align: center;\n        }\n        #pCashBackDescription {\n            display: inline;\n            text-align: start;\n            margin-top: 0px;\n        }\n        h1 {\n            display: -webkit-box;\n            overflow-wrap: anywhere;\n            overflow: hidden;\n            -webkit-box-orient: vertical;\n            text-align: start;\n            margin-top: 0px;\n        }\n        #divPreviousCashBack {\n            display: grid;\n            grid-template-columns: 110px 1fr 80px;\n            column-gap: 8px;\n            box-sizing: border-box;\n            justify-content: center;\n            padding: 5px 0px;\n            padding-inline: 9px 5px;\n        }\n        #btnPreviousCashBack {\n            min-height: 64px;\n            height: auto;\n            padding: 0px;\n            margin-top: 10px;\n            margin-bottom: 10px;\n            background: transparent;\n            cursor: pointer;\n            border: 1px solid rgba(0, 0, 0, 0.09);\n            border-radius: 4px;\n        }\n        #btnPreviousCashBack:focus {\n            border-color: #000000;\n            box-shadow: 0 0 0px 2px #ffffff inset;\n        }\n        .activated {\n            border-color: transparent;\n            background: rgba(0, 0, 0, 0.07);\n        }\n        .activated:hover {\n            outline: 2px solid transparent;\n            background-color: ButtonFace;\n            color: ButtonText;\n            border-color: ButtonText;\n        }\n        .activated:focus {\n            border-color: #000000;\n            box-shadow: 0 0 0px 2px #ffffff inset;\n        }\n        .divNotificationContent {\n            width: 100%;\n            display: flex;\n            flex-direction: column;\n            flex-grow: 2;\n            margin-left: 27px;\n            margin-right: 27px;\n            justify-content: center;\n        }\n        .pcbtooltip {\n            display: none;\n        }\n        #btnGotIt {\n            border: 1.5px solid;\n            border-radius: 8px;\n            border-color: #04AA6D;\n            padding: 14px 28px;\n            font-weight: 600;\n            cursor: pointer;\n            width: 100%;\n            height: 48px;\n          }\n        #productTitle:hover > .pcbtooltip {\n            display: block;\n            position: absolute;\n            top: 10px;\n            right: 26px;\n            font-size: 10px;\n            background: #FFFFFF;\n            line-height: 12px;\n            width: 137px;\n            font-family: Segoe UI;\n            text-align: center;\n            color: rgba(0, 0, 0, 0.6);\n            box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.2), 0px 6.4px 14.4px rgba(0, 0, 0, 0.13), 0px 0px 5.6px rgba(0, 0, 0, 0.11);\n            border-radius: 4px;\n            padding: 5px;\n        }\n        #divCashBackContent {\n            width: 100%;\n            display: flex;\n            flex-direction: column;\n            flex-grow: 2;\n            margin: 0px;\n            justify-content: center;\n            align-items: center;\n        }\n        .spanCommisionValue {\n            display: flex;\n            height: 30px;\n            line-height: 28px;\n            font-size: 24px;\n            background: #0078D4;\n            color: #fff;\n            font-weight: 500;\n            float: left;\n        }\n        .divCommissionValue {\n            display: inline-block;\n            margin: 0px;\n            vertical-align: middle;\n        }\n        .h2RebatesTitle {\n            display: inline-block;\n            margin: 0px;\n            font-weight: 500;\n            font-size: 24px;\n            line-height: 36px;\n            vertical-align: middle;\n            text-align: center;\n        }\n        .gradient {\n            color: transparent;\n            background:linear-gradient(92.78deg, #00D4A1 -58.01%, #0048D4 44.73%, #6A00D4 141.23%);\n            -webkit-background-clip: text\n        }\n        @media (prefers-color-scheme: dark) {\n            .activated {\n                background: rgba(255, 255, 255, 0.09);\n                color: #FFFFFF;\n            }\n            #btnPreviousCashBack {\n                border: 1px solid #FFFFFF;\n            }\n        }\n        @media (forced-colors: active) {\n            .activated {\n                background-color: Highlight;\n                forced-color-adjust: none;\n                color: highlightText;\n            }\n            .activated: focus {\n                box-shadow: 0 0 0 2px HighlightText inset;\n                border-color: buttonText;\n            }\n            .imgCBTag {\n                display: none;\n            }\n        }\n        #txtPersonalizedProduct {\n            text-align: center;\n            overflow: hidden;\n            overflow-wrap: break-word;\n            display: -webkit-box;\n            -webkit-line-clamp: 2;\n            -webkit-box-orient: vertical;\n        }\n        .fixedColorAnchor:hover::part(content)::before {\n            background: #FFFFFF;\n        }\n        .fixedColorAnchor {\n            color: #FFFFFF;\n        }\n    "}},{key:"getSmallerNotificationCssStyles",value:function(){return"\n        #divContentWrapper {\n            width: 268px;\n        }\n        .actionsButtonRefresh {\n            min-width: 236px;\n            height: 36px;\n            font-size: 14px !important;\n        }\n        .h2RebatesTitle {\n            font-weight: 500 !important;\n            font-size: 18px !important;\n            line-height: 24px !important;\n        }\n        "}},{key:"getTagLeft",value:function(){return D.Z.getTrustedHTML(g||(g=(0,I.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="7" height="30" viewBox="0 0 7 30" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.0003 0H3.5C1.567 0 0 1.567 0 3.5V26.5C0 28.433 1.567 30 3.5 30H7.0003V0Z" fill="#0078D4"/>'])))}},{key:"getTagRight",value:function(){return D.Z.getTrustedHTML(m||(m=(0,I.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="15" height="30" viewBox="0 0 15 30" fill="none"><path fill-rule="evenodd" clip-rule:"evenodd" d="M0,30h0.6c1,0,1.9-0.4,2.5-1.1L14,17.4c1.3-1.4,1.3-3.5,0-4.8L3.1,1.1C2.5,0.4,1.5,0,0.6,0H0V30z" fill="#0078D4"/>'])))}},{key:"getPersonalizedTagLeft",value:function(){return D.Z.getTrustedHTML(v||(v=(0,I.Z)(['<svg width="8" height="24" viewBox="0 0 8 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 4C0 1.79086 1.79086 0 4 0H8V24H4C1.79086 24 0 22.2091 0 20V4Z" fill="#0078D4"/></svg>'])))}},{key:"getPersonalizedTagRight",value:function(){return D.Z.getTrustedHTML(y||(y=(0,I.Z)(['<svg width="13" height="24" viewBox="0 0 13 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 0H0.0206958C1.03545 0 2.01228 0.385677 2.75332 1.07891L10.9799 8.77477C12.6313 10.3196 12.6748 12.9252 11.0757 14.5243L2.73137 22.8686C2.00697 23.593 1.02446 24 0 24V24V0Z" fill="#0078D4"/></svg>'])))}},{key:"getErrorIcon",value:function(){return D.Z.getTrustedHTML(C||(C=(0,I.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1ZM8 10.5C8.41421 10.5 8.75 10.8358 8.75 11.25C8.75 11.6642 8.41421 12 8 12C7.58579 12 7.25 11.6642 7.25 11.25C7.25 10.8358 7.58579 10.5 8 10.5ZM8 4C8.24546 4 8.44961 4.17688 8.49194 4.41012L8.5 4.5V9C8.5 9.27614 8.27614 9.5 8 9.5C7.75454 9.5 7.55039 9.32312 7.50806 9.08988L7.5 9V4.5C7.5 4.22386 7.72386 4 8 4Z" fill="#CC0000"/></svg>'])))}},{key:"getConfirmationInfoIcon",value:function(){return D.Z.getTrustedHTML(b||(b=(0,I.Z)(['<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path opacity="0.4" d="M5.4 6.6C5.4 6.26863 5.66863 6 6 6C6.33137 6 6.6 6.26863 6.6 6.6V8.4C6.6 8.73137 6.33137 9 6 9C5.66863 9 5.4 8.73137 5.4 8.4V6.6ZM6 3.3C5.50294 3.3 5.1 3.70294 5.1 4.2C5.1 4.69706 5.50294 5.1 6 5.1C6.49706 5.1 6.9 4.69706 6.9 4.2C6.9 3.70294 6.49706 3.3 6 3.3ZM0 6C0 2.68629 2.68629 0 6 0C9.31371 0 12 2.68629 12 6C12 9.31371 9.31371 12 6 12C2.68629 12 0 9.31371 0 6ZM6 1.2C3.34903 1.2 1.2 3.34903 1.2 6C1.2 8.65097 3.34903 10.8 6 10.8C8.65097 10.8 10.8 8.65097 10.8 6C10.8 3.34903 8.65097 1.2 6 1.2Z" fill="black" fill-opacity="0.83"/>\n        </svg>'])))}}]),t}(),w=i(365),R=i(388),O=i(13),P=i(657),M=i(872),N=i(154),L=i(731),_=i(410),F=i(913),H=i(604),Z=i(340);function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,c.Z)(t);if(e){var o=(0,c.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,l.Z)(this,i)}}var U=function(t){(0,s.Z)(y,t);var e,i,l,c,d,f,g,m,v=B(y);function y(t,e,i,n){var a;return(0,o.Z)(this,y),a=v.call(this),(0,u.Z)((0,r.Z)(a),"assets",void 0),(0,u.Z)((0,r.Z)(a),"logModule",void 0),(0,u.Z)((0,r.Z)(a),"pageHandlerModule",void 0),(0,u.Z)((0,r.Z)(a),"stateManagement",void 0),(0,u.Z)((0,r.Z)(a),"flyoutData",void 0),(0,u.Z)((0,r.Z)(a),"utilities",void 0),(0,u.Z)((0,r.Z)(a),"currencySymbol","$"),(0,u.Z)((0,r.Z)(a),"commonAssets",void 0),(0,u.Z)((0,r.Z)(a),"stylesAdded",!1),a.logModule=i.logModule,a.pageHandlerModule=i.pageHandlerModule,a.stateManagement=t,a.flyoutData=e,a.utilities=i.viewModulesUtilities,a.assets=new k,a.commonAssets=n,a}return(0,a.Z)(y,[{key:"setInitialStatesAndListeners",value:function(){var t=this;this.stateManagement.addEventListener(Z.e1.CreateCommissionArrow,(function(e){e.detail&&e.detail.callback&&t.createCommissionArrow(!1,e.detail.callback)})),this.stateManagement.addEventListener(Z.e1.StyleProcessingState,(function(e){e.detail&&e.detail.target&&t.styleProcessingState(e.detail.target)})),this.stateManagement.addEventListener(Z.e1.onRebatesTelemetryFail,(function(e){if(e.detail&&e.detail.status){var i=new E.Z(T.xu.ErrorCashBackActivation);t.logModule.LogErrorEvent(T.R.EdgeFlyoutStatus,"Cashback activation error - ".concat(e.detail.status),i)}})),this.stateManagement.addEventListener(Z.e1.onRebatesTelemetrySuccess,(function(){var e=new E.Z(T.xu.CashBackActivated);t.logModule.LogInfoEvent(T.R.EdgeFlyoutStatus,"Cashback activated",e)})),this.stateManagement.addEventListener(Z.e1.rebatesSignInPendingSuccess,(function(){t.updateFlyoutSuccessStatus()})),this.stateManagement.addEventListener(Z.e1.rebatesSignInFail,(function(){t.updateFlyoutFailStatus()})),this.stateManagement.addEventListener(Z.e1.CreateCBLearnMore,(function(e){e.detail&&e.detail.callback&&t.createSeeOffersButton(e.detail.callback)}))}},{key:"GetModuleName",value:function(){return O.GX.CASHBACK}},{key:"ShouldRenderModule",value:function(){var t,e,i,n,o,a,r,s=this.flyoutData.dataStoreModule.CashBackData;s&&this.pageHandlerModule.TriggerExperiment(F.H.signinRebates);var l=null!==(t=null==s?void 0:s.canRenderCashback)&&void 0!==t&&t;if(!l&&null!=s&&null!==(e=s.highestCashBackCategory)&&void 0!==e&&e.commissionValue){var c,u,d,h=new E.Z(T.xu.CashBackWillNotRender);this.logModule.LogInfoEvent(T.R.EdgeFlyoutStatusDiagnostic," isRebatesUser: "+(null!==(c=null==s||null===(u=s.userRebatesResponse)||void 0===u?void 0:u.isRebatesUser)&&void 0!==c&&c)+" isRebatesSupportedDomain: "+(null!==(d=null==s?void 0:s.IsRebatesSupportedDomain)&&void 0!==d&&d),h)}l&&this.setInitialStatesAndListeners();var p=null!==(i=(null===(n=this.flyoutData.dataStoreModule.CouponData)||void 0===n?void 0:n.isCheckoutPageWithAutoApply)&&!(null!==(o=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==o&&o.isCashBackActivated)&&!(null!==(a=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==a&&null!==(r=a.userRebatesResponse)&&void 0!==r&&r.latestCashbackApproved))&&void 0!==i&&i,f=l&&!p;return l&&(this.stylesAdded=!0,this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles())),f}},{key:"populateActiveCashbackList",value:(m=(0,n.Z)(h().mark((function t(e,i,n,o){var a,r,s,l,c,u,d;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=21;break}a=0,o.length>0&&(a=o.length),r=0,i&&(s=O.CS.PREVIOUS_CASHBACK-1,(l=null==e?void 0:e.querySelectorAll("#productRow"+s))&&l.length>0&&(l[0].style.borderBottom="1px solid rgba(0, 0, 0, 0.04)")),i?r=O.CS.PREVIOUS_CASHBACK:a>O.CS.PREVIOUS_CASHBACK&&(a=O.CS.PREVIOUS_CASHBACK),c=r;case 7:if(!(c<a)){t.next=18;break}if(!(u=o[c]).scope||""===u.scope){t.next=15;break}return t.next=12,this.createPersonalizedCashbackRow(u,c);case 12:d=t.sent,c===a-1&&(d.style.borderBottom=""),e.appendChild(d);case 15:c++,t.next=7;break;case 18:case 21:return t.abrupt("return",Promise.resolve());case 22:case"end":return t.stop()}}),t,this)}))),function(t,e,i,n){return m.apply(this,arguments)})},{key:"logUserEngagement",value:function(){this.pageHandlerModule.RecordAsUserAction(M.bS.ACTIVATE_CASHBACK);var t=new x.Z(T.$S.ActivateCashBack);this.logModule.LogInfoEvent(T.R.ButtonClick,"Cashback Got it button click",t,P.g.CouponImpressionId)}},{key:"canLogUserInteraction",value:(g=(0,n.Z)(h().mark((function t(){var e,i,n,o,a,r,s,l;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.flyoutData.dataLoader.GetLoadTimeDataValue("storage",void 0))){t.next=6;break}n={value:{stringValue:e.UserImpression}},i=n,t.next=9;break;case 6:return t.next=8,this.pageHandlerModule.GetStorageValue("UserImpression");case 8:i=t.sent;case 9:return o=!0,i&&""!==i&&(r=i.value)&&(a=null!==(s=r.stringValue)&&void 0!==s?s:null,l=parseInt(a,10),a&&""!==a&&Date.now()-new Date(l).getTime()<864e5&&(o=!1)),t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)})},{key:"renderModule",value:(f=(0,n.Z)(h().mark((function t(){var e,i,o,a,r,s,l,c,u,d,p,f,g,m,v,y,C,b,E,A,I,D,k,R,N,_,H,B,U,G,V,$,W,z,K,Y,j,X,q,J,Q=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.stylesAdded||this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),!(e=this.flyoutData.dataStoreModule.CashBackData)){t.next=48;break}if((l=document.createElement("msft-edge-shopping-section")).id="cashBackSection",l.style.width="100%",l.accordion=!0,l.expanded=!1,c=this.utilities.createElement("DIV",{id:"divCashBackPopup"}),u=this.retrieveCashBackAmount(e.personalizedCashback),d=null!==(i="storewide"===(null===(o=e.highestCashBackCategory)||void 0===o||null===(a=o.category)||void 0===a?void 0:a.toLowerCase())||"storewide"===(null===(r=e.personalizedCashback)||void 0===r||null===(s=r.scope)||void 0===s?void 0:s.toLowerCase()))&&void 0!==i&&i,""===u){t.next=48;break}if((C=this.utilities.createElement("DIV",{className:"txtMedium"})).id="divCashBackContent",this.flyoutData.common.popupOrigination!==L.s.AUTO_SHOW_REBATES){t.next=19;break}return t.next=17,this.canLogUserInteraction();case 17:t.sent&&(this.logUserEngagement(),(b=new w.Z).stringValue=Date.now().toString(),this.pageHandlerModule.SetStorageValue("UserImpression",b));case 19:if(!e.isPersonalizedCashback){t.next=30;break}for(E=function(t){var e=O.CS.PREVIOUS_CASHBACK;return t&&A.common.bannerContext===O.De.VIEWALL&&(e=t.length),e},A=this.flyoutData,I=[],D=0;D<(null===(k=e.adsCashback)||void 0===k?void 0:k.length);D++)!(R=e.adsCashback[D]).scope||""===R.scope||0!==D&&R.scope===e.adsCashback[D-1].scope||I.push(R);return C.style.alignItems="normal",N=this.utilities.createElement("DIV"),t.next=28,this.populateActiveCashbackList(N,!1,!1,I);case 28:this.utilities.createCommonListStructure(N,"",I,this.GetModuleName(),E,this.populateActiveCashbackList.bind(this)),C.appendChild(N);case 30:return(_=(null===(p=this.flyoutData.dataStoreModule.CouponData)||void 0===p?void 0:p.isCheckoutPageWithAutoApply)&&!(null!==(f=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==f&&f.isCashBackActivated))||(B=this.createCashBackTitle(e.isCashBackActivated,d,null===(H=e.personalizedCashback)||void 0===H?void 0:H.scope),e.isPersonalizedCashback||C.appendChild(B)),U=this.stateManagement.getState(Z.IY.isAutoApplyVisible),e.isSignInSupportedDomainCashBack&&U&&((G=this.utilities.createBaseActionButton()).id="rebatesButton",this.flyoutData.common.popupOrigination===L.s.AUTO_SHOW_REBATES_ORGANIC&&(G.style.width="336px"),this.renderCurrentButtonState(G,!1),this.pageHandlerModule.TriggerExperiment(F.H.rewardFlyout),G.addEventListener("click",function(){var t=(0,n.Z)(h().mark((function t(i){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e||!e.isSignInSupportedDomainCashBack){t.next=9;break}return n=new x.Z(T.$S.ActivateCashBack),Q.pageHandlerModule.RecordAsUserAction(M.bS.ACTIVATE_CASHBACK),Q.pageHandlerModule.RecordAsUserAction(M.bS.ACTIVATE_CASHBACK_NEW),Q.logModule.LogInfoEvent(T.R.ButtonClick,"Sign in started",n,P.g.CouponImpressionId),t.next=7,Q.pageHandlerModule.ActivateRebates(!0);case 7:t.next=13;break;case 9:return t.next=11,Q.handleActivateCashbackClick(G,i,"Cash back activation started");case 11:t.sent?Q.styleActivatedState(G,!1,!0):Q.styleDefaultState(G,Q.flyoutData.strings.cbActivateButtonRefresh,!1);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),C.appendChild(G)),_||(V=this.createSeeOffersButton()),this.flyoutData.experimentData.isExperimentActive(F.H.snooze)||this.flyoutData.common.openedWith!==O.Te.Auto||this.flyoutData.common.popupOrigination!==L.s.AUTO_SHOW_REBATES&&this.flyoutData.common.popupOrigination!==L.s.AUTO_SHOW_REBATES_ORGANIC?V&&(this.flyoutData.common.openedWith!==O.Te.Auto||this.flyoutData.common.popupOrigination!==L.s.AUTO_SHOW_REBATES&&this.flyoutData.common.popupOrigination!==L.s.AUTO_SHOW_REBATES_ORGANIC?C.appendChild(V):((z=this.utilities.createElement("DIV")).style.display="flex",z.id="cbButtonSection",z.style.flexDirection="column",z.style.marginTop="10px",z.style.marginBottom="2px",C.appendChild(z))):(($=this.utilities.createElement("DIV")).style.display="flex",$.id="cbButtonSection",$.style.flexDirection="column",(W=this.utilities.createRemindLaterButton())&&!this.flyoutData.experimentData.isExperimentActive(F.H.remindLaterFooter)&&$.appendChild(W),C.appendChild($)),e.isSignInSupportedDomainCashBack&&(K=this.createPrivacyMessage())&&C.appendChild(K),c.appendChild(C),l.appendChild(c),Y=this.CreateModule(l,O.H7.CASHBACK,O.GX.CASHBACK,O.$k.CONTEXTUAL),e&&e.highestCashBackCategory?(j=e.highestCashBackCategory.category,X=e.highestCashBackCategory.commissionType,q=e.highestCashBackCategory.commissionValue):e&&e.personalizedCashback&&(j=e.personalizedCashback.scope,X=e.personalizedCashback.commissionType,q=e.personalizedCashback.commissionValue),J=new S(j,X,q,this.flyoutData.common.domain,e.affiliateNetwork),this.logModule.LogInfoEvent(T.R.CashbackInfo,"User saw cashback info: userRebatesResponse?: ".concat(!!e.userRebatesResponse," isRebatesUser: ").concat(null!==(g=null===(m=e.userRebatesResponse)||void 0===m?void 0:m.isRebatesUser)&&void 0!==g&&g," isRebatesSupportedDomain: ").concat(null!==(v=e.IsRebatesSupportedDomain)&&void 0!==v&&v),J,P.g.CouponImpressionId),this.logModule.LogInfoEvent(T.R.CashbackInfo,"User saw cashback info part2: merchantFullName: ".concat(e.merchantFullName," isSignInSupportedDomain: ").concat(null!==(y=e.isSignInSupportedDomain)&&void 0!==y&&y),J,P.g.CouponImpressionId),this.stateManagement.addEventListener(Z.e1.onCashbackActivationError,(function(t){Q.renderErrorState(t.detail.cashbackButton,t.detail.slot)})),this.stateManagement.addEventListener(Z.e1.onCashBackActivated,(function(){if(!0===l.accordion){var t,e=null===(t=l.shadowRoot)||void 0===t?void 0:t.querySelector("span[part=title]");if(e){var i=Q.flyoutData.strings.cbRebatesOn,n=Q.utilities.createElement("B");n.textContent=i;var o=Q.flyoutData.strings.cbCashBackOnOff;Q.utilities.populateSingleChildHtml(e,o,n)}}})),this.shouldRenderPreviousCashback()&&e.userRebatesResponse&&e.userRebatesResponse.isRebatesUser&&Y&&e.userRebatesResponse.latestCashbackApproved&&this.renderPreviousCashBackModule(Y.element,e),t.abrupt("return",Promise.resolve(Y));case 48:return t.abrupt("return",Promise.resolve(null));case 49:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"shouldRenderPreviousCashback",value:function(){return!(this.flyoutData.common.popupOrigination===L.s.AUTO_SHOW_REBATES_ORGANIC||this.flyoutData.common.popupOrigination===L.s.AUTO_SHOW_REBATES)}},{key:"createPersonalizedCashbackRow",value:(d=(0,n.Z)(h().mark((function t(e,i){var o,a,r,s,l,c,u,d,p,f,g,m,v,y,C,b,S,x,E,A,T,I,D,k=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=this.utilities.createElement("A",{id:"productRow"+i})).style.textDecoration="none",o.style.borderBottom="1px solid rgba(0, 0, 0, 0.04)",o.target="_blank",o.href="#",o.addEventListener("click",function(){var t=(0,n.Z)(h().mark((function t(i){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.preventDefault(),k.pageHandlerModule.RecordAsUserAction(M.bS.CLICK_PCB_CROSS_SESSION),k.pageHandlerModule.NavigateToUrl(e.productUrl+"&fromAdsFlyout=1");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(a=this.utilities.createElement("DIV")).style.display="flex",a.style.columnGap="16px",a.style.fontWeight="bold",a.style.marginTop="16px",a.style.marginLeft="10px",this.utilities.applyStyles(this.flyoutData.common.shopping,"::part(header) {\n                margin-top: 0px;\n                mragin-left: 0px;\n            }"),r=this.utilities.createElement("IMG",{id:"productImage"}),e.imageUrl&&""!==e.imageUrl?(r.src=e.imageUrl,e.imageUrl.indexOf("bing.com")>0?r.src=e.imageUrl:r.src="https://www.bing.com"+e.imageUrl):(r.src="".concat(this.flyoutData.common.resourcesEndpoint,"retailerBranding/SquareIcons/").concat(this.flyoutData.common.domain,".png"),a.style.marginBottom="10px",r.style.borderRadius="8px"),r.setAttribute("aria-label",e.scope),r.style.height="100%",r.style.width="100%",r.style.objectFit="contain",(s=this.utilities.createElement("A")).target="_blank",s.style.width="100px",s.style.height="100px",s.style.zIndex="0",s.style.marginBottom="16px",(l=this.utilities.createElement("DIV")).style.width="100px",l.style.height="100px",l.style.background="rgba(32,33,36,0.039)",l.style.borderRadius="8px",(c=this.utilities.createElement("DIV")).style.width="100px",c.style.height="100px",c.style.zIndex="-1",c.style.position="relative",c.appendChild(r),l.appendChild(c),s.appendChild(l),a.appendChild(s),(u=this.utilities.createElement("DIV",{id:"productTitleCol"})).style.display="flex",u.style.flexDirection="column",u.style.alignItems="start",u.style.rowGap="7.5px",e.imageUrl&&""!==e.imageUrl?((p=this.utilities.createElement("DIV",{id:"favIconRow"})).style.display="flex",p.style.columnGap="5px",(f=this.utilities.createElement("IMG",{id:"domainFavIcon"})).style.maxHeight="16px",f.style.maxWidth="16px",f.style.fontWeight="600",this.utilities.addFavIconSrc(f,p,this.flyoutData.common.domain),g=this.utilities.createElement("DIV",{id:"productTitle"}),m=this.utilities.createElement("SPAN"),(null===(d=e.scope)||void 0===d?void 0:d.length)>50?m.textContent=e.scope.substring(0,50)+"...":m.textContent=e.scope,m.style.position="relative",m.style.top="-5px",g.appendChild(m),g.className="txtSmall pcbicon",g.style.fontSize="12px",g.style.fontWeight="normal",g.style.textAlign="left",p.appendChild(g),u.appendChild(p)):u.style.justifyContent="center",v=this.utilities.createElement("DIV",{id:"cashbackStr"}),0!==i?v.textContent=this.utilities.replaceValueInKey("cbCommissionStr",this.flyoutData.strings.cbCommissionStr,this.retrieveCashBackAmount(e)):(A=null!==(y="storewide"===(null==e||null===(C=e.personalizedCashback)||void 0===C||null===(b=C.scope)||void 0===b?void 0:b.toLowerCase()))&&void 0!==y&&y,T=this.createCashBackTitle(null===(S=this.flyoutData.dataStoreModule)||void 0===S||null===(x=S.CashBackData)||void 0===x||null===(E=x.userRebatesResponse)||void 0===E?void 0:E.isRebatesUser,A,this.retrieveCashBackAmount(e)),v.textContent=T.textContent),v.style.fontSize="12px",v.style.lineHeight="20px",v.style.textAlign="left",v.style.color="#000000",u.appendChild(v),(I=this.utilities.createElement("DIV",{id:"dateTime"})).style.background="linear-gradient(90deg, rgba(255, 236, 210, 0.3) 0%, rgba(251, 225, 217, 0.3) 100%), #F5F5F5",I.style.borderRadius="4px",I.style.width="106px",I.style.height="20px",I.style.display="flex",I.style.alignItems="center",I.style.justifyContent="center",(D=this.utilities.createElement("DIV")).style.fontSize="12px",D.style.lineHeight="14px",D.style.fontFamily="Segoe UI",D.style.color="rgba(201, 69, 69, 1)",D.textContent=this.utilities.replaceValueInKey("cbExpiryDateTime",this.flyoutData.strings.cbExpiryDateTime,this.getTimeDifference(Date.now(),1e3*e.expireTimeEpoch)),I.appendChild(D),u.appendChild(I),a.appendChild(u),o.appendChild(a),t.abrupt("return",o);case 72:case"end":return t.stop()}}),t,this)}))),function(t,e){return d.apply(this,arguments)})},{key:"getTimeDifference",value:function(t,e){var i=e-t,n=6e4,o=36e5,a=i/o,r=(i%=o)/n;return i%=n,(a|=0)+"h "+(r|=0)+"m"}},{key:"getStorageData",value:(c=(0,n.Z)(h().mark((function t(e){var i,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pageHandlerModule.GetStorageValue("CashbackProductUrl:"+e);case 2:if(!(i=t.sent)){t.next=7;break}if(null==(n=i)||!n.value){t.next=7;break}return t.abrupt("return",n.value.stringValue);case 7:return t.abrupt("return","");case 8:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"setStorageData",value:function(t,e){var i=new w.Z;i.stringValue=e,this.pageHandlerModule.SetStorageValue("CashbackProductUrl:"+t,i)}},{key:"populateMainHeader",value:function(){var t=this;if(this.flyoutData.common.shopping){var e,i=new CustomEvent(Z.e1.CreateTrivia,{detail:{parent:this.flyoutData.common.shopping}});this.stateManagement.dispatchEvent(i);var n=this.flyoutData.common.shopping.querySelector("#cashBackSection");n&&(n.style.marginTop="0px",n.slot="header-content");var o=this.flyoutData.dataStoreModule.CashBackData;if(o&&(o.isCashBackActivated||o.isPersonalizedCashback&&null!=o&&null!==(e=o.userRebatesResponse)&&void 0!==e&&e.isRebatesUser)&&this.flyoutData.common.openedWith===O.Te.Auto){var a=this.utilities.createElement("button");a.id="btnGotIt",a.style.marginTop="4px",a.setAttribute("role","presentation"),a.slot="actions",a.style.background=this.flyoutData.common.currentTheme===O.Q2.Dark?"#3b3b3b":"#FFFFFF",a.style.color=this.flyoutData.common.currentTheme===O.Q2.Dark?"#02d9c8":"#008076";var r=this.utilities.createElement("DIV");r.setAttribute("role","presentation"),r.appendChild(a),a.textContent=this.flyoutData.strings.commonGotIt,n.appendChild(r),a.addEventListener("click",(function(){t.pageHandlerModule.RecordAsUserAction(M.bS.ACTIVATE_CASHBACK);var e=new x.Z(T.$S.ActivateCashBack);t.logModule.LogInfoEvent(T.R.ButtonClick,"Cashback Got it button click",e,P.g.CouponImpressionId),t.pageHandlerModule.DismissPopup()}))}}}},{key:"PostProcessing",value:function(t,e,i){var n,o,a,r;0!==e&&this.SetSectionTitle(i);var s=this.flyoutData.dataStoreModule.CashBackData,l=this.stateManagement.getState(Z.IY.isAutoApplyVisible),c=null!==(n=s&&!s.isCashBackActivated&&!l&&(!s.isPersonalizedCashback||!(null!=s&&null!==(o=s.userRebatesResponse)&&void 0!==o&&o.isRebatesUser)))&&void 0!==n&&n,u=null!==(a=null==s?void 0:s.shouldRenderCashBackNotification)&&void 0!==a&&a,d=new E.Z(T.xu.ActivateCashBackButton);if(this.logModule.LogInfoEvent(T.R.EdgeFlyoutStatus,"Cash back button will be rendered: "+(c||u)+" cashBackData?: "+(!!s||"undefined")+" cash back activated: "+(null!==(r=null==s?void 0:s.isCashBackActivated)&&void 0!==r&&r)+" cashBackModule?: true is at checkout and merge buttons is on: "+l,d),c&&this.createActivateButton(e,i),(null==s?void 0:s.canRenderCashback)&&this.HidePreviousCashbackFromShopping(),!this.flyoutData.experimentData.isExperimentActive(F.H.snooze)&&this.flyoutData.common.openedWith===O.Te.Auto&&(this.flyoutData.common.popupOrigination===L.s.AUTO_SHOW_REBATES||this.flyoutData.common.popupOrigination===L.s.AUTO_SHOW_REBATES_ORGANIC)){var h=this.flyoutData.common.shopping.querySelector("#seeOffersAutoShow");h&&p.SO.queueUpdate((function(){var t,e;null===(t=h.shadowRoot)||void 0===t||null===(e=t.querySelector(".content"))||void 0===e||e.setAttribute("style","\n                        font-weight: 400;\n                    ")}))}}},{key:"renderPreviousCashBackModule",value:function(t,e){var i=this;if(t){var n=this.utilities.createElement("DIV",{id:"previousCashBackSection",style:"margin-top: 0px;"});if(n&&e.userRebatesResponse.latestOrderDate&&e.userRebatesResponse.latestCashbackApproved&&e.userRebatesResponse.latestOrderMerchantName){n.style.display="flex",n.style.flexDirection="column",this.flyoutData.common.popupOrigination!==L.s.AUTO_SHOW_REBATES_ORGANIC&&(n.style.marginLeft="8px",n.style.marginRight="8px");var o,a,r=this.utilities.createElement("BUTTON",{id:"btnPreviousCashBack"});if(r.style.border="none",this.flyoutData.common.currentTheme===O.Q2.Light?(r.style.background="linear-gradient(90deg, rgba(221, 235, 255, 0.6) 0%, rgba(233, 251, 255, 0.6) 30.73%, rgba(255, 249, 217, 0.6) 100%)",r.style.border="1px solid rgba(0, 0, 0, 0.03)"):(r.style.background="linear-gradient(90deg, #4C544A 0%, #425559 47.4%, #544E5D 100%)",r.style.border="1px solid rgba(255, 255, 255, 0.03)"),r.style.borderRadius="8px",r.style.boxSizing="border-box",r.style.padding="5px",o=this.utilities.createElement("DIV",{style:"grid-template-columns: 50% 50%;",id:"divPreviousCashBack"}),(a=this.utilities.createElement("DIV")).style.display="flex",a.style.rowGap="2px",a.style.flexDirection="column",a.style.justifyContent="flex-start",a.style.textAlign="left",o&&a){var s,l;if((l=this.utilities.createElement("P",{className:"txtSmall",style:"text-align: start; overflow-wrap: break-word;"},e.userRebatesResponse.latestOrderMerchantName)).style.fontWeight="500",l.style.fontSize="12px",null!==(s=e.userRebatesResponse)&&void 0!==s&&s.latestOrderDate){var c=e.userRebatesResponse.latestOrderDate.split(" ");if(c&&c.length>0){var u=new Date(c[0]);u&&null!==u.getMonth()&&u.getDate()&&u.getFullYear()&&(l.textContent=this.utilities.replaceValueInKey("retailerName",this.flyoutData.strings.cbPreviousCashbackDomain,"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][u.getMonth()],", ").concat(u.getDate()," ").concat(u.getFullYear()),"".concat(e.userRebatesResponse.latestOrderMerchantName)))}}if(a.appendChild(l),this.addPreviousTransactionsLink(a),o.appendChild(a),e.userRebatesResponse.latestCashbackApproved){var d,h=this.utilities.createElement("DIV");h.style.display="flex",h.style.flexDirection="column",h.style.rowGap="18px",h.style.textAlign="right",h.style.alignItems="flex-end",(d=this.utilities.createElement("P",{className:"txtMedium"},"$".concat(e.userRebatesResponse.latestCashbackApproved.toFixed(2)))).style.fontSize="20px",d.style.lineHeight="28px",d&&h.appendChild(d);var p=this.utilities.createElement("P",{className:"txtSmall"});p.style.fontSize="12px",this.flyoutData.common.currentTheme===O.Q2.Light?p.style.color="rgba(0, 0, 0, 0.55)":p.style.color="#C4C4C4";var f="0.0";e.userRebatesResponse.lifetimeBalance&&(f=e.userRebatesResponse.lifetimeBalance.toFixed(2)),p.textContent=this.utilities.replaceValueInKey("lifetimeEarned",this.flyoutData.strings.cbLifetimeEarned,"$".concat(f)),h.appendChild(p),o.appendChild(h)}r&&(r.appendChild(o),r.addEventListener("click",(function(){var t=new x.Z(T.$S.PreviousCashBack);i.pageHandlerModule.RecordAsUserAction(M.bS.REBATES_HISTORY),i.logModule.LogInfoEvent(T.R.ButtonClick,"User navigated to previous cash back",t,P.g.CouponImpressionId),i.pageHandlerModule.NavigateToRebatesPayouts(_.$.NEW_FOREGROUND_TAB)}))),r&&n.appendChild(r)}t.appendChild(n)}}}},{key:"renderErrorState",value:function(t,e){if(!this.flyoutData.common.shopping.querySelector("#divErrorCashbackActivation")){var i,n=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: row;"});n.id="divErrorCashbackActivation";var o=this.utilities.createElement("DIV",{style:"align-self: center;"});o.innerHTML=this.assets.getErrorIcon(),o.setAttribute("aria-label","hidden");var a=this.utilities.createElement("P");a.className="txtMedium",a.textContent=this.flyoutData.strings.cbErrorMessage,a.setAttribute("role","alert"),null!==(i=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==i&&i.shouldRenderCashBackNotification&&(a.style.fontSize="12px"),n.appendChild(o),n.appendChild(a),"actions"===e?(n.slot="header-content",this.flyoutData.common.shopping.prepend(n)):t&&t.parentElement&&t.parentElement.prepend(n)}}},{key:"createActivateButton",value:function(t,e){var i=this;if(this.flyoutData.common.shopping&&e){var o=this.stateManagement.getState(Z.IY.isAutoApplyVisible);o&&(e.expanded=!1);var a=this.flyoutData.dataStoreModule.CashBackData;if(a){var r=this.utilities.createBaseActionButton();if(null!=a&&a.isSignInSupportedDomainCashBack&&(r.id="rebatesButton"),this.renderCurrentButtonState(r,!1),null!=a&&a.isSignInSupportedDomainCashBack){var s=new E.Z(T.xu.CashBackSignInButtonShown);this.logModule.LogInfoEvent(T.R.EdgeFlyoutStatus,r.textContent+"sign in button shown at cash back section, auto apply visible: "+o,s,P.g.CouponImpressionId)}this.pageHandlerModule.TriggerExperiment(F.H.rewardFlyout),r.addEventListener("click",function(){var t=(0,n.Z)(h().mark((function t(n){var o,s;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==a||!a.isSignInSupportedDomainCashBack){t.next=9;break}return o=new x.Z(T.$S.ActivateCashBack),i.pageHandlerModule.RecordAsUserAction(M.bS.ACTIVATE_CASHBACK),i.pageHandlerModule.RecordAsUserAction(M.bS.ACTIVATE_CASHBACK_NEW),i.logModule.LogInfoEvent(T.R.ButtonClick,"Sign in started",o,P.g.CouponImpressionId),t.next=7,i.pageHandlerModule.ActivateRebates(!0);case 7:t.next=13;break;case 9:return t.next=11,i.handleActivateCashbackClick(r,n,"Cash back activation started");case 11:t.sent?(i.styleActivatedState(r,!1,!0),i.flyoutData.experimentData.isExperimentActive(F.H.snooze)||i.flyoutData.common.openedWith!==O.Te.Auto||i.flyoutData.common.popupOrigination!==L.s.AUTO_SHOW_REBATES&&i.flyoutData.common.popupOrigination!==L.s.AUTO_SHOW_REBATES_ORGANIC||(null==(s=null==e?void 0:e.querySelectorAll("#remindLater"))?void 0:s.length)>0&&(s[0].style.display="none")):i.styleDefaultState(r,i.flyoutData.strings.cbActivateButtonRefresh,!1);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var l=this.stateManagement.getState(Z.IY.topModuleName);if(0===t||l!==O.GX.COUPON){var c;c=this.flyoutData.common.popupOrigination!==L.s.AUTO_SHOW_REBATES&&this.flyoutData.common.popupOrigination!==L.s.AUTO_SHOW_REBATES_ORGANIC||this.flyoutData.common.openedWith!==O.Te.Auto?e.querySelectorAll(".aOfferDetails"):e.querySelectorAll("#cbButtonSection");var u=e.querySelector("#divCashBackContent");u&&c&&c.length>0&&c.forEach((function(t){u.insertBefore(r,t);var e=new E.Z(T.xu.CashBackButtonShown);i.logModule.LogInfoEvent(T.R.EdgeFlyoutStatus,r.textContent+" button shown at cash back section, priority="+l+" auto apply visible: "+o,e,P.g.CouponImpressionId)}))}else{var d=this.utilities.createElement("DIV",{style:"width: 100%; display: flex; flex-direction:column; align-items: center; justify-content: center;"});d.slot="actions",d.appendChild(r);var f=this.createSeeOffersButton();if(f&&d.appendChild(f),null!=a&&a.isSignInSupportedDomainCashBack){var g=this.createPrivacyMessage();d.appendChild(g),p.SO.queueUpdate((function(){var t=document.getElementById("divCashBackContent"),e=t.querySelector("#divPrivacyMessage");t.removeChild(e)}))}this.flyoutData.common.shopping.prepend(d);var m=new E.Z(T.xu.CashBackButtonShown);this.logModule.LogInfoEvent(T.R.EdgeFlyoutStatus,r.textContent+" button shown at actions slot, priority="+l+" auto apply visible: "+o,m,P.g.CouponImpressionId);var v=new E.Z(T.xu.ModuleViewed),y="".concat(N.r.REBATES_ACTIVATE_CASHBACK);y+=" merged with coupons",this.logModule.LogInfoEvent(T.R.EdgeFlyoutStatus,y,v),this.flyoutData.common.shopping.prepend(d)}var C=this.flyoutData.common;if(this.isFailedState()||C.popupOrigination===L.s.AUTO_SHOW_REBATES_ACTIVATION_FAILED){var b,S,A=new CustomEvent(Z.e1.onCashbackActivationError,{detail:{cashbackButton:r,slot:null===(b=r.parentElement)||void 0===b?void 0:b.slot}});this.stateManagement.dispatchEvent(A);var I=new E.Z(T.xu.ErrorCashBackActivation);this.logModule.LogErrorEvent(T.R.EdgeFlyoutStatus,"Cashback activation error -\n                    ".concat(null===(S=this.flyoutData.dataStoreModule.CashBackData)||void 0===S?void 0:S.activateRebatesStatus),I)}}}}},{key:"updateFlyoutSuccessStatus",value:(l=(0,n.Z)(h().mark((function t(){var e,i,n,o,a,r,s;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=document.getElementById("rebatesButton"),this.flyoutData.common.isCheckoutPage&&this.styleProcessingState(o),null==o||o.setAttribute("aria-live","off"),this.flyoutData.dataStoreModule.CashBackData&&(this.flyoutData.dataStoreModule.CashBackData.isCashBackActivated=!0),a=new CustomEvent(Z.e1.onCashBackActivated),r=new CustomEvent(Z.e1.onCashBackActivatedForRewards),this.stateManagement.dispatchEvent(a),this.stateManagement.dispatchEvent(r),this.flyoutData.experimentData.isVariantActive(F.H.rewardFlyout,H.Az.Rewards_0)&&!0===(null===(e=this.flyoutData)||void 0===e||null===(i=e.dataStoreModule)||void 0===i||null===(n=i.RewardData)||void 0===n?void 0:n.IsControlUser)&&(s=new A.Z(0,0,this.flyoutData.common.domain,0),this.logModule.LogInfoEvent(T.R.RewardsActivity,"rewards points info for control flight",s,P.g.CouponImpressionId)),this.styleActivatedState(o,!1,!1);case 10:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"updateFlyoutFailStatus",value:(i=(0,n.Z)(h().mark((function t(){var e,i,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=document.getElementById("rebatesButton"),n=new CustomEvent(Z.e1.onCashbackActivationError,{detail:{cashbackButton:i,slot:null===(e=i.parentElement)||void 0===e?void 0:e.slot}}),this.stateManagement.dispatchEvent(n),this.styleDefaultState(i,this.flyoutData.strings.cbBingActivateButton,!1);case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"createPrivacyMessage",value:function(){var t=this,e=this.utilities.createElement("SPAN");e.id="divPrivacyMessage",e.className="txtSmall",e.style.fontSize="10px",e.style.lineHeight="14px",e.style.marginTop="10px";var i=this.utilities.createElement("fluent-anchor");i.appearance="lightweight",i.href="#",i.style.fontSize="10px",i.style.lineHeight="14px",i.style.position="relative",i.style.height="14px",i.style.verticalAlign="bottom",i.textContent=this.flyoutData.strings.commonMicrosoftRewards,i.style.alignSelf="center",i.addEventListener("click",(function(){var e;null!==(e=t.flyoutData.dataStoreModule.CashBackData)&&void 0!==e&&e.isPersonalizedCashback?t.pageHandlerModule.NavigateToBingReates():t.pageHandlerModule.NavigateToLearnMore(_.$.NEW_FOREGROUND_TAB)})),this.utilities.replaceElementInKey(e,this.flyoutData.strings.cbPrivacyMessage,i);var n=this.utilities.createElement("fluent-anchor");return n.appearance="lightweight",n.href="#",n.style.fontSize="10px",n.style.lineHeight="14px",n.style.height="14px",n.style.position="relative",n.style.marginLeft="3px",n.style.verticalAlign="bottom",n.textContent=this.flyoutData.strings.cbPrivacyMessageTerm,n.style.alignSelf="center",n.addEventListener("click",(function(){t.pageHandlerModule.NavigateToPrivacyStatement()})),e.appendChild(n),e}},{key:"retrieveCashBackAmount",value:function(t){var e,i,n,o="",a=this.flyoutData.dataStoreModule.CashBackData;return a&&null!==(e=a.highestCashBackCategory)&&void 0!==e&&e.commissionType?(i=a.highestCashBackCategory.commissionType,n=a.highestCashBackCategory.commissionValue):t&&null!=t&&t.commissionType&&(i=t.commissionType,n=t.commissionValue),"%"===i?o="".concat(n).concat("%"):"flat"===i&&(o="".concat(this.currencySymbol).concat(n)),o}},{key:"styleProcessingState",value:function(t){var e=this.utilities.createElement("fluent-progress-ring");e.style.width="17px",e.style.height="17px",e.style.margin="0px",e.slot="start",e.setAttribute("aria-hidden","true"),t.textContent=this.flyoutData.strings.cbProcessing,t.style.backgroundColor="#0656F8",t.style.color="#FFFFFF",t.setAttribute("aria-live","assertive"),t.appendChild(e)}},{key:"createCommissionArrow",value:function(t,e){var i,n,o,a=this.utilities.createElement("DIV");a.className="imgCBTag",null!==(i=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==i&&i.isPersonalizedCashback?(a.innerHTML=this.assets.getPersonalizedTagLeft(),a.style.height="24px"):a.innerHTML=this.assets.getTagLeft(),a.style.float="left";var r=this.utilities.createElement("DIV");r.className="imgCBTag",null!==(n=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==n&&n.isPersonalizedCashback?(r.innerHTML=this.assets.getPersonalizedTagRight(),r.style.height="24px"):r.innerHTML=this.assets.getTagRight(),r.style.float="left";var s=this.utilities.createElement("SPAN");s.textContent=this.retrieveCashBackAmount(),s.className="spanCommisionValue",null!==(o=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==o&&o.isPersonalizedCashback&&(s.style.display="inline-flex",s.style.alignItems="center",s.style.lineHeight="18px",s.style.fontSize="18px",s.style.height="24px");var l=this.utilities.createElement("DIV");if(l.className="divCommissionValue",t&&a&&r&&l&&a.children.length>0&&r.children.length>0){var c=a.children[0];c&&(c.setAttribute("width","7"),c.setAttribute("height","20"),c.setAttribute("viewBox","(0 0 7 20)"));var u=r.children[0];u&&(u.setAttribute("width","10"),u.setAttribute("height","20")),s.style.height="20px",s.style.lineHeight="20px",s.style.fontSize="16px",l.style.marginBottom="4px"}return l.appendChild(a),l.appendChild(s),l.appendChild(r),e&&e(l),l}},{key:"handleActivateCashbackClick",value:(e=(0,n.Z)(h().mark((function t(e,i,n){var o,a,r,s,l,c,u,d;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.className+=" activated",e.style.fontWeight="500",e.textContent=this.flyoutData.strings.cbActivatedButton,o=new x.Z(T.$S.ActivateCashBack),this.pageHandlerModule.RecordAsUserAction(M.bS.ACTIVATE_CASHBACK),this.logModule.LogInfoEvent(T.R.ButtonClick,n,o,P.g.CouponImpressionId),e.disabled=!0,a=!1,!this.flyoutData.common.isCheckoutPage){t.next=16;break}return this.styleProcessingState(e),t.next=12,this.pageHandlerModule.ActivateRebates(!0);case 12:r=t.sent,a=r.activated,t.next=18;break;case 16:this.pageHandlerModule.ActivateRebates(!1),a=!0;case 18:return a?(null==e||e.setAttribute("aria-live","off"),this.flyoutData.dataStoreModule.CashBackData&&(this.flyoutData.dataStoreModule.CashBackData.isCashBackActivated=!0),s=new CustomEvent(Z.e1.onCashBackActivated),l=new CustomEvent(Z.e1.onCashBackActivatedForRewards),this.stateManagement.dispatchEvent(s),this.stateManagement.dispatchEvent(l)):(u=new CustomEvent(Z.e1.onCashbackActivationError,{detail:{cashbackButton:e,slot:null===(c=e.parentElement)||void 0===c?void 0:c.slot}}),this.stateManagement.dispatchEvent(u)),0===i.screenX&&0===i.screenY&&a?(d=document.querySelector("#".concat(O.z6.CLOSE)))&&d.focus():e&&e.focus(),t.abrupt("return",a);case 21:case"end":return t.stop()}}),t,this)}))),function(t,i,n){return e.apply(this,arguments)})},{key:"styleActivatedState",value:function(t,e,i){var n=this.flyoutData.common.shopping.querySelector("#divErrorCashbackActivation");if(n&&n.remove(),t){var o=t.querySelector("fluent-progress-ring");o&&o.remove();var a=this.utilities.createElement("DIV");if(a.innerHTML=this.commonAssets.getGreenCheck(),a.slot="start",a.setAttribute("aria-hidden","true"),t.disabled=!0,t.textContent=this.flyoutData.strings.cbActivatedButton,t.appendChild(a),t.style.background="transparent",t.style.boxSizing="border-box",t.style.borderRadius="4px",t.style.opacity="1",t.style.border="1px solid rgba(0, 0, 0, 0.07)",this.flyoutData.common.currentTheme===O.Q2.Dark?(t.style.color="#FFFFFF",t.style.borderColor="#FFFFFF"):t.style.color="#000000",e){t.style.fontSize="12px";var r=t.querySelector("svg");r&&(r.setAttribute("width","15"),r.setAttribute("height","15"))}}}},{key:"styleDefaultState",value:function(t,e,i){t.disabled=!1,t.appearance="accent",t.textContent=e,t.style.backgroundColor="var(--accent-fill-rest)",null==t||t.setAttribute("aria-live","assertive"),i&&(t.style.minWidth="unset",t.style.height="32px",t.style.fontSize="12px",t.style.marginTop="0px",t.style.maxWidth="174px")}},{key:"createSeeOffersButton",value:function(t){var e,i,n,o,a=this;if(null!==(e=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==e&&e.isPersonalizedCashback&&null!==(i=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==i&&null!==(n=i.userRebatesResponse)&&void 0!==n&&n.isRebatesUser)return null;var r=this.utilities.createElement("fluent-anchor");return r.className+="action aOfferDetails",r.appearance="lightweight",r.href="#",r.style.fontSize="12px",r.style.lineHeight="16px",r.style.marginTop="10px",null!==(o=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==o&&o.isPersonalizedCashback?r.textContent=this.flyoutData.strings.commonLearnMore:r.textContent=this.flyoutData.strings.cbLearnMore,r.style.alignSelf="center",r.addEventListener("click",(function(){var t,e,i=new x.Z(T.$S.RebatesLearnMore);(a.pageHandlerModule.RecordAsUserAction(M.bS.REBATES_LEARN_MORE),a.logModule.LogInfoEvent(T.R.ButtonClick,"User navigated to rebates learn more",i,P.g.CouponImpressionId),null!==(t=a.flyoutData.dataStoreModule.CashBackData)&&void 0!==t&&t.isPersonalizedCashback)?a.pageHandlerModule.NavigateToBingReates():a.pageHandlerModule.NavigateToLearnMore(_.$.NEW_FOREGROUND_TAB,null===(e=a.flyoutData.dataStoreModule.CashBackData)||void 0===e?void 0:e.merchantName)})),t&&t(r),r}},{key:"isFailedState",value:function(){var t,e=null===(t=this.flyoutData.dataStoreModule.CashBackData)||void 0===t?void 0:t.activateRebatesStatus;return void 0!==e&&Object.keys(O.FA).some((function(t){if(O.FA[t]===e)return!!t.toString().includes("FAILED")})),!1}},{key:"renderCurrentButtonState",value:function(t,e){var i=this.flyoutData.dataStoreModule.CashBackData,n=this.flyoutData.common,o=this.flyoutData.experimentData,a=n.popupOrigination===L.s.AUTO_SHOW_REBATES_SWITCHED_TO_MSA&&o.isExperimentActive(F.H.signinRebates),r=(null==i?void 0:i.activateRebatesStatus)===O.FA.PENDING_ACTIVATION_IN_PROFILE,s=this.flyoutData.strings.cbActivateButtonRefresh;if(i&&i.isSignInSupportedDomainCashBack&&i.activateRebatesStatus!==O.FA.PENDING_SIGN_INTO_PROFILE&&(s=this.flyoutData.strings.cbBingActivateButton),i&&i.isCashBackActivated||a||r){this.styleDefaultState(t,s,e),this.styleActivatedState(t,e,!1),this.flyoutData.dataStoreModule.CashBackData&&(this.flyoutData.dataStoreModule.CashBackData.isCashBackActivated=!0);var l=new CustomEvent(Z.e1.onCashBackActivated);this.stateManagement.dispatchEvent(l)}else this.styleDefaultState(t,s,e)}},{key:"createCashBackTitle",value:function(t,e,i){var n,o,a,r,s,l,c,u,d=this;((a=this.flyoutData.common.popupOrigination===L.s.AUTO_SHOW_REBATES_ORGANIC?this.utilities.createElement("DIV",{style:"align-items: center; width: calc(100% - 20px);"}):this.utilities.createElement("DIV",{style:"margin-bottom: 8px; align-items: center; width: calc(100% - 20px);"})).className="divCashBackTitle",a.setAttribute("role","heading"),a.setAttribute("aria-level","2"),null!==(n=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==n&&n.isPersonalizedCashback)?(a.style.textAlign="initial",r=this.utilities.createElement("DIV"),null!==(s=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==s&&null!==(l=s.personalizedCashback)&&void 0!==l&&l.imageUrl&&""!==(null===(c=this.flyoutData.dataStoreModule.CashBackData)||void 0===c||null===(u=c.personalizedCashback)||void 0===u?void 0:u.imageUrl)||(a.style.marginBottom="0px")):r=this.utilities.createElement("H2");r.className="h2RebatesTitle",this.flyoutData.common.isPane&&(r.style.fontSize="21px"),null!==(o=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==o&&o.isPersonalizedCashback&&(r.style.marginBottom="12px");var h=this.createCommissionArrow(!1);return this.createCashBackHeaderText(r,e,t,h,i),a.appendChild(r),this.stateManagement.addEventListener(Z.e1.onCashBackActivated,(function(){d.createCashBackHeaderText(r,e,!0,h,i)})),a}},{key:"createCashBackHeaderText",value:function(t,e,i,n,o){var a,r,s,l,c,u=this.flyoutData.strings.cbMainTitleOff,d=!1;null!==(a=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==a&&a.isPersonalizedCashback&&o?e?u=i?this.flyoutData.strings.cbMainTitleOnStoreWide:this.flyoutData.strings.cbMainTitleOffStoreWide:null!==(s=this.flyoutData.dataStoreModule)&&void 0!==s&&null!==(l=s.CashBackData)&&void 0!==l&&null!==(c=l.userRebatesResponse)&&void 0!==c&&c.isRebatesUser?(u=this.flyoutData.strings.cbPersonalized,u=this.utilities.replaceValueInKey("cbPersonalized",u,o)):(u=this.flyoutData.strings.pcbMainTitleOff,u=this.utilities.replaceValueInKey("pcbMainTitleOff",u,o)):null!==(r=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==r&&r.isSignInSupportedDomainCashBack?i?(u=this.flyoutData.strings.cbTitleSignInOn,d=!0):u=this.flyoutData.strings.cbMainTitleOff:i?(u=e?this.flyoutData.strings.cbMainTitleOnStoreWide:this.flyoutData.strings.cbMainTitleOn,t.style.marginLeft="10px",t.style.marginRight="10px"):u=(this.flyoutData.common.popupOrigination,L.s.AUTO_SHOW_REBATES_ORGANIC,this.flyoutData.strings.cbMainTitleOff);this.PopulateCreateCashBackHeaderHtml(t,u,n,d)}},{key:"PopulateCreateCashBackHeaderHtml",value:function(t,e,i,n){var o=this,a=e.split("<br>");if(a&&a.length>1){this.utilities.populateSingleChildHtml(t,a[0],i);var r=this.utilities.createElement("BR");t.appendChild(r);var s=this.utilities.createElement("P",{style:"display: inline;"});s.id="txtPersonalizedProduct",s.classList.add("txtMedium"),s.textContent=a[1],t.appendChild(s)}else{var l,c;null!==(l=this.flyoutData.dataStoreModule)&&void 0!==l&&null!==(c=l.CashBackData)&&void 0!==c&&c.isPersonalizedCashback?t.textContent=e:this.utilities.populateSingleChildHtml(t,e,i),this.flyoutData.common.popupOrigination===L.s.AUTO_SHOW_REBATES_ORGANIC&&(t.style.fontSize="21px",t.style.lineHeight="32px",t.style.fontWeight="600")}if(!n&&!this.utilities.shouldRenderSmallNotification()){var u,d=this.utilities.createElement("DIV",{style:"display: inline-block; vertical-align: top;"}),h=this.utilities.createElement("button",{style:"display: inline; vertical-align: top;"});h.slot="hover-anchor",h.setAttribute("aria-labelledby","cbTooltipButton"),h.className="btnTooltip";var p=this.utilities.createElement("msft-shopping-tooltip");p.id="header-tooltip",p.style.alignSelf="center",p.id="cbTooltipButton",null!==(u=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==u&&u.isPersonalizedCashback||(h.innerHTML=this.commonAssets.getInfoIcon()),this.flyoutData.common.openedWith!==O.Te.Auto||this.flyoutData.common.popupOrigination!==L.s.AUTO_SHOW_REBATES&&this.flyoutData.common.popupOrigination!==L.s.AUTO_SHOW_REBATES_ORGANIC?p.content=this.flyoutData.strings.cbToolTips:(p.content=this.flyoutData.strings.cbLearnMore+". "+this.flyoutData.strings.cbToolTips,p.addEventListener("click",(function(){var t,e,i=new x.Z(T.$S.RebatesLearnMore);(o.pageHandlerModule.RecordAsUserAction(M.bS.REBATES_LEARN_MORE),o.logModule.LogInfoEvent(T.R.ButtonClick,"User navigated to rebates learn more",i,P.g.CouponImpressionId),null!==(t=o.flyoutData.dataStoreModule.CashBackData)&&void 0!==t&&t.isPersonalizedCashback)?o.pageHandlerModule.NavigateToBingReates():o.pageHandlerModule.NavigateToLearnMore(_.$.NEW_FOREGROUND_TAB,null===(e=o.flyoutData.dataStoreModule.CashBackData)||void 0===e?void 0:e.merchantName)}))),p.addEventListener("hover",(function(){o.utilities.shouldDisplayTooltipSide(h,p,70)?(p.caratSide=R.W.Right,p.caratTopOffset="0px",p.width="257px"):(p.caratSide=R.W.Top,p.caratLeftOffset="193px",p.width="200px")})),p.id="cbTooltip",p.append(h),d.appendChild(p),t.appendChild(d)}}},{key:"addPreviousTransactionsLink",value:function(t){var e=this,i=document.createElement("fluent-anchor");i.slot="action",i.href="#",i.className+="action",i.appearance="lightweight",i.style.alignSelf="start",i.textContent=this.flyoutData.strings.cbPreviousTransactions,i.style.fontSize="12px",i.style.lineHeight="16px",i.style.placeSelf="start",i.addEventListener("click",(function(){var t=new x.Z(T.$S.RebatesAccount);e.pageHandlerModule.RecordAsUserAction(M.bS.REBATES_ACCOUNT),e.logModule.LogInfoEvent(T.R.ButtonClick,"User navigated to rebates account",t,P.g.CouponImpressionId),e.pageHandlerModule.NavigateToRebatesAccount(_.$.NEW_FOREGROUND_TAB)})),t.appendChild(i),t.addEventListener("click",(function e(){if(t){var i=t.shadowRoot;if(i){var o=i.querySelector("fluent-accordion-item");if(o&&!o.classList.contains("expanded")){var a=new x.Z(T.$S.ExpandedPreviousCashBack);n.LogInfoEvent(T.R.ButtonClick,"Previous cash back section was expanded",a,P.g.CouponImpressionId),t&&t.removeEventListener("click",e)}}}}));var n=this.logModule}},{key:"HidePreviousCashbackFromShopping",value:function(){this.stateManagement.getState(Z.IY.topModuleName)===O.GX.CASHBACK&&p.SO.queueUpdate((function(){var t=document.querySelector("#previousCashBackSection");if(t){var e=t.shadowRoot;if(e){var i=e.querySelector("fluent-accordion");i&&(i.style.marginBottom="0px")}}}))}},{key:"SetSectionTitle",value:function(t){var e=this,i=this.flyoutData.dataStoreModule.CashBackData;i&&p.SO.queueUpdate((function(){var n,o,a=null===(n=t.shadowRoot)||void 0===n?void 0:n.querySelector("span[part=title]"),r=i.isCashBackActivated;if(a)if(r||i.isPersonalizedCashback&&null!==(o=i.userRebatesResponse)&&void 0!==o&&o.isRebatesUser){var s=e.flyoutData.strings.cbRebatesOn,l=e.utilities.createElement("B");l.textContent=s;var c=e.flyoutData.strings.cbCashBackOnOff;e.utilities.populateSingleChildHtml(a,c,l)}else{var u=e.flyoutData.strings.cbRebatesOff,d=e.utilities.createElement("B");d.textContent=u;var h=e.flyoutData.strings.cbCashBackOnOff;e.utilities.populateSingleChildHtml(a,h,d)}}))}}]),y}(i(245).Z),G=U},245:function(t,e,i){"use strict";i.d(e,{Z:function(){return s}});var n=i(75),o=i(682),a=i(370),r=(0,o.Z)((function t(){(0,n.Z)(this,t),(0,a.Z)(this,"element",void 0),(0,a.Z)(this,"priority",void 0),(0,a.Z)(this,"name",void 0),(0,a.Z)(this,"moduleInterface",void 0),(0,a.Z)(this,"paneTab",void 0)})),s=function(){function t(){(0,n.Z)(this,t),(0,a.Z)(this,"assets",void 0)}return(0,o.Z)(t,[{key:"PostProcessing",value:function(t,e,i){}},{key:"ShowAlways",value:function(){return!1}},{key:"GetAssets",value:function(){return this.assets}},{key:"CreateModule",value:function(t,e,i,n){var o=new r;return o.element=t,o.priority=e,o.name=i,o.moduleInterface=this,o.paneTab=n,o}}]),t}()},388:function(t,e,i){"use strict";var n;i.d(e,{W:function(){return n}}),function(t){t[t.Right=0]="Right",t[t.Left=1]="Left",t[t.Top=2]="Top",t[t.Bottom=3]="Bottom"}(n||(n={}))},391:function(t){var e=function(t){"use strict";var e,i=Object.prototype,n=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",r=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,i){return t[e]=i}}function c(t,e,i,n){var o=e&&e.prototype instanceof m?e:m,a=Object.create(o.prototype),r=new k(n||[]);return a._invoke=function(t,e,i){var n=d;return function(o,a){if(n===p)throw new Error("Generator is already running");if(n===f){if("throw"===o)throw a;return R()}for(i.method=o,i.arg=a;;){var r=i.delegate;if(r){var s=T(r,i);if(s){if(s===g)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===d)throw n=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=p;var l=u(t,e,i);if("normal"===l.type){if(n=i.done?f:h,l.arg===g)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=f,i.method="throw",i.arg=l.arg)}}}(t,i,r),a}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",f="completed",g={};function m(){}function v(){}function y(){}var C={};l(C,a,(function(){return this}));var b=Object.getPrototypeOf,S=b&&b(b(w([])));S&&S!==i&&n.call(S,a)&&(C=S);var x=y.prototype=m.prototype=Object.create(C);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function i(o,a,r,s){var l=u(t[o],t,a);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,r,s)}),(function(t){i("throw",t,r,s)})):e.resolve(d).then((function(t){c.value=t,r(c)}),(function(t){return i("throw",t,r,s)}))}s(l.arg)}var o;this._invoke=function(t,n){function a(){return new e((function(e,o){i(t,n,e,o)}))}return o=o?o.then(a,a):a()}}function T(t,i){var n=t.iterator[i.method];if(n===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,T(t,i),"throw"===i.method))return g;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=u(n,t.iterator,i.arg);if("throw"===o.type)return i.method="throw",i.arg=o.arg,i.delegate=null,g;var a=o.arg;return a?a.done?(i[t.resultName]=a.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,g):a:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function w(t){if(t){var i=t[a];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function i(){for(;++o<t.length;)if(n.call(t,o))return i.value=t[o],i.done=!1,i;return i.value=e,i.done=!0,i};return r.next=r}}return{next:R}}function R(){return{value:e,done:!0}}return v.prototype=y,l(x,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},E(A.prototype),l(A.prototype,r,(function(){return this})),t.AsyncIterator=A,t.async=function(e,i,n,o,a){void 0===a&&(a=Promise);var r=new A(c(e,i,n,o),a);return t.isGeneratorFunction(i)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},E(x),l(x,s,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=w,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function o(n,o){return s.type="throw",s.arg=t,i.next=n,o&&(i.method="next",i.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],s=r.completion;if("root"===r.tryLoc)return o("end");if(r.tryLoc<=this.prev){var l=n.call(r,"catchLoc"),c=n.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return o(r.catchLoc,!0);if(this.prev<r.finallyLoc)return o(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return o(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return o(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=t,r.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),D(i),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var o=n.arg;D(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:w(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},39:function(t,e,i){t.exports=i(391)},200:function(t,e,i){"use strict";function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}i.d(e,{Z:function(){return n}})},94:function(t,e,i){"use strict";function n(t,e,i,n,o,a,r){try{var s=t[a](r),l=s.value}catch(t){return void i(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function o(t){return function(){var e=this,i=arguments;return new Promise((function(o,a){var r=t.apply(e,i);function s(t){n(r,o,a,s,l,"next",t)}function l(t){n(r,o,a,s,l,"throw",t)}s(void 0)}))}}i.d(e,{Z:function(){return o}})},75:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,{Z:function(){return n}})},682:function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}i.d(e,{Z:function(){return o}})},370:function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,{Z:function(){return n}})},858:function(t,e,i){"use strict";function n(t){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}i.d(e,{Z:function(){return n}})},351:function(t,e,i){"use strict";i.d(e,{Z:function(){return o}});var n=i(607);function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&(0,n.Z)(t,e)}},405:function(t,e,i){"use strict";i.d(e,{Z:function(){return a}});var n=i(228),o=i(200);function a(t,e){if(e&&("object"===(0,n.Z)(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return(0,o.Z)(t)}},607:function(t,e,i){"use strict";function n(t,e){return n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(t,e)}i.d(e,{Z:function(){return n}})},826:function(t,e,i){"use strict";function n(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}i.d(e,{Z:function(){return n}})},228:function(t,e,i){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}i.d(e,{Z:function(){return n}})},557:function(t,e,i){"use strict";i.d(e,{SO:function(){return u},Yl:function(){return c},pc:function(){return l}});var n=i(438);const o=n.P3.FAST.getById(1,(()=>{const t=[],e=[];function i(){if(e.length)throw e.shift()}function o(t){try{t.call()}catch(t){e.push(t),setTimeout(i,0)}}function a(){let e=0;for(;e<t.length;)if(o(t[e]),e++,e>1024){for(let i=0,n=t.length-e;i<n;i++)t[i]=t[i+e];t.length-=e,e=0}t.length=0}return Object.freeze({enqueue:function(e){t.length<1&&n.P3.requestAnimationFrame(a),t.push(e)},process:a})})),a=n.P3.trustedTypes.createPolicy("fast-html",{createHTML:t=>t});let r=a;const s=`fast-${Math.random().toString(36).substring(2,8)}`,l=`${s}{`,c=`}${s}`,u=Object.freeze({supportsAdoptedStyleSheets:Array.isArray(document.adoptedStyleSheets)&&"replace"in CSSStyleSheet.prototype,setHTMLPolicy(t){if(r!==a)throw new Error("The HTML policy can only be set once.");r=t},createHTML:t=>r.createHTML(t),isMarker:t=>t&&8===t.nodeType&&t.data.startsWith(s),extractDirectiveIndexFromMarker:t=>parseInt(t.data.replace(`${s}:`,"")),createInterpolationPlaceholder:t=>`${l}${t}${c}`,createCustomAttributePlaceholder(t,e){return`${t}="${this.createInterpolationPlaceholder(e)}"`},createBlockPlaceholder:t=>`\x3c!--${s}:${t}--\x3e`,queueUpdate:o.enqueue,processUpdates:o.process,nextUpdate:()=>new Promise(o.enqueue),setAttribute(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)},setBooleanAttribute(t,e,i){i?t.setAttribute(e,""):t.removeAttribute(e)},removeChildNodes(t){for(let e=t.firstChild;null!==e;e=t.firstChild)t.removeChild(e)},createTemplateWalker:t=>document.createTreeWalker(t,133,null,!1)})},438:function(t,e,i){"use strict";i.d(e,{Bo:function(){return a},P3:function(){return n},ow:function(){return r}});const n=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof global)return global;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return new Function("return this")()}catch(t){return{}}}();void 0===n.trustedTypes&&(n.trustedTypes={createPolicy:(t,e)=>e});const o={configurable:!1,enumerable:!1,writable:!1};void 0===n.FAST&&Reflect.defineProperty(n,"FAST",Object.assign({value:Object.create(null)},o));const a=n.FAST;if(void 0===a.getById){const t=Object.create(null);Reflect.defineProperty(a,"getById",Object.assign({value(e,i){let n=t[e];return void 0===n&&(n=i?t[e]=i():null),n}},o))}const r=Object.freeze([])}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={id:n,loaded:!1,exports:{}};return t[n](a,a.exports,i),a.loaded=!0,a.exports}i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,{a:e}),e},i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.hmd=function(t){return(t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";var t=i(94),e=i(39),n=i.n(e),o=i(135),a=i(113),r="2.01",s=i(75),l=i(682);document.body=document.createElement("body");var c,u,d,h,p,f,g,m,v,y,C,b,S,x=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"HandleAdditionalBody",value:function(){var t=document.querySelectorAll("body");t&&t.length>1&&t[0].attributes[0].textContent&&(t[1].setAttribute("style",t[0].attributes[0].textContent),t[0].remove())}}]),t}(),E=i(826),A=i(629),T=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n        html {\n            overflow: hidden;\n        }\n        msft-shopping-coupon,\n        msft-shopping-link {\n            margin-top: 5px;\n        }\n        msft-edge-shopping-section {\n            margin-top: 10px;\n        }\n        msft-shopping-link:first-of-type,\n        msft-shopping-coupon:first-of-type {\n            margin-top: 0;\n        }\n        fluent-menu-item::part(content) {\n            width: 100%;\n            overflow: hidden;\n            overflow-wrap: break-word;\n            -webkit-line-clamp: 1;\n            -webkit-box-orient: vertical;\n        }\n        fluent-anchor,\n        fluent-button,\n        fluent-card {\n            font-size: 12px;\n        }\n        #remindLater::part(control) {\n            display: flex;\n            align-self: center;\n        }\n        #remindLater {\n            margin-top: 5px;\n            margin-bottom: 5px;\n        }\n        ::part(sections) {\n            position: relative;\n            margin-top: 10px;\n        }\n        ::part(start-content) {\n            padding: 0px;\n        }\n        ::part(header) {\n            margin: 10px;\n        }\n        ::part(actions) {\n            width: 100%;\n            border-bottom: unset;\n            padding-bottom: 0px;\n            padding-top: 0px;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n        }\n        ::part(actions):first-of-type {\n            margin-top: 10px;\n        }\n        .actionsButton {\n            min-width: 250px;\n            max-width: 100%;\n            height: 48px;\n        }\n        .actionsButton:first-of-type {\n            margin-top: 10px;\n        }\n        msft-shopping-link:last-of-type {\n            margin-bottom: 5px;\n        }\n        msft-shopping-coupon:last-of-type {\n            margin-bottom: 5px;\n        }\n        ::part(start-content) {\n            padding-top: 0px;\n            padding-bottom: 0px;\n        }\n        #divContentWrapper {\n            width: 360px;\n            height: auto;\n        }\n        body {\n            margin: 0px;\n        }\n        .hide {\n            display: none;\n        }\n        msft-edge-shopping {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            height: auto;\n            max-height: 580px;\n        }\n        #divContentWrapper.ms-edge-shopping-650 msft-edge-shopping {\n            max-height: 650px;\n        }\n        fluent-design-system-provider {\n            width: 360px;\n            margin: 0px;\n        }\n        .txtLarge {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 24px;\n            line-height: 28px;\n            margin: 0px;\n            color: var(--neutral-foreground-rest);\n        }\n        .txtMedium {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 16px;\n            line-height: 20px;\n            margin: 0px;\n            color: var(--neutral-foreground-rest);\n        }\n        .txtSmall {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 14px;\n            line-height: 20px;\n            margin: 0px;\n            color: var(--neutral-foreground-rest);\n        }\n        .txtEmptyCoupons {\n            all: initial;\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 18px;\n            line-height: 25px;\n            margin: 0px;\n            color: rgba(0, 0, 0, 0.83);\n        }\n        .defaultFontFamily {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n        }\n        msft-shopping-link::part(attribution) {\n            margin-top: 6px;\n        }\n        .sectionSeparator {\n            position: absolute;\n            border: 1px solid #F1F1F1;\n            margin-bottom: 0px;\n            margin-top: 0px;\n            border-bottom: unset;\n            width: 360px;\n            left: 0px;\n            right: 0px;\n        }\n        ::part(control) {\n            margin-bottom: 0px;\n        }\n        .triviaTitle {\n            display: inline;\n            margin: 0px;\n            font-weight: 400;\n            font-size: 14px;\n            line-height: 36px;\n            vertical-align: middle;\n            text-align: center;\n        }\n        .savingsFoundTextContainer {\n            justify-content: center;\n            column-gap: 3px;\n            line-height: normal;\n            margin-top: 6px;\n        }\n        .savingsFoundTextContainer:last-child {\n            margin-bottom: 6px;\n        }\n        .infoicon {\n            align-self: center;\n            display: inline;\n            position: relative;\n            top: -10px;\n        }\n        ::part(tooltip) {\n            white-space: unset;\n            font-size: 10px;\n            hyphens: auto;\n            padding: 4px 6px;\n            line-height: 12px;\n            padding-bottom: 8px;\n        }\n        .btnTooltip {\n            border: none;\n            outline: none;\n            border-radius: 4px;\n            background: transparent;\n        }\n        #remindLaterFooter {\n            font-size: 14px;\n            --accent-foreground-hover: none;\n        }\n        .btnTooltip:focus-visible {\n            box-shadow: 0 0 0 2px inset #fbfdfe, 0 0 0 1px #878787;\n            border: 1px solid #878787;\n        }\n        .infoiconsvg {\n            fill: #000000;\n        }\n        @media (prefers-color-scheme: dark) {\n            .txtEmptyCoupons {\n                color: #FFFFFF;\n            }\n            .tirivaSavings {\n                color: #FFFFFF!important;\n            }\n            .sectionSeparator {\n                opacity: 0.08;\n            }\n            .infoiconsvg {\n                fill: #FFFFFF;\n            }\n        }\n        @media (forced-colors: active) {\n            msft-edge-shopping {\n                background-image: unset!important;\n            }\n            .btnTooltip:focus-visible {\n                border: 1px solid buttontext;\n                box-shadow: highlighttext 0px 0px 0px 2px inset;\n            }\n            #flyoutCloseWhite>path .viewMorePricesButton>svg>path {\n                fill: buttonText!important;\n            }\n            .feedbackSVGs>path {\n                fill: buttonText;\n            }\n            .feedbackSelected {\n                fill: highlighttext!important;\n            }\n        }\n        @media (-ms-high-contrast: active) {\n            .infoiconsvg {\n                fill:Text;\n            }\n        }"}},{key:"getStylesRefresh",value:function(){return"\n            ::part(sections) {\n                padding: 0px;!important\n            }\n            ::part(header-fixed-title) {\n                font-weight: 400;\n            }\n            .actionsButtonRefresh {\n                min-width: 320px;\n                max-width: 100%;\n                height: 48px;\n                margin-top: 12px;\n                font-weight: 600;\n                background: linear-gradient(90.05deg, #8300D4 0.59%, #0048D4 67.54%, #00D4A1 104.11%);\n            }\n            .actionsButtonRefresh:hover {\n                background: linear-gradient(90.05deg, #9E00FF 0.59%, #0048D4 67.54%, #00FFC2 104.11%);\n            }\n            .txtGradient {\n                font-weight: 500;\n                background: linear-gradient(93.45deg, #E4008A -4.64%, #FF4B14 75.79%, #ED7100 106.45%);\n                -webkit-background-clip: text;\n                -webkit-text-fill-color: transparent;\n            }\n            @media (prefers-color-scheme: dark) {\n                .divSeeMore {\n                    border-top: 1px solid rgba(236, 236, 236, 0.08)!important;\n                }\n                .txtGradient {\n                    background: linear-gradient(90.3deg, #FF51BA 0.13%, #FF7348 48.78%, #FFAA2B 95.36%);\n                    -webkit-background-clip: text;\n                    -webkit-text-fill-color: transparent;\n                }\n            }\n        "}},{key:"getSmallerNotificationCssStyles",value:function(){return"\n        #divContentWrapper {\n            width: 268px;\n        }\n        .actionsButtonRefresh {\n            min-width: 236px;\n            height: 36px;\n            font-size: 14px;\n        }\n        "}},{key:"getColoredHeaderCssExp1",value:function(){return"\n        #btnFlyoutClose, #btnMainMenu {\n            background: none;\n        }\n        ::part(header-fixed) {\n            background: linear-gradient(90.79deg, #E4FCFF 3.55%, #D2F7FF 23.38%, #81D1FF 49.35%, #558EFF 70.12%, #1F65F1 90.42%);\n        }\n        ::part(header-fixed-title) {\n            color: #001C56;\n            font-weight: 400;\n        }\n        #flyoutMenu, #flyoutClose {\n            fill: #FFFFFF;\n        }\n        "}},{key:"getColoredHeaderCssExp2",value:function(){return"\n        #btnFlyoutClose, #btnMainMenu {\n            background: none;\n        }\n        ::part(header-fixed) {\n            background: linear-gradient(270deg, #1F65F1 0%, #1F65F1 35.42%, #1F65F1 68.23%, #6BC1FF 88.54%, #B6FBFF 100%);\n        }\n        ::part(header-fixed-title) {\n            color: #FFFFFF;\n            font-weight: 400;\n        }\n        #flyoutClose, #flyoutMenu {\n            fill: #FFFFFF;\n        }\n        "}},{key:"getColoredHeaderCssExp3",value:function(){return"\n        #btnFlyoutClose, #btnMainMenu {\n            background: none;\n        }\n        ::part(header-fixed) {\n            background: linear-gradient(270deg, #1F65F1 0%, #1F65F1 35.42%, #1F65F1 68.23%, #6BC1FF 88.54%, #B6FBFF 100%);\n        }\n        ::part(header-fixed-title) {\n            color: #FFFFFF;\n            font-weight: 400;\n        }\n        #flyoutClose, #flyoutMenu {\n            fill: #FFFFFF;\n        }\n        "}},{key:"getColoredHeaderCssExp4",value:function(){return"\n        #btnFlyoutClose, #btnMainMenu {\n            background: none;\n        }\n        ::part(header-fixed) {\n            background: linear-gradient(268.01deg, #CFE1FF -2.15%, #D8F6FF 50.34%, #EEFEFA 88.77%);\n        }\n        ::part(header-fixed-title) {\n            font-weight: 400;\n        }\n        "}},{key:"getGreenCheck",value:function(){return A.Z.getTrustedHTML(c||(c=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M10 0C15.5228 0 20 4.47715 20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10C0 4.47715 4.47715 0 10 0ZM13.2197 6.96967L8.75 11.4393L6.78033 9.46967C6.48744 9.17678 6.01256 9.17678 5.71967 9.46967C5.42678 9.76256 5.42678 10.2374 5.71967 10.5303L8.21967 13.0303C8.51256 13.3232 8.98744 13.3232 9.28033 13.0303L14.2803 8.03033C14.5732 7.73744 14.5732 7.26256 14.2803 6.96967C13.9874 6.67678 13.5126 6.67678 13.2197 6.96967Z" fill="#107C10"/></svg>'])))}},{key:"getInfoIcon",value:function(){return A.Z.getTrustedHTML(u||(u=(0,E.Z)(['\n        <svg width="10" height="10" viewBox="0 0 10 10" aria-hidden="true" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path class="infoiconsvg" d="M4.5 5.5C4.5 5.22386 4.72386 5 5 5C5.27614 5 5.5 5.22386 5.5 5.5V7C5.5 7.27614 5.27614 7.5 5 7.5C4.72386 7.5 4.5 7.27614 4.5 7V5.5ZM5 2.75C4.58579 2.75 4.25 3.08579 4.25 3.5C4.25 3.91421 4.58579 4.25 5 4.25C5.41421 4.25 5.75 3.91421 5.75 3.5C5.75 3.08579 5.41421 2.75 5 2.75ZM0 5C0 2.23858 2.23858 0 5 0C7.76142 0 10 2.23858 10 5C10 7.76142 7.76142 10 5 10C2.23858 10 0 7.76142 0 5ZM5 1C2.79086 1 1 2.79086 1 5C1 7.20914 2.79086 9 5 9C7.20914 9 9 7.20914 9 5C9 2.79086 7.20914 1 5 1Z" fill="black" fill-opacity="0.55"/>\n        </svg>\n        '])))}},{key:"getGreenCheckCircle",value:function(){return A.Z.getTrustedHTML(d||(d=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="18" height="18" viewBox="0 0 18 18" fill="none">\n        <path d="M9 0C9.82617 0 10.623 0.108398 11.3906 0.325195C12.1582 0.536133 12.873 0.837891 13.5352 1.23047C14.2031 1.62305 14.8096 2.09473 15.3545 2.64551C15.9053 3.19043 16.377 3.79688 16.7695 4.46484C17.1621 5.12695 17.4639 5.8418 17.6748 6.60938C17.8916 7.37695 18 8.17383 18 9C18 9.82617 17.8916 10.623 17.6748 11.3906C17.4639 12.1582 17.1621 12.876 16.7695 13.5439C16.377 14.2061 15.9053 14.8125 15.3545 15.3633C14.8096 15.9082 14.2031 16.377 13.5352 16.7695C12.873 17.1621 12.1582 17.4668 11.3906 17.6836C10.623 17.8945 9.82617 18 9 18C8.17383 18 7.37695 17.8945 6.60938 17.6836C5.8418 17.4668 5.12402 17.1621 4.45605 16.7695C3.79395 16.377 3.1875 15.9082 2.63672 15.3633C2.0918 14.8125 1.62305 14.2061 1.23047 13.5439C0.837891 12.876 0.533203 12.1582 0.316406 11.3906C0.105469 10.623 0 9.82617 0 9C0 8.17383 0.105469 7.37695 0.316406 6.60938C0.533203 5.8418 0.837891 5.12695 1.23047 4.46484C1.62305 3.79688 2.0918 3.19043 2.63672 2.64551C3.1875 2.09473 3.79395 1.62305 4.45605 1.23047C5.12402 0.837891 5.8418 0.536133 6.60938 0.325195C7.37695 0.108398 8.17383 0 9 0ZM14.2998 6.02051L13.1045 4.8252L7.3125 10.6172L4.89551 8.2002L3.7002 9.39551L7.3125 13.0078L14.2998 6.02051Z" fill="#107C10"/>\n        <path d="M11.2547 0.806371L11.2547 0.806383L11.2581 0.807322C11.9842 1.00685 12.6577 1.29147 13.2801 1.66056L13.2818 1.66153C13.9125 2.03217 14.4846 2.47716 14.9991 2.99717L14.999 2.99719L15.0028 3.00095C15.5228 3.51542 15.9678 4.08755 16.3385 4.71819L16.3394 4.71985C16.7085 5.34233 16.9931 6.01579 17.1927 6.74187L17.1936 6.74528C17.3975 7.46707 17.5 8.21813 17.5 9C17.5 9.78187 17.3975 10.5329 17.1936 11.2547L17.1927 11.2581C16.9932 11.9842 16.7085 12.6609 16.339 13.2897C15.9681 13.9152 15.5223 14.4883 15.0009 15.0097C14.4862 15.5245 13.9134 15.9673 13.2818 16.3385L13.2802 16.3394C12.6572 16.7088 11.9831 16.9966 11.2564 17.202C10.5341 17.4003 9.78247 17.5 9 17.5C8.21755 17.5 7.46593 17.4003 6.74368 17.202C6.01692 16.9966 5.33955 16.7087 4.71019 16.3389C4.08456 15.9679 3.51145 15.5251 2.99028 15.0097C2.47492 14.4885 2.03207 13.9154 1.66101 13.2897C1.29126 12.6604 1.00347 11.9831 0.79807 11.2564C0.599745 10.5342 0.5 9.7825 0.5 9C0.5 8.21751 0.599742 7.46586 0.798061 6.74358C1.00346 6.01688 1.29118 5.34283 1.66055 4.71985L1.66056 4.71985L1.66153 4.71819C2.03274 4.08658 2.47549 3.51384 2.99027 2.99906C3.51164 2.47769 4.08476 2.032 4.71019 1.66107C5.33903 1.29158 6.01578 1.00686 6.74187 0.807322L6.74187 0.807334L6.74528 0.806371C7.46707 0.602506 8.21813 0.5 9 0.5C9.78187 0.5 10.5329 0.602506 11.2547 0.806371ZM14.6534 6.37406L15.0069 6.02051L14.6534 5.66695L13.458 4.47164L13.1045 4.11809L12.7509 4.47164L7.3125 9.91008L5.24906 7.84664L4.89551 7.49309L4.54195 7.84664L3.34664 9.04195L2.99309 9.39551L3.34664 9.74906L6.95895 13.3614L7.3125 13.7149L7.66605 13.3614L14.6534 6.37406Z" stroke="black" stroke-opacity="0.07"/>\n        </svg>'])))}},{key:"getCloseButton",value:function(){return A.Z.getTrustedHTML(h||(h=(0,E.Z)(['<svg id="flyoutClose" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n        <path d="M8.5332 8L12.5762 12.0488L12.0488 12.5762L8 8.5332L3.95117 12.5762L3.42383 12.0488L7.4668 8L3.42383 3.95117L3.95117 3.42383L8 7.4668L12.0488 3.42383L12.5762 3.95117L8.5332 8Z"/>\n        </svg>'])))}},{key:"getSnoozeLineButton",value:function(){return A.Z.getTrustedHTML(p||(p=(0,E.Z)(['<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M7.96379 3C5.89462 3 3.96372 4.62135 3.96372 7.16667V9.9352L3.08616 12H12.8659L11.9637 9.93793V8.5C11.9637 8.22387 12.1876 8 12.4637 8C12.7399 8 12.9637 8.22387 12.9637 8.5V9.72873L13.8842 11.8327C14.1251 12.3832 13.7217 13 13.1207 13H9.96499C9.96446 14.1047 9.06873 15 7.96393 15C6.85913 15 5.96346 14.1047 5.96289 13H2.83422C2.23704 13 1.8337 12.3903 2.06728 11.8407L2.96372 9.73147V7.16667C2.96372 4.04532 5.36638 2 7.96379 2C8.53679 2 9.10039 2.09938 9.63079 2.28798C9.89099 2.38049 10.0269 2.66641 9.93439 2.92659C9.84186 3.18678 9.55593 3.3227 9.29573 3.23019C8.87146 3.07932 8.42113 3 7.96379 3ZM7.96393 14C8.51646 14 8.96446 13.5524 8.96499 13H6.96286C6.96346 13.5524 7.41146 14 7.96393 14ZM10.1311 5.33333H8.4644L8.39659 5.3379C8.15253 5.37101 7.9644 5.5802 7.9644 5.83333C7.9644 6.10947 8.18826 6.33333 8.4644 6.33333H9.15953L8.05753 7.87607L8.02066 7.93567C7.84959 8.25947 8.08166 8.66667 8.4644 8.66667H10.1311L10.1989 8.66213C10.443 8.629 10.6311 8.4198 10.6311 8.16667C10.6311 7.89053 10.4073 7.66667 10.1311 7.66667H9.43599L10.5379 6.12395L10.5748 6.06433C10.7459 5.74053 10.5139 5.33333 10.1311 5.33333ZM14.1311 2H11.7977L11.7299 2.00457C11.4859 2.03767 11.2977 2.24687 11.2977 2.5C11.2977 2.77614 11.5216 3 11.7977 3H13.2203L11.3759 5.89823L11.3432 5.95793C11.1928 6.28083 11.4264 6.66667 11.7977 6.66667H14.1311L14.1989 6.6621C14.443 6.62899 14.6311 6.4198 14.6311 6.16667C14.6311 5.89053 14.4073 5.66667 14.1311 5.66667H12.7086L14.5529 2.76844L14.5857 2.70874C14.7361 2.38584 14.5025 2 14.1311 2Z" fill="#1A1A1A"/>\n        </svg>\n        '])))}},{key:"getSnoozeFilledButton",value:function(){return A.Z.getTrustedHTML(f||(f=(0,E.Z)(['<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M10.1656 4.33333H8.4989L8.4311 4.3379C8.18703 4.37101 7.9989 4.5802 7.9989 4.83333C7.9989 5.10947 8.22276 5.33333 8.4989 5.33333H9.19403L8.09203 6.87607L8.05516 6.93567C7.8841 7.25947 8.11616 7.66667 8.4989 7.66667H10.1656L10.2334 7.66213C10.4775 7.629 10.6656 7.4198 10.6656 7.16667C10.6656 6.89053 10.4418 6.66667 10.1656 6.66667H9.4705L10.5724 5.12395L10.6093 5.06433C10.7804 4.74053 10.5484 4.33333 10.1656 4.33333ZM14.1656 1H11.8322L11.7644 1.00457C11.5204 1.03767 11.3322 1.24687 11.3322 1.5C11.3322 1.77614 11.5561 2 11.8322 2H13.2548L11.4104 4.89823L11.3777 4.95793C11.2273 5.28083 11.4609 5.66667 11.8322 5.66667H14.1656L14.2334 5.6621C14.4775 5.62899 14.6656 5.4198 14.6656 5.16667C14.6656 4.89053 14.4418 4.66667 14.1656 4.66667H12.7431L14.5874 1.76844L14.6202 1.70874C14.7706 1.38584 14.537 1 14.1656 1ZM8.46483 3.33333H10.1651C10.5038 3.33333 10.8026 3.43895 11.0426 3.61283L11.4619 2.95404C10.8373 2.79563 10.369 2.24539 10.3339 1.58029C9.6369 1.21147 8.84216 1.00261 7.9987 1.00261C5.30262 1.00261 3.09443 3.14023 3.00172 5.82738L2.99877 5.99399L2.9987 8.66853L2.05544 10.7755C1.91252 11.0948 2.05546 11.4695 2.37471 11.6124C2.45612 11.6489 2.5443 11.6677 2.63349 11.6677H13.3664C13.7162 11.6677 13.9998 11.3841 13.9998 11.0343C13.9998 10.9449 13.9808 10.8565 13.9442 10.775L12.9987 8.66827V6.66667H11.8318C11.7424 6.66667 11.6556 6.65927 11.572 6.64513C11.6322 6.80753 11.6651 6.98327 11.6651 7.16667C11.6651 7.92687 11.1006 8.5536 10.3674 8.653L10.3339 8.6576L10.1987 8.66667H8.49843C7.34563 8.66667 6.65549 7.44327 7.17056 6.46847L7.18636 6.43853L7.25856 6.32184L7.51363 5.96476C7.19796 5.68977 6.99843 5.28485 6.99843 4.83333C6.99843 4.07313 7.56303 3.44643 8.29616 3.34697L8.3297 3.34243L8.46483 3.33333ZM9.9709 12.3353C9.81176 13.2807 8.98936 14.001 7.9987 14.001C7.00803 14.001 6.18561 13.2807 6.02652 12.3353H9.9709Z" fill="#1A1A1A"/>\n        </svg>\n        '])))}},{key:"getDisableAutoOpen",value:function(){return A.Z.getTrustedHTML(g||(g=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n        <path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 1.2C4.24446 1.2 1.2 4.24446 1.2 8C1.2 11.7555 4.24446 14.8 8 14.8C11.7555 14.8 14.8 11.7555 14.8 8C14.8 4.24446 11.7555 1.2 8 1.2ZM4.59944 7.39944H11.3994C11.7308 7.39944 11.9994 7.66807 11.9994 7.99944C11.9994 8.30319 11.7737 8.55423 11.4809 8.59396L11.3994 8.59944H4.59944C4.26807 8.59944 3.99944 8.33081 3.99944 7.99944C3.99944 7.69568 4.22516 7.44464 4.51802 7.40491L4.59944 7.39944H11.3994H4.59944Z"/>\n        </svg>'])))}},{key:"getEnableAutoOpen",value:function(){return A.Z.getTrustedHTML(m||(m=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n        <path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 1.2C4.24446 1.2 1.2 4.24446 1.2 8C1.2 11.7555 4.24446 14.8 8 14.8C11.7555 14.8 14.8 11.7555 14.8 8C14.8 4.24446 11.7555 1.2 8 1.2ZM7 9.15147L10.5757 5.57574C10.8101 5.34142 11.1899 5.34142 11.4243 5.57574C11.6373 5.78875 11.6566 6.12208 11.4824 6.35697L11.4243 6.42426L7.42426 10.4243C7.21125 10.6373 6.87792 10.6566 6.64303 10.4824L6.57574 10.4243L4.57574 8.42426C4.34142 8.18995 4.34142 7.81005 4.57574 7.57574C4.78875 7.36272 5.12208 7.34336 5.35697 7.51764L5.42426 7.57574L7 9.15147L10.5757 5.57574L7 9.15147Z"/>\n        </svg>'])))}},{key:"getHeaderIcon",value:function(){return A.Z.getTrustedHTML(v||(v=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">\n        <path d="M14.4407 11.9085C14.2304 12.0187 14.0107 12.1173 13.7824 12.2031C13.0961 12.4609 12.3381 12.6071 11.5386 12.6071C8.58104 12.6071 6.00467 10.5726 6.00467 7.96186C6.00467 7.22779 6.4294 6.59148 7.03128 6.25635C4.35654 6.36847 3.66895 9.15637 3.66895 10.7895C3.66895 15.4066 7.92454 15.8752 8.84155 15.8752C9.33568 15.8752 10.0816 15.7312 10.5309 15.5903C10.5584 15.5812 10.5856 15.572 10.6129 15.5626C12.3478 14.9642 13.8122 13.7871 14.7747 12.2613C14.9127 12.0425 14.67 11.7883 14.4407 11.9085Z" fill="url(#paint0_linear_header)"/>\n        <path opacity="0.35" d="M14.4407 11.9085C14.2304 12.0187 14.0107 12.1173 13.7824 12.2031C13.0961 12.4609 12.3381 12.6071 11.5386 12.6071C8.58104 12.6071 6.00467 10.5726 6.00467 7.96186C6.00467 7.22779 6.4294 6.59148 7.03128 6.25635C4.35654 6.36847 3.66895 9.15637 3.66895 10.7895C3.66895 15.4066 7.92454 15.8752 8.84155 15.8752C9.33568 15.8752 10.0816 15.7312 10.5309 15.5903C10.5584 15.5812 10.5856 15.572 10.6129 15.5626C12.3478 14.9642 13.8122 13.7871 14.7747 12.2613C14.9127 12.0425 14.67 11.7883 14.4407 11.9085Z" fill="url(#paint1_radial_header)"/>\n        <path d="M6.60699 15.0887C6.0511 14.7441 5.56853 14.2897 5.18603 13.7527C4.59415 12.9217 4.2403 11.8995 4.2403 10.7897C4.2403 9.15655 5.00079 7.70997 6.17302 6.79347C6.43924 6.58534 6.78012 6.3754 7.03131 6.25652C7.22631 6.16418 7.55988 5.99792 8.00288 6.0042C8.73739 6.01462 9.29233 6.38909 9.60821 6.81434C9.85096 7.14109 10.0006 7.54366 10.0056 7.98066C10.0058 7.96754 11.5347 3.00537 5.00249 3.00537C2.25916 3.00537 0 5.60973 0 7.89385C0 9.34274 0.336211 10.4995 0.757169 11.3959C1.69471 13.3928 3.43331 14.9383 5.56007 15.6193C6.33024 15.8659 7.15075 16.0003 8.00288 16.0003C8.8867 16.0003 9.73608 15.8549 10.531 15.5905C10.0816 15.7314 9.60514 15.8086 9.11102 15.8086C8.19407 15.8086 7.33938 15.5427 6.60699 15.0887Z" fill="url(#paint2_linear_header)"/>\n        <path opacity="0.41" d="M6.60699 15.0887C6.0511 14.7441 5.56853 14.2897 5.18603 13.7527C4.59415 12.9217 4.2403 11.8995 4.2403 10.7897C4.2403 9.15655 5.00079 7.70997 6.17302 6.79347C6.43924 6.58534 6.78012 6.3754 7.03131 6.25652C7.22631 6.16418 7.55988 5.99792 8.00288 6.0042C8.73739 6.01462 9.29233 6.38909 9.60821 6.81434C9.85096 7.14109 10.0006 7.54366 10.0056 7.98066C10.0058 7.96754 11.5347 3.00537 5.00249 3.00537C2.25916 3.00537 0 5.60973 0 7.89385C0 9.34274 0.336211 10.4995 0.757169 11.3959C1.69471 13.3928 3.43331 14.9383 5.56007 15.6193C6.33024 15.8659 7.15075 16.0003 8.00288 16.0003C8.8867 16.0003 9.73608 15.8549 10.531 15.5905C10.0816 15.7314 9.60514 15.8086 9.11102 15.8086C8.19407 15.8086 7.33938 15.5427 6.60699 15.0887Z" fill="url(#paint3_radial_header)"/>\n        <path d="M9.52007 9.30364C9.46944 9.36927 9.31363 9.45977 9.31363 9.65765C9.31363 9.82046 9.41988 9.97746 9.6087 10.1093C10.5075 10.7365 12.2016 10.652 12.2062 10.652C12.9055 10.6496 13.5347 10.4573 14.0982 10.1278C14.3546 9.9779 14.5919 9.79983 14.8059 9.59652C15.5401 8.89883 15.9877 7.91563 16.0001 6.82318C16.0161 5.42222 15.5026 4.49083 15.2916 4.07842C13.967 1.48976 11.1078 0 7.99906 0C3.61686 0 0.0595379 3.52166 0.000732422 7.88757C0.0304402 5.60364 2.30036 3.75932 4.99864 3.75932C5.21742 3.75932 6.46504 3.78066 7.62399 4.38892C8.64487 4.92472 9.18013 5.57215 9.55213 6.21442C9.93845 6.88131 10.0071 7.72357 10.0071 8.05938C10.0071 8.3952 9.83782 8.89239 9.52007 9.30364Z" fill="url(#paint4_radial_header)"/>\n        <path d="M9.52007 9.30364C9.46944 9.36927 9.31363 9.45977 9.31363 9.65765C9.31363 9.82046 9.41988 9.97746 9.6087 10.1093C10.5075 10.7365 12.2016 10.652 12.2062 10.652C12.9055 10.6496 13.5347 10.4573 14.0982 10.1278C14.3546 9.9779 14.5919 9.79983 14.8059 9.59652C15.5401 8.89883 15.9877 7.91563 16.0001 6.82318C16.0161 5.42222 15.5026 4.49083 15.2916 4.07842C13.967 1.48976 11.1078 0 7.99906 0C3.61686 0 0.0595379 3.52166 0.000732422 7.88757C0.0304402 5.60364 2.30036 3.75932 4.99864 3.75932C5.21742 3.75932 6.46504 3.78066 7.62399 4.38892C8.64487 4.92472 9.18013 5.57215 9.55213 6.21442C9.93845 6.88131 10.0071 7.72357 10.0071 8.05938C10.0071 8.3952 9.83782 8.89239 9.52007 9.30364Z" fill="url(#paint5_radial_header)"/>\n        <defs>\n        <linearGradient id="paint0_linear_header" x1="3.66895" y1="11.0658" x2="14.815" y2="11.0658" gradientUnits="userSpaceOnUse">\n        <stop stop-color="#0C59A4"/>\n        <stop offset="1" stop-color="#114A8B"/>\n        </linearGradient>\n        <radialGradient id="paint1_radial_header" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(9.8253 11.149) scale(5.96154 5.66985)">\n        <stop offset="0.71659" stop-opacity="0"/>\n        <stop offset="0.9459" stop-opacity="0.53"/>\n        <stop offset="1"/>\n        </radialGradient>\n        <linearGradient id="paint2_linear_header" x1="9.54527" y1="6.23047" x2="2.58302" y2="13.814" gradientUnits="userSpaceOnUse">\n        <stop stop-color="#1B9DE2"/>\n        <stop offset="0.16164" stop-color="#1595DF"/>\n        <stop offset="0.66749" stop-color="#0680D7"/>\n        <stop offset="1" stop-color="#0078D4"/>\n        </linearGradient>\n        <radialGradient id="paint3_radial_header" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(4.45659 12.4168) rotate(-81.464) scale(8.95226 7.21381)">\n        <stop offset="0.76293" stop-opacity="0"/>\n        <stop offset="0.9459" stop-opacity="0.5"/>\n        <stop offset="1"/>\n        </radialGradient>\n        <radialGradient id="paint4_radial_header" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(1.57751 2.92536) rotate(92.129) scale(12.652 26.9468)">\n        <stop stop-color="#35C1F1"/>\n        <stop offset="0.11079" stop-color="#34C1ED"/>\n        <stop offset="0.23164" stop-color="#2FC2DF"/>\n        <stop offset="0.31446" stop-color="#2BC3D2"/>\n        <stop offset="0.67338" stop-color="#36C752"/>\n        </radialGradient>\n        <radialGradient id="paint5_radial_header" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(15.1549 4.84846) rotate(73.6747) scale(6.08366 4.96699)">\n        <stop stop-color="#66EB6E"/>\n        <stop offset="1" stop-color="#66EB6E" stop-opacity="0"/>\n        </radialGradient>\n        </defs>\n        </svg>'])))}},{key:"getMenuIcon",value:function(){return A.Z.getTrustedHTML(y||(y=(0,E.Z)(['<svg id="flyoutMenu" xmlns="http://www.w3.org/2000/svg" width="14" height="12" viewBox="0 0 14 12">\n        <path d="M1 5C1.14062 5 1.27083 5.02604 1.39062 5.07812C1.51042 5.13021 1.61458 5.20312 1.70312 5.29688C1.79688 5.38542 1.86979 5.48958 1.92188 5.60938C1.97396 5.72917 2 5.85938 2 6C2 6.14062 1.97396 6.27083 1.92188 6.39062C1.86979 6.51042 1.79688 6.61719 1.70312 6.71094C1.61458 6.79948 1.51042 6.86979 1.39062 6.92188C1.27083 6.97396 1.14062 7 1 7C0.859375 7 0.729167 6.97396 0.609375 6.92188C0.489583 6.86979 0.382812 6.79948 0.289062 6.71094C0.200521 6.61719 0.130208 6.51042 0.078125 6.39062C0.0260417 6.27083 0 6.14062 0 6C0 5.85938 0.0260417 5.72917 0.078125 5.60938C0.130208 5.48958 0.200521 5.38542 0.289062 5.29688C0.382812 5.20312 0.489583 5.13021 0.609375 5.07812C0.729167 5.02604 0.859375 5 1 5ZM7 5C7.14062 5 7.27083 5.02604 7.39062 5.07812C7.51042 5.13021 7.61458 5.20312 7.70312 5.29688C7.79688 5.38542 7.86979 5.48958 7.92188 5.60938C7.97396 5.72917 8 5.85938 8 6C8 6.14062 7.97396 6.27083 7.92188 6.39062C7.86979 6.51042 7.79688 6.61719 7.70312 6.71094C7.61458 6.79948 7.51042 6.86979 7.39062 6.92188C7.27083 6.97396 7.14062 7 7 7C6.85938 7 6.72917 6.97396 6.60938 6.92188C6.48958 6.86979 6.38281 6.79948 6.28906 6.71094C6.20052 6.61719 6.13021 6.51042 6.07812 6.39062C6.02604 6.27083 6 6.14062 6 6C6 5.85938 6.02604 5.72917 6.07812 5.60938C6.13021 5.48958 6.20052 5.38542 6.28906 5.29688C6.38281 5.20312 6.48958 5.13021 6.60938 5.07812C6.72917 5.02604 6.85938 5 7 5ZM13 5C13.1406 5 13.2708 5.02604 13.3906 5.07812C13.5104 5.13021 13.6146 5.20312 13.7031 5.29688C13.7969 5.38542 13.8698 5.48958 13.9219 5.60938C13.974 5.72917 14 5.85938 14 6C14 6.14062 13.974 6.27083 13.9219 6.39062C13.8698 6.51042 13.7969 6.61719 13.7031 6.71094C13.6146 6.79948 13.5104 6.86979 13.3906 6.92188C13.2708 6.97396 13.1406 7 13 7C12.8594 7 12.7292 6.97396 12.6094 6.92188C12.4896 6.86979 12.3828 6.79948 12.2891 6.71094C12.2005 6.61719 12.1302 6.51042 12.0781 6.39062C12.026 6.27083 12 6.14062 12 6C12 5.85938 12.026 5.72917 12.0781 5.60938C12.1302 5.48958 12.2005 5.38542 12.2891 5.29688C12.3828 5.20312 12.4896 5.13021 12.6094 5.07812C12.7292 5.02604 12.8594 5 13 5Z"/>\n        </svg>'])))}},{key:"getSettingsIcon",value:function(){return A.Z.getTrustedHTML(C||(C=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="16" height="17" viewBox="0 0 16 17">\n        <path d="M7.81044 0C8.42209 0.00704958 9.03134 0.0777185 9.62836 0.210865C9.88898 0.268988 10.0839 0.486259 10.1135 0.751636L10.2553 2.02401C10.3195 2.60822 10.8128 3.0507 11.4008 3.05132C11.5589 3.05156 11.7152 3.01865 11.8613 2.95403L13.0285 2.4413C13.2712 2.33466 13.5548 2.3928 13.7361 2.58635C14.5796 3.4872 15.2077 4.56762 15.5734 5.74632C15.6522 6.00048 15.5615 6.27669 15.3473 6.43459L14.3127 7.19716C14.0176 7.41399 13.8433 7.75834 13.8433 8.12455C13.8433 8.49076 14.0176 8.8351 14.3133 9.05241L15.3488 9.81525C15.5631 9.97311 15.6539 10.2494 15.575 10.5036C15.2096 11.6821 14.5817 12.7624 13.7387 13.6634C13.5577 13.8569 13.2743 13.9152 13.0315 13.8089L11.8596 13.2954C11.5243 13.1487 11.1393 13.1702 10.8224 13.3533C10.5056 13.5364 10.2947 13.8593 10.2544 14.2231L10.1135 15.4953C10.0845 15.7577 9.89375 15.9735 9.63698 16.0346C8.42994 16.3218 7.17236 16.3218 5.96532 16.0346C5.70855 15.9735 5.51783 15.7577 5.48878 15.4953L5.34809 14.225C5.30677 13.8619 5.09558 13.54 4.77898 13.3575C4.46238 13.175 4.07796 13.1536 3.74379 13.2995L2.57161 13.813C2.32881 13.9194 2.04532 13.8611 1.86428 13.6674C1.02081 12.7654 0.392955 11.6838 0.0279603 10.504C-0.0506552 10.2499 0.0401776 9.97385 0.254331 9.81608L1.29044 9.05277C1.58556 8.83594 1.75986 8.49159 1.75986 8.12538C1.75986 7.75917 1.58556 7.41483 1.29006 7.19771L0.254594 6.43571C0.0401229 6.27787 -0.0507935 6.00149 0.0280992 5.74715C0.393725 4.56846 1.02191 3.48804 1.8654 2.58718C2.04662 2.39363 2.33024 2.33549 2.573 2.44213L3.73998 2.95477C4.07576 3.10213 4.46179 3.07987 4.7801 2.89391C5.09704 2.71007 5.30803 2.38685 5.34877 2.02304L5.4905 0.751636C5.52009 0.486125 5.71518 0.268784 5.97596 0.210785C6.57369 0.0778498 7.18359 0.00721143 7.81044 0ZM7.81059 1.24992C7.43223 1.25437 7.05492 1.28702 6.68181 1.34751L6.59104 2.16182C6.50618 2.91973 6.06699 3.59252 5.40898 3.97419C4.74694 4.36098 3.93976 4.40752 3.23745 4.09931L2.48887 3.77047C2.01226 4.34894 1.63291 5.00113 1.36573 5.7014L2.03056 6.19066C2.64623 6.64301 3.00986 7.36139 3.00986 8.12538C3.00986 8.88937 2.64623 9.60775 2.03121 10.0596L1.36533 10.5502C1.63228 11.2517 2.01169 11.9051 2.48863 12.4847L3.2429 12.1542C3.94131 11.8493 4.743 11.8939 5.40323 12.2745C6.06347 12.6551 6.5039 13.3265 6.59029 14.0855L6.68109 14.9054C7.42246 15.0315 8.17984 15.0315 8.92121 14.9054L9.01201 14.0856C9.096 13.3267 9.53592 12.6531 10.1969 12.271C10.858 11.889 11.6613 11.8442 12.361 12.1504L13.1146 12.4806C13.5911 11.9019 13.9704 11.2495 14.2375 10.5491L13.5726 10.0593C12.9569 9.60692 12.5933 8.88854 12.5933 8.12455C12.5933 7.36056 12.9569 6.64218 13.5718 6.19039L14.2359 5.70091C13.9687 5.00051 13.5893 4.3482 13.1126 3.76963L12.3655 4.09781C12.0611 4.23251 11.7318 4.30184 11.3992 4.30132C10.1744 4.30003 9.14657 3.37796 9.0129 2.16152L8.92213 1.34725C8.55085 1.28683 8.17749 1.25427 7.81059 1.24992ZM7.80004 4.99996C9.52593 4.99996 10.925 6.39907 10.925 8.12496C10.925 9.85085 9.52593 11.25 7.80004 11.25C6.07415 11.25 4.67504 9.85085 4.67504 8.12496C4.67504 6.39907 6.07415 4.99996 7.80004 4.99996ZM7.80004 6.24996C6.76451 6.24996 5.92504 7.08943 5.92504 8.12496C5.92504 9.16049 6.76451 9.99996 7.80004 9.99996C8.83557 9.99996 9.67504 9.16049 9.67504 8.12496C9.67504 7.08943 8.83557 6.24996 7.80004 6.24996Z"/>\n        </svg>'])))}},{key:"getErrorImage",value:function(){return A.Z.getTrustedHTML(b||(b=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="314" height="72" viewBox="0 0 314 72" fill="none">\n       <path d="M22.2505 70.9081C20.4564 68.0473 43.6258 53.3722 71.7396 56.2548C148.839 64.1601 174.218 0 228.893 0C283.567 0 284.573 70.9081 282.057 70.9081C279.541 70.9081 22.2505 70.9081 22.2505 70.9081Z" fill="#EBECEF"/>\n       <path d="M247.052 70.0138C246.724 70.5816 247.336 71.193 247.905 70.931C250.421 69.7299 253.55 69.3805 255.497 68.7253C260.113 67.1748 260.704 65.2094 264.227 62.1739C261.382 61.89 258.844 61.5843 256.394 62.5233C252.412 64.052 248.912 66.8254 247.052 70.0138Z" fill="#BFBFBF"/>\n       <path d="M243.377 54.9664C243.617 58.4387 245.893 66.6279 247.052 70.5806C247.205 71.1266 248.015 71.0829 248.102 70.5151C248.803 66.4532 250.159 58.0019 249.984 54.5297C249.7 48.4369 246.155 45.4014 246.155 45.4014C246.155 45.4014 242.961 48.8955 243.377 54.9664Z" fill="#BFBFBF"/>\n       <path d="M246.746 70.0787C246.549 70.7339 247.403 71.1925 247.84 70.6684C251.472 66.4536 259.239 57.1943 261.274 53.0887C264.752 46.0132 262.63 40.3572 262.63 40.3572C262.63 40.3572 256.81 42.3444 253.507 49.4855C251.581 53.6129 248.256 64.8376 246.746 70.0787Z" fill="#BFBFBF"/>\n       <path fill-rule="evenodd" clip-rule="evenodd" d="M180.169 42.7802L169.252 52.8038C168.902 53.1096 168.377 53.0877 168.092 52.7165C167.786 52.3671 167.83 51.8211 168.158 51.4936L179.075 41.4699C179.425 41.1642 179.95 41.186 180.257 41.5573C180.541 41.9067 180.497 42.4526 180.169 42.7802Z" fill="#EBECEF"/>\n       <path fill-rule="evenodd" clip-rule="evenodd" d="M243.135 21.947H203.535C203.535 24.9607 201.063 27.3847 198.022 27.3847C194.981 27.3847 192.53 24.9607 192.53 21.947H153.477C150.983 21.947 148.97 23.9561 148.97 26.4457V66.4311C148.97 68.8988 150.983 70.9079 153.477 70.9079H192.53C192.53 67.8942 195.003 65.4702 198.022 65.4702C198.241 65.4702 198.459 65.4921 198.656 65.5139C201.391 65.8196 203.535 68.1345 203.535 70.9079H243.135C245.629 70.9079 247.642 68.8988 247.642 66.4311V26.4457C247.642 23.9561 245.629 21.947 243.135 21.947ZM182.466 56.2109L183.079 59.6176L179.928 57.9579C178.244 57.0844 176.165 57.7396 175.312 59.4648L173.759 62.6313L172.205 59.4648C171.374 57.7396 169.273 57.0844 167.589 57.9579L164.46 59.6176L165.073 56.2109C165.423 54.3328 164.11 52.5203 162.207 52.2801L158.728 51.7996L161.244 49.4193C162.644 48.0871 162.644 45.8597 161.244 44.5275L158.728 42.1472L162.207 41.6668C164.11 41.4047 165.423 39.614 165.073 37.7359L164.46 34.3292L167.589 35.9889C169.273 36.8624 171.374 36.2073 172.205 34.5039L173.759 31.3374L175.312 34.5039C176.143 36.2073 178.244 36.8842 179.928 35.9889L183.079 34.3292L182.466 37.7359C182.138 39.614 183.429 41.4047 185.332 41.6668L188.811 42.1472L186.317 44.5275C184.917 45.8597 184.917 48.0871 186.317 49.4193L188.811 51.7996L185.332 52.2801C183.429 52.5203 182.138 54.311 182.466 56.2109Z" fill="white"/>\n       <path d="M198.678 29.2622V65.6007" stroke="#BFBFBF" stroke-linecap="round" stroke-dasharray="2 2"/>\n       <path fill-rule="evenodd" clip-rule="evenodd" d="M187.476 48.174C186.776 47.497 186.776 46.4051 187.476 45.7281L189.992 43.3478C191.021 42.3651 190.452 40.6398 189.052 40.4651L185.573 39.9847C184.61 39.8537 183.976 38.9583 184.151 38.0193L184.763 34.6126C185.026 33.2368 183.56 32.1449 182.313 32.8L179.163 34.4597C178.331 34.8964 177.281 34.5689 176.843 33.6954L175.29 30.5725C174.677 29.3059 172.883 29.3059 172.249 30.5725L170.696 33.739C170.28 34.6125 169.23 34.9401 168.398 34.5034L165.248 32.8437C164.001 32.1885 162.535 33.2586 162.797 34.6562L163.41 38.063C163.585 39.0238 162.929 39.8974 161.966 40.0284L158.487 40.5088C157.087 40.7054 156.518 42.4306 157.547 43.3914L160.063 45.7718C160.763 46.4488 160.763 47.5407 160.063 48.2176L157.547 50.598C156.518 51.5807 157.087 53.3059 158.487 53.4806L161.966 53.9611C162.929 54.0921 163.585 54.9874 163.41 55.9265L162.797 59.3332C162.535 60.709 164.001 61.7791 165.248 61.1239L168.398 59.4642C169.23 59.0275 170.28 59.3769 170.696 60.2286L172.249 63.3951C172.883 64.6617 174.677 64.6617 175.29 63.3951L176.843 60.2286C177.259 59.3769 178.309 59.0275 179.163 59.4642L182.313 61.1239C183.56 61.7791 185.026 60.709 184.763 59.3332L184.151 55.9265C183.976 54.9874 184.632 54.0921 185.573 53.9611L189.052 53.4806C190.452 53.2841 191.021 51.5589 189.992 50.598L187.476 48.174ZM185.332 52.2577C183.429 52.5197 182.116 54.3105 182.466 56.1885L183.079 59.5953L179.928 57.9356C178.244 57.0621 176.165 57.7172 175.312 59.4424L173.759 62.6089L172.205 59.4424C171.374 57.7172 169.273 57.0621 167.589 57.9356L164.46 59.5953L165.073 56.1885C165.423 54.3105 164.11 52.4979 162.207 52.2577L158.728 51.7772L161.244 49.3969C162.644 48.0648 162.644 45.8373 161.244 44.5052L158.728 42.1248L162.207 41.6444C164.11 41.3823 165.423 39.5916 165.073 37.7136L164.46 34.3068L167.589 35.9665C169.273 36.84 171.374 36.1849 172.205 34.4815L173.759 31.315L175.312 34.4815C176.143 36.1849 178.244 36.8619 179.928 35.9665L183.079 34.3068L182.466 37.7136C182.138 39.5916 183.429 41.3823 185.332 41.6444L188.811 42.1248L186.317 44.5052C184.917 45.8373 184.917 48.0648 186.317 49.3969L188.811 51.7772L185.332 52.2577Z" fill="#BFBFBF"/>\n       <path fill-rule="evenodd" clip-rule="evenodd" d="M186.317 44.5273L188.811 42.147L185.332 41.6665C183.429 41.4045 182.116 39.6138 182.466 37.7357L183.079 34.329L179.928 35.9887C178.244 36.8622 176.165 36.207 175.312 34.5037L173.759 31.3372L172.205 34.5037C171.374 36.207 169.273 36.884 167.589 35.9887L164.46 34.329L165.073 37.7357C165.423 39.6138 164.11 41.4045 162.207 41.6665L158.728 42.147L161.244 44.5273C162.644 45.8594 162.644 48.0869 161.244 49.419L158.728 51.7994L162.207 52.2798C164.11 52.5419 165.423 54.3326 165.073 56.2107L164.46 59.6174L167.589 57.9577C169.273 57.0842 171.374 57.7393 172.205 59.4645L173.759 62.6311L175.312 59.4645C176.143 57.7393 178.244 57.0842 179.928 57.9577L183.079 59.6174L182.466 56.2107C182.138 54.3326 183.429 52.5201 185.332 52.2798L188.811 51.7994L186.317 49.419C184.917 48.0651 184.917 45.8594 186.317 44.5273ZM169.252 52.8039C168.902 53.1097 168.376 53.0878 168.092 52.7166C167.786 52.3672 167.829 51.8212 168.158 51.4937L179.075 41.47C179.425 41.1643 179.95 41.1861 180.256 41.5574C180.541 41.9068 180.519 42.4527 180.169 42.7803L169.252 52.8039Z" fill="white"/>\n       <path fill-rule="evenodd" clip-rule="evenodd" d="M170.433 40.6836C168.639 40.2032 166.78 41.2514 166.298 43.0421C165.817 44.8547 166.911 46.6673 168.683 47.1259C170.477 47.6063 172.337 46.5581 172.818 44.7674C173.299 42.9766 172.227 41.1641 170.433 40.6836ZM171.177 44.3306C170.937 45.2041 170.018 45.7501 169.121 45.5098C168.202 45.2696 167.677 44.3524 167.917 43.4789C168.158 42.6054 169.077 42.0594 169.996 42.2997C170.893 42.5617 171.418 43.4571 171.177 44.3306Z" fill="#BFBFBF"/>\n       <path fill-rule="evenodd" clip-rule="evenodd" d="M179.447 46.7981C177.653 46.3177 175.793 47.3659 175.312 49.1566C174.831 50.9474 175.903 52.7818 177.697 53.2404C179.491 53.7208 181.35 52.6726 181.832 50.8818C182.313 49.113 181.241 47.2786 179.447 46.7981ZM180.191 50.4669C179.95 51.3404 179.031 51.8864 178.112 51.6462C177.193 51.3841 176.69 50.4888 176.931 49.6152C177.172 48.7417 178.091 48.1958 178.988 48.436C179.906 48.6544 180.432 49.5716 180.191 50.4669Z" fill="#BFBFBF"/>\n       <path fill-rule="evenodd" clip-rule="evenodd" d="M180.169 42.7802L169.252 52.8038C168.902 53.1096 168.377 53.0877 168.092 52.7165C167.786 52.3671 167.83 51.8211 168.158 51.4936L179.075 41.4699C179.425 41.1642 179.95 41.186 180.257 41.5573C180.541 41.9067 180.497 42.4526 180.169 42.7802Z" fill="#BFBFBF"/>\n       <path fill-rule="evenodd" clip-rule="evenodd" d="M223.729 30.5725C223.116 29.3059 221.322 29.3059 220.688 30.5725L219.135 33.739C218.719 34.5907 217.669 34.9401 216.837 34.4815L213.687 32.8218C212.44 32.1667 210.996 33.2368 211.236 34.6126L211.849 38.0193C212.024 38.9583 211.368 39.8537 210.405 39.9847L206.926 40.4651C205.526 40.6617 204.957 42.3869 205.986 43.3478L208.48 45.7281C209.18 46.3833 209.18 47.497 208.48 48.174L205.986 50.5543C204.957 51.537 205.526 53.2622 206.926 53.4369L210.405 53.9174C211.368 54.0484 212.002 54.9438 211.849 55.8828L211.236 59.2895C210.996 60.6653 212.44 61.7354 213.687 61.0803L216.837 59.4206C217.691 58.9838 218.719 59.3114 219.135 60.1631L220.688 63.3296C221.301 64.5962 223.095 64.5962 223.729 63.3296L225.282 60.1631C225.698 59.3114 226.748 58.962 227.58 59.4206L230.73 61.0803C231.977 61.7354 233.421 60.6653 233.181 59.2895L232.568 55.8828C232.393 54.9438 233.049 54.0484 234.012 53.9174L237.491 53.4369C238.891 53.2404 239.46 51.5152 238.431 50.5543L235.937 48.174C235.237 47.5188 235.237 46.4051 235.937 45.7281L238.431 43.3478C239.46 42.3651 238.891 40.6398 237.491 40.4651L234.012 39.9847C233.049 39.8537 232.415 38.9583 232.568 38.0193L233.181 34.6126C233.421 33.2368 231.977 32.1667 230.73 32.8218L227.58 34.4815C226.726 34.9183 225.698 34.5907 225.282 33.739L223.729 30.5725ZM216.356 43.4788C216.597 42.6053 217.516 42.0593 218.413 42.2995C219.331 42.5398 219.857 43.457 219.616 44.3305C219.375 45.204 218.456 45.75 217.559 45.5097C216.662 45.2695 216.137 44.3523 216.356 43.4788ZM218.872 40.6835C217.078 40.2031 215.218 41.2513 214.737 43.042C214.256 44.8328 215.328 46.6671 217.122 47.1476C218.916 47.628 220.775 46.5798 221.257 44.7891C221.76 42.9765 220.666 41.164 218.872 40.6835ZM227.448 48.4142C226.529 48.174 225.611 48.6981 225.392 49.5934C225.151 50.467 225.676 51.3842 226.595 51.6244C227.514 51.8646 228.433 51.3405 228.652 50.4451C228.87 49.5716 228.345 48.6544 227.448 48.4142ZM223.751 49.1567C224.232 47.366 226.092 46.3177 227.886 46.7982C229.68 47.2786 230.752 49.0912 230.271 50.9037C229.789 52.6944 227.93 53.7427 226.136 53.2622C224.342 52.7818 223.27 50.9474 223.751 49.1567ZM228.608 42.78C228.958 42.4742 228.98 41.9283 228.695 41.557C228.389 41.2076 227.864 41.164 227.536 41.4915L216.619 51.5152C216.268 51.8209 216.247 52.3669 216.531 52.7381C216.837 53.0875 217.362 53.1312 217.691 52.8036L228.608 42.78Z" fill="#BFBFBF"/>\n       <path d="M86.0258 60.5349L137.725 61.1682C139.694 61.19 141.269 62.806 141.225 64.7715L141.203 67.6978C141.181 69.6632 139.562 71.2355 137.593 71.1919L85.8945 70.5586C83.9254 70.5367 82.3502 68.9207 82.394 66.9553L82.4377 64.029C82.4596 62.0854 84.0567 60.5131 86.0258 60.5349Z" fill="#BFBFBF"/>\n       <path d="M89.3953 10.0013L141.029 10.6346C147.986 10.7219 153.543 16.4216 153.455 23.3661L153.105 51.0349C153.018 57.9794 147.308 63.5263 140.35 63.4389L88.7171 62.8056C81.7597 62.7183 76.2026 57.0185 76.2901 50.0741L76.6401 22.4053C76.7277 15.4608 82.4379 9.91391 89.3953 10.0013Z" fill="#BFBFBF"/>\n       <path d="M83.2693 9.91386L131.599 10.5253C138.556 10.6127 144.113 16.3124 144.026 23.2569L143.676 50.9257C143.588 57.8702 137.878 63.417 130.921 63.3297L82.5911 62.7182C75.6337 62.6309 70.0766 56.9311 70.1641 49.9866L70.5142 22.3179C70.6017 15.3952 76.312 9.8265 83.2693 9.91386Z" fill="#EBECEF"/>\n       <path d="M102.216 55.0098C112.39 58.8096 123.723 53.6558 127.529 43.5011C131.336 33.3464 126.173 22.0343 115.999 18.2345C105.826 14.4347 94.4929 19.5885 90.6861 29.7432C86.8792 39.8979 92.0425 51.21 102.216 55.0098Z" fill="white" stroke="#BFBFBF" stroke-miterlimit="10"/>\n       <path d="M109.283 22.2092L109.108 36.6223L101.713 41.3612" fill="white"/>\n       <path d="M109.283 22.2092L109.108 36.6223L101.713 41.3612" fill="white"/>\n       <path d="M109.283 22.2092L109.108 36.6223L101.713 41.3612" stroke="#BFBFBF" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>\n       <path d="M1.09375 70.9077H312.906" stroke="#EBECEF" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>\n       </svg>'])))}},{key:"getDefaultProductImage",value:function(){return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NiIgaG\n                VpZ2h0PSI2NiIgdmlld0JveD0iMCAwIDY2IDY2IiBmaWxsPSJub25lIj4KICAgICAgICA8cmVjdCB3aWR0aD0iNjYiIGhlaW\n                dodD0iNjYiIHJ4PSI0IiBmaWxsPSIjRjdGN0Y3Ii8+CiAgICAgICAgPHBhdGggZD0iTTMyLjI5OTUgMzUuMjkwNkwzMi40MT\n                EgMzUuMTk1OUMzMi43NTY2IDM0Ljk0MzQgMzMuMjI3MyAzNC45NDAzIDMzLjU3NiAzNS4xODY2TDMzLjcwMDUgMzUuMjkwNk\n                w0Mi45Mzc0IDQ0LjM1ODFDNDIuMjc3MSA0NC43NjUyIDQxLjQ5OTMgNDUgNDAuNjY2NyA0NUgyNS4zMzMzQzI0LjUwMDcgND\n                UgMjMuNzIyOSA0NC43NjUyIDIzLjA2MjYgNDQuMzU4MUwzMi4yOTk1IDM1LjI5MDZMMzIuNDExIDM1LjE5NTlMMzIuMjk5NS\n                AzNS4yOTA2Wk00MC42NjY3IDIxQzQzLjA1OTkgMjEgNDUgMjIuOTQwMSA0NSAyNS4zMzMzVjQwLjY2NjdDNDUgNDEuNTAyNy\n                A0NC43NjMyIDQyLjI4MzUgNDQuMzUzMSA0Mi45NDU2TDM1LjEwMTYgMzMuODYzM0wzNC45MzAzIDMzLjcwNzVDMzMuODE5OS\n                AzMi43NzI0IDMyLjE5MjIgMzIuNzY5OCAzMS4wNzkgMzMuNjk5N0wzMC44OTg0IDMzLjg2MzNMMjEuNjQ2OSA0Mi45NDU2Qz\n                IxLjIzNjggNDIuMjgzNSAyMSA0MS41MDI3IDIxIDQwLjY2NjdWMjUuMzMzM0MyMSAyMi45NDAxIDIyLjk0MDEgMjEgMjUuMz\n                MzMyAyMUg0MC42NjY3Wk0zOC4wMDI4IDI1QzM2LjM0NDQgMjUgMzUgMjYuMzQ0NCAzNSAyOC4wMDI4QzM1IDI5LjY2MTIgMz\n                YuMzQ0NCAzMS4wMDU2IDM4LjAwMjggMzEuMDA1NkMzOS42NjEyIDMxLjAwNTYgNDEuMDA1NiAyOS42NjEyIDQxLjAwNTYgMj\n                guMDAyOEM0MS4wMDU2IDI2LjM0NDQgMzkuNjYxMiAyNSAzOC4wMDI4IDI1Wk0zOC4wMDI4IDI3QzM4LjU1NjcgMjcgMzkuMD\n                A1NiAyNy40NDkgMzkuMDA1NiAyOC4wMDI4QzM5LjAwNTYgMjguNTU2NyAzOC41NTY3IDI5LjAwNTYgMzguMDAyOCAyOS4wMD\n                U2QzM3LjQ0OSAyOS4wMDU2IDM3IDI4LjU1NjcgMzcgMjguMDAyOEMzNyAyNy40NDkgMzcuNDQ5IDI3IDM4LjAwMjggMjdaIi\n                BmaWxsPSIjRDZENkQ2Ii8+CiAgICAgICAgPC9zdmc+"}}]),t}(),I=i(370);!function(t){t.PageStatus="pageStatus",t.EnabledFeatures="enabled_features",t.CouponsApiResponse="couponsApiResponse",t.PackageTrackingFreShown="packageTrackingFreShown",t.PackageTrackingUserConsented="packageTrackingUserConsented",t.PackageTrackerResponse="packageTrackingData",t.ShouldShowPackageTrackingNotification="shouldShowPackageTrackingNotification",t.EdgeDriverDataForFlyout="edgeDriverDataForFlyout",t.GuestCouponsApiResponse="guestCouponsApiResponse",t.AutofillProfileEnabled="autofillProfileEnabled",t.AutofillCreditCardEnabled="autofillCreditCardEnabled",t.BgaaInfo="bgaa_info"}(S||(S={}));var D=i(13),k=(0,l.Z)((function t(){(0,s.Z)(this,t),(0,I.Z)(this,"AutoApplyStatus",void 0),(0,I.Z)(this,"ExpressCheckoutStatus",void 0),(0,I.Z)(this,"PageValidations",void 0)})),w=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"shopping",void 0),(0,I.Z)(this,"shoppingPersistent",void 0),(0,I.Z)(this,"openedWith",void 0),(0,I.Z)(this,"autoShowAllowed",void 0),(0,I.Z)(this,"isOrganicFlowEnabled",void 0),(0,I.Z)(this,"isShoppingPersonalizationEnabled",void 0),(0,I.Z)(this,"shouldShowCookieConsent",void 0),(0,I.Z)(this,"shouldShowBanner",void 0),(0,I.Z)(this,"bannerContext",void 0),(0,I.Z)(this,"domain",void 0),(0,I.Z)(this,"foundLowerPrice",void 0),(0,I.Z)(this,"showPCBannerUX",void 0),(0,I.Z)(this,"currentUrl",void 0),(0,I.Z)(this,"currentTheme",void 0),(0,I.Z)(this,"isCheckoutPage",void 0),(0,I.Z)(this,"currentDirection",void 0),(0,I.Z)(this,"lastCommittedURL",void 0),(0,I.Z)(this,"resourcesEndpoint",void 0),(0,I.Z)(this,"urlPrefix",void 0),(0,I.Z)(this,"popupOrigination",void 0),(0,I.Z)(this,"autoshowFeaturePref",void 0),(0,I.Z)(this,"currentDevice",void 0),(0,I.Z)(this,"seeInfoFromPCNotification",void 0),(0,I.Z)(this,"pageStatus",void 0),(0,I.Z)(this,"microNotificationTitle",void 0),(0,I.Z)(this,"isPane",void 0),(0,I.Z)(this,"isPaneEnabled",void 0),(0,I.Z)(this,"isPanePinned",void 0),(0,I.Z)(this,"isRebatesEnabled",void 0),(0,I.Z)(this,"edgeDriverDataForFlyout",void 0),(0,I.Z)(this,"pageLocale",void 0),(0,I.Z)(this,"channel",void 0)}return(0,l.Z)(t,[{key:"Create",value:function(t,e){var i=document.createElement("msft-edge-shopping"),n=document.createElement("msft-edge-shopping");this.currentDevice=t;var o=e.GetLoadTimeDataValue("dark_theme",!1);this.currentTheme=D.Q2.Light,o&&(this.currentTheme=D.Q2.Dark);var a=e.GetLoadTimeDataValue("is_rtl",!1);this.currentDirection=D.m5.LTR,a&&(this.currentDirection=D.m5.RTL),this.autoShowAllowed=e.GetLoadTimeDataValue("isAutoShowAllowed",!1),this.openedWith=e.GetLoadTimeDataValue("open_action",void 0),this.currentUrl=e.GetLoadTimeDataValue("url",void 0),this.shouldShowBanner=e.GetLoadTimeDataValue("shouldShowBanner",!1),this.bannerContext=e.GetLoadTimeDataValue("bannerContext",""),this.shouldShowCookieConsent=e.GetLoadTimeDataValue("shouldShowCookieConsent",!1),this.foundLowerPrice=e.GetLoadTimeDataValue("foundLowerPrice",void 0),this.showPCBannerUX=e.GetLoadTimeDataValue("showPCBannerUX",!1),this.isOrganicFlowEnabled=e.GetLoadTimeDataValue("allowOrganicRebates",!1),this.isShoppingPersonalizationEnabled=e.GetLoadTimeDataValue("is_personalized_shopping_enabled",void 0),this.isCheckoutPage=e.GetLoadTimeDataValue("isCheckoutPage",!1),this.lastCommittedURL=e.GetLoadTimeDataValue("lastCommittedURL",void 0),this.popupOrigination=e.GetLoadTimeDataValue("popupOrigination",void 0),this.autoshowFeaturePref=e.GetLoadTimeDataValue("autoShowFeatureDisabledPref",void 0),this.microNotificationTitle=e.GetLoadTimeDataValue("last_label_text",void 0),this.isPane=e.GetLoadTimeDataValue("is_hub",!1),this.isPaneEnabled=e.GetLoadTimeDataValue("is_hub_enabled",!1),this.isPanePinned=e.GetLoadTimeDataValue("is_hub_pinned",!1),this.isRebatesEnabled=e.GetLoadTimeDataValue("is_rebates_enabled",!0),this.pageLocale=e.GetLoadTimeDataValue("page_locale",void 0),this.channel=e.GetLoadTimeDataValue("channel",""),this.UpdatePageStatus(e),this.UpdateEdgeDriverDataForFlyout(e),this.domain="",this.shopping=i,this.shoppingPersistent=n,this.seeInfoFromPCNotification=!1,e.IsServerData()||t===D.AS.Mobile?this.urlPrefix="":this.urlPrefix="edge://image?",this.resourcesEndpoint=this.urlPrefix+"https://www.bing.com/api/shopping/v1/ux/images/"}},{key:"UpdatePageStatus",value:function(t){var e=new k,i=t.GetLoadTimeDataValue(S.PageStatus,void 0);if(i)try{var n=JSON.parse(i);e.AutoApplyStatus=n.auto_apply_status,e.ExpressCheckoutStatus=n.express_checkout_status,e.PageValidations=n.page_validations}catch(t){}this.pageStatus=e}},{key:"UpdateEdgeDriverDataForFlyout",value:function(t){this.edgeDriverDataForFlyout=void 0;var e=t.GetLoadTimeDataValue(S.EdgeDriverDataForFlyout,void 0);if(e)try{this.edgeDriverDataForFlyout=JSON.parse(e)}catch(t){}}}]),t}(),R=i(200),O=i(351),P=i(405),M=i(858),N=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"commissionType",void 0),(0,I.Z)(this,"commissionValue",void 0),(0,I.Z)(this,"isRebatesSupportedDomain",void 0),(0,I.Z)(this,"isRebatesUser",void 0),(0,I.Z)(this,"merchantName",void 0)}return(0,l.Z)(t,null,[{key:"Create",value:function(e){var i,n,o,a,r,s=new t;return s.commissionType=null===(i=e.highestCashbackCategory)||void 0===i?void 0:i.commissionType,s.commissionValue=null===(n=e.highestCashbackCategory)||void 0===n?void 0:n.commissionValue,s.isRebatesSupportedDomain=null!==(o=e.IsRebatesSupportedDomain)&&void 0!==o?o:null,s.isRebatesUser=null!==(a=null===(r=e.userRebateResponse)||void 0===r?void 0:r.isRebatesUser)&&void 0!==a&&a,s.merchantName=e.merchantName,s}}]),t}(),L=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"title",void 0),(0,I.Z)(this,"offerUrl",void 0)}return(0,l.Z)(t,null,[{key:"Create",value:function(e){var i=new t;return i.title=e.title,i.offerUrl=e.offerUrl,i}}]),t}(),_=function(){function t(e,i){(0,s.Z)(this,t),(0,I.Z)(this,"Lifetime",void 0),(0,I.Z)(this,"Timestamp",void 0),this.Lifetime=e,this.Timestamp=i||t.Now()}return(0,l.Z)(t,[{key:"Expired",value:function(){return t.Now()-this.Timestamp>=this.Lifetime}}],[{key:"Now",value:function(){return Math.round((new Date).getTime()/1e3)}}]),t}(),F=function(){function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"Type",void 0),(0,I.Z)(this,"ID",void 0),this.Type=e,this.ID=""}return(0,l.Z)(t,[{key:"toString",value:function(){return JSON.stringify(this)}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}}]),t}();function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var Z=function(t){(0,O.Z)(i,t);var e=H(i);function i(t,n){var o;return(0,s.Z)(this,i),o=e.call(this,a.Vm.ErrorResponse),(0,I.Z)((0,R.Z)(o),"ErrorMsg",void 0),(0,I.Z)((0,R.Z)(o),"ErrorName",void 0),o.ErrorMsg=t,o.ErrorName=n,o}return(0,l.Z)(i)}(F),B=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,null,[{key:"GenerateErrorMessage",value:function(t,e,i){var n=null!=t?t:"";return i&&(n+="\r\nDOM element path: '"+i+"'"),n+="\r\nFriendly name: '"+e+"'"}},{key:"GetDomainName",value:function(t){if(!t)return"";var e=t.toLowerCase().match(/(w){3}.?\./);return e&&null!=e.index&&e[0]?t.substring(e.index+e[0].length):t}},{key:"GetProcessedString",value:function(e,i,n){if(n&&(n===a.BN.Opal||n===a.BN.EdgeMobile||n===a.BN.Sapphire||n===a.BN.RBC)){if(i===a.UA.PlainString)return t.escapePlainString(e);if(i===a.UA.JsonString)return t.escapeJsonString(e)}return e}},{key:"escapeJsonString",value:function(t){return t?t.replace(/\"|'/g,'\\"'):t}},{key:"escapePlainString",value:function(t){return t?t.replace(/"|'/g,'\\"'):t}},{key:"ModifyObjectProperty",value:function(t,e,i){Object.defineProperty(t,e,{value:i,writable:!0})}},{key:"GenerateErrorResponse",value:function(e,i){return new Z(t.GetProcessedString(e,a.UA.JsonString,i))}},{key:"GetPriceStringAsNumber",value:function(e,i){return i&&(e=e.replace(/[^0-9\.,]+/g,""),!1===t.IsUsCurrencyFormat(e)&&(e=this.SwapCommaAndPeriod(e))),parseFloat(e.replace(/[^0-9\.]+/g,""))}},{key:"IsUsCurrencyFormat",value:function(t){var e=t.lastIndexOf(","),i=t.lastIndexOf(".");return!(i>-1&&e>-1&&e>i)&&(!(i>-1&&t.length-i-1>2)&&!(e>-1&&t.length-e-1<=2))}},{key:"SwapCommaAndPeriod",value:function(t){return t.replace(/[,.]/g,(function(t){return","===t?".":","}))}},{key:"ThrowError",value:function(t,e){var i=new Error(e);throw i.name=t,i}}]),t}(),U=B;function G(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return V(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return V(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var $=function(){function e(){(0,s.Z)(this,e)}var i,o,a;return(0,l.Z)(e,null,[{key:"Sleep",value:function(t){return new Promise((function(e){return setTimeout(e,t)}))}},{key:"WaitForCondition",value:(a=(0,t.Z)(n().mark((function t(i,o){var a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=(new Date).getTime();case 2:return t.next=4,i();case 4:if(t.t0=!t.sent,!t.t0){t.next=7;break}t.t0=a+o>(new Date).getTime();case 7:if(!t.t0){t.next=12;break}return t.next=10,e.Sleep(100);case 10:t.next=2;break;case 12:return t.next=15,i();case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t)}))),function(t,e){return a.apply(this,arguments)})},{key:"WaitUntilCondition",value:(o=(0,t.Z)(n().mark((function t(i,o){var a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=(new Date).getTime();case 2:if(!(a+o>(new Date).getTime())){t.next=11;break}return t.next=5,i();case 5:if(!t.sent){t.next=7;break}return t.abrupt("return",!0);case 7:return t.next=9,e.Sleep(100);case 9:t.next=2;break;case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t)}))),function(t,e){return o.apply(this,arguments)})},{key:"WaitForSyncCondition",value:(i=(0,t.Z)(n().mark((function t(i,o){var a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=(new Date).getTime();case 2:if(!(a+o>(new Date).getTime())){t.next=9;break}if(!i()){t.next=5;break}return t.abrupt("return",!0);case 5:return t.next=7,e.Sleep(100);case 7:t.next=2;break;case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)}))),function(t,e){return i.apply(this,arguments)})},{key:"IsValidDataField",value:function(t){return null!=t&&t.length>0&&"null"!==t}},{key:"IsOnPage",value:function(t,i){if(e.IsValidDataField(t)){var n,o=t.toLowerCase().replace(/\s+/g,"").split(","),a=i.toLowerCase(),r=!1,s=G(o);try{for(s.s();!(n=s.n()).done;){var l=n.value;if(a.indexOf(l)>=0){r=!0;break}}}catch(t){s.e(t)}finally{s.f()}return r}return!1}}]),e}(),W=$,z=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"clipCouponSelector",void 0),(0,I.Z)(this,"signedInSelector",void 0),(0,I.Z)(this,"discountSelector",void 0),(0,I.Z)(this,"orderTotalDataElementSelector",void 0),(0,I.Z)(this,"clippedDiscountSelector",void 0),(0,I.Z)(this,"alreadyClippedSelector",void 0)}return(0,l.Z)(t,null,[{key:"Create",value:function(e){var i=new t;return i.clipCouponSelector=e.clipCouponSelector,i.signedInSelector=e.signedInSelector,i.discountSelector=e.discountSelector,i.orderTotalDataElementSelector=e.orderTotalDataElementSelector,i.clippedDiscountSelector=e.clippedDiscountSelector,i.alreadyClippedSelector=e.alreadyClippedSelector,i}}]),t}(),K=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"otherSellersOverlayLinkSelector",void 0),(0,I.Z)(this,"otherSellerOfferElementSelector",void 0),(0,I.Z)(this,"otherSellerHeadingSelector",void 0),(0,I.Z)(this,"otherSellerPriceSelector",void 0),(0,I.Z)(this,"otherSellerNameSelector",void 0),(0,I.Z)(this,"productImageSelector",void 0),(0,I.Z)(this,"otherSellerRatingSelector",void 0),(0,I.Z)(this,"otherSellerDeliverySelector",void 0),(0,I.Z)(this,"otherSellerAddButtonSelector",void 0),(0,I.Z)(this,"otherSellerAddedConfirmationSelector",void 0)}return(0,l.Z)(t,null,[{key:"Create",value:function(e){var i=new t;return i.otherSellersOverlayLinkSelector=e.otherSellersOverlayLinkSelector,i.otherSellerOfferElementSelector=e.otherSellerOfferElementSelector,i.otherSellerHeadingSelector=e.otherSellerHeadingSelector,i.otherSellerPriceSelector=e.otherSellerPriceSelector,i.otherSellerNameSelector=e.otherSellerNameSelector,i.productImageSelector=e.productImageSelector,i.otherSellerRatingSelector=e.otherSellerRatingSelector,i.otherSellerDeliverySelector=e.otherSellerDeliverySelector,i.otherSellerAddButtonSelector=e.otherSellerAddButtonSelector,i.otherSellerAddedConfirmationSelector=e.otherSellerAddedConfirmationSelector,i}}]),t}(),Y=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"domainSelector",void 0),(0,I.Z)(this,"productTitleSelector",void 0),(0,I.Z)(this,"productImageSelector",void 0),(0,I.Z)(this,"productLinkSelector",void 0)}return(0,l.Z)(t,null,[{key:"Create",value:function(e){var i=new t;return i.domainSelector=e.domainSelector,i.productTitleSelector=e.productTitleSelector,i.productImageSelector=e.productImageSelector,i.productLinkSelector=e.productLinkSelector,i}}]),t}(),j=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"descriptionSelector",void 0),(0,I.Z)(this,"profileImageSelector",void 0),(0,I.Z)(this,"influencerInfoSelector",void 0),(0,I.Z)(this,"influencerIdSelector",void 0),(0,I.Z)(this,"influencerFollowers",void 0)}return(0,l.Z)(t,null,[{key:"Create",value:function(e){var i=new t;return i.descriptionSelector=e.descriptionSelector,i.profileImageSelector=e.profileImageSelector,i.influencerInfoSelector=e.influencerInfoSelector,i.influencerIdSelector=e.influencerIdSelector,i.influencerFollowers=e.influencerFollowers,i}}]),t}(),X=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"inputBoxSelector",void 0),(0,I.Z)(this,"applyButtonSelector",void 0),(0,I.Z)(this,"removeCouponButtonSelector",void 0),(0,I.Z)(this,"orderTotalDataElementSelector",void 0),(0,I.Z)(this,"orderSubTotalElementSelector",void 0),(0,I.Z)(this,"enabledTips",void 0),(0,I.Z)(this,"couponAcceptedMessageElementSelector",void 0),(0,I.Z)(this,"errorMessageCloseButtonSelector",void 0),(0,I.Z)(this,"waitBeforeReApplyingNextCoupon",void 0),(0,I.Z)(this,"waitAfterApplyingCurrentCoupon",void 0),(0,I.Z)(this,"checkoutPageUrl",void 0),(0,I.Z)(this,"refreshAfterApplying",void 0),(0,I.Z)(this,"refreshAfterRemoving",void 0),(0,I.Z)(this,"closeModal",void 0),(0,I.Z)(this,"layoutClickSelector",void 0),(0,I.Z)(this,"clickBeforeStartSelector",void 0),(0,I.Z)(this,"errorMessageSelector",void 0),(0,I.Z)(this,"domMutationEnabled",void 0),(0,I.Z)(this,"couponRemovalNotNeeded",void 0),(0,I.Z)(this,"appliedCouponSelector",void 0),(0,I.Z)(this,"finalCheckoutButtonSelector",void 0),(0,I.Z)(this,"otherSellerSelectors",void 0),(0,I.Z)(this,"clippingSelectors",void 0),(0,I.Z)(this,"backgroundAAEnabled",void 0),(0,I.Z)(this,"socialSelectors",void 0),(0,I.Z)(this,"pinterestSelectors",void 0),(0,I.Z)(this,"backgroundAutoApplyStartTimeout",void 0),(0,I.Z)(this,"backgroundAutoApplyInProgressTimeout",void 0),(0,I.Z)(this,"backgroundAutoApplyCancelTimeout",void 0),(0,I.Z)(this,"edgeEnabled",void 0),(0,I.Z)(this,"suggestedCouponElementSelector",void 0),(0,I.Z)(this,"suggestedCouponRegex",void 0)}return(0,l.Z)(t,null,[{key:"Create",value:function(e){var i=new t;return i.inputBoxSelector=e.inputBoxSelector,i.applyButtonSelector=e.applyButtonSelector,i.removeCouponButtonSelector=e.removeCouponButtonSelector,i.orderTotalDataElementSelector=e.orderTotalDataElementSelector,i.orderSubTotalElementSelector=e.orderSubTotalElementSelector,i.enabledTips=e.enabledTips,i.couponAcceptedMessageElementSelector=e.couponAcceptedMessageElementSelector,i.errorMessageCloseButtonSelector=e.errorMessageCloseButtonSelector,i.waitBeforeReApplyingNextCoupon=e.waitBeforeReApplyingNextCoupon,i.waitAfterApplyingCurrentCoupon=e.waitAfterApplyingCurrentCoupon,i.checkoutPageUrl=e.checkoutPageUrl,i.refreshAfterApplying=e.refreshAfterApplying,i.refreshAfterRemoving=e.refreshAfterRemoving,i.closeModal=e.closeModal,i.clickBeforeStartSelector=e.clickBeforeStartSelector,i.errorMessageSelector=e.errorMessageSelector,i.domMutationEnabled=e.domMutationEnabled,i.couponRemovalNotNeeded=e.couponRemovalNotNeeded,i.appliedCouponSelector=e.appliedCouponSelector,i.finalCheckoutButtonSelector=e.finalCheckoutButtonSelector,i.layoutClickSelector=e.layoutClickSelector,i.backgroundAAEnabled=e.backgroundAAEnabled,i.backgroundAutoApplyCancelTimeout=e.backgroundAutoApplyCancelTimeout,i.backgroundAutoApplyStartTimeout=e.backgroundAutoApplyStartTimeout,i.backgroundAutoApplyInProgressTimeout=e.backgroundAutoApplyInProgressTimeout,i.edgeEnabled=e.edgeEnabled,i.suggestedCouponElementSelector=e.suggestedCouponElementSelector,i.suggestedCouponRegex=e.suggestedCouponRegex,e.otherSellerSelectors&&(i.otherSellerSelectors=K.Create(e.otherSellerSelectors)),e.clippingSelectors&&(i.clippingSelectors=z.Create(e.clippingSelectors)),e.socialSelectors&&(i.socialSelectors=j.Create(e.socialSelectors)),e.pinterestSelectors&&(i.pinterestSelectors=Y.Create(e.pinterestSelectors)),i}},{key:"Process",value:function(t,e){return!e||e!==a.BN.Opal&&e!==a.BN.EdgeMobile&&e!==a.BN.Sapphire||(t.inputBoxSelector=U.escapeJsonString(t.inputBoxSelector),t.applyButtonSelector=U.escapeJsonString(t.applyButtonSelector),t.removeCouponButtonSelector=U.escapeJsonString(t.removeCouponButtonSelector),t.orderTotalDataElementSelector=U.escapeJsonString(t.orderTotalDataElementSelector),t.orderSubTotalElementSelector=U.escapeJsonString(t.orderSubTotalElementSelector),t.enabledTips=U.escapeJsonString(t.enabledTips),t.couponAcceptedMessageElementSelector=U.escapeJsonString(t.couponAcceptedMessageElementSelector),t.errorMessageCloseButtonSelector=U.escapeJsonString(t.errorMessageCloseButtonSelector),t.closeModal=U.escapeJsonString(t.closeModal),t.clickBeforeStartSelector=U.escapeJsonString(t.clickBeforeStartSelector),t.layoutClickSelector=U.escapeJsonString(t.layoutClickSelector),t.errorMessageSelector=U.escapeJsonString(t.errorMessageSelector)),t}}]),t}();function q(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return J(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return J(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Q=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,null,[{key:"IsOnCheckoutPage",value:function(t,e){return!(!e||!e.retailerData)&&e.retailerData.UpdateCurrentCheckoutPage(t)}},{key:"GetHtmlElement",value:function(t){var e,i=q(t.split(";"));try{for(i.s();!(e=i.n()).done;){var n=e.value;try{var o=document.querySelector(n);if(o)return o}catch(t){}}}catch(t){i.e(t)}finally{i.f()}return null}},{key:"GetHtmlElements",value:function(t){var e,i=[],n=q(t.split(";"));try{for(n.s();!(e=n.n()).done;){var o=e.value;try{var a,r=q(document.querySelectorAll(o));try{for(r.s();!(a=r.n()).done;){var s=a.value;s&&i.push(s)}}catch(t){r.e(t)}finally{r.f()}}catch(t){}}}catch(t){n.e(t)}finally{n.f()}return i}},{key:"isElementVisible",value:function(t){return t&&t.offsetWidth>0&&t.offsetHeight>0}}]),t}(),tt=Q,et=function(){function t(e,i,n,o,a){(0,s.Z)(this,t),(0,I.Z)(this,"Text",void 0),(0,I.Z)(this,"IconType",void 0),(0,I.Z)(this,"MinimumPurchase",void 0),(0,I.Z)(this,"RetailerData",void 0),(0,I.Z)(this,"CheckoutPageUrl",void 0),this.Text=e,this.IconType=i,this.MinimumPurchase=n,this.RetailerData=o,this.CheckoutPageUrl=a}return(0,l.Z)(t,[{key:"GetAmountForFreeShipping",value:function(){var t=this.RetailerData.GetCurrentCheckoutPageByPathName(location.pathname);if(t){var e=t.orderSubTotalElementSelector,i=t.orderTotalDataElementSelector;if(e){var n,o=null===(n=tt.GetHtmlElement(e))||void 0===n?void 0:n.innerText;if(o&&this.MinimumPurchase)return this.MinimumPurchase-U.GetPriceStringAsNumber(o)}else if(i){var a,r=null===(a=tt.GetHtmlElement(i))||void 0===a?void 0:a.innerText;if(r&&this.MinimumPurchase)return this.MinimumPurchase-U.GetPriceStringAsNumber(r)}}return 0}}]),t}();function it(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return nt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return nt(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var ot=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"domainName",void 0),(0,I.Z)(this,"productPageUrl",void 0),(0,I.Z)(this,"productImageSelector",void 0),(0,I.Z)(this,"productNameSelector",void 0),(0,I.Z)(this,"productPriceSelector",void 0),(0,I.Z)(this,"allCheckoutPages",void 0),(0,I.Z)(this,"checkoutPageKey",void 0),(0,I.Z)(this,"orderConfirmationPageUrl",void 0),(0,I.Z)(this,"orderConfirmationRegex",void 0),(0,I.Z)(this,"exclusiveMarket",void 0),(0,I.Z)(this,"tips",void 0)}return(0,l.Z)(t,[{key:"UpdateCurrentCheckoutPage",value:function(t){for(var e=0;e<this.allCheckoutPages.length;e++){if(W.IsOnPage(this.allCheckoutPages[e].checkoutPageUrl,t))return this.checkoutPageKey=e,!0}return this.checkoutPageKey=null,!1}},{key:"GetCurrentCheckoutPage",value:function(){if(null!=this.checkoutPageKey)return this.allCheckoutPages[this.checkoutPageKey]}},{key:"GetCurrentCheckoutPageByPathName",value:function(t){var e,i=it(this.allCheckoutPages);try{for(i.s();!(e=i.n()).done;){var n=e.value;if("none"===n.enabledTips)return;if(W.IsOnPage(n.checkoutPageUrl,t))return n}}catch(t){i.e(t)}finally{i.f()}}},{key:"IsConfirmationPage",value:function(t){return new RegExp(this.orderConfirmationPageUrl).test(t)}},{key:"CreateCheckoutPageList",value:function(t){if(this.allCheckoutPages=[],t.allCheckoutPages&&t.allCheckoutPages.length>0){var e,i=it(t.allCheckoutPages);try{for(i.s();!(e=i.n()).done;){var n=e.value;this.allCheckoutPages.push(X.Create(n))}}catch(t){i.e(t)}finally{i.f()}}}},{key:"CreateTipsList",value:function(t){if(t.tips){this.tips=[];var e,i=it(t.tips);try{for(i.s();!(e=i.n()).done;){var n=e.value;this.tips.push(new et(n.text,n.iconType,n.minimumPurchase,this,t.checkoutPageUrl))}}catch(t){i.e(t)}finally{i.f()}}}}],[{key:"Create",value:function(e){var i=new t;return i.domainName=e.domainName,i.productPageUrl=e.productPageUrl,i.productImageSelector=e.productImageSelector,i.productNameSelector=e.productNameSelector,i.productPriceSelector=e.productPriceSelector,i.exclusiveMarket=e.exclusiveMarket,i.orderConfirmationPageUrl=e.orderConfirmationPageUrl,i.orderConfirmationRegex=e.orderConfirmationRegex,i.CreateCheckoutPageList(e),i.CreateTipsList(e),i}},{key:"Process",value:function(t,e){if(e&&(e===a.BN.Opal||e===a.BN.EdgeMobile||e===a.BN.Sapphire)){t.productImageSelector=U.escapeJsonString(t.productImageSelector),t.productNameSelector=U.escapeJsonString(t.productNameSelector),t.productPriceSelector=U.escapeJsonString(t.productPriceSelector);for(var i=0;i<t.allCheckoutPages.length;i++)t.allCheckoutPages[i]=X.Process(t.allCheckoutPages[i],e)}return t}}]),t}();function at(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return rt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return rt(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function st(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var lt=function(t){(0,O.Z)(i,t);var e=st(i);function i(t){var n;return(0,s.Z)(this,i),n=e.call(this,i.thirtyMinutesExpiryInSeconds,t),(0,I.Z)((0,R.Z)(n),"coupons",[]),(0,I.Z)((0,R.Z)(n),"deals",[]),(0,I.Z)((0,R.Z)(n),"retailerData",void 0),(0,I.Z)((0,R.Z)(n),"cashback",void 0),(0,I.Z)((0,R.Z)(n),"errorCode",void 0),(0,I.Z)((0,R.Z)(n),"impressionId",void 0),n}return(0,l.Z)(i,[{key:"HasCoupons",value:function(){return this.coupons&&this.coupons.length>0}},{key:"HasDeals",value:function(){return this.deals&&this.deals.length>0}},{key:"GetOfferCount",value:function(){return this.HasCoupons()?this.coupons.length:this.HasDeals()?this.deals.length:0}}],[{key:"Create",value:function(t){if(t){var e=new i(t.Timestamp);if(t.errorCode&&(e.errorCode=t.errorCode),t.retailerData&&(e.retailerData=ot.Create(t.retailerData)),e.coupons=[],t.coupons){var n,o=at(t.coupons);try{for(o.s();!(n=o.n()).done;){var a=n.value;e.coupons.push(a)}}catch(t){o.e(t)}finally{o.f()}}if(e.deals=[],t.deals){var r,s=at(t.deals);try{for(s.s();!(r=s.n()).done;){var l=r.value;e.deals.push(L.Create(l))}}catch(t){s.e(t)}finally{s.f()}}return t.cashback&&(e.cashback=N.Create(t.cashback)),t.impressionId&&(e.impressionId=t.impressionId),e}return new i}},{key:"Process",value:function(t,e){return t.retailerData&&(t.retailerData=ot.Process(t.retailerData,e)),t}}]),i}(_);(0,I.Z)(lt,"thirtyMinutesExpiryInSeconds",1800);var ct=lt;function ut(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return dt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return dt(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var ht=function(t){var e=function(){var t=new Map;return t.set("ALABAMA","AL"),t.set("ALASKA","AK"),t.set("ARIZONA","AZ"),t.set("ARKANSAS","AR"),t.set("CALIFORNIA","CA"),t.set("COLORADO","CO"),t.set("CONNECTICUT","CT"),t.set("DELAWARE","DE"),t.set("DISTRICT OF COLUMBIA","DC"),t.set("WASHINGTON DC","DC"),t.set("FLORIDA","FL"),t.set("GEORGIA","GA"),t.set("HAWAII","HI"),t.set("IDAHO","ID"),t.set("ILLINOIS","IL"),t.set("INDIANA","IN"),t.set("IOWA","IA"),t.set("KANSAS","KS"),t.set("KENTUCKY","KY"),t.set("LOUISIANA","LA"),t.set("MAINE","ME"),t.set("MARYLAND","MD"),t.set("MASSACHUSETTS","MA"),t.set("MICHIGAN","MI"),t.set("MINNESOTA","MN"),t.set("MISSISSIPPI","MS"),t.set("MISSOURI","MO"),t.set("MONTANA","MT"),t.set("NEBRASKA","NE"),t.set("NEVADA","NV"),t.set("NEW HAMPSHIRE","NH"),t.set("NEW JERSEY","NJ"),t.set("NEW MEXICO","NM"),t.set("NEW YORK","NY"),t.set("NORTH CAROLINA","NC"),t.set("NORTH DAKOTA","ND"),t.set("OHIO","OH"),t.set("OKLAHOMA","OK"),t.set("OREGON","OR"),t.set("PENNSYLVANIA","PA"),t.set("RHODE ISLAND","RI"),t.set("SOUTH CAROLINA","SC"),t.set("SOUTH DAKOTA","SD"),t.set("TENNESSEE","TN"),t.set("TEXAS","TX"),t.set("UTAH","UT"),t.set("VERMONT","VT"),t.set("VIRGINIA","VA"),t.set("WASHINGTON","WA"),t.set("WEST VIRGINIA","WV"),t.set("WISCONSIN","WI"),t.set("WYOMING","WY"),t.set("VIRGIN ISLANDS","VI"),t.set("U.S. VIRGIN ISLANDS","VI"),t.set("PALAU","PW"),t.set("N. MARIANA ISLANDS","MP"),t.set("NORTHERN MARIANA ISLANDS","MP"),t.set("GUAM","GU"),t.set("AMERICAN SAMOA","AS"),t.set("MICRONESIA","FM"),t.set("MARSHALL ISLANDS","MH"),t}(),i=new Set(e.values()),n=t.toUpperCase();if(i.has(n))return[n,!0];var o=e.get(n);return void 0!==o?[o,!0]:[n,!1]},pt=function(t,e){var i=parseInt(t.substr(0,3),10),n=function(){var t=new Map;return t.set("NY",[[5,5],[100,149]]),t.set("PR",[[6,7],[9,9]]),t.set("VI",[[8,8]]),t.set("MA",[[10,27],[55,55]]),t.set("RI",[[28,29]]),t.set("NH",[[30,38]]),t.set("ME",[[39,49]]),t.set("VT",[[50,54],[56,59]]),t.set("CT",[[60,69]]),t.set("NJ",[[70,89]]),t.set("AE",[[90,99]]),t.set("PA",[[150,196]]),t.set("DE",[[197,199]]),t.set("DC",[[200,200],[202,205]]),t.set("VA",[[201,201],[220,246]]),t.set("MD",[[206,212],[214,219]]),t.set("WV",[[247,268]]),t.set("NC",[[270,289]]),t.set("SC",[[290,299]]),t.set("GA",[[300,319],[398,399]]),t.set("FL",[[320,339],[341,342],[344,344],[346,347],[349,349]]),t.set("AA",[[340,340]]),t.set("AL",[[350,352],[354,369]]),t.set("TN",[[370,385]]),t.set("MS",[[386,397]]),t.set("KY",[[400,427],[471,471]]),t.set("OH",[[430,459]]),t.set("IN",[[460,470],[472,479]]),t.set("MI",[[480,499]]),t.set("IA",[[500,528]]),t.set("WI",[[530,532],[534,535],[537,549]]),t.set("MN",[[550,551],[553,566]]),t.set("ND",[[567,567],[580,588]]),t.set("SD",[[570,577]]),t.set("MT",[[590,599]]),t.set("IL",[[600,620],[622,629]]),t.set("MO",[[630,631],[633,641],[644,658]]),t.set("KS",[[660,662],[664,679]]),t.set("NE",[[680,681],[683,693]]),t.set("LA",[[700,701],[703,708],[710,714]]),t.set("AR",[[716,729]]),t.set("OK",[[730,731],[734,741],[743,749]]),t.set("TX",[[733,733],[750,799],[885,885]]),t.set("CO",[[800,816]]),t.set("WY",[[820,831]]),t.set("ID",[[832,838]]),t.set("UT",[[840,847]]),t.set("AZ",[[850,850],[852,853],[855,857],[859,860],[863,865]]),t.set("NM",[[870,875],[877,884]]),t.set("NV",[[889,891],[893,895],[897,898]]),t.set("CA",[[900,908],[910,928],[930,961]]),t.set("AP",[[962,966]]),t.set("HI",[[967,968]]),t.set("GU",[[969,969]]),t.set("OR",[[970,979]]),t.set("WA",[[980,986],[988,994]]),t.set("AK",[[995,999]]),t}().get(e);if(void 0!==n){var o,a=ut(n);try{for(a.s();!(o=a.n()).done;){var r=o.value;if(i>=r[0]&&i<=r[1])return!0}}catch(t){a.e(t)}finally{a.f()}}return!1},ft=null,gt="test-shopping-localstorage";function mt(t){var e,i=vt(t);if(i)try{return e=JSON.parse(i)}catch(t){}return e}function vt(t){var e=null;return bt()&&(e=window.localStorage.getItem(t)),e}function yt(t,e){bt()&&window.localStorage.setItem(t,e)}function Ct(t){bt()&&localStorage.removeItem(t)}function bt(){try{var t;if(null!==ft)return ft;"undefined"!=typeof window&&null!==(t=window)&&void 0!==t&&t.localStorage&&(window.localStorage.setItem(gt,gt),window.localStorage.getItem(gt),window.localStorage.removeItem(gt),ft=!0)}catch(t){ft=!1}return ft}var St=i(731),xt=i(913);function Et(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r}class At{createCSS(){return""}createBehavior(){}}var Tt=i(557),It=i(438);function Dt(t){const e=this.spillover;-1===e.indexOf(t)&&e.push(t)}function kt(t){const e=this.spillover,i=e.indexOf(t);-1!==i&&e.splice(i,1)}function wt(t){const e=this.spillover,i=this.source;for(let n=0,o=e.length;n<o;++n)e[n].handleChange(i,t)}function Rt(t){return-1!==this.spillover.indexOf(t)}class Ot{constructor(t,e){this.sub1=void 0,this.sub2=void 0,this.spillover=void 0,this.source=t,this.sub1=e}has(t){return this.sub1===t||this.sub2===t}subscribe(t){this.has(t)||(void 0!==this.sub1?void 0!==this.sub2?(this.spillover=[this.sub1,this.sub2,t],this.subscribe=Dt,this.unsubscribe=kt,this.notify=wt,this.has=Rt,this.sub1=void 0,this.sub2=void 0):this.sub2=t:this.sub1=t)}unsubscribe(t){this.sub1===t?this.sub1=void 0:this.sub2===t&&(this.sub2=void 0)}notify(t){const e=this.sub1,i=this.sub2,n=this.source;void 0!==e&&e.handleChange(n,t),void 0!==i&&i.handleChange(n,t)}}class Pt{constructor(t){this.subscribers={},this.sourceSubscribers=null,this.source=t}notify(t){var e;const i=this.subscribers[t];void 0!==i&&i.notify(t),null===(e=this.sourceSubscribers)||void 0===e||e.notify(t)}subscribe(t,e){var i;if(e){let i=this.subscribers[e];void 0===i&&(this.subscribers[e]=i=new Ot(this.source)),i.subscribe(t)}else this.sourceSubscribers=null!==(i=this.sourceSubscribers)&&void 0!==i?i:new Ot(this.source),this.sourceSubscribers.subscribe(t)}unsubscribe(t,e){var i;if(e){const i=this.subscribers[e];void 0!==i&&i.unsubscribe(t)}else null===(i=this.sourceSubscribers)||void 0===i||i.unsubscribe(t)}}const Mt=It.Bo.getById(2,(()=>{const t=/(:|&&|\|\||if)/,e=new WeakMap,i=new WeakMap,n=Tt.SO.queueUpdate;let o,a=t=>{throw new Error("Must call enableArrayObservation before observing arrays.")};function r(t){let i=t.$fastController||e.get(t);return void 0===i&&(Array.isArray(t)?i=a(t):e.set(t,i=new Pt(t))),i}function s(t){let e=i.get(t);if(void 0===e){let n=Reflect.getPrototypeOf(t);for(;void 0===e&&null!==n;)e=i.get(n),n=Reflect.getPrototypeOf(n);e=void 0===e?[]:e.slice(0),i.set(t,e)}return e}class l{constructor(t){this.name=t,this.field=`_${t}`,this.callback=`${t}Changed`}getValue(t){return void 0!==o&&o.watch(t,this.name),t[this.field]}setValue(t,e){const i=this.field,n=t[i];if(n!==e){t[i]=e;const o=t[this.callback];"function"==typeof o&&o.call(t,n,e),r(t).notify(this.name)}}}class c extends Ot{constructor(t,e,i=!1){super(t,e),this.binding=t,this.isVolatileBinding=i,this.needsRefresh=!0,this.needsQueue=!0,this.first=this,this.last=null,this.propertySource=void 0,this.propertyName=void 0,this.notifier=void 0,this.next=void 0}observe(t,e){this.needsRefresh&&null!==this.last&&this.disconnect();const i=o;o=this.needsRefresh?this:void 0,this.needsRefresh=this.isVolatileBinding;const n=this.binding(t,e);return o=i,n}disconnect(){if(null!==this.last){let t=this.first;for(;void 0!==t;)t.notifier.unsubscribe(this,t.propertyName),t=t.next;this.last=null,this.needsRefresh=this.needsQueue=!0}}watch(t,e){const i=this.last,n=r(t),a=null===i?this.first:{};if(a.propertySource=t,a.propertyName=e,a.notifier=n,n.subscribe(this,e),null!==i){if(!this.needsRefresh){let e;o=void 0,e=i.propertySource[i.propertyName],o=this,t===e&&(this.needsRefresh=!0)}i.next=a}this.last=a}handleChange(){this.needsQueue&&(this.needsQueue=!1,n(this))}call(){null!==this.last&&(this.needsQueue=!0,this.notify(this))}records(){let t=this.first;return{next:()=>{const e=t;return void 0===e?{value:void 0,done:!0}:(t=t.next,{value:e,done:!1})},[Symbol.iterator]:function(){return this}}}}return Object.freeze({setArrayObserverFactory(t){a=t},getNotifier:r,track(t,e){void 0!==o&&o.watch(t,e)},trackVolatile(){void 0!==o&&(o.needsRefresh=!0)},notify(t,e){r(t).notify(e)},defineProperty(t,e){"string"==typeof e&&(e=new l(e)),s(t).push(e),Reflect.defineProperty(t,e.name,{enumerable:!0,get:function(){return e.getValue(this)},set:function(t){e.setValue(this,t)}})},getAccessors:s,binding(t,e,i=this.isVolatileBinding(t)){return new c(t,e,i)},isVolatileBinding:e=>t.test(e.toString())})}));function Nt(t,e){Mt.defineProperty(t,e)}const Lt=It.Bo.getById(3,(()=>{let t=null;return{get:()=>t,set(e){t=e}}}));class _t{constructor(){this.index=0,this.length=0,this.parent=null,this.parentContext=null}get event(){return Lt.get()}get isEven(){return this.index%2==0}get isOdd(){return this.index%2!=0}get isFirst(){return 0===this.index}get isInMiddle(){return!this.isFirst&&!this.isLast}get isLast(){return this.index===this.length-1}static setEvent(t){Lt.set(t)}}Mt.defineProperty(_t.prototype,"index"),Mt.defineProperty(_t.prototype,"length");const Ft=Object.seal(new _t);class Ht{constructor(){this.targets=new WeakSet}addStylesTo(t){this.targets.add(t)}removeStylesFrom(t){this.targets.delete(t)}isAttachedTo(t){return this.targets.has(t)}withBehaviors(...t){return this.behaviors=null===this.behaviors?t:this.behaviors.concat(t),this}}function Zt(t){return t.map((t=>t instanceof Ht?Zt(t.styles):[t])).reduce(((t,e)=>t.concat(e)),[])}function Bt(t){return t.map((t=>t instanceof Ht?t.behaviors:null)).reduce(((t,e)=>null===e?t:(null===t&&(t=[]),t.concat(e))),null)}Ht.create=(()=>{if(Tt.SO.supportsAdoptedStyleSheets){const t=new Map;return e=>new Ut(e,t)}return t=>new Vt(t)})();class Ut extends Ht{constructor(t,e){super(),this.styles=t,this.styleSheetCache=e,this._styleSheets=void 0,this.behaviors=Bt(t)}get styleSheets(){if(void 0===this._styleSheets){const t=this.styles,e=this.styleSheetCache;this._styleSheets=Zt(t).map((t=>{if(t instanceof CSSStyleSheet)return t;let i=e.get(t);return void 0===i&&(i=new CSSStyleSheet,i.replaceSync(t),e.set(t,i)),i}))}return this._styleSheets}addStylesTo(t){t.adoptedStyleSheets=[...t.adoptedStyleSheets,...this.styleSheets],super.addStylesTo(t)}removeStylesFrom(t){const e=this.styleSheets;t.adoptedStyleSheets=t.adoptedStyleSheets.filter((t=>-1===e.indexOf(t))),super.removeStylesFrom(t)}}let Gt=0;class Vt extends Ht{constructor(t){super(),this.styles=t,this.behaviors=null,this.behaviors=Bt(t),this.styleSheets=Zt(t),this.styleClass="fast-style-class-"+ ++Gt}addStylesTo(t){const e=this.styleSheets,i=this.styleClass;t=this.normalizeTarget(t);for(let n=0;n<e.length;n++){const o=document.createElement("style");o.innerHTML=e[n],o.className=i,t.append(o)}super.addStylesTo(t)}removeStylesFrom(t){const e=(t=this.normalizeTarget(t)).querySelectorAll(`.${this.styleClass}`);for(let i=0,n=e.length;i<n;++i)t.removeChild(e[i]);super.removeStylesFrom(t)}isAttachedTo(t){return super.isAttachedTo(this.normalizeTarget(t))}normalizeTarget(t){return t===document?document.body:t}}const $t={toView:t=>t?"true":"false",fromView:t=>null!=t&&"false"!==t&&!1!==t&&0!==t},Wt={toView(t){if(null==t)return null;const e=1*t;return isNaN(e)?null:e.toString()},fromView(t){if(null==t)return null;const e=1*t;return isNaN(e)?null:e}};class zt{constructor(t,e,i=e.toLowerCase(),n="reflect",o){this.guards=new Set,this.Owner=t,this.name=e,this.attribute=i,this.mode=n,this.converter=o,this.fieldName=`_${e}`,this.callbackName=`${e}Changed`,this.hasCallback=this.callbackName in t.prototype,"boolean"===n&&void 0===o&&(this.converter=$t)}setValue(t,e){const i=t[this.fieldName],n=this.converter;void 0!==n&&(e=n.fromView(e)),i!==e&&(t[this.fieldName]=e,this.tryReflectToAttribute(t),this.hasCallback&&t[this.callbackName](i,e),t.$fastController.notify(this.name))}getValue(t){return Mt.track(t,this.name),t[this.fieldName]}onAttributeChangedCallback(t,e){this.guards.has(t)||(this.guards.add(t),this.setValue(t,e),this.guards.delete(t))}tryReflectToAttribute(t){const e=this.mode,i=this.guards;i.has(t)||"fromView"===e||Tt.SO.queueUpdate((()=>{i.add(t);const n=t[this.fieldName];switch(e){case"reflect":const e=this.converter;Tt.SO.setAttribute(t,this.attribute,void 0!==e?e.toView(n):n);break;case"boolean":Tt.SO.setBooleanAttribute(t,this.attribute,n)}i.delete(t)}))}static collect(t,...e){const i=[];e.push(t.attributes);for(let n=0,o=e.length;n<o;++n){const o=e[n];if(void 0!==o)for(let e=0,n=o.length;e<n;++e){const n=o[e];"string"==typeof n?i.push(new zt(t,n)):i.push(new zt(t,n.property,n.attribute,n.mode,n.converter))}}return i}}function Kt(t,e){let i;function n(t,e){arguments.length>1&&(i.property=e);const n=t.constructor.attributes||(t.constructor.attributes=[]);n.push(i)}return arguments.length>1?(i={},void n(t,e)):(i=void 0===t?{}:t,n)}const Yt={mode:"open"},jt={},Xt=It.Bo.getById(4,(()=>{const t=new Map;return Object.freeze({register:e=>!t.has(e.type)&&(t.set(e.type,e),!0),getByType:e=>t.get(e)})}));class qt{constructor(t,e=t.definition){"string"==typeof e&&(e={name:e}),this.type=t,this.name=e.name,this.template=e.template;const i=zt.collect(t,e.attributes),n=new Array(i.length),o={},a={};for(let t=0,e=i.length;t<e;++t){const e=i[t];n[t]=e.attribute,o[e.name]=e,a[e.attribute]=e}this.attributes=i,this.observedAttributes=n,this.propertyLookup=o,this.attributeLookup=a,this.shadowOptions=void 0===e.shadowOptions?Yt:null===e.shadowOptions?void 0:Object.assign(Object.assign({},Yt),e.shadowOptions),this.elementOptions=void 0===e.elementOptions?jt:Object.assign(Object.assign({},jt),e.elementOptions),this.styles=void 0===e.styles?void 0:Array.isArray(e.styles)?Ht.create(e.styles):e.styles instanceof Ht?e.styles:Ht.create([e.styles])}get isDefined(){return!!Xt.getByType(this.type)}define(t=customElements){const e=this.type;if(Xt.register(this)){const t=this.attributes,i=e.prototype;for(let e=0,n=t.length;e<n;++e)Mt.defineProperty(i,t[e]);Reflect.defineProperty(e,"observedAttributes",{value:this.observedAttributes,enumerable:!0})}return t.get(this.name)||t.define(this.name,e,this.elementOptions),this}}qt.forType=Xt.getByType;const Jt=new WeakMap,Qt={bubbles:!0,composed:!0,cancelable:!0};function te(t){return t.shadowRoot||Jt.get(t)||null}class ee extends Pt{constructor(t,e){super(t),this.boundObservables=null,this.behaviors=null,this.needsInitialization=!0,this._template=null,this._styles=null,this._isConnected=!1,this.$fastController=this,this.view=null,this.element=t,this.definition=e;const i=e.shadowOptions;if(void 0!==i){const e=t.attachShadow(i);"closed"===i.mode&&Jt.set(t,e)}const n=Mt.getAccessors(t);if(n.length>0){const e=this.boundObservables=Object.create(null);for(let i=0,o=n.length;i<o;++i){const o=n[i].name,a=t[o];void 0!==a&&(delete t[o],e[o]=a)}}}get isConnected(){return Mt.track(this,"isConnected"),this._isConnected}setIsConnected(t){this._isConnected=t,Mt.notify(this,"isConnected")}get template(){return this._template}set template(t){this._template!==t&&(this._template=t,this.needsInitialization||this.renderTemplate(t))}get styles(){return this._styles}set styles(t){this._styles!==t&&(null!==this._styles&&this.removeStyles(this._styles),this._styles=t,this.needsInitialization||null===t||this.addStyles(t))}addStyles(t){const e=te(this.element)||this.element.getRootNode();if(t instanceof HTMLStyleElement)e.append(t);else if(!t.isAttachedTo(e)){const i=t.behaviors;t.addStylesTo(e),null!==i&&this.addBehaviors(i)}}removeStyles(t){const e=te(this.element)||this.element.getRootNode();if(t instanceof HTMLStyleElement)e.removeChild(t);else if(t.isAttachedTo(e)){const i=t.behaviors;t.removeStylesFrom(e),null!==i&&this.removeBehaviors(i)}}addBehaviors(t){const e=this.behaviors||(this.behaviors=new Map),i=t.length,n=[];for(let o=0;o<i;++o){const i=t[o];e.has(i)?e.set(i,e.get(i)+1):(e.set(i,1),n.push(i))}if(this._isConnected){const t=this.element;for(let e=0;e<n.length;++e)n[e].bind(t,Ft)}}removeBehaviors(t,e=!1){const i=this.behaviors;if(null===i)return;const n=t.length,o=[];for(let a=0;a<n;++a){const n=t[a];if(i.has(n)){const t=i.get(n)-1;0===t||e?i.delete(n)&&o.push(n):i.set(n,t)}}if(this._isConnected){const t=this.element;for(let e=0;e<o.length;++e)o[e].unbind(t)}}onConnectedCallback(){if(this._isConnected)return;const t=this.element;this.needsInitialization?this.finishInitialization():null!==this.view&&this.view.bind(t,Ft);const e=this.behaviors;if(null!==e)for(const[i]of e)i.bind(t,Ft);this.setIsConnected(!0)}onDisconnectedCallback(){if(!this._isConnected)return;this.setIsConnected(!1);const t=this.view;null!==t&&t.unbind();const e=this.behaviors;if(null!==e){const t=this.element;for(const[i]of e)i.unbind(t)}}onAttributeChangedCallback(t,e,i){const n=this.definition.attributeLookup[t];void 0!==n&&n.onAttributeChangedCallback(this.element,i)}emit(t,e,i){return!!this._isConnected&&this.element.dispatchEvent(new CustomEvent(t,Object.assign(Object.assign({detail:e},Qt),i)))}finishInitialization(){const t=this.element,e=this.boundObservables;if(null!==e){const i=Object.keys(e);for(let n=0,o=i.length;n<o;++n){const o=i[n];t[o]=e[o]}this.boundObservables=null}const i=this.definition;null===this._template&&(this.element.resolveTemplate?this._template=this.element.resolveTemplate():i.template&&(this._template=i.template||null)),null!==this._template&&this.renderTemplate(this._template),null===this._styles&&(this.element.resolveStyles?this._styles=this.element.resolveStyles():i.styles&&(this._styles=i.styles||null)),null!==this._styles&&this.addStyles(this._styles),this.needsInitialization=!1}renderTemplate(t){const e=this.element,i=te(e)||e;null!==this.view?(this.view.dispose(),this.view=null):this.needsInitialization||Tt.SO.removeChildNodes(i),t&&(this.view=t.render(e,i,e))}static forCustomElement(t){const e=t.$fastController;if(void 0!==e)return e;const i=qt.forType(t.constructor);if(void 0===i)throw new Error("Missing FASTElement definition.");return t.$fastController=new ee(t,i)}}function ie(t){return class extends t{constructor(){super(),ee.forCustomElement(this)}$emit(t,e,i){return this.$fastController.emit(t,e,i)}connectedCallback(){this.$fastController.onConnectedCallback()}disconnectedCallback(){this.$fastController.onDisconnectedCallback()}attributeChangedCallback(t,e,i){this.$fastController.onAttributeChangedCallback(t,e,i)}}}const ne=Object.assign(ie(HTMLElement),{from:t=>ie(t),define:(t,e)=>new qt(t,e).define().type});function oe(t){const e=t.parentElement;if(e)return e;{const e=t.getRootNode();if(e.host instanceof HTMLElement)return e.host}return null}const ae=document.createElement("div");class re{setProperty(t,e){Tt.SO.queueUpdate((()=>this.target.setProperty(t,e)))}removeProperty(t){Tt.SO.queueUpdate((()=>this.target.removeProperty(t)))}}class se extends re{constructor(){super();const t=new CSSStyleSheet;this.target=t.cssRules[t.insertRule(":root{}")].style,document.adoptedStyleSheets=[...document.adoptedStyleSheets,t]}}class le extends re{constructor(){super(),this.style=document.createElement("style"),document.head.appendChild(this.style);const{sheet:t}=this.style;if(t){const e=t.insertRule(":root{}",t.cssRules.length);this.target=t.cssRules[e].style}}}class ce{constructor(t){this.store=new Map,this.target=null;const e=t.$fastController;this.style=document.createElement("style"),e.addStyles(this.style),Mt.getNotifier(e).subscribe(this,"isConnected"),this.handleChange(e,"isConnected")}targetChanged(){if(null!==this.target)for(const[t,e]of this.store.entries())this.target.setProperty(t,e)}setProperty(t,e){this.store.set(t,e),Tt.SO.queueUpdate((()=>{null!==this.target&&this.target.setProperty(t,e)}))}removeProperty(t){this.store.delete(t),Tt.SO.queueUpdate((()=>{null!==this.target&&this.target.removeProperty(t)}))}handleChange(t,e){const{sheet:i}=this.style;if(i){const t=i.insertRule(":host{}",i.cssRules.length);this.target=i.cssRules[t].style}else this.target=null}}Et([Nt],ce.prototype,"target",void 0);class ue{constructor(t){this.target=t.style}setProperty(t,e){Tt.SO.queueUpdate((()=>this.target.setProperty(t,e)))}removeProperty(t){Tt.SO.queueUpdate((()=>this.target.removeProperty(t)))}}class de{setProperty(t,e){de.properties[t]=e;for(const i of de.roots.values())fe.getOrCreate(de.normalizeRoot(i)).setProperty(t,e)}removeProperty(t){delete de.properties[t];for(const e of de.roots.values())fe.getOrCreate(de.normalizeRoot(e)).removeProperty(t)}static registerRoot(t){const{roots:e}=de;if(!e.has(t)){e.add(t);const i=fe.getOrCreate(this.normalizeRoot(t));for(const t in de.properties)i.setProperty(t,de.properties[t])}}static unregisterRoot(t){const{roots:e}=de;if(e.has(t)){e.delete(t);const i=fe.getOrCreate(de.normalizeRoot(t));for(const t in de.properties)i.removeProperty(t)}}static normalizeRoot(t){return t===ae?document:t}}de.roots=new Set,de.properties={};const he=new WeakMap,pe=Tt.SO.supportsAdoptedStyleSheets?class extends re{constructor(t){super();const e=new CSSStyleSheet;this.target=e.cssRules[e.insertRule(":host{}")].style,t.$fastController.addStyles(Ht.create([e]))}}:ce,fe=Object.freeze({getOrCreate(t){if(he.has(t))return he.get(t);let e;return t===ae?e=new de:t instanceof Document?e=Tt.SO.supportsAdoptedStyleSheets?new se:new le:e=t instanceof ne?new pe(t):new ue(t),he.set(t,e),e}});class ge extends At{constructor(t){super(),this.subscribers=new WeakMap,this._appliedTo=new Set,this.name=t.name,null!==t.cssCustomPropertyName&&(this.cssCustomProperty=`--${t.cssCustomPropertyName}`,this.cssVar=`var(${this.cssCustomProperty})`),this.id=ge.uniqueId(),ge.tokensById.set(this.id,this)}get appliedTo(){return[...this._appliedTo]}static from(t){return new ge({name:"string"==typeof t?t:t.name,cssCustomPropertyName:"string"==typeof t?t:void 0===t.cssCustomPropertyName?t.name:t.cssCustomPropertyName})}static isCSSDesignToken(t){return"string"==typeof t.cssCustomProperty}static isDerivedDesignTokenValue(t){return"function"==typeof t}static getTokenById(t){return ge.tokensById.get(t)}getOrCreateSubscriberSet(t=this){return this.subscribers.get(t)||this.subscribers.set(t,new Set)&&this.subscribers.get(t)}createCSS(){return this.cssVar||""}getValueFor(t){const e=be.getOrCreate(t).get(this);if(void 0!==e)return e;throw new Error(`Value could not be retrieved for token named "${this.name}". Ensure the value is set for ${t} or an ancestor of ${t}.`)}setValueFor(t,e){return this._appliedTo.add(t),e instanceof ge&&(e=this.alias(e)),be.getOrCreate(t).set(this,e),this}deleteValueFor(t){return this._appliedTo.delete(t),be.existsFor(t)&&be.getOrCreate(t).delete(this),this}withDefault(t){return this.setValueFor(ae,t),this}subscribe(t,e){const i=this.getOrCreateSubscriberSet(e);e&&!be.existsFor(e)&&be.getOrCreate(e),i.has(t)||i.add(t)}unsubscribe(t,e){const i=this.subscribers.get(e||this);i&&i.has(t)&&i.delete(t)}notify(t){const e=Object.freeze({token:this,target:t});this.subscribers.has(this)&&this.subscribers.get(this).forEach((t=>t.handleChange(e))),this.subscribers.has(t)&&this.subscribers.get(t).forEach((t=>t.handleChange(e)))}alias(t){return e=>t.getValueFor(e)}}ge.uniqueId=(()=>{let t=0;return()=>(t++,t.toString(16))})(),ge.tokensById=new Map;class me{constructor(t,e,i){this.source=t,this.token=e,this.node=i,this.dependencies=new Set,this.observer=Mt.binding(t,this,!1),this.observer.handleChange=this.observer.call,this.handleChange()}disconnect(){this.observer.disconnect()}handleChange(){this.node.store.set(this.token,this.observer.observe(this.node.target,Ft))}}class ve{constructor(){this.values=new Map}set(t,e){this.values.get(t)!==e&&(this.values.set(t,e),Mt.getNotifier(this).notify(t.id))}get(t){return Mt.track(this,t.id),this.values.get(t)}delete(t){this.values.delete(t)}all(){return this.values.entries()}}const ye=new WeakMap,Ce=new WeakMap;class be{constructor(t){this.target=t,this.store=new ve,this.children=[],this.assignedValues=new Map,this.reflecting=new Set,this.bindingObservers=new Map,this.tokenValueChangeHandler={handleChange:(t,e)=>{const i=ge.getTokenById(e);if(i&&(i.notify(this.target),ge.isCSSDesignToken(i))){const e=this.parent,n=this.isReflecting(i);if(e){const o=e.get(i),a=t.get(i);o===a||n?o===a&&n&&this.stopReflectToCSS(i):this.reflectToCSS(i)}else n||this.reflectToCSS(i)}}},ye.set(t,this),Mt.getNotifier(this.store).subscribe(this.tokenValueChangeHandler),t instanceof ne?t.$fastController.addBehaviors([this]):t.isConnected&&this.bind()}static getOrCreate(t){return ye.get(t)||new be(t)}static existsFor(t){return ye.has(t)}static findParent(t){if(ae!==t.target){let e=oe(t.target);for(;null!==e;){if(ye.has(e))return ye.get(e);e=oe(e)}return be.getOrCreate(ae)}return null}static findClosestAssignedNode(t,e){let i=e;do{if(i.has(t))return i;i=i.parent?i.parent:i.target!==ae?be.getOrCreate(ae):null}while(null!==i);return null}get parent(){return Ce.get(this)||null}has(t){return this.assignedValues.has(t)}get(t){const e=this.store.get(t);if(void 0!==e)return e;const i=this.getRaw(t);return void 0!==i?(this.hydrate(t,i),this.get(t)):void 0}getRaw(t){var e;return this.assignedValues.has(t)?this.assignedValues.get(t):null===(e=be.findClosestAssignedNode(t,this))||void 0===e?void 0:e.getRaw(t)}set(t,e){ge.isDerivedDesignTokenValue(this.assignedValues.get(t))&&this.tearDownBindingObserver(t),this.assignedValues.set(t,e),ge.isDerivedDesignTokenValue(e)?this.setupBindingObserver(t,e):this.store.set(t,e)}delete(t){this.assignedValues.delete(t),this.tearDownBindingObserver(t);const e=this.getRaw(t);e?this.hydrate(t,e):this.store.delete(t)}bind(){const t=be.findParent(this);t&&t.appendChild(this);for(const t of this.assignedValues.keys())t.notify(this.target)}unbind(){if(this.parent){Ce.get(this).removeChild(this)}}appendChild(t){t.parent&&Ce.get(t).removeChild(t);const e=this.children.filter((e=>t.contains(e)));Ce.set(t,this),this.children.push(t),e.forEach((e=>t.appendChild(e))),Mt.getNotifier(this.store).subscribe(t);for(const[e,i]of this.store.all())t.hydrate(e,this.bindingObservers.has(e)?this.getRaw(e):i)}removeChild(t){const e=this.children.indexOf(t);return-1!==e&&this.children.splice(e,1),Mt.getNotifier(this.store).unsubscribe(t),t.parent===this&&Ce.delete(t)}contains(t){return function(t,e){let i=e;for(;null!==i;){if(i===t)return!0;i=oe(i)}return!1}(this.target,t.target)}reflectToCSS(t){this.isReflecting(t)||(this.reflecting.add(t),be.cssCustomPropertyReflector.startReflection(t,this.target))}stopReflectToCSS(t){this.isReflecting(t)&&(this.reflecting.delete(t),be.cssCustomPropertyReflector.stopReflection(t,this.target))}isReflecting(t){return this.reflecting.has(t)}handleChange(t,e){const i=ge.getTokenById(e);i&&this.hydrate(i,this.getRaw(i))}hydrate(t,e){if(!this.has(t)){const i=this.bindingObservers.get(t);ge.isDerivedDesignTokenValue(e)?i?i.source!==e&&(this.tearDownBindingObserver(t),this.setupBindingObserver(t,e)):this.setupBindingObserver(t,e):(i&&this.tearDownBindingObserver(t),this.store.set(t,e))}}setupBindingObserver(t,e){const i=new me(e,t,this);return this.bindingObservers.set(t,i),i}tearDownBindingObserver(t){return!!this.bindingObservers.has(t)&&(this.bindingObservers.get(t).disconnect(),this.bindingObservers.delete(t),!0)}}be.cssCustomPropertyReflector=new class{startReflection(t,e){t.subscribe(this,e),this.handleChange({token:t,target:e})}stopReflection(t,e){t.unsubscribe(this,e),this.remove(t,e)}handleChange(t){const{token:e,target:i}=t;this.add(e,i)}add(t,e){fe.getOrCreate(e).setProperty(t.cssCustomProperty,this.resolveCSSValue(be.getOrCreate(e).get(t)))}remove(t,e){fe.getOrCreate(e).removeProperty(t.cssCustomProperty)}resolveCSSValue(t){return t&&"function"==typeof t.createCSS?t.createCSS():t}},Et([Nt],be.prototype,"children",void 0);const Se=Object.freeze({create:function(t){return ge.from(t)},notifyConnection:t=>!(!t.isConnected||!be.existsFor(t))&&(be.getOrCreate(t).bind(),!0),notifyDisconnection:t=>!(t.isConnected||!be.existsFor(t))&&(be.getOrCreate(t).unbind(),!0),registerRoot(t=ae){de.registerRoot(t)},unregisterRoot(t=ae){de.unregisterRoot(t)}});var xe;function Ee(t,e,i){return isNaN(t)||t<=e?e:t>=i?i:t}function Ae(t,e,i){return isNaN(t)||t<=e?0:t>=i?1:t/(i-e)}function Te(t,e,i){return isNaN(t)?e:e+t*(i-e)}function Ie(t){return t*(Math.PI/180)}function De(t,e,i){return isNaN(t)||t<=0?e:t>=1?i:e+t*(i-e)}function ke(t,e,i){if(t<=0)return e%360;if(t>=1)return i%360;const n=(e-i+360)%360;return n<=(i-e+360)%360?(e-n*t+360)%360:(e+n*t+360)%360}!function(t){t.ltr="ltr",t.rtl="rtl"}(xe||(xe={}));Math.PI;function we(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}class Re{constructor(t,e,i,n){this.r=t,this.g=e,this.b=i,this.a="number"!=typeof n||isNaN(n)?1:n}static fromObject(t){return!t||isNaN(t.r)||isNaN(t.g)||isNaN(t.b)?null:new Re(t.r,t.g,t.b,t.a)}equalValue(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}toStringHexRGB(){return"#"+[this.r,this.g,this.b].map(this.formatHexValue).join("")}toStringHexRGBA(){return this.toStringHexRGB()+this.formatHexValue(this.a)}toStringHexARGB(){return"#"+[this.a,this.r,this.g,this.b].map(this.formatHexValue).join("")}toStringWebRGB(){return`rgb(${Math.round(Te(this.r,0,255))},${Math.round(Te(this.g,0,255))},${Math.round(Te(this.b,0,255))})`}toStringWebRGBA(){return`rgba(${Math.round(Te(this.r,0,255))},${Math.round(Te(this.g,0,255))},${Math.round(Te(this.b,0,255))},${Ee(this.a,0,1)})`}roundToPrecision(t){return new Re(we(this.r,t),we(this.g,t),we(this.b,t),we(this.a,t))}clamp(){return new Re(Ee(this.r,0,1),Ee(this.g,0,1),Ee(this.b,0,1),Ee(this.a,0,1))}toObject(){return{r:this.r,g:this.g,b:this.b,a:this.a}}formatHexValue(t){return function(t){const e=Math.round(Ee(t,0,255)).toString(16);return 1===e.length?"0"+e:e}(Te(t,0,255))}}class Oe{constructor(t,e,i){this.h=t,this.s=e,this.l=i}static fromObject(t){return!t||isNaN(t.h)||isNaN(t.s)||isNaN(t.l)?null:new Oe(t.h,t.s,t.l)}equalValue(t){return this.h===t.h&&this.s===t.s&&this.l===t.l}roundToPrecision(t){return new Oe(we(this.h,t),we(this.s,t),we(this.l,t))}toObject(){return{h:this.h,s:this.s,l:this.l}}}class Pe{constructor(t,e,i){this.h=t,this.s=e,this.v=i}static fromObject(t){return!t||isNaN(t.h)||isNaN(t.s)||isNaN(t.v)?null:new Pe(t.h,t.s,t.v)}equalValue(t){return this.h===t.h&&this.s===t.s&&this.v===t.v}roundToPrecision(t){return new Pe(we(this.h,t),we(this.s,t),we(this.v,t))}toObject(){return{h:this.h,s:this.s,v:this.v}}}class Me{constructor(t,e,i){this.l=t,this.a=e,this.b=i}static fromObject(t){return!t||isNaN(t.l)||isNaN(t.a)||isNaN(t.b)?null:new Me(t.l,t.a,t.b)}equalValue(t){return this.l===t.l&&this.a===t.a&&this.b===t.b}roundToPrecision(t){return new Me(we(this.l,t),we(this.a,t),we(this.b,t))}toObject(){return{l:this.l,a:this.a,b:this.b}}}Me.epsilon=216/24389,Me.kappa=24389/27;class Ne{constructor(t,e,i){this.l=t,this.c=e,this.h=i}static fromObject(t){return!t||isNaN(t.l)||isNaN(t.c)||isNaN(t.h)?null:new Ne(t.l,t.c,t.h)}equalValue(t){return this.l===t.l&&this.c===t.c&&this.h===t.h}roundToPrecision(t){return new Ne(we(this.l,t),we(this.c,t),we(this.h,t))}toObject(){return{l:this.l,c:this.c,h:this.h}}}class Le{constructor(t,e,i){this.x=t,this.y=e,this.z=i}static fromObject(t){return!t||isNaN(t.x)||isNaN(t.y)||isNaN(t.z)?null:new Le(t.x,t.y,t.z)}equalValue(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}roundToPrecision(t){return new Le(we(this.x,t),we(this.y,t),we(this.z,t))}toObject(){return{x:this.x,y:this.y,z:this.z}}}function _e(t){return.2126*t.r+.7152*t.g+.0722*t.b}function Fe(t){function e(t){return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}return _e(new Re(e(t.r),e(t.g),e(t.b),1))}Le.whitePoint=new Le(.95047,1,1.08883);const He=(t,e)=>(t+.05)/(e+.05);function Ze(t,e){const i=Fe(t),n=Fe(e);return i>n?He(i,n):He(n,i)}function Be(t){const e=Math.max(t.r,t.g,t.b),i=Math.min(t.r,t.g,t.b),n=e-i;let o=0;0!==n&&(o=e===t.r?(t.g-t.b)/n%6*60:e===t.g?60*((t.b-t.r)/n+2):60*((t.r-t.g)/n+4)),o<0&&(o+=360);const a=(e+i)/2;let r=0;return 0!==n&&(r=n/(1-Math.abs(2*a-1))),new Oe(o,r,a)}function Ue(t,e=1){const i=(1-Math.abs(2*t.l-1))*t.s,n=i*(1-Math.abs(t.h/60%2-1)),o=t.l-i/2;let a=0,r=0,s=0;return t.h<60?(a=i,r=n,s=0):t.h<120?(a=n,r=i,s=0):t.h<180?(a=0,r=i,s=n):t.h<240?(a=0,r=n,s=i):t.h<300?(a=n,r=0,s=i):t.h<360&&(a=i,r=0,s=n),new Re(a+o,r+o,s+o,e)}function Ge(t){const e=Math.max(t.r,t.g,t.b),i=e-Math.min(t.r,t.g,t.b);let n=0;0!==i&&(n=e===t.r?(t.g-t.b)/i%6*60:e===t.g?60*((t.b-t.r)/i+2):60*((t.r-t.g)/i+4)),n<0&&(n+=360);let o=0;return 0!==e&&(o=i/e),new Pe(n,o,e)}function Ve(t){let e=0;(Math.abs(t.b)>.001||Math.abs(t.a)>.001)&&(e=Math.atan2(t.b,t.a)*(180/Math.PI)),e<0&&(e+=360);const i=Math.sqrt(t.a*t.a+t.b*t.b);return new Ne(t.l,i,e)}function $e(t){function e(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}const i=e(t.r),n=e(t.g),o=e(t.b);return new Le(.4124564*i+.3575761*n+.1804375*o,.2126729*i+.7151522*n+.072175*o,.0193339*i+.119192*n+.9503041*o)}function We(t,e=1){function i(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055}const n=i(3.2404542*t.x-1.5371385*t.y-.4985314*t.z),o=i(-.969266*t.x+1.8760108*t.y+.041556*t.z),a=i(.0556434*t.x-.2040259*t.y+1.0572252*t.z);return new Re(n,o,a,e)}function ze(t){return function(t){function e(t){return t>Me.epsilon?Math.pow(t,1/3):(Me.kappa*t+16)/116}const i=e(t.x/Le.whitePoint.x),n=e(t.y/Le.whitePoint.y),o=e(t.z/Le.whitePoint.z);return new Me(116*n-16,500*(i-n),200*(n-o))}($e(t))}function Ke(t,e=1){return We(function(t){const e=(t.l+16)/116,i=e+t.a/500,n=e-t.b/200,o=Math.pow(i,3),a=Math.pow(e,3),r=Math.pow(n,3);let s=0;s=o>Me.epsilon?o:(116*i-16)/Me.kappa;let l=0;l=t.l>Me.epsilon*Me.kappa?a:t.l/Me.kappa;let c=0;return c=r>Me.epsilon?r:(116*n-16)/Me.kappa,s=Le.whitePoint.x*s,l=Le.whitePoint.y*l,c=Le.whitePoint.z*c,new Le(s,l,c)}(t),e)}function Ye(t){return Ve(ze(t))}function je(t,e=1){return Ke(function(t){let e=0,i=0;return 0!==t.h&&(e=Math.cos(Ie(t.h))*t.c,i=Math.sin(Ie(t.h))*t.c),new Me(t.l,e,i)}(t),e)}function Xe(t,e,i=18){const n=Ye(t);let o=n.c+e*i;return o<0&&(o=0),je(new Ne(n.l,o,n.h))}function qe(t,e){return t*e}function Je(t,e){return new Re(qe(t.r,e.r),qe(t.g,e.g),qe(t.b,e.b),1)}function Qe(t,e){return Ee(t<.5?2*e*t:1-2*(1-e)*(1-t),0,1)}function ti(t,e){return new Re(Qe(t.r,e.r),Qe(t.g,e.g),Qe(t.b,e.b),1)}var ei,ii;function ni(t,e,i,n){if(isNaN(t)||t<=0)return i;if(t>=1)return n;switch(e){case ii.HSL:return Ue(function(t,e,i){return isNaN(t)||t<=0?e:t>=1?i:new Oe(ke(t,e.h,i.h),De(t,e.s,i.s),De(t,e.l,i.l))}(t,Be(i),Be(n)));case ii.HSV:return function(t,e=1){const i=t.s*t.v,n=i*(1-Math.abs(t.h/60%2-1)),o=t.v-i;let a=0,r=0,s=0;return t.h<60?(a=i,r=n,s=0):t.h<120?(a=n,r=i,s=0):t.h<180?(a=0,r=i,s=n):t.h<240?(a=0,r=n,s=i):t.h<300?(a=n,r=0,s=i):t.h<360&&(a=i,r=0,s=n),new Re(a+o,r+o,s+o,e)}(function(t,e,i){return isNaN(t)||t<=0?e:t>=1?i:new Pe(ke(t,e.h,i.h),De(t,e.s,i.s),De(t,e.v,i.v))}(t,Ge(i),Ge(n)));case ii.XYZ:return We(function(t,e,i){return isNaN(t)||t<=0?e:t>=1?i:new Le(De(t,e.x,i.x),De(t,e.y,i.y),De(t,e.z,i.z))}(t,$e(i),$e(n)));case ii.LAB:return Ke(function(t,e,i){return isNaN(t)||t<=0?e:t>=1?i:new Me(De(t,e.l,i.l),De(t,e.a,i.a),De(t,e.b,i.b))}(t,ze(i),ze(n)));case ii.LCH:return je(function(t,e,i){return isNaN(t)||t<=0?e:t>=1?i:new Ne(De(t,e.l,i.l),De(t,e.c,i.c),ke(t,e.h,i.h))}(t,Ye(i),Ye(n)));default:return function(t,e,i){return isNaN(t)||t<=0?e:t>=1?i:new Re(De(t,e.r,i.r),De(t,e.g,i.g),De(t,e.b,i.b),De(t,e.a,i.a))}(t,i,n)}}!function(t){t[t.Burn=0]="Burn",t[t.Color=1]="Color",t[t.Darken=2]="Darken",t[t.Dodge=3]="Dodge",t[t.Lighten=4]="Lighten",t[t.Multiply=5]="Multiply",t[t.Overlay=6]="Overlay",t[t.Screen=7]="Screen"}(ei||(ei={})),function(t){t[t.RGB=0]="RGB",t[t.HSL=1]="HSL",t[t.HSV=2]="HSV",t[t.XYZ=3]="XYZ",t[t.LAB=4]="LAB",t[t.LCH=5]="LCH"}(ii||(ii={}));class oi{constructor(t){if(null==t||0===t.length)throw new Error("The stops argument must be non-empty");this.stops=this.sortColorScaleStops(t)}static createBalancedColorScale(t){if(null==t||0===t.length)throw new Error("The colors argument must be non-empty");const e=new Array(t.length);for(let i=0;i<t.length;i++)0===i?e[i]={color:t[i],position:0}:i===t.length-1?e[i]={color:t[i],position:1}:e[i]={color:t[i],position:i*(1/(t.length-1))};return new oi(e)}getColor(t,e=ii.RGB){if(1===this.stops.length)return this.stops[0].color;if(t<=0)return this.stops[0].color;if(t>=1)return this.stops[this.stops.length-1].color;let i=0;for(let e=0;e<this.stops.length;e++)this.stops[e].position<=t&&(i=e);let n=i+1;n>=this.stops.length&&(n=this.stops.length-1);return ni((t-this.stops[i].position)*(1/(this.stops[n].position-this.stops[i].position)),e,this.stops[i].color,this.stops[n].color)}trim(t,e,i=ii.RGB){if(t<0||e>1||e<t)throw new Error("Invalid bounds");if(t===e)return new oi([{color:this.getColor(t,i),position:0}]);const n=[];for(let i=0;i<this.stops.length;i++)this.stops[i].position>=t&&this.stops[i].position<=e&&n.push(this.stops[i]);if(0===n.length)return new oi([{color:this.getColor(t),position:t},{color:this.getColor(e),position:e}]);n[0].position!==t&&n.unshift({color:this.getColor(t),position:t}),n[n.length-1].position!==e&&n.push({color:this.getColor(e),position:e});const o=e-t,a=new Array(n.length);for(let e=0;e<n.length;e++)a[e]={color:n[e].color,position:(n[e].position-t)/o};return new oi(a)}findNextColor(t,e,i=!1,n=ii.RGB,o=.005,a=32){isNaN(t)||t<=0?t=0:t>=1&&(t=1);const r=this.getColor(t,n),s=i?0:1;if(Ze(r,this.getColor(s,n))<=e)return s;let l=i?0:t,c=i?t:0,u=s,d=0;for(;d<=a;){u=Math.abs(c-l)/2+l;const t=Ze(r,this.getColor(u,n));if(Math.abs(t-e)<=o)return u;t>e?i?l=u:c=u:i?c=u:l=u,d++}return u}clone(){const t=new Array(this.stops.length);for(let e=0;e<t.length;e++)t[e]={color:this.stops[e].color,position:this.stops[e].position};return new oi(t)}sortColorScaleStops(t){return t.sort(((t,e)=>{const i=t.position,n=e.position;return i<n?-1:i>n?1:0}))}}const ai={aliceblue:{r:.941176,g:.972549,b:1},antiquewhite:{r:.980392,g:.921569,b:.843137},aqua:{r:0,g:1,b:1},aquamarine:{r:.498039,g:1,b:.831373},azure:{r:.941176,g:1,b:1},beige:{r:.960784,g:.960784,b:.862745},bisque:{r:1,g:.894118,b:.768627},black:{r:0,g:0,b:0},blanchedalmond:{r:1,g:.921569,b:.803922},blue:{r:0,g:0,b:1},blueviolet:{r:.541176,g:.168627,b:.886275},brown:{r:.647059,g:.164706,b:.164706},burlywood:{r:.870588,g:.721569,b:.529412},cadetblue:{r:.372549,g:.619608,b:.627451},chartreuse:{r:.498039,g:1,b:0},chocolate:{r:.823529,g:.411765,b:.117647},coral:{r:1,g:.498039,b:.313725},cornflowerblue:{r:.392157,g:.584314,b:.929412},cornsilk:{r:1,g:.972549,b:.862745},crimson:{r:.862745,g:.078431,b:.235294},cyan:{r:0,g:1,b:1},darkblue:{r:0,g:0,b:.545098},darkcyan:{r:0,g:.545098,b:.545098},darkgoldenrod:{r:.721569,g:.52549,b:.043137},darkgray:{r:.662745,g:.662745,b:.662745},darkgreen:{r:0,g:.392157,b:0},darkgrey:{r:.662745,g:.662745,b:.662745},darkkhaki:{r:.741176,g:.717647,b:.419608},darkmagenta:{r:.545098,g:0,b:.545098},darkolivegreen:{r:.333333,g:.419608,b:.184314},darkorange:{r:1,g:.54902,b:0},darkorchid:{r:.6,g:.196078,b:.8},darkred:{r:.545098,g:0,b:0},darksalmon:{r:.913725,g:.588235,b:.478431},darkseagreen:{r:.560784,g:.737255,b:.560784},darkslateblue:{r:.282353,g:.239216,b:.545098},darkslategray:{r:.184314,g:.309804,b:.309804},darkslategrey:{r:.184314,g:.309804,b:.309804},darkturquoise:{r:0,g:.807843,b:.819608},darkviolet:{r:.580392,g:0,b:.827451},deeppink:{r:1,g:.078431,b:.576471},deepskyblue:{r:0,g:.74902,b:1},dimgray:{r:.411765,g:.411765,b:.411765},dimgrey:{r:.411765,g:.411765,b:.411765},dodgerblue:{r:.117647,g:.564706,b:1},firebrick:{r:.698039,g:.133333,b:.133333},floralwhite:{r:1,g:.980392,b:.941176},forestgreen:{r:.133333,g:.545098,b:.133333},fuchsia:{r:1,g:0,b:1},gainsboro:{r:.862745,g:.862745,b:.862745},ghostwhite:{r:.972549,g:.972549,b:1},gold:{r:1,g:.843137,b:0},goldenrod:{r:.854902,g:.647059,b:.12549},gray:{r:.501961,g:.501961,b:.501961},green:{r:0,g:.501961,b:0},greenyellow:{r:.678431,g:1,b:.184314},grey:{r:.501961,g:.501961,b:.501961},honeydew:{r:.941176,g:1,b:.941176},hotpink:{r:1,g:.411765,b:.705882},indianred:{r:.803922,g:.360784,b:.360784},indigo:{r:.294118,g:0,b:.509804},ivory:{r:1,g:1,b:.941176},khaki:{r:.941176,g:.901961,b:.54902},lavender:{r:.901961,g:.901961,b:.980392},lavenderblush:{r:1,g:.941176,b:.960784},lawngreen:{r:.486275,g:.988235,b:0},lemonchiffon:{r:1,g:.980392,b:.803922},lightblue:{r:.678431,g:.847059,b:.901961},lightcoral:{r:.941176,g:.501961,b:.501961},lightcyan:{r:.878431,g:1,b:1},lightgoldenrodyellow:{r:.980392,g:.980392,b:.823529},lightgray:{r:.827451,g:.827451,b:.827451},lightgreen:{r:.564706,g:.933333,b:.564706},lightgrey:{r:.827451,g:.827451,b:.827451},lightpink:{r:1,g:.713725,b:.756863},lightsalmon:{r:1,g:.627451,b:.478431},lightseagreen:{r:.12549,g:.698039,b:.666667},lightskyblue:{r:.529412,g:.807843,b:.980392},lightslategray:{r:.466667,g:.533333,b:.6},lightslategrey:{r:.466667,g:.533333,b:.6},lightsteelblue:{r:.690196,g:.768627,b:.870588},lightyellow:{r:1,g:1,b:.878431},lime:{r:0,g:1,b:0},limegreen:{r:.196078,g:.803922,b:.196078},linen:{r:.980392,g:.941176,b:.901961},magenta:{r:1,g:0,b:1},maroon:{r:.501961,g:0,b:0},mediumaquamarine:{r:.4,g:.803922,b:.666667},mediumblue:{r:0,g:0,b:.803922},mediumorchid:{r:.729412,g:.333333,b:.827451},mediumpurple:{r:.576471,g:.439216,b:.858824},mediumseagreen:{r:.235294,g:.701961,b:.443137},mediumslateblue:{r:.482353,g:.407843,b:.933333},mediumspringgreen:{r:0,g:.980392,b:.603922},mediumturquoise:{r:.282353,g:.819608,b:.8},mediumvioletred:{r:.780392,g:.082353,b:.521569},midnightblue:{r:.098039,g:.098039,b:.439216},mintcream:{r:.960784,g:1,b:.980392},mistyrose:{r:1,g:.894118,b:.882353},moccasin:{r:1,g:.894118,b:.709804},navajowhite:{r:1,g:.870588,b:.678431},navy:{r:0,g:0,b:.501961},oldlace:{r:.992157,g:.960784,b:.901961},olive:{r:.501961,g:.501961,b:0},olivedrab:{r:.419608,g:.556863,b:.137255},orange:{r:1,g:.647059,b:0},orangered:{r:1,g:.270588,b:0},orchid:{r:.854902,g:.439216,b:.839216},palegoldenrod:{r:.933333,g:.909804,b:.666667},palegreen:{r:.596078,g:.984314,b:.596078},paleturquoise:{r:.686275,g:.933333,b:.933333},palevioletred:{r:.858824,g:.439216,b:.576471},papayawhip:{r:1,g:.937255,b:.835294},peachpuff:{r:1,g:.854902,b:.72549},peru:{r:.803922,g:.521569,b:.247059},pink:{r:1,g:.752941,b:.796078},plum:{r:.866667,g:.627451,b:.866667},powderblue:{r:.690196,g:.878431,b:.901961},purple:{r:.501961,g:0,b:.501961},red:{r:1,g:0,b:0},rosybrown:{r:.737255,g:.560784,b:.560784},royalblue:{r:.254902,g:.411765,b:.882353},saddlebrown:{r:.545098,g:.270588,b:.07451},salmon:{r:.980392,g:.501961,b:.447059},sandybrown:{r:.956863,g:.643137,b:.376471},seagreen:{r:.180392,g:.545098,b:.341176},seashell:{r:1,g:.960784,b:.933333},sienna:{r:.627451,g:.321569,b:.176471},silver:{r:.752941,g:.752941,b:.752941},skyblue:{r:.529412,g:.807843,b:.921569},slateblue:{r:.415686,g:.352941,b:.803922},slategray:{r:.439216,g:.501961,b:.564706},slategrey:{r:.439216,g:.501961,b:.564706},snow:{r:1,g:.980392,b:.980392},springgreen:{r:0,g:1,b:.498039},steelblue:{r:.27451,g:.509804,b:.705882},tan:{r:.823529,g:.705882,b:.54902},teal:{r:0,g:.501961,b:.501961},thistle:{r:.847059,g:.74902,b:.847059},tomato:{r:1,g:.388235,b:.278431},transparent:{r:0,g:0,b:0,a:0},turquoise:{r:.25098,g:.878431,b:.815686},violet:{r:.933333,g:.509804,b:.933333},wheat:{r:.960784,g:.870588,b:.701961},white:{r:1,g:1,b:1},whitesmoke:{r:.960784,g:.960784,b:.960784},yellow:{r:1,g:1,b:0},yellowgreen:{r:.603922,g:.803922,b:.196078}},ri=/^rgb\(\s*((?:(?:25[0-5]|2[0-4]\d|1\d\d|\d{1,2})\s*,\s*){2}(?:25[0-5]|2[0-4]\d|1\d\d|\d{1,2})\s*)\)$/i,si=/^rgba\(\s*((?:(?:25[0-5]|2[0-4]\d|1\d\d|\d{1,2})\s*,\s*){3}(?:0|1|0?\.\d*)\s*)\)$/i,li=/^#((?:[0-9a-f]{6}|[0-9a-f]{3}))$/i,ci=/^#((?:[0-9a-f]{8}|[0-9a-f]{4}))$/i;function ui(t){return function(t){return ci.test(t)}(t)}function di(t){const e=li.exec(t);if(null===e)return null;let i=e[1];if(3===i.length){const t=i.charAt(0),e=i.charAt(1),n=i.charAt(2);i=t.concat(t,e,e,n,n)}const n=parseInt(i,16);return isNaN(n)?null:new Re(Ae((16711680&n)>>>16,0,255),Ae((65280&n)>>>8,0,255),Ae(255&n,0,255),1)}function hi(t){const e=ri.exec(t);if(null===e)return null;const i=e[1].split(",");return new Re(Ae(Number(i[0]),0,255),Ae(Number(i[1]),0,255),Ae(Number(i[2]),0,255),1)}function pi(t){const e=t.toLowerCase();return function(t){return li.test(t)}(e)?di(e):ui(e)?function(t){const e=ci.exec(t);if(null===e)return null;let i=e[1];if(4===i.length){const t=i.charAt(0),e=i.charAt(1),n=i.charAt(2),o=i.charAt(3);i=t.concat(t,e,e,n,n,o,o)}const n=parseInt(i,16);return isNaN(n)?null:new Re(Ae((16711680&n)>>>16,0,255),Ae((65280&n)>>>8,0,255),Ae(255&n,0,255),Ae((4278190080&n)>>>24,0,255))}(e):function(t){return ri.test(t)}(e)?hi(e):function(t){return si.test(t)}(e)?function(t){const e=si.exec(t);if(null===e)return null;const i=e[1].split(",");return 4===i.length?new Re(Ae(Number(i[0]),0,255),Ae(Number(i[1]),0,255),Ae(Number(i[2]),0,255),Number(i[3])):null}(e):function(t){return ai.hasOwnProperty(t)}(e)?function(t){const e=ai[t.toLowerCase()];return e?new Re(e.r,e.g,e.b,e.hasOwnProperty("a")?e.a:void 0):null}(e):null}class fi{constructor(t){this.config=Object.assign({},fi.defaultPaletteConfig,t),this.palette=[],this.updatePaletteColors()}updatePaletteGenerationValues(t){let e=!1;for(const i in t)this.config[i]&&(this.config[i].equalValue?this.config[i].equalValue(t[i])||(this.config[i]=t[i],e=!0):t[i]!==this.config[i]&&(this.config[i]=t[i],e=!0));return e&&this.updatePaletteColors(),e}updatePaletteColors(){const t=this.generatePaletteColorScale();for(let e=0;e<this.config.steps;e++)this.palette[e]=t.getColor(e/(this.config.steps-1),this.config.interpolationMode)}generatePaletteColorScale(){const t=Be(this.config.baseColor),e=new oi([{position:0,color:this.config.scaleColorLight},{position:.5,color:this.config.baseColor},{position:1,color:this.config.scaleColorDark}]).trim(this.config.clipLight,1-this.config.clipDark);let i=e.getColor(0),n=e.getColor(1);if(t.s>=this.config.saturationAdjustmentCutoff&&(i=Xe(i,this.config.saturationLight),n=Xe(n,this.config.saturationDark)),0!==this.config.multiplyLight){const t=Je(this.config.baseColor,i);i=ni(this.config.multiplyLight,this.config.interpolationMode,i,t)}if(0!==this.config.multiplyDark){const t=Je(this.config.baseColor,n);n=ni(this.config.multiplyDark,this.config.interpolationMode,n,t)}if(0!==this.config.overlayLight){const t=ti(this.config.baseColor,i);i=ni(this.config.overlayLight,this.config.interpolationMode,i,t)}if(0!==this.config.overlayDark){const t=ti(this.config.baseColor,n);n=ni(this.config.overlayDark,this.config.interpolationMode,n,t)}return this.config.baseScalePosition?this.config.baseScalePosition<=0?new oi([{position:0,color:this.config.baseColor},{position:1,color:n.clamp()}]):this.config.baseScalePosition>=1?new oi([{position:0,color:i.clamp()},{position:1,color:this.config.baseColor}]):new oi([{position:0,color:i.clamp()},{position:this.config.baseScalePosition,color:this.config.baseColor},{position:1,color:n.clamp()}]):new oi([{position:0,color:i.clamp()},{position:.5,color:this.config.baseColor},{position:1,color:n.clamp()}])}}fi.defaultPaletteConfig={baseColor:di("#808080"),steps:11,interpolationMode:ii.RGB,scaleColorLight:new Re(1,1,1,1),scaleColorDark:new Re(0,0,0,1),clipLight:.185,clipDark:.16,saturationAdjustmentCutoff:.05,saturationLight:.35,saturationDark:1.25,overlayLight:0,overlayDark:.25,multiplyLight:0,multiplyDark:0,baseScalePosition:.5},fi.greyscalePaletteConfig={baseColor:di("#808080"),steps:11,interpolationMode:ii.RGB,scaleColorLight:new Re(1,1,1,1),scaleColorDark:new Re(0,0,0,1),clipLight:0,clipDark:0,saturationAdjustmentCutoff:0,saturationLight:0,saturationDark:0,overlayLight:0,overlayDark:0,multiplyLight:0,multiplyDark:0,baseScalePosition:.5};fi.defaultPaletteConfig.scaleColorLight,fi.defaultPaletteConfig.scaleColorDark;class gi{constructor(t){this.palette=[],this.config=Object.assign({},gi.defaultPaletteConfig,t),this.regenPalettes()}regenPalettes(){let t=this.config.steps;(isNaN(t)||t<3)&&(t=3);const e=.14,i=new Re(e,e,e,1),n=new fi(Object.assign(Object.assign({},fi.greyscalePaletteConfig),{baseColor:i,baseScalePosition:86/94,steps:t})).palette,o=(_e(this.config.baseColor)+Be(this.config.baseColor).l)/2,a=this.matchRelativeLuminanceIndex(o,n)/(t-1),r=this.matchRelativeLuminanceIndex(e,n)/(t-1),s=Be(this.config.baseColor),l=Ue(Oe.fromObject({h:s.h,s:s.s,l:e})),c=Ue(Oe.fromObject({h:s.h,s:s.s,l:.06})),u=new Array(5);u[0]={position:0,color:new Re(1,1,1,1)},u[1]={position:a,color:this.config.baseColor},u[2]={position:r,color:l},u[3]={position:.99,color:c},u[4]={position:1,color:new Re(0,0,0,1)};const d=new oi(u);this.palette=new Array(t);for(let e=0;e<t;e++){const i=d.getColor(e/(t-1),ii.RGB);this.palette[e]=i}}matchRelativeLuminanceIndex(t,e){let i=Number.MAX_VALUE,n=0,o=0;const a=e.length;for(;o<a;o++){const a=Math.abs(_e(e[o])-t);a<i&&(i=a,n=o)}return n}}function mi(t,e){const i=t.relativeLuminance>e.relativeLuminance?t:e,n=t.relativeLuminance>e.relativeLuminance?e:t;return(i.relativeLuminance+.05)/(n.relativeLuminance+.05)}gi.defaultPaletteConfig={baseColor:di("#808080"),steps:94};const vi=Object.freeze({create:(t,e,i)=>new yi(t,e,i),from:t=>new yi(t.r,t.g,t.b)});class yi extends Re{constructor(t,e,i){super(t,e,i,1),this.toColorString=this.toStringHexRGB,this.contrast=mi.bind(null,this),this.createCSS=this.toColorString,this.relativeLuminance=Fe(this)}static fromObject(t){return new yi(t.r,t.g,t.b)}}function Ci(t,e,i=0,n=t.length-1){if(n===i)return t[i];const o=Math.floor((n-i)/2)+i;return e(t[o])?Ci(t,e,i,o):Ci(t,e,o+1,n)}const bi=(-.1+Math.sqrt(.21))/2;function Si(t){return function(t){return t.relativeLuminance<=bi}(t)?-1:1}const xi=Object.freeze({create:t=>Ei.from(t)});class Ei{constructor(t,e){this.closestIndexCache=new Map,this.source=t,this.swatches=e,this.reversedSwatches=Object.freeze([...this.swatches].reverse()),this.lastIndex=this.swatches.length-1}colorContrast(t,e,i,n){void 0===i&&(i=this.closestIndexOf(t));let o=this.swatches;const a=this.lastIndex;let r=i;void 0===n&&(n=Si(t));return-1===n&&(o=this.reversedSwatches,r=a-r),Ci(o,(i=>mi(t,i)>=e),r,a)}get(t){return this.swatches[t]||this.swatches[Ee(t,0,this.lastIndex)]}closestIndexOf(t){if(this.closestIndexCache.has(t.relativeLuminance))return this.closestIndexCache.get(t.relativeLuminance);let e=this.swatches.indexOf(t);if(-1!==e)return this.closestIndexCache.set(t.relativeLuminance,e),e;const i=this.swatches.reduce(((e,i)=>Math.abs(i.relativeLuminance-t.relativeLuminance)<Math.abs(e.relativeLuminance-t.relativeLuminance)?i:e));return e=this.swatches.indexOf(i),this.closestIndexCache.set(t.relativeLuminance,e),e}static from(t){return new Ei(t,Object.freeze(new gi({baseColor:Re.fromObject(t)}).palette.map((t=>{const e=di(t.toStringHexRGB());return vi.create(e.r,e.g,e.b)}))))}}const Ai=vi.create(1,1,1),Ti=vi.create(0,0,0),Ii=vi.create(.5,.5,.5),Di=di("#0078D4"),ki=vi.create(Di.r,Di.g,Di.b);function wi(t){return vi.create(t,t,t)}var Ri;function Oi(t,e,i,n,o,a){return Math.max(t.closestIndexOf(wi(e))+i,n,o,a)}!function(t){t[t.LightMode=1]="LightMode",t[t.DarkMode=.23]="DarkMode"}(Ri||(Ri={}));const{create:Pi}=Se,Mi=Pi("direction").withDefault(xe.ltr),Ni=Pi("disabled-opacity").withDefault(.3),Li=Pi("base-height-multiplier").withDefault(8),_i=Pi("base-horizontal-spacing-multiplier").withDefault(3),Fi=Pi("density").withDefault(0),Hi=Pi("design-unit").withDefault(4),Zi=Pi("control-corner-radius").withDefault(4),Bi=Pi("layer-corner-radius").withDefault(4),Ui=Pi("stroke-width").withDefault(1),Gi=Pi("focus-stroke-width").withDefault(2),Vi=Pi("body-font").withDefault("Segoe UI, sans-serif"),$i=Pi("type-ramp-base-font-size").withDefault("14px"),Wi=Pi("type-ramp-base-line-height").withDefault("20px"),zi=Pi("type-ramp-minus-1-font-size").withDefault("12px"),Ki=Pi("type-ramp-minus-1-line-height").withDefault("16px"),Yi=Pi("type-ramp-minus-2-font-size").withDefault("10px"),ji=Pi("type-ramp-minus-2-line-height").withDefault("14px"),Xi=Pi("type-ramp-plus-1-font-size").withDefault("16px"),qi=Pi("type-ramp-plus-1-line-height").withDefault("22px"),Ji=Pi("type-ramp-plus-2-font-size").withDefault("20px"),Qi=Pi("type-ramp-plus-2-line-height").withDefault("28px"),tn=Pi("type-ramp-plus-3-font-size").withDefault("24px"),en=Pi("type-ramp-plus-3-line-height").withDefault("32px"),nn=Pi("type-ramp-plus-4-font-size").withDefault("28px"),on=Pi("type-ramp-plus-4-line-height").withDefault("36px"),an=Pi("type-ramp-plus-5-font-size").withDefault("32px"),rn=Pi("type-ramp-plus-5-line-height").withDefault("40px"),sn=Pi("type-ramp-plus-6-font-size").withDefault("40px"),ln=Pi("type-ramp-plus-6-line-height").withDefault("52px"),cn=Pi("base-layer-luminance").withDefault(Ri.LightMode),un=Pi("accent-fill-rest-delta").withDefault(0),dn=Pi("accent-fill-hover-delta").withDefault(4),hn=Pi("accent-fill-active-delta").withDefault(-5),pn=Pi("accent-fill-focus-delta").withDefault(0),fn=Pi("accent-foreground-rest-delta").withDefault(0),gn=Pi("accent-foreground-hover-delta").withDefault(6),mn=Pi("accent-foreground-active-delta").withDefault(-4),vn=Pi("accent-foreground-focus-delta").withDefault(0),yn=Pi("neutral-fill-rest-delta").withDefault(7),Cn=Pi("neutral-fill-hover-delta").withDefault(10),bn=Pi("neutral-fill-active-delta").withDefault(5),Sn=Pi("neutral-fill-focus-delta").withDefault(0),xn=Pi("neutral-fill-input-rest-delta").withDefault(0),En=Pi("neutral-fill-input-hover-delta").withDefault(0),An=Pi("neutral-fill-input-active-delta").withDefault(0),Tn=Pi("neutral-fill-input-focus-delta").withDefault(0),In=Pi("neutral-fill-inverse-rest-delta").withDefault(0),Dn=Pi("neutral-fill-inverse-hover-delta").withDefault(-3),kn=Pi("neutral-fill-inverse-active-delta").withDefault(7),wn=Pi("neutral-fill-inverse-focus-delta").withDefault(0),Rn=Pi("neutral-fill-layer-rest-delta").withDefault(3),On=Pi("neutral-fill-stealth-rest-delta").withDefault(0),Pn=Pi("neutral-fill-stealth-hover-delta").withDefault(5),Mn=Pi("neutral-fill-stealth-active-delta").withDefault(3),Nn=Pi("neutral-fill-stealth-focus-delta").withDefault(0),Ln=Pi("neutral-fill-strong-rest-delta").withDefault(0),_n=Pi("neutral-fill-strong-hover-delta").withDefault(8),Fn=Pi("neutral-fill-strong-active-delta").withDefault(-5),Hn=Pi("neutral-fill-strong-focus-delta").withDefault(0),Zn=Pi("neutral-stroke-rest-delta").withDefault(25),Bn=Pi("neutral-stroke-hover-delta").withDefault(40),Un=Pi("neutral-stroke-active-delta").withDefault(16),Gn=Pi("neutral-stroke-focus-delta").withDefault(25),Vn=Pi("neutral-stroke-divider-rest-delta").withDefault(8),$n=Pi("neutral-stroke-strong-hover-delta").withDefault(40),Wn=Pi("neutral-stroke-strong-active-delta").withDefault(16),zn=Pi("neutral-stroke-strong-focus-delta").withDefault(25),Kn=Pi({name:"neutral-palette",cssCustomPropertyName:null}).withDefault(xi.create(Ii)),Yn=Pi({name:"accent-palette",cssCustomPropertyName:null}).withDefault(xi.create(ki)),jn=Pi({name:"neutral-layer-card-container-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>function(t,e,i){const n=Ee(t.closestIndexOf(wi(e))-i,0,t.swatches.length-1);return t.get(n+i)}(Kn.getValueFor(t),cn.getValueFor(t),Rn.getValueFor(t))}),Xn=(Pi("neutral-layer-card-container").withDefault((t=>jn.getValueFor(t).evaluate(t))),Pi({name:"neutral-layer-floating-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>function(t,e,i){const n=t.closestIndexOf(wi(e))-i;return t.get(n-i)}(Kn.getValueFor(t),cn.getValueFor(t),Rn.getValueFor(t))})),qn=Pi("neutral-layer-floating").withDefault((t=>Xn.getValueFor(t).evaluate(t))),Jn=Pi({name:"neutral-layer-1-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>function(t,e){return t.get(t.closestIndexOf(wi(e)))}(Kn.getValueFor(t),cn.getValueFor(t))}),Qn=Pi("neutral-layer-1").withDefault((t=>Jn.getValueFor(t).evaluate(t))),to=Pi({name:"neutral-layer-2-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>function(t,e,i,n,o,a){return t.get(Oi(t,e,i,n,o,a))}(Kn.getValueFor(t),cn.getValueFor(t),Rn.getValueFor(t),yn.getValueFor(t),Cn.getValueFor(t),bn.getValueFor(t))}),eo=(Pi("neutral-layer-2").withDefault((t=>to.getValueFor(t).evaluate(t))),Pi({name:"neutral-layer-3-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>function(t,e,i,n,o,a){return t.get(Oi(t,e,i,n,o,a)+i)}(Kn.getValueFor(t),cn.getValueFor(t),Rn.getValueFor(t),yn.getValueFor(t),Cn.getValueFor(t),bn.getValueFor(t))})),io=(Pi("neutral-layer-3").withDefault((t=>eo.getValueFor(t).evaluate(t))),Pi({name:"neutral-layer-4-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>function(t,e,i,n,o,a){return t.get(Oi(t,e,i,n,o,a)+2*i)}(Kn.getValueFor(t),cn.getValueFor(t),Rn.getValueFor(t),yn.getValueFor(t),Cn.getValueFor(t),bn.getValueFor(t))})),no=(Pi("neutral-layer-4").withDefault((t=>io.getValueFor(t).evaluate(t))),Pi("fill-color").withDefault((t=>Qn.getValueFor(t))));var oo;!function(t){t[t.normal=4.5]="normal",t[t.large=7]="large"}(oo||(oo={}));const ao=Pi({name:"accent-fill-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>(oo.normal,(t,e)=>function(t,e,i,n,o,a,r,s,l){const c=t.source,u=t.closestIndexOf(c),d=u+1*n,h=u+1*o,p=u+1*a;return{rest:t.get(u),hover:t.get(d),active:t.get(h),focus:t.get(p)}}(Yn.getValueFor(t),Kn.getValueFor(t),e||no.getValueFor(t),dn.getValueFor(t),hn.getValueFor(t),pn.getValueFor(t),yn.getValueFor(t),Cn.getValueFor(t),bn.getValueFor(t)))(t,e)}),ro=Pi("accent-fill-rest").withDefault((t=>ao.getValueFor(t).evaluate(t).rest)),so=Pi("accent-fill-hover").withDefault((t=>ao.getValueFor(t).evaluate(t).hover)),lo=Pi("accent-fill-active").withDefault((t=>ao.getValueFor(t).evaluate(t).active)),co=Pi("accent-fill-focus").withDefault((t=>ao.getValueFor(t).evaluate(t).focus)),uo=t=>(e,i)=>function(t,e){return t.contrast(Ai)>=e?Ai:Ti}(i||ro.getValueFor(e),t),ho=Pi({name:"foreground-on-accent-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>uo(oo.normal)(t,e)}),po=Pi("foreground-on-accent-rest").withDefault((t=>ho.getValueFor(t).evaluate(t,ro.getValueFor(t)))),fo=Pi("foreground-on-accent-hover").withDefault((t=>ho.getValueFor(t).evaluate(t,so.getValueFor(t)))),go=Pi("foreground-on-accent-active").withDefault((t=>ho.getValueFor(t).evaluate(t,lo.getValueFor(t)))),mo=Pi("foreground-on-accent-focus").withDefault((t=>ho.getValueFor(t).evaluate(t,co.getValueFor(t)))),vo=Pi({name:"foreground-on-accent-large-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>uo(oo.large)(t,e)}),yo=(Pi("foreground-on-accent-rest-large").withDefault((t=>vo.getValueFor(t).evaluate(t))),Pi("foreground-on-accent-hover-large").withDefault((t=>vo.getValueFor(t).evaluate(t,so.getValueFor(t)))),Pi("foreground-on-accent-active-large").withDefault((t=>vo.getValueFor(t).evaluate(t,lo.getValueFor(t)))),Pi("foreground-on-accent-focus-large").withDefault((t=>vo.getValueFor(t).evaluate(t,co.getValueFor(t)))),t=>(e,i)=>function(t,e,i,n,o,a,r){const s=t.source,l=t.closestIndexOf(s),c=Si(e),u=l+(1===c?Math.min(n,o):Math.max(c*n,c*o)),d=t.colorContrast(e,i,u,c),h=t.closestIndexOf(d),p=h+c*Math.abs(n-o);let f,g;return(1===c?n<o:c*n>c*o)?(f=h,g=p):(f=p,g=h),{rest:t.get(f),hover:t.get(g),active:t.get(f+c*a),focus:t.get(f+c*r)}}(Yn.getValueFor(e),i||no.getValueFor(e),t,fn.getValueFor(e),gn.getValueFor(e),mn.getValueFor(e),vn.getValueFor(e))),Co=Pi({name:"accent-foreground-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>yo(oo.normal)(t,e)}),bo=Pi("accent-foreground-rest").withDefault((t=>Co.getValueFor(t).evaluate(t).rest)),So=Pi("accent-foreground-hover").withDefault((t=>Co.getValueFor(t).evaluate(t).hover)),xo=Pi("accent-foreground-active").withDefault((t=>Co.getValueFor(t).evaluate(t).active)),Eo=(Pi("accent-foreground-focus").withDefault((t=>Co.getValueFor(t).evaluate(t).focus)),Pi({name:"neutral-fill-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>function(t,e,i,n,o,a){const r=t.closestIndexOf(e),s=r>=Math.max(i,n,o,a)?-1:1;return{rest:t.get(r+s*i),hover:t.get(r+s*n),active:t.get(r+s*o),focus:t.get(r+s*a)}}(Kn.getValueFor(t),e||no.getValueFor(t),yn.getValueFor(t),Cn.getValueFor(t),bn.getValueFor(t),Sn.getValueFor(t))})),Ao=Pi("neutral-fill-rest").withDefault((t=>Eo.getValueFor(t).evaluate(t).rest)),To=Pi("neutral-fill-hover").withDefault((t=>Eo.getValueFor(t).evaluate(t).hover)),Io=Pi("neutral-fill-active").withDefault((t=>Eo.getValueFor(t).evaluate(t).active)),Do=(Pi("neutral-fill-focus").withDefault((t=>Eo.getValueFor(t).evaluate(t).focus)),Pi({name:"neutral-fill-input-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>function(t,e,i,n,o,a){const r=Si(e),s=t.closestIndexOf(e);return{rest:t.get(s-r*i),hover:t.get(s-r*n),active:t.get(s-r*o),focus:t.get(s-r*a)}}(Kn.getValueFor(t),e||no.getValueFor(t),xn.getValueFor(t),En.getValueFor(t),An.getValueFor(t),Tn.getValueFor(t))})),ko=Pi("neutral-fill-input-rest").withDefault((t=>Do.getValueFor(t).evaluate(t).rest)),wo=Pi("neutral-fill-input-hover").withDefault((t=>Do.getValueFor(t).evaluate(t).hover)),Ro=(Pi("neutral-fill-input-focus").withDefault((t=>Do.getValueFor(t).evaluate(t).focus)),Pi("neutral-fill-input-active").withDefault((t=>Do.getValueFor(t).evaluate(t).active))),Oo=Pi({name:"neutral-fill-inverse-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>function(t,e,i,n,o,a){const r=Si(e),s=t.closestIndexOf(t.colorContrast(e,14)),l=s+r*Math.abs(i-n);let c,u;return(1===r?i<n:r*i>r*n)?(c=s,u=l):(c=l,u=s),{rest:t.get(c),hover:t.get(u),active:t.get(c+r*o),focus:t.get(c+r*a)}}(Kn.getValueFor(t),e||no.getValueFor(t),In.getValueFor(t),Dn.getValueFor(t),kn.getValueFor(t),wn.getValueFor(t))}),Po=(Pi("neutral-fill-inverse-rest").withDefault((t=>Oo.getValueFor(t).evaluate(t).rest)),Pi("neutral-fill-inverse-hover").withDefault((t=>Oo.getValueFor(t).evaluate(t).hover)),Pi("neutral-fill-inverse-active").withDefault((t=>Oo.getValueFor(t).evaluate(t).active)),Pi("neutral-fill-inverse-focus").withDefault((t=>Oo.getValueFor(t).evaluate(t).focus)),Pi({name:"neutral-fill-layer-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>function(t,e,i){const n=t.closestIndexOf(e);return t.get(n-i)}(Kn.getValueFor(t),e||no.getValueFor(t),Rn.getValueFor(t))})),Mo=Pi("neutral-fill-layer-rest").withDefault((t=>Po.getValueFor(t).evaluate(t))),No=Pi({name:"neutral-fill-stealth-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>function(t,e,i,n,o,a,r,s,l,c){const u=Math.max(i,n,o,a,r,s,l,c),d=t.closestIndexOf(e),h=d>=u?-1:1;return{rest:t.get(d+h*i),hover:t.get(d+h*n),active:t.get(d+h*o),focus:t.get(d+h*a)}}(Kn.getValueFor(t),e||no.getValueFor(t),On.getValueFor(t),Pn.getValueFor(t),Mn.getValueFor(t),Nn.getValueFor(t),yn.getValueFor(t),Cn.getValueFor(t),bn.getValueFor(t),Sn.getValueFor(t))}),Lo=Pi("neutral-fill-stealth-rest").withDefault((t=>No.getValueFor(t).evaluate(t).rest)),_o=Pi("neutral-fill-stealth-hover").withDefault((t=>No.getValueFor(t).evaluate(t).hover)),Fo=Pi("neutral-fill-stealth-active").withDefault((t=>No.getValueFor(t).evaluate(t).active)),Ho=(Pi("neutral-fill-stealth-focus").withDefault((t=>No.getValueFor(t).evaluate(t).focus)),Pi({name:"neutral-fill-strong-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>function(t,e,i,n,o,a){const r=Si(e),s=t.closestIndexOf(t.colorContrast(e,4.5)),l=s+r*Math.abs(i-n);let c,u;return(1===r?i<n:r*i>r*n)?(c=s,u=l):(c=l,u=s),{rest:t.get(c),hover:t.get(u),active:t.get(c+r*o),focus:t.get(c+r*a)}}(Kn.getValueFor(t),e||no.getValueFor(t),Ln.getValueFor(t),_n.getValueFor(t),Fn.getValueFor(t),Hn.getValueFor(t))})),Zo=(Pi("neutral-fill-strong-rest").withDefault((t=>Ho.getValueFor(t).evaluate(t).rest)),Pi("neutral-fill-strong-hover").withDefault((t=>Ho.getValueFor(t).evaluate(t).hover)),Pi("neutral-fill-strong-active").withDefault((t=>Ho.getValueFor(t).evaluate(t).active)),Pi("neutral-fill-strong-focus").withDefault((t=>Ho.getValueFor(t).evaluate(t).focus)),Pi({name:"neutral-stroke-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>function(t,e,i,n,o,a){const r=t.closestIndexOf(e),s=Si(e),l=r+s*i,c=l+s*(n-i),u=l+s*(o-i),d=l+s*(a-i);return{rest:t.get(l),hover:t.get(c),active:t.get(u),focus:t.get(d)}}(Kn.getValueFor(t),no.getValueFor(t),Zn.getValueFor(t),Bn.getValueFor(t),Un.getValueFor(t),Gn.getValueFor(t))})),Bo=Pi("neutral-stroke-rest").withDefault((t=>Zo.getValueFor(t).evaluate(t).rest)),Uo=Pi("neutral-stroke-hover").withDefault((t=>Zo.getValueFor(t).evaluate(t).hover)),Go=Pi("neutral-stroke-active").withDefault((t=>Zo.getValueFor(t).evaluate(t).active)),Vo=(Pi("neutral-stroke-focus").withDefault((t=>Zo.getValueFor(t).evaluate(t).focus)),Pi({name:"neutral-stroke-divider-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>function(t,e,i){return t.get(t.closestIndexOf(e)+Si(e)*i)}(Kn.getValueFor(t),e||no.getValueFor(t),Vn.getValueFor(t))})),$o=Pi("neutral-stroke-divider-rest").withDefault((t=>Vo.getValueFor(t).evaluate(t))),Wo=Pi({name:"neutral-stroke-strong-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>function(t,e,i,n,o,a){const r=Si(e),s=t.colorContrast(e,i),l=t.closestIndexOf(s);return{rest:s,hover:t.get(l+r*n),active:t.get(l+r*o),focus:t.get(l+r*a)}}(Kn.getValueFor(t),no.getValueFor(t),3,$n.getValueFor(t),Wn.getValueFor(t),zn.getValueFor(t))}),zo=Pi("neutral-stroke-strong-rest").withDefault((t=>Wo.getValueFor(t).evaluate(t).rest)),Ko=Pi("neutral-stroke-strong-hover").withDefault((t=>Wo.getValueFor(t).evaluate(t).hover)),Yo=Pi("neutral-stroke-strong-active").withDefault((t=>Wo.getValueFor(t).evaluate(t).active)),jo=(Pi("neutral-stroke-strong-focus").withDefault((t=>Wo.getValueFor(t).evaluate(t).focus)),Pi({name:"focus-stroke-outer-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>{return e=Kn.getValueFor(t),i=no.getValueFor(t),e.colorContrast(i,3.5);var e,i}})),Xo=Pi("focus-stroke-outer").withDefault((t=>jo.getValueFor(t).evaluate(t))),qo=Pi({name:"focus-stroke-inner-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>{return e=Yn.getValueFor(t),i=no.getValueFor(t),n=Xo.getValueFor(t),e.colorContrast(n,3.5,e.closestIndexOf(e.source),-1*Si(i));var e,i,n}}),Jo=Pi("focus-stroke-inner").withDefault((t=>qo.getValueFor(t).evaluate(t))),Qo=Pi({name:"neutral-foreground-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>{return e=Kn.getValueFor(t),i=no.getValueFor(t),e.colorContrast(i,14);var e,i}}),ta=Pi("neutral-foreground-rest").withDefault((t=>Qo.getValueFor(t).evaluate(t))),ea=Pi({name:"neutral-foreground-hint-recipe",cssCustomPropertyName:null}).withDefault({evaluate:t=>{return e=Kn.getValueFor(t),i=no.getValueFor(t),e.colorContrast(i,4.5);var e,i}}),ia=Pi("neutral-foreground-hint").withDefault((t=>ea.getValueFor(t).evaluate(t)));var na=i(313),oa=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"boolValue",void 0)}return(0,l.Z)(t,null,[{key:"Create",value:function(e){var i=new t;return i.boolValue=e.boolValue,i}}]),t}(),aa=i(365);function ra(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function sa(t,e){if(t){if("string"==typeof t)return ra(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ra(t,e):void 0}}function la(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,a=[],r=!0,s=!1;try{for(i=i.call(t);!(r=(n=i.next()).done)&&(a.push(n.value),!e||a.length!==e);r=!0);}catch(t){s=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(s)throw o}}return a}}(t,e)||sa(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ca,ua,da=(0,l.Z)((function t(e,i){(0,s.Z)(this,t),(0,I.Z)(this,"dtg",void 0),(0,I.Z)(this,"minPrice",void 0),this.dtg=e,i&&(this.minPrice=i.minPrice)})),ha=da,pa=(0,l.Z)((function t(e,i,n){(0,s.Z)(this,t),(0,I.Z)(this,"title",void 0),(0,I.Z)(this,"imageUrl",void 0),(0,I.Z)(this,"currency",void 0),(0,I.Z)(this,"base64ProductImage",void 0),this.title=e,this.imageUrl=i,this.currency=n}));function fa(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return ga(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ga(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function ga(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}!function(t){t[t.PRICEDROP=0]="PRICEDROP",t[t.PRICEINCREASE=1]="PRICEINCREASE",t[t.FAIRPRICE=2]="FAIRPRICE"}(ca||(ca={})),function(t){t.NoInsight="NoInsight",t.ShowInsight="ShowInsight"}(ua||(ua={}));var ma=function(){function t(e,i,n,o,a){var r,l,c;(0,s.Z)(this,t),(0,I.Z)(this,"TriggerPriceHistoryAlert",void 0),(0,I.Z)(this,"DailyPrices",[]),(0,I.Z)(this,"ProductDetails",void 0),(0,I.Z)(this,"CurrentPrice",void 0),(0,I.Z)(this,"DailyPriceDropPercentage",void 0),(0,I.Z)(this,"SourceType",void 0),(0,I.Z)(this,"MedianPrice",void 0),(0,I.Z)(this,"ShowPriceHistoryInsight",!0),(0,I.Z)(this,"PriceHistoryInsightType",void 0),this.TriggerPriceHistoryAlert=e.triggerPriceHistoryAlert,this.DailyPriceDropPercentage=null===(r=e.priceHistoryData)||void 0===r?void 0:r.dailyPriceDropPercentage,this.SourceType=null===(l=e.priceHistoryData)||void 0===l?void 0:l.sourceType,this.MedianPrice=null===(c=e.priceHistoryData)||void 0===c?void 0:c.medianPrice,this.DailyPrices=this.getDailyPrices(e,o);var u,d=e.productDetails;(d&&(this.ProductDetails=new pa(d.title,d.imageUrl,d.currency)),this.DailyPrices.length>0)?(this.PriceHistoryInsightType=e.triggerInsight,this.PriceHistoryInsightType&&this.PriceHistoryInsightType===ua.NoInsight||null==(null===(u=e.priceHistoryData)||void 0===u?void 0:u.dailyPriceDropPercentage)?(this.CurrentPrice=i,this.ShowPriceHistoryInsight=!1):this.CurrentPrice=this.DailyPrices[this.DailyPrices.length-1].minPrice):this.CurrentPrice=i;n&&this.ProductDetails&&(this.ProductDetails.base64ProductImage=n)}return(0,l.Z)(t,[{key:"addBase64ProductImage",value:function(t){this.ProductDetails&&(this.ProductDetails.base64ProductImage=t)}},{key:"getDaysDifference",value:function(t,e){return t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),Math.abs(Math.floor((t.getTime()-e.getTime())/864e5))}},{key:"getHoursDifference",value:function(t,e){return t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()),e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()),Math.abs((t.getTime()-e.getTime())/36e5)}},{key:"getPriceHistoryType",value:function(){return this.DailyPriceDropPercentage>2?ca.PRICEDROP:this.DailyPriceDropPercentage<-2?ca.PRICEINCREASE:ca.FAIRPRICE}},{key:"checkLastDate",value:function(t){var e=new Date;return Math.floor(e.getTime()-t.getTime())<0?e:t}},{key:"getDailyPrices",value:function(t,e){var i,n,o,a=[],r=null===(i=t.priceHistoryData)||void 0===i?void 0:i.sourceType;if(null!==(n=t.priceHistoryData)&&void 0!==n&&null!==(o=n.dailyPrice)&&void 0!==o&&o.entries()){var s,l=fa(t.priceHistoryData.dailyPrice.entries());try{for(l.s();!(s=l.n()).done;){var c=la(s.value,2),u=c[0],d=c[1],h=new Date(d.date),p=new Date(h.getTime()+Math.abs(60*h.getTimezoneOffset()*1e3));u===t.priceHistoryData.dailyPrice.length-1&&(p=this.checkLastDate(p));var f=new ha(p,d.priceData);(0===r&&this.isDailyPriceValid(f,e)||0!==r)&&a.push(f)}}catch(t){l.e(t)}finally{l.f()}}return a}},{key:"isDailyPriceValid",value:function(t,e){var i=new Date(2021,4,1),n=new Date(2021,8,24),o={"asos.com":n,"bestbuy.ca":n,"canadiantire.ca":n,"gapcanada.ca":n,"globalindustrial.ca":n,"homedepot.ca":n,"ikea.com":n,"sportchek.ca":n,"target.com":i,"walmart.com":i,"wayfair.ca":n};return!Object.keys(o).find((function(t){return t===e}))||t.dtg>=o[e]}}]),t}(),va=ma,ya=i(657),Ca=i(872),ba=i(154);function Sa(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return xa(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return xa(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function xa(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Ea='button:enabled:not([slot="header-actions"]), textarea, input[type="text"], input[type="password"], div[role="slider"],\n      input[type="radio"]:checked, input[type="checkbox"]:enabled, a[href]:not([slot="header-actions"]):not(#infoIcon),\n      select:not([style*="display: none"]), details, msft-shopping-coupon, msft-shopping-link, msft-product-card,\n      fluent-button:not([slot="header-actions"]), fluent-anchor:not([class="aHeaderContent"]), msft-shopping-recommendation,\n      fluent-accordion, fluent-option, fluent-listbox, div.tipsDiv, msft-shopping-cashback-card, msft-shopping-coupon-new,\n      div#divHomeNotification, msft-shopping-coupon-printable, div#divExclusiveCouponsNotification, msft-micro-feedback-item,\n      msft-shopping-tooltip',Aa=function(){function t(){var e=this;(0,s.Z)(this,t),(0,I.Z)(this,"container",void 0),(0,I.Z)(this,"currentFocusElement",void 0),(0,I.Z)(this,"isEdgeDriver",!1),(0,I.Z)(this,"initialize",(function(t,i){e.container=t,e.isEdgeDriver=i,e.container.addEventListener("keydown",e.trapFocus)})),(0,I.Z)(this,"removeListeners",(function(){e.container.removeEventListener("keydown",e.trapFocus)})),(0,I.Z)(this,"trapFocus",(function(t){if("Tab"===t.key&&!t.ctrlKey&&e.container){var i=Array.prototype.slice.call(e.container.querySelectorAll('fluent-button[slot="header-actions"], a[slot="header-actions"], button[slot="header-actions"], #divPinterestSubTitle[slot="header-content"] fluent-anchor, div#divExclusiveCouponsNotification, msft-shopping-tooltip#header-tooltip')),n=Array.prototype.slice.call(e.container.querySelectorAll(Ea));if(i.push.apply(i,n),e.isEdgeDriver&&(i=i.filter((function(t){return"fluent-accordion"!==t.nodeName&&t.offsetHeight>0}))),i&&i.length>0){var o,a=i[0],r=i[i.length-1],s=Sa(i);try{for(s.s();!(o=s.n()).done;){var l=o.value;l.classList.contains("checkoutButton")&&(r=l)}}catch(t){s.e(t)}finally{s.f()}var c=document.activeElement;if(c){if("divOverlayWrapper"===c.id){var u=c.shadowRoot;u&&(c=u.activeElement)}if(c===a&&t.shiftKey){var d,h,p,f,g=null===(d=r)||void 0===d||null===(h=d.parentElement)||void 0===h?void 0:h.shadowRoot;if("previousCashBackSection"===(null===(p=r.parentElement)||void 0===p?void 0:p.id)){var m,v,y=null===(m=r.parentElement)||void 0===m||null===(v=m.parentElement)||void 0===v?void 0:v.shadowRoot;if(y){var C=y.querySelector("fluent-accordion-item");if(C&&!C.classList.contains("expanded")){var b,S=null===(b=C.shadowRoot)||void 0===b?void 0:b.querySelector("button");S&&(S.focus(),g=null)}}}if(g){var x=g.querySelector("fluent-accordion-item");if(x&&!x.classList.contains("expanded")){var E,A=null===(E=x.shadowRoot)||void 0===E?void 0:E.querySelector("button");A&&A.focus()}else r.focus()}else"previousCashBackSection"!==(null===(f=r.parentElement)||void 0===f?void 0:f.id)&&r.focus();Tt.SO.queueUpdate((function(){t.preventDefault()}))}else c!==r||t.shiftKey||(a.focus(),Tt.SO.queueUpdate((function(){t.preventDefault()})))}}}}))}return(0,l.Z)(t,[{key:"makeFocusOnActiveElement",value:function(t){var e=this;if(this.currentFocusElement!==document.activeElement){var i=t.querySelectorAll(Ea);0!==i.length&&(i.forEach((function(t){document.activeElement!==t||(e.currentFocusElement=t)})),this.currentFocusElement&&this.currentFocusElement.focus())}}}],[{key:"getInstance",value:function(){return null===t.currentInstance&&(t.currentInstance=new t),t.currentInstance}}]),t}();(0,I.Z)(Aa,"currentInstance",null);var Ta=Aa,Ia=i(340);function Da(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return ka(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ka(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function ka(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var wa=new Map;wa.set("en-us","$"),wa.set("en-gb","£"),wa.set("en-in","₹"),wa.set("en-ca","CA$"),wa.set("en-au","AU$"),wa.set("fr-fr","€"),wa.set("it-it","€"),wa.set("es-es","€"),wa.set("de-de","€"),wa.set("ja-jp","¥"),wa.set("pt-br","R$"),wa.set("es-ms","MX$");var Ra=function(){function e(t,i,n,o){(0,s.Z)(this,e),(0,I.Z)(this,"commonAssets",void 0),(0,I.Z)(this,"flyoutData",void 0),(0,I.Z)(this,"pageHandlerModule",void 0),(0,I.Z)(this,"logModule",void 0),this.flyoutData=t,this.pageHandlerModule=i,this.logModule=n,this.commonAssets=o}var i;return(0,l.Z)(e,[{key:"isAndroidBridgeAvailable",value:function(){return!!window.couponsUIWebViewBridge}},{key:"isIOSBridgeAvailable",value:function(){var t=window;return!!t.webkit&&!!t.webkit.messageHandlers}},{key:"createBaseActionButton",value:function(){var t=this.createElement("fluent-button");return t.appearance="accent",t.style.fontSize="16px",t.style.borderRadius="8px",t.className+=" actionsButtonRefresh",t}},{key:"isPinterest",value:function(){var t,e;return null!==(t=void 0!==(null===(e=this.flyoutData.dataStoreModule.PinterestData)||void 0===e?void 0:e.productLink)&&void 0!==this.flyoutData.common.lastCommittedURL&&null!==this.flyoutData.common.lastCommittedURL&&this.flyoutData.common.lastCommittedURL.includes("pinterest.com/pin"))&&void 0!==t&&t}},{key:"styleModulesHeader",value:function(t,e,i){var n=this,o=null,a=i.element,r=i.name;if(t&&(o=t.querySelector("fluent-accordion-item")),o&&t){var s;if(this.flyoutData.common.isPane&&0===e&&r===D.GX.COUPON&&this.flyoutData.common.isCheckoutPage&&null!==(s=this.flyoutData.dataStoreModule.CouponData)&&void 0!==s&&s.IsAutoApplyAvailable)a.expanded=!0;else if(0===e&&a.expanded){var l=!1,c=this.flyoutData.dataStoreModule.CashBackData;Tt.SO.queueUpdate((function(){if(r!==D.GX.PRODUCTHISTORY&&(r!==D.GX.COUPON||null==c||!c.canRenderCashback||null!=c&&c.isCashBackActivated)){var e=t.querySelector("[slot=heading]");if(e){var s;e.id="hiddenHeader";var u=null===(s=o)||void 0===s?void 0:s.shadowRoot;if(u){var d=u.querySelector(".heading");d&&(d.style.display="none")}l=!0;var h=e.parentElement;h&&h.setAttribute("aria-labelledby","hiddenHeader"),o&&(o.style.marginTop="10px")}}l||n.flyoutData.common.isPane&&i.paneTab===D.$k.HOME||(a.accordion=!1,Tt.SO.queueUpdate((function(){var t,e=null===(t=a.shadowRoot)||void 0===t?void 0:t.querySelector(".heading");e&&(e.setAttribute("aria-level","3"),e.style.paddingLeft="12px",e.style.marginLeft="0px",n.flyoutData.common.isPane&&(e.style.fontSize="16px",e.style.lineHeight="24px",e.style.fontWeight="500"))})))}))}if(o.setAttribute("heading-level","3"),this.flyoutData.common.isPane){var u;o.style.fontSize="16px",o.style.lineHeight="24px",o.style.fontWeight="500";var d=null===(u=o)||void 0===u?void 0:u.shadowRoot;if(d){var h=d.querySelector(".heading");h&&(h.style.height="56px",h.style.alignContent="center")}}}}},{key:"hasSocialSelectors",value:function(){var t,e=null===(t=this.flyoutData.dataStoreModule.ApiData)||void 0===t?void 0:t.retailerData;return!!(e&&e.allCheckoutPages&&e.allCheckoutPages.length>0&&e.allCheckoutPages[0].socialSelectors)}},{key:"styleAnchorsRefresh",value:function(){var t=this,e=this.flyoutData.common.shopping.querySelectorAll("fluent-anchor, #remindLater");e&&e.length>0&&e.forEach((function(e){var i,n=null===(i=e.shadowRoot)||void 0===i?void 0:i.querySelector(".content");if(n){var o=t.flyoutData.common.currentTheme===D.Q2.Dark?"linear-gradient(92.78deg, #71FFDD -58.01%, #71FFDD -58.01%, #9CBEFF 44.73%, #D3A6FF 141.23%)":"linear-gradient(92.78deg, #00D4A1 -58.01%, #0048D4 44.73%, #6A00D4 141.23%)";n.setAttribute("style","\n                    background: ".concat(o,";\n                    -webkit-background-clip: text;\n                    -webkit-text-fill-color: transparent;\n                    font-weight: 700;"))}}))}},{key:"createPDPLoadingStateUX",value:function(t,e,i,n){t.id=i,t.accordion=!0,t.expanded=!0;var o=this.createElement("DIV",{style:'\n                display: grid;\n                grid-template-areas:\n                    "img img title title title title"\n                    "img img subTitle subTitle subTitle subTitle"\n                    "content1 content1 content1 content1 content1 content1"\n                    "content2 content2 content2 content2 content2 content2"\n                    "content3 content3 content3 content3 content3 content3";\n                grid-gap: 20px;\n                padding: 0px 2px;\n            '});o.id=e;var a=1;this.flyoutData.common.currentTheme===D.Q2.Dark&&(a=.08);var r=this.createElement("DIV",{style:"\n                grid-area: img;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 100px;\n                opacity: ".concat(a,";\n            ")}),s=this.createElement("DIV",{style:"\n                grid-area: title;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 20px;\n                margin-top: 20px;\n                margin-right: 50px;\n                opacity: ".concat(a,";\n            ")}),l=this.createElement("DIV",{style:"\n                grid-area: subTitle;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 20px;\n                margin-bottom: 20px;\n                margin-right: 50px;\n                opacity: ".concat(a,";\n            ")}),c=this.createElement("DIV",{style:"\n                grid-area: content1;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 30px;\n                opacity: ".concat(a,";\n            ")}),u=this.createElement("DIV",{style:"\n                grid-area: content2;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 30px;\n                opacity: ".concat(a,";\n            ")}),d=this.createElement("DIV",{style:"\n                grid-area: content3;\n                border-radius: 4px;\n                background-color: #F1F1F1;\n                height: 30px;\n                opacity: ".concat(a,";\n            ")});o.appendChild(r),o.appendChild(s),o.appendChild(l),o.appendChild(c),o.appendChild(u),o.appendChild(d),t.appendChild(o),setTimeout((function(){var t=document.querySelector("#".concat(e));if(t){var i;null===(i=t.parentElement)||void 0===i||i.remove();var o=new CustomEvent(Ia.e1.PDPRemoved,{detail:{moduleName:e.includes("PH")?D.GX.PRICEHISTORY:D.GX.PRICECOMPARISON}});n.dispatchEvent(o)}}),7e3)}},{key:"addImageSrc",value:function(t,e){var i=new Image;i.src=e,i.addEventListener("load",(function(){t.src=i.src}))}},{key:"styleElementsUXRefresh",value:function(t){var e,i=null===(e=t.element.shadowRoot)||void 0===e?void 0:e.querySelector("fluent-accordion-item");if(i){var n,o,a=null===(n=i.shadowRoot)||void 0===n?void 0:n.querySelector(".button");a&&(a.style.paddingLeft="12px");var r=null===(o=i.shadowRoot)||void 0===o?void 0:o.querySelector(".icon");r&&(r.style.paddingRight="12px")}this.styleAnchorsRefresh()}},{key:"sendCTRLog",value:function(t,e,i,n,r){if("MSFT-EDGE-SHOPPING-SECTION"===t.element.nodeName)if(!t.element.hasAttribute("accordion")||t.element.hasAttribute("expanded")||0===e)this.recordContentViewed(t.name,i,r,0===e,!1);else{t.element.addEventListener("click",(function e(){if(t.element&&!t.element.hasAttribute("expanded")){var n=c(t.name,i,r,!0),d=u(t.name);if(n){s.RecordAsContentViewed(n);var h=new o.Z(a.xu.ModuleViewed,void 0,void 0,void 0,d);l.LogInfoEvent(a.R.EdgeFlyoutStatus,"".concat(n," expanded"),h,r)}t.element&&t.element.removeEventListener("click",e)}}));var s=this.pageHandlerModule,l=this.logModule,c=this.setContentViewed.bind(this),u=this.getViewedContent.bind(this)}else this.recordContentViewed(t.name,i,r,0===e,!1);if(this.isPinterest()){var d=new o.Z(a.xu.ShownOnPinterest);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"Module on top ".concat(n),d)}}},{key:"handleFlyoutFocus",value:function(t,e){if(this.flyoutData.common.currentDevice===D.AS.Desktop&&(this.flyoutData.common.openedWith===D.Te.Keyboard||this.flyoutData.common.isPane)&&e){var i=e.querySelectorAll("[slot=actions]");if(i&&i.length>0)if("DIV"===i[0].nodeName){var n=i[0].querySelectorAll(Ea);n&&n.length>0&&n[0].focus()}else i[0].focus();else if(t&&t.length>0){var o,a=Da(t);try{for(a.s();!(o=a.n()).done;){var r=o.value.element.querySelectorAll(Ea);if(r&&r.length>0){r[0].focus();break}}}catch(t){a.e(t)}finally{a.f()}}}}},{key:"addCommonStyles",value:function(t){try{var e=document.querySelector("fluent-design-system-provider");e&&(this.flyoutData.common.currentTheme===D.Q2.Light?(e.setAttribute("fill-color","#FFFFFF"),cn.setValueFor(e,Ri.LightMode)):(e.setAttribute("fill-color","#3b3b3b"),cn.setValueFor(e,.23)),this.flyoutData.common.currentDirection===D.m5.RTL?e.style.direction="rtl":e.style.direction="ltr",e.setAttribute("aria-label",this.flyoutData.strings.commonFixedTitle));var i=document.querySelector("#divContentWrapper");i&&(this.applyStyles(i,t.getStyles()),this.flyoutData.experimentData.isExperimentActive(xt.H.showPaymentOptions)&&i.classList.add("ms-edge-shopping-650"),this.applyStyles(i,t.getStylesRefresh()))}catch(t){var n=new o.Z(a.xu.OnErrorInvoked);this.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"error adding common styles ".concat(t),n)}}},{key:"createElement",value:function(t,e,i){var n=document.createElement(t);if(e)for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);return i&&(n.innerText=i),n}},{key:"createCommonListStructure",value:function(t,e,i,n,o,a,r){var s=this;this.flyoutData.common.currentDevice===D.AS.Desktop?t.accordion=!0:t.accordion=!1,t.title=e,t.expanded=!1;var l=o(i);if(i&&i.length>l){var c,u=document.createElement("fluent-button");if(u.slot="action",u.className+="action btnSeeMore",u.appearance="lightweight",u.style.backgroundColor="transparent",u.style.padding="0px",i.length-l>20?u.textContent=this.replaceValueInKey("sectionSeeMore",this.flyoutData.strings.sectionSeeMore,"".concat(20,"+")):u.textContent=this.replaceValueInKey("sectionSeeMore",this.flyoutData.strings.sectionSeeMore,(i.length-l).toString()),this.flyoutData.common.currentTheme===D.Q2.Dark?u.style.color="#FFFFFF":u.style.color="#666666",n===D.GX.COUPON||n===D.GX.RECOMMENDATIONS||n===D.GX.GROCERY_COUPON||n===D.GX.PRINTABLE_COUPON||n===D.GX.EXCLUSIVECOUPONS||n===D.GX.CASHBACK||n===D.GX.GROCERY_CASHBACK||this.flyoutData.common.isPane)t.appendChild(u);else{var d=this.flyoutData.common.currentTheme===D.Q2.Dark?"linear-gradient(265.08deg, rgba(36, 255, 0, 0.06) -6.71%, rgba(0, 210, 255, 0.06) 38.87%, rgba(255, 188, 125, 0.06) 93.88%)":"linear-gradient(90deg, #FFFBF2 0%, #EEFCFF 53.12%, #F5F9FF 100%)";(c=this.createElement("DIV",{style:"\n                    background: ".concat(d,";\n                    height: 40px;\n                    padding-left: 12px;\n                    cursor: pointer;\n                    display: flex;\n                    align-items: center;\n                    border-top: 1px solid rgb(236, 236, 236);\n                ")})).className="divSeeMore",c.appendChild(u),t.appendChild(c),c&&c.addEventListener("click",(function(e){s.seeMoreClickHandler(e,t,a,c,i,r)}))}this.flyoutData.common.isPane&&(u.style.marginBottom="20px"),u&&u.addEventListener("click",(function(e){c||s.seeMoreClickHandler(e,t,a,u,i,r)}))}else t.style.marginBottom="10px"}},{key:"populateSingleChildHtml",value:function(t,e,i){var n=window.trustedTypes.emptyHTML;t.innerHTML=n;var o=e.split(/\$\d/);if(o.length>0&&(o[0]=this.replaceStringsPlaceholders(o[0]),t.textContent=o[0],t.appendChild(i)),o.length>1&&o[1]){o[1]=this.replaceStringsPlaceholders(o[1]);var a=document.createTextNode(o[1]);t.appendChild(a)}}},{key:"populateMultipleChildrenHTML",value:function(t,e){var i=window.trustedTypes.emptyHTML;t.innerHTML=i;for(var n=e.split(/\$\d/),o=n.length,a=arguments.length,r=new Array(a>2?a-2:0),s=2;s<a;s++)r[s-2]=arguments[s];for(var l=0;l<o;l++){if(n[l]=this.replaceStringsPlaceholders(n[l]),0===l)t.textContent=n[l];else{var c=document.createTextNode(n[l]);t.appendChild(c)}l!==o-1&&t.appendChild(r[l])}}},{key:"replaceElementInKey",value:function(t,e,i){var n=e.split("*br*");if(n&&n.length>1){if(n[0].includes("$"))this.populateSingleChildHtml(t,n[0],i);else{var o=this.createElement("P",{style:"margin: 0px; display: inline-block"},n[0]);t.appendChild(o)}var a=this.createElement("BR");if(t.appendChild(a),n[1].includes("$")){var r=this.createElement("DIV");this.populateSingleChildHtml(r,n[1],i),t.appendChild(r)}else{var s=this.createElement("P",{style:"margin: 0px; display: inline-block"},n[1]);t.appendChild(s)}}else this.populateSingleChildHtml(t,e,i)}},{key:"replaceValueInKey",value:function(t,e){for(var i=arguments.length,n=new Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];var a="",r=Array.prototype.slice.call(arguments);return r=r.slice(1),e?a=e=e.replace(/\$(.|$|\n)/g,(function(t){return void 0!==r[t[1]]?"$$"===t?"$":r[t[1]]:"$2"})):a}},{key:"addFavIconSrc",value:function(t,e,i){var n=this.getFavIconSrc(i),o=!0;t.style.maxWidth="16px",t.slot="icon",t.setAttribute("aria-hidden","true"),t.addEventListener("error",(function(){o=!1,t.remove()})),n?t.src=n:o=!1,o&&e.appendChild(t)}},{key:"replaceStringsPlaceholders",value:function(t,e){e||(e="en-us");var i=wa.get(e);return i||(i="$"),t.replace(D.iM.currency,i)}},{key:"getCurrency",value:function(t){var e=wa.get(t);return e||""}},{key:"trapFlyoutFocusMac",value:function(){this.flyoutData.common.isPane||Ta.getInstance().initialize(this.flyoutData.common.shopping,!1)}},{key:"applyStyles",value:function(t,e){if(t){var i=this.createElement("STYLE");i.textContent=e,i.type="text/css",i.rel="stylesheet",t.appendChild(i)}}},{key:"addSectionSeparator",value:function(t){var e=this.createElement("HR",{className:"sectionSeparator"});e.setAttribute("aria-hidden","true"),t.appendChild(e)}},{key:"createCookieConsent",value:function(){var t=this,e=this.createElement("DIV",{className:"divCookies",style:"margin: 10px 10px 12px; text-align: left;line-height: 16px; font-size: 12px;"}),i=this.createElement("P",{className:"txtSmall"});if(i.style.display="inline",i.style.fontSize="12px",i.textContent=this.replaceValueInKey("privacyConsent",this.flyoutData.strings.privacyConsent,""),this.flyoutData.dataLoader.IsServerData()){i.textContent=this.replaceValueInKey("privacyConsent",this.flyoutData.strings.privacyConsent,"");var n=document.createElement("fluent-anchor");n.id="thirdPartyConsent",n.setAttribute("href","#"),n.className+=" txtSmall",n.style.fontSize="12px",n.style.verticalAlign="bottom",n.textContent=this.flyoutData.strings.thirdPartCookiesText,n.setAttribute("appearance","lightweight"),n.style.display="inline",this.populateSingleChildHtml(i,this.flyoutData.strings.privacyConsentNew,n),this.flyoutData.dataLoader.IsServerData()&&n&&n.addEventListener("click",(function(){t.pageHandlerModule.NavigateToPrivacyStatement()}))}var o=document.createElement("fluent-anchor");o.id="aPrivacy",o.setAttribute("href","#"),o.className+=" txtSmall",o.style.fontSize="12px",o.textContent=this.flyoutData.strings.commonMicrosoftPolicy,o.setAttribute("appearance","lightweight"),o.style.display="inline";var a=this.createElement("P");return a.style.display="inline",a.style.fontSize="12px",a.textContent=".",i.appendChild(o),i.appendChild(a),e.appendChild(i),o&&o.addEventListener("click",(function(){t.pageHandlerModule.NavigateToPrivacyStatement()})),e}},{key:"styleModules",value:function(t,e){var i=t.element.shadowRoot;if(i){this.styleModulesHeader(i,e,t);var n=i.querySelector(".action");n&&(n.style.marginInlineStart="0px",n.style.height="auto")}}},{key:"toFixedSafe",value:function(t,e){return t&&t.toFixed?t.toFixed(e):""}},{key:"formatPrice",value:function(t){try{return(t%1!=0?new Intl.NumberFormat(this.flyoutData.common.pageLocale,{minimumFractionDigits:2}).format(t):new Intl.NumberFormat(this.flyoutData.common.pageLocale).format(t))||t.toFixed(2)}catch(e){return t.toFixed(2)}}},{key:"hideModule",value:function(t,e){return this.flyoutData.experimentData.isExperimentActive(xt.H.compressNotifications)&&this.flyoutData.common.openedWith===D.Te.Auto&&t>0&&!this.flyoutData.common.seeInfoFromPCNotification&&!e.moduleInterface.ShowAlways()}},{key:"appendNewModuleToFlyout",value:function(t){var e=this.flyoutData.common.shopping.querySelectorAll("msft-edge-shopping-section"),i=!1;if(e&&e.length>0)try{if(1===e.length){var n=this.createElement("HR",{className:"sectionSeparator"});n.setAttribute("aria-hidden","true"),e[0].nextSibling?(this.flyoutData.common.shopping.insertBefore(n,e[0].nextSibling),this.flyoutData.common.shopping.insertBefore(t.element,n.nextSibling),i=!0):(this.addSectionSeparator(this.flyoutData.common.shopping),this.flyoutData.common.shopping.appendChild(t.element),i=!0)}else for(var o=1;o<e.length;o++){var a=e[o];if(null!==a.getAttribute("accordion")){var r,s=this.createElement("HR",{className:"sectionSeparator"});s.setAttribute("aria-hidden","true"),"HR"===(null===(r=a.previousSibling)||void 0===r?void 0:r.nodeName)?(this.flyoutData.common.shopping.insertBefore(s,a.previousSibling),this.flyoutData.common.shopping.insertBefore(t.element,a.previousSibling)):(this.flyoutData.common.shopping.insertBefore(s,a),this.flyoutData.common.shopping.insertBefore(t.element,a)),i=!0}}}catch(e){this.addSectionSeparator(this.flyoutData.common.shopping),this.flyoutData.common.shopping.appendChild(t.element),i=!0}else{var l=this.flyoutData.common.shopping.querySelector("#feedbackDiv");if(l){var c=this.createElement("HR",{className:"sectionSeparator"});c.setAttribute("aria-hidden","true"),this.flyoutData.common.shopping.insertBefore(c,l),this.flyoutData.common.shopping.insertBefore(t.element,l)}else this.addSectionSeparator(this.flyoutData.common.shopping),this.flyoutData.common.shopping.appendChild(t.element),i=!0}if(!i){var u=this.flyoutData.common.shopping.querySelector("#feedbackDiv");if(u){var d=this.createElement("HR",{className:"sectionSeparator"});d.setAttribute("aria-hidden","true"),this.flyoutData.common.shopping.insertBefore(d,u),this.flyoutData.common.shopping.insertBefore(t.element,u)}else this.addSectionSeparator(this.flyoutData.common.shopping),this.flyoutData.common.shopping.appendChild(t.element)}}},{key:"shouldRenderSmallNotification",value:function(){return!(!this.flyoutData.experimentData.isExperimentActive(xt.H.smallNotification)||this.flyoutData.common.openedWith!==D.Te.Auto||this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_COUPONS_CLIPPING&&this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_COUPONS_CHECKOUT&&this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_PRICE_HISTORY&&this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_LOWER_PRICE_FOUND&&this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_REBATES_ORGANIC&&this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_REBATES_CHECKOUT)}},{key:"dismissNotificationTimeOut",value:function(){var t=this,e=setTimeout((function(){t.pageHandlerModule.DismissPopup()}),3e3);this.flyoutData.common.shopping.addEventListener("mouseover",(function(){clearTimeout(e)}))}},{key:"setContentViewed",value:function(t,e,i,n,r){var s,l,c,u,d,h,p;if(!t)return null;switch(t){case D.GX.COUPON:return e?ba.r.COUPONS_AUTO_APPLY:ba.r.COUPONS_AVAILABLE;case D.GX.CASHBACK:return null!==(s=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==s&&null!==(l=s.userRebatesResponse)&&void 0!==l&&l.isRebatesUser||!this.flyoutData.common.isRebatesEnabled||!this.flyoutData.experimentData.isExperimentActive(xt.H.signinRebates)?null===(c=this.flyoutData.dataStoreModule.CashBackData)||void 0===c||null===(u=c.userRebatesResponse)||void 0===u||!u.isRebatesUser||null!==(d=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==d&&d.isCashBackActivated?ba.r.REBATES_BING_CONFIRMATION:ba.r.REBATES_ACTIVATE_CASHBACK:ba.r.ACTIVATE_CASHBACK_NEW;case D.GX.COUPONCLIPPING:return ba.r.COUPONS_CLIPPING;case D.GX.DEALS:return ba.r.DEALS;case D.GX.RECOMMENDATIONS:return ba.r.RECOMMENDATIONS;case D.GX.SIMILARSELLERS:return ba.r.OTHER_SELLER;case D.GX.PRODUCTHISTORY:return ba.r.PRODUCT_HISTORY;case D.GX.TIPS:return ba.r.TIPS;case D.GX.TRACKING_CONFIRMATION:return ba.r.PACKAGE_TRACKING_OPT_IN;case D.GX.ORDERSTATUSTRACKING:return ba.r.PACKAGE_TRACKING_STATUS_VIEW;case D.GX.PRICECOMPARISON:return null!==(h=this.flyoutData.dataStoreModule.PriceComparisonData)&&void 0!==h&&h.shouldBeInPolePosition?ba.r.PRICE_COMPARE_LOWER_PRICES:ba.r.PRICE_COMPARE_BEST_PRICE;case D.GX.PRICEHISTORY:var f=null===(p=this.flyoutData.dataStoreModule.PriceHistoryData)||void 0===p?void 0:p.getPriceHistoryType();return f===ca.PRICEDROP?ba.r.PRICE_HISTORY_DROP:f===ca.FAIRPRICE?ba.r.PRICE_HISTORY_STABLE:ba.r.PRICE_HISTORY_INCREASE;case D.GX.RATINGSANDREVIEWS:var g=this.flyoutData.dataStoreModule.RatingsAndReviewsData;if(null!=g&&g.videos&&g.videos.length>0){if(g.expertReviews&&g.expertReviews.length>0){this.pageHandlerModule.RecordAsContentViewed(ba.r.PROFESSIONAL_REVIEWS);var m=new o.Z(a.xu.ModuleViewed),v="".concat(ba.r.PROFESSIONAL_REVIEWS);n?v+=" expanded":r&&(v+=" pole position"),this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,v,m,i)}return ba.r.VIDEO_REVIEWS}if(g&&g.expertReviews&&g.expertReviews.length>0){if(null!=g&&g.videos&&g.videos.length>0){this.pageHandlerModule.RecordAsContentViewed(ba.r.VIDEO_REVIEWS);var y=new o.Z(a.xu.ModuleViewed),C="".concat(ba.r.VIDEO_REVIEWS);n?C+=" expanded":r&&(C+=" pole position"),this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,C,y,i)}return ba.r.PROFESSIONAL_REVIEWS}case D.GX.CHECKOUTAUTOFILL:return ba.r.EXPRESS_CHECKOUT;case D.GX.SIMILARSELLERS:return ba.r.OTHER_SELLER;case D.GX.REWARD:return ba.r.ACTIVATE_REWARDS_NEW;case D.GX.ATTAINABLECOUPONS:return ba.r.ATTAINABLE_COUPONS;default:return null}}},{key:"recordContentViewed",value:function(t,e,i,n,r){var s=this.setContentViewed(t,e,i,!1,n),l=this.getViewedContent(t),c="".concat(t),u=new o.Z(a.xu.ModuleViewed,void 0,void 0,void 0,l);s&&(this.pageHandlerModule.RecordAsContentViewed(s),c="".concat(s),r?c+=" notification":n&&(c+=" pole position")),this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,c,u,i)}},{key:"getViewedContent",value:function(t){if(t)try{return t===D.GX.SIMILARSELLERS&&this.flyoutData.dataStoreModule.SimilarSellerData?JSON.stringify(this.flyoutData.dataStoreModule.SimilarSellerData):void 0}catch(t){return}}},{key:"checkLocalStorageTimeout",value:function(t,e){var i=this.loadLocalStorageAsJSON(e),n=new Date,o=i[t],a=o?new Date(o.timestamp):null,r=a?n.getTime()-a.getTime():0;return Math.floor(r/1e3/60/60/24)>0&&(i[t]={},yt(e,JSON.stringify(i)),!0)}},{key:"seeMoreClickHandler",value:function(t,e,i,n,o,a){var r=this.isKeyboardClick(t);i(e,!0,r,o,a),n.remove(),Tt.SO.queueUpdate((function(){var t=e.shadowRoot;if(t){var i=t.querySelector(".action");i&&(i.style.display="none")}}))}},{key:"isKeyboardClick",value:function(t){return!(!t||0!==t.offsetX||0!==t.offsetY)}},{key:"createRemindLaterButton",value:function(){var t=this,e=this.createElement("fluent-button");return e.className+="action aOfferDetails",e.appearance="lightweight",this.flyoutData.experimentData.isExperimentActive(xt.H.remindLaterFooter)?(e.id="remindLaterFooter",this.flyoutData.common.currentTheme===D.Q2.Dark?e.style.color="#ffffff":e.style.color="#000000",e.style.alignSelf="start"):(e.style.fontSize="14px",e.id="remindLater",e.style.alignSelf="center"),e.style.lineHeight="16px",e.textContent=this.flyoutData.strings.remindLater,e.style.display="flex",e.addEventListener("click",(function(){var e=new na.Z(a.$S.RemindLater);t.pageHandlerModule.RecordAsUserAction(Ca.bS.FLYOUT_SNOOZED),t.logModule.LogInfoEvent(a.R.ButtonClick,"Flyout Snoozed (Remind Later)",e,ya.g.CouponImpressionId),t.pageHandlerModule.AutoShowForAllFeatures(!1),t.pageHandlerModule.DismissPopup()})),e}},{key:"CapitalizeString",value:function(t){if(t){var e="";return t.length>0&&(e+=t[0].toUpperCase()+t.substring(1)),e}return t}},{key:"CapitalizeWordsInString",value:function(t){if(t){var e="",i=t.split(" "),n=["or","of","and","a","an"];return i.forEach((function(t){t.length>0&&(n.includes(t)?e+=t+" ":e+=t[0].toUpperCase()+t.substring(1).toLowerCase()+" ")})),e.substring(0,e.length-1)}return t}},{key:"cleanInput",value:function(t){try{return t.replace(/[^\w\.@\-\%, !]/,"")}catch(t){return""}}},{key:"handleToolTipInteraction",value:function(t,e){t.addEventListener("mouseenter",(function(){e&&(e.visible=!0)})),t.addEventListener("mouseleave",(function(){e&&(e.visible=!1)})),t.addEventListener("focus",(function(){e&&(e.visible=!0)})),t.addEventListener("blur",(function(){e&&(e.visible=!1)}))}},{key:"shouldDisplayTooltipSide",value:function(t,e,i){var n=t.getBoundingClientRect().bottom+i>window.innerHeight;return e.className=n?"vertical":"horizontal",n}},{key:"sendFlyoutUpdateEvent",value:function(t,e){Tt.SO.queueUpdate((function(){var i=new CustomEvent(Ia.e1.onDataUpdate,{detail:{moduleType:e}});t.dispatchEvent(i)}))}},{key:"loadLocalStorageAsJSON",value:function(t){try{var e=vt(t);return e&&"undefined"!==e?JSON.parse(e):{}}catch(t){return{}}}},{key:"setStorageBoolean",value:function(t,e){var i=new oa;i.boolValue=e,this.pageHandlerModule.SetStorageValue(t,i)}},{key:"setStorageString",value:function(t,e){var i=new aa.Z;i.stringValue=e,this.pageHandlerModule.SetStorageValue(t,i)}},{key:"clearDomainMappedStringStorage",value:(i=(0,t.Z)(n().mark((function t(e,i){var o,a,r,s,l,c,u,d,h;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.flyoutData.common.domain,!(r=this.flyoutData.dataLoader.GetLoadTimeDataValue("storage",void 0))){t.next=8;break}(l=new aa.Z).stringValue=JSON.stringify(r[e]),s=l,t.next=12;break;case 8:if(!i){t.next=12;break}return t.next=11,this.pageHandlerModule.GetStorageValue(e);case 11:s=t.sent;case 12:if(null!==(o=s)&&void 0!==o&&o.stringValue)try{d=null!==(c=JSON.parse(s.stringValue))&&void 0!==c?c:"{}",(h=null!==(u=JSON.parse(d))&&void 0!==u?u:{})[a]="",this.setStorageString(e,JSON.stringify(h))}catch(t){}case 13:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"getFavIconSrc",value:function(t){return t?(t=(t=t.replace("http://","")).replace("https://",""),this.flyoutData.dataLoader.IsServerData()?"https://edge.microsoft.com/favicon/v1/?client=chrome_desktop&nfrp=2&check_seen=true&size=16&fallback_opts=TYPE,SIZE,URL&url=http://".concat(t,"&origin=shoppingv2"):this.flyoutData.common.currentDevice===D.AS.Mobile?"https://".concat(t,"/favicon.ico"):"edge://favicon2/?size=16&scale_factor=1x&page_url=http://".concat(t,"&allow_google_server_fallback=1")):""}}]),e}(),Oa=Ra,Pa=function(){function t(e,i,n,o){(0,s.Z)(this,t),(0,I.Z)(this,"pageHandlerModule",void 0),(0,I.Z)(this,"logModule",void 0),(0,I.Z)(this,"viewModulesUtilities",void 0),(0,I.Z)(this,"commonAssets",void 0),this.pageHandlerModule=e,this.logModule=i,this.viewModulesUtilities=new Oa(n,e,i,o)}return(0,l.Z)(t,null,[{key:"getErrorString",value:function(t){var e,i,n,o=null!==(e=null==t?void 0:t.name)&&void 0!==e?e:"",a=null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"",r=null!==(n=null==t?void 0:t.stack)&&void 0!==n?n:"";return"".concat(o," ").concat(a," ").concat(r)}}]),t}(),Ma=Pa,Na=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"nullValue",void 0)}return(0,l.Z)(t,null,[{key:"Create",value:function(e){var i=new t;return i.nullValue=e.nullValue,i}}]),t}(),La=function(){function t(e,i,n,o,a,r,l,c,u,d){var h,p,f,g,m,v,y,C,b,S,x,E,A,T,D,k,w,R,O,P,M,N,L;((0,s.Z)(this,t),(0,I.Z)(this,"highestCashBackCategory",void 0),(0,I.Z)(this,"userRebatesResponse",void 0),(0,I.Z)(this,"merchantName",void 0),(0,I.Z)(this,"image",void 0),(0,I.Z)(this,"merchantId",void 0),(0,I.Z)(this,"merchantFullName",void 0),(0,I.Z)(this,"merchantUri",void 0),(0,I.Z)(this,"affiliateNetwork",void 0),(0,I.Z)(this,"IsRebatesSupportedDomain",void 0),(0,I.Z)(this,"isSignInSupportedDomain",void 0),(0,I.Z)(this,"isCashBackActivated",void 0),(0,I.Z)(this,"isConfirmationPage",void 0),(0,I.Z)(this,"isTurnedOff",void 0),(0,I.Z)(this,"personalizedCashback",void 0),(0,I.Z)(this,"shouldRenderCashBackNotification",void 0),(0,I.Z)(this,"isPersonalizedCashback",void 0),(0,I.Z)(this,"isSignInSupportedDomainCashBack",void 0),(0,I.Z)(this,"popupOrigination",void 0),(0,I.Z)(this,"activateRebatesStatus",void 0),(0,I.Z)(this,"adsCashback",void 0),(0,I.Z)(this,"isEdgeSignedInMsa",void 0),(0,I.Z)(this,"canRenderCashback",void 0),(0,I.Z)(this,"experiments",void 0),e)&&(this.highestCashBackCategory={category:null===(h=e.highestCashbackCategory)||void 0===h?void 0:h.category,commissionType:null===(p=e.highestCashbackCategory)||void 0===p?void 0:p.commissionType,commissionValue:null===(f=e.highestCashbackCategory)||void 0===f?void 0:f.commissionValue,priority:null===(g=e.highestCashbackCategory)||void 0===g?void 0:g.priority},this.userRebatesResponse={cashbackAvailable:null===(m=e.userRebateResponse)||void 0===m?void 0:m.cashbackAvailable,isRebatesUser:null!==(v=null===(y=e.userRebateResponse)||void 0===y?void 0:y.isRebatesUser)&&void 0!==v&&v,latestCashbackApproved:null===(C=e.userRebateResponse)||void 0===C?void 0:C.latestCashbackApproved,latestCashbackApprovedCurrency:null===(b=e.userRebateResponse)||void 0===b?void 0:b.latestCashbackApprovedCurrency,latestOrderDate:null===(S=e.userRebateResponse)||void 0===S?void 0:S.latestOrderDate,latestOrderMerchantName:null===(x=e.userRebateResponse)||void 0===x?void 0:x.latestOrderMerchantName,latestOrderMerchantUrl:null===(E=e.userRebateResponse)||void 0===E?void 0:E.latestOrderMerchantUrl,lifetimeBalance:null===(A=e.userRebateResponse)||void 0===A?void 0:A.lifetimeBalance},this.isSignInSupportedDomain=e.isSignInSupportedDomain,this.merchantName=e.merchantName,this.image=e.image,this.merchantId=e.merchantId,this.merchantFullName=e.merchantFullName,this.merchantUri=e.merchantUri,this.affiliateNetwork=e.affiliateNetwork,this.IsRebatesSupportedDomain=null!==(T=e.IsRebatesSupportedDomain)&&void 0!==T?T:null);i&&(this.personalizedCashback={commissionType:null===(D=i.personalizedCashback)||void 0===D?void 0:D.commissionType,commissionValue:null===(k=i.personalizedCashback)||void 0===k?void 0:k.commissionValue,imageUrl:null===(w=i.personalizedCashback)||void 0===w?void 0:w.imageUrl,isAdClick:null===(R=i.personalizedCashback)||void 0===R?void 0:R.isAdClick,offerId:null===(O=i.personalizedCashback)||void 0===O?void 0:O.offerId,productUrl:null===(P=i.personalizedCashback)||void 0===P?void 0:P.productUrl,rGuid:null===(M=i.personalizedCashback)||void 0===M?void 0:M.rGuid,scope:null===(N=i.personalizedCashback)||void 0===N?void 0:N.scope},this.adsCashback=null===(L=i.personalizedCashback)||void 0===L?void 0:L.adsCashback);this.isCashBackActivated=null!=n&&n,this.isConfirmationPage=null!=o&&o,this.isTurnedOff=null!=a&&a,this.experiments=r,this.popupOrigination=c,this.activateRebatesStatus=u,this.shouldRenderCashBackNotification=this.ShouldRenderCashBackNotification(this,l),this.isPersonalizedCashback=this.IsPersonalizedCashback(this),this.isSignInSupportedDomainCashBack=this.IsSignInSupportedDomainCashBack(this,l),this.canRenderCashback=this.CanRenderCashback(this,d)}return(0,l.Z)(t,[{key:"CanRenderCashback",value:function(t,e){return!!e&&(!!(t&&t.userRebatesResponse&&t.userRebatesResponse.isRebatesUser&&(null===t.IsRebatesSupportedDomain||!0===t.IsRebatesSupportedDomain)&&t.highestCashBackCategory&&t.highestCashBackCategory.commissionValue&&t.highestCashBackCategory.commissionType&&t.highestCashBackCategory.category&&t.merchantFullName)||(!(!t||!t.isPersonalizedCashback)||!(!t||!t.isSignInSupportedDomainCashBack)))}},{key:"IsSignInSupportedDomainCashBack",value:function(t,e){var i,n,o,a,r,s;return!(!(t&&t.isSignInSupportedDomain&&(null===(i=t.userRebatesResponse)||void 0===i||!i.isRebatesUser)&&this.experiments.isExperimentActive(xt.H.signinRebates)&&null!==(n=t.personalizedCashback)&&void 0!==n&&n.commissionType&&null!==(o=t.personalizedCashback)&&void 0!==o&&o.commissionValue&&null!==(a=t.personalizedCashback)&&void 0!==a&&a.scope&&null!==(r=t.personalizedCashback)&&void 0!==r&&r.offerId)||this.popupOrigination!==St.s.AUTO_SHOW_REBATES_SWITCHED_TO_MSA&&this.popupOrigination!==St.s.AUTO_SHOW_PERSONALIZED_CASHBACK&&e===D.Te.Auto)||t&&t.isSignInSupportedDomain&&!(null!==(s=t.userRebatesResponse)&&void 0!==s&&s.isRebatesUser)&&this.experiments.isExperimentActive(xt.H.signinRebates)&&t.highestCashBackCategory&&t.highestCashBackCategory.commissionValue&&t.highestCashBackCategory.commissionType&&t.highestCashBackCategory.category&&t.merchantFullName&&(!t.isCashBackActivated||this.popupOrigination===St.s.AUTO_SHOW_REBATES_SWITCHED_TO_MSA)}},{key:"IsPersonalizedCashback",value:function(t){var e;return null!==(e=t&&t.personalizedCashback&&t.personalizedCashback.commissionValue)&&void 0!==e&&e}},{key:"ShouldRenderCashBackNotification",value:function(t,e){return!(!t.isConfirmationPage&&!t.isTurnedOff)||!(!t||e!==D.Te.Auto||this.popupOrigination!==St.s.AUTO_SHOW_REBATES_ORGANIC&&this.popupOrigination!==St.s.AUTO_SHOW_REBATES)}}]),t}(),_a=(0,l.Z)((function t(e,i,n,o,a){(0,s.Z)(this,t),(0,I.Z)(this,"Profiles",void 0),(0,I.Z)(this,"Payments",void 0),(0,I.Z)(this,"shouldRenderCheckoutAutofill",void 0),(0,I.Z)(this,"AllProfiles",void 0),(0,I.Z)(this,"AllPayments",void 0),this.AllProfiles=[],this.AllPayments=[],this.Profiles=[],this.Payments=[],e&&(this.AllProfiles=e),i&&(this.AllPayments=i),n&&(this.Profiles=n),o&&(this.Payments=o),this.shouldRenderCheckoutAutofill=a})),Fa=(0,l.Z)((function t(e,i){(0,s.Z)(this,t),(0,I.Z)(this,"couponCode",void 0),(0,I.Z)(this,"title",void 0),(0,I.Z)(this,"attribution",void 0),(0,I.Z)(this,"isStackable",void 0),(0,I.Z)(this,"successRate",void 0),(0,I.Z)(this,"minimumPurchase",void 0),(0,I.Z)(this,"shortHeader",void 0),(0,I.Z)(this,"calculatedCutoffPrice",void 0),this.couponCode=null==e?void 0:e.couponCode,this.title=null==e?void 0:e.title,this.attribution=null==e?void 0:e.attribution,i===D.AS.Mobile?this.isStackable=!0:this.isStackable=null==e?void 0:e.isStackable,this.successRate=null==e?void 0:e.successRate,this.minimumPurchase=null==e?void 0:e.minimumPurchase,this.shortHeader=null==e?void 0:e.shortHeader,this.calculatedCutoffPrice=null==e?void 0:e.calculatedCutoffPrice})),Ha=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"offerUrl",void 0),(0,I.Z)(this,"headerText",void 0),(0,I.Z)(this,"id",void 0)}return(0,l.Z)(t,null,[{key:"Create",value:function(e){var i=new t;return i.offerUrl=e.offerUrl,i.headerText=e.headerText,i.id=e.id,i}}]),t}(),Za=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"title",void 0),(0,I.Z)(this,"offerUrl",void 0),(0,I.Z)(this,"imageUrl",void 0),(0,I.Z)(this,"originalPrice",void 0),(0,I.Z)(this,"newPrice",void 0),(0,I.Z)(this,"discountPercentage",void 0),(0,I.Z)(this,"shippingText",void 0),(0,I.Z)(this,"sellerName",void 0),(0,I.Z)(this,"id",void 0),(0,I.Z)(this,"priceDropPercentage",void 0),(0,I.Z)(this,"isTrendingOffer",void 0)}return(0,l.Z)(t,null,[{key:"Create",value:function(e){var i=new t;return i.title=e.title,i.offerUrl=e.offerUrl,i.imageUrl=e.imageUrl,i.originalPrice=e.originalPrice,i.newPrice=e.newPrice,i.discountPercentage=e.discountPercentage,i.shippingText=e.shippingText,i.id=e.id,i.priceDropPercentage=e.priceDropPercentage,i.isTrendingOffer=e.isTrendingOffer,i}}]),t}(),Ba=(0,l.Z)((function t(e,i){(0,s.Z)(this,t),(0,I.Z)(this,"AverageSavings",void 0),(0,I.Z)(this,"AverageUsers",void 0),(0,I.Z)(this,"SellerName",void 0),(0,I.Z)(this,"Domain",void 0),this.AverageSavings=e.averageSavings,this.AverageUsers=e.averageUsers,this.Domain=i,this.SellerName=e.websiteName})),Ua=(0,l.Z)((function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"EventInfoTime",void 0),(0,I.Z)(this,"EventInfoName",void 0),(0,I.Z)(this,"Domain",void 0),(0,I.Z)(this,"BestCoupon",void 0),(0,I.Z)(this,"CashbackCategory",void 0),(0,I.Z)(this,"StartingPrice",void 0),(0,I.Z)(this,"CashbackSavings",void 0),(0,I.Z)(this,"Discount",void 0),(0,I.Z)(this,"AutoApplyScenario",void 0),(0,I.Z)(this,"AutoApplyProcessTime",void 0),(0,I.Z)(this,"ImpressionId",void 0),(0,I.Z)(this,"JSVersion",void 0),(0,I.Z)(this,"BuildVersion",void 0),(0,I.Z)(this,"Currency",void 0),this.EventInfoTime=null==e?void 0:e.eventInfo_Time,this.EventInfoName=null==e?void 0:e.eventInfo_Name,this.Domain=null==e?void 0:e.domain,this.BestCoupon=null==e?void 0:e.bestCoupon,this.CashbackCategory=null==e?void 0:e.cashbackCategory,this.StartingPrice=null==e?void 0:e.startingPrice,this.CashbackSavings=null==e?void 0:e.cashbackSavings,this.Discount=null==e?void 0:e.discount,this.AutoApplyScenario=null==e?void 0:e.autoApplyScenario,this.AutoApplyProcessTime=null==e?void 0:e.autoApplyProcessTime,this.ImpressionId=null==e?void 0:e.impressionId,this.JSVersion=null==e?void 0:e.jSVersion,this.BuildVersion=null==e?void 0:e.buildVersion,this.Currency=null==e?void 0:e.currency}));function Ga(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return Va(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Va(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function Va(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var $a=(0,l.Z)((function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"TotalAutoApplySavingsAmount",void 0),(0,I.Z)(this,"LastUpdatedAutoApplySavingsTimestamp",void 0),(0,I.Z)(this,"ListOfAutoApplyTransactions",new Array),(0,I.Z)(this,"TotalCouponClippingSavingsAmount",void 0),(0,I.Z)(this,"LastUpdatedCouponClippingSavingsTimestamp",void 0),(0,I.Z)(this,"ListOfCouponClippingTransactions",new Array),(0,I.Z)(this,"TotalCashbackSavingsAmount",void 0),(0,I.Z)(this,"LastUpdatedCashbackSavingsTimestamp",void 0),(0,I.Z)(this,"ListOfCashbackTransactions",new Array),this.TotalAutoApplySavingsAmount=null==e?void 0:e.totalAutoApplySavingsAmount,this.LastUpdatedAutoApplySavingsTimestamp=null==e?void 0:e.lastUpdatedAutoApplySavingsTimestamp;var i=null==e?void 0:e.listOfAutoApplyTransactions;if((null==i?void 0:i.length)>0){var n,o=Ga(i);try{for(o.s();!(n=o.n()).done;){var a=n.value;this.ListOfAutoApplyTransactions.push(new Ua(a))}}catch(t){o.e(t)}finally{o.f()}}this.TotalCouponClippingSavingsAmount=null==e?void 0:e.totalCouponClippingSavingsAmount,this.LastUpdatedCouponClippingSavingsTimestamp=null==e?void 0:e.lastUpdatedCouponClippingSavingsTimestamp;var r=null==e?void 0:e.listOfCouponClippingTransactions;if((null==r?void 0:r.length)>0){var l,c=Ga(r);try{for(c.s();!(l=c.n()).done;){var u=l.value;this.ListOfCouponClippingTransactions.push(new Ua(u))}}catch(t){c.e(t)}finally{c.f()}}this.TotalCashbackSavingsAmount=null==e?void 0:e.totalCashbackSavingsAmount,this.LastUpdatedCashbackSavingsTimestamp=null==e?void 0:e.lastUpdatedCashbackSavingsTimestamp;var d=null==e?void 0:e.listOfCashbackTransactions;if((null==d?void 0:d.length)>0){var h,p=Ga(d);try{for(p.s();!(h=p.n()).done;){var f=h.value;this.ListOfCashbackTransactions.push(new Ua(f))}}catch(t){p.e(t)}finally{p.f()}}}));function Wa(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return za(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return za(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function za(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Ka=(0,l.Z)((function t(e,i,n){(0,s.Z)(this,t),(0,I.Z)(this,"IsAutoApplyAvailable",void 0),(0,I.Z)(this,"Coupons",void 0),(0,I.Z)(this,"Trivia",void 0),(0,I.Z)(this,"FriendlyDomainName",void 0),(0,I.Z)(this,"DomainName",void 0),(0,I.Z)(this,"isCheckoutPageWithAutoApply",void 0),(0,I.Z)(this,"IsPackageTrackingEnabled",void 0),(0,I.Z)(this,"IsAmazonGiftCardEnabled",void 0),(0,I.Z)(this,"Deals",void 0),(0,I.Z)(this,"Recommendations",void 0),(0,I.Z)(this,"SavingsFound",void 0),(0,I.Z)(this,"BgaaResultState",void 0),(0,I.Z)(this,"BgaaSavings",void 0);var o=n.common.isCheckoutPage,a=n.common.currentDevice;if(this.IsAutoApplyAvailable=i,e){var r;if(this.Coupons=[],e.coupons){var l,c=Wa(e.coupons);try{for(c.s();!(l=c.n()).done;){var u=l.value;this.Coupons.push(new Fa(u,a))}}catch(t){c.e(t)}finally{c.f()}}if(this.Deals=[],e.deals){var d,h=Wa(e.deals);try{for(h.s();!(d=h.n()).done;){var p=d.value;this.Deals.push(Ha.Create(p))}}catch(t){h.e(t)}finally{h.f()}}if(this.Recommendations=[],e.recommendations){var f,g=Wa(e.recommendations);try{for(g.s();!(f=g.n()).done;){var m=f.value;this.Recommendations.push(Za.Create(m))}}catch(t){g.e(t)}finally{g.f()}}e.retailerData&&(this.DomainName=e.retailerData.domainName,e.retailerData.retailerTrivia&&(this.Trivia=new Ba(e.retailerData.retailerTrivia,e.retailerData.domainName))),this.FriendlyDomainName=e.friendlyDomainName,this.IsPackageTrackingEnabled=e.isPackageTrackingEnabled,this.IsAmazonGiftCardEnabled=e.isAmazonGiftCardEnabled,this.isCheckoutPageWithAutoApply=null!==(r=this.Coupons&&this.Coupons.length>0&&this.IsAutoApplyAvailable&&o)&&void 0!==r&&r,n.experimentData.isExperimentActive(xt.H.savingsFoundExp)&&null!=e&&e.savingsFound&&(this.SavingsFound=new $a(null==e?void 0:e.savingsFound));try{var v=n.dataLoader.GetLoadTimeDataValue(S.BgaaInfo,void 0);if(v){var y=JSON.parse(v);y&&(this.BgaaResultState=y.Result,this.BgaaSavings=y.Savings)}}catch(t){throw Error(t.message)}}})),Ya=(0,l.Z)((function t(){(0,s.Z)(this,t),(0,I.Z)(this,"influencerName",void 0),(0,I.Z)(this,"imgSrc",void 0),(0,I.Z)(this,"followers",void 0),(0,I.Z)(this,"channelId",void 0),(0,I.Z)(this,"coupons",void 0)})),ja=(0,l.Z)((function t(e,i,n){var o=this;(0,s.Z)(this,t),(0,I.Z)(this,"exclusiveCouponsForDomain",[]),(0,I.Z)(this,"youtubeCouponsData",void 0),(0,I.Z)(this,"hasExclusiveCoupons",!1),(0,I.Z)(this,"permission",null),e&&e.length>0&&(this.youtubeCouponsData=e,this.youtubeCouponsData.forEach((function(t){var e,a=new Ya;a.followers=t.followers,a.imgSrc=t.imgSrc,a.influencerName=t.influencerName,a.channelId=t.channelId,a.coupons=[];var r=/(http|https):\/\/(www\.)?([A-Za-z0-9]*\.(com|net|org|info|coop|int|co\.uk|org\.uk|ac\.uk|uk))/;null===(e=t.coupons)||void 0===e||e.forEach((function(t){var e,n,s=r.exec(t.retailerLink);t.retailerDomain&&(e=null===(n=t.retailerDomain)||void 0===n?void 0:n.replace(" ",""));(s&&5===s.length&&s[3]===i||e&&e.includes(i)||i.includes(e))&&(a.coupons.push(t),o.hasExclusiveCoupons=!0)})),o.hasExclusiveCoupons&&a.coupons.length>0&&o.exclusiveCouponsForDomain.push(a),o.permission=n})))})),Xa=ja,qa=(0,l.Z)((function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"offerValue",void 0),(0,I.Z)(this,"offerImage",void 0),(0,I.Z)(this,"offerDescription",void 0),(0,I.Z)(this,"brandName",void 0),(0,I.Z)(this,"offerSummary",void 0),(0,I.Z)(this,"offerExpiryDate",void 0),(0,I.Z)(this,"retailerClickThroughUrl",void 0),e&&(this.offerValue=e.offerValue,this.offerImage=e.offerImage,this.offerDescription=e.offerDescription,this.brandName=e.brandName,this.offerSummary=e.offerSummary,this.offerExpiryDate=e.offerExpiryDate,this.retailerClickThroughUrl=e.retailerClickThroughUrl)})),Ja=(0,l.Z)((function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"ItemizedCashback",void 0),(0,I.Z)(this,"ActivatedOfferIds",void 0),e&&(this.ItemizedCashback=e.itemizedCashback,this.ActivatedOfferIds=e.activatedOfferIds)})),Qa=(0,l.Z)((function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"couponId",void 0),(0,I.Z)(this,"value",void 0),(0,I.Z)(this,"categoryDescription",void 0),(0,I.Z)(this,"offerSummary",void 0),(0,I.Z)(this,"brand",void 0),(0,I.Z)(this,"description",void 0),(0,I.Z)(this,"imageUrlSuffix",void 0),(0,I.Z)(this,"expirationDate",void 0),(0,I.Z)(this,"redemptionLimit",void 0),e&&(this.couponId=e.coupon_id,this.value=e.value,this.categoryDescription=e.category_description,this.offerSummary=e.offer_summary_top,this.brand=e.brand,this.description=e.offer_print_detail,this.imageUrlSuffix=e.image_url_suffix,this.expirationDate=e.expiration_date,this.redemptionLimit=e.redemption_limit)}));function tr(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return er(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return er(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function er(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var ir=(0,l.Z)((function t(e){var i,n;if((0,s.Z)(this,t),(0,I.Z)(this,"NationalOffers",void 0),(0,I.Z)(this,"Restrictions",void 0),(0,I.Z)(this,"NationalOffersImageUrlPrefix",void 0),(0,I.Z)(this,"HashCode",void 0),this.NationalOffers=[],(null==e||null===(i=e.nationalOffers)||void 0===i?void 0:i.length)>0){var o,a=tr(e.nationalOffers);try{for(a.s();!(o=a.n()).done;){var r=o.value;this.NationalOffers.push(new Qa(r))}}catch(t){a.e(t)}finally{a.f()}}if(this.Restrictions=[],(null==e||null===(n=e.restrictions)||void 0===n?void 0:n.length)>0){var l,c=tr(e.restrictions);try{for(c.s();!(l=c.n()).done;){var u=l.value;this.Restrictions.push(new Qa(u))}}catch(t){c.e(t)}finally{c.f()}}this.NationalOffersImageUrlPrefix=null==e?void 0:e.nationalOffersImageUrlPrefix,this.HashCode=null==e?void 0:e.hashCode}));function nr(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return or(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return or(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function or(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var ar=(0,l.Z)((function t(e){var i,n,o,a;if((0,s.Z)(this,t),(0,I.Z)(this,"DigitalCoupons",void 0),(0,I.Z)(this,"PrintableCoupons",void 0),(0,I.Z)(this,"Cashback",void 0),(0,I.Z)(this,"DomainName",void 0),this.DigitalCoupons=[],null!=e&&null!==(i=e.groceryOffers)&&void 0!==i&&i.digitalCoupons&&(null===(n=e.groceryOffers.digitalCoupons)||void 0===n?void 0:n.length)>0){var r,l=nr(e.groceryOffers.digitalCoupons);try{for(l.s();!(r=l.n()).done;){var c=r.value;this.DigitalCoupons.push(new qa(c))}}catch(t){l.e(t)}finally{l.f()}}null!=e&&null!==(o=e.groceryOffers)&&void 0!==o&&o.printableCoupons&&(this.PrintableCoupons=new ir(e.groceryOffers.printableCoupons)),null!=e&&null!==(a=e.groceryOffers)&&void 0!==a&&a.cashback&&(this.Cashback=new Ja(e.groceryOffers.cashback)),this.DomainName=null==e?void 0:e.friendlyDomainName})),rr=(0,l.Z)((function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"Tips",void 0),this.Tips=e})),sr=(0,l.Z)((function t(e,i){(0,s.Z)(this,t),(0,I.Z)(this,"trackerKey",void 0),(0,I.Z)(this,"actionURL",void 0),(0,I.Z)(this,"orderSummary",void 0),(0,I.Z)(this,"domain",void 0),(0,I.Z)(this,"orderStatus",void 0),(0,I.Z)(this,"productsInOrder",void 0),e&&i&&(this.trackerKey=e.trackerKey,this.actionURL=e.actionURL,this.orderStatus=e.orderStatus,this.domain=e.domain,this.orderSummary=e.orderSummary,this.productsInOrder=i)})),lr=(0,l.Z)((function t(e,i,n,o){(0,s.Z)(this,t),(0,I.Z)(this,"packageTrackingFreShown",void 0),(0,I.Z)(this,"packageTrackingUserConsented",void 0),(0,I.Z)(this,"orders",void 0),(0,I.Z)(this,"shouldShowPackageTrackingNotification",void 0),this.packageTrackingFreShown=null!=e&&e,this.packageTrackingUserConsented=null!=i&&i,this.orders=n,this.shouldShowPackageTrackingNotification=null!=o&&o})),cr=function(){function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"Guid",void 0),(0,I.Z)(this,"ExpMonth",void 0),(0,I.Z)(this,"ExpYear",void 0),(0,I.Z)(this,"FullName",void 0),(0,I.Z)(this,"MaskedCardNumber",void 0),(0,I.Z)(this,"CardNumber",void 0),(0,I.Z)(this,"CardType",void 0);var i=e.metadata.summaryLabel.substr(0,e.metadata.summaryLabel.indexOf(" ")),n=e.metadata.summaryLabel.substr(e.metadata.summaryLabel.length-5,e.metadata.summaryLabel.length);this.UpdateFileds(e.guid,e.expirationMonth,e.expirationYear,e.name,e.cardNumber,a.sj[i.toUpperCase().trim()],n)}return(0,l.Z)(t,[{key:"UpdateFileds",value:function(t,e,i,n,o,a,r){this.Guid=t,this.ExpMonth=e,this.ExpYear=i,this.FullName=n,this.CardNumber=o,this.CardType=a,this.MaskedCardNumber=r}}]),t}(),ur=(0,l.Z)((function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"providerName",void 0),(0,I.Z)(this,"projectedMonthlyPaymentDetails",void 0),(0,I.Z)(this,"paymentSuggestion",void 0),(0,I.Z)(this,"period",void 0),(0,I.Z)(this,"lowerThreshold",void 0),(0,I.Z)(this,"upperThreshold",void 0),(0,I.Z)(this,"amount",void 0),(0,I.Z)(this,"helpInformation",void 0),(0,I.Z)(this,"managePaymentLabel",void 0),(0,I.Z)(this,"managePaymentLinkText",void 0),e&&(this.providerName=e.providerName,this.projectedMonthlyPaymentDetails=e.projectedMonthlyPaymentDetails,this.paymentSuggestion=e.paymentSuggestion,this.period=e.period,this.lowerThreshold=e.lowerThreshold,this.upperThreshold=e.upperThreshold,this.amount=e.amount,this.helpInformation=e.helpInformation,this.managePaymentLabel=e.managePaymentLabel,this.managePaymentLinkText=e.managePaymentLinkText)})),dr=(0,l.Z)((function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"productLink",void 0),this.productLink=e})),hr=dr,pr=(0,l.Z)((function t(e){var i=this;if((0,s.Z)(this,t),(0,I.Z)(this,"Url",void 0),(0,I.Z)(this,"Description",void 0),(0,I.Z)(this,"SellerName",void 0),(0,I.Z)(this,"Domain",void 0),(0,I.Z)(this,"InstallmentAmount",void 0),(0,I.Z)(this,"InstallmentDescription",void 0),(0,I.Z)(this,"LowPrice",void 0),(0,I.Z)(this,"Price",void 0),(0,I.Z)(this,"FavIcon",void 0),(0,I.Z)(this,"CurrencySymbol",void 0),(0,I.Z)(this,"ImpressionToken",void 0),(0,I.Z)(this,"ProductImageUrl",void 0),(0,I.Z)(this,"ProductImageOriginalUrl",void 0),(0,I.Z)(this,"PriceId",void 0),(0,I.Z)(this,"IntendedPrice",void 0),(0,I.Z)(this,"Extensions",void 0),(0,I.Z)(this,"BillingType",void 0),(0,I.Z)(this,"ShouldOnTop",void 0),(0,I.Z)(this,"geoDistance",void 0),(0,I.Z)(this,"mileageUnit",void 0),(0,I.Z)(this,"mileageValue",void 0),(0,I.Z)(this,"isPopular",void 0),(0,I.Z)(this,"dealRating",void 0),(0,I.Z)(this,"marketHint",void 0),(0,I.Z)(this,"listingTypes",void 0),e){var n,o,a,r,l=e.installmentInfo;l&&(this.InstallmentAmount=l.amount,this.InstallmentDescription=l.description);var c,u,d,h,p,f,g,m,v,y,C,b,S,x,E=e.offer,A=e.offerLevelSignals;if(E)this.LowPrice=E.lowPrice,this.Price=E.price,this.Description=null===(c=E.itemOffered)||void 0===c?void 0:c.name,this.SellerName=null===(u=E.seller)||void 0===u?void 0:u.name,this.Domain=null===(d=E.seller)||void 0===d?void 0:d.domain,this.FavIcon=null===(h=E.seller)||void 0===h?void 0:h.favicon,this.Url=E.url,this.CurrencySymbol=E.priceCurrencySymbol,this.ProductImageUrl=null===(p=E.itemOffered)||void 0===p||null===(f=p.image)||void 0===f?void 0:f.contentUrl,this.ProductImageOriginalUrl=E.itemOffered.image.originalUrl,this.geoDistance=null===(g=E.metadata)||void 0===g?void 0:g.geoDistance,this.mileageUnit=null===(m=E.metadata)||void 0===m?void 0:m.mileageUnit,this.mileageValue=null===(v=E.metadata)||void 0===v?void 0:v.mileageValue,this.isPopular=null===(y=E.metadata)||void 0===y?void 0:y.isPopular,this.dealRating=null===(C=E.metadata)||void 0===C?void 0:C.dealRating,this.marketHint=null===(b=E.metadata)||void 0===b?void 0:b.marketHint,this.listingTypes=null===(S=E.metadata)||void 0===S||null===(x=S.listingTypes)||void 0===x?void 0:x.map((function(t){return t.toLowerCase()}));A&&(this.ShouldOnTop=A.autoshow),this.BillingType=null!==(n=null===(o=e.billingType)||void 0===o?void 0:o.toLowerCase())&&void 0!==n?n:"",this.ImpressionToken=null!==(a=e.impressionToken)&&void 0!==a?a:"",this.PriceId=null!==(r=e.price_comparison_id)&&void 0!==r?r:"";var T=e.extensions;T&&T.length>0&&(this.Extensions=new Array,T.forEach((function(t){var e=t.text,n=t._type;i.Extensions.push({ExtensionText:e,ExtensionType:n})})))}})),fr=pr;function gr(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return mr(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return mr(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function mr(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var vr=function(){function t(e,i,n,o,a){var r=this;if((0,s.Z)(this,t),(0,I.Z)(this,"Price",void 0),(0,I.Z)(this,"CompetingPrices",void 0),(0,I.Z)(this,"currentImageUrl",void 0),(0,I.Z)(this,"currentProductTitle",void 0),(0,I.Z)(this,"entityName",void 0),(0,I.Z)(this,"shouldBeInPolePosition",void 0),(0,I.Z)(this,"lowestPrice",void 0),(0,I.Z)(this,"shoudlRenderPriceComparisonNotification",void 0),(0,I.Z)(this,"segment",void 0),e){var l="",c="";if(e&&e.value&&i&&(n&&n.image_url&&(l=n.image_url,c=n.title),n&&n.entity&&n.entity.name&&(this.entityName=n.entity.name)),this.Price=i,this.currentImageUrl=l,this.currentProductTitle=c,this.CompetingPrices=[],e.value&&e.value.length>0){var u,d=gr(e.value);try{for(d.s();!(u=d.n()).done;){var h=u.value;this.CompetingPrices.push(new fr(h))}}catch(t){d.e(t)}finally{d.f()}}this.CompetingPrices&&this.CompetingPrices.length>0&&this.CompetingPrices.forEach((function(t){t.IntendedPrice=r.getIntendedPrice(t)})),e&&e.segment&&(this.segment=e.segment),this.lowestPrice=this.getLowestPrice(),this.shouldBeInPolePosition=this.ShouldBeInPolePosition(this),this.shoudlRenderPriceComparisonNotification=this.ShouldRenderNotification(this,o,a)}}return(0,l.Z)(t,[{key:"getIntendedPrice",value:function(t){if(t.InstallmentAmount){var e=parseFloat(t.InstallmentAmount.replace(/[^0-9.]/g,""));if(t.InstallmentDescription){var i=parseInt(t.InstallmentDescription.replace(/[^0-9]/g,""),10);i&&(e*=i)}return e}return t.LowPrice?t.LowPrice:t.Price}},{key:"ShouldBeInPolePosition",value:function(t){if(t&&t.CompetingPrices&&t.CompetingPrices.length>0){var e=this.getLowestPrice(),i=t.Price-e;if(e>0&&i>0&&i>Math.ceil(.05*t.Price))return!0}return!1}},{key:"ShouldRenderNotification",value:function(t,e,i){var n;return null!==(n=t&&t.CompetingPrices&&t.CompetingPrices.length>0&&e===D.Te.Auto&&i===St.s.AUTO_SHOW_LOWER_PRICE_FOUND)&&void 0!==n&&n}},{key:"getLowestPrice",value:function(){if(this.Price&&-1!==this.Price){var t=this.Price;return this.CompetingPrices.forEach((function(e){var i=e.IntendedPrice;i&&i<t&&(t=i)})),t===this.Price?-1:t}return-1}}]),t}(),yr=(0,l.Z)((function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"canonicalUrl",void 0),(0,I.Z)(this,"image",void 0),(0,I.Z)(this,"name",void 0),(0,I.Z)(this,"price",void 0),(0,I.Z)(this,"pageLocale",void 0),(0,I.Z)(this,"priceCurrency",void 0),(0,I.Z)(this,"priceValue",void 0),(0,I.Z)(this,"type",void 0),(0,I.Z)(this,"latestPrice",void 0),e&&(this.canonicalUrl=e.canonical_url,this.image=e.image,this.name=e.name,this.price=e["offers/price"],this.pageLocale=e.page_locale,this.priceCurrency=e.price_currency,this.priceValue=e.price_value,this.type=e.type,this.latestPrice=e.latestPrice)})),Cr=(0,l.Z)((function t(e){if((0,s.Z)(this,t),(0,I.Z)(this,"category",void 0),(0,I.Z)(this,"entity",void 0),(0,I.Z)(this,"title",void 0),(0,I.Z)(this,"url",void 0),(0,I.Z)(this,"domain",void 0),(0,I.Z)(this,"newTimestamp",void 0),e&&(this.category=e.category,this.entity=new yr(e.entity),this.title=e.title,this.url=e.url,this.newTimestamp=e.newTimestamp,this.url)){var i=this.url.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);i&&i.length>2&&"string"==typeof i[2]&&(this.domain=i[2])}})),br=(0,l.Z)((function t(e,i){(0,s.Z)(this,t),(0,I.Z)(this,"productImageUrl",void 0),(0,I.Z)(this,"productName",void 0),this.productImageUrl=e,this.productName=i})),Sr=function(){function t(e){var i,n,o,a,r,l;(0,s.Z)(this,t),(0,I.Z)(this,"Guid",void 0),(0,I.Z)(this,"Emails",void 0),(0,I.Z)(this,"FirstName",void 0),(0,I.Z)(this,"MiddleName",void 0),(0,I.Z)(this,"LastName",void 0),(0,I.Z)(this,"FullName",void 0),(0,I.Z)(this,"AddressLines",void 0),(0,I.Z)(this,"City",void 0),(0,I.Z)(this,"State",void 0),(0,I.Z)(this,"Country",void 0),(0,I.Z)(this,"Zip",void 0),(0,I.Z)(this,"PhoneNumbers",void 0),(0,I.Z)(this,"Honorific",void 0),this.UpdateFields(e.guid,e.emailAddresses,null!==(i=null===(n=e.fullNameSplit)||void 0===n?void 0:n.firstName)&&void 0!==i?i:"",null!==(o=null===(a=e.fullNameSplit)||void 0===a?void 0:a.middleName)&&void 0!==o?o:"",null!==(r=null===(l=e.fullNameSplit)||void 0===l?void 0:l.lastName)&&void 0!==r?r:"",e.fullNames,e.honorific,e.addressLines,e.addressLevel2,e.addressLevel1,e.countryCode,e.postalCode,e.phoneNumbers)}return(0,l.Z)(t,[{key:"UpdateFields",value:function(t,e,i,n,o,a,r,s,l,c,u,d,h){this.Guid=t,this.Emails=e,this.FirstName=i,this.MiddleName=n,this.LastName=o,this.FullName=a[0],this.AddressLines=s,this.City=l,this.State=c,this.Country=u,this.Zip=d,this.PhoneNumbers=h,this.Honorific=r}}]),t}(),xr=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"rawValue",void 0),(0,I.Z)(this,"maxValue",void 0)}return(0,l.Z)(t,[{key:"normalizedValue",get:function(){return t.NormalizedMaxRating*(this.rawValue/this.maxValue)}}],[{key:"createRating",value:function(e,i){if(i<1||e<0||e>i)return null;var n=new t;return n.rawValue=e,n.maxValue=i,n}}]),t}();(0,I.Z)(xr,"NormalizedMaxRating",5);var Er=xr;function Ar(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var Tr=function(t){(0,O.Z)(i,t);var e=Ar(i);function i(){var t;(0,s.Z)(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),(0,I.Z)((0,R.Z)(t),"totalReviews",void 0),(0,I.Z)((0,R.Z)(t),"displayText",void 0),t}return(0,l.Z)(i,null,[{key:"createAggregateRating",value:function(t,e,i,n){if(i<1)return null;var o=Er.createRating(t,e);return o.totalReviews=i,o&&(o.displayText=n),o}}]),i}(Er),Ir=Tr,Dr=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"cardOrder",void 0)}return(0,l.Z)(t,null,[{key:"Compare",value:function(t,e){return t.cardOrder-e.cardOrder}}]),t}();function kr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var wr,Rr=function(t){(0,O.Z)(i,t);var e=kr(i);function i(){var t;(0,s.Z)(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),(0,I.Z)((0,R.Z)(t),"id",void 0),(0,I.Z)((0,R.Z)(t),"url",void 0),(0,I.Z)((0,R.Z)(t),"favIconDomain",void 0),(0,I.Z)((0,R.Z)(t),"provider",void 0),(0,I.Z)((0,R.Z)(t),"title",void 0),(0,I.Z)((0,R.Z)(t),"rating",void 0),(0,I.Z)((0,R.Z)(t),"caption",void 0),(0,I.Z)((0,R.Z)(t),"attribution",void 0),t}return(0,l.Z)(i,null,[{key:"create",value:function(t,e,n,o,a,r,s,l,c,u){if(t&&n&&c&&!u?!a:!r)return null;var d,h=new i;(h.id=t,h.cardOrder=e,h.url=n,h.favIconDomain=o,h.provider=a,h.title=r,h.caption=c,h.attribution=u,s&&l)&&(h.rating=null!==(d=Er.createRating(s,l))&&void 0!==d?d:void 0);return h}}]),i}(Dr),Or=Rr;function Pr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}!function(t){t[t.H=0]="H",t[t.V=1]="V"}(wr||(wr={}));var Mr=function(t){(0,O.Z)(i,t);var e=Pr(i);function i(){var t;(0,s.Z)(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),(0,I.Z)((0,R.Z)(t),"id",void 0),(0,I.Z)((0,R.Z)(t),"cardOrientation",void 0),(0,I.Z)((0,R.Z)(t),"title",void 0),(0,I.Z)((0,R.Z)(t),"thumbnailId",void 0),(0,I.Z)((0,R.Z)(t),"thumbnailUrl",void 0),(0,I.Z)((0,R.Z)(t),"clickthroughUrl",void 0),(0,I.Z)((0,R.Z)(t),"publisher",void 0),(0,I.Z)((0,R.Z)(t),"creator",void 0),(0,I.Z)((0,R.Z)(t),"durationText",void 0),(0,I.Z)((0,R.Z)(t),"durationLabel",void 0),t}return(0,l.Z)(i,null,[{key:"create",value:function(t,e,n,o,a,r,s,l,c,u){if(!t||!o||!s||!a&&!r)return null;var d=new i;if(d.id=t,d.cardOrder=e,d.cardOrientation=(null==n?void 0:n.toUpperCase())===wr[wr.H]?wr.H:wr.V,d.title=o,d.thumbnailId=a,d.thumbnailUrl=r,d.clickthroughUrl=s,d.publisher=l,d.creator=c,u>0){var h=Math.floor(u/60),p=Math.round(u)%60,f=p<10?"0"+p:p;d.durationText=h+":"+f,d.durationLabel=h>0?"".concat(h," minutes ").concat(f," seconds"):"".concat(f," seconds")}return d}},{key:"Narrow",value:function(t){return"clickthroughUrl"in t?t:void 0}}]),i}(Dr),Nr=Mr;function Lr(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return _r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function _r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Fr=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"aggregateRating",void 0),(0,I.Z)(this,"sectionTitle",void 0),(0,I.Z)(this,"entityName",void 0),(0,I.Z)(this,"expertReviews",void 0),(0,I.Z)(this,"videos",void 0)}return(0,l.Z)(t,[{key:"canCreateInlineRating",get:function(){return!!this.aggregateRating}},{key:"totalCards",get:function(){var t,e,i,n;return(null!==(t=null===(e=this.expertReviews)||void 0===e?void 0:e.length)&&void 0!==t?t:0)+(null!==(i=null===(n=this.videos)||void 0===n?void 0:n.length)&&void 0!==i?i:0)}},{key:"hasExpertReviews",get:function(){return!!this.expertReviews&&this.expertReviews.length>0}},{key:"hasVideos",get:function(){return!!this.videos&&this.videos.length>0}},{key:"CanRankInPole",value:function(t,e){var i,n,o,a,r;if(this.totalCards<3)return!1;if((null===(i=t.PriceHistoryData)||void 0===i?void 0:i.getPriceHistoryType())===ca.PRICEDROP)return!1;if((null!==(n=null===(o=t.PriceComparisonData)||void 0===o||null===(a=o.CompetingPrices)||void 0===a?void 0:a.length)&&void 0!==n?n:0)>0&&(null!==(r=t.PriceComparisonData)&&void 0!==r&&r.shouldBeInPolePosition))return!1;return!0}}],[{key:"create",value:function(e,i){if(e){var n,o,a,r,s,l=new t;if(l.sectionTitle=e.sectionTitle,l.entityName=null!==(n=null==i||null===(o=i.entity)||void 0===o?void 0:o.name)&&void 0!==n?n:null==i?void 0:i.title,l.aggregateRating=null!==(a=t.createAggregateRating(e.aggregatedRatingReview))&&void 0!==a?a:void 0,Array.isArray(null===(r=e.professionalReviews)||void 0===r?void 0:r.reviews)){var c,u=[],d=Lr(e.professionalReviews.reviews);try{for(d.s();!(c=d.n()).done;){var h=c.value,p=t.createExpertReview(h);p&&u.push(p)}}catch(t){d.e(t)}finally{d.f()}u.length>0&&(l.expertReviews=u)}if(Array.isArray(null===(s=e.videoReviews)||void 0===s?void 0:s.reviews)){var f,g=[],m=Lr(e.videoReviews.reviews);try{for(m.s();!(f=m.n()).done;){var v=f.value,y=t.createVideo(v);y&&g.push(y)}}catch(t){m.e(t)}finally{m.f()}g.length>0&&(l.videos=g)}return l.aggregateRating||l.expertReviews||l.videos?l:void 0}}},{key:"createAggregateRating",value:function(t){return t&&t.rating?Ir.createAggregateRating(t.rating.value,t.rating.maxValue,t.totalReviewCount):null}},{key:"createExpertReview",value:function(t){if(t&&t.publisher){var e,i,n;try{var o;n=new URL(null!==(o=t.iconUri)&&void 0!==o?o:t.url).hostname}catch(t){}return Or.create(t.id,t.cardOrder,t.url,n,t.publisher,t.title,null===(e=t.rating)||void 0===e?void 0:e.value,null===(i=t.rating)||void 0===i?void 0:i.maxValue,t.caption,t.attribution)}return null}},{key:"createVideo",value:function(t){if(null!=t&&t.publisher||null!=t&&t.creator){var e,i=null!==(e=t.clickthroughUrl)&&void 0!==e?e:t.contentUrl;return Nr.create(t.id,t.cardOrder,t.cardOrientation,t.title,t.thumbnailId,t.thumbnailUrl,i,t.publisher,t.creator,t.lengthSeconds)}return null}}]),t}(),Hr=function(){function t(e,i,n,o){(0,s.Z)(this,t),(0,I.Z)(this,"Points",void 0),(0,I.Z)(this,"IsRewardsActive",void 0),(0,I.Z)(this,"IsSignedInUser",void 0),(0,I.Z)(this,"IsAssociatedUser",void 0),(0,I.Z)(this,"IsTrialUser",void 0),(0,I.Z)(this,"TrialUserExpiryInDays",void 0),(0,I.Z)(this,"ActivateRewardsStatus",void 0),(0,I.Z)(this,"shouldRenderRewardNotification",void 0),(0,I.Z)(this,"IsControlUser",void 0),(0,I.Z)(this,"experiments",void 0),this.Points=e.points,this.IsRewardsActive=e.isRewardsActive,this.IsAssociatedUser=e.isAssociatedUser,this.IsSignedInUser=e.isSignedInUser,this.IsTrialUser=e.isTrialUser,this.TrialUserExpiryInDays=e.trialUserExpiryInDays,this.IsControlUser=e.isControlUser,this.ActivateRewardsStatus=i,this.experiments=o,this.shouldRenderRewardNotification=this.ShouldRenderRewardNotification(this,n)}return(0,l.Z)(t,[{key:"isUserDefined",value:function(){return this.IsSignedInUser||this.IsAssociatedUser||this.IsTrialUser}},{key:"ShouldRenderRewardNotification",value:function(t,e){return t&&t.IsRewardsActive&&this.experiments.isExperimentActive(xt.H.rewardNotification)&&e===D.Te.Auto}}]),t}(),Zr=function(){function t(e,i){(0,s.Z)(this,t),(0,I.Z)(this,"shouldRenderSustainability",void 0),(0,I.Z)(this,"isDomainSustainabilitySupported",void 0),(0,I.Z)(this,"experiments",void 0),this.experiments=i,this.isDomainSustainabilitySupported=e,this.shouldRenderSustainability=this.ShouldRenderSustainability()}return(0,l.Z)(t,[{key:"ShouldRenderSustainability",value:function(){return this.isDomainSustainabilitySupported&&this.experiments.isExperimentActive(xt.H.sustainability)}}]),t}(),Br=(0,l.Z)((function t(e,i,n,o,a){(0,s.Z)(this,t),(0,I.Z)(this,"Text",void 0),(0,I.Z)(this,"IconType",void 0),(0,I.Z)(this,"MinimumPurchase",void 0),(0,I.Z)(this,"RetailerData",void 0),(0,I.Z)(this,"CheckoutPageUrl",void 0),this.Text=e,this.IconType=i,this.MinimumPurchase=n,this.RetailerData=ot.Create(o),this.CheckoutPageUrl=a})),Ur=Br,Gr=(0,l.Z)((function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"merchantName",void 0),(0,I.Z)(this,"merchantFullName",void 0),(0,I.Z)(this,"merchantId",void 0),(0,I.Z)(this,"merchantUri",void 0),(0,I.Z)(this,"originalUrl",void 0),(0,I.Z)(this,"description",void 0),(0,I.Z)(this,"image",void 0),(0,I.Z)(this,"priority",void 0),(0,I.Z)(this,"affiliateNetwork",void 0),(0,I.Z)(this,"commissionType",void 0),(0,I.Z)(this,"commissionValue",void 0),(0,I.Z)(this,"exclusions",void 0),this.merchantName=e.merchantName,this.merchantFullName=e.merchantFullName,this.merchantId=e.merchantId,this.merchantUri=e.merchantUri,this.originalUrl=e.originalUrl,this.description=e.description,this.image=e.image,this.priority=e.priority,this.affiliateNetwork=e.affiliateNetwork,this.commissionType=e.commissionType,this.commissionValue=e.commissionValue,this.exclusions=e.exclusions})),Vr=Gr;function $r(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return Wr(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Wr(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function Wr(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var zr=(0,l.Z)((function t(e){if((0,s.Z)(this,t),(0,I.Z)(this,"Retailers",void 0),this.Retailers=[],null!=e&&e.topRetailers){var i,n=$r(e.topRetailers);try{for(n.s();!(i=n.n()).done;){var o=i.value;this.Retailers.push(new Vr(o))}}catch(t){n.e(t)}finally{n.f()}}})),Kr=(0,l.Z)((function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"domain",void 0),(0,I.Z)(this,"title",void 0),(0,I.Z)(this,"currencySymbol",void 0),(0,I.Z)(this,"productUrl",void 0),(0,I.Z)(this,"imageUrl",void 0),(0,I.Z)(this,"currentPrice",void 0),(0,I.Z)(this,"olderPrice",void 0),(0,I.Z)(this,"priceDropPercent",void 0),e&&e.product&&(this.domain=e.product.domain,this.title=e.product.title,this.currencySymbol=e.product.currencySymbol,this.productUrl=e.product.productUrl,this.imageUrl=e.product.imageUrl,this.currentPrice=e.product.currentPrice,this.olderPrice=e.product.olderPrice,this.priceDropPercent=e.product.priceDropPercent)}));function Yr(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return jr(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return jr(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function jr(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Xr=(0,l.Z)((function t(e){if((0,s.Z)(this,t),(0,I.Z)(this,"productShowItem",void 0),(0,I.Z)(this,"highestDropPercentageApiResponse",void 0),(0,I.Z)(this,"maxDropPercent",void 0),e&&e.userDataResponseList){var i,n=Yr(e.userDataResponseList);try{for(n.s();!(i=n.n()).done;){var o=i.value;o.priceHistory&&o.priceHistory.product&&o.priceHistory.product.priceDropPercent&&(void 0===this.maxDropPercent||o.priceHistory.product.priceDropPercent>this.maxDropPercent)&&(this.maxDropPercent=o.priceHistory.product.priceDropPercent,this.highestDropPercentageApiResponse=o)}}catch(t){n.e(t)}finally{n.f()}this.highestDropPercentageApiResponse&&this.highestDropPercentageApiResponse.priceHistory&&(this.productShowItem=new Kr(this.highestDropPercentageApiResponse.priceHistory))}})),qr=function(){function t(e){var i;(0,s.Z)(this,t),(0,I.Z)(this,"cardNumber",void 0),(0,I.Z)(this,"cardHolderName",void 0),(0,I.Z)(this,"cardCVC",void 0),(0,I.Z)(this,"expires",void 0),(0,I.Z)(this,"billingInfo",void 0),(0,I.Z)(this,"isLinking",void 0),(0,I.Z)(this,"isLinkingSuccess",void 0),(0,I.Z)(this,"isAutofillSuccess",void 0),(0,I.Z)(this,"hasError",void 0),(0,I.Z)(this,"cardProvider",void 0),this.cardNumber=null==e?void 0:e.cardNumber,this.cardHolderName=null==e?void 0:e.cardHolderName,this.cardCVC=null==e?void 0:e.cardCVC,this.expires=null==e?void 0:e.expires,this.billingInfo=null==e?void 0:e.billingInfo,this.isLinking=null==e?void 0:e.isLinking,this.isLinkingSuccess=null==e?void 0:e.isLinkingSuccess,this.isAutofillSuccess=this.parseIsAutofillSuccessMessage(null==e?void 0:e.isAutofillSuccess),this.hasError=null!==(i=null==e?void 0:e.hasError)&&void 0!==i?i:null,this.cardProvider=null==e?void 0:e.cardProvider}return(0,l.Z)(t,[{key:"parseIsAutofillSuccessMessage",value:function(t){return"null"===t?null:"true"===t}}]),t}();function Jr(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return Qr(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Qr(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function Qr(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var ts=function(){function e(t,i){(0,s.Z)(this,e),(0,I.Z)(this,"logModule",void 0),(0,I.Z)(this,"pageHandlerModule",void 0),(0,I.Z)(this,"flyoutData",void 0),(0,I.Z)(this,"apiResponseStr",void 0),(0,I.Z)(this,"apiResponse",void 0),this.logModule=t,this.pageHandlerModule=i}var i,r,c,u,d,h,p,f,g;return(0,l.Z)(e,[{key:"InitializeData",value:(g=(0,t.Z)(n().mark((function t(e){var i,r,s,l,c,u,d,h;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.flyoutData=e,(s=this.flyoutData.dataLoader.GetLoadTimeDataValue(S.GuestCouponsApiResponse,void 0))&&this.flyoutData.common.lastCommittedURL&&this.flyoutData.common.lastCommittedURL.includes("pinterest.com/pin")?this.apiResponseStr=s:this.apiResponseStr=this.flyoutData.dataLoader.GetLoadTimeDataValue(S.CouponsApiResponse,void 0),this.apiResponseStr&&(this.apiResponse=JSON.parse(this.apiResponseStr),(l=ct.Create(this.apiResponse))&&(this.flyoutData.dataStoreModule.ApiData=l))}catch(t){c=new o.Z(a.xu.OnErrorInvoked),this.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"InitializeData error ".concat(t),c)}return null!==(i=this.flyoutData.dataStoreModule.ApiData)&&void 0!==i&&null!==(r=i.retailerData)&&void 0!==r&&r.domainName?e.common.domain=null===(u=this.flyoutData.dataStoreModule.ApiData)||void 0===u||null===(d=u.retailerData)||void 0===d?void 0:d.domainName:e.common.currentUrl&&(h=this.getDomainNameFromUrl(e.common.currentUrl))&&(e.common.domain=h),t.next=4,this.createDataWithErrorHandling(D.GX.COUPON);case 4:return this.createDataWithErrorHandling(D.GX.CASHBACK),this.createDataWithErrorHandling(D.GX.PRICECOMPARISON),this.flyoutData.experimentData.setShowPCBannerUX(this.flyoutData.common.showPCBannerUX,mt("banneropen")||this.flyoutData.common.shouldShowBanner,this.flyoutData.dataStoreModule.PriceComparisonData,this.flyoutData.common.foundLowerPrice),this.createDataWithErrorHandling(D.GX.PRICEHISTORY),t.next=10,this.createDataWithErrorHandling(D.GX.CHECKOUTAUTOFILL);case 10:return this.createDataWithErrorHandling(D.GX.NUDGETIPSDATA),this.createDataWithErrorHandling(D.GX.RATINGSANDREVIEWS),this.createDataWithErrorHandling(D.GX.COUPONCLIPPING),this.createDataWithErrorHandling(D.GX.PRODUCTHISTORY),this.createDataWithErrorHandling(D.GX.REWARD),this.createDataWithErrorHandling(D.GX.PAYMENT_OPTIONS),t.next=18,this.createDataWithErrorHandling(D.GX.EXCLUSIVECOUPONS);case 18:return this.createDataWithErrorHandling(D.GX.VIRTUAL_CARD),this.createDataWithErrorHandling(D.GX.TOP_RETAILERS),this.createDataWithErrorHandling(D.GX.GROCERY_COUPON),this.createDataWithErrorHandling(D.GX.ORDERSTATUSTRACKING),this.createDataWithErrorHandling(D.GX.ViewedProductPriceDrop),this.createDataWithErrorHandling(D.GX.SUSTAINABILITY),t.next=26,this.createDataWithErrorHandling(D.GX.PINTEREST);case 26:case"end":return t.stop()}}),t,this)}))),function(t){return g.apply(this,arguments)})},{key:"GetCashBackData",value:function(){var t,e;this.apiResponse&&(t=this.apiResponse.cashback,e=this.apiResponse.personalizedAdsResponse);var i=this.flyoutData.dataLoader.GetLoadTimeDataValue("rebatesActive",!1),n=this.flyoutData.dataLoader.GetLoadTimeDataValue("isConfirmationPage",!1),o=this.flyoutData.dataLoader.GetLoadTimeDataValue("rebatesDeactivating",!1),a=this.flyoutData.dataLoader.GetLoadTimeDataValue("activateRebatesStatus",null);return new La(t,e,i,n,o,this.flyoutData.experimentData,this.flyoutData.common.openedWith,this.flyoutData.common.popupOrigination,a,this.flyoutData.common.isRebatesEnabled)}},{key:"GetCouponData",value:(f=(0,t.Z)(n().mark((function t(){var e,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.apiResponse){t.next=12;break}if(e=this.flyoutData.dataLoader.GetLoadTimeDataValue("isAutoApplyAvailable",!1),i=this.apiResponse,this.flyoutData.common.isCheckoutPage||this.flyoutData.common.openedWith!==D.Te.Auto||this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_REBATES_CHECKOUT||!e){t.next=11;break}return t.prev=4,t.next=7,this.ExecuteAutoApplyAutoOpenRebatesHack();case 7:t.next=11;break;case 9:t.prev=9,t.t0=t.catch(4);case 11:return t.abrupt("return",new Ka(i,e,this.flyoutData));case 12:return t.abrupt("return",void 0);case 13:case"end":return t.stop()}}),t,this,[[4,9]])}))),function(){return f.apply(this,arguments)})},{key:"ExecuteAutoApplyAutoOpenRebatesHack",value:(p=(0,t.Z)(n().mark((function t(){var e,i,o,a,r,s,l,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e="isCheckoutPage_"+this.flyoutData.common.lastCommittedURL,!(i=this.flyoutData.dataLoader.GetLoadTimeDataValue("storage",void 0))){t.next=7;break}a={value:{stringValue:i[e]}},o=a,t.next=10;break;case 7:return t.next=9,this.pageHandlerModule.GetStorageValue(e);case 9:o=t.sent;case 10:r=null,o&&""!==o&&(s=o.value)&&(r=null!==(l=s.stringValue)&&void 0!==l?l:null)&&(!0===(c=JSON.parse(r)).isCheckoutPage&&Date.now()-c.validationTime<=18e5?this.flyoutData.common.isCheckoutPage=!0:this.pageHandlerModule.SetStorageValue(e,new Na));case 12:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"GetExclusiveCouponData",value:(h=(0,t.Z)(n().mark((function t(){var e,i,o,a,r,s,l,c,u,d;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.flyoutData.experimentData.isExperimentActive(xt.H.youtubeCoupons)){t.next=21;break}return t.next=3,this.pageHandlerModule.GetStorageValue("CanSaveExclusiveCoupons");case 3:if(e=t.sent,i=null,e&&""!==e&&(o=e.value)&&(i=null!==(a=o.boolValue)&&void 0!==a?a:null),null!==i&&!0!==i){t.next=21;break}return r="exclusiveCoupons",null===i&&(this.pageHandlerModule.SetStorageValue(r,new Na),r="".concat(r,"Temp")),t.next=11,this.pageHandlerModule.GetStorageValue(r);case 11:if(!(s=t.sent)||""===s){t.next=21;break}if(!(l=s)){t.next=21;break}if(!((c=this.deserializeStorageData(null==l?void 0:l.value))&&c.length>0)){t.next=21;break}return(u=this.flyoutData.common.domain)||(u=this.flyoutData.common.lastCommittedURL)&&-1!==(u=(u=u.replace("http://www.","")).replace("https://www.","")).indexOf("/")&&(u=u.substring(0,u.indexOf("/"))),d=new Xa(c,u,i),t.abrupt("return",Promise.resolve(d));case 21:return t.abrupt("return",Promise.resolve(void 0));case 22:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"GetPinterestData",value:(d=(0,t.Z)(n().mark((function t(){var e,i,o,a,r,s,l;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.flyoutData.dataLoader.GetLoadTimeDataValue("storage",void 0))){t.next=6;break}o={value:{stringValue:e.pinterestProductLink}},i=o,t.next=9;break;case 6:return t.next=8,this.pageHandlerModule.GetStorageValue("pinterestProductLink");case 8:i=t.sent;case 9:if(!i||""===i){t.next=15;break}if(!(a=i)){t.next=15;break}return s=null===(r=aa.Z.Create(null==a?void 0:a.value))||void 0===r?void 0:r.stringValue,l=new hr(s),t.abrupt("return",Promise.resolve(l));case 15:return t.abrupt("return",Promise.resolve(void 0));case 16:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"deserializeStorageData",value:function(t){var e,i=null===(e=aa.Z.Create(t))||void 0===e?void 0:e.stringValue;if(i)return JSON.parse(i)}},{key:"GetPriceComparisonData",value:function(){var t=this.flyoutData.dataLoader.GetLoadTimeDataValue("comparableOffers",void 0),e=this.flyoutData.dataLoader.GetLoadTimeDataValue("price",void 0),i=this.flyoutData.dataLoader.GetLoadTimeDataValue("extracted_entity",void 0);return new vr(t,e,i,this.flyoutData.common.openedWith,this.flyoutData.common.popupOrigination)}},{key:"GetPriceHistoryData",value:function(){var t,e=this.flyoutData.dataLoader.GetLoadTimeDataValue("priceHistory",void 0);if(e&&e.priceHistoryData&&e.productDetails){var i=this.flyoutData.dataLoader.GetLoadTimeDataValue("price",void 0),n=this.flyoutData.dataLoader.GetLoadTimeDataValue("base64ProductImage",void 0);t=new va(e,i,n,this.flyoutData.common.domain,this.flyoutData.experimentData)}if(!(t&&t.DailyPrices.length<=1))return t}},{key:"GetCheckoutUserData",value:(u=(0,t.Z)(n().mark((function t(){var e,i,o,a,r,s,l,c,u,d,h;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.flyoutData.common.currentDevice!==D.AS.Desktop||!this.flyoutData.experimentData.isExperimentActive(xt.H.expressCheckout)){t.next=27;break}if(t.prev=1,!this.IsExpressCheckout(this.apiResponse)){t.next=22;break}if(e=[],i=[],!this.flyoutData.dataLoader.GetLoadTimeDataValue(S.AutofillProfileEnabled,!0)){t.next=12;break}return t.next=10,this.GetProfilesData().catch((function(t){}));case 10:if(i=t.sent){o=Jr(i);try{for(o.s();!(a=o.n()).done;)r=a.value,this.IsValidProfile(r)&&e.push(r)}catch(t){o.e(t)}finally{o.f()}}case 12:if(s=[],l=[],!this.flyoutData.dataLoader.GetLoadTimeDataValue(S.AutofillCreditCardEnabled,!0)){t.next=20;break}return t.next=18,this.GetPaymentsData().catch((function(t){}));case 18:if(l=t.sent){c=Jr(l);try{for(c.s();!(u=c.n()).done;)(d=u.value).Guid&&d.MaskedCardNumber&&d.ExpMonth&&d.ExpYear&&d.FullName&&s.push(d)}catch(t){c.e(t)}finally{c.f()}}case 20:return h=e.length>0&&s.length>0&&this.flyoutData.experimentData.isExperimentActive(xt.H.expressCheckoutFillDetails),t.abrupt("return",new _a(i,l,e,s,h));case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(1);case 27:return t.abrupt("return",void 0);case 28:case"end":return t.stop()}}),t,this,[[1,24]])}))),function(){return u.apply(this,arguments)})},{key:"IsValidProfile",value:function(t){if(t.City&&t.FullName&&t.FirstName&&t.LastName&&t.Country&&t.State&&t.Zip&&t.Guid&&t.AddressLines&&"US"===t.Country.toUpperCase()&&t.Emails&&t.Emails.length>0&&t.PhoneNumbers&&t.PhoneNumbers.length>0){var e=!1,i=t.AddressLines.split("\n");if(i.length>=1&&i[0].trim().length>0&&(e=!0),!e)return!1;var n=t.PhoneNumbers[0],o=!1;if(n){var a=n.replace(/\D/g,"");a&&a.length>=10&&(o=!0)}if(!o)return!1;var r=t.Emails[0],s=!1;if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)&&(s=!0),!s)return!1;var l=!1,c=ht(t.State);return t.Zip.length>=5&&/^\d+$/.test(t.Zip.substr(0,5))&&c[1]&&pt(t.Zip,c[0])&&(l=!0),!!l}return!1}},{key:"GetRatingsAndReviewsData",value:function(){var t=this.flyoutData.dataLoader.GetLoadTimeDataValue("ratingReview",void 0),e=this.flyoutData.dataLoader.GetLoadTimeDataValue("extracted_entity",void 0);return Fr.create(t,e)}},{key:"GetNudgeTipsData",value:function(){try{if(this.apiResponse){var t=this.apiResponse.retailerData;if(t){var e=t.tips,i=[];if(e){var n,o=Jr(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;a&&i.push(new Ur(a.text,a.iconType,a.minimumPurchase,t,t.checkoutPageUrl))}}catch(t){o.e(t)}finally{o.f()}}return new rr(i)}}}catch(t){}}},{key:"GetProfilesData",value:(c=(0,t.Z)(n().mark((function t(){var e,i,o,a,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pageHandlerModule.GetProfilesData().catch((function(t){return Promise.reject("unable to find profiles.")}));case 2:if(e=t.sent,i=[],!(e&&e.length>0)){t.next=11;break}o=Jr(e);try{for(o.s();!(a=o.n()).done;)(r=a.value)&&i.push(new Sr(r))}catch(t){o.e(t)}finally{o.f()}return t.abrupt("return",Promise.resolve(i));case 11:return t.abrupt("return",Promise.reject("can not find profiles"));case 12:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"GetPaymentsData",value:(r=(0,t.Z)(n().mark((function t(){var e,i,o,a,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pageHandlerModule.GetPaymentsData().catch((function(t){return Promise.reject("unable to find payments.")}));case 2:if(e=t.sent,i=[],!e){t.next=11;break}o=Jr(e);try{for(o.s();!(a=o.n()).done;)(r=a.value)&&i.push(new cr(r))}catch(t){o.e(t)}finally{o.f()}return t.abrupt("return",Promise.resolve(i));case 11:return t.abrupt("return",Promise.reject("can not find payments"));case 12:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"GetProductHistoryData",value:function(){var t=this.flyoutData.dataLoader.GetLoadTimeDataValue("webAssistEntities",void 0),e=[];return t&&t.length>0&&t.forEach((function(t){var i=new Cr(t);i.domain&&i.entity.price&&i.title&&e.push(i)})),e}},{key:"GetRewardData",value:function(){try{if(this.apiResponse){var t=this.apiResponse.rewards,e=this.flyoutData.dataLoader.GetLoadTimeDataValue("activateRewardsStatus",null);if(t)return new Hr(t,e,this.flyoutData.common.openedWith,this.flyoutData.experimentData)}}catch(t){}}},{key:"GetTopRetailerData",value:function(){try{if(this.apiResponse){var t=this.apiResponse.cashback;if(t)return new zr(t)}}catch(t){}}},{key:"GetGroceryData",value:function(){try{if(this.apiResponse)if(this.apiResponse.groceryOffers)return new ar(this.apiResponse)}catch(t){}}},{key:"createDataWithErrorHandling",value:(i=(0,t.Z)(n().mark((function t(e){var i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,t.t0=e,t.next=t.t0===D.GX.CASHBACK?4:t.t0===D.GX.COUPON?6:t.t0===D.GX.PRICECOMPARISON?10:t.t0===D.GX.PRICEHISTORY?12:t.t0===D.GX.NUDGETIPSDATA?14:t.t0===D.GX.CHECKOUTAUTOFILL?16:t.t0===D.GX.RATINGSANDREVIEWS?20:t.t0===D.GX.PRODUCTHISTORY?22:t.t0===D.GX.REWARD?24:t.t0===D.GX.PAYMENT_OPTIONS?26:t.t0===D.GX.EXCLUSIVECOUPONS?28:t.t0===D.GX.VIRTUAL_CARD?31:t.t0===D.GX.TOP_RETAILERS?33:t.t0===D.GX.GROCERY_COUPON?35:t.t0===D.GX.ORDERSTATUSTRACKING?37:t.t0===D.GX.ViewedProductPriceDrop?39:t.t0===D.GX.SUSTAINABILITY?40:t.t0===D.GX.PINTEREST?42:46;break;case 4:return this.flyoutData.dataStoreModule.CashBackData=this.GetCashBackData(),t.abrupt("break",46);case 6:return t.next=8,this.GetCouponData();case 8:return this.flyoutData.dataStoreModule.CouponData=t.sent,t.abrupt("break",46);case 10:return this.flyoutData.dataStoreModule.PriceComparisonData=this.GetPriceComparisonData(),t.abrupt("break",46);case 12:return this.flyoutData.dataStoreModule.PriceHistoryData=this.GetPriceHistoryData(),t.abrupt("break",46);case 14:return this.flyoutData.dataStoreModule.NudgeTipsData=this.GetNudgeTipsData(),t.abrupt("break",46);case 16:return t.next=18,this.GetCheckoutUserData();case 18:return this.flyoutData.dataStoreModule.CheckoutUserData=t.sent,t.abrupt("break",46);case 20:return this.flyoutData.dataStoreModule.RatingsAndReviewsData=this.GetRatingsAndReviewsData(),t.abrupt("break",46);case 22:return this.flyoutData.dataStoreModule.ProductHistoryData=this.GetProductHistoryData(),t.abrupt("break",46);case 24:return this.flyoutData.dataStoreModule.RewardData=this.GetRewardData(),t.abrupt("break",46);case 26:return this.flyoutData.dataStoreModule.PaymentOptionsData=this.GetPaymentOptionsData(),t.abrupt("break",46);case 28:return t.next=30,this.GetExclusiveCouponData();case 30:this.flyoutData.dataStoreModule.ExclusiveCouponsData=t.sent;case 31:return this.flyoutData.dataStoreModule.VirtualCardData=this.GetVirtualCardData(),t.abrupt("break",46);case 33:return this.flyoutData.dataStoreModule.TopRetailerData=this.GetTopRetailerData(),t.abrupt("break",46);case 35:return this.flyoutData.dataStoreModule.GroceryCouponData=this.GetGroceryData(),t.abrupt("break",46);case 37:return this.flyoutData.dataStoreModule.OrderTrackingData=this.GetOrderTrackingData(),t.abrupt("break",46);case 39:this.flyoutData.dataStoreModule.ViewedProductListData=this.GetViewedProductPriceDropData();case 40:return this.flyoutData.dataStoreModule.SustainabilityData=this.GetSustainabilityData(),t.abrupt("break",46);case 42:return t.next=44,this.GetPinterestData();case 44:return this.flyoutData.dataStoreModule.PinterestData=t.sent,t.abrupt("break",46);case 46:t.next=52;break;case 48:t.prev=48,t.t1=t.catch(0),i=new o.Z(a.xu.OnErrorInvoked),this.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"Data creation Exception: ".concat(e," ").concat(Ma.getErrorString(t.t1)),i);case 52:case"end":return t.stop()}}),t,this,[[0,48]])}))),function(t){return i.apply(this,arguments)})},{key:"GetViewedProductPriceDropData",value:function(){try{var t=this.flyoutData.dataLoader.GetLoadTimeDataValue("notification_data",void 0);if(t)return new Xr(t)}catch(t){}}},{key:"GetSustainabilityData",value:function(){if(this.apiResponse){var t=this.apiResponse.shouldRenderSustainability;if(t)return new Zr(t,this.flyoutData.experimentData)}}},{key:"GetOrderTrackingData",value:function(){try{var t=[],e=this.flyoutData.dataLoader.GetLoadTimeDataValue(S.PackageTrackingFreShown,void 0),i=this.flyoutData.dataLoader.GetLoadTimeDataValue(S.PackageTrackingUserConsented,void 0),n=this.flyoutData.dataLoader.GetLoadTimeDataValue(S.PackageTrackerResponse,void 0),o=this.flyoutData.dataLoader.GetLoadTimeDataValue(S.ShouldShowPackageTrackingNotification,void 0);if(n&&n.length>0){var a,r=Jr(n);try{for(r.s();!(a=r.n()).done;){var s=a.value,l=null==s?void 0:s.listOfProducts,c=[];if(l){var u,d=Jr(l);try{for(d.s();!(u=d.n()).done;){var h=u.value;h&&c.push(new br(h.productImageUrl,h.productName))}}catch(t){d.e(t)}finally{d.f()}}s&&t.push(new sr(s,c))}}catch(t){r.e(t)}finally{r.f()}}return new lr(e,i,t,o)}catch(t){}}},{key:"IsExpressCheckout",value:function(t){if(t&&t.checkoutData&&t.checkoutData.isExpressCheckoutEnabled){var e,i=null===(e=this.flyoutData.dataStoreModule.CouponData)||void 0===e?void 0:e.Coupons,n=this.flyoutData.common.pageStatus.ExpressCheckoutStatus&&(!this.flyoutData.common.pageStatus.AutoApplyStatus||!(i&&i.length>0))&&void 0===this.flyoutData.common.edgeDriverDataForFlyout,o=this.flyoutData.common.edgeDriverDataForFlyout&&this.flyoutData.common.edgeDriverDataForFlyout.is_auto_apply_completed&&this.flyoutData.common.edgeDriverDataForFlyout.express_checkout_status;return n||o}return!1}},{key:"getDomainNameFromUrl",value:function(t){try{var e,i=new URL(t);return i&&i.hostname&&(e=this.getDomainNameFromHostname(i.hostname)),e}catch(t){}return null}},{key:"getDomainNameFromHostname",value:function(t){if(!t)return"";var e=t.toLowerCase().match(/(w){3}.?\./);return e&&null!=e.index&&e[0]?t.substring(e.index+e[0].length):t}},{key:"GetPaymentOptionsData",value:function(){var t=this.flyoutData.dataLoader.GetLoadTimeDataValue("paymentOptions",void 0),e=[];return t&&t.length>0&&t.forEach((function(t){e.push(new ur(t))})),e}},{key:"GetVirtualCardData",value:function(){var t=this.flyoutData.dataLoader.GetLoadTimeDataValue("virtualCard",void 0);return new qr(t)}}]),e}(),es=ts,is=(0,l.Z)((function t(){(0,s.Z)(this,t),(0,I.Z)(this,"CouponData",void 0),(0,I.Z)(this,"PriceComparisonData",void 0),(0,I.Z)(this,"PriceHistoryData",void 0),(0,I.Z)(this,"CashBackData",void 0),(0,I.Z)(this,"ApiData",void 0),(0,I.Z)(this,"CheckoutUserData",void 0),(0,I.Z)(this,"NudgeTipsData",void 0),(0,I.Z)(this,"RatingsAndReviewsData",void 0),(0,I.Z)(this,"ProductHistoryData",void 0),(0,I.Z)(this,"RewardData",void 0),(0,I.Z)(this,"PaymentOptionsData",void 0),(0,I.Z)(this,"ExclusiveCouponsData",void 0),(0,I.Z)(this,"OrderTrackingData",void 0),(0,I.Z)(this,"VirtualCardData",void 0),(0,I.Z)(this,"SustainabilityData",void 0),(0,I.Z)(this,"TopRetailerData",void 0),(0,I.Z)(this,"GroceryCouponData",void 0),(0,I.Z)(this,"ViewedProductListData",void 0),(0,I.Z)(this,"PinterestData",void 0),(0,I.Z)(this,"SimilarSellerData",void 0)})),ns=(0,l.Z)((function t(){(0,s.Z)(this,t),(0,I.Z)(this,"name",void 0),(0,I.Z)(this,"supported",void 0),(0,I.Z)(this,"variant",void 0)})),os=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"experiments",void 0),(0,I.Z)(this,"experimentsSet",void 0),(0,I.Z)(this,"enablePCBannerUX",!1),this.experiments=new Map,this.experimentsSet=new Set}return(0,l.Z)(t,[{key:"Create",value:function(t){var e=this,i=new Map;if(t&&t.length>0){var n=Object.values(xt.H);t.forEach((function(t){var o,a=new ns;a.name=t.name,a.supported=!1,(null===(o=t.params)||void 0===o?void 0:o.length)>0&&(a.variant=t.params[0].value),n.includes(t.name)&&(a.supported=!0,e.experimentsSet.add(t.name)),i.set(a.name,a)}))}this.experiments=i}},{key:"CreateFromJsonStr",value:function(t){try{if(t){var e=JSON.parse(t);this.Create(e)}}catch(t){}}},{key:"isExperimentActive",value:function(t){return this.experimentsSet.has(t)}},{key:"setShowPCBannerUX",value:function(t,e,i,n){this.enablePCBannerUX=void 0!==t&&t||void 0!==e&&e&&void 0!==i&&i.CompetingPrices&&i.CompetingPrices.length>0&&void 0!==n&&n}},{key:"isPCBannerUXExperimentActive",value:function(){return(this.experimentsSet.has(xt.H.pcBannerUXExperimentation1)||this.experimentsSet.has(xt.H.pcBannerUXExperimentation2)||this.experimentsSet.has(xt.H.pcBannerUXExperimentation3)||this.experimentsSet.has(xt.H.pcBannerUXExperimentation4)||this.experimentsSet.has(xt.H.pcBannerUXExperimentation5)||this.experimentsSet.has(xt.H.pcBannerUXExperimentation6))&&this.enablePCBannerUX}},{key:"isVariantActive",value:function(t,e){var i;return!!this.isExperimentActive(t)&&(null===(i=this.experiments.get(t))||void 0===i?void 0:i.variant)===e}}]),t}(),as=function(){function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"couponEmptyCouponSubTitle","We couldn't find any coupons at this time."),(0,I.Z)(this,"couponEmptyCouponTitle","Check back for coupons!"),(0,I.Z)(this,"couponAutoApplyButton","Try all Coupons"),(0,I.Z)(this,"couponAutoApplyButtonRetry","Retry all Coupons"),(0,I.Z)(this,"couponAutoApplyButtonAlt","Apply Coupons"),(0,I.Z)(this,"mergedAutoApplyButton","Try all coupons and activate cash back"),(0,I.Z)(this,"pcBestPriceHeader","You have the best price!"),(0,I.Z)(this,"pcBestPriceRefreshHeader","You have the $1"),(0,I.Z)(this,"pcBestPriceTitle","Best Price"),(0,I.Z)(this,"pcLowest","Lowest"),(0,I.Z)(this,"pcLowestUpdated","Lowest Price"),(0,I.Z)(this,"pcNotificationSeeMoreInfo","See more info"),(0,I.Z)(this,"pcNotificationVisitItem","Visit item"),(0,I.Z)(this,"commonCMAutoShowDisable","Don't show this automatically"),(0,I.Z)(this,"commonCMAutoShowEnable","Show this flyout automatically"),(0,I.Z)(this,"commonSnoozeShopping","Snooze shopping notifications"),(0,I.Z)(this,"turnOffSnooze","Turn off snooze"),(0,I.Z)(this,"snoozeTooltip","Snooze"),(0,I.Z)(this,"remindLater","Remind me later"),(0,I.Z)(this,"commonCMManage","Manage Settings"),(0,I.Z)(this,"commonAltSettings","Settings and more"),(0,I.Z)(this,"commonMoreOptionsLabel","More options"),(0,I.Z)(this,"commonContextualTab","Shopping assistant"),(0,I.Z)(this,"commonHomeTab","Discover"),(0,I.Z)(this,"commonErrorTitle","It's not you, it's us"),(0,I.Z)(this,"commonErrorSubTitle","We will be back soon"),(0,I.Z)(this,"commonLearnMore","Learn more"),(0,I.Z)(this,"commonSave","Save $1"),(0,I.Z)(this,"commonMicrosoftRewards","Microsoft Rewards"),(0,I.Z)(this,"commonAriaLogo","$1 logo"),(0,I.Z)(this,"commonGotIt","Got it"),(0,I.Z)(this,"couponCopied","Copied"),(0,I.Z)(this,"couponCopyLabel","Copy code"),(0,I.Z)(this,"couponCopyLabelRefresh","Copy"),(0,I.Z)(this,"couponSectionTitle","1 coupon"),(0,I.Z)(this,"couponTitle","Coupons found!"),(0,I.Z)(this,"couponTitleWithNum","$1 Coupons found!"),(0,I.Z)(this,"couponTitleWithNumSingular","1 Coupon found!"),(0,I.Z)(this,"couponExpandableTitleWithNum","$1 coupons found"),(0,I.Z)(this,"couponExpandableTitleWithNumSingular","1 coupon found"),(0,I.Z)(this,"couponExpandableTitleViewCoupons","View coupons"),(0,I.Z)(this,"bgaaSuccessLeftTitle","You could save"),(0,I.Z)(this,"bgaaSuccessRightTitle","Coupon Success"),(0,I.Z)(this,"bgaaSuccessRightText","Very high"),(0,I.Z)(this,"bgaaFailedTitle","You have the best price"),(0,I.Z)(this,"bgaaFailedLeftTitle","coupons"),(0,I.Z)(this,"bgaaFailedLeftText","✓ All checked"),(0,I.Z)(this,"bgaaFailedRightTitle","Results"),(0,I.Z)(this,"bgaaFailedRightText","No valid coupons"),(0,I.Z)(this,"couponAutoApplyWithoutCB","Try all coupons without cash back"),(0,I.Z)(this,"commonFixedTitle","Shopping in Microsoft Edge"),(0,I.Z)(this,"commonFixedTitleForSmallNotification","Shopping in Edge"),(0,I.Z)(this,"commonMicrosoftPolicy","Microsoft Privacy Statement"),(0,I.Z)(this,"thirdPartCookiesText","third-party cookies"),(0,I.Z)(this,"commonClose","Close"),(0,I.Z)(this,"snoozeButton","Snooze"),(0,I.Z)(this,"ariaSnoozeOn","Snooze On"),(0,I.Z)(this,"ariaSnoozeoff","Snooze Off"),(0,I.Z)(this,"pcPriceSectionTitle","Compare with other retailers"),(0,I.Z)(this,"cbActivateButtonRefresh","Activate now"),(0,I.Z)(this,"cbBingActivateButton","Join now and activate cash back"),(0,I.Z)(this,"cbActivatedButton","Cash back is activated!"),(0,I.Z)(this,"cbLearnMore","See offer details on Bing Rebates"),(0,I.Z)(this,"cbConfirmationTitle","Thanks for shopping with Bing Rebates!"),(0,I.Z)(this,"cbTopRetailerTitle","Popular cash back partners"),(0,I.Z)(this,"pcbConfirmationTitle","You can earn up to $1 cash back with $2"),(0,I.Z)(this,"pcbBingRebates","Bing Rebates!"),(0,I.Z)(this,"cbAutoShowTitle","Get cash back"),(0,I.Z)(this,"cbAutoShowButtonMessage","Activate up to $1 cashback"),(0,I.Z)(this,"cbConfirmationMessage","You'll get cash back for any eligible purchases. We'll let you know in the next few days."),(0,I.Z)(this,"pcbConfirmationMessage","The funds can be redeemed within 90 days, when the sale is confirmed. We’ll email you to let you know if it’s available"),(0,I.Z)(this,"cbTurnedOffTitle","Bing Rebates was turned off for this purchase"),(0,I.Z)(this,"cbTurnedOffMessage","Sometimes this happens when you use another coupon or rebates service. But you can easily turn it back on to earn cash back."),(0,I.Z)(this,"cbEnableRebatesButton","Activate Bing Rebates"),(0,I.Z)(this,"cbDontFindAutomatically","Don't find rebates automatically"),(0,I.Z)(this,"cbFindAutomatically","Show rebates when available"),(0,I.Z)(this,"notificationPrivacyTitle","Microsoft Edge may remind you of products you’ve visited to help you save time and money."),(0,I.Z)(this,"notificationPrivacyDesc","If you are shopping in InPrivate mode, you will never be reminded about products you visit. If you wish to turn off reminders for a product, you can click ‘Don’t remind me again for this product’ (below). Additional controls can be found under the ‘…’ menu at the top right of this popup. If you wish to disable Shopping in Microsoft Edge entirely, you can visit ‘Manage Edge Shopping’."),(0,I.Z)(this,"reminderDisabled","Disable shopping reminders"),(0,I.Z)(this,"reminderEnabled","Enable shopping reminders"),(0,I.Z)(this,"reminderInfoButtonName","Learn more about product reminders"),(0,I.Z)(this,"cbPreviousTransactions","Previous transactions"),(0,I.Z)(this,"cbRebatesOff","off"),(0,I.Z)(this,"cbRebatesOn","on"),(0,I.Z)(this,"cbNonStackableCoupon","This coupon can't be used with Bing Rebates"),(0,I.Z)(this,"cbRetailerTitle","Up to $1 cash back"),(0,I.Z)(this,"cbSnapshotTitle","Your Bing Rebates snapshot"),(0,I.Z)(this,"cbViewAccount","View account activity"),(0,I.Z)(this,"cbCurrBalance","current balance"),(0,I.Z)(this,"cbErrorMessage","Cash back activation failed"),(0,I.Z)(this,"cbProcessing","Processing"),(0,I.Z)(this,"cbPrivacyMessage","You will join and receive emails about $1, which include offers about partner products."),(0,I.Z)(this,"cbPrivacyMessageTerm","Terms | Privacy & Cookies"),(0,I.Z)(this,"cbMergedSingularTitle","We found 1 coupon and up to $2 cash back!"),(0,I.Z)(this,"cbPromotionsOnSubHeader","on first eligible purchase!"),(0,I.Z)(this,"trSectionTitle","Popular cashback partners"),(0,I.Z)(this,"bannerFoundBestPrice","We've found |a better| price!"),(0,I.Z)(this,"bannerFoundBestPriceAlt","We found you a better price!"),(0,I.Z)(this,"bannerYouHaveBestPrice","You have |the best price!|"),(0,I.Z)(this,"bannerSubTitleFlyout","Click below to copy a coupon code, or we can help auto apply at check out!"),(0,I.Z)(this,"bannerShowPriceHistory","Show price history"),(0,I.Z)(this,"bannerSeeDetails","See details"),(0,I.Z)(this,"bannerViewAll","View all"),(0,I.Z)(this,"bannerVisitItem","Visit item in new tab"),(0,I.Z)(this,"bannerViewAllCouponsSingular","View coupon"),(0,I.Z)(this,"getDeal","Get Deal"),(0,I.Z)(this,"dealsTitle","Trending deals on $1"),(0,I.Z)(this,"dealsSubTitle","Best deals for you on $1"),(0,I.Z)(this,"phTitlePriceDropped","The price on this product has dropped!"),(0,I.Z)(this,"phTitlePriceIncrease","The price on this product has increased"),(0,I.Z)(this,"phTitleStable","The price on this product is stable"),(0,I.Z)(this,"phToday","today"),(0,I.Z)(this,"phLow","low"),(0,I.Z)(this,"phHigh","high"),(0,I.Z)(this,"phMedian","median"),(0,I.Z)(this,"phStableLabel","stable"),(0,I.Z)(this,"phPriceDrop","Price drop"),(0,I.Z)(this,"phPriceIncrease","Price increase"),(0,I.Z)(this,"phPriceStable","Price stable"),(0,I.Z)(this,"phOldPrice","Old price"),(0,I.Z)(this,"phNewPrice","New price"),(0,I.Z)(this,"phGraphLabel","The price has not fluctuated much. Today price is $1"),(0,I.Z)(this,"phTooltipText","Price drop/increase is determined by >= 2% change from the historical median price ($1) seen by users for this product."),(0,I.Z)(this,"rrExpertAndVideoReviews","Expert reviews and related videos"),(0,I.Z)(this,"rrExpertReviews","Expert reviews"),(0,I.Z)(this,"rrVideoReviews","Related videos"),(0,I.Z)(this,"checkoutCreditOrDebitCardDropDown","Choose a different Credit or Debit card:"),(0,I.Z)(this,"checkoutShippingAddress","Shipping address:"),(0,I.Z)(this,"checkoutPaymentInfo","Payment info:"),(0,I.Z)(this,"checkoutSameBilling","Billing address is same as shipping address"),(0,I.Z)(this,"checkoutFillOnly","Quick and easy checkout"),(0,I.Z)(this,"checkoutButtonWithoutAA","Fill details"),(0,I.Z)(this,"checkoutButtonWithoutAAForOtherPayment","Fill details and checkout with $1"),(0,I.Z)(this,"checkoutSectionTitle","Autofill checkout details"),(0,I.Z)(this,"checkoutAddressSectionTitle","Autofill address details"),(0,I.Z)(this,"checkoutPaymentSectionTitle","Autofill payment details"),(0,I.Z)(this,"checkoutValidTill","valid till"),(0,I.Z)(this,"checkoutZip","ZIP"),(0,I.Z)(this,"ytSectionTitleOnRetailer","Saved from YouTube"),(0,I.Z)(this,"ytHeader","We saved $1 exclusive coupons from $2"),(0,I.Z)(this,"ytHeaderSingular","We saved 1 exclusive coupon from $2"),(0,I.Z)(this,"ytHeaderPermission","We found $1 exclusive coupons from $2"),(0,I.Z)(this,"ytHeaderPermissionSingular","We found 1 exclusive coupon from $2"),(0,I.Z)(this,"ytPhotoLabel","Profile picture for $1"),(0,I.Z)(this,"ytMoreCoupons","More coupons from Youtube"),(0,I.Z)(this,"ytSectionTitleOnYoutube","Your coupons from Youtube"),(0,I.Z)(this,"ytShopOn","Shop on $1"),(0,I.Z)(this,"ytSaveCouponsPermission","Save coupons for me"),(0,I.Z)(this,"ytDontSaveCouponsPermission","Never save coupons from Youtube"),(0,I.Z)(this,"prodHSectionTitle","Your recently viewed items"),(0,I.Z)(this,"prodHPriceDropRefresh","$1 price drop"),(0,I.Z)(this,"prodHPriceIncreaseRefresh","$1 price increase"),(0,I.Z)(this,"prodHPriceDropTitle","Price drop on recently viewed item"),(0,I.Z)(this,"prodHPriceDropSave","Save "),(0,I.Z)(this,"prodHPriceDropDonotRemindMe","Don’t remind me again for this product"),(0,I.Z)(this,"prodHPriceDropViewAt","View at $1"),(0,I.Z)(this,"prodHAnnotation","was $1"),(0,I.Z)(this,"prodHDeleteItem","delete item"),(0,I.Z)(this,"similarSellerNotificationError","Failed to add product!"),(0,I.Z)(this,"similarSellerStringCollapsedAmazon","Other Amazon sellers found!"),(0,I.Z)(this,"similarSellerStringCollapsed","Other sellers found!"),(0,I.Z)(this,"similarSellerAddToCartTitle","Add to cart"),(0,I.Z)(this,"similarSellerAddedToCartTitle","Added to cart"),(0,I.Z)(this,"similarSellerShipFromString","Ship from:"),(0,I.Z)(this,"similarSellerRatingLabel","Rating:"),(0,I.Z)(this,"similarSellerFreeDelivery","FREE Delivery"),(0,I.Z)(this,"tipsTiltleSingle","1 tip found!"),(0,I.Z)(this,"tipsSubTitleSingle","1 tip found"),(0,I.Z)(this,"paymentOptionLabel","More payment options at checkout"),(0,I.Z)(this,"microsoftWalletLinkText","Microsoft Wallet"),(0,I.Z)(this,"virtualCardCardHolderNameHeader","Your name"),(0,I.Z)(this,"virtualCardBillingAddressHeader","Your billing address"),(0,I.Z)(this,"virtualCardBillingInfoHeader","Your name & billing address"),(0,I.Z)(this,"virtualCardNumberHeader","Virtual card number"),(0,I.Z)(this,"virtualCardExpirationHeader","Expiration"),(0,I.Z)(this,"virtualCardCVCHeader","CVC"),(0,I.Z)(this,"visualizedCardHolderHeader","Card Holder"),(0,I.Z)(this,"visualizedCardExpiresHeader","Expires"),(0,I.Z)(this,"showContentToggleTooltip","Show content"),(0,I.Z)(this,"hideContentToggleTooltip","Hide content"),(0,I.Z)(this,"copyButtonTooltip","Copy"),(0,I.Z)(this,"virtualCardSystemFailureHeader","Uh oh"),(0,I.Z)(this,"buyNowPayLater","Buy now, pay later"),(0,I.Z)(this,"masterCardPayment","Master"),(0,I.Z)(this,"visaPayment","Visa"),(0,I.Z)(this,"amexPayment","American Express"),(0,I.Z)(this,"discoverPayment","Discover"),(0,I.Z)(this,"disablePackageTrackingFromMenuText","Disable order tracking"),(0,I.Z)(this,"enablePackageTrackingFromMenuText","Enable order tracking"),(0,I.Z)(this,"packageTrackingOptInButtonText","Track my orders"),(0,I.Z)(this,"packageTrackingOptOutButtonText","Do not track my orders"),(0,I.Z)(this,"packageTrackingDeactivatedTitle","Order tracking is Off"),(0,I.Z)(this,"packageTrackingActivatedTitle","Order tracking is On"),(0,I.Z)(this,"packageTrackingOptInAcknowledgement","Order tracking is activated!"),(0,I.Z)(this,"packageTrackingOptInAcknowledgementFailure","Order tracking failed to activate"),(0,I.Z)(this,"packageTrackingOptOutAcknowledgement","Successfully opted out of order tracking"),(0,I.Z)(this,"packageTrackingOptOutAcknowledgementFailure","Failed to opt out of order tracking"),(0,I.Z)(this,"packageTrackingNotificationTitle","Track your orders now!"),(0,I.Z)(this,"packageTrackingNotificationDescription","We will keep you updated on your order statuses."),(0,I.Z)(this,"checkBackForOrders","Check back for orders!"),(0,I.Z)(this,"deteTrackerText","Delete order tracker"),(0,I.Z)(this,"rewardGiftConsentSubtext","Offer valid for 1 per person/account within first 14 days of joining Microsoft Rewards."),(0,I.Z)(this,"rewardsPrivacyText","Privacy"),(0,I.Z)(this,"rewardsTermsText","Terms"),(0,I.Z)(this,"giftCardDismiss","Don't show this again"),(0,I.Z)(this,"productDetailsOrderTracking","$1 Order containing Products $2!"),(0,I.Z)(this,"feedbackPrompt","Do you find this content useful?"),(0,I.Z)(this,"feedbackThanks","Thanks for your feedback!"),(0,I.Z)(this,"feedbackAriaLike","Thumbs up"),(0,I.Z)(this,"feedbackAriaDislike","Thumbs down"),(0,I.Z)(this,"feedbackAriaClose","Close feedback"),(0,I.Z)(this,"bnplFeedbackPrompt","Did this feature help with your shopping experience?"),(0,I.Z)(this,"attCouponHeaderLocked","Unlock a better deal!"),(0,I.Z)(this,"attCouponHeaderUnlocked","Unlocked better deal!"),(0,I.Z)(this,"autosMarketplaceSectionTitle","Auto Marketplace listings"),(0,I.Z)(this,"autosMarketplaceHeader","Other cars you might like!"),(0,I.Z)(this,"autosMarketplaceDisclaimer","Microsoft Edge can help you find your next car! The recommendations we offer are based on the model of car you're looking for, year, mileage, and price."),(0,I.Z)(this,"autosMarketplaceAccidentStatement","Our suggestions may include cars with no major accidents or damages reported."),(0,I.Z)(this,"autosMarketplaceOnlineListing","Online*"),(0,I.Z)(this,"autosMarketplaceOnlineListingDisclaimer","*Shipping charges may apply. Contact seller for more information."),(0,I.Z)(this,"autosMarketplaceSeeMoreLink","See more on Microsoft Start Autos"),(0,I.Z)(this,"autosMarketplaceNotificationHeader","A car you might like!"),(0,I.Z)(this,"autosMarketplaceSeeMoreButton","See more"),(0,I.Z)(this,"autosMarketplaceSeeThisCar","See this car"),(0,I.Z)(this,"autosMarketplacePopular","Popular"),(0,I.Z)(this,"autosMarketplaceGreatDeal","Great deal"),(0,I.Z)(this,"gcSectionTitle","Grocery coupons"),(0,I.Z)(this,"gcbSectionTitle","Grocery cash back"),(0,I.Z)(this,"gcbActivatedSectionTitle","Grocery cash back activated"),(0,I.Z)(this,"gcbButton","Shop and Activate"),(0,I.Z)(this,"gcbActivated","Activated"),(0,I.Z)(this,"gcbNotifRebates","Bing Rebates account"),(0,I.Z)(this,"gcbNotifSubtitle","You'll get cash back for any eligible purchases within 24 hours of your purchase."),(0,I.Z)(this,"cbMainTitleOff","Get up to $1 cash back"),(0,I.Z)(this,"pcbMainTitleOff","Get $1 cash back with Bing Rebates!"),(0,I.Z)(this,"cbMainTitleOn","You're earning up to $1 cash back!"),(0,I.Z)(this,"cbMainTitleOnStoreWide","You're earning up to $1 cash back storewide!"),(0,I.Z)(this,"cbMainTitleOffStoreWide","Get up to $1 cash back storewide!"),(0,I.Z)(this,"cbPersonalized","You're earning $1 cash back with Bing Rebates!"),(0,I.Z)(this,"cbTitleSignInOn","You're earning up to $1 cash back with Bing Rebates!"),(0,I.Z)(this,"cbPromotionsSubTitle","And up to $1 cash back"),(0,I.Z)(this,"cbPromotionsSubTitleStoreWide","And up to $1 cash back storewide"),(0,I.Z)(this,"cbCashBackOnOff","Cash back is $1"),(0,I.Z)(this,"cbLifetimeEarned","Lifetime earned $1"),(0,I.Z)(this,"cbToolTips","Edge Shopping is powered by Bing Rebates, part of Microsoft Rewards."),(0,I.Z)(this,"bannerFoundCoupons","We've found |$1 coupons| for this site!"),(0,I.Z)(this,"bannerFoundCouponsSingular","We've found |1 coupon| for this site!"),(0,I.Z)(this,"bannerPriceDropTitle","There was a |$1 price drop| for this product"),(0,I.Z)(this,"bannerPriceIncreaseTitle","There was a |$1 price increase| for this product"),(0,I.Z)(this,"bannerPriceStableTitle","There have been |no drastic price changes| for this product"),(0,I.Z)(this,"bannerCouponSingularTitle","Shoppers save money |$1%| of the time with this coupon"),(0,I.Z)(this,"bannerCouponPluralTitle","Shoppers save money |$1%| of the time with these coupons"),(0,I.Z)(this,"bannerCashBackOffTitle","You could be earning |$1 cash back!|"),(0,I.Z)(this,"bannerCashBackOnTitle","|Cash back is on!| You're earning up to $1 cash back!"),(0,I.Z)(this,"bannerRecentPurchase","You earned $1 from a recent purchase!"),(0,I.Z)(this,"bannerLifetime","Lifetime earned: $1"),(0,I.Z)(this,"microsoftWalletManage","Manage payment info in $1"),(0,I.Z)(this,"phPriceStableRefresh","Price is*br*$1"),(0,I.Z)(this,"ptCouponsTitle","$1 coupons found on $2"),(0,I.Z)(this,"ptCouponsTitleSingular","1 coupon found on $1"),(0,I.Z)(this,"privacyConsent","I consent to the placement of cookies on my browser to facilitate billing with the coupon provider as per $1"),(0,I.Z)(this,"privacyConsentNew","I allow placing of $1 on my device to help billing with the coupon provider as per $2"),(0,I.Z)(this,"rewardGiftCardConsent","You will receive emails about Microsoft Rewards, which include offers about Microsoft and partner products. $1 | $2"),(0,I.Z)(this,"rewardsjoinAckText","Keep shopping on Microsoft Edge for more savings and deals $1"),(0,I.Z)(this,"sectionSeeMore","See more ($1)"),(0,I.Z)(this,"couponSectionPluralTitle","$1 coupons"),(0,I.Z)(this,"couponSuccessful","$1% successful"),(0,I.Z)(this,"triviaTitleNew","On average our users save $2 on $1"),(0,I.Z)(this,"savingsFoundTitle","Your total savings on Edge: $1"),(0,I.Z)(this,"savingsFoundTriviaTitle","Average savings on $1: $2"),(0,I.Z)(this,"orderTrackingTitle","My Orders"),(0,I.Z)(this,"clippingMainTitle","Save $1 with this coupon"),(0,I.Z)(this,"clippingMainTitleSmallNotification","Save $1 with coupon"),(0,I.Z)(this,"clippingSubTitle","Click below to save |$1%| on this item at checkout"),(0,I.Z)(this,"defaultClippingTitle","Save money with this coupon"),(0,I.Z)(this,"defaultClippingSubTitle","Click below to save on this item at checkout"),(0,I.Z)(this,"clippingButtonTitle","Clip coupon"),(0,I.Z)(this,"clippedTitle","You will save $1 on this item at checkout"),(0,I.Z)(this,"clippedSubTitle","Coupon successfully clipped"),(0,I.Z)(this,"clippingMainTitleEnGb","Save $1 with this voucher"),(0,I.Z)(this,"defaultClippingTitleEnGb","Save money with this voucher"),(0,I.Z)(this,"clippingButtonTitleEnGb","Collect voucher"),(0,I.Z)(this,"clippedSubTitleEnGb","Voucher successfully collected"),(0,I.Z)(this,"bannerSave","Save $1 at $2"),(0,I.Z)(this,"bannerViewAllCoupons","View all $1 coupons"),(0,I.Z)(this,"phFinalDrop","$1% drop"),(0,I.Z)(this,"phFinalIncrease","$1% increase"),(0,I.Z)(this,"pcNotificationTitle","You can save $1"),(0,I.Z)(this,"commonYouCanSave","You can save"),(0,I.Z)(this,"pcNotificationTitleRefresh","You could save *br*$1!"),(0,I.Z)(this,"pcNotificationTitleSmall","Save *br*$1!"),(0,I.Z)(this,"pcNotificationNarratorIntro","New toolbar on screen. "),(0,I.Z)(this,"viewMorePricesButtonText","View more prices"),(0,I.Z)(this,"savingsHeader","You can save $1"),(0,I.Z)(this,"pcLowestPriceAria","$1, current price on $2"),(0,I.Z)(this,"pcCurrentPriceAria","$1, higher price on this page"),(0,I.Z)(this,"trAriaLabel","$1 cash back at $2, shop now!"),(0,I.Z)(this,"cbPromotionsTitle","Earn $1 bonus from Microsoft"),(0,I.Z)(this,"cbExpiryDateTime","ends in $1"),(0,I.Z)(this,"cbCommissionStr","$1 cash back"),(0,I.Z)(this,"cbPreviousCashbackDomain","Cash back earned on $1 from $2"),(0,I.Z)(this,"cbMergedTitle","We found $1 coupons and up to $2 cash back!"),(0,I.Z)(this,"rewardFailedSignin","Sign in Unsuccessful"),(0,I.Z)(this,"rewardTitleDefault","Get Microsoft Rewards"),(0,I.Z)(this,"rewardTitleEarnedMaximum","You've earned 5000 points!"),(0,I.Z)(this,"rewardTitleRewardsAdded","You've Earned $1 points!"),(0,I.Z)(this,"rewardTitleRewardTwo","Save $$ and earn rewards!"),(0,I.Z)(this,"rewardPointMax","5000"),(0,I.Z)(this,"rewardPerMaxPoint","/5000"),(0,I.Z)(this,"rewardDetail","Activate cash back and get |$1 points!|"),(0,I.Z)(this,"rewardDetailFirstLine","Activate cash back and get "),(0,I.Z)(this,"rewardDetailFirstLineBold","$1 points!"),(0,I.Z)(this,"rewardKeepExploringText","Keep shopping with Edge to earn more points!"),(0,I.Z)(this,"rewardDetailTwo","Click Microsoft Edge’s little blue tag to find"),(0,I.Z)(this,"rewardSignIn","Sign in to earn points"),(0,I.Z)(this,"rewardRedeem","Redeem"),(0,I.Z)(this,"rewardCoupons","Coupons"),(0,I.Z)(this,"rewardCashback","Cashback"),(0,I.Z)(this,"rewardRewards","Rewards"),(0,I.Z)(this,"rewardAssociateSignIn","Sign in"),(0,I.Z)(this,"similarSellerStringAmazon","Save $1 if you buy from a different Amazon seller!"),(0,I.Z)(this,"similarSellerString","Save $1 if you buy from a different seller!"),(0,I.Z)(this,"similarSellerStringSubtitleAmazon","Other Amazon sellers found"),(0,I.Z)(this,"similarSellerStringSubtitle","Other sellers found"),(0,I.Z)(this,"similarSellerNotificationTitle","You saved $1"),(0,I.Z)(this,"sustainabilityDescriptionLight","When you make purchases on Microsoft Edge, Microsoft donates money to reforestation |at no cost to you.|"),(0,I.Z)(this,"sustainabilityDescription","Microsoft makes donation to plant trees for purchases made on Edge. You’re making a difference by shopping with us!"),(0,I.Z)(this,"sustainabilityString","Microsoft plants trees when you shop!"),(0,I.Z)(this,"sustainabilityConfirmationTitle","You’re making a difference by shopping in Edge!"),(0,I.Z)(this,"similarSellerAddToCartAriaLable","Add to cart from other seller, Product price: $1, Product condition: $2"),(0,I.Z)(this,"tipsMainTitle","$1 tips found!"),(0,I.Z)(this,"tipsSubTitle","$1 tips found"),(0,I.Z)(this,"tipsFreeShipping","Get free shipping with a minimum purchase of $1"),(0,I.Z)(this,"tipsMinimumPurchase","Make a minimum purchase of $1"),(0,I.Z)(this,"virtualCardSystemFailureDescription","We are unable to retrieve your virtual card details. Please visit $1 for your virtual card details."),(0,I.Z)(this,"virtualCardSystemFailureLink","Visit $1"),(0,I.Z)(this,"virtualCardLinkSuccess","We successfully linked your Microsoft account to $1."),(0,I.Z)(this,"virtualCardLinkFail","We are unable to link your Microsoft account to $1. Please try again later."),(0,I.Z)(this,"cardPaymentOptionBanner","Credit or Debit card"),(0,I.Z)(this,"otherPaymentMethodBanner","Other ways to pay"),(0,I.Z)(this,"learnMoreLinkAriaLabel","Learn more about $1"),(0,I.Z)(this,"dismissMessageAriaLabel","Dismiss this message"),(0,I.Z)(this,"virtualCardDetailsActions","Actions"),(0,I.Z)(this,"msZipDescription","Microsoft does not charge you or get paid by this provider for the transaction."),(0,I.Z)(this,"giftCardTitle","Gift Card"),(0,I.Z)(this,"giftCardSubtitle","Join Microsoft Rewards and search in Bing for 5 days to get $1.25 Amazon gift card"),(0,I.Z)(this,"giftCardSubtitleFiveDollar","Join Microsoft Rewards and search in Bing for 5 days to get $5 Amazon gift card"),(0,I.Z)(this,"joinNowButtonText","Join now"),(0,I.Z)(this,"maybeLaterButtontext","Maybe later"),(0,I.Z)(this,"rewardJoinSuccess","You joined"),(0,I.Z)(this,"rewardOfferSuccess","See progress on"),(0,I.Z)(this,"attFlyoutLocked","Add $1 to your cart to unlock $2"),(0,I.Z)(this,"attFlyoutUnlocked","Congrats! You unlocked the $1 coupon"),(0,I.Z)(this,"attTooltipHeader","Get a better deal by adding $1 worth of items you like to your cart."),(0,I.Z)(this,"attTooltipText","Once your cart value exceeds $1 we'll show you the next best coupon. At checkout, this coupon will be applied and you'll end up saving more money. *Restrictions may apply.*"),(0,I.Z)(this,"gcbCashBack","$1 cash back"),(0,I.Z)(this,"gcbNotifTitle","Microsoft will add $1 to your $2"),(0,I.Z)(this,"pcNotificationdisclaimerText","Compensation was not a factor in the selection of this offer. To view all offers, 'See more info'."),(0,I.Z)(this,"pcdisclaimerText","Compensation and relevance influence offer ranking."),(0,I.Z)(this,"paneForYou","For You"),(0,I.Z)(this,"paneHome","Home"),(0,I.Z)(this,"paneNullStateMessage","Visit a shopping site to find savings​ with Microsoft Edge"),(0,I.Z)(this,"phTodayPriceAriaLabel","Today's price is $1"),(0,I.Z)(this,"phHighPriceAriaLabel","The highest price in history is $1 in $2"),(0,I.Z)(this,"phLowPriceArialLabel","The lowest price in history is $1 in $2"),(0,I.Z)(this,"zipPayPayment","Zip"),(0,I.Z)(this,"zipPayVirtualCardHeaderTitle","Pay with your Zip Visa Card"),(0,I.Z)(this,"zipPayVirtualCardHeaderDescription","We’ve automatically filled your card information from Zip. Please confirm your card information and copy and paste any information that we didn't automatically fill correctly."),(0,I.Z)(this,"zipPayVirtualCardHeaderAutofillFailedDescription","We are unable to autofill your card information from Zip. Please manually enter your Zip card information during checkout."),(0,I.Z)(this,"zipPayVirtualCardURL","https://zip.co/us"),(0,I.Z)(this,"zipPayVisualizedCardDetails","Illustration of Zip Visa card ending with $1, card holder $2, expires $3"),(0,I.Z)(this,"affirmPayment","Affirm"),(0,I.Z)(this,"affirmVirtualCardHeaderTitle","Pay with your Affirm virtual card"),(0,I.Z)(this,"affirmVirtualCardHeaderDescription","We securely auto filled your Affirm virtual card info and billing address to help save you time making this purchase."),(0,I.Z)(this,"affirmVirtualCardHeaderNoBillingInfoDescription","We securely auto filled your Affirm virtual card info to help save you time. To compete this purchase, please fill in your billing address."),(0,I.Z)(this,"affirmVirtualCardHeaderAutofillFailedDescription","We are unable to autofill your card information from Affirm. Please manually enter your Affirm card information during checkout."),(0,I.Z)(this,"affirmVirtualCardURL","https://www.affirm.com/user/signin"),(0,I.Z)(this,"affirmVisualizedCardDetails","Illustration of Affirm virtual card ending with $1, expires $2"),(0,I.Z)(this,"dataLoader",void 0),this.dataLoader=e}return(0,l.Z)(t,[{key:"Create",value:function(t){var e=this.dataLoader;this.commonCMAutoShowDisable=e.GetString("contextMenuAutoShowDisable",this.commonCMAutoShowDisable),this.commonCMAutoShowEnable=e.GetString("contextMenuAutoShowEnable",this.commonCMAutoShowEnable),this.commonSnoozeShopping=e.GetString("commonSnoozeShopping",this.commonSnoozeShopping),this.commonCMManage=e.GetString("contextMenuManage",this.commonCMManage),this.commonMoreOptionsLabel=e.GetString("moreOptionsLabel",this.commonMoreOptionsLabel),this.commonFixedTitle=e.GetString("fixedTitle",this.commonFixedTitle),this.commonFixedTitleForSmallNotification=e.GetString("commonFixedTitleForSmallNotification",this.commonFixedTitleForSmallNotification),this.commonMicrosoftPolicy=e.GetString("microsoftPolicy",this.commonMicrosoftPolicy),this.commonLearnMore=e.GetString("learnMore",this.commonLearnMore),this.commonYouCanSave=e.GetString("youCanSave",this.commonYouCanSave),this.commonSave=e.GetString("saveX",this.commonSave),this.commonAltSettings=e.GetString("commonAltSettings",this.commonAltSettings),this.thirdPartCookiesText=e.GetString("thirdPartCookiesText",this.thirdPartCookiesText),this.commonClose=e.GetString("closeLabel",this.commonClose),this.snoozeButton=e.GetString("snoozeEnable",this.snoozeButton),this.turnOffSnooze=e.GetString("snoozeDisable",this.turnOffSnooze),this.remindLater=e.GetString("remindLater",this.remindLater),this.snoozeTooltip=e.GetString("snoozeTooltip",this.snoozeTooltip),this.ariaSnoozeOn=e.GetString("ariaSnoozeOn",this.ariaSnoozeOn),this.ariaSnoozeoff=e.GetString("ariaSnoozeoff",this.ariaSnoozeoff),this.commonContextualTab=e.GetString("tabContextualTitle",this.commonContextualTab),this.commonHomeTab=e.GetString("tabHomeTitle",this.commonHomeTab),this.commonErrorTitle=e.GetString("errorTitle",this.commonErrorTitle),this.commonErrorSubTitle=e.GetString("errorSubTitle",this.commonErrorSubTitle),this.privacyConsentNew=e.GetString("privacyConsentNew",this.privacyConsentNew),this.rewardGiftCardConsent=e.GetString("rewardGiftCardConsent",this.rewardGiftCardConsent),this.rewardsjoinAckText=e.GetString("rewardsjoinAckText",this.rewardsjoinAckText),this.couponEmptyCouponSubTitle=e.GetString("EmptyCouponSubTitle",this.couponEmptyCouponSubTitle),this.couponEmptyCouponTitle=e.GetString("EmptyCouponTitle",this.couponEmptyCouponTitle),this.couponAutoApplyButton=e.GetString("autoApplyButton",this.couponAutoApplyButton),this.couponAutoApplyButtonRetry=e.GetString("couponAutoApplyButtonRetry",this.couponAutoApplyButtonRetry),this.couponAutoApplyButtonAlt=e.GetString("autoApplyButtonAlt",this.couponAutoApplyButtonAlt),this.mergedAutoApplyButton=e.GetString("mergedAutoApplyButton",this.mergedAutoApplyButton),this.couponCopied=e.GetString("copyCoupon",this.couponCopied),this.couponCopyLabel=e.GetString("copyCodeLabel",this.couponCopyLabel),this.couponCopyLabelRefresh=e.GetString("copyButtonTooltip",this.couponCopyLabelRefresh),this.couponSectionTitle=e.GetString("couponSectionSingularTitle",this.couponSectionTitle),this.couponTitle=e.GetString("couponTitleNew",this.couponTitle),this.couponTitleWithNum=e.GetString("couponTitleWithNum",this.couponTitleWithNum),this.couponTitleWithNumSingular=e.GetString("couponTitleWithNumSingular",this.couponTitleWithNumSingular),this.pcBestPriceHeader=e.GetString("bestPriceHeader",this.pcBestPriceHeader),this.pcBestPriceRefreshHeader=e.GetString("bestPriceRefreshHeader",this.pcBestPriceRefreshHeader),this.pcNotificationSeeMoreInfo=e.GetString("pcNotificationSeeMoreInfo",this.pcNotificationSeeMoreInfo),this.pcLowest=e.GetString("pcLowest",this.pcLowest),this.pcLowestUpdated=e.GetString("pcLowestUpdated",this.pcLowestUpdated),this.pcNotificationVisitItem=e.GetString("pcNotificationVisitItem",this.pcNotificationVisitItem),this.pcPriceSectionTitle=e.GetString("priceSectionTitle",this.pcPriceSectionTitle),this.pcBestPriceTitle=e.GetString("pcBestPriceTitle",this.pcBestPriceTitle),this.cbActivateButtonRefresh=e.GetString("activateCashBackButtonRefresh",this.cbActivateButtonRefresh),this.cbActivatedButton=e.GetString("cashBackActivatedButton",this.cbActivatedButton),this.cbLearnMore=e.GetString("learnMoreLabel",this.cbLearnMore),this.cbConfirmationTitle=e.GetString("rebatesThanksMessage",this.cbConfirmationTitle),this.cbTopRetailerTitle=e.GetString("topRetailerTitle",this.cbTopRetailerTitle),this.pcbConfirmationMessage=e.GetString("pcbConfirmationMessage",this.pcbConfirmationMessage),this.pcbConfirmationTitle=e.GetString("pcbConfirmationTitle",this.pcbConfirmationTitle),this.pcbBingRebates=e.GetString("pcbBingRebates",this.pcbBingRebates),this.cbAutoShowTitle=e.GetString("cbAutoShowTitle",this.cbAutoShowTitle),this.cbConfirmationMessage=e.GetString("rebatesProcessingMessage",this.cbConfirmationMessage),this.cbTurnedOffTitle=e.GetString("rebatesTurnedOffMessage",this.cbTurnedOffTitle),this.cbTurnedOffMessage=e.GetString("rebatesTurnedOffNextSteps",this.cbTurnedOffMessage),this.cbEnableRebatesButton=e.GetString("activateRebatesButton",this.cbEnableRebatesButton),this.cbDontFindAutomatically=e.GetString("rebatesDontFindAutomatically",this.cbDontFindAutomatically),this.cbFindAutomatically=e.GetString("rebatesFindAutomatically",this.cbFindAutomatically),this.cbPreviousTransactions=e.GetString("rebatesSeeMore",this.cbPreviousTransactions),this.reminderInfoButtonName=e.GetString("reminderInfoButtonName",this.reminderInfoButtonName),this.notificationPrivacyTitle=e.GetString("notificationPrivacyTitle",this.notificationPrivacyTitle),this.notificationPrivacyDesc=e.GetString("notificationPrivacyDesc",this.notificationPrivacyDesc),this.reminderDisabled=e.GetString("reminderDisabled",this.reminderDisabled),this.reminderEnabled=e.GetString("reminderEnabled",this.reminderEnabled),this.cbRebatesOn=e.GetString("rebatesOnAndPercent",this.cbRebatesOn),this.cbRebatesOff=e.GetString("rebatesOffAndPercent",this.cbRebatesOff),this.cbNonStackableCoupon=e.GetString("rebatesNonStackable",this.cbNonStackableCoupon),this.cbProcessing=e.GetString("rebatesProcessing",this.cbProcessing),this.commonMicrosoftRewards=e.GetString("cbPrivacyMessageLearn",this.commonMicrosoftRewards),this.cbPrivacyMessage=e.GetString("rebatesPrivacyMessage",this.cbPrivacyMessage),this.cbPrivacyMessageTerm=e.GetString("cbPrivacyMessageTerm",this.cbPrivacyMessageTerm),this.commonGotIt=e.GetString("rebatesGotIt",this.commonGotIt),this.cbErrorMessage=e.GetString("rebatesErrorMessage",this.cbErrorMessage),this.cbPromotionsOnSubHeader=e.GetString("cbPromotionsOnSubHeader",this.cbPromotionsOnSubHeader),this.cbBingActivateButton=e.GetString("cbBingActivateButton",this.cbBingActivateButton),this.cbRetailerTitle=e.GetString("cbRetailerTitle",this.cbRetailerTitle),this.cbSnapshotTitle=e.GetString("snapshotTitle",this.cbSnapshotTitle),this.cbViewAccount=e.GetString("viewAccount",this.cbViewAccount),this.cbCurrBalance=e.GetString("currBalance",this.cbCurrBalance),this.couponAutoApplyWithoutCB=e.GetString("rebatesApplyCoupons",this.couponAutoApplyWithoutCB),this.bannerFoundBestPrice=e.GetString("bannerPriceComparisonHeading",this.bannerFoundBestPrice),this.bannerFoundBestPriceAlt=e.GetString("bannerFoundBestPriceAlt",this.bannerFoundBestPriceAlt),this.bannerYouHaveBestPrice=e.GetString("bannerYouHaveBestPrice",this.bannerYouHaveBestPrice),this.bannerSubTitleFlyout=e.GetString("rebatesCouponsDescriptions",this.bannerSubTitleFlyout),this.bannerSeeDetails=e.GetString("bannerSeeDetails",this.bannerSeeDetails),this.bannerShowPriceHistory=e.GetString("bannerShowPriceHistory",this.bannerShowPriceHistory),this.bannerViewAll=e.GetString("bannerOpenFlyoutLabel",this.bannerViewAll),this.bannerVisitItem=e.GetString("bannerPriceComparisonHover",this.bannerVisitItem),this.bannerPriceStableTitle=e.GetString("bannerPriceStableTitle",this.bannerPriceStableTitle),this.bannerViewAllCouponsSingular=e.GetString("bannerViewAllCouponsSingular",this.bannerViewAllCouponsSingular),this.defaultClippingTitle=e.GetString("defaultClippingTitle",this.defaultClippingTitle),this.defaultClippingSubTitle=e.GetString("defaultClippingSubTitle",this.defaultClippingSubTitle),this.clippingMainTitle=e.GetString("clippingMainTitle",this.clippingMainTitle),this.clippingMainTitleSmallNotification=e.GetString("clippingMainTitleSmallNotification",this.clippingMainTitleSmallNotification),this.clippingSubTitle=e.GetString("clippingSubTitle",this.clippingSubTitle),this.clippingButtonTitle=e.GetString("clippingButtonTitle",this.clippingButtonTitle),this.clippedTitle=e.GetString("clippedTitle",this.clippedTitle),this.clippedSubTitle=e.GetString("clippedSubTitle",this.clippedSubTitle),this.clippingMainTitleEnGb=e.GetString("clippingMainTitleEnGb",this.clippingMainTitleEnGb),this.defaultClippingTitleEnGb=e.GetString("defaultClippingTitleEnGb",this.defaultClippingTitleEnGb),this.clippingButtonTitleEnGb=e.GetString("clippingButtonTitleEnGb",this.clippingButtonTitleEnGb),this.clippedSubTitleEnGb=e.GetString("clippedSubTitleEnGb",this.clippedSubTitleEnGb),this.getDeal=e.GetString("getDeal",this.getDeal),this.dealsTitle=e.GetString("dealsTitle",this.dealsTitle),this.dealsSubTitle=e.GetString("dealsSubTitle",this.dealsSubTitle),this.phTitlePriceDropped=e.GetString("phTitlePriceDropped",this.phTitlePriceDropped),this.phTitlePriceIncrease=e.GetString("phTitlePriceIncrease",this.phTitlePriceIncrease),this.phTitleStable=e.GetString("phTitleStable",this.phTitleStable),this.phToday=e.GetString("phToday",this.phToday),this.phLow=e.GetString("phLow",this.phLow),this.phHigh=e.GetString("phHigh",this.phHigh),this.phMedian=e.GetString("phMedian",this.phMedian),this.phPriceStable=e.GetString("phPriceStable",this.phPriceStable),this.phPriceDrop=e.GetString("phPriceDrop",this.phPriceDrop),this.prodHPriceDropTitle=e.GetString("prodHPriceDropTitle",this.prodHPriceDropTitle),this.prodHPriceDropSave=e.GetString("prodHPriceDropSave",this.prodHPriceDropSave),this.prodHPriceDropDonotRemindMe=e.GetString("prodHPriceDropDonotRemindMe",this.prodHPriceDropDonotRemindMe),this.prodHPriceDropViewAt=e.GetString("prodHPriceDropViewAt",this.prodHPriceDropViewAt),this.prodHAnnotation=e.GetString("prodHAnnotation",this.prodHAnnotation),this.prodHDeleteItem=e.GetString("prodHDeleteItem",this.prodHDeleteItem),this.phPriceIncrease=e.GetString("phPriceIncrease",this.phPriceIncrease),this.phFinalDrop=e.GetString("phFinalDrop",this.phFinalDrop),this.phFinalIncrease=e.GetString("phFinalIncrease",this.phFinalIncrease),this.phPriceStableRefresh=e.GetString("phPriceStableRefresh",this.phPriceStableRefresh),this.phGraphLabel=e.GetString("phGraphLabel",this.phGraphLabel),this.phStableLabel=e.GetString("phStableLabel",this.phStableLabel),this.phOldPrice=e.GetString("phOldPrice",this.phOldPrice),this.phNewPrice=e.GetString("phNewPrice",this.phNewPrice),this.phTooltipText=e.GetString("phTooltipText",this.phTooltipText),this.prodHPriceDropRefresh=e.GetString("prodHPriceDropRefresh",this.prodHPriceDropRefresh),this.prodHPriceIncreaseRefresh=e.GetString("prodHPriceIncreaseRefresh",this.prodHPriceIncreaseRefresh),this.prodHSectionTitle=e.GetString("prodHSectionTitle",this.prodHSectionTitle),this.rrExpertAndVideoReviews=e.GetString("rrExpertAndVideoReviews",this.rrExpertAndVideoReviews),this.rrExpertReviews=e.GetString("rrExpertReviews",this.rrExpertReviews),this.rrVideoReviews=e.GetString("rrVideoReviews",this.rrVideoReviews),this.checkoutCreditOrDebitCardDropDown=e.GetString("checkoutCreditOrDebitCardDropDown",this.checkoutCreditOrDebitCardDropDown),this.checkoutShippingAddress=e.GetString("checkoutShippingAddress",this.checkoutShippingAddress),this.checkoutPaymentInfo=e.GetString("checkoutPaymentInfo",this.checkoutPaymentInfo),this.checkoutSameBilling=e.GetString("checkoutSameBilling",this.checkoutSameBilling),this.checkoutFillOnly=e.GetString("checkoutFillOnly",this.checkoutFillOnly),this.checkoutButtonWithoutAA=e.GetString("checkoutButtonWithoutAA",this.checkoutButtonWithoutAA),this.checkoutButtonWithoutAAForOtherPayment=e.GetString("checkoutButtonWithoutAAForOtherPayment",this.checkoutButtonWithoutAAForOtherPayment),this.checkoutSectionTitle=e.GetString("checkoutSectionTitle",this.checkoutSectionTitle),this.checkoutAddressSectionTitle=e.GetString("checkoutAddressSectionTitle",this.checkoutAddressSectionTitle),this.checkoutPaymentSectionTitle=e.GetString("checkoutPaymentSectionTitle",this.checkoutPaymentSectionTitle),this.checkoutValidTill=e.GetString("checkoutValidTill",this.checkoutValidTill),this.checkoutZip=e.GetString("checkoutZip",this.checkoutZip),this.paymentOptionLabel=e.GetString("paymentOptionLabel",this.paymentOptionLabel),this.microsoftWalletLinkText=e.GetString("microsoftWalletLinkText",this.microsoftWalletLinkText),this.virtualCardCardHolderNameHeader=e.GetString("virtualCardCardHolderNameHeader",this.virtualCardCardHolderNameHeader),this.virtualCardBillingAddressHeader=e.GetString("virtualCardBillingAddressHeader",this.virtualCardBillingAddressHeader),this.virtualCardBillingInfoHeader=e.GetString("virtualCardBillingInfoHeader",this.virtualCardBillingInfoHeader),this.virtualCardNumberHeader=e.GetString("virtualCardNumberHeader",this.virtualCardNumberHeader),this.virtualCardExpirationHeader=e.GetString("virtualCardExpirationHeader",this.virtualCardExpirationHeader),this.virtualCardCVCHeader=e.GetString("virtualCardCVCHeader",this.virtualCardCVCHeader),this.visualizedCardHolderHeader=e.GetString("visualizedCardHolderHeader",this.visualizedCardHolderHeader),this.visualizedCardExpiresHeader=e.GetString("visualizedCardExpiresHeader",this.visualizedCardExpiresHeader),this.showContentToggleTooltip=e.GetString("showContentToggleTooltip",this.showContentToggleTooltip),this.hideContentToggleTooltip=e.GetString("hideContentToggleTooltip",this.hideContentToggleTooltip),this.copyButtonTooltip=e.GetString("copyButtonTooltip",this.copyButtonTooltip),this.virtualCardSystemFailureHeader=e.GetString("virtualCardSystemFailureHeader",this.virtualCardSystemFailureHeader),this.virtualCardLinkSuccess=e.GetString("virtualCardLinkSuccess",this.virtualCardLinkSuccess),this.buyNowPayLater=e.GetString("billNowPayLater",this.buyNowPayLater),this.masterCardPayment=e.GetString("masterCardPayment",this.masterCardPayment),this.visaPayment=e.GetString("visaPayment",this.visaPayment),this.amexPayment=e.GetString("amexPayment",this.amexPayment),this.discoverPayment=e.GetString("discoverPayment",this.discoverPayment),this.couponExpandableTitleWithNum=e.GetString("couponExpandableTitleWithNum",this.couponExpandableTitleWithNum),this.couponExpandableTitleWithNumSingular=e.GetString("couponExpandableTitleWithNumSingular",this.couponExpandableTitleWithNumSingular),this.couponExpandableTitleViewCoupons=e.GetString("couponExpandableTitleViewCoupons",this.couponExpandableTitleViewCoupons),this.bgaaSuccessLeftTitle=e.GetString("bgaaSuccessLeftTitle",this.bgaaSuccessLeftTitle),this.bgaaSuccessRightTitle=e.GetString("bgaaSuccessRightTitle",this.bgaaSuccessRightTitle),this.bgaaSuccessRightText=e.GetString("bgaaSuccessRightText",this.bgaaSuccessRightText),this.bgaaFailedTitle=e.GetString("bgaaFailedTitle",this.bgaaFailedTitle),this.bgaaFailedLeftTitle=e.GetString("bgaaFailedLeftTitle",this.bgaaFailedLeftTitle),this.bgaaFailedLeftText=e.GetString("bgaaFailedLeftText",this.bgaaFailedLeftText),this.bgaaFailedRightTitle=e.GetString("bgaaFailedRightTitle",this.bgaaFailedRightTitle),this.bgaaFailedRightText=e.GetString("bgaaFailedRightText",this.bgaaFailedRightText),this.disablePackageTrackingFromMenuText=e.GetString("disablePackageTrackingFromMenuText",this.disablePackageTrackingFromMenuText),this.enablePackageTrackingFromMenuText=e.GetString("enablePackageTrackingFromMenuText",this.enablePackageTrackingFromMenuText),this.packageTrackingOptInButtonText=e.GetString("packageTrackingOptInButtonText",this.packageTrackingOptInButtonText),this.packageTrackingNotificationTitle=e.GetString("packageTrackingNotificationTitle",this.packageTrackingNotificationTitle),this.packageTrackingNotificationDescription=e.GetString("packageTrackingNotificationDescription",this.packageTrackingNotificationDescription),this.checkBackForOrders=e.GetString("checkBackForOrders",this.checkBackForOrders),this.deteTrackerText=e.GetString("deteTrackerText",this.deteTrackerText),this.packageTrackingOptOutButtonText=e.GetString("packageTrackingOptOutButtonText",this.packageTrackingOptOutButtonText),this.productDetailsOrderTracking=e.GetString("productDetailsOrderTracking",this.productDetailsOrderTracking),this.packageTrackingDeactivatedTitle=e.GetString("packageTrackingDeactivatedTitle",this.packageTrackingDeactivatedTitle),this.packageTrackingActivatedTitle=e.GetString("packageTrackingActivatedTitle",this.packageTrackingActivatedTitle),this.packageTrackingOptInAcknowledgement=e.GetString("packageTrackingOptInAcknowledgement",this.packageTrackingOptInAcknowledgement),this.packageTrackingOptInAcknowledgementFailure=e.GetString("packageTrackingOptInAcknowledgementFailure",this.packageTrackingOptInAcknowledgementFailure),this.packageTrackingOptOutAcknowledgement=e.GetString("packageTrackingOptOutAcknowledgement",this.packageTrackingOptOutAcknowledgement),this.packageTrackingOptOutAcknowledgementFailure=e.GetString("packageTrackingOptOutAcknowledgementFailure",this.packageTrackingOptOutAcknowledgementFailure),this.rewardGiftConsentSubtext=e.GetString("rewardGiftConsentSubtext",this.rewardGiftConsentSubtext),this.rewardsPrivacyText=e.GetString("rewardsPrivacyText",this.rewardsPrivacyText),this.rewardsTermsText=e.GetString("rewardsTermsText",this.rewardsTermsText),this.giftCardDismiss=e.GetString("giftCardDismiss",this.giftCardDismiss),this.feedbackPrompt=e.GetString("feedbackPrompt",this.feedbackPrompt),this.bnplFeedbackPrompt=e.GetString("bnplFeedbackPrompt",this.bnplFeedbackPrompt),this.feedbackThanks=e.GetString("feedbackThanks",this.feedbackThanks),this.feedbackAriaLike=e.GetString("feedbackAriaLike",this.feedbackAriaLike),this.feedbackAriaDislike=e.GetString("feedbackAriaDislike",this.feedbackAriaDislike),this.feedbackAriaClose=e.GetString("feedbackAriaClose",this.feedbackAriaClose),this.sustainabilityDescriptionLight=e.GetString("sustainabilityDescriptionLight",this.sustainabilityDescriptionLight),this.sustainabilityDescription=e.GetString("sustainabilityDescription",this.sustainabilityDescription),this.sustainabilityString=e.GetString("sustainabilityString",this.sustainabilityString),this.sustainabilityConfirmationTitle=e.GetString("sustainabilityConfirmationTitle",this.sustainabilityConfirmationTitle),this.attCouponHeaderLocked=e.GetString("attCouponHeaderLocked",this.attCouponHeaderLocked),this.attCouponHeaderUnlocked=e.GetString("attCouponHeaderUnlocked",this.attCouponHeaderUnlocked),this.gcSectionTitle=e.GetString("gcSectionTitle",this.gcSectionTitle),this.gcbSectionTitle=e.GetString("gcbSectionTitle",this.gcbSectionTitle),this.gcbActivatedSectionTitle=e.GetString("gcbActivatedSectionTitle",this.gcbActivatedSectionTitle),this.gcbButton=e.GetString("gcbButton",this.gcbButton),this.gcbActivated=e.GetString("gcbActivated",this.gcbActivated),this.gcbNotifRebates=e.GetString("gcbNotifRebates",this.gcbNotifRebates),this.gcbNotifSubtitle=e.GetString("gcbNotifSubtitle",this.gcbNotifSubtitle),this.pcdisclaimerText=e.GetString("pcdisclaimerText",this.pcdisclaimerText),this.pcNotificationdisclaimerText=e.GetString("pcNotificationdisclaimerText",this.pcNotificationdisclaimerText),this.cbMainTitleOff=e.GetString("rebatesPercentage",this.cbMainTitleOff),this.pcbMainTitleOff=e.GetString("pcbMainTitleOff",this.pcbMainTitleOff),this.cbMainTitleOn=e.GetString("rebatesPercentageEarn",this.cbMainTitleOn),this.cbAutoShowButtonMessage=e.GetString("cbAutoShowButtonMessage",this.cbAutoShowButtonMessage),this.cbMainTitleOnStoreWide=e.GetString("rebatesStorewidePercentageEarn",this.cbMainTitleOnStoreWide),this.cbMainTitleOffStoreWide=e.GetString("rebatesStorewidePercentageEarn",this.cbMainTitleOffStoreWide),this.cbPromotionsSubTitle=e.GetString("subRebatesPercentageEarn",this.cbPromotionsSubTitle),this.cbPromotionsSubTitleStoreWide=e.GetString("subRebatesPercentageEarnStorewide",this.cbPromotionsSubTitleStoreWide),this.cbTitleSignInOn=e.GetString("cbMergedTitleSignInOn",this.cbTitleSignInOn),this.cbCashBackOnOff=e.GetString("rebatesOnAndOffPrefix",this.cbCashBackOnOff),this.cbLifetimeEarned=e.GetString("cbLifetimeEarned",this.cbLifetimeEarned),this.cbToolTips=e.GetString("cbToolTips",this.cbToolTips),this.bannerPriceDropTitle=e.GetString("bannerPriceDropTitle",this.bannerPriceDropTitle),this.bannerPriceIncreaseTitle=e.GetString("bannerPriceIncreaseTitle",this.bannerPriceIncreaseTitle),this.bannerCouponSingularTitle=e.GetString("bannerCouponSingularTitle",this.bannerCouponSingularTitle),this.bannerFoundCoupons=e.GetString("bannerCouponHeadingLabelPlural",this.bannerFoundCoupons),this.bannerFoundCouponsSingular=e.GetString("bannerCouponHeadingLabelSingular",this.bannerFoundCouponsSingular),this.bannerCouponPluralTitle=e.GetString("bannerCouponPluralTitle",this.bannerCouponPluralTitle),this.bannerCashBackOffTitle=e.GetString("bannerCashBackOffTitle",this.bannerCashBackOffTitle),this.bannerCashBackOnTitle=e.GetString("bannerCashBackOnTitle",this.bannerCashBackOnTitle),this.bannerRecentPurchase=e.GetString("bannerRecentPurchase",this.bannerRecentPurchase),this.bannerLifetime=e.GetString("bannerLifetime",this.bannerLifetime),this.microsoftWalletManage=e.GetString("microsoftWalletManage",this.microsoftWalletManage),this.trAriaLabel=e.GetString("trAriaLabel",this.trAriaLabel),this.couponSectionPluralTitle=e.GetString("couponSectionPluralTitle",this.couponSectionPluralTitle),this.privacyConsent=e.GetString("privacyConsent",this.privacyConsent),this.savingsHeader=e.GetString("savingsHeader",this.savingsHeader),this.sectionSeeMore=e.GetString("sectionSeeMore",this.sectionSeeMore),this.bannerSave=e.GetString("bannerSave",this.bannerSave),this.bannerViewAllCoupons=e.GetString("bannerViewAllCoupons",this.bannerViewAllCoupons),this.pcNotificationTitle=e.GetString("pcNotificationTitle",this.pcNotificationTitle),this.pcNotificationTitleRefresh=e.GetString("pcNotificationTitleRefresh",this.pcNotificationTitleRefresh),this.pcNotificationTitleSmall=e.GetString("pcNotificationTitleSmall",this.pcNotificationTitleSmall),this.pcNotificationNarratorIntro=e.GetString("pcNotificationNarratorIntro",this.pcNotificationNarratorIntro),this.viewMorePricesButtonText=e.GetString("viewMorePricesButtonText",this.viewMorePricesButtonText),this.pcLowestPriceAria=e.GetString("pcLowestPriceAria",this.pcLowestPriceAria),this.pcCurrentPriceAria=e.GetString("pcCurrentPriceAria",this.pcCurrentPriceAria),this.cbPromotionsTitle=e.GetString("cbPromotionsTitle",this.cbPromotionsTitle),this.cbExpiryDateTime=e.GetString("cbExpiryDateTime",this.cbExpiryDateTime),this.cbCommissionStr=e.GetString("cbCommissionStr",this.cbCommissionStr),this.cbPersonalized=e.GetString("cbPersonalized",this.cbPersonalized),this.couponSuccessful=e.GetString("couponSuccessful",this.couponSuccessful),this.cbMergedTitle=e.GetString("rebatesFoundCouponsAndCashback",this.cbMergedTitle),this.cbPreviousCashbackDomain=e.GetString("cbPreviousCashbackDomain",this.cbPreviousCashbackDomain),this.cbMergedSingularTitle=e.GetString("rebatesFoundCouponsAndCashbackSingular",this.cbMergedSingularTitle),this.commonAriaLogo=e.GetString("rebatesNotificationLogo",this.commonAriaLogo),this.tipsFreeShipping=e.GetString("tipsFreeShipping",this.tipsFreeShipping),this.tipsMinimumPurchase=e.GetString("tipsMinimumPurchase",this.tipsMinimumPurchase),this.triviaTitleNew=e.GetString("triviaTitleNew",this.triviaTitleNew),this.savingsFoundTitle=e.GetString("savingsFoundTitle",this.savingsFoundTitle),this.savingsFoundTriviaTitle=e.GetString("savingsFoundTriviaTitle",this.savingsFoundTriviaTitle),this.virtualCardSystemFailureDescription=e.GetString("virtualCardSystemFailureDescription",this.virtualCardSystemFailureDescription),this.virtualCardSystemFailureLink=e.GetString("virtualCardSystemFailureLink",this.virtualCardSystemFailureLink),this.virtualCardLinkFail=e.GetString("virtualCardLinkFail",this.virtualCardLinkFail),this.cardPaymentOptionBanner=e.GetString("cardPaymentOptionBanner",this.cardPaymentOptionBanner),this.otherPaymentMethodBanner=e.GetString("otherPaymentMethodBanner",this.otherPaymentMethodBanner),this.learnMoreLinkAriaLabel=e.GetString("learnMoreLinkAriaLabel",this.learnMoreLinkAriaLabel),this.msZipDescription=e.GetString("msZipDescription",this.msZipDescription),this.similarSellerNotificationError=e.GetString("similarSellerNotificationError",this.similarSellerNotificationError),this.similarSellerStringCollapsedAmazon=e.GetString("similarSellerStringCollapsedAmazon",this.similarSellerStringCollapsedAmazon),this.similarSellerStringCollapsed=e.GetString("similarSellerStringCollapsed",this.similarSellerStringCollapsed),this.similarSellerAddToCartTitle=e.GetString("similarSellerAddToCartTitle",this.similarSellerAddToCartTitle),this.similarSellerAddedToCartTitle=e.GetString("similarSellerAddedToCartTitle",this.similarSellerAddedToCartTitle),this.similarSellerShipFromString=e.GetString("similarSellerShipFromString",this.similarSellerShipFromString),this.similarSellerRatingLabel=e.GetString("similarSellerRatingLabel",this.similarSellerRatingLabel),this.similarSellerFreeDelivery=e.GetString("similarSellerFreeDelivery",this.similarSellerFreeDelivery),this.similarSellerStringAmazon=e.GetString("similarSellerStringAmazon",this.similarSellerStringAmazon),this.similarSellerString=e.GetString("similarSellerString",this.similarSellerString),this.similarSellerStringSubtitleAmazon=e.GetString("similarSellerStringSubtitleAmazon",this.similarSellerStringSubtitleAmazon),this.similarSellerStringSubtitle=e.GetString("similarSellerStringSubtitle",this.similarSellerStringSubtitle),this.similarSellerNotificationTitle=e.GetString("similarSellerNotificationTitle",this.similarSellerNotificationTitle),this.similarSellerAddToCartAriaLable=e.GetString("similarSellerAddToCartAriaLable",this.similarSellerAddToCartAriaLable),this.tipsTiltleSingle=e.GetString("tipsTiltleSingle",this.tipsTiltleSingle),this.tipsSubTitleSingle=e.GetString("tipsSubTitleSingle",this.tipsSubTitleSingle),this.tipsMainTitle=e.GetString("tipsMainTitle",this.tipsMainTitle),this.tipsSubTitle=e.GetString("tipsSubTitle",this.tipsSubTitle),this.orderTrackingTitle=e.GetString("orderTrackingTitle",this.orderTrackingTitle),this.rewardFailedSignin=e.GetString("rewardFailedSignin",this.rewardFailedSignin),this.rewardTitleDefault=e.GetString("rewardTitleDefault",this.rewardTitleDefault),this.rewardTitleEarnedMaximum=e.GetString("rewardTitleEarnedMaximum",this.rewardTitleEarnedMaximum),this.rewardTitleRewardTwo=e.GetString("rewardTitleRewardTwo",this.rewardTitleRewardTwo),this.rewardPointMax=e.GetString("rewardPointMax",this.rewardPointMax),this.rewardPerMaxPoint=e.GetString("rewardPerMaxPoint",this.rewardPerMaxPoint),this.rewardDetailFirstLine=e.GetString("rewardDetailFirstLine",this.rewardDetailFirstLine),this.rewardTitleRewardsAdded=e.GetString("rewardTitleRewardsAdded",this.rewardTitleRewardsAdded),this.rewardDetailFirstLineBold=e.GetString("rewardDetailFirstLineBold",this.rewardDetailFirstLineBold),this.rewardKeepExploringText=e.GetString("rewardKeepExploringText",this.rewardKeepExploringText),this.rewardDetailTwo=e.GetString("rewardDetailTwo",this.rewardDetailTwo),this.rewardDetail=e.GetString("rewardDetail",this.rewardDetail),this.rewardSignIn=e.GetString("rewardSignIn",this.rewardSignIn),this.rewardRedeem=e.GetString("rewardRedeem",this.rewardRedeem),this.rewardCoupons=e.GetString("rewardCoupons",this.rewardCoupons),this.rewardCashback=e.GetString("rewardCashback",this.rewardCashback),this.rewardRewards=e.GetString("rewardRewards",this.rewardRewards),this.rewardAssociateSignIn=e.GetString("rewardAssociateSignIn",this.rewardAssociateSignIn),this.dismissMessageAriaLabel=e.GetString("dismissMessageAriaLabel",this.dismissMessageAriaLabel),this.virtualCardDetailsActions=e.GetString("virtualCardDetailsActions",this.virtualCardDetailsActions),this.giftCardTitle=e.GetString("giftCardTitle",this.giftCardTitle),this.giftCardSubtitle=e.GetString("giftCardSubtitle",this.giftCardSubtitle),this.giftCardSubtitleFiveDollar=e.GetString("giftCardSubtitleFiveDollar",this.giftCardSubtitleFiveDollar),this.maybeLaterButtontext=e.GetString("maybeLaterButtontext",this.maybeLaterButtontext),this.rewardJoinSuccess=e.GetString("rewardJoinSuccess",this.rewardJoinSuccess),this.rewardOfferSuccess=e.GetString("rewardOfferSuccess",this.rewardOfferSuccess),this.joinNowButtonText=e.GetString("joinNowButtonText",this.joinNowButtonText),this.ytSectionTitleOnRetailer=e.GetString("ytSectionTitleOnRetailer",this.ytSectionTitleOnRetailer),this.ytHeader=e.GetString("ytHeader",this.ytHeader),this.ytPhotoLabel=e.GetString("ytPhotoLabel",this.ytPhotoLabel),this.ytMoreCoupons=e.GetString("ytMoreCoupons",this.ytMoreCoupons),this.ytSectionTitleOnYoutube=e.GetString("ytSectionTitleOnYoutube",this.ytSectionTitleOnYoutube),this.ytShopOn=e.GetString("ytShopOn",this.ytShopOn),this.ytHeaderPermission=e.GetString("ytHeaderPermission",this.ytHeaderPermission),this.ytSaveCouponsPermission=e.GetString("ytSaveCouponsPermission",this.ytSaveCouponsPermission),this.ytDontSaveCouponsPermission=e.GetString("ytDontSaveCouponsPermission",this.ytDontSaveCouponsPermission),this.ytHeaderSingular=e.GetString("ytHeaderSingular",this.ytHeaderSingular),this.ytHeaderPermissionSingular=e.GetString("ytHeaderPermissionSingular",this.ytHeaderPermissionSingular),this.ptCouponsTitle=e.GetString("ptCouponsTitle",this.ptCouponsTitle),this.ptCouponsTitleSingular=e.GetString("ptCouponsTitleSingular",this.ptCouponsTitleSingular),this.attFlyoutLocked=e.GetString("attFlyoutLocked",this.attFlyoutLocked),this.attFlyoutUnlocked=e.GetString("attFlyoutUnlocked",this.attFlyoutUnlocked),this.attTooltipHeader=e.GetString("attTooltipHeader",this.attTooltipHeader),this.attTooltipText=e.GetString("attTooltipText",this.attTooltipText),this.gcbCashBack=e.GetString("gcbCashBack",this.gcbCashBack),this.gcbNotifTitle=e.GetString("gcbNotifTitle",this.gcbNotifTitle),this.paneForYou=e.GetString("paneForYou",this.paneForYou),this.paneHome=e.GetString("paneHome",this.paneHome),this.paneNullStateMessage=e.GetString("paneNullStateMessage",this.paneNullStateMessage),this.phTodayPriceAriaLabel=e.GetString("phTodayPriceAriaLabel",this.phTodayPriceAriaLabel),this.phHighPriceAriaLabel=e.GetString("phHighPriceAriaLabel",this.phHighPriceAriaLabel),this.phLowPriceArialLabel=e.GetString("phLowPriceArialLabel",this.phLowPriceArialLabel),this.trSectionTitle=e.GetString("trSectionTitle",this.trSectionTitle),this.autosMarketplaceSectionTitle=e.GetString("autosMarketplaceSectionTitle",this.autosMarketplaceSectionTitle),this.autosMarketplaceHeader=e.GetString("autosMarketplaceHeader",this.autosMarketplaceHeader),this.autosMarketplaceDisclaimer=e.GetString("autosMarketplaceDisclaimer",this.autosMarketplaceDisclaimer),this.autosMarketplaceAccidentStatement=e.GetString("autosMarketplaceAccidentStatement",this.autosMarketplaceAccidentStatement),this.autosMarketplaceOnlineListing=e.GetString("autosMarketplaceOnlineListing",this.autosMarketplaceOnlineListing),this.autosMarketplaceOnlineListingDisclaimer=e.GetString("autosMarketplaceOnlineListingDisclaimer",this.autosMarketplaceOnlineListingDisclaimer),this.autosMarketplaceSeeMoreLink=e.GetString("autosMarketplaceSeeMoreLink",this.autosMarketplaceSeeMoreLink),this.autosMarketplaceNotificationHeader=e.GetString("autosMarketplaceNotificationHeader",this.autosMarketplaceNotificationHeader),this.autosMarketplaceSeeMoreButton=e.GetString("autosMarketplaceSeeMoreButton",this.autosMarketplaceSeeMoreButton),this.autosMarketplaceSeeThisCar=e.GetString("autosMarketplaceSeeThisCar",this.autosMarketplaceSeeThisCar),this.autosMarketplacePopular=e.GetString("autosMarketplacePopular",this.autosMarketplacePopular),this.autosMarketplaceGreatDeal=e.GetString("autosMarketplaceGreatDeal",this.autosMarketplaceGreatDeal),this.zipPayPayment=e.GetString("zipPayment",this.zipPayPayment),this.zipPayVirtualCardHeaderTitle=e.GetString("zipVirtualCardHeaderTitle",this.zipPayVirtualCardHeaderTitle),this.zipPayVirtualCardHeaderDescription=e.GetString("zipVirtualCardHeaderDescription",this.zipPayVirtualCardHeaderDescription),this.zipPayVirtualCardHeaderAutofillFailedDescription=e.GetString("zipVirtualCardHeaderAutofillFailedDescription",this.zipPayVirtualCardHeaderAutofillFailedDescription),this.zipPayVirtualCardURL=e.GetString("virtualCardZipURL",this.zipPayVirtualCardURL),this.zipPayVisualizedCardDetails=e.GetString("zipVisualizedCardDetails",this.zipPayVisualizedCardDetails),this.affirmVirtualCardHeaderTitle=e.GetString("affirmVirtualCardHeaderTitle",this.affirmVirtualCardHeaderTitle),this.affirmVirtualCardHeaderDescription=e.GetString("affirmVirtualCardHeaderDescription",this.affirmVirtualCardHeaderDescription),this.affirmVirtualCardHeaderNoBillingInfoDescription=e.GetString("affirmVirtualCardHeaderNoBillingInfoDescription",this.affirmVirtualCardHeaderNoBillingInfoDescription),this.affirmVirtualCardHeaderAutofillFailedDescription=e.GetString("affirmVirtualCardHeaderAutofillFailedDescription",this.affirmVirtualCardHeaderAutofillFailedDescription),this.affirmPayment=e.GetString("affirmPayment",this.affirmPayment),this.affirmVisualizedCardDetails=e.GetString("affirmVisualizedCardDetails",this.affirmVisualizedCardDetails),this.affirmVirtualCardURL=e.GetString("affirmVirtualCardURL",this.affirmVirtualCardURL)}}]),t}(),rs=function(){function e(t,i){(0,s.Z)(this,e),(0,I.Z)(this,"dataLoader",void 0),(0,I.Z)(this,"common",new w),(0,I.Z)(this,"strings",void 0),(0,I.Z)(this,"dataStoreModule",new is),(0,I.Z)(this,"experimentData",new os),this.dataLoader=i,this.strings=new as(i),this.strings.Create(t);var n=i.GetLoadTimeDataValue(S.EnabledFeatures,void 0);this.experimentData.Create(n),this.common.Create(t,i)}var i;return(0,l.Z)(e,[{key:"initializeModuleData",value:(i=(0,t.Z)(n().mark((function t(e,i,o){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new es(e,i).InitializeData(o);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(t,e,n){return i.apply(this,arguments)})}]),e}(),ss=rs;function ls(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var cs=function(t){(0,O.Z)(i,t);var e=ls(i);function i(){var t;return(0,s.Z)(this,i),(t=e.call(this)).IsV2Data=!1,t}return(0,l.Z)(i,[{key:"GetLoadTimeDataValue",value:function(t,e){try{return loadTimeData.valueExists(t)?loadTimeData.getValue(t):e}catch(t){}return e}},{key:"GetString",value:function(t,e){try{return loadTimeData.valueExists(t)?loadTimeData.getValue(t)!==e&&this.isEnglish()?e:loadTimeData.getValue(t):e}catch(t){}return e}},{key:"SetLoadTimeDataValue",value:function(t,e){}},{key:"isEnglish",value:function(){return!(!loadTimeData.valueExists("fixedTitle")||"Shopping in Microsoft Edge"!==loadTimeData.getValue("fixedTitle"))}}]),i}(function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"IsV2Data",void 0)}return(0,l.Z)(t,[{key:"IsServerData",value:function(){return this.IsV2Data}}]),t}());function us(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r}const ds=new Map;"metadata"in Reflect||(Reflect.metadata=function(t,e){return function(i){Reflect.defineMetadata(t,e,i)}},Reflect.defineMetadata=function(t,e,i){let n=ds.get(i);void 0===n&&ds.set(i,n=new Map),n.set(t,e)},Reflect.getOwnMetadata=function(t,e){const i=ds.get(e);if(void 0!==i)return i.get(t)});class hs{constructor(t,e){this.container=t,this.key=e}instance(t){return this.registerResolver(0,t)}singleton(t){return this.registerResolver(1,t)}transient(t){return this.registerResolver(2,t)}callback(t){return this.registerResolver(3,t)}cachedCallback(t){return this.registerResolver(3,Hs(t))}aliasTo(t){return this.registerResolver(5,t)}registerResolver(t,e){const{container:i,key:n}=this;return this.container=this.key=void 0,i.registerResolver(n,new Is(n,t,e))}}function ps(t){const e=t.slice(),i=Object.keys(t),n=i.length;let o;for(let a=0;a<n;++a)o=i[a],zs(o)||(e[o]=t[o]);return e}const fs=Object.freeze({none(t){throw Error(`${t.toString()} not registered, did you forget to add @singleton()?`)},singleton:t=>new Is(t,1,t),transient:t=>new Is(t,2,t)}),gs=Object.freeze({default:Object.freeze({parentLocator:()=>null,responsibleForOwnerRequests:!1,defaultResolver:fs.singleton})}),ms=new Map;function vs(t){return e=>Reflect.getOwnMetadata(t,e)}let ys=null;const Cs=Object.freeze({createContainer:t=>new _s(null,Object.assign({},gs.default,t)),findResponsibleContainer(t){const e=t.$$container$$;return e&&e.responsibleForOwnerRequests?e:Cs.findParentContainer(t)},findParentContainer(t){const e=new CustomEvent(Ns,{bubbles:!0,composed:!0,cancelable:!0,detail:{container:void 0}});return t.dispatchEvent(e),e.detail.container||Cs.getOrCreateDOMContainer()},getOrCreateDOMContainer:(t,e)=>t?t.$$container$$||new _s(t,Object.assign({},gs.default,e,{parentLocator:Cs.findParentContainer})):ys||(ys=new _s(null,Object.assign({},gs.default,e,{parentLocator:()=>null}))),getDesignParamtypes:vs("design:paramtypes"),getAnnotationParamtypes:vs("di:paramtypes"),getOrCreateAnnotationParamTypes(t){let e=this.getAnnotationParamtypes(t);return void 0===e&&Reflect.defineMetadata("di:paramtypes",e=[],t),e},getDependencies(t){let e=ms.get(t);if(void 0===e){const i=t.inject;if(void 0===i){const i=Cs.getDesignParamtypes(t),n=Cs.getAnnotationParamtypes(t);if(void 0===i)if(void 0===n){const i=Object.getPrototypeOf(t);e="function"==typeof i&&i!==Function.prototype?ps(Cs.getDependencies(i)):[]}else e=ps(n);else if(void 0===n)e=ps(i);else{e=ps(i);let t,o=n.length;for(let i=0;i<o;++i)t=n[i],void 0!==t&&(e[i]=t);const a=Object.keys(n);let r;o=a.length;for(let t=0;t<o;++t)r=a[t],zs(r)||(e[r]=n[r])}}else e=ps(i);ms.set(t,e)}return e},defineProperty(t,e,i,n=!1){const o=`$di_${e}`;Reflect.defineProperty(t,e,{get:function(){let t=this[o];if(void 0===t){const a=this instanceof HTMLElement?Cs.findResponsibleContainer(this):Cs.getOrCreateDOMContainer();if(t=a.get(i),this[o]=t,n&&this instanceof ne){const n=this.$fastController,a=()=>{Cs.findResponsibleContainer(this).get(i)!==this[o]&&(this[o]=t,n.notify(e))};n.subscribe({handleChange:a},"isConnected")}}return t}})},createInterface(t,e){const i="function"==typeof t?t:e,n="string"==typeof t?t:t&&"friendlyName"in t&&t.friendlyName||Gs,o="string"!=typeof t&&(t&&"respectConnection"in t&&t.respectConnection||!1),a=function(t,e,i){if(null==t||void 0!==new.target)throw new Error(`No registration for interface: '${a.friendlyName}'`);if(e)Cs.defineProperty(t,e,a,o);else{Cs.getOrCreateAnnotationParamTypes(t)[i]=a}};return a.$isInterface=!0,a.friendlyName=null==n?"(anonymous)":n,null!=i&&(a.register=function(t,e){return i(new hs(t,null!=e?e:a))}),a.toString=function(){return`InterfaceSymbol<${a.friendlyName}>`},a},inject:(...t)=>function(e,i,n){if("number"==typeof n){const i=Cs.getOrCreateAnnotationParamTypes(e),o=t[0];void 0!==o&&(i[n]=o)}else if(i)Cs.defineProperty(e,i,t[0]);else{const i=n?Cs.getOrCreateAnnotationParamTypes(n.value):Cs.getOrCreateAnnotationParamTypes(e);let o;for(let e=0;e<t.length;++e)o=t[e],void 0!==o&&(i[e]=o)}},transient:t=>(t.register=function(e){return Zs.transient(t,t).register(e)},t.registerInRequestor=!1,t),singleton:(t,e=xs)=>(t.register=function(e){return Zs.singleton(t,t).register(e)},t.registerInRequestor=e.scoped,t)}),bs=Cs.createInterface("Container");function Ss(t){return function(e){const i=function(t,e,n){Cs.inject(i)(t,e,n)};return i.$isResolver=!0,i.resolve=function(i,n){return t(e,i,n)},i}}Cs.inject;const xs={scoped:!1};Es=(t,e,i,n)=>i.getAll(t,n);var Es;Ss(((t,e,i)=>()=>i.get(t))),Ss(((t,e,i)=>i.has(t,!0)?i.get(t):void 0));function As(t,e,i){Cs.inject(As)(t,e,i)}As.$isResolver=!0,As.resolve=()=>{};Ss(((t,e,i)=>{const n=Ts(t,e),o=new Is(t,0,n);return i.registerResolver(t,o),n})),Ss(((t,e,i)=>Ts(t,e)));function Ts(t,e){return e.getFactory(t).construct(e)}class Is{constructor(t,e,i){this.key=t,this.strategy=e,this.state=i,this.resolving=!1}get $isResolver(){return!0}register(t){return t.registerResolver(this.key,this)}resolve(t,e){switch(this.strategy){case 0:return this.state;case 1:if(this.resolving)throw new Error(`Cyclic dependency found: ${this.state.name}`);return this.resolving=!0,this.state=t.getFactory(this.state).construct(e),this.strategy=0,this.resolving=!1,this.state;case 2:{const i=t.getFactory(this.state);if(null===i)throw new Error(`Resolver for ${String(this.key)} returned a null factory`);return i.construct(e)}case 3:return this.state(t,e,this);case 4:return this.state[0].resolve(t,e);case 5:return e.get(this.state);default:throw new Error(`Invalid resolver strategy specified: ${this.strategy}.`)}}getFactory(t){var e,i,n;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return null!==(n=null===(i=null===(e=t.getResolver(this.state))||void 0===e?void 0:e.getFactory)||void 0===i?void 0:i.call(e,t))&&void 0!==n?n:null;default:return null}}}function Ds(t){return this.get(t)}function ks(t,e){return e(t)}class ws{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){let i;return i=void 0===e?new this.Type(...this.dependencies.map(Ds,t)):new this.Type(...this.dependencies.map(Ds,t),...e),null==this.transformers?i:this.transformers.reduce(ks,i)}registerTransformer(t){(this.transformers||(this.transformers=[])).push(t)}}const Rs={$isResolver:!0,resolve:(t,e)=>e};function Os(t){return"function"==typeof t.register}function Ps(t){return function(t){return Os(t)&&"boolean"==typeof t.registerInRequestor}(t)&&t.registerInRequestor}const Ms=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]),Ns="__DI_LOCATE_PARENT__",Ls=new Map;class _s{constructor(t,e){this.owner=t,this.config=e,this._parent=void 0,this.registerDepth=0,this.context=null,null!==t&&(t.$$container$$=this),this.resolvers=new Map,this.resolvers.set(bs,Rs),t instanceof Node&&t.addEventListener(Ns,(t=>{t.composedPath()[0]!==this.owner&&(t.detail.container=this,t.stopImmediatePropagation())}))}get parent(){return void 0===this._parent&&(this._parent=this.config.parentLocator(this.owner)),this._parent}get depth(){return null===this.parent?0:this.parent.depth+1}get responsibleForOwnerRequests(){return this.config.responsibleForOwnerRequests}registerWithContext(t,...e){return this.context=t,this.register(...e),this.context=null,this}register(...t){if(100==++this.registerDepth)throw new Error("Unable to autoregister dependency");let e,i,n,o,a;const r=this.context;for(let s=0,l=t.length;s<l;++s)if(e=t[s],Vs(e))if(Os(e))e.register(this,r);else if(void 0!==e.prototype)Zs.singleton(e,e).register(this);else for(i=Object.keys(e),o=0,a=i.length;o<a;++o)n=e[i[o]],Vs(n)&&(Os(n)?n.register(this,r):this.register(n));return--this.registerDepth,this}registerResolver(t,e){Bs(t);const i=this.resolvers,n=i.get(t);return null==n?i.set(t,e):n instanceof Is&&4===n.strategy?n.state.push(e):i.set(t,new Is(t,4,[n,e])),e}registerTransformer(t,e){const i=this.getResolver(t);if(null==i)return!1;if(i.getFactory){const t=i.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(Bs(t),void 0!==t.resolve)return t;let i,n=this;for(;null!=n;){if(i=n.resolvers.get(t),null!=i)return i;if(null==n.parent){const i=Ps(t)?this:n;return e?this.jitRegister(t,i):null}n=n.parent}return null}has(t,e=!1){return!!this.resolvers.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(Bs(t),t.$isResolver)return t.resolve(this,this);let e,i=this;for(;null!=i;){if(e=i.resolvers.get(t),null!=e)return e.resolve(i,this);if(null==i.parent){const n=Ps(t)?this:i;return e=this.jitRegister(t,n),e.resolve(i,this)}i=i.parent}throw new Error(`Unable to resolve key: ${t}`)}getAll(t,e=!1){Bs(t);const i=this;let n,o=i;if(e){let e=It.ow;for(;null!=o;)n=o.resolvers.get(t),null!=n&&(e=e.concat(Us(n,o,i))),o=o.parent;return e}for(;null!=o;){if(n=o.resolvers.get(t),null!=n)return Us(n,o,i);if(o=o.parent,null==o)return It.ow}return It.ow}getFactory(t){let e=Ls.get(t);if(void 0===e){if($s(t))throw new Error(`${t.name} is a native function and therefore cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.`);Ls.set(t,e=new ws(t,Cs.getDependencies(t)))}return e}registerFactory(t,e){Ls.set(t,e)}createChild(t){return new _s(null,Object.assign({},this.config,t,{parentLocator:()=>this}))}jitRegister(t,e){if("function"!=typeof t)throw new Error(`Attempted to jitRegister something that is not a constructor: '${t}'. Did you forget to register this dependency?`);if(Ms.has(t.name))throw new Error(`Attempted to jitRegister an intrinsic type: ${t.name}. Did you forget to add @inject(Key)`);if(Os(t)){const i=t.register(e);if(!(i instanceof Object)||null==i.resolve){const i=e.resolvers.get(t);if(null!=i)return i;throw new Error("A valid resolver was not returned from the static register method")}return i}if(t.$isInterface)throw new Error(`Attempted to jitRegister an interface: ${t.friendlyName}`);{const i=this.config.defaultResolver(t,e);return e.resolvers.set(t,i),i}}}const Fs=new WeakMap;function Hs(t){return function(e,i,n){if(Fs.has(n))return Fs.get(n);const o=t(e,i,n);return Fs.set(n,o),o}}const Zs=Object.freeze({instance:(t,e)=>new Is(t,0,e),singleton:(t,e)=>new Is(t,1,e),transient:(t,e)=>new Is(t,2,e),callback:(t,e)=>new Is(t,3,e),cachedCallback:(t,e)=>new Is(t,3,Hs(e)),aliasTo:(t,e)=>new Is(e,5,t)});function Bs(t){if(null==t)throw new Error("key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?")}function Us(t,e,i){if(t instanceof Is&&4===t.strategy){const n=t.state;let o=n.length;const a=new Array(o);for(;o--;)a[o]=n[o].resolve(e,i);return a}return[t.resolve(e,i)]}const Gs="(anonymous)";function Vs(t){return"object"==typeof t&&null!==t||"function"==typeof t}const $s=function(){const t=new WeakMap;let e=!1,i="",n=0;return function(o){return e=t.get(o),void 0===e&&(i=o.toString(),n=i.length,e=n>=29&&n<=100&&125===i.charCodeAt(n-1)&&i.charCodeAt(n-2)<=32&&93===i.charCodeAt(n-3)&&101===i.charCodeAt(n-4)&&100===i.charCodeAt(n-5)&&111===i.charCodeAt(n-6)&&99===i.charCodeAt(n-7)&&32===i.charCodeAt(n-8)&&101===i.charCodeAt(n-9)&&118===i.charCodeAt(n-10)&&105===i.charCodeAt(n-11)&&116===i.charCodeAt(n-12)&&97===i.charCodeAt(n-13)&&110===i.charCodeAt(n-14)&&88===i.charCodeAt(n-15),t.set(o,e)),e}}(),Ws={};function zs(t){switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=Ws[t];if(void 0!==e)return e;const i=t.length;if(0===i)return Ws[t]=!1;let n=0;for(let e=0;e<i;++e)if(n=t.charCodeAt(e),0===e&&48===n&&i>1||n<48||n>57)return Ws[t]=!1;return Ws[t]=!0}default:return!1}}function Ks(t){return`${t.toLowerCase()}:presentation`}const Ys=new Map,js=Object.freeze({define(t,e,i){const n=Ks(t);void 0===Ys.get(n)?Ys.set(n,e):Ys.set(n,!1),i.register(Zs.instance(n,e))},forTag(t,e){const i=Ks(t),n=Ys.get(i);if(!1===n){return Cs.findResponsibleContainer(e).get(i)}return n||null}});class Xs{constructor(t,e){this.template=t||null,this.styles=void 0===e?null:Array.isArray(e)?Ht.create(e):e instanceof Ht?e:Ht.create([e])}applyTo(t){const e=t.$fastController;null===e.template&&(e.template=this.template),null===e.styles&&(e.styles=this.styles)}}class qs extends ne{constructor(){super(...arguments),this._presentation=void 0}get $presentation(){return void 0===this._presentation&&(this._presentation=js.forTag(this.tagName,this)),this._presentation}templateChanged(){void 0!==this.template&&(this.$fastController.template=this.template)}stylesChanged(){void 0!==this.styles&&(this.$fastController.styles=this.styles)}connectedCallback(){null!==this.$presentation&&this.$presentation.applyTo(this),super.connectedCallback()}static compose(t){return(e={})=>new Qs(this===qs?class extends qs{}:this,t,e)}}function Js(t,e,i){return"function"==typeof t?t(e,i):t}Et([Nt],qs.prototype,"template",void 0),Et([Nt],qs.prototype,"styles",void 0);class Qs{constructor(t,e,i){this.type=t,this.elementDefinition=e,this.overrideDefinition=i,this.definition=Object.assign(Object.assign({},this.elementDefinition),this.overrideDefinition)}register(t,e){const i=this.definition,n=this.overrideDefinition,o=`${i.prefix||e.elementPrefix}-${i.baseName}`;e.tryDefineElement({name:o,type:this.type,baseClass:this.elementDefinition.baseClass,callback:t=>{const e=new Xs(Js(i.template,t,i),Js(i.styles,t,i));t.definePresentation(e);let o=Js(i.shadowOptions,t,i);t.shadowRootMode&&(o?n.shadowOptions||(o.mode=t.shadowRootMode):null!==o&&(o={mode:t.shadowRootMode})),t.defineElement({elementOptions:Js(i.elementOptions,t,i),shadowOptions:o,attributes:Js(i.attributes,t,i)})}})}}class tl extends qs{constructor(){super(...arguments),this.messageVisible=!1,this.setItems=()=>{for(let t=0;t<this.slottedFeedbackItems.length;t++)this.slottedFeedbackItems[t].addEventListener("selected-change",this.handleItemSelected),this.slottedFeedbackItems[t].addEventListener("menu-changed",this.handleMenuChanged);this.currentSelected=this.slottedFeedbackItems[0]},this.resetItems=()=>{this.messageVisible=!1;for(let t=0;t<this.slottedFeedbackItems.length;t++)this.slottedFeedbackItems[t].removeEventListener("selected-change",this.handleItemSelected),this.slottedFeedbackItems[t].removeEventListener("menu-changed",this.handleMenuChanged)},this.handleItemSelected=t=>{const e=t.target;e!==this.currentSelected&&(this.currentSelected.selected=!1,this.currentSelected.menuVisible=!1,this.messageVisible=!1),this.handleSelected(e)},this.handleMenuChanged=t=>{const e=t.target;this.hideMessage(e)}}slottedFeedbackItemsChanged(){this.$fastController.isConnected&&this.setItems()}messageVisibleChanged(){this.$emit("message-visibility")}handleMenuTimer(t){this.menuTimer&&(t.toggleMenu(!1),this.messageVisible=!1,clearTimeout(this.menuTimer))}handleSelected(t){this.currentSelected=t,t.selected=!t.selected,t.selected?t.toggleMenu(!0):(t.toggleMenu(!1),this.menuTimer&&(this.messageVisible=!1,clearTimeout(this.menuTimer))),this.hideMessage(t)}hideMessage(t){this.calloutDuration&&t.menuVisible&&t.showMessage&&(this.messageVisible=!0,this.menuTimer=setTimeout((()=>{this.handleMenuTimer(t)}),this.calloutDuration))}disconnectedCallback(){super.disconnectedCallback(),this.menuTimer&&clearTimeout(this.menuTimer),this.resetItems()}}us([Nt],tl.prototype,"slottedFeedbackItems",void 0),us([Kt({attribute:"callout-duration"})],tl.prototype,"calloutDuration",void 0),us([Nt],tl.prototype,"messageVisible",void 0);class el{constructor(){this.targetIndex=0}}class il extends el{constructor(){super(...arguments),this.createPlaceholder=Tt.SO.createInterpolationPlaceholder}}class nl extends el{constructor(t,e,i){super(),this.name=t,this.behavior=e,this.options=i}createPlaceholder(t){return Tt.SO.createCustomAttributePlaceholder(this.name,t)}createBehavior(t){return new this.behavior(t,this.options)}}function ol(t,e){this.source=t,this.context=e,null===this.bindingObserver&&(this.bindingObserver=Mt.binding(this.binding,this,this.isBindingVolatile)),this.updateTarget(this.bindingObserver.observe(t,e))}function al(t,e){this.source=t,this.context=e,this.target.addEventListener(this.targetName,this)}function rl(){this.bindingObserver.disconnect(),this.source=null,this.context=null}function sl(){this.bindingObserver.disconnect(),this.source=null,this.context=null;const t=this.target.$fastView;void 0!==t&&t.isComposed&&(t.unbind(),t.needsBindOnly=!0)}function ll(){this.target.removeEventListener(this.targetName,this),this.source=null,this.context=null}function cl(t){Tt.SO.setAttribute(this.target,this.targetName,t)}function ul(t){Tt.SO.setBooleanAttribute(this.target,this.targetName,t)}function dl(t){if(null==t&&(t=""),t.create){this.target.textContent="";let e=this.target.$fastView;void 0===e?e=t.create():this.target.$fastTemplate!==t&&(e.isComposed&&(e.remove(),e.unbind()),e=t.create()),e.isComposed?e.needsBindOnly&&(e.needsBindOnly=!1,e.bind(this.source,this.context)):(e.isComposed=!0,e.bind(this.source,this.context),e.insertBefore(this.target),this.target.$fastView=e,this.target.$fastTemplate=t)}else{const e=this.target.$fastView;void 0!==e&&e.isComposed&&(e.isComposed=!1,e.remove(),e.needsBindOnly?e.needsBindOnly=!1:e.unbind()),this.target.textContent=t}}function hl(t){this.target[this.targetName]=t}function pl(t){const e=this.classVersions||Object.create(null),i=this.target;let n=this.version||0;if(null!=t&&t.length){const o=t.split(/\s+/);for(let t=0,a=o.length;t<a;++t){const a=o[t];""!==a&&(e[a]=n,i.classList.add(a))}}if(this.classVersions=e,this.version=n+1,0!==n){n-=1;for(const t in e)e[t]===n&&i.classList.remove(t)}}class fl extends il{constructor(t){super(),this.binding=t,this.bind=ol,this.unbind=rl,this.updateTarget=cl,this.isBindingVolatile=Mt.isVolatileBinding(this.binding)}get targetName(){return this.originalTargetName}set targetName(t){if(this.originalTargetName=t,void 0!==t)switch(t[0]){case":":if(this.cleanedTargetName=t.substr(1),this.updateTarget=hl,"innerHTML"===this.cleanedTargetName){const t=this.binding;this.binding=(e,i)=>Tt.SO.createHTML(t(e,i))}break;case"?":this.cleanedTargetName=t.substr(1),this.updateTarget=ul;break;case"@":this.cleanedTargetName=t.substr(1),this.bind=al,this.unbind=ll;break;default:this.cleanedTargetName=t,"class"===t&&(this.updateTarget=pl)}}targetAtContent(){this.updateTarget=dl,this.unbind=sl}createBehavior(t){return new gl(t,this.binding,this.isBindingVolatile,this.bind,this.unbind,this.updateTarget,this.cleanedTargetName)}}class gl{constructor(t,e,i,n,o,a,r){this.source=null,this.context=null,this.bindingObserver=null,this.target=t,this.binding=e,this.isBindingVolatile=i,this.bind=n,this.unbind=o,this.updateTarget=a,this.targetName=r}handleChange(){this.updateTarget(this.bindingObserver.observe(this.source,this.context))}handleEvent(t){_t.setEvent(t);const e=this.binding(this.source,this.context);_t.setEvent(null),!0!==e&&t.preventDefault()}}let ml=null;class vl{addFactory(t){t.targetIndex=this.targetIndex,this.behaviorFactories.push(t)}captureContentBinding(t){t.targetAtContent(),this.addFactory(t)}reset(){this.behaviorFactories=[],this.targetIndex=-1}release(){ml=this}static borrow(t){const e=ml||new vl;return e.directives=t,e.reset(),ml=null,e}}function yl(t){if(1===t.length)return t[0];let e;const i=t.length,n=t.map((t=>"string"==typeof t?()=>t:(e=t.targetName||e,t.binding))),o=new fl(((t,e)=>{let o="";for(let a=0;a<i;++a)o+=n[a](t,e);return o}));return o.targetName=e,o}const Cl=Tt.Yl.length;function bl(t,e){const i=e.split(Tt.pc);if(1===i.length)return null;const n=[];for(let e=0,o=i.length;e<o;++e){const o=i[e],a=o.indexOf(Tt.Yl);let r;if(-1===a)r=o;else{const e=parseInt(o.substring(0,a));n.push(t.directives[e]),r=o.substring(a+Cl)}""!==r&&n.push(r)}return n}function Sl(t,e,i=!1){const n=e.attributes;for(let o=0,a=n.length;o<a;++o){const r=n[o],s=r.value,l=bl(t,s);let c=null;null===l?i&&(c=new fl((()=>s)),c.targetName=r.name):c=yl(l),null!==c&&(e.removeAttributeNode(r),o--,a--,t.addFactory(c))}}function xl(t,e,i){const n=bl(t,e.textContent);if(null!==n){let o=e;for(let a=0,r=n.length;a<r;++a){const r=n[a],s=0===a?e:o.parentNode.insertBefore(document.createTextNode(""),o.nextSibling);"string"==typeof r?s.textContent=r:(s.textContent=" ",t.captureContentBinding(r)),o=s,t.targetIndex++,s!==e&&i.nextNode()}t.targetIndex--}}const El=document.createRange();class Al{constructor(t,e){this.fragment=t,this.behaviors=e,this.source=null,this.context=null,this.firstChild=t.firstChild,this.lastChild=t.lastChild}appendTo(t){t.appendChild(this.fragment)}insertBefore(t){if(this.fragment.hasChildNodes())t.parentNode.insertBefore(this.fragment,t);else{const e=t.parentNode,i=this.lastChild;let n,o=this.firstChild;for(;o!==i;)n=o.nextSibling,e.insertBefore(o,t),o=n;e.insertBefore(i,t)}}remove(){const t=this.fragment,e=this.lastChild;let i,n=this.firstChild;for(;n!==e;)i=n.nextSibling,t.appendChild(n),n=i;t.appendChild(e)}dispose(){const t=this.firstChild.parentNode,e=this.lastChild;let i,n=this.firstChild;for(;n!==e;)i=n.nextSibling,t.removeChild(n),n=i;t.removeChild(e);const o=this.behaviors,a=this.source;for(let t=0,e=o.length;t<e;++t)o[t].unbind(a)}bind(t,e){const i=this.behaviors;if(this.source!==t)if(null!==this.source){const n=this.source;this.source=t,this.context=e;for(let o=0,a=i.length;o<a;++o){const a=i[o];a.unbind(n),a.bind(t,e)}}else{this.source=t,this.context=e;for(let n=0,o=i.length;n<o;++n)i[n].bind(t,e)}}unbind(){if(null===this.source)return;const t=this.behaviors,e=this.source;for(let i=0,n=t.length;i<n;++i)t[i].unbind(e);this.source=null}static disposeContiguousBatch(t){if(0!==t.length){El.setStartBefore(t[0].firstChild),El.setEndAfter(t[t.length-1].lastChild),El.deleteContents();for(let e=0,i=t.length;e<i;++e){const i=t[e],n=i.behaviors,o=i.source;for(let t=0,e=n.length;t<e;++t)n[t].unbind(o)}}}}class Tl{constructor(t,e){this.behaviorCount=0,this.hasHostBehaviors=!1,this.fragment=null,this.targetOffset=0,this.viewBehaviorFactories=null,this.hostBehaviorFactories=null,this.html=t,this.directives=e}create(t){if(null===this.fragment){let t;const e=this.html;if("string"==typeof e){t=document.createElement("template"),t.innerHTML=Tt.SO.createHTML(e);const i=t.content.firstElementChild;null!==i&&"TEMPLATE"===i.tagName&&(t=i)}else t=e;const i=function(t,e){const i=t.content;document.adoptNode(i);const n=vl.borrow(e);Sl(n,t,!0);const o=n.behaviorFactories;n.reset();const a=Tt.SO.createTemplateWalker(i);let r;for(;r=a.nextNode();)switch(n.targetIndex++,r.nodeType){case 1:Sl(n,r);break;case 3:xl(n,r,a);break;case 8:Tt.SO.isMarker(r)&&n.addFactory(e[Tt.SO.extractDirectiveIndexFromMarker(r)])}let s=0;(Tt.SO.isMarker(i.firstChild)||1===i.childNodes.length&&e.length)&&(i.insertBefore(document.createComment(""),i.firstChild),s=-1);const l=n.behaviorFactories;return n.release(),{fragment:i,viewBehaviorFactories:l,hostBehaviorFactories:o,targetOffset:s}}(t,this.directives);this.fragment=i.fragment,this.viewBehaviorFactories=i.viewBehaviorFactories,this.hostBehaviorFactories=i.hostBehaviorFactories,this.targetOffset=i.targetOffset,this.behaviorCount=this.viewBehaviorFactories.length+this.hostBehaviorFactories.length,this.hasHostBehaviors=this.hostBehaviorFactories.length>0}const e=this.fragment.cloneNode(!0),i=this.viewBehaviorFactories,n=new Array(this.behaviorCount),o=Tt.SO.createTemplateWalker(e);let a=0,r=this.targetOffset,s=o.nextNode();for(let t=i.length;a<t;++a){const t=i[a],e=t.targetIndex;for(;null!==s;){if(r===e){n[a]=t.createBehavior(s);break}s=o.nextNode(),r++}}if(this.hasHostBehaviors){const e=this.hostBehaviorFactories;for(let i=0,o=e.length;i<o;++i,++a)n[a]=e[i].createBehavior(t)}return new Al(e,n)}render(t,e,i){"string"==typeof e&&(e=document.getElementById(e)),void 0===i&&(i=e);const n=this.create(i);return n.bind(t,Ft),n.appendTo(e),n}}const Il=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function Dl(t,...e){const i=[];let n="";for(let o=0,a=t.length-1;o<a;++o){const a=t[o];let r=e[o];if(n+=a,r instanceof Tl){const t=r;r=()=>t}if("function"==typeof r&&(r=new fl(r)),r instanceof il){const t=Il.exec(a);null!==t&&(r.targetName=t[2])}r instanceof el?(n+=r.createPlaceholder(i.length),i.push(r)):n+=r}return n+=t[t.length-1],new Tl(n,i)}function kl(t){return t?function(e,i,n){return 1===e.nodeType&&e.matches(t)}:function(t,e,i){return 1===t.nodeType}}class wl{constructor(t,e){this.target=t,this.options=e,this.source=null}bind(t){const e=this.options.property;this.shouldUpdate=Mt.getAccessors(t).some((t=>t.name===e)),this.source=t,this.updateTarget(this.computeNodes()),this.shouldUpdate&&this.observe()}unbind(){this.updateTarget(It.ow),this.source=null,this.shouldUpdate&&this.disconnect()}handleEvent(){this.updateTarget(this.computeNodes())}computeNodes(){let t=this.getNodes();return void 0!==this.options.filter&&(t=t.filter(this.options.filter)),t}updateTarget(t){this.source[this.options.property]=t}}class Rl extends wl{constructor(t,e){super(t,e)}observe(){this.target.addEventListener("slotchange",this)}disconnect(){this.target.removeEventListener("slotchange",this)}getNodes(){return this.target.assignedNodes(this.options)}}function Ol(t){return"string"==typeof t&&(t={property:t}),new nl("fast-slotted",Rl,t)}function Pl(t,e){const i=[];let n="";const o=[];for(let a=0,r=t.length-1;a<r;++a){n+=t[a];let r=e[a];if(r instanceof At){const t=r.createBehavior();r=r.createCSS(),t&&o.push(t)}r instanceof Ht||r instanceof CSSStyleSheet?(""!==n.trim()&&(i.push(n),n=""),i.push(r)):n+=r}return n+=t[t.length-1],""!==n.trim()&&i.push(n),{styles:i,behaviors:o}}function Ml(t,...e){const{styles:i,behaviors:n}=Pl(t,e),o=Ht.create(i);return n.length&&o.withBehaviors(...n),o}class Nl extends At{constructor(t,e){super(),this.behaviors=e,this.css="";const i=t.reduce(((t,e)=>("string"==typeof e?this.css+=e:t.push(e),t)),[]);i.length&&(this.styles=Ht.create(i))}createBehavior(){return this}createCSS(){return this.css}bind(t){this.styles&&t.$fastController.addStyles(this.styles),this.behaviors.length&&t.$fastController.addBehaviors(this.behaviors)}unbind(t){this.styles&&t.$fastController.removeStyles(this.styles),this.behaviors.length&&t.$fastController.removeBehaviors(this.behaviors)}}function Ll(t){return`:host([hidden]){display:none}:host{display:${t}}`}const _l="resize",Fl="scroll",Hl=t=>{const e=t.closest("[dir]");return null!==e&&"rtl"===e.dir?xe.rtl:xe.ltr};class Zl extends qs{constructor(){super(...arguments),this.anchor="",this.viewport="",this.horizontalPositioningMode="uncontrolled",this.horizontalDefaultPosition="unset",this.horizontalViewportLock=!1,this.horizontalInset=!1,this.horizontalScaling="content",this.verticalPositioningMode="uncontrolled",this.verticalDefaultPosition="unset",this.verticalViewportLock=!1,this.verticalInset=!1,this.verticalScaling="content",this.fixedPlacement=!1,this.autoUpdateMode="anchor",this.anchorElement=null,this.viewportElement=null,this.initialLayoutComplete=!1,this.resizeDetector=null,this.baseHorizontalOffset=0,this.baseVerticalOffset=0,this.pendingPositioningUpdate=!1,this.pendingReset=!1,this.currentDirection=xe.ltr,this.regionVisible=!1,this.forceUpdate=!1,this.updateThreshold=.5,this.update=()=>{this.pendingPositioningUpdate||this.requestPositionUpdates()},this.startObservers=()=>{this.stopObservers(),null!==this.anchorElement&&(this.requestPositionUpdates(),null!==this.resizeDetector&&(this.resizeDetector.observe(this.anchorElement),this.resizeDetector.observe(this)))},this.requestPositionUpdates=()=>{null===this.anchorElement||this.pendingPositioningUpdate||(Zl.intersectionService.requestPosition(this,this.handleIntersection),Zl.intersectionService.requestPosition(this.anchorElement,this.handleIntersection),null!==this.viewportElement&&Zl.intersectionService.requestPosition(this.viewportElement,this.handleIntersection),this.pendingPositioningUpdate=!0)},this.stopObservers=()=>{this.pendingPositioningUpdate&&(this.pendingPositioningUpdate=!1,Zl.intersectionService.cancelRequestPosition(this,this.handleIntersection),null!==this.anchorElement&&Zl.intersectionService.cancelRequestPosition(this.anchorElement,this.handleIntersection),null!==this.viewportElement&&Zl.intersectionService.cancelRequestPosition(this.viewportElement,this.handleIntersection)),null!==this.resizeDetector&&this.resizeDetector.disconnect()},this.getViewport=()=>"string"!=typeof this.viewport||""===this.viewport?document.documentElement:document.getElementById(this.viewport),this.getAnchor=()=>document.getElementById(this.anchor),this.handleIntersection=t=>{this.pendingPositioningUpdate&&(this.pendingPositioningUpdate=!1,this.applyIntersectionEntries(t)&&this.updateLayout())},this.applyIntersectionEntries=t=>{const e=t.find((t=>t.target===this)),i=t.find((t=>t.target===this.anchorElement)),n=t.find((t=>t.target===this.viewportElement));return void 0!==e&&void 0!==n&&void 0!==i&&(!!(!this.regionVisible||this.forceUpdate||void 0===this.regionRect||void 0===this.anchorRect||void 0===this.viewportRect||this.isRectDifferent(this.anchorRect,i.boundingClientRect)||this.isRectDifferent(this.viewportRect,n.boundingClientRect)||this.isRectDifferent(this.regionRect,e.boundingClientRect))&&(this.regionRect=e.boundingClientRect,this.anchorRect=i.boundingClientRect,this.viewportElement===document.documentElement?this.viewportRect=new DOMRectReadOnly(n.boundingClientRect.x+document.documentElement.scrollLeft,n.boundingClientRect.y+document.documentElement.scrollTop,n.boundingClientRect.width,n.boundingClientRect.height):this.viewportRect=n.boundingClientRect,this.updateRegionOffset(),this.forceUpdate=!1,!0))},this.updateRegionOffset=()=>{this.anchorRect&&this.regionRect&&(this.baseHorizontalOffset=this.baseHorizontalOffset+(this.anchorRect.left-this.regionRect.left)+(this.translateX-this.baseHorizontalOffset),this.baseVerticalOffset=this.baseVerticalOffset+(this.anchorRect.top-this.regionRect.top)+(this.translateY-this.baseVerticalOffset))},this.isRectDifferent=(t,e)=>Math.abs(t.top-e.top)>this.updateThreshold||Math.abs(t.right-e.right)>this.updateThreshold||Math.abs(t.bottom-e.bottom)>this.updateThreshold||Math.abs(t.left-e.left)>this.updateThreshold,this.handleResize=t=>{this.update()},this.reset=()=>{this.pendingReset&&(this.pendingReset=!1,null===this.anchorElement&&(this.anchorElement=this.getAnchor()),null===this.viewportElement&&(this.viewportElement=this.getViewport()),this.currentDirection=Hl(this),this.startObservers())},this.updateLayout=()=>{let t,e;if("uncontrolled"!==this.horizontalPositioningMode){const t=this.getPositioningOptions(this.horizontalInset);if("center"===this.horizontalDefaultPosition)e="center";else if("unset"!==this.horizontalDefaultPosition){let t=this.horizontalDefaultPosition;if("start"===t||"end"===t){const e=Hl(this);if(e!==this.currentDirection)return this.currentDirection=e,void this.initialize();t=this.currentDirection===xe.ltr?"start"===t?"left":"right":"start"===t?"right":"left"}switch(t){case"left":e=this.horizontalInset?"insetStart":"start";break;case"right":e=this.horizontalInset?"insetEnd":"end"}}const i=void 0!==this.horizontalThreshold?this.horizontalThreshold:void 0!==this.regionRect?this.regionRect.width:0,n=void 0!==this.anchorRect?this.anchorRect.left:0,o=void 0!==this.anchorRect?this.anchorRect.right:0,a=void 0!==this.anchorRect?this.anchorRect.width:0,r=void 0!==this.viewportRect?this.viewportRect.left:0,s=void 0!==this.viewportRect?this.viewportRect.right:0;(void 0===e||"locktodefault"!==this.horizontalPositioningMode&&this.getAvailableSpace(e,n,o,a,r,s)<i)&&(e=this.getAvailableSpace(t[0],n,o,a,r,s)>this.getAvailableSpace(t[1],n,o,a,r,s)?t[0]:t[1])}if("uncontrolled"!==this.verticalPositioningMode){const e=this.getPositioningOptions(this.verticalInset);if("center"===this.verticalDefaultPosition)t="center";else if("unset"!==this.verticalDefaultPosition)switch(this.verticalDefaultPosition){case"top":t=this.verticalInset?"insetStart":"start";break;case"bottom":t=this.verticalInset?"insetEnd":"end"}const i=void 0!==this.verticalThreshold?this.verticalThreshold:void 0!==this.regionRect?this.regionRect.height:0,n=void 0!==this.anchorRect?this.anchorRect.top:0,o=void 0!==this.anchorRect?this.anchorRect.bottom:0,a=void 0!==this.anchorRect?this.anchorRect.height:0,r=void 0!==this.viewportRect?this.viewportRect.top:0,s=void 0!==this.viewportRect?this.viewportRect.bottom:0;(void 0===t||"locktodefault"!==this.verticalPositioningMode&&this.getAvailableSpace(t,n,o,a,r,s)<i)&&(t=this.getAvailableSpace(e[0],n,o,a,r,s)>this.getAvailableSpace(e[1],n,o,a,r,s)?e[0]:e[1])}const i=this.getNextRegionDimension(e,t),n=this.horizontalPosition!==e||this.verticalPosition!==t;if(this.setHorizontalPosition(e,i),this.setVerticalPosition(t,i),this.updateRegionStyle(),!this.initialLayoutComplete)return this.initialLayoutComplete=!0,void this.requestPositionUpdates();this.regionVisible||(this.regionVisible=!0,this.style.removeProperty("pointer-events"),this.style.removeProperty("opacity"),this.classList.toggle("loaded",!0),this.$emit("loaded",this,{bubbles:!1})),this.updatePositionClasses(),n&&this.$emit("positionchange",this,{bubbles:!1})},this.updateRegionStyle=()=>{this.style.width=this.regionWidth,this.style.height=this.regionHeight,this.style.transform=`translate(${this.translateX}px, ${this.translateY}px)`},this.updatePositionClasses=()=>{this.classList.toggle("top","start"===this.verticalPosition),this.classList.toggle("bottom","end"===this.verticalPosition),this.classList.toggle("inset-top","insetStart"===this.verticalPosition),this.classList.toggle("inset-bottom","insetEnd"===this.verticalPosition),this.classList.toggle("vertical-center","center"===this.verticalPosition),this.classList.toggle("left","start"===this.horizontalPosition),this.classList.toggle("right","end"===this.horizontalPosition),this.classList.toggle("inset-left","insetStart"===this.horizontalPosition),this.classList.toggle("inset-right","insetEnd"===this.horizontalPosition),this.classList.toggle("horizontal-center","center"===this.horizontalPosition)},this.setHorizontalPosition=(t,e)=>{if(void 0===t||void 0===this.regionRect||void 0===this.anchorRect||void 0===this.viewportRect)return;let i=0;switch(this.horizontalScaling){case"anchor":case"fill":i=e.width,this.regionWidth=`${i}px`;break;case"content":i=this.regionRect.width,this.regionWidth="unset"}let n=0;switch(t){case"start":this.translateX=this.baseHorizontalOffset-i,this.horizontalViewportLock&&this.anchorRect.left>this.viewportRect.right&&(this.translateX=this.translateX-(this.anchorRect.left-this.viewportRect.right));break;case"insetStart":this.translateX=this.baseHorizontalOffset-i+this.anchorRect.width,this.horizontalViewportLock&&this.anchorRect.right>this.viewportRect.right&&(this.translateX=this.translateX-(this.anchorRect.right-this.viewportRect.right));break;case"insetEnd":this.translateX=this.baseHorizontalOffset,this.horizontalViewportLock&&this.anchorRect.left<this.viewportRect.left&&(this.translateX=this.translateX-(this.anchorRect.left-this.viewportRect.left));break;case"end":this.translateX=this.baseHorizontalOffset+this.anchorRect.width,this.horizontalViewportLock&&this.anchorRect.right<this.viewportRect.left&&(this.translateX=this.translateX-(this.anchorRect.right-this.viewportRect.left));break;case"center":if(n=(this.anchorRect.width-i)/2,this.translateX=this.baseHorizontalOffset+n,this.horizontalViewportLock){const t=this.anchorRect.left+n,e=this.anchorRect.right-n;t<this.viewportRect.left&&!(e>this.viewportRect.right)?this.translateX=this.translateX-(t-this.viewportRect.left):e>this.viewportRect.right&&!(t<this.viewportRect.left)&&(this.translateX=this.translateX-(e-this.viewportRect.right))}}this.horizontalPosition=t},this.setVerticalPosition=(t,e)=>{if(void 0===t||void 0===this.regionRect||void 0===this.anchorRect||void 0===this.viewportRect)return;let i=0;switch(this.verticalScaling){case"anchor":case"fill":i=e.height,this.regionHeight=`${i}px`;break;case"content":i=this.regionRect.height,this.regionHeight="unset"}let n=0;switch(t){case"start":this.translateY=this.baseVerticalOffset-i,this.verticalViewportLock&&this.anchorRect.top>this.viewportRect.bottom&&(this.translateY=this.translateY-(this.anchorRect.top-this.viewportRect.bottom));break;case"insetStart":this.translateY=this.baseVerticalOffset-i+this.anchorRect.height,this.verticalViewportLock&&this.anchorRect.bottom>this.viewportRect.bottom&&(this.translateY=this.translateY-(this.anchorRect.bottom-this.viewportRect.bottom));break;case"insetEnd":this.translateY=this.baseVerticalOffset,this.verticalViewportLock&&this.anchorRect.top<this.viewportRect.top&&(this.translateY=this.translateY-(this.anchorRect.top-this.viewportRect.top));break;case"end":this.translateY=this.baseVerticalOffset+this.anchorRect.height,this.verticalViewportLock&&this.anchorRect.bottom<this.viewportRect.top&&(this.translateY=this.translateY-(this.anchorRect.bottom-this.viewportRect.top));break;case"center":if(n=(this.anchorRect.height-i)/2,this.translateY=this.baseVerticalOffset+n,this.verticalViewportLock){const t=this.anchorRect.top+n,e=this.anchorRect.bottom-n;t<this.viewportRect.top&&!(e>this.viewportRect.bottom)?this.translateY=this.translateY-(t-this.viewportRect.top):e>this.viewportRect.bottom&&!(t<this.viewportRect.top)&&(this.translateY=this.translateY-(e-this.viewportRect.bottom))}}this.verticalPosition=t},this.getPositioningOptions=t=>t?["insetStart","insetEnd"]:["start","end"],this.getAvailableSpace=(t,e,i,n,o,a)=>{const r=e-o,s=a-(e+n);switch(t){case"start":return r;case"insetStart":return r+n;case"insetEnd":return s+n;case"end":return s;case"center":return 2*Math.min(r,s)+n}},this.getNextRegionDimension=(t,e)=>{const i={height:void 0!==this.regionRect?this.regionRect.height:0,width:void 0!==this.regionRect?this.regionRect.width:0};return void 0!==t&&"fill"===this.horizontalScaling?i.width=this.getAvailableSpace(t,void 0!==this.anchorRect?this.anchorRect.left:0,void 0!==this.anchorRect?this.anchorRect.right:0,void 0!==this.anchorRect?this.anchorRect.width:0,void 0!==this.viewportRect?this.viewportRect.left:0,void 0!==this.viewportRect?this.viewportRect.right:0):"anchor"===this.horizontalScaling&&(i.width=void 0!==this.anchorRect?this.anchorRect.width:0),void 0!==e&&"fill"===this.verticalScaling?i.height=this.getAvailableSpace(e,void 0!==this.anchorRect?this.anchorRect.top:0,void 0!==this.anchorRect?this.anchorRect.bottom:0,void 0!==this.anchorRect?this.anchorRect.height:0,void 0!==this.viewportRect?this.viewportRect.top:0,void 0!==this.viewportRect?this.viewportRect.bottom:0):"anchor"===this.verticalScaling&&(i.height=void 0!==this.anchorRect?this.anchorRect.height:0),i},this.startAutoUpdateEventListeners=()=>{window.addEventListener(_l,this.update,{passive:!0}),window.addEventListener(Fl,this.update,{passive:!0,capture:!0}),null!==this.resizeDetector&&null!==this.viewportElement&&this.resizeDetector.observe(this.viewportElement)},this.stopAutoUpdateEventListeners=()=>{window.removeEventListener(_l,this.update),window.removeEventListener(Fl,this.update),null!==this.resizeDetector&&null!==this.viewportElement&&this.resizeDetector.unobserve(this.viewportElement)}}anchorChanged(){this.initialLayoutComplete&&(this.anchorElement=this.getAnchor())}viewportChanged(){this.initialLayoutComplete&&(this.viewportElement=this.getViewport())}horizontalPositioningModeChanged(){this.requestReset()}horizontalDefaultPositionChanged(){this.updateForAttributeChange()}horizontalViewportLockChanged(){this.updateForAttributeChange()}horizontalInsetChanged(){this.updateForAttributeChange()}horizontalThresholdChanged(){this.updateForAttributeChange()}horizontalScalingChanged(){this.updateForAttributeChange()}verticalPositioningModeChanged(){this.requestReset()}verticalDefaultPositionChanged(){this.updateForAttributeChange()}verticalViewportLockChanged(){this.updateForAttributeChange()}verticalInsetChanged(){this.updateForAttributeChange()}verticalThresholdChanged(){this.updateForAttributeChange()}verticalScalingChanged(){this.updateForAttributeChange()}fixedPlacementChanged(){this.$fastController.isConnected&&this.initialLayoutComplete&&this.initialize()}autoUpdateModeChanged(t,e){this.$fastController.isConnected&&this.initialLayoutComplete&&("auto"===t&&this.stopAutoUpdateEventListeners(),"auto"===e&&this.startAutoUpdateEventListeners())}anchorElementChanged(){this.requestReset()}viewportElementChanged(){this.$fastController.isConnected&&this.initialLayoutComplete&&this.initialize()}connectedCallback(){super.connectedCallback(),"auto"===this.autoUpdateMode&&this.startAutoUpdateEventListeners(),this.initialize()}disconnectedCallback(){super.disconnectedCallback(),"auto"===this.autoUpdateMode&&this.stopAutoUpdateEventListeners(),this.stopObservers(),this.disconnectResizeDetector()}adoptedCallback(){this.initialize()}disconnectResizeDetector(){null!==this.resizeDetector&&(this.resizeDetector.disconnect(),this.resizeDetector=null)}initializeResizeDetector(){this.disconnectResizeDetector(),this.resizeDetector=new window.ResizeObserver(this.handleResize)}updateForAttributeChange(){this.$fastController.isConnected&&this.initialLayoutComplete&&(this.forceUpdate=!0,this.update())}initialize(){this.initializeResizeDetector(),null===this.anchorElement&&(this.anchorElement=this.getAnchor()),this.requestReset()}requestReset(){this.$fastController.isConnected&&!1===this.pendingReset&&(this.setInitialState(),Tt.SO.queueUpdate((()=>this.reset())),this.pendingReset=!0)}setInitialState(){this.initialLayoutComplete=!1,this.regionVisible=!1,this.translateX=0,this.translateY=0,this.baseHorizontalOffset=0,this.baseVerticalOffset=0,this.viewportRect=void 0,this.regionRect=void 0,this.anchorRect=void 0,this.verticalPosition=void 0,this.horizontalPosition=void 0,this.style.opacity="0",this.style.pointerEvents="none",this.forceUpdate=!1,this.style.position=this.fixedPlacement?"fixed":"absolute",this.updatePositionClasses(),this.updateRegionStyle()}}Zl.intersectionService=new class{constructor(){this.intersectionDetector=null,this.observedElements=new Map,this.requestPosition=(t,e)=>{var i;null!==this.intersectionDetector&&(this.observedElements.has(t)?null===(i=this.observedElements.get(t))||void 0===i||i.push(e):(this.observedElements.set(t,[e]),this.intersectionDetector.observe(t)))},this.cancelRequestPosition=(t,e)=>{const i=this.observedElements.get(t);if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}},this.initializeIntersectionDetector=()=>{It.P3.IntersectionObserver&&(this.intersectionDetector=new IntersectionObserver(this.handleIntersection,{root:null,rootMargin:"0px",threshold:[0,1]}))},this.handleIntersection=t=>{if(null===this.intersectionDetector)return;const e=[],i=[];t.forEach((t=>{var n;null===(n=this.intersectionDetector)||void 0===n||n.unobserve(t.target);const o=this.observedElements.get(t.target);void 0!==o&&(o.forEach((n=>{let o=e.indexOf(n);-1===o&&(o=e.length,e.push(n),i.push([])),i[o].push(t)})),this.observedElements.delete(t.target))})),e.forEach(((t,e)=>{t(i[e])}))},this.initializeIntersectionDetector()}},Et([Kt],Zl.prototype,"anchor",void 0),Et([Kt],Zl.prototype,"viewport",void 0),Et([Kt({attribute:"horizontal-positioning-mode"})],Zl.prototype,"horizontalPositioningMode",void 0),Et([Kt({attribute:"horizontal-default-position"})],Zl.prototype,"horizontalDefaultPosition",void 0),Et([Kt({attribute:"horizontal-viewport-lock",mode:"boolean"})],Zl.prototype,"horizontalViewportLock",void 0),Et([Kt({attribute:"horizontal-inset",mode:"boolean"})],Zl.prototype,"horizontalInset",void 0),Et([Kt({attribute:"horizontal-threshold"})],Zl.prototype,"horizontalThreshold",void 0),Et([Kt({attribute:"horizontal-scaling"})],Zl.prototype,"horizontalScaling",void 0),Et([Kt({attribute:"vertical-positioning-mode"})],Zl.prototype,"verticalPositioningMode",void 0),Et([Kt({attribute:"vertical-default-position"})],Zl.prototype,"verticalDefaultPosition",void 0),Et([Kt({attribute:"vertical-viewport-lock",mode:"boolean"})],Zl.prototype,"verticalViewportLock",void 0),Et([Kt({attribute:"vertical-inset",mode:"boolean"})],Zl.prototype,"verticalInset",void 0),Et([Kt({attribute:"vertical-threshold"})],Zl.prototype,"verticalThreshold",void 0),Et([Kt({attribute:"vertical-scaling"})],Zl.prototype,"verticalScaling",void 0),Et([Kt({attribute:"fixed-placement",mode:"boolean"})],Zl.prototype,"fixedPlacement",void 0),Et([Kt({attribute:"auto-update-mode"})],Zl.prototype,"autoUpdateMode",void 0),Et([Nt],Zl.prototype,"anchorElement",void 0),Et([Nt],Zl.prototype,"viewportElement",void 0),Et([Nt],Zl.prototype,"initialLayoutComplete",void 0);class Bl{constructor(t,e){this.target=t,this.propertyName=e}bind(t){t[this.propertyName]=this.target}unbind(){}}function Ul(t){return new nl("fast-ref",Bl,t)}function Gl(t,e){const i="function"==typeof e?e:()=>e;return(e,n)=>t(e,n)?i(e,n):null}class Vl{}Et([Kt({attribute:"aria-atomic"})],Vl.prototype,"ariaAtomic",void 0),Et([Kt({attribute:"aria-busy"})],Vl.prototype,"ariaBusy",void 0),Et([Kt({attribute:"aria-controls"})],Vl.prototype,"ariaControls",void 0),Et([Kt({attribute:"aria-current"})],Vl.prototype,"ariaCurrent",void 0),Et([Kt({attribute:"aria-describedby"})],Vl.prototype,"ariaDescribedby",void 0),Et([Kt({attribute:"aria-details"})],Vl.prototype,"ariaDetails",void 0),Et([Kt({attribute:"aria-disabled"})],Vl.prototype,"ariaDisabled",void 0),Et([Kt({attribute:"aria-errormessage"})],Vl.prototype,"ariaErrormessage",void 0),Et([Kt({attribute:"aria-flowto"})],Vl.prototype,"ariaFlowto",void 0),Et([Kt({attribute:"aria-haspopup"})],Vl.prototype,"ariaHaspopup",void 0),Et([Kt({attribute:"aria-hidden"})],Vl.prototype,"ariaHidden",void 0),Et([Kt({attribute:"aria-invalid"})],Vl.prototype,"ariaInvalid",void 0),Et([Kt({attribute:"aria-keyshortcuts"})],Vl.prototype,"ariaKeyshortcuts",void 0),Et([Kt({attribute:"aria-label"})],Vl.prototype,"ariaLabel",void 0),Et([Kt({attribute:"aria-labelledby"})],Vl.prototype,"ariaLabelledby",void 0),Et([Kt({attribute:"aria-live"})],Vl.prototype,"ariaLive",void 0),Et([Kt({attribute:"aria-owns"})],Vl.prototype,"ariaOwns",void 0),Et([Kt({attribute:"aria-relevant"})],Vl.prototype,"ariaRelevant",void 0),Et([Kt({attribute:"aria-roledescription"})],Vl.prototype,"ariaRoledescription",void 0);class $l{handleStartContentChange(){this.startContainer.classList.toggle("start",this.start.assignedNodes().length>0)}handleEndContentChange(){this.endContainer.classList.toggle("end",this.end.assignedNodes().length>0)}}const Wl=(t,e)=>Dl`
    <span
        part="end"
        ${Ul("endContainer")}
        class=${t=>e.end?"end":void 0}
    >
        <slot name="end" ${Ul("end")} @slotchange="${t=>t.handleEndContentChange()}">
            ${e.end||""}
        </slot>
    </span>
`,zl=(t,e)=>Dl`
    <span
        part="start"
        ${Ul("startContainer")}
        class="${t=>e.start?"start":void 0}"
    >
        <slot
            name="start"
            ${Ul("start")}
            @slotchange="${t=>t.handleStartContentChange()}"
        >
            ${e.start||""}
        </slot>
    </span>
`;Dl`
    <span part="end" ${Ul("endContainer")}>
        <slot
            name="end"
            ${Ul("end")}
            @slotchange="${t=>t.handleEndContentChange()}"
        ></slot>
    </span>
`,Dl`
    <span part="start" ${Ul("startContainer")}>
        <slot
            name="start"
            ${Ul("start")}
            @slotchange="${t=>t.handleStartContentChange()}"
        ></slot>
    </span>
`;function Kl(t,...e){e.forEach((e=>{if(Object.getOwnPropertyNames(e.prototype).forEach((i=>{"constructor"!==i&&Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i))})),e.attributes){const i=t.attributes||[];t.attributes=i.concat(e.attributes)}}))}var Yl;!function(t){t[t.alt=18]="alt",t[t.arrowDown=40]="arrowDown",t[t.arrowLeft=37]="arrowLeft",t[t.arrowRight=39]="arrowRight",t[t.arrowUp=38]="arrowUp",t[t.back=8]="back",t[t.backSlash=220]="backSlash",t[t.break=19]="break",t[t.capsLock=20]="capsLock",t[t.closeBracket=221]="closeBracket",t[t.colon=186]="colon",t[t.colon2=59]="colon2",t[t.comma=188]="comma",t[t.ctrl=17]="ctrl",t[t.delete=46]="delete",t[t.end=35]="end",t[t.enter=13]="enter",t[t.equals=187]="equals",t[t.equals2=61]="equals2",t[t.equals3=107]="equals3",t[t.escape=27]="escape",t[t.forwardSlash=191]="forwardSlash",t[t.function1=112]="function1",t[t.function10=121]="function10",t[t.function11=122]="function11",t[t.function12=123]="function12",t[t.function2=113]="function2",t[t.function3=114]="function3",t[t.function4=115]="function4",t[t.function5=116]="function5",t[t.function6=117]="function6",t[t.function7=118]="function7",t[t.function8=119]="function8",t[t.function9=120]="function9",t[t.home=36]="home",t[t.insert=45]="insert",t[t.menu=93]="menu",t[t.minus=189]="minus",t[t.minus2=109]="minus2",t[t.numLock=144]="numLock",t[t.numPad0=96]="numPad0",t[t.numPad1=97]="numPad1",t[t.numPad2=98]="numPad2",t[t.numPad3=99]="numPad3",t[t.numPad4=100]="numPad4",t[t.numPad5=101]="numPad5",t[t.numPad6=102]="numPad6",t[t.numPad7=103]="numPad7",t[t.numPad8=104]="numPad8",t[t.numPad9=105]="numPad9",t[t.numPadDivide=111]="numPadDivide",t[t.numPadDot=110]="numPadDot",t[t.numPadMinus=109]="numPadMinus",t[t.numPadMultiply=106]="numPadMultiply",t[t.numPadPlus=107]="numPadPlus",t[t.openBracket=219]="openBracket",t[t.pageDown=34]="pageDown",t[t.pageUp=33]="pageUp",t[t.period=190]="period",t[t.print=44]="print",t[t.quote=222]="quote",t[t.scrollLock=145]="scrollLock",t[t.shift=16]="shift",t[t.space=32]="space",t[t.tab=9]="tab",t[t.tilde=192]="tilde",t[t.windowsLeft=91]="windowsLeft",t[t.windowsOpera=219]="windowsOpera",t[t.windowsRight=92]="windowsRight"}(Yl||(Yl={}));const jl=32,Xl="ArrowDown",ql="ArrowLeft",Jl="ArrowRight",Ql="ArrowUp",tc="Enter",ec="Escape",ic="Home",nc="End",oc=" ",ac={ArrowDown:Xl,ArrowLeft:ql,ArrowRight:Jl,ArrowUp:Ql},rc="form-associated-proxy",sc="ElementInternals",lc=sc in window&&"setFormValue"in window.ElementInternals.prototype,cc=new WeakMap;function uc(t){const e=class extends t{constructor(...t){super(...t),this.dirtyValue=!1,this.disabled=!1,this.proxyEventsToBlock=["change","click"],this.proxyInitialized=!1,this.required=!1,this.initialValue=this.initialValue||"",this.elementInternals||(this.formResetCallback=this.formResetCallback.bind(this))}static get formAssociated(){return lc}get validity(){return this.elementInternals?this.elementInternals.validity:this.proxy.validity}get form(){return this.elementInternals?this.elementInternals.form:this.proxy.form}get validationMessage(){return this.elementInternals?this.elementInternals.validationMessage:this.proxy.validationMessage}get willValidate(){return this.elementInternals?this.elementInternals.willValidate:this.proxy.willValidate}get labels(){if(this.elementInternals)return Object.freeze(Array.from(this.elementInternals.labels));if(this.proxy instanceof HTMLElement&&this.proxy.ownerDocument&&this.id){const t=this.proxy.labels,e=Array.from(this.proxy.getRootNode().querySelectorAll(`[for='${this.id}']`)),i=t?e.concat(Array.from(t)):e;return Object.freeze(i)}return It.ow}valueChanged(t,e){this.dirtyValue=!0,this.proxy instanceof HTMLElement&&(this.proxy.value=this.value),this.currentValue=this.value,this.setFormValue(this.value),this.validate()}currentValueChanged(){this.value=this.currentValue}initialValueChanged(t,e){this.dirtyValue||(this.value=this.initialValue,this.dirtyValue=!1)}disabledChanged(t,e){this.proxy instanceof HTMLElement&&(this.proxy.disabled=this.disabled),Tt.SO.queueUpdate((()=>this.classList.toggle("disabled",this.disabled)))}nameChanged(t,e){this.proxy instanceof HTMLElement&&(this.proxy.name=this.name)}requiredChanged(t,e){this.proxy instanceof HTMLElement&&(this.proxy.required=this.required),Tt.SO.queueUpdate((()=>this.classList.toggle("required",this.required))),this.validate()}get elementInternals(){if(!lc)return null;let t=cc.get(this);return t||(t=this.attachInternals(),cc.set(this,t)),t}connectedCallback(){super.connectedCallback(),this.addEventListener("keypress",this._keypressHandler),this.value||(this.value=this.initialValue,this.dirtyValue=!1),this.elementInternals||(this.attachProxy(),this.form&&this.form.addEventListener("reset",this.formResetCallback))}disconnectedCallback(){this.proxyEventsToBlock.forEach((t=>this.proxy.removeEventListener(t,this.stopPropagation))),!this.elementInternals&&this.form&&this.form.removeEventListener("reset",this.formResetCallback)}checkValidity(){return this.elementInternals?this.elementInternals.checkValidity():this.proxy.checkValidity()}reportValidity(){return this.elementInternals?this.elementInternals.reportValidity():this.proxy.reportValidity()}setValidity(t,e,i){this.elementInternals?this.elementInternals.setValidity(t,e,i):"string"==typeof e&&this.proxy.setCustomValidity(e)}formDisabledCallback(t){this.disabled=t}formResetCallback(){this.value=this.initialValue,this.dirtyValue=!1}attachProxy(){var t;this.proxyInitialized||(this.proxyInitialized=!0,this.proxy.style.display="none",this.proxyEventsToBlock.forEach((t=>this.proxy.addEventListener(t,this.stopPropagation))),this.proxy.disabled=this.disabled,this.proxy.required=this.required,"string"==typeof this.name&&(this.proxy.name=this.name),"string"==typeof this.value&&(this.proxy.value=this.value),this.proxy.setAttribute("slot",rc),this.proxySlot=document.createElement("slot"),this.proxySlot.setAttribute("name",rc)),null===(t=this.shadowRoot)||void 0===t||t.appendChild(this.proxySlot),this.appendChild(this.proxy)}detachProxy(){var t;this.removeChild(this.proxy),null===(t=this.shadowRoot)||void 0===t||t.removeChild(this.proxySlot)}validate(){this.proxy instanceof HTMLElement&&this.setValidity(this.proxy.validity,this.proxy.validationMessage)}setFormValue(t,e){this.elementInternals&&this.elementInternals.setFormValue(t,e||t)}_keypressHandler(t){if(t.key===tc)if(this.form instanceof HTMLFormElement){const t=this.form.querySelector("[type=submit]");null==t||t.click()}}stopPropagation(t){t.stopPropagation()}};return Kt({mode:"boolean"})(e.prototype,"disabled"),Kt({mode:"fromView",attribute:"value"})(e.prototype,"initialValue"),Kt({attribute:"current-value"})(e.prototype,"currentValue"),Kt(e.prototype,"name"),Kt({mode:"boolean"})(e.prototype,"required"),Nt(e.prototype,"value"),e}function dc(t){class e extends(uc(t)){}class i extends e{constructor(...t){super(t),this.dirtyChecked=!1,this.checkedAttribute=!1,this.checked=!1,this.dirtyChecked=!1}checkedAttributeChanged(){this.defaultChecked=this.checkedAttribute}defaultCheckedChanged(){this.dirtyChecked||(this.checked=this.defaultChecked,this.dirtyChecked=!1)}checkedChanged(t,e){this.dirtyChecked||(this.dirtyChecked=!0),this.currentChecked=this.checked,this.updateForm(),this.proxy instanceof HTMLInputElement&&(this.proxy.checked=this.checked),void 0!==t&&this.$emit("change"),this.validate()}currentCheckedChanged(t,e){this.checked=this.currentChecked}updateForm(){const t=this.checked?this.value:null;this.setFormValue(t,t)}connectedCallback(){super.connectedCallback(),this.updateForm()}formResetCallback(){super.formResetCallback(),this.checked=!!this.checkedAttribute,this.dirtyChecked=!1}}return Kt({attribute:"checked",mode:"boolean"})(i.prototype,"checkedAttribute"),Kt({attribute:"current-checked",converter:$t})(i.prototype,"currentChecked"),Nt(i.prototype,"defaultChecked"),Nt(i.prototype,"checked"),i}class hc extends qs{}class pc extends(uc(hc)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}class fc extends pc{constructor(){super(...arguments),this.handleClick=t=>{var e;this.disabled&&(null===(e=this.defaultSlottedContent)||void 0===e?void 0:e.length)<=1&&t.stopPropagation()},this.handleSubmission=()=>{if(!this.form)return;const t=this.proxy.isConnected;t||this.attachProxy(),"function"==typeof this.form.requestSubmit?this.form.requestSubmit(this.proxy):this.proxy.click(),t||this.detachProxy()},this.handleFormReset=()=>{var t;null===(t=this.form)||void 0===t||t.reset()},this.handleUnsupportedDelegatesFocus=()=>{var t;window.ShadowRoot&&!window.ShadowRoot.prototype.hasOwnProperty("delegatesFocus")&&(null===(t=this.$fastController.definition.shadowOptions)||void 0===t?void 0:t.delegatesFocus)&&(this.focus=()=>{this.control.focus()})}}formactionChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formAction=this.formaction)}formenctypeChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formEnctype=this.formenctype)}formmethodChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formMethod=this.formmethod)}formnovalidateChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formNoValidate=this.formnovalidate)}formtargetChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formTarget=this.formtarget)}typeChanged(t,e){this.proxy instanceof HTMLInputElement&&(this.proxy.type=this.type),"submit"===e&&this.addEventListener("click",this.handleSubmission),"submit"===t&&this.removeEventListener("click",this.handleSubmission),"reset"===e&&this.addEventListener("click",this.handleFormReset),"reset"===t&&this.removeEventListener("click",this.handleFormReset)}connectedCallback(){var t;super.connectedCallback(),this.proxy.setAttribute("type",this.type),this.handleUnsupportedDelegatesFocus();const e=Array.from(null===(t=this.control)||void 0===t?void 0:t.children);e&&e.forEach((t=>{t.addEventListener("click",this.handleClick)}))}disconnectedCallback(){var t;super.disconnectedCallback();const e=Array.from(null===(t=this.control)||void 0===t?void 0:t.children);e&&e.forEach((t=>{t.removeEventListener("click",this.handleClick)}))}}Et([Kt({mode:"boolean"})],fc.prototype,"autofocus",void 0),Et([Kt({attribute:"form"})],fc.prototype,"formId",void 0),Et([Kt],fc.prototype,"formaction",void 0),Et([Kt],fc.prototype,"formenctype",void 0),Et([Kt],fc.prototype,"formmethod",void 0),Et([Kt({mode:"boolean"})],fc.prototype,"formnovalidate",void 0),Et([Kt],fc.prototype,"formtarget",void 0),Et([Kt],fc.prototype,"type",void 0),Et([Nt],fc.prototype,"defaultSlottedContent",void 0);class gc{}Et([Kt({attribute:"aria-expanded"})],gc.prototype,"ariaExpanded",void 0),Et([Kt({attribute:"aria-pressed"})],gc.prototype,"ariaPressed",void 0),Kl(gc,Vl),Kl(fc,$l,gc);function mc(...t){return t.every((t=>t instanceof HTMLElement))}let vc;var yc;!function(t){t.menuitem="menuitem",t.menuitemcheckbox="menuitemcheckbox",t.menuitemradio="menuitemradio"}(yc||(yc={}));const Cc={[yc.menuitem]:"menuitem",[yc.menuitemcheckbox]:"menuitemcheckbox",[yc.menuitemradio]:"menuitemradio"};class bc extends qs{constructor(){super(...arguments),this.role=yc.menuitem,this.hasSubmenu=!1,this.currentDirection=xe.ltr,this.focusSubmenuOnLoad=!1,this.handleMenuItemKeyDown=t=>{if(t.defaultPrevented)return!1;switch(t.key){case tc:case oc:return this.invoke(),!1;case Jl:return this.expandAndFocus(),!1;case ql:if(this.expanded)return this.expanded=!1,this.focus(),!1}return!0},this.handleMenuItemClick=t=>(t.defaultPrevented||this.disabled||this.invoke(),!1),this.submenuLoaded=()=>{this.focusSubmenuOnLoad&&(this.focusSubmenuOnLoad=!1,this.hasSubmenu&&(this.submenu.focus(),this.setAttribute("tabindex","-1")))},this.handleMouseOver=t=>(this.disabled||!this.hasSubmenu||this.expanded||(this.expanded=!0),!1),this.handleMouseOut=t=>(!this.expanded||this.contains(document.activeElement)||(this.expanded=!1),!1),this.expandAndFocus=()=>{this.hasSubmenu&&(this.focusSubmenuOnLoad=!0,this.expanded=!0)},this.invoke=()=>{if(!this.disabled)switch(this.role){case yc.menuitemcheckbox:this.checked=!this.checked;break;case yc.menuitem:this.updateSubmenu(),this.hasSubmenu?this.expandAndFocus():this.$emit("change");break;case yc.menuitemradio:this.checked||(this.checked=!0)}},this.updateSubmenu=()=>{this.submenu=this.domChildren().find((t=>"menu"===t.getAttribute("role"))),this.hasSubmenu=void 0!==this.submenu}}expandedChanged(t){if(this.$fastController.isConnected){if(void 0===this.submenu)return;!1===this.expanded?this.submenu.collapseExpandedItem():this.currentDirection=Hl(this),this.$emit("expanded-change",this,{bubbles:!1})}}checkedChanged(t,e){this.$fastController.isConnected&&this.$emit("change")}connectedCallback(){super.connectedCallback(),Tt.SO.queueUpdate((()=>{this.updateSubmenu()})),this.startColumnCount||(this.startColumnCount=1),this.observer=new MutationObserver(this.updateSubmenu)}disconnectedCallback(){super.disconnectedCallback(),this.submenu=void 0,void 0!==this.observer&&(this.observer.disconnect(),this.observer=void 0)}domChildren(){return Array.from(this.children).filter((t=>!t.hasAttribute("hidden")))}}Et([Kt({mode:"boolean"})],bc.prototype,"disabled",void 0),Et([Kt({mode:"boolean"})],bc.prototype,"expanded",void 0),Et([Nt],bc.prototype,"startColumnCount",void 0),Et([Kt],bc.prototype,"role",void 0),Et([Kt({mode:"boolean"})],bc.prototype,"checked",void 0),Et([Nt],bc.prototype,"submenuRegion",void 0),Et([Nt],bc.prototype,"hasSubmenu",void 0),Et([Nt],bc.prototype,"currentDirection",void 0),Et([Nt],bc.prototype,"submenu",void 0),Kl(bc,$l);class Sc extends qs{constructor(){super(...arguments),this.expandedItem=null,this.focusIndex=-1,this.isNestedMenu=()=>null!==this.parentElement&&mc(this.parentElement)&&"menuitem"===this.parentElement.getAttribute("role"),this.handleFocusOut=t=>{if(!this.contains(t.relatedTarget)&&void 0!==this.menuItems){this.collapseExpandedItem();const t=this.menuItems.findIndex(this.isFocusableElement);this.menuItems[this.focusIndex].setAttribute("tabindex","-1"),this.menuItems[t].setAttribute("tabindex","0"),this.focusIndex=t}},this.handleItemFocus=t=>{const e=t.target;void 0!==this.menuItems&&e!==this.menuItems[this.focusIndex]&&(this.menuItems[this.focusIndex].setAttribute("tabindex","-1"),this.focusIndex=this.menuItems.indexOf(e),e.setAttribute("tabindex","0"))},this.handleExpandedChanged=t=>{if(t.defaultPrevented||null===t.target||void 0===this.menuItems||this.menuItems.indexOf(t.target)<0)return;t.preventDefault();const e=t.target;null===this.expandedItem||e!==this.expandedItem||!1!==e.expanded?e.expanded&&(null!==this.expandedItem&&this.expandedItem!==e&&(this.expandedItem.expanded=!1),this.menuItems[this.focusIndex].setAttribute("tabindex","-1"),this.expandedItem=e,this.focusIndex=this.menuItems.indexOf(e),e.setAttribute("tabindex","0")):this.expandedItem=null},this.removeItemListeners=()=>{void 0!==this.menuItems&&this.menuItems.forEach((t=>{t.removeEventListener("expanded-change",this.handleExpandedChanged),t.removeEventListener("focus",this.handleItemFocus)}))},this.setItems=()=>{const t=this.domChildren();this.removeItemListeners(),this.menuItems=t;const e=this.menuItems.filter(this.isMenuItemElement);e.length&&(this.focusIndex=0);const i=e.reduce(((t,e)=>{const i=function(t){const e=t.getAttribute("role"),i=t.querySelector("[slot=start]");return e!==yc.menuitem&&null===i||e===yc.menuitem&&null!==i?1:e!==yc.menuitem&&null!==i?2:0}(e);return t>i?t:i}),0);e.forEach(((t,e)=>{t.setAttribute("tabindex",0===e?"0":"-1"),t.addEventListener("expanded-change",this.handleExpandedChanged),t.addEventListener("focus",this.handleItemFocus),t instanceof bc&&(t.startColumnCount=i)}))},this.changeHandler=t=>{if(void 0===this.menuItems)return;const e=t.target,i=this.menuItems.indexOf(e);if(-1!==i&&"menuitemradio"===e.role&&!0===e.checked){for(let t=i-1;t>=0;--t){const e=this.menuItems[t],i=e.getAttribute("role");if(i===yc.menuitemradio&&(e.checked=!1),"separator"===i)break}const t=this.menuItems.length-1;for(let e=i+1;e<=t;++e){const t=this.menuItems[e],i=t.getAttribute("role");if(i===yc.menuitemradio&&(t.checked=!1),"separator"===i)break}}},this.isMenuItemElement=t=>mc(t)&&Sc.focusableElementRoles.hasOwnProperty(t.getAttribute("role")),this.isFocusableElement=t=>this.isMenuItemElement(t)}itemsChanged(t,e){this.$fastController.isConnected&&void 0!==this.menuItems&&this.setItems()}connectedCallback(){super.connectedCallback(),Tt.SO.queueUpdate((()=>{this.setItems()})),this.addEventListener("change",this.changeHandler)}disconnectedCallback(){super.disconnectedCallback(),this.removeItemListeners(),this.menuItems=void 0,this.removeEventListener("change",this.changeHandler)}focus(){this.setFocus(0,1)}collapseExpandedItem(){null!==this.expandedItem&&(this.expandedItem.expanded=!1,this.expandedItem=null)}handleMenuKeyDown(t){if(!t.defaultPrevented&&void 0!==this.menuItems)switch(t.key){case Xl:return void this.setFocus(this.focusIndex+1,1);case Ql:return void this.setFocus(this.focusIndex-1,-1);case nc:return void this.setFocus(this.menuItems.length-1,-1);case ic:return void this.setFocus(0,1);default:return!0}}domChildren(){return Array.from(this.children).filter((t=>!t.hasAttribute("hidden")))}setFocus(t,e){if(void 0!==this.menuItems)for(;t>=0&&t<this.menuItems.length;){const i=this.menuItems[t];if(this.isFocusableElement(i)){this.focusIndex>-1&&this.menuItems.length>=this.focusIndex-1&&this.menuItems[this.focusIndex].setAttribute("tabindex","-1"),this.focusIndex=t,i.setAttribute("tabindex","0"),i.focus();break}t+=e}}}var xc;Sc.focusableElementRoles=Cc,Et([Nt],Sc.prototype,"items",void 0),function(t){t.top="top",t.bottom="bottom"}(xc||(xc={}));class Ec extends qs{constructor(){super(...arguments),this.selected=!1,this.flyoutVerticalPosition=xc.bottom,this.menuVisible=!1,this.slottedMenu=[],this.showMessage=!1,this.handleClick=t=>{this.handleSelected(t)},this.menuItemChange=()=>{this.showMessage=!0,this.$emit("menu-changed"),document.activeElement!==this&&this.anchorElement.focus()},this.handleMenuKeydown=t=>{if(27===t.keyCode)this.toggleMenu(!1),document.activeElement!==this&&this.anchorElement.focus()},this.toggleMenu=t=>{this.menuVisible=t,this.showMessage=null===this.querySelector('[role="menu"]'),this.$emit("menu-toggled"),Tt.SO.queueUpdate(this.setRegionProps)},this.setRegionProps=()=>{this.menuVisible&&(this.regionElement.anchorElement=this.anchorElement)}}handleSelected(t){this.$emit("selected-change",t)}slottedMenuChanged(){this.$fastController.isConnected&&Tt.SO.queueUpdate((()=>{this.menuVisible||(this.showMessage=null===this.querySelector('[role="menu"]'));const t=this.slottedMenu[0];t&&(t.childNodes.forEach((t=>{t.addEventListener("change",this.menuItemChange)})),t.addEventListener("keydown",this.handleMenuKeydown))}))}handleFocusOut(t){return this.parentElement instanceof tl&&!this.showMessage&&this.slottedMenu[0]&&(this.slottedMenu[0].contains(t.relatedTarget)||this.toggleMenu(!1)),!1}handleRegionLoaded(t){Tt.SO.queueUpdate((()=>{if(this.menuVisible&&this.slottedMenu.length>0&&this.slottedMenu[0]instanceof Sc){const t=this.slottedMenu[0];Tt.SO.queueUpdate((()=>t.focus()))}}))}connectedCallback(){super.connectedCallback(),Tt.SO.queueUpdate(this.setRegionProps),Tt.SO.queueUpdate((()=>{this.showMessage=null===this.querySelector('[role="menu"]')}))}disconnectedCallback(){super.disconnectedCallback();const t=this.slottedMenu[0];t&&(t.childNodes.forEach((t=>{t.addEventListener("change",this.menuItemChange)})),t.removeEventListener("keydown",this.handleMenuKeydown))}}us([Kt({mode:"boolean"})],Ec.prototype,"selected",void 0),us([Kt({attribute:"flyout-vertical-position",mode:"fromView"})],Ec.prototype,"flyoutVerticalPosition",void 0),us([Kt({attribute:"aria-label",mode:"fromView"})],Ec.prototype,"ariaLabel",void 0),us([Nt],Ec.prototype,"menuVisible",void 0),us([Nt],Ec.prototype,"slottedMenu",void 0),us([Nt],Ec.prototype,"showMessage",void 0);const Ac=tl.compose({baseName:"micro-feedback",template:(t,e)=>Dl`
        <slot
            ${Ol({property:"slottedFeedbackItems",filter:kl()})}
        ></slot>
    `,styles:(t,e)=>Ml`
        ${Ll("inline-grid")} :host {
            grid-auto-flow: column;
            grid-column-gap: 4px;
        }
    `}),Tc=Ec.compose({baseName:"micro-feedback-item",template:(t,e)=>Dl`
        <template
            @focusout="${(t,e)=>t.handleFocusOut(e.event)}"
        >
            <${t.tagFor(fc)}
                ${Ul("anchorElement")}
                appearance="stealth"
                class="button"
                part="button"
                aria-label="${t=>t.ariaLabel}"
                aria-pressed="${t=>t.selected}"
                @click="${(t,e)=>t.handleClick(e.event)}"
            >
                <span name="unselected-glyph" class="unselected-glyph ${t=>t.selected?"hidden":"visible"}">
                    <slot name="unselected-glyph">${e.unselectedGlyph||""}</slot>
                </span>
                <span name="selected-glyph" class="selected-glyph ${t=>t.selected?"visible":"hidden"}">
                    <slot name="selected-glyph">${e.selectedGlyph||""}</slot>
                </span>
                <slot></slot>
            </${t.tagFor(fc)}>
            ${Gl((t=>t.menuVisible),Dl`
                <${t.tagFor(Zl)}
                    ${Ul("regionElement")}
                    class="flyout"
                    part="flyout"
                    vertical-positioning-mode="locktodefault"
                    vertical-default-position="${t=>t.flyoutVerticalPosition}"
                    vertical-scaling="content"
                    horizontal-positioning-mode="locktodefault"
                    horizontal-scaling="content"
                    horizontal-inset="true"
                    auto-update-mode="auto"
                    @loaded="${(t,e)=>t.handleRegionLoaded(e.event)}"
                >
                    ${Gl((t=>!t.showMessage),Dl`<slot
                            name="menu"
                            ${Ol({property:"slottedMenu",filter:kl('[role="menu"]')})}
                        ></slot>`)}
                    ${Gl((t=>t.showMessage),Dl`<slot name="feedback-message"></slot>`)}
                </${t.tagFor(Zl)}>`)}
        </template>
    `,styles:(t,e)=>Ml`
        ${Ll("grid")} :host {
        }

        fluent-anchored-region {
            z-index: 1;
        }

        fluent-button::part(content) {
            display: flex;
        }

        .hidden {
            display: none;
        }

        .visible {
            display: flex;
        }
    `});function Ic(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r}class Dc extends qs{handleFooterContentChange(){this.footerContainer.classList.toggle("footer",this.footer.assignedNodes().length>0)}handleActionsContentChange(){this.actionsContainer.classList.toggle("actions",this.actions.assignedNodes().length>0)}handleHeaderIconContentChange(){this.headerIconContainer.classList.toggle("header-icon",this.headerIcon.assignedNodes().length>0)}handleStartContentChange(){this.startContentContainer.classList.toggle("start-content",this.startContent.assignedNodes().length>0)}}Ic([Kt({attribute:"fixed-title",mode:"fromView"})],Dc.prototype,"fixedTitle",void 0),Ic([Kt({mode:"fromView"})],Dc.prototype,"title",void 0),Ic([Kt({attribute:"sub-title",mode:"fromView"})],Dc.prototype,"subTitle",void 0),Ic([Nt],Dc.prototype,"footerSlottedNodes",void 0),Ic([Nt],Dc.prototype,"actionsSlottedNodes",void 0),Ic([Nt],Dc.prototype,"startContentSlottedNodes",void 0);const kc=Dc.compose({baseName:"edge-shopping",template:(t,e)=>Dl`
    <template>
        <header class="header-fixed" part="header-fixed">
            <div class="header-title-wrapper">
                <span part="header-icon" aria-hidden="true" ${Ul("headerIconContainer")}>
                    <slot
                        name="header-icon"
                        ${Ul("headerIcon")}
                        @slotchange=${t=>t.handleHeaderIconContentChange()}
                    ></slot>
                </span>
                <h1 class="header-fixed-title" part="header-fixed-title">
                    ${t=>t.fixedTitle}
                </h1>
            </div>
            <div class="header-actions" part="header-actions">
                <slot name="header-actions"></slot>
            </div>
        </header>
        <div class="content" part="content">
            <div
                class="${t=>t.startContentSlottedNodes&&t.startContentSlottedNodes.length?"start-content":"start-content__hidden"}"
                part="start-content"
                ${Ul("startContentContainer")}
            >
                <slot
                    name="start-content"
                    ${Ul("startContent")}
                    ${Ol("startContentSlottedNodes")}
                    @slotchange="${t=>t.handleStartContentChange()}"
                ></slot>
            </div>
            <div class="header" part="header">
                <slot name="header-content">
                    ${Gl((t=>t.title),Dl`
                            <h2 class="header-title" part="header-title">
                                ${t=>t.title}
                            </h2>
                        `)}
                    ${Gl((t=>t.subTitle),Dl`
                            <p class="header-sub-title" part="header-sub-title">
                                ${t=>t.subTitle}
                            </p>
                        `)}
                </slot>
                <div
                    class="${t=>t.actionsSlottedNodes&&t.actionsSlottedNodes.length?"actions":"actions__hidden"}"
                    part="actions"
                    ${Ul("actionsContainer")}
                >
                    <slot
                        name="actions"
                        ${Ul("actions")}
                        ${Ol("actionsSlottedNodes")}
                        @slotchange="${t=>t.handleActionsContentChange()}"
                    ></slot>
                </div>
            </div>
            <div class="sections" part="sections">
                <slot></slot>
            </div>
            <footer
                class="${t=>t.footerSlottedNodes&&t.footerSlottedNodes.length?"footer":"footer__hidden"}"
                part="footer"
                ${Ul("footerContainer")}
            >
                <slot
                    name="footer"
                    ${Ul("footer")}
                    ${Ol("footerSlottedNodes")}
                    @slotchange="${t=>t.handleFooterContentChange()}"
                ></slot>
            </footer>
            <slot name="feedback"></slot>
        </div>
    </template>
`,styles:(t,e)=>Ml`
        ${Ll("flex")} :host {
            --side-padding: 12px;
            flex-direction: column;
            height: 100%;
            font-size: ${$i};
            line-height: ${Wi};
        }

        .content {
            overflow: hidden;
            overflow-y: auto;
        }

        .header-fixed {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 40px;
        }

        .header-title-wrapper {
            display: flex;
            align-items: center;
            margin-inline-start: 8px;
        }

        .header-icon {
            display: flex;
            margin-inline-start: 4px;
        }

        .header-fixed-title {
            display: inline-block;
            font-weight: 600;
            margin-inline-start: 8px;
            margin-top: 9px;
            margin-bottom: 11px;
            font-size: ${$i};
            line-height: ${Wi};
        }

        .header-actions {
            margin: 4px;
        }

        .illustration-container {
            display: flex;
            justify-content: center;
        }

        .header {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .header-title,
        .header-sub-title {
            display: inline;
        }

        .header-title {
            margin: 16px 16px 8px;
            font-size: ${qi};
            line-height: ${Qi};
        }

        .header-sub-title {
            margin: 0 32px 8px 32px;
            font-weight: 600;
            font-size: ${$i};
            line-height: ${Wi};
        }

        .sections {
            padding: 0 var(--side-padding);
        }

        .footer,
        .actions {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .footer {
            padding: 10px 12px;
            border-top: calc(${Ui} * 1px) solid ${$o};
        }

        ::slotted([slot="feedback"]) {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            border-top: calc(${Ui} * 1px) solid ${$o};
        }

        .actions {
            display: flex;
            flex-direction: column;
            width: calc(100% - 24px);
            padding: 10px 12px 13px;
            border-bottom: calc(${Ui} * 1px) solid ${$o};
        }

        .footer__hidden,
        .actions__hidden {
            display: none;
        }

        .start-content {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px 12px;
        }

        .start-content__hidden {
            display: none;
        }
    `});class wc extends qs{constructor(){super(...arguments),this.accordion=!1,this.titleLevel=2}connectedCallback(){super.connectedCallback(),null!==this.expanded&&void 0!==this.expanded||(this.expanded=!0)}}Ic([Kt({mode:"boolean"})],wc.prototype,"accordion",void 0),Ic([Kt({mode:"boolean"})],wc.prototype,"expanded",void 0),Ic([Kt({mode:"fromView"})],wc.prototype,"title",void 0),Ic([Kt({attribute:"title-level",mode:"fromView",converter:Wt})],wc.prototype,"titleLevel",void 0),Ic([Nt],wc.prototype,"childElements",void 0);class Rc extends wl{constructor(t,e){super(t,e),this.observer=null,e.childList=!0}observe(){null===this.observer&&(this.observer=new MutationObserver(this.handleEvent.bind(this))),this.observer.observe(this.target,this.options)}disconnect(){this.observer.disconnect()}getNodes(){return"subtree"in this.options?Array.from(this.target.querySelectorAll(this.options.selector)):Array.from(this.target.childNodes)}}function Oc(t){return"string"==typeof t&&(t={property:t}),new nl("fast-children",Rc,t)}function Pc(t,e){return e&&e.some((e=>e.slot===t))}class Mc extends class{constructor(t){this.listenerCache=new WeakMap,this.query=t}bind(t){const{query:e}=this,i=this.constructListener(t);i.bind(e)(),e.addListener(i),this.listenerCache.set(t,i)}unbind(t){const e=this.listenerCache.get(t);e&&(this.query.removeListener(e),this.listenerCache.delete(t))}}{constructor(t,e){super(t),this.styles=e}static with(t){return e=>new Mc(t,e)}constructListener(t){let e=!1;const i=this.styles;return function(){const{matches:n}=this;n&&!e?(t.$fastController.addStyles(i),e=n):!n&&e&&(t.$fastController.removeStyles(i),e=n)}}unbind(t){super.unbind(t),t.$fastController.removeStyles(this.styles)}}const Nc=Mc.with(window.matchMedia("(forced-colors)")),Lc=Mc.with(window.matchMedia("(prefers-color-scheme: dark)"));Mc.with(window.matchMedia("(prefers-color-scheme: light)"));var _c;!function(t){t.Canvas="Canvas",t.CanvasText="CanvasText",t.LinkText="LinkText",t.VisitedText="VisitedText",t.ActiveText="ActiveText",t.ButtonFace="ButtonFace",t.ButtonText="ButtonText",t.Field="Field",t.FieldText="FieldText",t.Highlight="Highlight",t.HighlightText="HighlightText",t.GrayText="GrayText"}(_c||(_c={}));const Fc=wc.compose({baseName:"edge-shopping-section",template:(t,e)=>Dl`
    <template ${Oc({property:"childElements",filter:kl()})}>
        ${Gl((t=>t.accordion),Dl`
                <fluent-accordion part="control">
                    <fluent-accordion-item
                        part="item"
                        class="item"
                        expanded="${t=>t.expanded?"true":"false"}"
                        heading-level="${t=>t.titleLevel}"
                    >
                        <svg
                            class="icon"
                            part="expanded-icon"
                            slot="expanded-icon"
                            width="12"
                            height="12"
                            viewBox="0 0 12 12"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                fill="currentcolor"
                                d="M11.4551 8.98242L6 3.5332L0.544922 8.98242L0.0175781 8.45508L6 2.4668L11.9824 8.45508L11.4551 8.98242Z"
                            />
                        </svg>
                        <svg
                            class="icon"
                            part="collapsed-icon"
                            slot="collapsed-icon"
                            width="12"
                            height="12"
                            viewBox="0 0 12 12"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                fill="currentcolor"
                                d="M11.3613 2.73633L11.8887 3.26367L6 9.15234L0.111328 3.26367L0.638672 2.73633L6 8.09766L11.3613 2.73633Z"
                                fill="black"
                            />
                        </svg>

                        <span part="title" slot="heading">${t=>t.title}</span>
                        <slot></slot>
                        ${Gl((t=>Pc("action",t.childElements)),Dl`
                                <div class="action" part="action">
                                    <slot name="action"></slot>
                                </div>
                            `)}
                    </fluent-accordion-item>
                </fluent-accordion>
            `)}
        ${Gl((t=>!t.accordion),Dl`
                <div class="control" part="control">
                    <span
                        class="heading"
                        part="title"
                        slot="heading"
                        role="heading"
                        aria-level="${t=>t.titleLevel}"
                        >${t=>t.title}</span
                    >
                    <slot></slot>
                    ${Gl((t=>Pc("action",t.childElements)),Dl`
                            <div class="action" part="action">
                                <slot name="action"></slot>
                            </div>
                        `)}
                </div>
            `)}
    </template>
`,styles:(t,e)=>Ml`
        :host {
            overflow: hidden;
        }

        fluent-accordion {
            border: none;
            margin-bottom: 10px;
        }

        fluent-accordion-item {
            border: none;
        }

        fluent-accordion-item::part(heading),
        .heading {
            margin-bottom: 6px;
            font-size: ${zi};
        }

        .heading {
            margin-inline-start: 5px;
            display: inline-block;
            line-height: ${qi};
            margin-bottom: 6px;
        }

        fluent-accordion-item::part(region) {
            padding: 0;
            flex-direction: column;
        }

        .action {
            color: ${ro};
            font-size: ${zi};
            height: 38px;
            display: flex;
            margin-inline-start: 16px;
            align-items: center;
        }
    `.withBehaviors(Nc(Ml`
                fluent-accordion-item {
                    color: ${_c.ButtonText};
                }
            `))});var Hc=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Zc="object"==typeof global&&global&&global.Object===Object&&global,Bc="object"==typeof self&&self&&self.Object===Object&&self,Uc=Zc||Bc||Function("return this")(),Gc=function(){return Uc.Date.now()},Vc=/\s/;var $c=function(t){for(var e=t.length;e--&&Vc.test(t.charAt(e)););return e},Wc=/^\s+/;var zc=function(t){return t?t.slice(0,$c(t)+1).replace(Wc,""):t},Kc=Uc.Symbol,Yc=Object.prototype,jc=Yc.hasOwnProperty,Xc=Yc.toString,qc=Kc?Kc.toStringTag:void 0;var Jc=function(t){var e=jc.call(t,qc),i=t[qc];try{t[qc]=void 0;var n=!0}catch(t){}var o=Xc.call(t);return n&&(e?t[qc]=i:delete t[qc]),o},Qc=Object.prototype.toString;var tu=function(t){return Qc.call(t)},eu=Kc?Kc.toStringTag:void 0;var iu=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":eu&&eu in Object(t)?Jc(t):tu(t)};var nu=function(t){return null!=t&&"object"==typeof t};var ou=function(t){return"symbol"==typeof t||nu(t)&&"[object Symbol]"==iu(t)},au=/^[-+]0x[0-9a-f]+$/i,ru=/^0b[01]+$/i,su=/^0o[0-7]+$/i,lu=parseInt;var cu=function(t){if("number"==typeof t)return t;if(ou(t))return NaN;if(Hc(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Hc(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=zc(t);var i=ru.test(t);return i||su.test(t)?lu(t.slice(2),i?2:8):au.test(t)?NaN:+t},uu=Math.max,du=Math.min;var hu=function(t,e,i){var n,o,a,r,s,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var i=n,a=o;return n=o=void 0,c=e,r=t.apply(a,i)}function f(t){return c=t,s=setTimeout(m,e),u?p(t):r}function g(t){var i=t-l;return void 0===l||i>=e||i<0||d&&t-c>=a}function m(){var t=Gc();if(g(t))return v(t);s=setTimeout(m,function(t){var i=e-(t-l);return d?du(i,a-(t-c)):i}(t))}function v(t){return s=void 0,h&&n?p(t):(n=o=void 0,r)}function y(){var t=Gc(),i=g(t);if(n=arguments,o=this,l=t,i){if(void 0===s)return f(l);if(d)return clearTimeout(s),s=setTimeout(m,e),p(l)}return void 0===s&&(s=setTimeout(m,e)),r}return e=cu(e)||0,Hc(i)&&(u=!!i.leading,a=(d="maxWait"in i)?uu(cu(i.maxWait)||0,e):a,h="trailing"in i?!!i.trailing:h),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,n=l=o=s=void 0},y.flush=function(){return void 0===s?r:v(Gc())},y};var pu=function(t,e,i){var n=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return Hc(i)&&(n="leading"in i?!!i.leading:n,o="trailing"in i?!!i.trailing:o),hu(t,e,{leading:n,maxWait:e,trailing:o})};class fu extends qs{constructor(){super(),this.direction=xe.ltr,this.currentSlotElementWidth=0,this.currentContentGapSize=0,this.setFlippersVisabilityFromPageState=()=>{const t=this.viewport.clientWidth,e=this.container.clientWidth;if(!t||!e||t>=e)return void this.setFlippersHiddenVisibility(!0,!0);const i=this.viewport.scrollLeft;0!==i?t+Math.abs(i)>=e?this.setFlippersHiddenVisibility(!1,!0):this.setFlippersHiddenVisibility(!1,!1):this.setFlippersHiddenVisibility(!0,!1)},this.handleResize=()=>{this.setFlippersVisabilityFromPageState()},this.handleResize=pu(this.handleResize,200)}connectedCallback(){super.connectedCallback(),this.direction=Mi.getValueFor(this),this.setFlippersVisabilityFromPageState(),window.addEventListener("resize",this.handleResize)}disconnectedCallback(){window.removeEventListener("resize",this.handleResize)}handleChange(){this.direction=Mi.getValueFor(this),this.flipperNext.children[0].hidden=!1,this.flipperPrevious.children[0].hidden=!0}handleSlotContentChange(){const t=this.viewportSlot.assignedElements();t.length>0&&(this.currentSlotElementWidth=t[0].clientWidth);const e=window.getComputedStyle(this.container).rowGap;this.currentContentGapSize=e?Number(e.replace(/px/,"")):0,this.setFlippersVisabilityFromPageState()}slideKeyPressHandler(t){const e="rtl"!==this.direction;e||(t*=-1);const i=this.viewport.scrollLeft;if(e&&t<0&&0===i||!e&&t>0&&0===i)return;const n=this.viewport.clientWidth,o=this.container.clientWidth;if(n<=0||o<=0)return;if(n>=o)return void this.setFlippersHiddenVisibility(!0,!0);const a=t*this.getScrollDistance();(e&&t>0||!e&&t<0)&&((Math.abs(a)+Math.abs(i)>=o||o-(Math.abs(a)+Math.abs(i))<=n)&&this.hideFlipperNext(!0),this.hideFlipperPrevious(!1)),e&&t<0&&(a+i<=0&&this.hideFlipperPrevious(!0),this.hideFlipperNext(!1)),!e&&t>0&&(a+i>=0&&this.hideFlipperPrevious(!0),this.hideFlipperNext(!1)),requestAnimationFrame((()=>{this.viewport.scrollTo(this.viewport.scrollLeft+a,0)}))}hideFlipperNext(t){this.flipperNext.children[0].hidden=t}hideFlipperPrevious(t){this.flipperPrevious.children[0].hidden=t}setFlippersHiddenVisibility(t,e){this.hideFlipperPrevious(t),this.hideFlipperNext(e)}getOneElementUnit(){return this.currentSlotElementWidth+this.currentContentGapSize}getScrollDistance(){const t=this.viewport.clientWidth;if(t<=0)return 0;const e=this.getOneElementUnit();if(!e||e<=0)return 0;const i=Math.floor(t/e)*e;return i<=0?e:i}}Ic([Nt],fu.prototype,"direction",void 0),Ic([Nt],fu.prototype,"flipperNextTelemetryTag",void 0),Ic([Nt],fu.prototype,"flipperPreviousTelemetryTag",void 0);const gu=Object.freeze({bind(){},unbind(){}}),mu=Object.freeze({targetIndex:0,createBehavior:()=>gu});class vu extends el{constructor(t,e){super(),this.metadataOrBinding=t,this.options=e,this._factory=null}get factory(){let t=this._factory;return null===t&&(this._factory=t=this.selectFactory()),t}createBehavior(t){return this.factory.createBehavior(t)}createPlaceholder(t){return Tt.SO.createCustomAttributePlaceholder("fast-telemetry",t)}static installFactorySelector(t){vu.prototype.selectFactory=t}selectFactory(){return mu}}function yu(t,e){return new vu(t,e)}const Cu=fu.compose({baseName:"horizontal-card-slider",template:(t,e)=>Dl`
    <div
        ${Ul("viewport")}
        class="viewport"
        part="viewport"
        direction="${t=>t.direction?t.direction:"ltr"}"
    >
        <div class="container" part="container" ${Ul("container")}>
            <slot
                ${Ul("viewportSlot")}
                @slotchange=${t=>t.handleSlotContentChange()}
            ></slot>
        </div>
    </div>
    <div class="flipper-container" part="flipper-container">
        <slot ${Ul("flipperPrevious")} name="flipper-previous">
            <fluent-flipper
                direction="${t=>"rtl"===t.direction?"next":"previous"}"
                class="flipper-previous"
                part="flipper-previous"
                @click="${t=>t.slideKeyPressHandler(-1)}"
                ${yu((t=>t.flipperPreviousTelemetryTag))}
                hidden
            ></fluent-flipper>
        </slot>
        <slot ${Ul("flipperNext")} name="flipper-next">
            <fluent-flipper
                direction="${t=>"rtl"===t.direction?"previous":"next"}"
                class="flipper-next"
                part="flipper-next"
                @click="${t=>t.slideKeyPressHandler(1)}"
                ${yu((t=>t.flipperNextTelemetryTag))}
                hidden
            ></fluent-flipper>
        </slot>
    </div>
`,styles:(t,e)=>Ml`
    :host {
        --viewport-width: auto;
        --viewport-height: auto;
        --element-gap: 12px;
        height: var(--viewport-height);
        overflow: hidden;
        width: var(--viewport-width);
        position: relative;
        display: flex;
    }

    .flipper-container {
        position: absolute;
        right: 0;
        left: 0;
        top: 0;
        bottom: 0;
        padding: 20px;
        display: flex;
        align-items: center;
        pointer-events: none;
        z-index: 0;
    }

    .viewport {
        height: var(--viewport-height);
        overflow-x: hidden;
        scroll-behavior: smooth;
        width: var(--viewport-width);
        white-space: nowrap;
    }

    .container {
        display: flex;
        flex-direction: row;
        gap: var(--element-gap);
        width: max-content;
    }

    .flipper-next {
        margin-inline-start: auto;
    }

    .flipper-next,
    .flipper-previous {
        pointer-events: all;
        z-index: 2;
    }
`});const bu=class extends qs{handleImageContentChange(){this.imageContainer.classList.toggle("image",this.image.assignedNodes().length>0)}}.compose({baseName:"attribution",template:(t,e)=>Dl`
    <span part="image" ${Ul("imageContainer")}>
        <slot
            name="image"
            ${Ul("image")}
            @slotchange=${t=>t.handleImageContentChange()}
        ></slot>
    </span>
    <span part="content" class="content">
        <slot></slot>
    </span>
`,styles:(t,e)=>Ml`
        ${Ll("inline-flex")} :host {
            box-sizing: border-box;
            font-family: ${Vi};
            font-size: ${zi};
            font-weight: 400;
            line-height: ${Ki};
            align-items: center;
            color: ${ia};
            min-height: 16px;
        }

        .content {
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        .image {
            display: flex;
            margin-inline-end: calc(${Hi} * 2px);
        }
    `.withBehaviors(Nc(Ml`
                :host,
                .content {
                    color: ${_c.CanvasText};
                    fill: currentcolor;
                }
            `))});function Su(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r}class xu extends qs{constructor(){super(...arguments),this.handleUnsupportedDelegatesFocus=()=>{var t;window.ShadowRoot&&!window.ShadowRoot.prototype.hasOwnProperty("delegatesFocus")&&(null===(t=this.$fastController.definition.shadowOptions)||void 0===t?void 0:t.delegatesFocus)&&(this.focus=()=>{this.control.focus()})}}connectedCallback(){super.connectedCallback(),this.handleUnsupportedDelegatesFocus()}}Et([Kt],xu.prototype,"download",void 0),Et([Kt],xu.prototype,"href",void 0),Et([Kt],xu.prototype,"hreflang",void 0),Et([Kt],xu.prototype,"ping",void 0),Et([Kt],xu.prototype,"referrerpolicy",void 0),Et([Kt],xu.prototype,"rel",void 0),Et([Kt],xu.prototype,"target",void 0),Et([Kt],xu.prototype,"type",void 0),Et([Nt],xu.prototype,"defaultSlottedContent",void 0);class Eu{}Et([Kt({attribute:"aria-expanded"})],Eu.prototype,"ariaExpanded",void 0),Kl(Eu,Vl),Kl(xu,$l,Eu);const Au=function(){if("boolean"==typeof vc)return vc;if("undefined"==typeof window||!window.document||!window.document.createElement)return vc=!1,vc;const t=document.createElement("style"),e=function(){const t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}();null!==e&&t.setAttribute("nonce",e),document.head.appendChild(t);try{t.sheet.insertRule("foo:focus-visible {color:inherit}",0),vc=!0}catch(t){vc=!1}finally{document.head.removeChild(t)}return vc}()?"focus-visible":"focus",Tu=(function(t,...e){const{styles:i,behaviors:n}=Pl(t,e);return new Nl(i,n)})`(${Li} + ${Fi}) * ${Hi}`,Iu=(t,e)=>Ml`
    ${Ll("inline-flex")} :host {
      font-family: ${Vi};
      outline: none;
      font-size: ${$i};
      line-height: ${Wi};
      height: calc(${Tu} * 1px);
      min-width: calc(${Tu} * 1px);
      background-color: ${Ao};
      color: ${ta};
      border-radius: calc(${Zi} * 1px);
      fill: currentcolor;
      cursor: pointer;
    }

    .control {
      background: transparent;
      height: inherit;
      flex-grow: 1;
      box-sizing: border-box;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      padding: 0 calc((10 + (${Hi} * 2 * ${Fi})) * 1px);
      white-space: nowrap;
      outline: none;
      text-decoration: none;
      border: calc(${Ui} * 1px) solid transparent;
      color: inherit;
      border-radius: inherit;
      fill: inherit;
      cursor: inherit;
      font-family: inherit;
    }

    .control,
    .end,
    .start {
      font: inherit;
    }

    .control.icon-only {
      padding: 0;
      line-height: 0;
    }

    :host(:hover) {
      background-color: ${To};
    }

    :host(:active) {
      background-color: ${Io};
    }

    .control:${Au} {
      border: calc(${Ui} * 1px) solid ${Xo};
      box-shadow: 0 0 0 calc((${Gi} - ${Ui}) * 1px) ${Xo};
    }

    .control::-moz-focus-inner {
      border: 0;
    }

    .content {
      pointer-events: none;
    }

    .start,
    .end {
      display: flex;
      pointer-events: none;
    }

    ::slotted(svg) {
      ${""} width: 16px;
      height: 16px;
      pointer-events: none;
    }

    .start {
      margin-inline-end: 11px;
    }

    .end {
      margin-inline-start: 11px;
    }
  `.withBehaviors(Nc(Ml`
        :host,
        :host([appearance="neutral"]) .control {
          background-color: ${_c.ButtonFace};
          border-color: ${_c.ButtonText};
          color: ${_c.ButtonText};
          fill: currentcolor;
        }

        :host(:not([disabled][href]):hover),
        :host([appearance="neutral"]:not([disabled]):hover) .control {
          forced-color-adjust: none;
          background-color: ${_c.Highlight};
          color: ${_c.HighlightText};
        }

        .control:${Au},
        :host([appearance="outline"]) .control:${Au},
        :host([appearance="neutral"]:${Au}) .control {
          forced-color-adjust: none;
          background-color: ${_c.Highlight};
          border-color: ${_c.ButtonText};
          box-shadow: 0 0 0 calc((${Gi} - ${Ui}) * 1px) ${_c.ButtonText};
          color: ${_c.HighlightText};
        }

        .control:not([disabled]):hover,
        :host([appearance="outline"]) .control:hover {
          border-color: ${_c.ButtonText};
        }

        :host([href]) .control {
          border-color: ${_c.LinkText};
          color: ${_c.LinkText};
        }

        :host([href]) .control:hover,
        :host(.neutral[href]) .control:hover,
        :host(.outline[href]) .control:hover,
        :host([href]) .control:${Au}{
          forced-color-adjust: none;
          background: ${_c.ButtonFace};
          border-color: ${_c.LinkText};
          box-shadow: 0 0 0 1px ${_c.LinkText} inset;
          color: ${_c.LinkText};
          fill: currentcolor;
        }
    `)),Du=Ml`
  :host([appearance='accent']) {
    background: ${ro};
    color: ${po};
  }

  :host([appearance='accent']:hover) {
    background: ${so};
    color: ${fo};
  }

  :host([appearance='accent']:active) .control:active {
    background: ${lo};
    color: ${go};
  }

  :host([appearance="accent"]) .control:${Au} {
    box-shadow: 0 0 0 calc(${Gi} * 1px) inset ${Jo},
      0 0 0 calc((${Gi} - ${Ui}) * 1px) ${Xo};
  }
`.withBehaviors(Nc(Ml`
      :host([appearance='accent']) .control {
        forced-color-adjust: none;
        background: ${_c.Highlight};
        color: ${_c.HighlightText};
      }

      :host([appearance='accent']) .control:hover,
      :host([appearance='accent']:active) .control:active {
        background: ${_c.HighlightText};
        border-color: ${_c.Highlight};
        color: ${_c.Highlight};
      }

      :host([appearance="accent"]) .control:${Au} {
        border-color: ${_c.ButtonText};
        box-shadow: 0 0 0 2px ${_c.HighlightText} inset;
      }

      :host([appearance='accent'][href]) .control {
        background: ${_c.LinkText};
        color: ${_c.HighlightText};
      }

      :host([appearance='accent'][href]) .control:hover {
        background: ${_c.ButtonFace};
        border-color: ${_c.LinkText};
        box-shadow: none;
        color: ${_c.LinkText};
        fill: currentcolor;
      }

      :host([appearance="accent"][href]) .control:${Au} {
        border-color: ${_c.LinkText};
        box-shadow: 0 0 0 2px ${_c.HighlightText} inset;
      }
    `)),ku=Ml`
  :host([appearance='hypertext']) {
    height: auto;
    font-size: inherit;
    line-height: inherit;
    background: transparent;
    min-width: 0;
  }

  :host([appearance='hypertext']) .control {
    display: inline;
    padding: 0;
    border: none;
    box-shadow: none;
    border-radius: 0;
    line-height: 1;
  }
  :host a.control:not(:link) {
    background-color: transparent;
    cursor: default;
  }
  :host([appearance='hypertext']) .control:link,
  :host([appearance='hypertext']) .control:visited {
    background: transparent;
    color: ${bo};
    border-bottom: calc(${Ui} * 1px) solid ${bo};
  }
  :host([appearance='hypertext']) .control:hover {
    border-bottom-color: ${So};
  }
  :host([appearance='hypertext']) .control:active {
    border-bottom-color: ${xo};
  }
  :host([appearance="hypertext"]) .control:${Au} {
    border-bottom: calc(${Gi} * 1px) solid ${Xo};
    margin-bottom: calc(calc(${Ui} - ${Gi}) * 1px);
  }
`.withBehaviors(Nc(Ml`
      :host([appearance="hypertext"]) .control:${Au} {
        color: ${_c.LinkText};
        border-bottom-color: ${_c.LinkText};
      }
    `)),wu=Ml`
  :host([appearance='lightweight']) {
    background: transparent;
    color: ${bo};
  }

  :host([appearance='lightweight']) .control {
    padding: 0;
    height: initial;
    border: none;
    box-shadow: none;
    border-radius: 0;
  }

  :host([appearance='lightweight']:hover) {
    color: ${So};
  }

  :host([appearance='lightweight']:active) {
    color: ${xo};
  }

  :host([appearance='lightweight']) .content {
    position: relative;
  }

  :host([appearance='lightweight']) .content::before {
    content: '';
    display: block;
    height: calc(${Ui} * 1px);
    position: absolute;
    top: calc(1em + 3px);
    width: 100%;
  }

  :host([appearance='lightweight']:hover) .content::before {
    background: ${So};
  }

  :host([appearance='lightweight']:active) .content::before {
    background: ${xo};
  }

  :host([appearance="lightweight"]) .control:${Au} .content::before {
    background: ${ta};
    height: calc(${Gi} * 1px);
  }
`.withBehaviors(Nc(Ml`
      :host([appearance='lightweight']) {
        color: ${_c.ButtonText};
      }
      :host([appearance="lightweight"]) .control:hover,
        :host([appearance="lightweight"]) .control:${Au} {
        forced-color-adjust: none;
        background: ${_c.ButtonFace};
        color: ${_c.Highlight};
      }
      :host([appearance="lightweight"]) .control:hover .content::before,
        :host([appearance="lightweight"]) .control:${Au} .content::before {
        background: ${_c.Highlight};
      }

      :host([appearance="lightweight"][href]) .control:hover,
        :host([appearance="lightweight"][href]) .control:${Au} {
        background: ${_c.ButtonFace};
        box-shadow: none;
        color: ${_c.LinkText};
      }

      :host([appearance="lightweight"][href]) .control:hover .content::before,
        :host([appearance="lightweight"][href]) .control:${Au} .content::before {
        background: ${_c.LinkText};
      }
    `)),Ru=Ml`
  :host([appearance='outline']) {
    background: transparent;
    border-color: ${Bo};
  }

  :host([appearance='outline']:hover) {
    border-color: ${Uo};
  }

  :host([appearance='outline']:active) {
    border-color: ${Go};
  }

  :host([appearance='outline']) .control {
    border-color: inherit;
  }

  :host([appearance="outline"]) .control:${Au} {
    box-shadow: 0 0 0 calc((${Gi} - ${Ui}) * 1px) ${Xo};
    border-color: ${Xo};
  }
`.withBehaviors(Nc(Ml`
      :host([appearance='outline']) {
        border-color: ${_c.ButtonText};
      }
      :host([appearance='outline'][href]) {
        border-color: ${_c.LinkText};
      }
    `)),Ou=Ml`
  :host([appearance='stealth']) {
    background: ${Lo};
  }

  :host([appearance='stealth']:hover) {
    background: ${_o};
  }

  :host([appearance='stealth']:active) {
    background: ${Fo};
  }
`.withBehaviors(Nc(Ml`
      :host([appearance='stealth']),
      :host([appearance='stealth']) .control {
        forced-color-adjust: none;
        background: ${_c.ButtonFace};
        border-color: transparent;
        color: ${_c.ButtonText};
        fill: currentcolor;
      }

      :host([appearance='stealth']:hover) .control {
        background: ${_c.Highlight};
        border-color: ${_c.Highlight};
        color: ${_c.HighlightText};
        fill: currentcolor;
      }

      :host([appearance="stealth"]:${Au}) .control {
        background: ${_c.Highlight};
        box-shadow: 0 0 0 1px ${_c.Highlight};
        color: ${_c.HighlightText};
        fill: currentcolor;
      }

      :host([appearance='stealth'][href]) .control {
        color: ${_c.LinkText};
      }

      :host([appearance="stealth"]:hover[href]) .control,
        :host([appearance="stealth"]:${Au}[href]) .control {
        background: ${_c.LinkText};
        border-color: ${_c.LinkText};
        color: ${_c.HighlightText};
        fill: currentcolor;
      }

      :host([appearance="stealth"]:${Au}[href]) .control {
        box-shadow: 0 0 0 1px ${_c.LinkText};
      }
    `));class Pu{constructor(t,e,i){this.propertyName=t,this.value=e,this.styles=i}bind(t){Mt.getNotifier(t).subscribe(this,this.propertyName),this.handleChange(t,this.propertyName)}unbind(t){Mt.getNotifier(t).unsubscribe(this,this.propertyName),t.$fastController.removeStyles(this.styles)}handleChange(t,e){t[e]===this.value?t.$fastController.addStyles(this.styles):t.$fastController.removeStyles(this.styles)}}function Mu(t,e){return new Pu("appearance",t,e)}class Nu extends xu{appearanceChanged(t,e){t!==e&&(this.classList.add(e),this.classList.remove(t))}connectedCallback(){super.connectedCallback(),this.appearance||(this.appearance="neutral")}defaultSlottedContentChanged(){const t=this.defaultSlottedContent.filter((t=>t.nodeType===Node.ELEMENT_NODE));1===t.length&&t[0]instanceof SVGElement?this.control.classList.add("icon-only"):this.control.classList.remove("icon-only")}}Su([Kt],Nu.prototype,"appearance",void 0);const Lu=Nu.compose({baseName:"anchor",baseClass:xu,template:(t,e)=>Dl`
    <a
        class="control"
        part="control"
        download="${t=>t.download}"
        href="${t=>t.href}"
        hreflang="${t=>t.hreflang}"
        ping="${t=>t.ping}"
        referrerpolicy="${t=>t.referrerpolicy}"
        rel="${t=>t.rel}"
        target="${t=>t.target}"
        type="${t=>t.type}"
        aria-atomic="${t=>t.ariaAtomic}"
        aria-busy="${t=>t.ariaBusy}"
        aria-controls="${t=>t.ariaControls}"
        aria-current="${t=>t.ariaCurrent}"
        aria-describedby="${t=>t.ariaDescribedby}"
        aria-details="${t=>t.ariaDetails}"
        aria-disabled="${t=>t.ariaDisabled}"
        aria-errormessage="${t=>t.ariaErrormessage}"
        aria-expanded="${t=>t.ariaExpanded}"
        aria-flowto="${t=>t.ariaFlowto}"
        aria-haspopup="${t=>t.ariaHaspopup}"
        aria-hidden="${t=>t.ariaHidden}"
        aria-invalid="${t=>t.ariaInvalid}"
        aria-keyshortcuts="${t=>t.ariaKeyshortcuts}"
        aria-label="${t=>t.ariaLabel}"
        aria-labelledby="${t=>t.ariaLabelledby}"
        aria-live="${t=>t.ariaLive}"
        aria-owns="${t=>t.ariaOwns}"
        aria-relevant="${t=>t.ariaRelevant}"
        aria-roledescription="${t=>t.ariaRoledescription}"
        ${Ul("control")}
    >
        ${zl(0,e)}
        <span class="content" part="content">
            <slot ${Ol("defaultSlottedContent")}></slot>
        </span>
        ${Wl(0,e)}
    </a>
`,styles:(t,e)=>Ml`
    ${Iu()}
  `.withBehaviors(Mu("accent",Du),Mu("hypertext",ku),Mu("lightweight",wu),Mu("outline",Ru),Mu("stealth",Ou)),shadowOptions:{delegatesFocus:!0}});class _u extends Nu{}Ic([Kt({attribute:"current-price"})],_u.prototype,"currentPrice",void 0),Ic([Kt({attribute:"previous-price"})],_u.prototype,"previousPrice",void 0),Ic([Kt({attribute:"badge"})],_u.prototype,"badge",void 0),Ic([Kt({attribute:"product-title"})],_u.prototype,"productTitle",void 0);const Fu='<svg width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">\n<path d="M42 12.5C42 8.91014 39.0898 6 35.5 6H12.5C8.91014 6 6 8.91014 6 12.5V21.5144C6.89262 20.7772 7.90354 20.178 9 19.7499V12.5C9 10.567 10.567 9 12.5 9H35.5C37.433 9 39 10.567 39 12.5V35.5C39 35.9176 38.9268 36.318 38.7928 36.6894L27.1484 25.2862L26.8916 25.0532C25.6182 23.9832 23.8928 23.7296 22.4052 24.2922C22.9232 25.144 23.3288 26.0718 23.6014 27.055C24.0996 26.9182 24.6546 27.043 25.0494 27.4296L36.661 38.8028C36.2978 38.9306 35.907 39 35.5 39H25.9496L26.9748 40.0252C27.5308 40.581 27.8606 41.2774 27.9642 42H35.5C39.0898 42 42 39.0898 42 35.5V12.5Z"/><path d="M35.0084 17.5042C35.0084 15.0166 32.9918 13 30.5042 13C28.0166 13 26 15.0166 26 17.5042C26 19.9918 28.0166 22.0084 30.5042 22.0084C32.9918 22.0084 35.0084 19.9918 35.0084 17.5042ZM29 17.5042C29 16.6735 29.6734 16 30.5042 16C31.335 16 32.0084 16.6735 32.0084 17.5042C32.0084 18.335 31.335 19.0085 30.5042 19.0085C29.6734 19.0085 29 18.335 29 17.5042Z"/><path d="M19.9 35.7788C21.2108 34.2152 22 32.1998 22 30C22 25.0294 17.9706 21 13 21C8.02944 21 4 25.0294 4 30C4 34.9706 8.02944 39 13 39C14.6849 39 16.2616 38.537 17.61 37.7312L23.4394 43.5606C24.0252 44.1464 24.9748 44.1464 25.5606 43.5606C26.1464 42.9748 26.1464 42.0252 25.5606 41.4394L19.9 35.7788ZM13 36C9.6863 36 7 33.3138 7 30C7 26.6862 9.6863 24 13 24C16.3137 24 19 26.6862 19 30C19 33.3138 16.3137 36 13 36Z"/></svg>',Hu="box-shadow: 0 0 calc((var(--elevation) * 0.225px) + 2px) rgba(0, 0, 0, calc(.11 * (2 - var(--background-luminance, 1)))), 0 calc(var(--elevation) * 0.4px) calc((var(--elevation) * 0.9px)) rgba(0, 0, 0, calc(.13 * (2 - var(--background-luminance, 1))));",Zu=_u.compose({baseName:"shopping-recommendation",template:(t,e)=>Dl`
    <a
        class="control"
        part="control"
        ${Ul("control")}
        download="${t=>t.download}"
        href="${t=>t.href}"
        hreflang="${t=>t.hreflang}"
        ping="${t=>t.ping}"
        referrerpolicy="${t=>t.referrerpolicy}"
        rel="${t=>t.rel}"
        target="${t=>t.target}"
        type="${t=>t.type}"
        aria-atomic="${t=>t.ariaAtomic}"
        aria-busy="${t=>t.ariaBusy}"
        aria-controls="${t=>t.ariaControls}"
        aria-current="${t=>t.ariaCurrent}"
        aria-describedBy="${t=>t.ariaDescribedby}"
        aria-details="${t=>t.ariaDetails}"
        aria-disabled="${t=>t.ariaDisabled}"
        aria-errormessage="${t=>t.ariaErrormessage}"
        aria-expanded="${t=>t.ariaExpanded}"
        aria-flowto="${t=>t.ariaFlowto}"
        aria-haspopup="${t=>t.ariaHaspopup}"
        aria-hidden="${t=>t.ariaHidden}"
        aria-invalid="${t=>t.ariaInvalid}"
        aria-keyshortcuts="${t=>t.ariaKeyshortcuts}"
        aria-label="${t=>t.ariaLabel}"
        aria-labelledby="${t=>t.ariaLabelledby}"
        aria-live="${t=>t.ariaLive}"
        aria-owns="${t=>t.ariaOwns}"
        aria-relevant="${t=>t.ariaRelevant}"
        aria-roledescription="${t=>t.ariaRoledescription}"
    >
        <div class="content-container">
            <div class="image-container" part="image-container">
                ${Gl((t=>t.badge),Dl`
                        <div class="badge" part="badge" title="${t=>t.badge}">
                            ${t=>t.badge}
                        </div>
                    `)}
                <div class="image" part="image">
                    <slot name="image"> ${Fu} </slot>
                </div>
            </div>
            <div class="price-container" part="price-container">
                <div class="prices" part="prices">
                    ${Gl((t=>t.currentPrice),Dl`<div
                            class="current-price"
                            part="current-price"
                        >
                            ${t=>t.currentPrice}
                        </div>`)}
                    ${Gl((t=>t.previousPrice),Dl`<div
                                class="previous-price"
                                part="previous-price"
                            >
                                ${t=>t.previousPrice}
                            </div>
                            <br />`)}
                </div>
                <span class="product-title" part="product-title">
                    <slot></slot>
                </span>
            </div>
        </div>
    </a>
`,styles:(t,e)=>Ml`
    ${Ll("flex")} :host {
        border: calc(${Ui} * 1px) solid transparent;
        border-radius: calc(${Bi} * 1px);
        box-sizing: border-box;
        color: ${ta};
        cursor: pointer;
        fill: currentcolor;
        font-family: ${Vi};
        font-size: ${zi};
        line-height: ${Ki};
        outline: none;
        position: relative;
    }

    .control {
        align-items: center;
        border: none;
        border-radius: inherit;
        box-sizing: border-box;
        color: inherit;
        cursor: inherit;
        --elevation: 4;
        ${Hu};
        fill: inherit;
        font-family: inherit;
        height: fit-content;
        justify-content: center;
        outline: none;
        text-decoration: none;
        width: 100%;
    }

    .control:hover {
        border-radius: calc(${Bi} * 1px);
        --elevation: 8;
        ${Hu};
    }

    .control:${Au} {
        box-shadow: 0 0 0 calc(${Gi} * 1px) ${Xo};
    }

    .content-container {
        align-items: flex-start;
        display: flex;
        flex-direction: column;
    }

    .image-container {
        display: flex;
        justify-content: flex-start;
        position: relative;
        width: 100%;
    }

    .image {
        align-items: center;
        display: flex;
        height: 154px;
        justify-content: center;
        width: 100%;
    }

    .image svg {
        fill: #BCBCBC;
    }

    ::slotted([slot="image"]) {
        max-height: 154px;
    }

    .badge {
        background-color: ${ro};
        border-top-right-radius: calc(${Zi} * 1px);
        bottom: 0px;
        box-sizing: border-box;
        color: ${po};
        font-size: ${zi};
        height: 22px;
        line-height: ${Ki};
        overflow: hidden;
        padding: 3px 6px;
        position: absolute;
        max-width: calc(100% - 12px);
        display: -webkit-box;
        -webkit-line-clamp: 1;
        -webkit-box-orient: vertical;
    }

    .price-container {
        box-sizing: border-box;
        padding: 0 12px;
        margin-bottom: 8px;
        overflow: hidden;
        width: 100%;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 3;
    }

    .current-price {
        display: inline-block;
        font-size: ${Xi};
        font-weight: 700;
        line-height: ${qi};
        width: max-content;
    }

    .previous-price {
        color: ${ia};
        display: inline-block;
        font-size: ${zi};
        line-height: ${Ki};
        text-decoration: line-through;
        width: max-content;
    }

    .product-title {
        color: ${ia};
        font-size: ${zi};
        line-height: ${Ki};
        overflow: hidden;
    }
`.withBehaviors(Nc(Ml`
       :host,
       .previous-price,
       .product-title {
            forced-color-adjust: auto;
            color: ${_c.LinkText};
        }

        :host .control:hover,
        :host([href]) .control:hover,
        :host([href]) .control:${Au} {
            forced-color-adjust: none;
            box-shadow: inset 0 0 0 calc((${Gi} * 1px)) ${_c.LinkText};
        }

        .badge {
            forced-color-adjust: none;
            color: ${_c.ButtonText};
            background: ${_c.ButtonFace};
            box-shadow: 0 0 0 calc((${Ui} * 1px)) ${_c.ButtonText};
        }

        .image svg {
            fill: ${_c.ButtonText};
        }
    `)),shadowOptions:{delegatesFocus:!0}});var Bu,Uu=function(t){if(!Hc(t))return!1;var e=iu(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Gu=Uc["__core-js_shared__"],Vu=(Bu=/[^.]+$/.exec(Gu&&Gu.keys&&Gu.keys.IE_PROTO||""))?"Symbol(src)_1."+Bu:"";var $u=function(t){return!!Vu&&Vu in t},Wu=Function.prototype.toString;var zu=function(t){if(null!=t){try{return Wu.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Ku=/^\[object .+?Constructor\]$/,Yu=Function.prototype,ju=Object.prototype,Xu=Yu.toString,qu=ju.hasOwnProperty,Ju=RegExp("^"+Xu.call(qu).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Qu=function(t){return!(!Hc(t)||$u(t))&&(Uu(t)?Ju:Ku).test(zu(t))};var td=function(t,e){return null==t?void 0:t[e]};var ed=function(t,e){var i=td(t,e);return Qu(i)?i:void 0},id=ed(Object,"create");var nd=function(){this.__data__=id?id(null):{},this.size=0};var od=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ad=Object.prototype.hasOwnProperty;var rd=function(t){var e=this.__data__;if(id){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return ad.call(e,t)?e[t]:void 0},sd=Object.prototype.hasOwnProperty;var ld=function(t){var e=this.__data__;return id?void 0!==e[t]:sd.call(e,t)};var cd=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=id&&void 0===e?"__lodash_hash_undefined__":e,this};function ud(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}ud.prototype.clear=nd,ud.prototype.delete=od,ud.prototype.get=rd,ud.prototype.has=ld,ud.prototype.set=cd;var dd=ud;var hd=function(){this.__data__=[],this.size=0};var pd=function(t,e){return t===e||t!=t&&e!=e};var fd=function(t,e){for(var i=t.length;i--;)if(pd(t[i][0],e))return i;return-1},gd=Array.prototype.splice;var md=function(t){var e=this.__data__,i=fd(e,t);return!(i<0)&&(i==e.length-1?e.pop():gd.call(e,i,1),--this.size,!0)};var vd=function(t){var e=this.__data__,i=fd(e,t);return i<0?void 0:e[i][1]};var yd=function(t){return fd(this.__data__,t)>-1};var Cd=function(t,e){var i=this.__data__,n=fd(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this};function bd(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}bd.prototype.clear=hd,bd.prototype.delete=md,bd.prototype.get=vd,bd.prototype.has=yd,bd.prototype.set=Cd;var Sd=bd,xd=ed(Uc,"Map");var Ed=function(){this.size=0,this.__data__={hash:new dd,map:new(xd||Sd),string:new dd}};var Ad=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Td=function(t,e){var i=t.__data__;return Ad(e)?i["string"==typeof e?"string":"hash"]:i.map};var Id=function(t){var e=Td(this,t).delete(t);return this.size-=e?1:0,e};var Dd=function(t){return Td(this,t).get(t)};var kd=function(t){return Td(this,t).has(t)};var wd=function(t,e){var i=Td(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this};function Rd(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}Rd.prototype.clear=Ed,Rd.prototype.delete=Id,Rd.prototype.get=Dd,Rd.prototype.has=kd,Rd.prototype.set=wd;var Od=Rd;function Pd(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var i=function(){var n=arguments,o=e?e.apply(this,n):n[0],a=i.cache;if(a.has(o))return a.get(o);var r=t.apply(this,n);return i.cache=a.set(o,r)||a,r};return i.cache=new(Pd.Cache||Od),i}Pd.Cache=Od;const Md=Pd((t=>{let e=di(t);if(null!==e)return e;if(e=hi(t),null!==e)return e;throw new Error(`${t} cannot be converted to a ColorRGBA64. Color strings must be one of the following formats: "#RGB", "#RRGGBB", or "rgb(r, g, b)"`)}));class Nd{constructor(t,e,i){this.light=t,this.dark=e,this.source=i,this.attached=null}handleChange({target:t,token:e}){this.attach(e.getValueFor(t))}attach(t){const e=function(t){return Fe(Md(t))}(t.toColorString())<=Ri.DarkMode?"dark":"light";this.attached!==this[e]&&(null!==this.attached&&this.source.$fastController.removeStyles(this.attached),this.attached=this[e],null!==this.attached&&this.source.$fastController.addStyles(this.attached))}}const Ld=Ml`
    .delivery-label.has-shipping-cost {
        color: var(--shipping-cost-color);
    }
`,_d=Ml`
    .delivery-label.has-shipping-cost {
        color: var(--shipping-cost-color-dark-mode);
    }
`,Fd=Ml`
    :host {
        --content-max-lines: 2;
        --shipping-cost-color: #9d6600;
        --shipping-cost-color-dark-mode: #bc9751;
        outline: none;
        font-family: ${Vi};
        font-size: ${zi};
        font-weight: 500;
        line-height: ${Ki};
        min-width: calc(${Tu} * 1px);
        border-radius: calc(${Bi} * 1px);
        box-sizing: border-box;
        color: ${ta};
        fill: currentcolor;
        min-height: 78px;
        display: block;
    }

    :host(:active) {
        background-color: ${Io};
    }

    .control {
        display: grid;
        grid-template-columns: 1fr 90px;
        grid-column-gap: 8px;
        box-sizing: border-box;
        background: transparent;
        justify-content: center;
        align-items: flex-start;
        padding: 5px 0;
        padding-inline: 12px;
        padding-block: 13px 12px;
        outline: none;
        text-decoration: none;
        border: calc(${Ui} * 1px) solid transparent;
        color: inherit;
        border-radius: inherit;
        fill: inherit;
        cursor: inherit;
        font-family: inherit;
        width: 100%;
        height: 100%;
        --elevation: 4;
        min-height: 78px;
        ${Hu};
    }

    .price-container {
        grid-column: 2;
        grid-row: 1;
        display: flex;
        flex-direction: column;
        justify-self: end;
        align-items: flex-end;
        justify-content: center;
        font-size: ${Xi};
        text-overflow: ellipsis;
        height: 100%;
        overflow: hidden;
        min-height: ${qi};
        max-width: 90px;
        min-height: 12px;
    }

    .action-button {
        height: 24px;
        margin: 0 1px;
    }

    .action-button::part(control) {
        max-height: 24px;
        padding: 0 8px;
        font-size: 12px;
    }

    .action-button,
    .action-button::part(control) {
        max-width: 90px;
    }

    .shipper-link::part(control) {
        text-decoration: none;
        border-bottom: none;
        margin: calc(${Ui} * 1px);
    }

    .action-button::part(content) {
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }

    .shipper-link::part(control):focus {
        border: calc(${Ui} * 1px) solid ${Xo};
        margin: 0;
    }

    .item-title {
        margin-bottom: 5px;
    }

    .delivery-label,
    .shipper-label,
    .rating-label {
        color: ${ia};
    }

    .shipper-link {
        font-weight: 400;
    }

    .content {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: space-between;
    }

    .item-price {
        overflow: hidden;
        text-overflow: ellipsis;
        padding-inline-end: 4px;
        font-weight: 600;
        margin-block-end: 7px;
    }

    @media (max-width: 655px) {
        :host {
            max-width: 602px;
        }
    }
`.withBehaviors(new class{constructor(t,e){this.cache=new WeakMap,this.light=t,this.dark=e}bind(t){this.attach(t)}unbind(t){const e=this.cache.get(t);e&&no.unsubscribe(e)}attach(t){const e=this.cache.get(t)||new Nd(this.light,this.dark,t),i=no.getValueFor(t);no.subscribe(e,t),e.attach(i),this.cache.set(t,e)}}(Ld,_d)),Hd=Dl`
    <fluent-button
        appearance="accent"
        class="action-button"
        aria-label="${t=>t.actionButtonAriaLabel}"
        aria-describedby="${t=>t.itemTitleId} ${t=>t.deliveryLabelId} ${t=>t.deliveryInfoId} ${t=>t.shipperLabelId} ${t=>t.shipperLinkId} ${t=>t.ratingLabelId} ${t=>t.ratingId}"
        @click="${t=>t.onClickHandler()}"
        @keyup="${(t,e)=>t.onKeyPressHandler(e.event)}"
    >
        ${t=>t.actionButtonText}
    </fluent-button>
`;var Zd=function(t,e){for(var i=-1,n=null==t?0:t.length,o=Array(n);++i<n;)o[i]=e(t[i],i,t);return o},Bd=Array.isArray,Ud=Kc?Kc.prototype:void 0,Gd=Ud?Ud.toString:void 0;var Vd=function t(e){if("string"==typeof e)return e;if(Bd(e))return Zd(e,t)+"";if(ou(e))return Gd?Gd.call(e):"";var i=e+"";return"0"==i&&1/e==-Infinity?"-0":i};var $d=function(t){return null==t?"":Vd(t)},Wd=0;var zd=function(t){var e=++Wd;return $d(t)+e};class Kd extends qs{constructor(){super(...arguments),this.hasShippingCost=!1,this.itemTitleId=zd("itemTitleId"),this.deliveryLabelId=zd("deliveryLabelId"),this.deliveryInfoId=zd("deliveryInfoId"),this.shipperLabelId=zd("shipperLabelId"),this.ratingLabelId=zd("ratingLabelId"),this.ratingId=zd("ratingId"),this.shipperLinkId=zd("shipperLinkId"),this.onKeyPressHandler=t=>{if(t.keyCode===jl)t.preventDefault(),this.onClickHandler()},this.linkKeyPressHandler=t=>{if(t.keyCode===jl)t.preventDefault(),this.linkClickHandler()}}onClickHandler(){this.$emit("add-to-cart")}linkClickHandler(){this.$emit("link-invoked")}}Ic([Kt({attribute:"item-title"})],Kd.prototype,"itemTitle",void 0),Ic([Kt({attribute:"item-price"})],Kd.prototype,"itemPrice",void 0),Ic([Kt({attribute:"delivery-label"})],Kd.prototype,"deliveryLabel",void 0),Ic([Kt({attribute:"delivery-info"})],Kd.prototype,"deliveryInfo",void 0),Ic([Kt({attribute:"shipper-label"})],Kd.prototype,"shipperLabel",void 0),Ic([Kt({attribute:"shipper-name"})],Kd.prototype,"shipperName",void 0),Ic([Kt({attribute:"rating-label"})],Kd.prototype,"ratingLabel",void 0),Ic([Kt({attribute:"rating"})],Kd.prototype,"rating",void 0),Ic([Kt({attribute:"shipper-url"})],Kd.prototype,"shipperUrl",void 0),Ic([Kt({attribute:"has-shipping-cost",mode:"boolean"})],Kd.prototype,"hasShippingCost",void 0),Ic([Kt({attribute:"action-button-text"})],Kd.prototype,"actionButtonText",void 0),Ic([Kt({attribute:"action-button-aria-label"})],Kd.prototype,"actionButtonAriaLabel",void 0);const Yd=Kd.compose({baseName:"shopping-similar-seller",styles:Fd,template:(t,e)=>Dl`
    <div class="control" part="control">
        <div class="price-container" part="price-container">
            <span class="item-price" part="item-price">${t=>t.itemPrice}</span>
            ${Gl((t=>t.actionButtonText),Dl`${Hd}`)}
        </div>
        <div class="content" part="content">
            <div class="item-title" id="${t=>t.itemTitleId}">
                ${t=>t.itemTitle}
            </div>
            <div>
                <div>
                    <span
                        id="${t=>t.deliveryLabelId}"
                        class="delivery-label ${t=>t.hasShippingCost?"has-shipping-cost":""}"
                        part="delivery-label"
                        >${t=>t.deliveryLabel}</span
                    >
                    <span
                        id="${t=>t.deliveryInfoId}"
                        class="delivery-info"
                        part="delivery-info"
                        >${t=>t.deliveryInfo}</span
                    >
                </div>
                <div>
                    <span
                        class="shipper-label"
                        part="shipper-label"
                        id="${t=>t.shipperLabelId}"
                        >${t=>t.shipperLabel}</span
                    >
                    <fluent-anchor
                        id="${t=>t.shipperLinkId}"
                        appearance="hypertext"
                        class="shipper-link"
                        part="shipper-link"
                        href="${t=>t.shipperUrl}"
                        @click="${t=>t.linkClickHandler()}"
                        @keyup="${(t,e)=>t.linkKeyPressHandler(e.event)}"
                        >${t=>t.shipperName}</fluent-anchor
                    >
                </div>
                ${Gl((t=>t.rating),Dl`
                        <div>
                            <span
                                class="rating-label"
                                part="rating-label"
                                id="${t=>t.ratingLabelId}"
                                >${t=>t.ratingLabel}</span
                            >
                            <span id="${t=>t.ratingId}" class="rating" part="rating"
                                >${t=>t.rating}</span
                            >
                        </div>
                    `)}
            </div>
        </div>
    </div>
`,shadowOptions:{delegatesFocus:!0}});class jd extends qs{}const Xd=(t,e)=>Ml`
      ${Ll("block")} :host {
        --elevation: 4;
        display: block;
        contain: content;
        height: var(--card-height, 100%);
        width: var(--card-width, 100%);
        box-sizing: border-box;
        background: ${no};
        color: ${ta};
        border-radius: calc(${Bi} * 1px);
        ${Hu}
      }

      :host(:hover) {
        --elevation: 8;
      }

      :host(:focus-within) {
        --elevation: 8;
      }

      :host {
        content-visibility: auto;
      }
    `.withBehaviors(Nc(Ml`
          :host {
            forced-color-adjust: none;
            background: ${_c.Canvas};
            box-shadow: 0 0 0 1px ${_c.CanvasText};
          }
        `));class qd extends jd{cardFillColorChanged(t,e){if(e){const t=di(e);null!==t&&(this.neutralPaletteSource=e,no.setValueFor(this,vi.create(t.r,t.g,t.b)))}}neutralPaletteSourceChanged(t,e){if(e){const t=di(e),i=vi.create(t.r,t.g,t.b);Kn.setValueFor(this,xi.create(i))}}handleChange(t,e){this.cardFillColor||no.setValueFor(this,(e=>Po.getValueFor(e).evaluate(e,no.getValueFor(t))))}connectedCallback(){super.connectedCallback();const t=oe(this);if(t){const e=Mt.getNotifier(t);e.subscribe(this,"fillColor"),e.subscribe(this,"neutralPalette"),this.handleChange(t,"fillColor")}}}Su([Kt({attribute:"card-fill-color",mode:"fromView"})],qd.prototype,"cardFillColor",void 0),Su([Kt({attribute:"neutral-palette-source",mode:"fromView"})],qd.prototype,"neutralPaletteSource",void 0);const Jd=qd.compose({baseName:"card",baseClass:jd,template:(t,e)=>Dl`
    <slot></slot>
`,styles:Xd}),Qd=Xd;class th extends qd{constructor(){super(...arguments),this.contentId=zd("contentId"),this.footerContentId=zd("footerContentId")}gradientColorEndChanged(){this.generateGradientVariables()}noFooterChanged(){this.noFooter=!this.hasFooter()}dataChanged(){this.noFooter=!this.hasFooter()}generateGradientVariables(){if(this.hasColorGradient())this.style.setProperty("--gradient-color-end",this.gradientColorEnd);else{if(!this.cardFillColor)return null;{const{r:t,g:e,b:i}=di(this.cardFillColor),n=new Re(t,e,i,Pc("image",this.childElements)?.7:.5).toStringWebRGBA();this.style.setProperty("--gradient-color-end",this.cardFillColor),this.style.setProperty("--gradient-color-mid",n)}}}hasFooter(){var t;return!this.hasAttribute("no-footer")&&(Pc("footer-end",this.childElements)||Pc("footer-start",this.childElements)||!!(null===(t=this.data)||void 0===t?void 0:t.footerContent))}hasColorGradient(){return!(!this.gradientColorEnd||!this.cardFillColor)}connectedCallback(){super.connectedCallback(),this.size||(this.size="_1x_1y"),"_1x_1y"===this.size&&this.imageLayout&&(this.imageLayout="full"),this.hasColorGradient()?this.setAttribute("has-color-gradient",""):this.removeAttribute("has-color-gradient"),this.generateGradientVariables()}}Ic([Kt],th.prototype,"target",void 0),Ic([Kt({attribute:"gradient-color-end"})],th.prototype,"gradientColorEnd",void 0),Ic([Kt],th.prototype,"size",void 0),Ic([Kt({attribute:"image-layout"})],th.prototype,"imageLayout",void 0),Ic([Kt({attribute:"label"})],th.prototype,"label",void 0),Ic([Kt({attribute:"describedby"})],th.prototype,"describedby",void 0),Ic([Kt({attribute:"labelledby"})],th.prototype,"labelledby",void 0),Ic([Kt({attribute:"no-footer",mode:"boolean"})],th.prototype,"noFooter",void 0),Ic([Nt],th.prototype,"data",void 0),Ic([Nt],th.prototype,"childElements",void 0),Ic([Nt],th.prototype,"footerStartNodes",void 0),Ic([Nt],th.prototype,"footerEndNodes",void 0);class eh{constructor(t,e){this.cache=new WeakMap,this.ltr=t,this.rtl=e}bind(t){this.attach(t)}unbind(t){const e=this.cache.get(t);e&&Mi.unsubscribe(e)}attach(t){const e=this.cache.get(t)||new ih(this.ltr,this.rtl,t),i=Mi.getValueFor(t);Mi.subscribe(e),e.attach(i),this.cache.set(t,e)}}class ih{constructor(t,e,i){this.ltr=t,this.rtl=e,this.source=i,this.attached=null}handleChange({target:t,token:e}){this.attach(e.getValueFor(t))}attach(t){this.attached!==this[t]&&(null!==this.attached&&this.source.$fastController.removeStyles(this.attached),this.attached=this[t],null!==this.attached&&this.source.$fastController.addStyles(this.attached))}}const nh=Ml`
    :host([image-layout="half"]) .image-container {
        left: 174px;
    }
`,oh=Ml`
    :host([image-layout="half"]) .image-container {
        right: 174px;
    }
`,ah=th.compose({baseName:"dash-base-card",template:(t,e)=>Dl`
    <template
        ${Oc({property:"childElements",filter:kl()})}
        ?no-footer="${t=>t.noFooter}"
    >
        <span class="heading" part="heading">
            <div class="heading-title-container" part="heading-title-container">
                <slot name="heading-icon"></slot>
                <a
                    class="heading-link"
                    part="heading-link"
                    aria-label="${t=>t.label}"
                    aria-labelledby="${t=>t.labelledby}"
                    aria-describedby="${t=>{var e;return null!==(e=t.describedby)&&void 0!==e?e:""}} ${t=>t.contentId} ${t=>t.footerContentId}"
                    href="${t=>{var e;return null===(e=t.data)||void 0===e?void 0:e.link}}"
                    target=${t=>t.target}
                    tabindex="1"
                >
                    ${t=>{var e;return null===(e=t.data)||void 0===e?void 0:e.heading}}
                </a>
            </div>
            <div class="more-actions-container" part="more-actions-container">
                <slot name="more-actions"></slot>
            </div>
        </span>
        <div id="${t=>t.contentId}" class="content" part="content">
            <slot></slot>
        </div>
        ${Gl((t=>Pc("image",t.childElements)),Dl`
                <div class="image-container" part="image-container">
                    <slot name="image"></slot>
                </div>
            `)}
        <div class="gradient" part="gradient"></div>
        <div class="footer" part="footer">
            <slot name="footer-start" ${Ol("footerStartNodes")}></slot>
            ${Gl((t=>{var e;return null===(e=t.data)||void 0===e?void 0:e.footerContent}),Dl`
                    <span
                        id="${t=>t.footerContentId}"
                        class="footer-content"
                        part="footer-content"
                        aria-label="${t=>{var e;return null===(e=t.data)||void 0===e?void 0:e.footerContent}}"
                    >
                        ${t=>{var e;return null===(e=t.data)||void 0===e?void 0:e.footerContent}}
                    </span>
                `)}
            <slot name="footer-end" ${Ol("footerEndNodes")}></slot>
        </div>
    </template>
`,styles:(t,e)=>Ml`
    ${Qd(t,e)}
    ${Ll("grid")}:host {
        position: relative;
        box-sizing: border-box;
        font-family: ${Vi};
        font-size: ${zi};
        line-height: ${Ki};
        display: grid;
        grid-template-rows: auto 1fr auto;
        padding: var(--card-padding, 12px 0);
        outline: none;
    }

    :host([size="_1x_1y"]) {
        --card-height: 162px;
        --card-width: 162px;
    }

    :host([size="_2x_1y"]) {
        --card-height: 162px;
        --card-width: 336px;
    }

    :host([size="_2x_2y"]) {
        --card-height: 336px;
        --card-width: 336px;
    }

    :host([size="_2x_3y"]) {
        --card-height: 510px;
        --card-width: 336px;
    }

    .image-container {
        position: absolute;
        z-index: -1;
        height: 100%;
    }

    .heading {
        max-height: 18px;
        align-items: center;
        justify-content: space-between;
        display: flex;
        outline: none;
        cursor: pointer;
        text-decoration: none;
        letter-spacing: 0.7px;
        color: ${ta};
        padding: var(--heading-padding, 0 12px);
    }

    .heading-title-container {
        display: flex;
        align-items: center;
    }

    .heading-link,
    .heading-link:hover,
    .heading-link:active,
    .heading-link:visited {
        color: ${ia};
        text-decoration: none;
        height: ${Ki};
        -webkit-line-clamp: 1;
    }

    .heading-link:${Au} {
        text-decoration: underline;
        outline: none;
    }

    .heading-link::after {
        position: absolute;
        content: "";
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
    }

    ::slotted([slot="heading-icon"]) {
        margin-inline-end: 5px;
    }

    .more-actions-container {
        justify-self: end;
        opacity: 0;
        z-index: 1;
        transition: opacity 0.1s linear;
    }
    
    :host(:focus-within) .more-actions-container,
    :host(:hover) .more-actions-container {
        opacity: 1;
    }

    .content {
        overflow: hidden;
        color: ${ta};
    }

    :host([image-layout="full"]) .image-container {
        width: 100%;
    }

    :host([image-layout="half"]) .image-container {
        max-width: 100%;
        top: 0;
    }    

    :host([image-layout="contain"]) .image-container {
        max-width: 100%;
        top: 26px;
        right: 0;
    }

    :host([has-color-gradient]) .gradient {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(
            180deg,
            transparent 0%,
            var(--gradient-color-end) 100%
        );
        z-index: -1;
    }

    :host([image-layout="full"]) .gradient {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: -1;
        background: linear-gradient(
            270deg,
            transparent 0%,
            var(--gradient-color-mid) 40%,
            var(--gradient-color-end) 100%
        );
    }

    .footer {
        display: flex;
        align-content: center;
        font-size: ${zi};
        line-height: ${Ki};
        padding: var(--footer-padding, 0 12px);
        color: ${ia};
    }
    
    :host([image-layout="full"]) .footer {
        color: ${ta};
    }

    :host([no-footer]) .footer {
        display: none;
    }

    ::slotted([slot="more-actions"]) {
        min-width: 24px;
        width: 24px;
        height: 24px;
        --control-corner-radius: 16;
    }

    ::slotted([slot="image"]) {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: all 0.1s linear;
        opacity: 1;
    }

    :host(:not([image-layout="half"]):hover) ::slotted([slot="image"]),
    :host(:not([image-layout="half"]):focus-within) ::slotted([slot="image"]) {
        opacity: 0.5;
    }

    ::slotted([slot="footer-end"]) {
        margin-inline-start: auto;
    }
`.withBehaviors(new eh(nh,oh),Nc(Ml`
                :host([has-color-gradient]) .gradient {
                    background: none;
                }

                a[href],
                .heading,
                .content,
                .footer {
                    forced-color-adjust: auto;
                    color: ${_c.LinkText};
                }
            `))});class rh extends th{constructor(){super(...arguments),this.otherImagesMaxAllowed=4}dataChanged(){var t;this.hasOtherItems=(null===(t=this.otherImages)||void 0===t?void 0:t.length)>0}otherImagesChanged(){var t;this.hasOtherItems=(null===(t=this.otherImages)||void 0===t?void 0:t.length)>0,this.otherImages&&this.otherImages.length>4&&(this.otherImages.forEach(((t,e)=>{e>this.otherImagesMaxAllowed-1&&t.style.setProperty("display","none")})),this.additionalImagesCount=this.otherImages.length-this.otherImagesMaxAllowed)}hasOtherItemsTitle(){var t;return!!(null===(t=this.data)||void 0===t?void 0:t.otherItemsTitle)}connectedCallback(){var t;super.connectedCallback(),this.hasOtherItems=(null===(t=this.otherImages)||void 0===t?void 0:t.length)>0}}Ic([Nt],rh.prototype,"hasOtherItems",void 0),Ic([Nt],rh.prototype,"data",void 0),Ic([Nt],rh.prototype,"otherImages",void 0),Ic([Nt],rh.prototype,"additionalImagesCount",void 0);class sh extends qs{constructor(){super(...arguments),this.percentComplete=0}valueChanged(){this.$fastController.isConnected&&this.updatePercentComplete()}minChanged(){this.$fastController.isConnected&&this.updatePercentComplete()}maxChanged(){this.$fastController.isConnected&&this.updatePercentComplete()}connectedCallback(){super.connectedCallback(),this.updatePercentComplete()}updatePercentComplete(){const t="number"==typeof this.min?this.min:0,e="number"==typeof this.max?this.max:100,i="number"==typeof this.value?this.value:0,n=e-t;this.percentComplete=0===n?0:Math.fround((i-t)/n*100)}}Et([Kt({converter:Wt})],sh.prototype,"value",void 0),Et([Kt({converter:Wt})],sh.prototype,"min",void 0),Et([Kt({converter:Wt})],sh.prototype,"max",void 0),Et([Kt({mode:"boolean"})],sh.prototype,"paused",void 0),Et([Nt],sh.prototype,"percentComplete",void 0);class lh extends sh{}const ch=lh.compose({baseName:"progress",template:(t,e)=>Dl`
    <template
        role="progressbar"
        aria-valuenow="${t=>t.value}"
        aria-valuemin="${t=>t.min}"
        aria-valuemax="${t=>t.max}"
        class="${t=>t.paused?"paused":""}"
    >
        ${Gl((t=>"number"==typeof t.value),Dl`
                <div class="progress" part="progress" slot="determinate">
                    <div
                        class="determinate"
                        part="determinate"
                        style="width: ${t=>t.percentComplete}%"
                    ></div>
                </div>
            `)}
        ${Gl((t=>"number"!=typeof t.value),Dl`
                <div class="progress" part="progress" slot="indeterminate">
                    <slot class="indeterminate" name="indeterminate">
                        ${e.indeterminateIndicator1||""}
                        ${e.indeterminateIndicator2||""}
                    </slot>
                </div>
            `)}
    </template>
`,styles:(t,e)=>Ml`
    ${Ll("flex")} :host {
      align-items: center;
      outline: none;
      height: calc(${Hi} * 1px);
      margin: calc(${Hi} * 1px) 0;
    }

    .progress {
      background-color: ${Ao};
      border-radius: calc(${Hi} * 1px);
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      position: relative;
    }

    .determinate {
      background-color: ${ro};
      border-radius: calc(${Hi} * 1px);
      height: 100%;
      transition: all 0.2s ease-in-out;
      display: flex;
    }

    .indeterminate {
      height: 100%;
      border-radius: calc(${Hi} * 1px);
      display: flex;
      width: 100%;
      position: relative;
      overflow: hidden;
    }

    .indeterminate-indicator-1 {
      position: absolute;
      opacity: 0;
      height: 100%;
      background-color: ${ro};
      border-radius: calc(${Hi} * 1px);
      animation-timing-function: cubic-bezier(0.4, 0, 0.6, 1);
      width: 40%;
      animation: indeterminate-1 2s infinite;
    }

    .indeterminate-indicator-2 {
      position: absolute;
      opacity: 0;
      height: 100%;
      background-color: ${ro};
      border-radius: calc(${Hi} * 1px);
      animation-timing-function: cubic-bezier(0.4, 0, 0.6, 1);
      width: 60%;
      animation: indeterminate-2 2s infinite;
    }

    :host(.paused) .indeterminate-indicator-1,
    :host(.paused) .indeterminate-indicator-2 {
      animation-play-state: paused;
      background-color: ${Ao};
    }

    :host(.paused) .determinate {
      background-color: ${ia};
    }

    @keyframes indeterminate-1 {
      0% {
        opacity: 1;
        transform: translateX(-100%);
      }
      70% {
        opacity: 1;
        transform: translateX(300%);
      }
      70.01% {
        opacity: 0;
      }
      100% {
        opacity: 0;
        transform: translateX(300%);
      }
    }

    @keyframes indeterminate-2 {
      0% {
        opacity: 0;
        transform: translateX(-150%);
      }
      29.99% {
        opacity: 0;
      }
      30% {
        opacity: 1;
        transform: translateX(-150%);
      }
      100% {
        transform: translateX(166.66%);
        opacity: 1;
      }
    }
  `.withBehaviors(Nc(Ml`
        .indeterminate-indicator-1,
        .indeterminate-indicator-2,
        .determinate {
          forced-color-adjust: none;
          background-color: ${_c.FieldText};
        }
        .progress {
          background-color: ${_c.Field};
          border: calc(${Ui} * 1px) solid ${_c.FieldText};
        }
        :host(.paused) .indeterminate-indicator-1,
        .indeterminate-indicator-2 {
          background-color: ${_c.Field};
        }
        :host(.paused) .determinate {
          background-color: ${_c.GrayText};
        }
      `)),indeterminateIndicator1:'\n    <span class="indeterminate-indicator-1" part="indeterminate-indicator-1"></span>\n  ',indeterminateIndicator2:'\n    <span class="indeterminate-indicator-1" part="indeterminate-indicator-1"></span>\n  '});var uh,dh;!function(t){t.horizontal="horizontal",t.vertical="vertical"}(uh||(uh={})),function(t){t.separator="separator",t.presentation="presentation"}(dh||(dh={}));class hh extends qs{constructor(){super(...arguments),this.role=dh.separator,this.orientation=uh.horizontal}}Et([Kt],hh.prototype,"role",void 0),Et([Kt],hh.prototype,"orientation",void 0);const ph=(t,e)=>i=>Dl`
    <slot name=${t}>
        <span class=${t} part=${t}>
            ${t=>t.data?t.data[e]:""}
        </span>
    </slot>
`,fh=rh.compose({baseName:"package-tracker-card",template:(t,e)=>Dl`
    <${t.tagFor(th)}
        image-layout=${t=>t.imageLayout}
        card-fill-color=${t=>t.cardFillColor}
        gradient-color-end=${t=>t.gradientColorEnd}
        target=${t=>t.target}
        label="${t=>t.label}"
        labelledby="${t=>t.labelledby}"
        describedby="${t=>t.describedby}"
        class="base-card"
        part="base-card"
        ?no-footer=${t=>!t.hasFooter()}
        :data=${t=>t.data}
        ${Ul("baseCard")}
    >
        <slot name="heading-icon" slot="heading-icon"></slot>
        <slot name="more-actions" slot="more-actions"></slot>
        <div class="content-container" part="content-container" ${Ul("contentContainer")}>
            <div class="main-container" part="main-container">
                <slot
                    name="main-image"
                    ${Ul("mainImage")}
                ></slot>
                <div class="main-content" part="main-content">
                    ${ph("main-title","mainTitle")}
                    <slot name="progress-bar">
                        <${t.tagFor(lh)} class="progress-bar" part="progress-bar" min="0" max="100" value="${t=>{var e;return null===(e=t.data)||void 0===e?void 0:e.progressPercentage}}" aria-hidden="true">
                        </${t.tagFor(lh)}>
                    </slot>
                    ${Gl((t=>{var e;return null===(e=t.data)||void 0===e?void 0:e.subTitle}),Dl`
                            ${ph("sub-title","subTitle")}
                        `)}
                    </slot>
                </div>
            </div>
            ${Gl((t=>t.hasOtherItems),Dl`
                    <slot name="divider">
                        <${t.tagFor(hh)} class="divider" part="divider" aria-hidden="true">
                        </${t.tagFor(hh)}>
                    </slot>
            `)}
            <div
                class="other-items-container ${t=>t.hasOtherItems?"":"other-items-container__hidden"}"
                part="other-items-container"
            >
                    ${Gl((t=>{var e;return null===(e=t.data)||void 0===e?void 0:e.otherItemsTitle}),Dl`
                            ${ph("other-items-title","otherItemsTitle")}
                        `)}
                <div
                    class="other-items-image-container ${t=>{var e;return(null===(e=t.data)||void 0===e?void 0:e.otherItemsTitle)?"":"other-items-image-container__no-other-items"}}"
                    part="other-items-image-container"
                >
                    <slot name="other-image"
                    ${Ol("otherImages")}
                    ></slot>
                    ${Gl((t=>t.additionalImagesCount),Dl`
                            <span
                                class="additional-images-counter"
                                part="additional-images-counter"
                            >
                                +${t=>t.additionalImagesCount}
                            </span>
                        `)}
                </div>
            </div>
        </div>
    </${t.tagFor(th)}>
`,styles:(t,e)=>Ml`
        ${Ll("inline-flex")} :host {
            --default-gutter: 12;
            --card-width-number: 336;
            border-radius: calc(${Bi} * 1px);
        }

        .base-card {
            padding-top: 16px;
            --card-width: calc(var(--card-width-number) * 1px);
            height: auto;
            position: relative;
        }

        ::part(heading) {
            max-height: 24px;
            margin-bottom: 8px;
            color: ${ia};
            z-index: 1;
        }

        ::part(content) {
            padding: 0 calc(var(--default-gutter) * 1px);
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            margin-top: 8px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        ::part(heading-link) {
            font-weight: 600;
        }

        .content-container {
            display: flex;
            flex-direction: column;
            box-sizing: border-box;
            background: transparent;
            outline: none;
            text-decoration: none;
            border: none;
            color: inherit;
            border-radius: inherit;
        }

        .main-container {
            display: flex;
            margin-bottom: 8px;
            box-sizing: border-box;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: center;
            overflow: hidden;
            text-overflow: ellipsis;
            padding-inline-end: 20px;
        }

        ::slotted([slot="main-image"]) {
            margin-inline-end: calc(var(--default-gutter) * 1px);
            align-self: center;
            justify-self: center;
            --elevation: 4;
            ${Hu};
            border-radius: calc(${Bi} * 2px);
        }

        .main-title {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            text-overflow: ellipsis;
            max-width: 100%;
            margin-bottom: 3px;
            font-size: ${$i};
            line-height: ${Wi};
            font-weight: 600;
        }

        .sub-title {
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
            color: ${ia};
            max-height: calc(var(--sub-title-max-lines, 2) * ${Ki});
            line-height: ${Ki};
            -webkit-line-clamp: var(--sub-title-max-lines, 2);
        }

        .divider {
            margin: 0;
            margin-top: calc(var(--default-gutter) * 1px);
            border-top: calc(${Ui} * 1px * 2) solid ${$o};
            transform: scale(
                calc(
                    var(--card-width-number) /
                        (var(--card-width-number) - calc(var(--default-gutter) * 2))
                ),
                1
            );
        }

        .other-items-container {
            display: flex;
            flex-direction: column;
            box-sizing: border-box;
            text-overflow: ellipsis;
            margin-top: calc(var(--default-gutter) * 1px);
            margin-bottom: 4px;
        }

        .other-items-container__hidden {
            display: none;
        }

        .other-items-image-container {
            position: relative;
            display: flex;
            grid-gap: 16px;
            margin-top: 8px;
        }

        .other-items-image-container__no-other-items {
            margin-top: 4px;
        }

        .other-items-title {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 100%;
            color: ${ta};
            height: calc(var(--other-title-max-lines, 1) * ${Wi});
            font-size: ${$i};
            line-height: ${Wi};
            -webkit-line-clamp: var(--other-title-max-lines, 1);
        }

        .additional-images-counter {
            position: absolute;
            top: 50%;
            right: calc(66px / 2);
            transform: translate(+50%, -50%);
            height: 32px;
            width: 32px;
            border-radius: 16px;
            background-color: ${Mo};
            display: flex;
            align-items: center;
            justify-content: center;
        }

        ::slotted([slot="other-image"]) {
            height: 66px;
            width: 66px;
            align-self: center;
            justify-self: center;
            --elevation: 4;
            ${Hu};
            border-radius: calc(${Bi} * 2px);
        }

        .progress-bar {
            width: 100%;
            height: 3px;
            margin-bottom: 10px;
        }

        .progress-bar::part(determinate) {
            background: var(--progress-determinate-background, ${bo});
        }
    `.withBehaviors(Nc(Ml`
                .main-title,
                .sub-title,
                .other-items-title {
                    color: ${_c.LinkText}!important;
                }

                .progress-bar::part(determinate) {
                    background: ${_c.FieldText};
                }
            `))});rh.compose({baseName:"package-tracker-card-link-only",template:(t,e)=>Dl`
    <template
        card-fill-color=${t=>t.cardFillColor}
    >
        <div class="main-container" part="main-container">
            <slot
                name="main-image"
                ${Ul("mainImage")}
            ></slot>
            <div class="main-content" part="main-content">
            <slot name="main-title">
        <a
            href="${t=>{var e;return null===(e=t.data)||void 0===e?void 0:e.link}}"
            class="main-title"
            part="main-title"
        >
            ${t=>{var e,i;return null!==(i=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.mainTitle)&&void 0!==i?i:""}}
        </a>
    </slot>
                <slot name="progress-bar">
                    <${t.tagFor(lh)} class="progress-bar" part="progress-bar" min="0" max="100" value="${t=>{var e;return null===(e=t.data)||void 0===e?void 0:e.progressPercentage}}" aria-hidden="true">
                    </${t.tagFor(lh)}>
                </slot>
                ${Gl((t=>{var e;return null===(e=t.data)||void 0===e?void 0:e.subTitle}),Dl`
                        ${ph("sub-title","subTitle")}
                    `)}
                </slot>
            </div>
        </div>
    </template>
`,styles:(t,e)=>Ml`
        ${Qd(t,e)}
        ${Ll("inline-flex")} :host {
            --default-gutter: 12;
            --card-width-number: 336;
            border-radius: calc(${Bi} * 1px);
            padding: 16px 0 12px;
            --card-width: calc(var(--card-width-number) * 1px);
            height: auto;
            position: relative;
        }

        .main-container {
            display: flex;
            box-sizing: border-box;
            padding: 0 calc(var(--default-gutter) * 1px);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: center;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        ::slotted([slot="main-image"]) {
            margin-inline-end: calc(var(--default-gutter) * 1px);
            align-self: center;
            justify-self: center;
            --elevation: 4;
            ${Hu};
            border-radius: calc(${Bi} * 2px);
        }

        .main-title {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            text-overflow: ellipsis;
            max-width: 100%;
            margin-bottom: 3px;
            font-size: ${$i};
            line-height: ${Wi};
            font-weight: 600;
        }

        .main-title:${Au} {
            text-decoration: underline;
            outline: none;
        }

        .main-title,
        .main-title:hover,
        .main-title:active,
        .main-title:visited {
            color: ${ta};
            text-decoration: none;
            -webkit-line-clamp: 1;
        }
    

        .main-title::after {
            position: absolute;
            content: "";
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        .sub-title {
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
            color: ${ia};
            max-height: calc(var(--sub-title-max-lines, 2) * ${Ki});
            font-size: ${zi};
            line-height: ${Ki};
            -webkit-line-clamp: var(--sub-title-max-lines, 2);
        }


        .progress-bar {
            width: 100%;
            height: 3px;
            margin-bottom: 10px;
        }

        .progress-bar::part(determinate) {
            background: var(--progress-determinate-background, ${bo});
        }
    `.withBehaviors(Nc(Ml`
                .main-title,
                .sub-title {
                    color: ${_c.LinkText}!important;
                }

                .progress-bar::part(determinate) {
                    background: ${_c.FieldText};
                }
            `))});var gh;!function(t){t.grid="grid",t.carousel="carousel"}(gh||(gh={}));class mh extends Nu{constructor(){super(...arguments),this.noHoverGradient=!1}handleImageContentChange(){this.control.classList.toggle("has-image",this.image.assignedNodes().length>0)}}Ic([Kt],mh.prototype,"layout",void 0),Ic([Kt({attribute:"no-hover-gradient",mode:"boolean"})],mh.prototype,"noHoverGradient",void 0);const{create:vh}=Se;function yh(t,e,i){i*=1;const n=pi(t)||new Re(1,0,1,1),o=pi(e.toColorString())||new Re(1,0,1,1),a=o.r*(1-i)+n.r*i,r=o.g*(1-i)+n.g*i,s=o.b*(1-i)+n.b*i;return vi.create(a,r,s)}function Ch(t,e,i){const n=yh("#FFF",e,t);return yh(i,n,t)}const bh=vh({name:"accent-fill-muted-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(t,e)=>function(t,e,i,n,o,a,r,s,l,c){e.closestIndexOf(i),Math.max(s,l,c);const u=t.source.toColorString(),d=11+1*o,h=11+1*a,p=11+1*r;return{rest:Ch((11+1*n)/100,i,u),hover:Ch(d/100,i,u),active:Ch(h/100,i,u),focus:Ch(p/100,i,u)}}(Yn.getValueFor(t),Kn.getValueFor(t),e||no.getValueFor(t),0,9,-2,0,yn.getValueFor(t),Cn.getValueFor(t),bn.getValueFor(t))}),Sh=vh("accent-fill-muted-rest").withDefault((t=>bh.getValueFor(t).evaluate(t).rest)),xh=(vh("accent-fill-muted-hover").withDefault((t=>bh.getValueFor(t).evaluate(t).hover)),vh("accent-fill-muted-active").withDefault((t=>bh.getValueFor(t).evaluate(t).active)),vh("accent-fill-muted-focus").withDefault((t=>bh.getValueFor(t).evaluate(t).focus)),mh.compose({baseName:"shopping-cashback-card",template:(t,e)=>Dl`
    <a
        class="control"
        part="control"
        ${Ul("control")}
        download="${t=>t.download}"
        href="${t=>t.href}"
        hreflang="${t=>t.hreflang}"
        ping="${t=>t.ping}"
        referrerpolicy="${t=>t.referrerpolicy}"
        rel="${t=>t.rel}"
        target="${t=>t.target}"
        type="${t=>t.type}"
        aria-atomic="${t=>t.ariaAtomic}"
        aria-busy="${t=>t.ariaBusy}"
        aria-controls="${t=>t.ariaControls}"
        aria-current="${t=>t.ariaCurrent}"
        aria-describedBy="${t=>t.ariaDescribedby}"
        aria-details="${t=>t.ariaDetails}"
        aria-disabled="${t=>t.ariaDisabled}"
        aria-errormessage="${t=>t.ariaErrormessage}"
        aria-expanded="${t=>t.ariaExpanded}"
        aria-flowto="${t=>t.ariaFlowto}"
        aria-haspopup="${t=>t.ariaHaspopup}"
        aria-hidden="${t=>t.ariaHidden}"
        aria-invalid="${t=>t.ariaInvalid}"
        aria-keyshortcuts="${t=>t.ariaKeyshortcuts}"
        aria-label="${t=>t.ariaLabel}"
        aria-labelledby="${t=>t.ariaLabelledby}"
        aria-live="${t=>t.ariaLive}"
        aria-owns="${t=>t.ariaOwns}"
        aria-relevant="${t=>t.ariaRelevant}"
        aria-roledescription="${t=>t.ariaRoledescription}"
    >
        <slot
            name="image"
            ${Ul("image")}
            @slotchange="${t=>t.handleImageContentChange()}"
        ></slot>
        <div class="content" part="content">
            <slot> </slot>
        </div>
    </a>
`,styles:(t,e)=>Ml`
        ${Ll("block")} :host {
            outline: none;
            font-family: ${Vi};
            font-size: ${Yi};
            font-weight: 400;
            line-height: ${ji};
            min-width: calc(${Tu} * 1px);
            border-radius: calc((${Bi} * 1px) * 2);
            box-sizing: border-box;
            color: ${ta};
            cursor: pointer;
            background: ${no};
        }

        .control {
            display: grid;
            grid-template-rows: 42px minmax(16px, 1fr);
            grid-gap: 6px;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
            border: calc(${Ui} * 1px) solid ${$o};
            border-radius: inherit;
            padding: 8px 23px 24px;
            width: 100%;
            outline: none;
            text-decoration: none;
            color: inherit;
            cursor: inherit;
            font-family: inherit;
            overflow: hidden;
        }

        .control:${Au} {
            box-shadow: 0 0 0 calc(${Gi} * 1px) ${Xo};
        }

        .control:active {
            background-color: ${Io};
        }

        .control:hover {
            background: linear-gradient(265.08deg, rgba(36, 255, 0, 0.06) -6.71%, rgba(0, 210, 255, 0.06) 38.87%, rgba(255, 188, 125, 0.06) 93.88%);
        }

        :host([no-hover-gradient]) .control {
            background: transparent;
        }

        .control:not(.has-image) {
            display: flex;
            min-height: 97px;
            padding: 18px 23px;

        }

        :host([layout="carousel"]) .control {
            grid-template-rows: 56px 50px;
            padding: 0 12px 12px;
        }

        .content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            max-height: 50px;
        }

        .action-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 12px;
            width: 102px;
            height: 26px;
            overflow: hidden;
            background: ${Sh};
            border: 1px solid transparent;
            border-radius: calc(${Zi} * 1px);
            color: ${bo};
        }

        .action-message {
            font-weight: 600;
        }

        ::slotted(*) {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 16px;
            text-align: center;
        }

        ::slotted([slot="image"]) {
            align-self: center;
            justify-self: center;
            max-width: 100%;
            max-height: 100%;
        }
    `.withBehaviors(Nc(Ml`
            :host {
                forced-color-adjust: auto;
            }

            :host .control:hover,
            :host .control:${Au} {
                forced-color-adjust: none;
                box-shadow: inset 0 0 0 calc((${Ui} * 1px)) ${_c.ButtonText};
            }

            :host([href]),
            :host([href]) .control {
                color: ${_c.LinkText};
                border-color: ${_c.LinkText};
            }

            :host([href]) .control:hover,
            :host([href]) .control:${Au} {
                forced-color-adjust: none;
                box-shadow: inset 0 0 0 calc((${Ui} * 1px)) ${_c.LinkText};
            }

            ::slotted([slot="image"]),
            ::slotted([slot="start"]),
            ::slotted([slot="end"]) {
                color: ${_c.ButtonText};
                fill: currentcolor;
            }
        `)),shadowOptions:{delegatesFocus:!0}}));class Eh extends xu{constructor(){super(...arguments),this.deselectable=!0,this.isSelected=!1,this.nameId=zd("nameId"),this.descriptionId=zd("descriptionId"),this.onSelectedHandler=()=>{document.activeElement!==this&&this.focus(),this.deselectable||this.isSelected||(this.isSelected=!0,this.$emit("selected-changed")),this.deselectable&&(this.isSelected=!this.isSelected,this.$emit("selected-changed"))}}handleImageContentChange(){this.control.classList.toggle("has-image",this.image.assignedNodes().length>0)}onClickHandler(){this.onSelectedHandler()}}Ic([Kt],Eh.prototype,"name",void 0),Ic([Kt({attribute:"description"})],Eh.prototype,"description",void 0),Ic([Kt({attribute:"selected-aria-label"})],Eh.prototype,"selectedAriaLabel",void 0),Ic([Kt({attribute:"unselected-aria-label"})],Eh.prototype,"unselectedAriaLabel",void 0),Ic([Kt({mode:"boolean"})],Eh.prototype,"deselectable",void 0),Ic([Nt],Eh.prototype,"isSelected",void 0);const Ah=Ml`
    .indicator {
        right: calc(${Hi} * 2px);
    }
`,Th=Ml`
    .indicator {
        left: calc(${Hi} * 2px);
    }
`,Ih=Eh.compose({baseName:"shopping-coupon-printable",template:(t,e)=>Dl`
    <button
        class="control"
        part="control"
        ${Ul("control")}
        aria-live="polite"
        aria-label="${t=>t.isSelected?t.selectedAriaLabel:t.unselectedAriaLabel}"
        aria-describedby="${t=>t.nameId} ${t=>t.descriptionId}"
        @click="${t=>t.onClickHandler()}"
    >
        <div class="image-container" part="image-container">
            <slot
                name="image"
                ${Ul("image")}
                @slotchange="${t=>t.handleImageContentChange()}"
            >
                ${Fu}
            </slot>
        </div>
        <div class="content" part="content">
            <span id="${t=>t.nameId}" class="name" part="name">${t=>t.name} </span>
            <span id="${t=>t.descriptionId}" class="description" part="description"
                >${t=>t.description}
            </span>
        </div>
        <div
            class="${t=>t.isSelected?"indicator selected":"indicator"}"
            part="indicator"
        >
            <span class="checkbox">
                ${Gl((t=>t.isSelected),Dl`<span aria-hidden="true">
                        <svg
                            viewBox="0 0 16 16"
                            xmlns="http://www.w3.org/2000/svg"
                            part="checkbox-svg"
                        >
                            <path
                                d="M13.86 3.66a.5.5 0 01-.02.7l-7.93 7.48a.6.6 0 01-.84-.02L2.4 9.1a.5.5 0 01.72-.7l2.4 2.44 7.65-7.2a.5.5 0 01.7.02z"
                            />
                        </svg>
                    </span>`)}
            </span>
        </div>
    </button>
`,styles:(t,e)=>Ml`
    ${Ll("flex")} :host {
        box-sizing: border-box;
        border-radius: calc(${Bi} * 1px);
        font-family: ${Vi};
        font-size: ${zi};
        line-height: ${Ki};
        color: ${ta};
        outline: none;
    }

    :host(:active) {
        background-color: ${Io};
    }

    .control {
        position: relative;
        color: ${ta};
        font-family: ${Vi};
        background: transparent;
        box-sizing: border-box;
        border: calc(${Ui} * 1px) solid ${$o};
        border-radius: inherit;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: stretch;
        padding: 0 0 8px;
        width: 100%;
        min-height: 68px;
        cursor: pointer;
        outline: none;
        text-decoration: none;
        overflow: hidden;
    }

    .control:${Au} {
        border-color: ${Xo};
        box-shadow: 0 0 0 calc((${Gi} - ${Ui}) * 1px) ${Xo};
    }

    .image-container {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 138px;
        overflow: hidden;
    }

    .image-container svg {
        fill: ${Ao};
    }

    ::slotted([slot="image"]){
        width: 100%;
        object-fit:none;
    }

    .content {
        display: flex;
        flex-direction: column;
        padding: 0 12px;
        overflow: hidden;
    }

    .name {
        font-size: ${Xi};
        line-height: ${qi};
        margin-top: 8px;
        font-weight: 600;
        display: -webkit-box;
        overflow: hidden;
        overflow-wrap: break-word;
        text-align: start;
        -webkit-line-clamp: 1;
        -webkit-box-orient: vertical;
    }
    .name-container {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
    }

    .description {
        margin-top: 4px;
        color: ${ia};
        overflow: hidden;
        overflow-wrap: break-word;
        font-size: ${zi};
        line-height: ${Ki};
        text-align: start;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
    }

    .indicator {
        display: inline-flex;
        position: absolute;
        top: calc(${Hi} *2px);
        align-items: center;
        justify-content: center;
        font-size: ${zi};
        line-height: ${Qi};
        border-radius: 2px;
        pointer-events: none;
        border-radius: calc(${Zi} * 1px);
        background-color: ${ro};
    }

    .checkbox {
        box-sizing: border-box;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0;
        border: calc(${Ui} * 1px) solid ${zo};
        border-radius: inherit;
        background: ${ko};  
        outline: none;
        cursor: pointer;
        width: 26px;
        height: 26px;
    }

    .indicator.selected .checkbox {
        background: var(--checkbox-selected-background, linear-gradient(92.91deg, #15835B 31.47%, #3E8624 99.7%));
        border: none;
    }

    .checkbox svg {
        height: 14px;
        width: 14px;
        fill: ${Lo};
        display: block;
        pointer-events: none;  
    }

    .indicator-message {
        display: -webkit-box;
        overflow: hidden;
        overflow-wrap: break-word;
        text-align: start;
        -webkit-line-clamp: 1;
        -webkit-box-orient: vertical;
    }

    .indicator-message-selected, .selected-icon-container {
        display: flex;
        justify-content: center;
        align-content: center;
    }
`.withBehaviors(new eh(Ah,Th),Nc(Ml`
            .control,
            .name,
            .description,
            .control:hover {
                color: ${_c.ButtonText};
                border-color: ${_c.ButtonText}
            }

            .control:hover,
            .control:${Au} {
                forced-color-adjust: none;
                background: ${_c.ButtonFace};
                color: ${_c.ButtonText};
                border-color: ${_c.Highlight};
                box-shadow: 0 0 0 2px ${_c.Field}, 0 0 0 4px ${_c.FieldText};
            }

            .indicator.selected .checkbox {
                forced-color-adjust: none;
                background: ${_c.Highlight};
                border-color: ${_c.Highlight};
                color: ${_c.HighlightText};
            }

            .checkbox svg {
                fill: ${_c.HighlightText};
            }
        `)),shadowOptions:{delegatesFocus:!0}}),Dh=Object.freeze({definitionCallbackOnly:null,ignoreDuplicate:Symbol()}),kh=new Map,wh=new Map;let Rh=null;const Oh=Cs.createInterface((t=>t.cachedCallback((t=>(null===Rh&&(Rh=new Mh(null,t)),Rh))))),Ph=Object.freeze({tagFor:t=>wh.get(t),responsibleFor(t){const e=t.$$designSystem$$;if(e)return e;return Cs.findResponsibleContainer(t).get(Oh)},getOrCreate(t){if(!t)return null===Rh&&(Rh=Cs.getOrCreateDOMContainer().get(Oh)),Rh;const e=t.$$designSystem$$;if(e)return e;const i=Cs.getOrCreateDOMContainer(t);if(i.has(Oh,!1))return i.get(Oh);{const e=new Mh(t,i);return i.register(Zs.instance(Oh,e)),e}}});class Mh{constructor(t,e){this.owner=t,this.container=e,this.designTokensInitialized=!1,this.prefix="fast",this.shadowRootMode=void 0,this.disambiguate=()=>Dh.definitionCallbackOnly,null!==t&&(t.$$designSystem$$=this)}withPrefix(t){return this.prefix=t,this}withShadowRootMode(t){return this.shadowRootMode=t,this}withElementDisambiguation(t){return this.disambiguate=t,this}withDesignTokenRoot(t){return this.designTokenRoot=t,this}register(...t){const e=this.container,i=[],n=this.disambiguate,o=this.shadowRootMode,a={elementPrefix:this.prefix,tryDefineElement(t,a,r){const s=function(t,e,i){return"string"==typeof t?{name:t,type:e,callback:i}:t}(t,a,r),{name:l,callback:c,baseClass:u}=s;let{type:d}=s,h=l,p=kh.get(h),f=!0;for(;p;){const t=n(h,d,p);switch(t){case Dh.ignoreDuplicate:return;case Dh.definitionCallbackOnly:f=!1,p=void 0;break;default:h=t,p=kh.get(h)}}f&&((wh.has(d)||d===qs)&&(d=class extends d{}),kh.set(h,d),wh.set(d,h),u&&wh.set(u,h)),i.push(new Nh(e,h,d,o,c,f))}};this.designTokensInitialized||(this.designTokensInitialized=!0,null!==this.designTokenRoot&&Se.registerRoot(this.designTokenRoot)),e.registerWithContext(a,...t);for(const t of i)t.callback(t),t.willDefine&&null!==t.definition&&t.definition.define();return this}}class Nh{constructor(t,e,i,n,o,a){this.container=t,this.name=e,this.type=i,this.shadowRootMode=n,this.callback=o,this.willDefine=a,this.definition=null}definePresentation(t){js.define(this.name,t,this.container)}defineElement(t){this.definition=new qt(this.type,Object.assign(Object.assign({},t),{name:this.name}))}tagFor(t){return Ph.tagFor(t)}}const Lh={toView(t){var e;return null==t?null:null===(e=t)||void 0===e?void 0:e.toColorString()},fromView(t){if(null==t)return null;const e=di(t);return e?vi.create(e.r,e.g,e.b):null}},_h=Ml`
  :host {
    background-color: ${no};
    color: ${ta};
  }
`.withBehaviors(Nc(Ml`
      :host {
        background-color: ${_c.Canvas};
        box-shadow: 0 0 0 1px ${_c.CanvasText};
        color: ${_c.CanvasText};
      }
    `));function Fh(t){return(e,i)=>{e[i+"Changed"]=function(e,i){null!=i?t.setValueFor(this,i):t.deleteValueFor(this)}}}class Hh extends qs{constructor(){super(),this.noPaint=!1,Mt.getNotifier(this).subscribe({handleChange:this.noPaintChanged.bind(this)},"fillColor")}noPaintChanged(){this.noPaint||void 0===this.fillColor?this.$fastController.removeStyles(_h):this.$fastController.addStyles(_h)}accentBaseColorChanged(t,e){null!=e?Yn.setValueFor(this,xi.create(e)):Yn.deleteValueFor(this)}neutralBaseColorChanged(t,e){null!=e?Kn.setValueFor(this,xi.create(e)):Kn.deleteValueFor(this)}}Su([Kt({attribute:"no-paint",mode:"boolean"})],Hh.prototype,"noPaint",void 0),Su([Kt({attribute:"fill-color",converter:Lh}),Fh(no)],Hh.prototype,"fillColor",void 0),Su([Kt({attribute:"accent-base-color",converter:Lh,mode:"fromView"})],Hh.prototype,"accentBaseColor",void 0),Su([Kt({attribute:"neutral-base-color",converter:Lh,mode:"fromView"})],Hh.prototype,"neutralBaseColor",void 0),Su([Nt,Fh(Kn)],Hh.prototype,"neutralPalette",void 0),Su([Nt,Fh(Yn)],Hh.prototype,"accentPalette",void 0),Su([Kt({converter:Wt}),Fh(Fi)],Hh.prototype,"density",void 0),Su([Kt({attribute:"design-unit",converter:Wt}),Fh(Hi)],Hh.prototype,"designUnit",void 0),Su([Kt({attribute:"direction"}),Fh(Mi)],Hh.prototype,"direction",void 0),Su([Kt({attribute:"base-height-multiplier",converter:Wt}),Fh(Li)],Hh.prototype,"baseHeightMultiplier",void 0),Su([Kt({attribute:"base-horizontal-spacing-multiplier",converter:Wt}),Fh(_i)],Hh.prototype,"baseHorizontalSpacingMultiplier",void 0),Su([Kt({attribute:"control-corner-radius",converter:Wt}),Fh(Zi)],Hh.prototype,"controlCornerRadius",void 0),Su([Kt({attribute:"stroke-width",converter:Wt}),Fh(Ui)],Hh.prototype,"strokeWidth",void 0),Su([Kt({attribute:"focus-stroke-width",converter:Wt}),Fh(Gi)],Hh.prototype,"focusStrokeWidth",void 0),Su([Kt({attribute:"disabled-opacity",converter:Wt}),Fh(Ni)],Hh.prototype,"disabledOpacity",void 0),Su([Kt({attribute:"type-ramp-minus-2-font-size"}),Fh(Yi)],Hh.prototype,"typeRampMinus2FontSize",void 0),Su([Kt({attribute:"type-ramp-minus-2-line-height"}),Fh(ji)],Hh.prototype,"typeRampMinus2LineHeight",void 0),Su([Kt({attribute:"type-ramp-minus-1-font-size"}),Fh(zi)],Hh.prototype,"typeRampMinus1FontSize",void 0),Su([Kt({attribute:"type-ramp-minus-1-line-height"}),Fh(Ki)],Hh.prototype,"typeRampMinus1LineHeight",void 0),Su([Kt({attribute:"type-ramp-base-font-size"}),Fh($i)],Hh.prototype,"typeRampBaseFontSize",void 0),Su([Kt({attribute:"type-ramp-base-line-height"}),Fh(Wi)],Hh.prototype,"typeRampBaseLineHeight",void 0),Su([Kt({attribute:"type-ramp-plus-1-font-size"}),Fh(Xi)],Hh.prototype,"typeRampPlus1FontSize",void 0),Su([Kt({attribute:"type-ramp-plus-1-line-height"}),Fh(qi)],Hh.prototype,"typeRampPlus1LineHeight",void 0),Su([Kt({attribute:"type-ramp-plus-2-font-size"}),Fh(Ji)],Hh.prototype,"typeRampPlus2FontSize",void 0),Su([Kt({attribute:"type-ramp-plus-2-line-height"}),Fh(Qi)],Hh.prototype,"typeRampPlus2LineHeight",void 0),Su([Kt({attribute:"type-ramp-plus-3-font-size"}),Fh(tn)],Hh.prototype,"typeRampPlus3FontSize",void 0),Su([Kt({attribute:"type-ramp-plus-3-line-height"}),Fh(en)],Hh.prototype,"typeRampPlus3LineHeight",void 0),Su([Kt({attribute:"type-ramp-plus-4-font-size"}),Fh(nn)],Hh.prototype,"typeRampPlus4FontSize",void 0),Su([Kt({attribute:"type-ramp-plus-4-line-height"}),Fh(on)],Hh.prototype,"typeRampPlus4LineHeight",void 0),Su([Kt({attribute:"type-ramp-plus-5-font-size"}),Fh(an)],Hh.prototype,"typeRampPlus5FontSize",void 0),Su([Kt({attribute:"type-ramp-plus-5-line-height"}),Fh(rn)],Hh.prototype,"typeRampPlus5LineHeight",void 0),Su([Kt({attribute:"type-ramp-plus-6-font-size"}),Fh(sn)],Hh.prototype,"typeRampPlus6FontSize",void 0),Su([Kt({attribute:"type-ramp-plus-6-line-height"}),Fh(ln)],Hh.prototype,"typeRampPlus6LineHeight",void 0),Su([Kt({attribute:"accent-fill-rest-delta",converter:Wt}),Fh(un)],Hh.prototype,"accentFillRestDelta",void 0),Su([Kt({attribute:"accent-fill-hover-delta",converter:Wt}),Fh(dn)],Hh.prototype,"accentFillHoverDelta",void 0),Su([Kt({attribute:"accent-fill-active-delta",converter:Wt}),Fh(hn)],Hh.prototype,"accentFillActiveDelta",void 0),Su([Kt({attribute:"accent-fill-focus-delta",converter:Wt}),Fh(pn)],Hh.prototype,"accentFillFocusDelta",void 0),Su([Kt({attribute:"accent-foreground-rest-delta",converter:Wt}),Fh(fn)],Hh.prototype,"accentForegroundRestDelta",void 0),Su([Kt({attribute:"accent-foreground-hover-delta",converter:Wt}),Fh(gn)],Hh.prototype,"accentForegroundHoverDelta",void 0),Su([Kt({attribute:"accent-foreground-active-delta",converter:Wt}),Fh(mn)],Hh.prototype,"accentForegroundActiveDelta",void 0),Su([Kt({attribute:"accent-foreground-focus-delta",converter:Wt}),Fh(vn)],Hh.prototype,"accentForegroundFocusDelta",void 0),Su([Kt({attribute:"neutral-fill-rest-delta",converter:Wt}),Fh(yn)],Hh.prototype,"neutralFillRestDelta",void 0),Su([Kt({attribute:"neutral-fill-hover-delta",converter:Wt}),Fh(Cn)],Hh.prototype,"neutralFillHoverDelta",void 0),Su([Kt({attribute:"neutral-fill-active-delta",converter:Wt}),Fh(bn)],Hh.prototype,"neutralFillActiveDelta",void 0),Su([Kt({attribute:"neutral-fill-focus-delta",converter:Wt}),Fh(Sn)],Hh.prototype,"neutralFillFocusDelta",void 0),Su([Kt({attribute:"neutral-fill-input-rest-delta",converter:Wt}),Fh(xn)],Hh.prototype,"neutralFillInputRestDelta",void 0),Su([Kt({attribute:"neutral-fill-input-hover-delta",converter:Wt}),Fh(En)],Hh.prototype,"neutralFillInputHoverDelta",void 0),Su([Kt({attribute:"neutral-fill-input-active-delta",converter:Wt}),Fh(An)],Hh.prototype,"neutralFillInputActiveDelta",void 0),Su([Kt({attribute:"neutral-fill-input-focus-delta",converter:Wt}),Fh(Tn)],Hh.prototype,"neutralFillInputFocusDelta",void 0),Su([Kt({attribute:"neutral-fill-layer-rest-delta",converter:Wt}),Fh(Rn)],Hh.prototype,"neutralFillLayerRestDelta",void 0),Su([Kt({attribute:"neutral-fill-stealth-rest-delta",converter:Wt}),Fh(On)],Hh.prototype,"neutralFillStealthRestDelta",void 0),Su([Kt({attribute:"neutral-fill-stealth-hover-delta",converter:Wt}),Fh(Pn)],Hh.prototype,"neutralFillStealthHoverDelta",void 0),Su([Kt({attribute:"neutral-fill-stealth-active-delta",converter:Wt}),Fh(Mn)],Hh.prototype,"neutralFillStealthActiveDelta",void 0),Su([Kt({attribute:"neutral-fill-stealth-focus-delta",converter:Wt}),Fh(Nn)],Hh.prototype,"neutralFillStealthFocusDelta",void 0),Su([Kt({attribute:"neutral-fill-strong-hover-delta",converter:Wt}),Fh(_n)],Hh.prototype,"neutralFillStrongHoverDelta",void 0),Su([Kt({attribute:"neutral-fill-strong-active-delta",converter:Wt}),Fh(Fn)],Hh.prototype,"neutralFillStrongActiveDelta",void 0),Su([Kt({attribute:"neutral-fill-strong-focus-delta",converter:Wt}),Fh(Hn)],Hh.prototype,"neutralFillStrongFocusDelta",void 0),Su([Kt({attribute:"base-layer-luminance",converter:Wt}),Fh(cn)],Hh.prototype,"baseLayerLuminance",void 0),Su([Kt({attribute:"neutral-stroke-divider-rest-delta",converter:Wt}),Fh(Vn)],Hh.prototype,"neutralStrokeDividerRestDelta",void 0),Su([Kt({attribute:"neutral-stroke-rest-delta",converter:Wt}),Fh(Zn)],Hh.prototype,"neutralStrokeRestDelta",void 0),Su([Kt({attribute:"neutral-stroke-hover-delta",converter:Wt}),Fh(Bn)],Hh.prototype,"neutralStrokeHoverDelta",void 0),Su([Kt({attribute:"neutral-stroke-active-delta",converter:Wt}),Fh(Un)],Hh.prototype,"neutralStrokeActiveDelta",void 0),Su([Kt({attribute:"neutral-stroke-focus-delta",converter:Wt}),Fh(Gn)],Hh.prototype,"neutralStrokeFocusDelta",void 0);const Zh=Hh.compose({baseName:"design-system-provider",template:Dl` <slot></slot> `,styles:Ml`
    ${Ll("block")}
  `});function Bh(t,e,i){return i<t?e:i>e?t:i}function Uh(t,e,i=0){return[e,i]=[e,i].sort(((t,e)=>t-e)),e<=t&&t<i}class Gh extends qs{constructor(){super(...arguments),this.headinglevel=2,this.expanded=!1,this.clickHandler=t=>{this.expanded=!this.expanded,this.change()},this.change=()=>{this.$emit("change")}}}var Vh;Et([Kt({attribute:"heading-level",mode:"fromView",converter:Wt})],Gh.prototype,"headinglevel",void 0),Et([Kt({mode:"boolean"})],Gh.prototype,"expanded",void 0),Et([Kt],Gh.prototype,"id",void 0),Kl(Gh,$l),function(t){t.single="single",t.multi="multi"}(Vh||(Vh={}));class $h extends qs{constructor(){super(...arguments),this.expandmode=Vh.multi,this.activeItemIndex=0,this.change=()=>{this.$emit("change")},this.setItems=()=>{var t;if(0!==this.accordionItems.length&&(this.accordionIds=this.getItemIds(),this.accordionItems.forEach(((t,e)=>{t instanceof Gh&&(t.addEventListener("change",this.activeItemChange),this.isSingleExpandMode()&&(this.activeItemIndex!==e?t.expanded=!1:t.expanded=!0));const i=this.accordionIds[e];t.setAttribute("id","string"!=typeof i?`accordion-${e+1}`:i),this.activeid=this.accordionIds[this.activeItemIndex],t.addEventListener("keydown",this.handleItemKeyDown),t.addEventListener("focus",this.handleItemFocus)})),this.isSingleExpandMode())){(null!==(t=this.findExpandedItem())&&void 0!==t?t:this.accordionItems[0]).setAttribute("aria-disabled","true")}},this.removeItemListeners=t=>{t.forEach(((t,e)=>{t.removeEventListener("change",this.activeItemChange),t.removeEventListener("keydown",this.handleItemKeyDown),t.removeEventListener("focus",this.handleItemFocus)}))},this.activeItemChange=t=>{const e=t.target;this.activeid=e.getAttribute("id"),this.isSingleExpandMode()&&(this.resetItems(),e.expanded=!0,e.setAttribute("aria-disabled","true"),this.accordionItems.forEach((t=>{t.hasAttribute("disabled")||t.id===this.activeid||t.removeAttribute("aria-disabled")}))),this.activeItemIndex=Array.from(this.accordionItems).indexOf(e),this.change()},this.handleItemKeyDown=t=>{if(t.target===t.currentTarget)switch(this.accordionIds=this.getItemIds(),t.key){case Ql:t.preventDefault(),this.adjust(-1);break;case Xl:t.preventDefault(),this.adjust(1);break;case ic:this.activeItemIndex=0,this.focusItem();break;case nc:this.activeItemIndex=this.accordionItems.length-1,this.focusItem()}},this.handleItemFocus=t=>{if(t.target===t.currentTarget){const e=t.target,i=this.activeItemIndex=Array.from(this.accordionItems).indexOf(e);this.activeItemIndex!==i&&-1!==i&&(this.activeItemIndex=i,this.activeid=this.accordionIds[this.activeItemIndex])}}}accordionItemsChanged(t,e){this.$fastController.isConnected&&(this.removeItemListeners(t),this.setItems())}findExpandedItem(){for(let t=0;t<this.accordionItems.length;t++)if("true"===this.accordionItems[t].getAttribute("expanded"))return this.accordionItems[t];return null}resetItems(){this.accordionItems.forEach(((t,e)=>{t.expanded=!1}))}getItemIds(){return this.accordionItems.map((t=>t.getAttribute("id")))}isSingleExpandMode(){return this.expandmode===Vh.single}adjust(t){this.activeItemIndex=Bh(0,this.accordionItems.length-1,this.activeItemIndex+t),this.focusItem()}focusItem(){const t=this.accordionItems[this.activeItemIndex];t instanceof Gh&&t.expandbutton.focus()}}Et([Kt({attribute:"expand-mode"})],$h.prototype,"expandmode",void 0),Et([Nt],$h.prototype,"accordionItems",void 0);const Wh=$h.compose({baseName:"accordion",template:(t,e)=>Dl`
    <template>
        <slot ${Ol({property:"accordionItems",filter:kl()})}></slot>
        <slot name="item" part="item" ${Ol("accordionItems")}></slot>
    </template>
`,styles:(t,e)=>Ml`
    ${Ll("flex")} :host {
      box-sizing: border-box;
      flex-direction: column;
      font-family: ${Vi};
      font-size: ${zi};
      line-height: ${Ki};
      color: ${ta};
      border-top: calc(${Ui} * 1px) solid ${$o};
    }
  `}),zh=Gh.compose({baseName:"accordion-item",template:(t,e)=>Dl`
    <template class="${t=>t.expanded?"expanded":""}">
        <div
            class="heading"
            part="heading"
            role="heading"
            aria-level="${t=>t.headinglevel}"
        >
            <button
                class="button"
                part="button"
                ${Ul("expandbutton")}
                aria-expanded="${t=>t.expanded}"
                aria-controls="${t=>t.id}-panel"
                id="${t=>t.id}"
                @click="${(t,e)=>t.clickHandler(e.event)}"
            >
                <span class="heading-content" part="heading-content">
                    <slot name="heading"></slot>
                </span>
            </button>
            ${zl(0,e)}
            ${Wl(0,e)}
            <span class="icon" part="icon" aria-hidden="true">
                <slot name="expanded-icon" part="expanded-icon">
                    ${e.expandedIcon||""}
                </slot>
                <slot name="collapsed-icon" part="collapsed-icon">
                    ${e.collapsedIcon||""}
                </slot>
            <span>
        </div>
        <div
            class="region"
            part="region"
            id="${t=>t.id}-panel"
            role="region"
            aria-labelledby="${t=>t.id}"
        >
            <slot></slot>
        </div>
    </template>
`,styles:(t,e)=>Ml`
    ${Ll("flex")} :host {
      box-sizing: border-box;
      font-family: ${Vi};
      flex-direction: column;
      font-size: ${zi};
      line-height: ${Ki};
      border-bottom: calc(${Ui} * 1px) solid ${$o};
    }

    .region {
      display: none;
      padding: calc((6 + (${Hi} * 2 * ${Fi})) * 1px);
    }

    .heading {
      display: grid;
      position: relative;
      grid-template-columns: auto 1fr auto calc(${Tu} * 1px);
      z-index: 2;
    }

    .button {
      appearance: none;
      border: none;
      background: none;
      grid-column: 2;
      grid-row: 1;
      outline: none;
      padding: 0 calc((6 + (${Hi} * 2 * ${Fi})) * 1px);
      text-align: left;
      height: calc(${Tu} * 1px);
      color: ${ta};
      cursor: pointer;
      font-family: inherit;
    }

    .button:hover,
    .button:active {
      color: ${ta};
    }

    .button::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 1;
      cursor: pointer;
    }

    .button:${Au}::before {
      outline: none;
      border: calc(${Ui} * 1px) solid ${Xo};
      box-shadow: 0 0 0 calc((${Gi} - ${Ui}) * 1px) ${Xo};
    }

    :host(.expanded) .region {
      display: block;
    }

    .icon {
      display: flex;
      align-items: center;
      justify-content: center;
      grid-column: 4;
      z-index: 2;
      pointer-events: none;
      fill: ${ro};
    }

    slot[name='collapsed-icon'] {
      display: flex;
    }

    :host(.expanded) slot[name='collapsed-icon'] {
      display: none;
    }

    slot[name='expanded-icon'] {
      display: none;
    }

    :host(.expanded) slot[name='expanded-icon'] {
      display: flex;
    }

    .start {
      display: flex;
      align-items: center;
      padding-inline-start: calc(${Hi} * 1px);
      justify-content: center;
      grid-column: 1;
      z-index: 2;
    }

    .end {
      display: flex;
      align-items: center;
      justify-content: center;
      grid-column: 3;
      z-index: 2;
    }
  `.withBehaviors(Nc(Ml`
        .button:${Au}::before {
          border-color: ${_c.Highlight};
          box-shadow: 0 0 0 calc((${Gi} - ${Ui}) * 1px) ${_c.Highlight};
        }
        .icon {
          fill: ${_c.ButtonText};
        }
      `)),collapsedIcon:'\n    <svg\n        width="20"\n        height="20"\n        viewBox="0 0 20 20"\n        xmlns="http://www.w3.org/2000/svg"\n    >\n        <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M16.22 3H3.78a.78.78 0 00-.78.78v12.44c0 .43.35.78.78.78h12.44c.43 0 .78-.35.78-.78V3.78a.78.78 0 00-.78-.78zM3.78 2h12.44C17.2 2 18 2.8 18 3.78v12.44c0 .98-.8 1.78-1.78 1.78H3.78C2.8 18 2 17.2 2 16.22V3.78C2 2.8 2.8 2 3.78 2zM11 9h3v2h-3v3H9v-3H6V9h3V6h2v3z"\n        />\n    </svg>\n  ',expandedIcon:'\n    <svg\n        width="20"\n        height="20"\n        viewBox="0 0 20 20"\n        xmlns="http://www.w3.org/2000/svg"\n    >\n        <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M3.78 3h12.44c.43 0 .78.35.78.78v12.44c0 .43-.35.78-.78.78H3.78a.78.78 0 01-.78-.78V3.78c0-.43.35-.78.78-.78zm12.44-1H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.78-.8 1.78-1.78V3.78C18 2.8 17.2 2 16.22 2zM14 9H6v2h8V9z"\n        />\n    </svg>\n  '}),Kh="not-allowed";class Yh extends fc{appearanceChanged(t,e){t!==e&&(this.classList.add(e),this.classList.remove(t))}connectedCallback(){super.connectedCallback(),this.appearance||(this.appearance="neutral")}defaultSlottedContentChanged(){const t=this.defaultSlottedContent.filter((t=>t.nodeType===Node.ELEMENT_NODE));1===t.length&&t[0]instanceof SVGElement?this.control.classList.add("icon-only"):this.control.classList.remove("icon-only")}}Su([Kt],Yh.prototype,"appearance",void 0);const jh=Yh.compose({baseName:"button",baseClass:fc,template:(t,e)=>Dl`
    <button
        class="control"
        part="control"
        ?autofocus="${t=>t.autofocus}"
        ?disabled="${t=>t.disabled}"
        form="${t=>t.formId}"
        formaction="${t=>t.formaction}"
        formenctype="${t=>t.formenctype}"
        formmethod="${t=>t.formmethod}"
        formnovalidate="${t=>t.formnovalidate}"
        formtarget="${t=>t.formtarget}"
        name="${t=>t.name}"
        type="${t=>t.type}"
        value="${t=>t.value}"
        aria-atomic="${t=>t.ariaAtomic}"
        aria-busy="${t=>t.ariaBusy}"
        aria-controls="${t=>t.ariaControls}"
        aria-current="${t=>t.ariaCurrent}"
        aria-describedby="${t=>t.ariaDescribedby}"
        aria-details="${t=>t.ariaDetails}"
        aria-disabled="${t=>t.ariaDisabled}"
        aria-errormessage="${t=>t.ariaErrormessage}"
        aria-expanded="${t=>t.ariaExpanded}"
        aria-flowto="${t=>t.ariaFlowto}"
        aria-haspopup="${t=>t.ariaHaspopup}"
        aria-hidden="${t=>t.ariaHidden}"
        aria-invalid="${t=>t.ariaInvalid}"
        aria-keyshortcuts="${t=>t.ariaKeyshortcuts}"
        aria-label="${t=>t.ariaLabel}"
        aria-labelledby="${t=>t.ariaLabelledby}"
        aria-live="${t=>t.ariaLive}"
        aria-owns="${t=>t.ariaOwns}"
        aria-pressed="${t=>t.ariaPressed}"
        aria-relevant="${t=>t.ariaRelevant}"
        aria-roledescription="${t=>t.ariaRoledescription}"
        ${Ul("control")}
    >
        ${zl(0,e)}
        <span class="content" part="content">
            <slot ${Ol("defaultSlottedContent")}></slot>
        </span>
        ${Wl(0,e)}
    </button>
`,styles:(t,e)=>Ml`
    :host([disabled]),
    :host([disabled]:hover),
    :host([disabled]:active) {
      opacity: ${Ni};
      background-color: ${Ao};
      cursor: ${Kh};
    }

    ${Iu()}
  `.withBehaviors(Nc(Ml`
        :host([disabled]),
        :host([disabled]:hover),
        :host([disabled]:active),
        :host([disabled]) .control,
        :host([disabled]) .control:hover,
        :host([appearance='neutral'][disabled]:hover) .control {
          forced-color-adjust: none;
          background-color: ${_c.ButtonFace};
          border-color: ${_c.GrayText};
          color: ${_c.GrayText};
          opacity: 1;
        }
      `),Mu("accent",Ml`
        :host([appearance='accent'][disabled]),
        :host([appearance='accent'][disabled]:hover),
        :host([appearance='accent'][disabled]:active) {
          background: ${ro};
        }

        ${Du}
      `.withBehaviors(Nc(Ml`
            :host([appearance='accent'][disabled]) .control,
            :host([appearance='accent'][disabled]) .control:hover {
              background: ${_c.ButtonFace};
              border-color: ${_c.GrayText};
              color: ${_c.GrayText};
            }
          `))),Mu("lightweight",Ml`
        :host([appearance='lightweight'][disabled]:hover),
        :host([appearance='lightweight'][disabled]:active) {
          background-color: transparent;
          color: ${bo};
        }

        :host([appearance='lightweight'][disabled]) .content::before,
        :host([appearance='lightweight'][disabled]:hover) .content::before,
        :host([appearance='lightweight'][disabled]:active) .content::before {
          background: transparent;
        }

        ${wu}
      `.withBehaviors(Nc(Ml`
            :host([appearance='lightweight'][disabled]) .control {
              forced-color-adjust: none;
              color: ${_c.GrayText};
            }

            :host([appearance='lightweight'][disabled]) .control:hover .content::before {
              background: none;
            }
          `))),Mu("outline",Ml`
        :host([appearance='outline'][disabled]:hover),
        :host([appearance='outline'][disabled]:active) {
          background: transparent;
          border-color: ${Bo};
        }

        ${Ru}
      `.withBehaviors(Nc(Ml`
            :host([appearance='outline'][disabled]) .control {
              border-color: ${_c.GrayText};
            }
          `))),Mu("stealth",Ml`
        :host([appearance='stealth'][disabled]),
        :host([appearance='stealth'][disabled]:hover),
        :host([appearance='stealth'][disabled]:active) {
          background: ${Lo};
        }

        ${Ou}
      `.withBehaviors(Nc(Ml`
            :host([appearance='stealth'][disabled]),
            :host([appearance='stealth'][disabled]:hover) {
              background: ${_c.ButtonFace};
            }

            :host([appearance='stealth'][disabled]) .control {
              background: ${_c.ButtonFace};
              border-color: transparent;
              color: ${_c.GrayText};
            }
          `)))),shadowOptions:{delegatesFocus:!0}}),Xh=Sc.compose({baseName:"menu",template:(t,e)=>Dl`
    <template
        slot="${t=>t.slot?t.slot:t.isNestedMenu()?"submenu":void 0}"
        role="menu"
        @keydown="${(t,e)=>t.handleMenuKeyDown(e.event)}"
        @focusout="${(t,e)=>t.handleFocusOut(e.event)}"
    >
        <slot ${Ol("items")}></slot>
    </template>
`,styles:(t,e)=>Ml`
      ${Ll("block")} :host {
        --elevation: 11;
        background: ${qn};
        border: calc(${Ui} * 1px) solid transparent;
        border-radius: ${Bi};
        ${Hu}
        margin: 0;
        border-radius: calc(${Zi} * 1px);
        padding: calc(${Hi} * 1px) 0;
        max-width: 368px;
        min-width: 64px;
      }

      :host([slot='submenu']) {
        width: max-content;
        margin: 0 calc(${Hi} * 1px);
      }

      ::slotted(hr) {
        box-sizing: content-box;
        height: 0;
        margin: 0;
        border: none;
        border-top: calc(${Ui} * 1px) solid ${$o};
      }
    `}),qh=bc.compose({baseName:"menu-item",template:(t,e)=>Dl`
    <template
        role="${t=>t.role}"
        aria-haspopup="${t=>t.hasSubmenu?"menu":void 0}"
        aria-checked="${t=>t.role!==yc.menuitem?t.checked:void 0}"
        aria-disabled="${t=>t.disabled}"
        aria-expanded="${t=>t.expanded}"
        @keydown="${(t,e)=>t.handleMenuItemKeyDown(e.event)}"
        @click="${(t,e)=>t.handleMenuItemClick(e.event)}"
        @mouseover="${(t,e)=>t.handleMouseOver(e.event)}"
        @mouseout="${(t,e)=>t.handleMouseOut(e.event)}"
        class="${t=>t.disabled?"disabled":""} ${t=>t.expanded?"expanded":""} ${t=>`indent-${t.startColumnCount}`}"
    >
            ${Gl((t=>t.role===yc.menuitemcheckbox),Dl`
                    <div part="input-container" class="input-container">
                        <span part="checkbox" class="checkbox">
                            <slot name="checkbox-indicator">
                                ${e.checkboxIndicator||""}
                            </slot>
                        </span>
                    </div>
                `)}
            ${Gl((t=>t.role===yc.menuitemradio),Dl`
                    <div part="input-container" class="input-container">
                        <span part="radio" class="radio">
                            <slot name="radio-indicator">
                                ${e.radioIndicator||""}
                            </slot>
                        </span>
                    </div>
                `)}
        </div>
        ${zl(0,e)}
        <span class="content" part="content">
            <slot></slot>
        </span>
        ${Wl(0,e)}
        ${Gl((t=>t.hasSubmenu),Dl`
                <div
                    part="expand-collapse-glyph-container"
                    class="expand-collapse-glyph-container"
                >
                    <span part="expand-collapse" class="expand-collapse">
                        <slot name="expand-collapse-indicator">
                            ${e.expandCollapseGlyph||""}
                        </slot>
                    </span>
                </div>
            `)}
        ${Gl((t=>t.expanded),Dl`
                <${t.tagFor(Zl)}
                    :anchorElement="${t=>t}"
                    vertical-positioning-mode="dynamic"
                    vertical-default-position="bottom"
                    vertical-inset="true"
                    horizontal-positioning-mode="dynamic"
                    horizontal-default-position="end"
                    class="submenu-region"
                    dir="${t=>t.currentDirection}"
                    @loaded="${t=>t.submenuLoaded()}"
                    ${Ul("submenuRegion")}
                    part="submenu-region"
                >
                    <slot name="submenu"></slot>
                </${t.tagFor(Zl)}>
            `)}
    </template>
`,styles:(t,e)=>Ml`
    ${Ll("grid")} :host {
      contain: layout;
      overflow: visible;
      font-family: ${Vi};
      outline: none;
      box-sizing: border-box;
      height: calc(${Tu} * 1px);
      grid-template-columns: minmax(42px, auto) 1fr minmax(42px, auto);
      grid-template-rows: auto;
      justify-items: center;
      align-items: center;
      padding: 0;
      margin: 0 calc(${Hi} * 1px);
      white-space: nowrap;
      color: ${ta};
      fill: currentcolor;
      cursor: pointer;
      font-size: ${$i};
      line-height: ${Wi};
      border-radius: calc(${Zi} * 1px);
      border: calc(${Ui} * 1px) solid transparent;
    }

    :host(.indent-0) {
      grid-template-columns: auto 1fr minmax(42px, auto);
    }

    :host(.indent-0) .content {
      grid-column: 1;
      grid-row: 1;
      margin-inline-start: 10px;
    }

    :host(.indent-2) {
      grid-template-columns: minmax(42px, auto) minmax(42px, auto) 1fr minmax(42px, auto) minmax(42px, auto);
    }

    :host(.indent-2) .content {
      grid-column: 3;
      grid-row: 1;
      margin-inline-start: 10px;
    }

    :host(.indent-2) .expand-collapse-glyph-container {
      grid-column: 5;
      grid-row: 1;
    }

    :host(.indent-2) .start {
      grid-column: 2;
    }

    :host(.indent-2) .end {
      grid-column: 4;
    }

    :host(:${Au}) {
      border: calc(${Ui} * 1px) solid ${Xo};
      box-shadow: 0 0 0 calc((${Gi} - ${Ui}) * 1px) ${Xo};
    }

    :host(:hover) {
      background: ${_o};
    }

    :host([aria-checked='true']),
    :host(:active),
    :host(.expanded) {
      background: ${Fo};
      color: ${ta};
    }

    :host([disabled]) {
      cursor: ${Kh};
      opacity: ${Ni};
    }

    :host([disabled]:hover) .start,
    :host([disabled]:hover) .end,
    :host([disabled]:hover)::slotted(svg) {
      fill: currentcolor;
    }

    .content {
      grid-column-start: 2;
      justify-self: start;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .start,
    .end {
      display: flex;
      justify-content: center;
    }

    ::slotted(svg) {
      ${""} width: 16px;
      height: 16px;
      display: flex;
    }

    :host(:hover) .start,
    :host(:hover) .end,
    :host(:hover)::slotted(svg),
    :host(:active) .start,
    :host(:active) .end,
    :host(:active)::slotted(svg) {
      fill: ${ta};
    }

    :host(.indent-1[aria-haspopup='menu']),
    :host(.indent-1[role='menuitemcheckbox']),
    :host(.indent-1[role='menuitemradio']) {
      display: grid;
      grid-template-columns: minmax(42px, auto) auto 1fr minmax(42px, auto) minmax(42px, auto);
      align-items: center;
      min-height: 32px;
    }

    :host(.indent-2:not([aria-haspopup='menu'])) .end {
      grid-column: 5;
    }

    :host .input-container,
    :host .expand-collapse-glyph-container {
      display: none;
    }

    :host([aria-haspopup='menu']) .expand-collapse-glyph-container,
    :host([role='menuitemcheckbox']) .input-container,
    :host([role='menuitemradio']) .input-container {
      display: grid;
      margin-inline-end: 10px;
    }

    :host([aria-haspopup='menu']) .content,
    :host([role='menuitemcheckbox']) .content,
    :host([role='menuitemradio']) .content {
      grid-column-start: 3;
    }

    :host([aria-haspopup='menu']) .end,
    :host([role='menuitemcheckbox']) .end,
    :host([role='menuitemradio']) .end {
      grid-column-start: 4;
    }

    :host .expand-collapse,
    :host .checkbox,
    :host .radio {
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 20px;
      height: 20px;
      box-sizing: border-box;
      outline: none;
      margin-inline-start: 10px;
    }

    :host .checkbox {
      border-radius: calc(${Zi} * 1px);
    }

    :host .radio {
      border-radius: 999px;
    }

    :host .checkbox-indicator,
    :host .radio-indicator,
    ::slotted([slot='checkbox-indicator']),
    ::slotted([slot='radio-indicator']) {
      display: none;
    }

    ::slotted([slot='end']:not(svg)) {
      margin-inline-end: 10px;
      color: ${ia};
    }

    :host([aria-checked='true']) .checkbox-indicator,
    :host([aria-checked='true']) ::slotted([slot='checkbox-indicator']) {
      width: 100%;
      height: 100%;
      display: block;
      fill: ${ta};
      pointer-events: none;
    }

    :host([aria-checked='true']) .radio-indicator {
      display: block;
      pointer-events: none;
    }

    :host([aria-checked='true']) ::slotted([slot='radio-indicator']) {
      display: block;
      pointer-events: none;
    }
  `.withBehaviors(Nc(Ml`
        :host {
          forced-color-adjust: none;
          border-color: transparent;
          color: ${_c.ButtonText};
          fill: ${_c.ButtonText};
        }
        :host(:hover) {
          background: ${_c.Highlight};
          color: ${_c.HighlightText};
        }
        :host(:hover) .start,
        :host(:hover) .end,
        :host(:hover)::slotted(svg),
        :host(:active) .start,
        :host(:active) .end,
        :host(:active)::slotted(svg) {
          fill: ${_c.HighlightText};
        }

        :host(.expanded) {
          background: ${_c.Highlight};
          border-color: ${_c.Highlight};
          color: ${_c.HighlightText};
        }

        :host(:${Au}) {
          background: ${_c.Highlight};
          border-color: ${_c.ButtonText};
          box-shadow: 0 0 0 calc(${Ui} * 1px) inset ${_c.HighlightText};
          color: ${_c.HighlightText};
          fill: currentcolor;
        }

        :host([disabled]),
        :host([disabled]:hover),
        :host([disabled]:hover) .start,
        :host([disabled]:hover) .end,
        :host([disabled]:hover)::slotted(svg) {
          background: ${_c.Canvas};
          color: ${_c.GrayText};
          fill: currentcolor;
          opacity: 1;
        }

        :host .expanded-toggle,
        :host .checkbox,
        :host .radio {
          border-color: ${_c.ButtonText};
          background: ${_c.HighlightText};
        }

        :host([checked='true']) .checkbox,
        :host([checked='true']) .radio {
          background: ${_c.HighlightText};
          border-color: ${_c.HighlightText};
        }

        :host(:hover) .expanded-toggle,
            :host(:hover) .checkbox,
            :host(:hover) .radio,
            :host(:${Au}) .expanded-toggle,
            :host(:${Au}) .checkbox,
            :host(:${Au}) .radio,
            :host([checked="true"]:hover) .checkbox,
            :host([checked="true"]:hover) .radio,
            :host([checked="true"]:${Au}) .checkbox,
            :host([checked="true"]:${Au}) .radio {
          border-color: ${_c.HighlightText};
        }

        :host([aria-checked='true']) {
          background: ${_c.Highlight};
          color: ${_c.HighlightText};
        }

        :host([aria-checked='true']) .checkbox-indicator,
        :host([aria-checked='true']) ::slotted([slot='checkbox-indicator']),
        :host([aria-checked='true']) ::slotted([slot='radio-indicator']) {
          fill: ${_c.Highlight};
        }

        :host([aria-checked='true']) .radio-indicator {
          background: ${_c.Highlight};
        }
      `)),checkboxIndicator:'\n    <svg\n        aria-hidden="true"\n        part="checkbox-indicator"\n        class="checkbox-indicator"\n        viewBox="0 0 20 20"\n        xmlns="http://www.w3.org/2000/svg"\n    >\n        <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M8.143 12.6697L15.235 4.5L16.8 5.90363L8.23812 15.7667L3.80005 11.2556L5.27591 9.7555L8.143 12.6697Z"\n        />\n    </svg>\n  ',expandCollapseGlyph:'\n    <svg\n        viewBox="0 0 16 16"\n        xmlns="http://www.w3.org/2000/svg"\n        class="expand-collapse-glyph"\n        part="expand-collapse-glyph"\n    >\n        <path\n            d="M5.00001 12.3263C5.00124 12.5147 5.05566 12.699 5.15699 12.8578C5.25831 13.0167 5.40243 13.1437 5.57273 13.2242C5.74304 13.3047 5.9326 13.3354 6.11959 13.3128C6.30659 13.2902 6.4834 13.2152 6.62967 13.0965L10.8988 8.83532C11.0739 8.69473 11.2153 8.51658 11.3124 8.31402C11.4096 8.11146 11.46 7.88966 11.46 7.66499C11.46 7.44033 11.4096 7.21853 11.3124 7.01597C11.2153 6.81341 11.0739 6.63526 10.8988 6.49467L6.62967 2.22347C6.48274 2.10422 6.30501 2.02912 6.11712 2.00691C5.92923 1.9847 5.73889 2.01628 5.56823 2.09799C5.39757 2.17969 5.25358 2.30817 5.153 2.46849C5.05241 2.62882 4.99936 2.8144 5.00001 3.00369V12.3263Z"\n        />\n    </svg>\n  ',radioIndicator:'\n    <svg\n      aria-hidden="true"\n      part="radio-indicator"\n      class="radio-indicator"\n      viewBox="0 0 20 20"\n      xmlns="http://www.w3.org/2000/svg"\n    >\n      <path\n          fill-rule="evenodd"\n          clip-rule="evenodd"\n          d="M8.143 12.6697L15.235 4.5L16.8 5.90363L8.23812 15.7667L3.80005 11.2556L5.27591 9.7555L8.143 12.6697Z"\n      />\n    </svg>\n  '});class Jh extends qs{}Et([Kt({mode:"boolean"})],Jh.prototype,"disabled",void 0);const Qh=Jh.compose({baseName:"tab",template:(t,e)=>Dl`
    <template slot="tab" role="tab" aria-disabled="${t=>t.disabled}">
        <slot></slot>
    </template>
`,styles:(t,e)=>Ml`
      ${Ll("inline-flex")} :host {
        box-sizing: border-box;
        font-family: ${Vi};
        font-size: ${$i};
        font-weight: 400;
        line-height: ${Wi};
        height: calc(${Tu} * 1px);
        padding: 0 calc((6 + (${Hi} * 2 * ${Fi})) * 1px);
        color: ${ta};
        border-radius: calc(${Zi} * 1px);
        border: calc(${Ui} * 1px) solid transparent;
        align-items: center;
        justify-content: center;
        grid-row: 1;
        cursor: pointer;
      }

      :host([aria-selected='true']) {
        z-index: 2;
      }

      :host(:hover),
      :host(:active) {
        color: ${ta};
      }

      :host(:${Au}) {
        outline: none;
        border: calc(${Ui} * 1px) solid ${Xo};
        box-shadow: 0 0 0 calc((${Gi} - ${Ui}) * 1px) ${Xo};
      }

      :host(:focus) {
        outline: none;
      }

      :host(.vertical) {
        justify-content: end;
        grid-column: 2;
      }

      :host(.vertical[aria-selected='true']) {
        z-index: 2;
      }

      :host(.vertical:hover),
      :host(.vertical:active) {
        color: ${ta};
      }

      :host(.vertical:hover[aria-selected='true']) {
      }
    `.withBehaviors(Nc(Ml`
          :host {
            forced-color-adjust: none;
            border-color: transparent;
            color: ${_c.ButtonText};
            fill: currentcolor;
          }
          :host(:hover),
          :host(.vertical:hover),
          :host([aria-selected='true']:hover) {
            background: ${_c.Highlight};
            color: ${_c.HighlightText};
            fill: currentcolor;
          }
          :host([aria-selected='true']) {
            background: ${_c.HighlightText};
            color: ${_c.Highlight};
            fill: currentcolor;
          }
          :host(:${Au}) {
            border-color: ${_c.ButtonText};
            box-shadow: none;
          }
        `))});const tp=class extends qs{}.compose({baseName:"tab-panel",template:(t,e)=>Dl`
    <template slot="tabpanel" role="tabpanel">
        <slot></slot>
    </template>
`,styles:(t,e)=>Ml`
  ${Ll("block")} :host {
    box-sizing: border-box;
    font-family: ${Vi};
    font-size: ${zi};
    font-weight: 400;
    line-height: ${Ki};
    padding: 0 calc((6 + (${Hi} * 2 * ${Fi})) * 1px);
  }
`});let ep=0;function ip(t=""){return`${t}${ep++}`}function np(t){return!t||!t.trim()}var op;!function(t){t.vertical="vertical",t.horizontal="horizontal"}(op||(op={}));class ap extends qs{constructor(){super(...arguments),this.orientation=op.horizontal,this.activeindicator=!0,this.showActiveIndicator=!0,this.prevActiveTabIndex=0,this.activeTabIndex=0,this.ticking=!1,this.change=()=>{this.$emit("change",this.activetab)},this.isDisabledElement=t=>"true"===t.getAttribute("aria-disabled"),this.isFocusableElement=t=>!this.isDisabledElement(t),this.setTabs=()=>{const t="gridColumn",e="gridRow",i=this.isHorizontal()?t:e;this.tabIds=this.getTabIds(),this.tabpanelIds=this.getTabPanelIds(),this.activeTabIndex=this.getActiveIndex(),this.showActiveIndicator=!1,this.tabs.forEach(((t,e)=>{if("tab"===t.slot){const i=this.activeTabIndex===e&&this.isFocusableElement(t);this.activeindicator&&this.isFocusableElement(t)&&(this.showActiveIndicator=!0);const n=this.tabIds[e],o=this.tabpanelIds[e];t.setAttribute("id",n),t.setAttribute("aria-selected",i?"true":"false"),t.setAttribute("aria-controls",o),t.addEventListener("click",this.handleTabClick),t.addEventListener("keydown",this.handleTabKeyDown),t.setAttribute("tabindex",i?"0":"-1"),i&&(this.activetab=t)}t.style.gridColumn="",t.style.gridRow="",t.style[i]=`${e+1}`,this.isHorizontal()?t.classList.remove("vertical"):t.classList.add("vertical")}))},this.setTabPanels=()=>{this.tabIds=this.getTabIds(),this.tabpanelIds=this.getTabPanelIds(),this.tabpanels.forEach(((t,e)=>{const i=this.tabIds[e],n=this.tabpanelIds[e];t.setAttribute("id",n),t.setAttribute("aria-labelledby",i),this.activeTabIndex!==e?t.setAttribute("hidden",""):t.removeAttribute("hidden")}))},this.handleTabClick=t=>{const e=t.currentTarget;1===e.nodeType&&this.isFocusableElement(e)&&(this.prevActiveTabIndex=this.activeTabIndex,this.activeTabIndex=this.tabs.indexOf(e),this.setComponent())},this.handleTabKeyDown=t=>{if(this.isHorizontal())switch(t.key){case ql:t.preventDefault(),this.adjustBackward(t);break;case Jl:t.preventDefault(),this.adjustForward(t)}else switch(t.key){case Ql:t.preventDefault(),this.adjustBackward(t);break;case Xl:t.preventDefault(),this.adjustForward(t)}switch(t.key){case ic:t.preventDefault(),this.adjust(-this.activeTabIndex);break;case nc:t.preventDefault(),this.adjust(this.tabs.length-this.activeTabIndex-1)}},this.adjustForward=t=>{const e=this.tabs;let i=0;for(i=this.activetab?e.indexOf(this.activetab)+1:1,i===e.length&&(i=0);i<e.length&&e.length>1;){if(this.isFocusableElement(e[i])){this.moveToTabByIndex(e,i);break}if(this.activetab&&i===e.indexOf(this.activetab))break;i+1>=e.length?i=0:i+=1}},this.adjustBackward=t=>{const e=this.tabs;let i=0;for(i=this.activetab?e.indexOf(this.activetab)-1:0,i=i<0?e.length-1:i;i>=0&&e.length>1;){if(this.isFocusableElement(e[i])){this.moveToTabByIndex(e,i);break}i-1<0?i=e.length-1:i-=1}},this.moveToTabByIndex=(t,e)=>{const i=t[e];this.activetab=i,this.prevActiveTabIndex=this.activeTabIndex,this.activeTabIndex=e,i.focus(),this.setComponent()}}orientationChanged(){this.$fastController.isConnected&&(this.setTabs(),this.setTabPanels(),this.handleActiveIndicatorPosition())}activeidChanged(t,e){this.$fastController.isConnected&&this.tabs.length<=this.tabpanels.length&&(this.prevActiveTabIndex=this.tabs.findIndex((e=>e.id===t)),this.setTabs(),this.setTabPanels(),this.handleActiveIndicatorPosition())}tabsChanged(){this.$fastController.isConnected&&this.tabs.length<=this.tabpanels.length&&(this.setTabs(),this.setTabPanels(),this.handleActiveIndicatorPosition())}tabpanelsChanged(){this.$fastController.isConnected&&this.tabpanels.length<=this.tabs.length&&(this.setTabs(),this.setTabPanels(),this.handleActiveIndicatorPosition())}getActiveIndex(){return void 0!==this.activeid?-1===this.tabIds.indexOf(this.activeid)?0:this.tabIds.indexOf(this.activeid):0}getTabIds(){return this.tabs.map((t=>{var e;return null!==(e=t.getAttribute("id"))&&void 0!==e?e:`tab-${ip()}`}))}getTabPanelIds(){return this.tabpanels.map((t=>{var e;return null!==(e=t.getAttribute("id"))&&void 0!==e?e:`panel-${ip()}`}))}setComponent(){this.activeTabIndex!==this.prevActiveTabIndex&&(this.activeid=this.tabIds[this.activeTabIndex],this.focusTab(),this.change())}isHorizontal(){return this.orientation===op.horizontal}handleActiveIndicatorPosition(){this.showActiveIndicator&&this.activeindicator&&this.activeTabIndex!==this.prevActiveTabIndex&&(this.ticking?this.ticking=!1:(this.ticking=!0,this.animateActiveIndicator()))}animateActiveIndicator(){this.ticking=!0;const t=this.isHorizontal()?"gridColumn":"gridRow",e=this.isHorizontal()?"translateX":"translateY",i=this.isHorizontal()?"offsetLeft":"offsetTop",n=this.activeIndicatorRef[i];this.activeIndicatorRef.style[t]=`${this.activeTabIndex+1}`;const o=this.activeIndicatorRef[i];this.activeIndicatorRef.style[t]=`${this.prevActiveTabIndex+1}`;const a=o-n;this.activeIndicatorRef.style.transform=`${e}(${a}px)`,this.activeIndicatorRef.classList.add("activeIndicatorTransition"),this.activeIndicatorRef.addEventListener("transitionend",(()=>{this.ticking=!1,this.activeIndicatorRef.style[t]=`${this.activeTabIndex+1}`,this.activeIndicatorRef.style.transform=`${e}(0px)`,this.activeIndicatorRef.classList.remove("activeIndicatorTransition")}))}adjust(t){this.prevActiveTabIndex=this.activeTabIndex,this.activeTabIndex=Bh(0,this.tabs.length-1,this.activeTabIndex+t),this.setComponent()}focusTab(){this.tabs[this.activeTabIndex].focus()}connectedCallback(){super.connectedCallback(),this.tabIds=this.getTabIds(),this.tabpanelIds=this.getTabPanelIds(),this.activeTabIndex=this.getActiveIndex()}}Et([Kt],ap.prototype,"orientation",void 0),Et([Kt],ap.prototype,"activeid",void 0),Et([Nt],ap.prototype,"tabs",void 0),Et([Nt],ap.prototype,"tabpanels",void 0),Et([Kt({mode:"boolean"})],ap.prototype,"activeindicator",void 0),Et([Nt],ap.prototype,"activeIndicatorRef",void 0),Et([Nt],ap.prototype,"showActiveIndicator",void 0),Kl(ap,$l);const rp=ap.compose({baseName:"tabs",template:(t,e)=>Dl`
    <template class="${t=>t.orientation}">
        ${zl(0,e)}
        <div class="tablist" part="tablist" role="tablist">
            <slot class="tab" name="tab" part="tab" ${Ol("tabs")}></slot>

            ${Gl((t=>t.showActiveIndicator),Dl`
                    <div
                        ${Ul("activeIndicatorRef")}
                        class="activeIndicator"
                        part="activeIndicator"
                    ></div>
                `)}
        </div>
        ${Wl(0,e)}
        <div class="tabpanel">
            <slot name="tabpanel" part="tabpanel" ${Ol("tabpanels")}></slot>
        </div>
    </template>
`,styles:(t,e)=>Ml`
      ${Ll("grid")} :host {
        box-sizing: border-box;
        font-family: ${Vi};
        font-size: ${$i};
        line-height: ${Wi};
        color: ${ta};
        grid-template-columns: auto 1fr auto;
        grid-template-rows: auto 1fr;
      }

      .tablist {
        display: grid;
        grid-template-rows: auto auto;
        grid-template-columns: auto;
        position: relative;
        width: max-content;
        align-self: end;
      }

      .start,
      .end {
        align-self: center;
      }

      .activeIndicator {
        grid-row: 2;
        grid-column: 1;
        width: 20px;
        height: 3px;
        border-radius: calc(${Zi} * 1px);
        justify-self: center;
        background: ${ro};
      }

      .activeIndicatorTransition {
        transition: transform 0.2s ease-in-out;
      }

      .tabpanel {
        grid-row: 2;
        grid-column-start: 1;
        grid-column-end: 4;
        position: relative;
      }

      :host(.vertical) {
        grid-template-rows: auto 1fr auto;
        grid-template-columns: auto 1fr;
      }

      :host(.vertical) .tablist {
        grid-row-start: 2;
        grid-row-end: 2;
        display: grid;
        grid-template-rows: auto;
        grid-template-columns: auto 1fr;
        position: relative;
        width: max-content;
        justify-self: end;
        width: 100%;
      }

      :host(.vertical) .tabpanel {
        grid-column: 2;
        grid-row-start: 1;
        grid-row-end: 4;
      }

      :host(.vertical) .end {
        grid-row: 3;
      }

      :host(.vertical) .activeIndicator {
        grid-column: 1;
        grid-row: 1;
        width: 3px;
        height: 20px;
        border-radius: calc(${Zi} * 1px);
        align-self: center;
        background: ${ro};
      }

      :host(.vertical) .activeIndicatorTransition {
        transition: transform 0.2s linear;
      }
    `.withBehaviors(Nc(Ml`
          .activeIndicator,
          :host(.vertical) .activeIndicator {
            forced-color-adjust: none;
            background: ${_c.Highlight};
          }
        `))});class sp extends qs{}class lp extends(dc(sp)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}class cp extends lp{constructor(){super(),this.initialValue="on",this.keypressHandler=t=>{switch(t.key){case tc:case oc:this.checked=!this.checked}},this.clickHandler=t=>{this.disabled||this.readOnly||(this.checked=!this.checked)},this.proxy.setAttribute("type","checkbox")}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly),this.readOnly?this.classList.add("readonly"):this.classList.remove("readonly")}checkedChanged(t,e){super.checkedChanged(t,e),this.checked?this.classList.add("checked"):this.classList.remove("checked")}}Et([Kt({attribute:"readonly",mode:"boolean"})],cp.prototype,"readOnly",void 0),Et([Nt],cp.prototype,"defaultSlottedNodes",void 0);const up=cp.compose({baseName:"switch",template:(t,e)=>Dl`
    <template
        role="switch"
        aria-checked="${t=>t.checked}"
        aria-disabled="${t=>t.disabled}"
        aria-readonly="${t=>t.readOnly}"
        tabindex="${t=>t.disabled?null:0}"
        @keypress="${(t,e)=>t.keypressHandler(e.event)}"
        @click="${(t,e)=>t.clickHandler(e.event)}"
        class="${t=>t.checked?"checked":""}"
    >
        <label
            part="label"
            class="${t=>t.defaultSlottedNodes&&t.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot ${Ol("defaultSlottedNodes")}></slot>
        </label>
        <div part="switch" class="switch">
            <slot name="switch">${e.switch||""}</slot>
        </div>
        <span class="status-message" part="status-message">
            <span class="checked-message" part="checked-message">
                <slot name="checked-message"></slot>
            </span>
            <span class="unchecked-message" part="unchecked-message">
                <slot name="unchecked-message"></slot>
            </span>
        </span>
    </template>
`,styles:(t,e)=>Ml`
    :host([hidden]) {
      display: none;
    }

    ${Ll("inline-flex")} :host {
      align-items: center;
      outline: none;
      font-family: ${Vi};
      margin: calc(${Hi} * 1px) 0;
      ${""} user-select: none;
    }

    :host(.disabled) {
      opacity: ${Ni};
    }

    :host(.disabled) .label,
    :host(.readonly) .label,
    :host(.readonly) .switch,
    :host(.disabled) .switch {
      cursor: ${Kh};
    }

    .switch {
      position: relative;
      outline: none;
      box-sizing: border-box;
      width: calc(((${Tu} / 2) + ${Hi}) * 2px);
      height: calc(((${Tu} / 2) + ${Hi}) * 1px);
      background: ${ko};
      border-radius: calc(${Tu} * 1px);
      border: calc(${Ui} * 1px) solid ${zo};
    }

    :host(:enabled) .switch:hover {
      background: ${wo};
      border-color: ${Ko};
      cursor: pointer;
    }

    :host(:enabled) .switch:active {
      background: ${Ro};
      border-color: ${Yo};
    }

    :host(:${Au}) .switch {
      box-shadow: 0 0 0 2px ${no}, 0 0 0 4px ${Xo};
      border-color: ${Xo};
    }

    .checked-indicator {
      position: absolute;
      height: calc((${Tu} - (${Hi} * 5.5)) * 1px);
      width: calc((${Tu} - (${Hi} * 5.5)) * 1px);
      top: calc(${Hi} * 1px);
      background: ${ta};
      border-radius: 50%;
      transition: all 0.2s ease-in-out;
    }

    .status-message {
      color: ${ta};
      cursor: pointer;
      font-size: ${$i};
      line-height: ${Wi};
    }

    .label__hidden {
      display: none;
      visibility: hidden;
    }

    .label {
      color: ${ta};
      font-size: ${$i};
      line-height: ${Wi};
      margin-inline-end: calc(${Hi} * 2px + 2px);
      cursor: pointer;
    }

    ::slotted(*) {
      ${""} margin-inline-start: calc(${Hi} * 2px + 2px);
    }

    :host([aria-checked='true']) .checked-indicator {
      background: ${po};
    }

    :host([aria-checked='true']) .switch {
      background: ${ro};
    }

    :host([aria-checked='true']:enabled) .switch:hover {
      background: ${so};
    }

    :host([aria-checked='true']:enabled) .switch:hover .checked-indicator {
      background: ${fo};
    }

    :host([aria-checked='true']:enabled) .switch:active {
      background: ${lo};
    }

    :host([aria-checked='true']:enabled) .switch:active .checked-indicator {
      background: ${go};
    }

    :host([aria-checked="true"]:${Au}:enabled) .switch {
      box-shadow: 0 0 0 2px ${no}, 0 0 0 4px ${Xo};
      border-color: transparent;
    }

    .unchecked-message {
      display: block;
    }

    .checked-message {
      display: none;
    }

    :host([aria-checked='true']) .unchecked-message {
      display: none;
    }

    :host([aria-checked='true']) .checked-message {
      display: block;
    }
  `.withBehaviors(new eh(Ml`
        .checked-indicator {
          left: calc(${Hi} * 1px);
        }

        :host([aria-checked='true']) .checked-indicator {
          left: calc((((${Tu} / 2) + ${Hi}) + ${Hi}) * 1px);
        }
      `,Ml`
        .checked-indicator {
          right: calc(${Hi} * 1px);
        }

        :host([aria-checked='true']) .checked-indicator {
          right: calc((((${Tu} / 2) + ${Hi}) + ${Hi}) * 1px);
        }
      `),Nc(Ml`
        .checked-indicator,
        :host(:enabled) .switch:active .checked-indicator {
          forced-color-adjust: none;
          background: ${_c.FieldText};
        }
        .switch {
          forced-color-adjust: none;
          background: ${_c.Field};
          border-color: ${_c.FieldText};
        }
        :host(:enabled) .switch:hover {
          background: ${_c.HighlightText};
          border-color: ${_c.Highlight};
        }
        :host(.checked) .switch {
          background: ${_c.Highlight};
          border-color: ${_c.Highlight};
        }
        :host(.checked:enabled) .switch:hover,
        :host(:enabled) .switch:active {
          background: ${_c.HighlightText};
          border-color: ${_c.Highlight};
        }
        :host(.checked) .checked-indicator {
          background: ${_c.HighlightText};
        }
        :host(.checked:enabled) .switch:hover .checked-indicator {
          background: ${_c.Highlight};
        }
        :host(:${Au}) .switch {
          border-color: ${_c.Highlight};
          box-shadow: 0 0 0 2px ${_c.Field}, 0 0 0 4px ${_c.FieldText};
        }
        :host(.checked:${Au}:enabled) .switch {
          box-shadow: 0 0 0 2px ${_c.Field}, 0 0 0 4px ${_c.FieldText};
        }
        :host(.disabled) {
          opacity: 1;
        }
        :host(.disabled) .checked-indicator {
          background: ${_c.GrayText};
        }
        :host(.disabled) .switch {
          background: ${_c.Field};
          border-color: ${_c.GrayText};
        }
        .status-message,
        .label {
          color: ${_c.FieldText};
        }
      `)),switch:'\n    <span class="checked-indicator" part="checked-indicator"></span>\n  '});class dp extends qs{}class hp extends(uc(dp)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}var pp;!function(t){t.email="email",t.password="password",t.tel="tel",t.text="text",t.url="url"}(pp||(pp={}));class fp extends hp{constructor(){super(...arguments),this.type=pp.text}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly,this.validate())}autofocusChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.autofocus=this.autofocus,this.validate())}placeholderChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.placeholder=this.placeholder)}typeChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.type=this.type,this.validate())}listChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.setAttribute("list",this.list),this.validate())}maxlengthChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.maxLength=this.maxlength,this.validate())}minlengthChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.minLength=this.minlength,this.validate())}patternChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.pattern=this.pattern,this.validate())}sizeChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.size=this.size)}spellcheckChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.spellcheck=this.spellcheck)}connectedCallback(){super.connectedCallback(),this.proxy.setAttribute("type",this.type),this.validate(),this.autofocus&&Tt.SO.queueUpdate((()=>{this.focus()}))}handleTextInput(){this.value=this.control.value}handleChange(){this.$emit("change")}}Et([Kt({attribute:"readonly",mode:"boolean"})],fp.prototype,"readOnly",void 0),Et([Kt({mode:"boolean"})],fp.prototype,"autofocus",void 0),Et([Kt],fp.prototype,"placeholder",void 0),Et([Kt],fp.prototype,"type",void 0),Et([Kt],fp.prototype,"list",void 0),Et([Kt({converter:Wt})],fp.prototype,"maxlength",void 0),Et([Kt({converter:Wt})],fp.prototype,"minlength",void 0),Et([Kt],fp.prototype,"pattern",void 0),Et([Kt({converter:Wt})],fp.prototype,"size",void 0),Et([Kt({mode:"boolean"})],fp.prototype,"spellcheck",void 0),Et([Nt],fp.prototype,"defaultSlottedNodes",void 0);class gp{}function mp(t,e,i){return t.nodeType!==Node.TEXT_NODE||"string"==typeof t.nodeValue&&!!t.nodeValue.trim().length}Kl(gp,Vl),Kl(fp,$l,gp);const vp=(t,e)=>Ml`
    :host([appearance='filled']) .root {
      background: ${Ao};
      border-color: transparent;
    }

    :host([appearance='filled']:hover:not(.disabled)) .root {
      background: ${To};
      border-color: transparent;
    }

    :host([appearance='filled']:focus-within:not(.disabled)) .root {
      border-color: transparent;
      box-shadow: none;
    }
    ${Ml`
  :host([appearance='filled']:not(.disabled):active)::after,
  :host([appearance='filled']:not(.disabled):focus-within:not(:active))::after {
    content: '';
    position: absolute;
    bottom: 0;
    border-bottom: calc(${Gi} * 1px) solid ${ro};
    border-bottom-left-radius: calc(${Zi} * 1px);
    border-bottom-right-radius: calc(${Zi} * 1px);
    z-index: 2;
    transition: all 300ms cubic-bezier(0.1, 0.9, 0.2, 1);
  }

  :host([appearance='filled']:not(.disabled):active)::after {
    left: 50%;
    width: 40%;
    transform: translateX(-50%);
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }

  :host([appearance='filled']:not(.disabled):focus-within:not(:active))::after {
    left: 0;
    width: 100%;
  }
`}
  `.withBehaviors(Nc(Ml`
        :host([appearance='filled']) .root {
          background: ${_c.Field};
          border-color: ${_c.FieldText};
        }
        :host([appearance='filled']:hover:not([disabled])) .root,
        :host([appearance='filled']:focus-within:not([disabled])) .root {
          background: ${_c.Field};
          border-color: ${_c.FieldText};
        }
        :host([appearance='filled']:active:not([disabled])) .root {
          background: ${_c.Field};
          border-color: ${_c.FieldText};
        }
        :host([appearance='filled']:not([disabled]):active)::after,
        :host([appearance='filled']:not([disabled]):focus-within:not(:active))::after {
          border-bottom-color: ${_c.Highlight};
        }
        :host([appearance='filled'][disabled]) .root {
          border-color: ${_c.GrayText};
          background: ${_c.Field};
        }
      `));class yp extends fp{appearanceChanged(t,e){t!==e&&(this.classList.add(e),this.classList.remove(t))}connectedCallback(){super.connectedCallback(),this.appearance||(this.appearance="outline")}}Su([Kt],yp.prototype,"appearance",void 0);const Cp=yp.compose({baseName:"text-field",baseClass:fp,template:(t,e)=>Dl`
    <template
        class="
            ${t=>t.readOnly?"readonly":""}
        "
    >
        <label
            part="label"
            for="control"
            class="${t=>t.defaultSlottedNodes&&t.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot
                ${Ol({property:"defaultSlottedNodes",filter:mp})}
            ></slot>
        </label>
        <div class="root" part="root">
            ${zl(0,e)}
            <input
                class="control"
                part="control"
                id="control"
                @input="${t=>t.handleTextInput()}"
                @change="${t=>t.handleChange()}"
                ?autofocus="${t=>t.autofocus}"
                ?disabled="${t=>t.disabled}"
                list="${t=>t.list}"
                maxlength="${t=>t.maxlength}"
                minlength="${t=>t.minlength}"
                pattern="${t=>t.pattern}"
                placeholder="${t=>t.placeholder}"
                ?readonly="${t=>t.readOnly}"
                ?required="${t=>t.required}"
                size="${t=>t.size}"
                ?spellcheck="${t=>t.spellcheck}"
                :value="${t=>t.value}"
                type="${t=>t.type}"
                aria-atomic="${t=>t.ariaAtomic}"
                aria-busy="${t=>t.ariaBusy}"
                aria-controls="${t=>t.ariaControls}"
                aria-current="${t=>t.ariaCurrent}"
                aria-describedby="${t=>t.ariaDescribedby}"
                aria-details="${t=>t.ariaDetails}"
                aria-disabled="${t=>t.ariaDisabled}"
                aria-errormessage="${t=>t.ariaErrormessage}"
                aria-flowto="${t=>t.ariaFlowto}"
                aria-haspopup="${t=>t.ariaHaspopup}"
                aria-hidden="${t=>t.ariaHidden}"
                aria-invalid="${t=>t.ariaInvalid}"
                aria-keyshortcuts="${t=>t.ariaKeyshortcuts}"
                aria-label="${t=>t.ariaLabel}"
                aria-labelledby="${t=>t.ariaLabelledby}"
                aria-live="${t=>t.ariaLive}"
                aria-owns="${t=>t.ariaOwns}"
                aria-relevant="${t=>t.ariaRelevant}"
                aria-roledescription="${t=>t.ariaRoledescription}"
                ${Ul("control")}
            />
            ${Wl(0,e)}
        </div>
    </template>
`,styles:(t,e)=>Ml`
    ${Ll("inline-block")} :host {
      font-family: ${Vi};
      outline: none;
      user-select: none;
      position: relative;
    }

    .root {
      box-sizing: border-box;
      position: relative;
      display: flex;
      flex-direction: row;
      color: ${ta};
      background: ${ko};
      border-radius: calc(${Zi} * 1px);
      border: calc(${Ui} * 1px) solid ${Bo};
      height: calc(${Tu} * 1px);
    }

    .control {
      -webkit-appearance: none;
      background: transparent;
      border: 0;
      height: calc(100% - 4px);
      width: 100%;
      margin-top: auto;
      margin-bottom: auto;
      border: none;
      padding: 0 calc(${Hi} * 2px + 1px);
      color: ${ta};
      font-family: inherit;
      font-size: ${$i};
      line-height: ${Wi};
    }

    .control:hover,
    .control:${Au},
    .control:disabled,
    .control:active {
      outline: none;
    }

    .label {
      display: block;
      color: ${ta};
      cursor: pointer;
      font-size: ${$i};
      line-height: ${Wi};
      margin-bottom: 4px;
    }

    .label__hidden {
      display: none;
      visibility: hidden;
    }

    .start,
    .end {
      display: flex;
      margin: auto;
      fill: currentcolor;
    }

    ::slotted(svg) {
      ${""} width: 16px;
      height: 16px;
    }

    .start {
      margin-inline-start: 11px;
    }

    .end {
      margin-inline-end: 11px;
    }

    :host(:hover:not(.disabled)) .root {
      background: ${wo};
      border-color: ${Uo};
    }

    :host(:focus-within:not(.disabled)) .root {
      border-color: ${Xo};
      box-shadow: 0 0 0 1px ${Xo} inset;
    }

    :host(.disabled) .label,
    :host(.readonly) .label,
    :host(.readonly) .control,
    :host(.disabled) .control {
      cursor: ${Kh};
    }

    :host(.disabled) {
      opacity: ${Ni};
    }
  `.withBehaviors(Mu("filled",vp()),Nc(Ml`
        .root {
          forced-color-adjust: none;
          background: ${_c.Field};
          border-color: ${_c.FieldText};
        }
        :host(:hover:not(.disabled)) .root {
          background: ${_c.Field};
          border-color: ${_c.Highlight};
        }
        .start,
        .end {
          fill: ${_c.ButtonText};
        }
        :host(.disabled) {
          opacity: 1;
        }
        :host(.disabled) .root {
          border-color: ${_c.GrayText};
          background: ${_c.Field};
        }
        :host(:focus-within:enabled) .root {
          border-color: ${_c.Highlight};
          box-shadow: 0 0 0 1px ${_c.Highlight} inset;
        }
        .control {
          color: ${_c.ButtonText};
        }
        ::placeholder,
        ::-webkit-input-placeholder {
          color: ${_c.FieldText};
        }
        :host(.disabled) ::placeholder,
        :host(.disabled) ::-webkit-input-placeholder,
        :host([disabled]) .label {
          color: ${_c.GrayText};
        }
      `)),shadowOptions:{delegatesFocus:!0}});class bp extends qs{}class Sp extends(dc(bp)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}class xp extends Sp{constructor(){super(),this.initialValue="on",this.indeterminate=!1,this.keypressHandler=t=>{if(t.key===oc)this.checked=!this.checked},this.clickHandler=t=>{this.disabled||this.readOnly||(this.checked=!this.checked)},this.proxy.setAttribute("type","checkbox")}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly)}}Et([Kt({attribute:"readonly",mode:"boolean"})],xp.prototype,"readOnly",void 0),Et([Nt],xp.prototype,"defaultSlottedNodes",void 0),Et([Nt],xp.prototype,"indeterminate",void 0);const Ep=xp.compose({baseName:"checkbox",template:(t,e)=>Dl`
    <template
        role="checkbox"
        aria-checked="${t=>t.checked}"
        aria-required="${t=>t.required}"
        aria-disabled="${t=>t.disabled}"
        aria-readonly="${t=>t.readOnly}"
        tabindex="${t=>t.disabled?null:0}"
        @keypress="${(t,e)=>t.keypressHandler(e.event)}"
        @click="${(t,e)=>t.clickHandler(e.event)}"
        class="${t=>t.readOnly?"readonly":""} ${t=>t.checked?"checked":""} ${t=>t.indeterminate?"indeterminate":""}"
    >
        <div part="control" class="control">
            <slot name="checked-indicator">
                ${e.checkedIndicator||""}
            </slot>
            <slot name="indeterminate-indicator">
                ${e.indeterminateIndicator||""}
            </slot>
        </div>
        <label
            part="label"
            class="${t=>t.defaultSlottedNodes&&t.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot ${Ol("defaultSlottedNodes")}></slot>
        </label>
    </template>
`,styles:(t,e)=>Ml`
    ${Ll("inline-flex")} :host {
      align-items: center;
      outline: none;
      margin: calc(${Hi} * 1px) 0;
      ${""} user-select: none;
    }

    .control {
      position: relative;
      width: calc((${Tu} / 2 + ${Hi}) * 1px);
      height: calc((${Tu} / 2 + ${Hi}) * 1px);
      box-sizing: border-box;
      border-radius: calc(${Zi} * 1px);
      border: calc(${Ui} * 1px) solid ${zo};
      background: ${ko};
      outline: none;
      cursor: pointer;
    }

    .label__hidden {
      display: none;
      visibility: hidden;
    }

    .label {
      font-family: ${Vi};
      color: ${ta};
      ${""} padding-inline-start: calc(${Hi} * 2px + 2px);
      margin-inline-end: calc(${Hi} * 2px + 2px);
      cursor: pointer;
      font-size: ${$i};
      line-height: ${Wi};
    }

    .checked-indicator {
      width: 100%;
      height: 100%;
      display: block;
      fill: ${ta};
      opacity: 0;
      pointer-events: none;
    }

    .indeterminate-indicator {
      border-radius: calc((${Zi} / 2) * 1px);
      background: ${ta};
      position: absolute;
      top: 50%;
      left: 50%;
      width: 50%;
      height: 50%;
      transform: translate(-50%, -50%);
      opacity: 0;
    }

    :host(:enabled) .control:hover {
      background: ${wo};
      border-color: ${Ko};
    }

    :host(:enabled) .control:active {
      background: ${Ro};
      border-color: ${Yo};
    }

    :host(:${Au}) .control {
      box-shadow: 0 0 0 2px ${no}, 0 0 0 4px ${Xo};
      border-color: ${Xo};
    }

    :host(.disabled) .label,
    :host(.readonly) .label,
    :host(.readonly) .control,
    :host(.disabled) .control {
      cursor: ${Kh};
    }

    :host(.checked:not(.indeterminate)) .checked-indicator,
    :host(.indeterminate) .indeterminate-indicator {
      opacity: 1;
    }

    :host(.disabled) {
      opacity: ${Ni};
    }
  `.withBehaviors(Nc(Ml`
        .control {
          forced-color-adjust: none;
          border-color: ${_c.FieldText};
          background: ${_c.Field};
        }
        :host(:enabled) .control:hover,
        .control:active {
          border-color: ${_c.Highlight};
          background: ${_c.Field};
        }
        .checked-indicator {
          fill: ${_c.FieldText};
        }
        .indeterminate-indicator {
          background: ${_c.FieldText};
        }
        :host(:${Au}) .control {
          border-color: ${_c.Highlight};
          box-shadow: 0 0 0 2px ${_c.Field}, 0 0 0 4px ${_c.FieldText};
        }
        :host(.checked:${Au}:enabled) .control {
          box-shadow: 0 0 0 2px ${_c.Field}, 0 0 0 4px ${_c.FieldText};
        }
        :host(.checked) .control {
          background: ${_c.Highlight};
          border-color: ${_c.Highlight};
        }
        :host(.checked) .control:hover,
        .control:active {
          background: ${_c.HighlightText};
        }
        :host(.checked) .checked-indicator {
          fill: ${_c.HighlightText};
        }
        :host(.checked) .control:hover .checked-indicator {
          fill: ${_c.Highlight};
        }
        :host(.checked) .indeterminate-indicator {
          background: ${_c.HighlightText};
        }
        :host(.checked) .control:hover .indeterminate-indicator {
          background: ${_c.Highlight};
        }
        :host(.disabled) {
          opacity: 1;
        }
        :host(.disabled) .control {
          forced-color-adjust: none;
          border-color: ${_c.GrayText};
          background: ${_c.Field};
        }
        :host(.disabled) .indeterminate-indicator,
        :host(.checked.disabled) .control:hover .indeterminate-indicator {
          forced-color-adjust: none;
          background: ${_c.GrayText};
        }
        :host(.disabled) .checked-indicator,
        :host(.checked.disabled) .control:hover .checked-indicator {
          forced-color-adjust: none;
          fill: ${_c.GrayText};
        }
      `)),checkedIndicator:'\n    <svg\n        aria-hidden="true"\n        part="checked-indicator"\n        class="checked-indicator"\n        viewBox="0 0 20 20"\n        xmlns="http://www.w3.org/2000/svg"\n    >\n        <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M8.143 12.6697L15.235 4.5L16.8 5.90363L8.23812 15.7667L3.80005 11.2556L5.27591 9.7555L8.143 12.6697Z"\n        />\n    </svg>\n  ',indeterminateIndicator:'\n    <div part="indeterminate-indicator" class="indeterminate-indicator"></div>\n  '});function Ap(t){return mc(t)&&("option"===t.getAttribute("role")||t instanceof HTMLOptionElement)}class Tp extends qs{constructor(t,e,i,n){super(),this.defaultSelected=!1,this.dirtySelected=!1,this.selected=this.defaultSelected,this.dirtyValue=!1,t&&(this.textContent=t),e&&(this.initialValue=e),i&&(this.defaultSelected=i),n&&(this.selected=n),this.proxy=new Option(`${this.textContent}`,this.initialValue,this.defaultSelected,this.selected),this.proxy.disabled=this.disabled}checkedChanged(t,e){this.ariaChecked="boolean"!=typeof e?null:e?"true":"false"}contentChanged(t,e){this.proxy instanceof HTMLOptionElement&&(this.proxy.textContent=this.textContent),this.$emit("contentchange",null,{bubbles:!0})}defaultSelectedChanged(){this.dirtySelected||(this.selected=this.defaultSelected,this.proxy instanceof HTMLOptionElement&&(this.proxy.selected=this.defaultSelected))}disabledChanged(t,e){this.ariaDisabled=this.disabled?"true":"false",this.proxy instanceof HTMLOptionElement&&(this.proxy.disabled=this.disabled)}selectedAttributeChanged(){this.defaultSelected=this.selectedAttribute,this.proxy instanceof HTMLOptionElement&&(this.proxy.defaultSelected=this.defaultSelected)}selectedChanged(){this.ariaSelected=this.selected?"true":"false",this.dirtySelected||(this.dirtySelected=!0),this.proxy instanceof HTMLOptionElement&&(this.proxy.selected=this.selected)}initialValueChanged(t,e){this.dirtyValue||(this.value=this.initialValue,this.dirtyValue=!1)}get label(){var t,e;return null!==(e=null!==(t=this.value)&&void 0!==t?t:this.textContent)&&void 0!==e?e:""}get text(){return this.textContent}set value(t){this._value=t,this.dirtyValue=!0,this.proxy instanceof HTMLOptionElement&&(this.proxy.value=t),Mt.notify(this,"value")}get value(){var t,e;return Mt.track(this,"value"),null!==(e=null!==(t=this._value)&&void 0!==t?t:this.textContent)&&void 0!==e?e:""}get form(){return this.proxy?this.proxy.form:null}}Et([Nt],Tp.prototype,"checked",void 0),Et([Nt],Tp.prototype,"content",void 0),Et([Nt],Tp.prototype,"defaultSelected",void 0),Et([Kt({mode:"boolean"})],Tp.prototype,"disabled",void 0),Et([Kt({attribute:"selected",mode:"boolean"})],Tp.prototype,"selectedAttribute",void 0),Et([Nt],Tp.prototype,"selected",void 0),Et([Kt({attribute:"value",mode:"fromView"})],Tp.prototype,"initialValue",void 0);class Ip{}Et([Nt],Ip.prototype,"ariaChecked",void 0),Et([Nt],Ip.prototype,"ariaPosInSet",void 0),Et([Nt],Ip.prototype,"ariaSelected",void 0),Et([Nt],Ip.prototype,"ariaSetSize",void 0),Kl(Ip,Vl),Kl(Tp,$l,Ip);class Dp extends qs{constructor(){super(...arguments),this._options=[],this.selectedIndex=-1,this.selectedOptions=[],this.shouldSkipFocus=!1,this.typeaheadBuffer="",this.typeaheadExpired=!0,this.typeaheadTimeout=-1}get firstSelectedOption(){var t;return null!==(t=this.selectedOptions[0])&&void 0!==t?t:null}get hasSelectableOptions(){return this.options.length>0&&!this.options.every((t=>t.disabled))}get length(){var t,e;return null!==(e=null===(t=this.options)||void 0===t?void 0:t.length)&&void 0!==e?e:0}get options(){return Mt.track(this,"options"),this._options}set options(t){this._options=t,Mt.notify(this,"options")}get typeAheadExpired(){return this.typeaheadExpired}set typeAheadExpired(t){this.typeaheadExpired=t}clickHandler(t){const e=t.target.closest("option,[role=option]");if(e&&!e.disabled)return this.selectedIndex=this.options.indexOf(e),!0}focusAndScrollOptionIntoView(t=this.firstSelectedOption){this.contains(document.activeElement)&&null!==t&&(t.focus(),requestAnimationFrame((()=>{t.scrollIntoView({block:"nearest"})})))}focusinHandler(t){this.shouldSkipFocus||t.target!==t.currentTarget||(this.setSelectedOptions(),this.focusAndScrollOptionIntoView()),this.shouldSkipFocus=!1}getTypeaheadMatches(){const t=this.typeaheadBuffer.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),e=new RegExp(`^${t}`,"gi");return this.options.filter((t=>t.text.trim().match(e)))}getSelectableIndex(t=this.selectedIndex,e){const i=t>e?-1:t<e?1:0,n=t+i;let o=null;switch(i){case-1:o=this.options.reduceRight(((t,e,i)=>!t&&!e.disabled&&i<n?e:t),o);break;case 1:o=this.options.reduce(((t,e,i)=>!t&&!e.disabled&&i>n?e:t),o)}return this.options.indexOf(o)}handleChange(t,e){if("selected"===e)Dp.slottedOptionFilter(t)&&(this.selectedIndex=this.options.indexOf(t)),this.setSelectedOptions()}handleTypeAhead(t){this.typeaheadTimeout&&window.clearTimeout(this.typeaheadTimeout),this.typeaheadTimeout=window.setTimeout((()=>this.typeaheadExpired=!0),Dp.TYPE_AHEAD_TIMEOUT_MS),t.length>1||(this.typeaheadBuffer=`${this.typeaheadExpired?"":this.typeaheadBuffer}${t}`)}keydownHandler(t){if(this.disabled)return!0;this.shouldSkipFocus=!1;const e=t.key;switch(e){case ic:t.shiftKey||(t.preventDefault(),this.selectFirstOption());break;case Xl:t.shiftKey||(t.preventDefault(),this.selectNextOption());break;case Ql:t.shiftKey||(t.preventDefault(),this.selectPreviousOption());break;case nc:t.preventDefault(),this.selectLastOption();break;case"Tab":return this.focusAndScrollOptionIntoView(),!0;case tc:case ec:return!0;case oc:if(this.typeaheadExpired)return!0;default:return 1===e.length&&this.handleTypeAhead(`${e}`),!0}}mousedownHandler(t){return this.shouldSkipFocus=!this.contains(document.activeElement),!0}multipleChanged(t,e){this.ariaMultiSelectable=e?"true":null}selectedIndexChanged(t,e){var i;if(this.hasSelectableOptions){if((null===(i=this.options[this.selectedIndex])||void 0===i?void 0:i.disabled)&&"number"==typeof t){const i=this.getSelectableIndex(t,e),n=i>-1?i:t;return this.selectedIndex=n,void(e===n&&this.selectedIndexChanged(e,n))}this.setSelectedOptions()}else this.selectedIndex=-1}selectedOptionsChanged(t,e){var i;const n=e.filter(Dp.slottedOptionFilter);null===(i=this.options)||void 0===i||i.forEach((t=>{const e=Mt.getNotifier(t);e.unsubscribe(this,"selected"),t.selected=n.includes(t),e.subscribe(this,"selected")}))}selectFirstOption(){var t,e;this.disabled||(this.selectedIndex=null!==(e=null===(t=this.options)||void 0===t?void 0:t.findIndex((t=>!t.disabled)))&&void 0!==e?e:-1)}selectLastOption(){this.disabled||(this.selectedIndex=function(t,e){let i=t.length;for(;i--;)if(e(t[i],i,t))return i;return-1}(this.options,(t=>!t.disabled)))}selectNextOption(){!this.disabled&&this.selectedIndex<this.options.length-1&&(this.selectedIndex+=1)}selectPreviousOption(){!this.disabled&&this.selectedIndex>0&&(this.selectedIndex=this.selectedIndex-1)}setDefaultSelectedOption(){var t,e;this.selectedIndex=null!==(e=null===(t=this.options)||void 0===t?void 0:t.findIndex((t=>t.defaultSelected)))&&void 0!==e?e:-1}setSelectedOptions(){var t,e,i;(null===(t=this.options)||void 0===t?void 0:t.length)&&(this.selectedOptions=[this.options[this.selectedIndex]],this.ariaActiveDescendant=null!==(i=null===(e=this.firstSelectedOption)||void 0===e?void 0:e.id)&&void 0!==i?i:"",this.focusAndScrollOptionIntoView())}slottedOptionsChanged(t,e){this.options=e.reduce(((t,e)=>(Ap(e)&&t.push(e),t)),[]);const i=`${this.options.length}`;this.options.forEach(((t,e)=>{t.id||(t.id=ip("option-")),t.ariaPosInSet=`${e+1}`,t.ariaSetSize=i})),this.$fastController.isConnected&&(this.setSelectedOptions(),this.setDefaultSelectedOption())}typeaheadBufferChanged(t,e){if(this.$fastController.isConnected){const t=this.getTypeaheadMatches();if(t.length){const e=this.options.indexOf(t[0]);e>-1&&(this.selectedIndex=e)}this.typeaheadExpired=!1}}}Dp.slottedOptionFilter=t=>Ap(t)&&!t.disabled&&!t.hidden,Dp.TYPE_AHEAD_TIMEOUT_MS=1e3,Et([Kt({mode:"boolean"})],Dp.prototype,"disabled",void 0),Et([Nt],Dp.prototype,"selectedIndex",void 0),Et([Nt],Dp.prototype,"selectedOptions",void 0),Et([Nt],Dp.prototype,"slottedOptions",void 0),Et([Nt],Dp.prototype,"typeaheadBuffer",void 0);class kp{}Et([Nt],kp.prototype,"ariaActiveDescendant",void 0),Et([Nt],kp.prototype,"ariaDisabled",void 0),Et([Nt],kp.prototype,"ariaExpanded",void 0),Et([Nt],kp.prototype,"ariaMultiSelectable",void 0),Kl(kp,Vl),Kl(Dp,kp);class wp extends Dp{constructor(){super(...arguments),this.activeIndex=-1,this.rangeStartIndex=-1}get activeOption(){return this.options[this.activeIndex]}get checkedOptions(){var t;return null===(t=this.options)||void 0===t?void 0:t.filter((t=>t.checked))}get firstSelectedOptionIndex(){return this.options.indexOf(this.firstSelectedOption)}activeIndexChanged(t,e){var i,n;this.ariaActiveDescendant=null!==(n=null===(i=this.options[e])||void 0===i?void 0:i.id)&&void 0!==n?n:"",this.focusAndScrollOptionIntoView()}checkActiveIndex(){if(!this.multiple)return;const t=this.activeOption;t&&(t.checked=!0)}checkFirstOption(t=!1){t?(-1===this.rangeStartIndex&&(this.rangeStartIndex=this.activeIndex+1),this.options.forEach(((t,e)=>{t.checked=Uh(e,this.rangeStartIndex)}))):this.uncheckAllOptions(),this.activeIndex=0,this.checkActiveIndex()}checkLastOption(t=!1){t?(-1===this.rangeStartIndex&&(this.rangeStartIndex=this.activeIndex),this.options.forEach(((t,e)=>{t.checked=Uh(e,this.rangeStartIndex,this.options.length)}))):this.uncheckAllOptions(),this.activeIndex=this.options.length-1,this.checkActiveIndex()}connectedCallback(){super.connectedCallback(),this.addEventListener("focusout",this.focusoutHandler)}disconnectedCallback(){this.removeEventListener("focusout",this.focusoutHandler),super.disconnectedCallback()}checkNextOption(t=!1){t?(-1===this.rangeStartIndex&&(this.rangeStartIndex=this.activeIndex),this.options.forEach(((t,e)=>{t.checked=Uh(e,this.rangeStartIndex,this.activeIndex+1)}))):this.uncheckAllOptions(),this.activeIndex+=this.activeIndex<this.options.length-1?1:0,this.checkActiveIndex()}checkPreviousOption(t=!1){t?(-1===this.rangeStartIndex&&(this.rangeStartIndex=this.activeIndex),1===this.checkedOptions.length&&(this.rangeStartIndex+=1),this.options.forEach(((t,e)=>{t.checked=Uh(e,this.activeIndex,this.rangeStartIndex)}))):this.uncheckAllOptions(),this.activeIndex-=this.activeIndex>0?1:0,this.checkActiveIndex()}clickHandler(t){var e;if(!this.multiple)return super.clickHandler(t);const i=null===(e=t.target)||void 0===e?void 0:e.closest("[role=option]");return i&&!i.disabled?(this.uncheckAllOptions(),this.activeIndex=this.options.indexOf(i),this.checkActiveIndex(),this.toggleSelectedForAllCheckedOptions(),!0):void 0}focusAndScrollOptionIntoView(){super.focusAndScrollOptionIntoView(this.activeOption)}focusinHandler(t){if(!this.multiple)return super.focusinHandler(t);this.shouldSkipFocus||t.target!==t.currentTarget||(this.uncheckAllOptions(),-1===this.activeIndex&&(this.activeIndex=-1!==this.firstSelectedOptionIndex?this.firstSelectedOptionIndex:0),this.checkActiveIndex(),this.setSelectedOptions(),this.focusAndScrollOptionIntoView()),this.shouldSkipFocus=!1}focusoutHandler(t){this.multiple&&this.uncheckAllOptions()}keydownHandler(t){if(!this.multiple)return super.keydownHandler(t);if(this.disabled)return!0;const{key:e,shiftKey:i}=t;switch(this.shouldSkipFocus=!1,e){case ic:return void this.checkFirstOption(i);case Xl:return void this.checkNextOption(i);case Ql:return void this.checkPreviousOption(i);case nc:return void this.checkLastOption(i);case"Tab":return this.focusAndScrollOptionIntoView(),!0;case ec:return this.uncheckAllOptions(),this.checkActiveIndex(),!0;case oc:if(t.preventDefault(),this.typeAheadExpired)return void this.toggleSelectedForAllCheckedOptions();default:return 1===e.length&&this.handleTypeAhead(`${e}`),!0}}mousedownHandler(t){if(t.offsetX>=0&&t.offsetX<=this.scrollWidth)return super.mousedownHandler(t)}multipleChanged(t,e){var i;this.ariaMultiSelectable=e?"true":null,null===(i=this.options)||void 0===i||i.forEach((t=>{t.checked=!e&&void 0})),this.setSelectedOptions()}setSelectedOptions(){this.multiple?this.$fastController.isConnected&&this.options&&(this.selectedOptions=this.options.filter((t=>t.selected)),this.focusAndScrollOptionIntoView()):super.setSelectedOptions()}sizeChanged(t,e){var i;const n=Math.max(0,parseInt(null!==(i=null==e?void 0:e.toFixed())&&void 0!==i?i:"",10));n!==e&&Tt.SO.queueUpdate((()=>{this.size=n}))}toggleSelectedForAllCheckedOptions(){const t=this.checkedOptions.filter((t=>!t.disabled)),e=!t.every((t=>t.selected));t.forEach((t=>t.selected=e)),this.selectedIndex=this.options.indexOf(t[t.length-1]),this.setSelectedOptions()}typeaheadBufferChanged(t,e){if(this.multiple){if(this.$fastController.isConnected){const t=this.getTypeaheadMatches(),e=this.options.indexOf(t[0]);e>-1&&(this.activeIndex=e,this.uncheckAllOptions(),this.checkActiveIndex()),this.typeAheadExpired=!1}}else super.typeaheadBufferChanged(t,e)}uncheckAllOptions(t=!1){this.options.forEach((t=>t.checked=!this.multiple&&void 0)),t||(this.rangeStartIndex=-1)}}Et([Nt],wp.prototype,"activeIndex",void 0),Et([Kt({mode:"boolean"})],wp.prototype,"multiple",void 0),Et([Kt({converter:Wt})],wp.prototype,"size",void 0);const Rp=Dp.compose({baseName:"listbox",template:(t,e)=>Dl`
    <template
        aria-activedescendant="${t=>t.ariaActiveDescendant}"
        aria-multiselectable="${t=>t.ariaMultiSelectable}"
        class="listbox"
        role="listbox"
        tabindex="${t=>t.disabled?null:"0"}"
        @click="${(t,e)=>t.clickHandler(e.event)}"
        @focusin="${(t,e)=>t.focusinHandler(e.event)}"
        @keydown="${(t,e)=>t.keydownHandler(e.event)}"
        @mousedown="${(t,e)=>t.mousedownHandler(e.event)}"
    >
        <slot
            ${Ol({filter:wp.slottedOptionFilter,flatten:!0,property:"slottedOptions"})}
        ></slot>
    </template>
`,styles:(t,e)=>Ml`
    ${Ll("inline-flex")} :host {
      background: ${qn};
      border: calc(${Ui} * 1px) solid ${Bo};
      border-radius: calc(${Zi} * 1px);
      box-sizing: border-box;
      flex-direction: column;
      padding: calc(${Hi} * 1px) 0;
    }

    :host(:focus-within:not([disabled])) {
      border-color: ${Xo};
      box-shadow: 0 0 0 1px ${Xo} inset;
    }
  `.withBehaviors(Nc(Ml`
        :host(:${Au}) ::slotted([aria-selected="true"][role="option"]) {
          background: ${_c.Highlight};
          border-color: ${_c.ButtonText};
          box-shadow: 0 0 0 calc(${Gi} * 1px) inset ${_c.HighlightText};
          color: ${_c.HighlightText};
          fill: currentcolor;
        }

        :host(:${Au}) ::slotted([aria-selected="true"][role="option"]) {
          background: ${_c.Highlight};
          border-color: ${_c.ButtonText};
          box-shadow: 0 0 0 calc(${Gi} * 1px) inset ${_c.HighlightText};
          color: ${_c.HighlightText};
          fill: currentcolor;
        }

        ::slotted([role='option']:not([aria-selected='true']):not([disabled]):hover) {
          forced-color-adjust: none;
          color: ${_c.ButtonText};
          background: ${_c.ButtonFace};
          border-color: ${_c.Highlight};
          box-shadow: none;
        }
      `))}),Op=Tp.compose({baseName:"option",template:(t,e)=>Dl`
    <template
        aria-checked="${t=>t.ariaChecked}"
        aria-disabled="${t=>t.ariaDisabled}"
        aria-posinset="${t=>t.ariaPosInSet}"
        aria-selected="${t=>t.ariaSelected}"
        aria-setsize="${t=>t.ariaSetSize}"
        class="${t=>[t.checked&&"checked",t.selected&&"selected",t.disabled&&"disabled"].filter(Boolean).join(" ")}"
        role="option"
    >
        ${zl(0,e)}
        <span class="content" part="content">
            <slot ${Ol("content")}></slot>
        </span>
        ${Wl(0,e)}
    </template>
`,styles:(t,e)=>Ml`
    ${Ll("inline-flex")} :host {
      font-family: ${Vi};
      border-radius: calc(${Zi} * 1px);
      border: calc(${Gi} * 1px) solid transparent;
      box-sizing: border-box;
      color: ${ta};
      cursor: pointer;
      fill: currentcolor;
      font-size: ${$i};
      height: calc(${Tu} * 1px);
      line-height: ${Wi};
      margin: 0 calc(${Hi} * 1px);
      outline: none;
      overflow: hidden;
      align-items: center;
      padding: 0 calc(${Hi} * 2.25px);
      user-select: none;
      white-space: nowrap;
    }

    :host(:${Au}) {
      box-shadow: 0 0 0 calc(${Gi} * 1px) inset ${Jo};
      border-color: ${Xo};
      background: ${co};
      color: ${mo};
    }

    :host([aria-selected='true']) {
      background: ${ro};
      color: ${po};
    }

    :host(:hover) {
      background: ${so};
      color: ${fo};
    }

    :host(:active) {
      background: ${lo};
      color: ${go};
    }

    :host(:not([aria-selected='true']):hover) {
      background: ${To};
      color: ${ta};
    }

    :host(:not([aria-selected='true']):active) {
      background: ${Io};
      color: ${ta};
    }

    :host([disabled]) {
      cursor: ${Kh};
      opacity: ${Ni};
    }

    :host([disabled]:hover) {
      background-color: inherit;
    }

    .content {
      grid-column-start: 2;
      justify-self: start;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .start,
    .end,
    ::slotted(svg) {
      display: flex;
    }

    ::slotted(svg) {
      ${""}
      height: calc(${Hi} * 4px);
      width: calc(${Hi} * 4px);
    }

    ::slotted([slot='end']) {
      margin-inline-start: 1ch;
    }

    ::slotted([slot='start']) {
      margin-inline-end: 1ch;
    }
  `.withBehaviors(Nc(Ml`
        :host {
          border-color: transparent;
          color: ${_c.ButtonText};
          forced-color-adjust: none;
        }

        :host(:not([aria-selected='true']):hover),
        :host([aria-selected='true']) {
          background: ${_c.Highlight};
          color: ${_c.HighlightText};
        }

        :host([disabled]),
        :host([disabled]:not([aria-selected='true']):hover) {
          background: ${_c.Canvas};
          color: ${_c.GrayText};
          fill: currentcolor;
          opacity: 1;
        }
      `))});class Pp extends qs{}class Mp extends(dc(Pp)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}class Np extends Mp{constructor(){super(),this.initialValue="on",this.keypressHandler=t=>{if(t.key!==oc)return!0;this.checked||this.readOnly||(this.checked=!0)},this.proxy.setAttribute("type","radio")}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly)}defaultCheckedChanged(){var t;this.$fastController.isConnected&&!this.dirtyChecked&&(this.isInsideRadioGroup()||(this.checked=null!==(t=this.defaultChecked)&&void 0!==t&&t,this.dirtyChecked=!1))}connectedCallback(){var t,e;super.connectedCallback(),this.validate(),"radiogroup"!==(null===(t=this.parentElement)||void 0===t?void 0:t.getAttribute("role"))&&null===this.getAttribute("tabindex")&&(this.disabled||this.setAttribute("tabindex","0")),this.checkedAttribute&&(this.dirtyChecked||this.isInsideRadioGroup()||(this.checked=null!==(e=this.defaultChecked)&&void 0!==e&&e,this.dirtyChecked=!1))}isInsideRadioGroup(){return null!==this.closest("[role=radiogroup]")}clickHandler(t){this.disabled||this.readOnly||this.checked||(this.checked=!0)}}Et([Kt({attribute:"readonly",mode:"boolean"})],Np.prototype,"readOnly",void 0),Et([Nt],Np.prototype,"name",void 0),Et([Nt],Np.prototype,"defaultSlottedNodes",void 0);const Lp=Np.compose({baseName:"radio",template:(t,e)=>Dl`
    <template
        role="radio"
        class="${t=>t.checked?"checked":""} ${t=>t.readOnly?"readonly":""}"
        aria-checked="${t=>t.checked}"
        aria-required="${t=>t.required}"
        aria-disabled="${t=>t.disabled}"
        aria-readonly="${t=>t.readOnly}"
        @keypress="${(t,e)=>t.keypressHandler(e.event)}"
        @click="${(t,e)=>t.clickHandler(e.event)}"
    >
        <div part="control" class="control">
            <slot name="checked-indicator">
                ${e.checkedIndicator||""}
            </slot>
        </div>
        <label
            part="label"
            class="${t=>t.defaultSlottedNodes&&t.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot ${Ol("defaultSlottedNodes")}></slot>
        </label>
    </template>
`,styles:(t,e)=>Ml`
    ${Ll("inline-flex")} :host {
      --input-size: calc((${Tu} / 2) + ${Hi});
      align-items: center;
      outline: none;
      margin: calc(${Hi} * 1px) 0;
      ${""} user-select: none;
      position: relative;
      flex-direction: row;
      transition: all 0.2s ease-in-out;
    }

    .control {
      position: relative;
      width: calc(var(--input-size) * 1px);
      height: calc(var(--input-size) * 1px);
      box-sizing: border-box;
      border-radius: 50%;
      border: calc(${Ui} * 1px) solid ${zo};
      background: ${ko};
      outline: none;
      cursor: pointer;
    }

    .label__hidden {
      display: none;
      visibility: hidden;
    }

    .label {
      font-family: ${Vi};
      color: ${ta};
      ${""} padding-inline-start: calc(${Hi} * 2px + 2px);
      margin-inline-end: calc(${Hi} * 2px + 2px);
      cursor: pointer;
      font-size: ${$i};
      line-height: ${Wi};
    }

    .control,
    .checked-indicator {
      flex-shrink: 0;
    }

    .checked-indicator {
      position: absolute;
      top: 5px;
      left: 5px;
      right: 5px;
      bottom: 5px;
      border-radius: 50%;
      display: inline-block;
      background: ${ta};
      fill: ${ta};
      opacity: 0;
      pointer-events: none;
    }

    :host(:enabled) .control:hover {
      background: ${wo};
      border-color: ${Ko};
    }

    :host(:enabled) .control:active {
      background: ${Ro};
      border-color: ${Yo};
    }

    :host(:${Au}) .control {
      box-shadow: 0 0 0 2px ${no}, 0 0 0 4px ${Xo};
      border-color: ${Xo};
    }

    :host(.disabled) .label,
    :host(.readonly) .label,
    :host(.readonly) .control,
    :host(.disabled) .control {
      cursor: ${Kh};
    }

    :host(.checked) .checked-indicator {
      opacity: 1;
    }

    :host(.disabled) {
      opacity: ${Ni};
    }
  `.withBehaviors(Nc(Ml`
        .control {
          forced-color-adjust: none;
          border-color: ${_c.FieldText};
          background: ${_c.Field};
        }
        :host(:enabled) .control:hover,
        .control:active {
          border-color: ${_c.Highlight};
          background: ${_c.Field};
        }
        :host(:${Au}) .control {
          border-color: ${_c.Highlight};
          box-shadow: 0 0 0 2px ${_c.Field}, 0 0 0 4px ${_c.FieldText};
        }
        :host(.checked:${Au}:enabled) .control {
          border-color: ${_c.Highlight};
          box-shadow: 0 0 0 2px ${_c.Field}, 0 0 0 4px ${_c.FieldText};
        }
        :host(.checked:enabled) .control:hover,
        .control:active {
          border-color: ${_c.Highlight};
          background: ${_c.Highlight};
        }
        :host(.checked) .checked-indicator {
          background: ${_c.Highlight};
          fill: ${_c.Highlight};
        }
        :host(.checked) .control:hover .checked-indicator {
          background: ${_c.HighlightText};
          fill: ${_c.HighlightText};
        }
        :host(.disabled) {
          forced-color-adjust: none;
          opacity: 1;
        }
        :host(.disabled) .label {
          color: ${_c.GrayText};
        }
        :host(.disabled) .control,
        :host(.checked.disabled) .control:hover,
        .control:active {
          background: ${_c.Field};
          border-color: ${_c.GrayText};
        }
        :host(.disabled) .checked-indicator,
        :host(.checked.disabled) .control:hover .checked-indicator {
          fill: ${_c.GrayText};
          background: ${_c.GrayText};
        }
      `)),checkedIndicator:'\n    <div part="checked-indicator" class="checked-indicator"></div>\n  '});class _p extends qs{constructor(){super(...arguments),this.orientation=uh.horizontal,this.radioChangeHandler=t=>{const e=t.target;e.checked&&(this.slottedRadioButtons.forEach((t=>{t!==e&&(t.checked=!1,this.isInsideFoundationToolbar||t.setAttribute("tabindex","-1"))})),this.selectedRadio=e,this.value=e.value,e.setAttribute("tabindex","0"),this.focusedRadio=e),t.stopPropagation()},this.moveToRadioByIndex=(t,e)=>{const i=t[e];this.isInsideToolbar||(i.setAttribute("tabindex","0"),i.readOnly?this.slottedRadioButtons.forEach((t=>{t!==i&&t.setAttribute("tabindex","-1")})):(i.checked=!0,this.selectedRadio=i)),this.focusedRadio=i,i.focus()},this.moveRightOffGroup=()=>{var t;null===(t=this.nextElementSibling)||void 0===t||t.focus()},this.moveLeftOffGroup=()=>{var t;null===(t=this.previousElementSibling)||void 0===t||t.focus()},this.focusOutHandler=t=>{const e=this.slottedRadioButtons,i=t.target,n=null!==i?e.indexOf(i):0,o=this.focusedRadio?e.indexOf(this.focusedRadio):-1;return(0===o&&n===o||o===e.length-1&&o===n)&&(this.selectedRadio?(this.focusedRadio=this.selectedRadio,this.isInsideFoundationToolbar||(this.selectedRadio.setAttribute("tabindex","0"),e.forEach((t=>{t!==this.selectedRadio&&t.setAttribute("tabindex","-1")})))):(this.focusedRadio=e[0],this.focusedRadio.setAttribute("tabindex","0"),e.forEach((t=>{t!==this.focusedRadio&&t.setAttribute("tabindex","-1")})))),!0},this.clickHandler=t=>{const e=t.target;if(e){const t=this.slottedRadioButtons;e.checked||0===t.indexOf(e)?(e.setAttribute("tabindex","0"),this.selectedRadio=e):(e.setAttribute("tabindex","-1"),this.selectedRadio=null),this.focusedRadio=e}t.preventDefault()},this.shouldMoveOffGroupToTheRight=(t,e,i)=>t===e.length&&this.isInsideToolbar&&i===Jl,this.shouldMoveOffGroupToTheLeft=(t,e)=>(this.focusedRadio?t.indexOf(this.focusedRadio)-1:0)<0&&this.isInsideToolbar&&e===ql,this.checkFocusedRadio=()=>{null===this.focusedRadio||this.focusedRadio.readOnly||this.focusedRadio.checked||(this.focusedRadio.checked=!0,this.focusedRadio.setAttribute("tabindex","0"),this.focusedRadio.focus(),this.selectedRadio=this.focusedRadio)},this.moveRight=t=>{const e=this.slottedRadioButtons;let i=0;if(i=this.focusedRadio?e.indexOf(this.focusedRadio)+1:1,this.shouldMoveOffGroupToTheRight(i,e,t.key))this.moveRightOffGroup();else for(i===e.length&&(i=0);i<e.length&&e.length>1;){if(!e[i].disabled){this.moveToRadioByIndex(e,i);break}if(this.focusedRadio&&i===e.indexOf(this.focusedRadio))break;if(i+1>=e.length){if(this.isInsideToolbar)break;i=0}else i+=1}},this.moveLeft=t=>{const e=this.slottedRadioButtons;let i=0;if(i=this.focusedRadio?e.indexOf(this.focusedRadio)-1:0,i=i<0?e.length-1:i,this.shouldMoveOffGroupToTheLeft(e,t.key))this.moveLeftOffGroup();else for(;i>=0&&e.length>1;){if(!e[i].disabled){this.moveToRadioByIndex(e,i);break}if(this.focusedRadio&&i===e.indexOf(this.focusedRadio))break;i-1<0?i=e.length-1:i-=1}},this.keydownHandler=t=>{const e=t.key;if(e in ac&&this.isInsideFoundationToolbar)return!0;switch(e){case tc:this.checkFocusedRadio();break;case Jl:case Xl:this.direction===xe.ltr?this.moveRight(t):this.moveLeft(t);break;case ql:case Ql:this.direction===xe.ltr?this.moveLeft(t):this.moveRight(t);break;default:return!0}}}readOnlyChanged(){void 0!==this.slottedRadioButtons&&this.slottedRadioButtons.forEach((t=>{this.readOnly?t.readOnly=!0:t.readOnly=!1}))}disabledChanged(){void 0!==this.slottedRadioButtons&&this.slottedRadioButtons.forEach((t=>{this.disabled?t.disabled=!0:t.disabled=!1}))}nameChanged(){this.slottedRadioButtons&&this.slottedRadioButtons.forEach((t=>{t.setAttribute("name",this.name)}))}valueChanged(){this.slottedRadioButtons&&this.slottedRadioButtons.forEach((t=>{t.getAttribute("value")===this.value&&(t.checked=!0,this.selectedRadio=t)})),this.$emit("change")}slottedRadioButtonsChanged(t,e){this.slottedRadioButtons&&this.slottedRadioButtons.length>0&&this.setupRadioButtons()}get parentToolbar(){return this.closest('[role="toolbar"]')}get isInsideToolbar(){var t;return null!==(t=this.parentToolbar)&&void 0!==t&&t}get isInsideFoundationToolbar(){var t;return!!(null===(t=this.parentToolbar)||void 0===t?void 0:t.$fastController)}connectedCallback(){super.connectedCallback(),this.direction=Hl(this),this.setupRadioButtons()}disconnectedCallback(){this.slottedRadioButtons.forEach((t=>{t.removeEventListener("change",this.radioChangeHandler)}))}setupRadioButtons(){const t=this.slottedRadioButtons.filter((t=>t.hasAttribute("checked"))),e=t?t.length:0;if(e>1){t[e-1].checked=!0}let i=!1;if(this.slottedRadioButtons.forEach((t=>{void 0!==this.name&&t.setAttribute("name",this.name),this.disabled&&(t.disabled=!0),this.readOnly&&(t.readOnly=!0),this.value&&this.value===t.value?(this.selectedRadio=t,this.focusedRadio=t,t.checked=!0,t.setAttribute("tabindex","0"),i=!0):(this.isInsideFoundationToolbar||t.setAttribute("tabindex","-1"),t.checked=!1),t.addEventListener("change",this.radioChangeHandler)})),void 0===this.value&&this.slottedRadioButtons.length>0){const t=this.slottedRadioButtons.filter((t=>t.hasAttribute("checked"))),e=null!==t?t.length:0;if(e>0&&!i){const i=t[e-1];i.checked=!0,this.focusedRadio=i,i.setAttribute("tabindex","0")}else this.slottedRadioButtons[0].setAttribute("tabindex","0"),this.focusedRadio=this.slottedRadioButtons[0]}}}Et([Kt({attribute:"readonly",mode:"boolean"})],_p.prototype,"readOnly",void 0),Et([Kt({attribute:"disabled",mode:"boolean"})],_p.prototype,"disabled",void 0),Et([Kt],_p.prototype,"name",void 0),Et([Kt],_p.prototype,"value",void 0),Et([Kt],_p.prototype,"orientation",void 0),Et([Nt],_p.prototype,"childItems",void 0),Et([Nt],_p.prototype,"slottedRadioButtons",void 0);const Fp=_p.compose({baseName:"radio-group",template:(t,e)=>Dl`
    <template
        role="radiogroup"
        aria-disabled="${t=>t.disabled}"
        aria-readonly="${t=>t.readOnly}"
        @click="${(t,e)=>t.clickHandler(e.event)}"
        @keydown="${(t,e)=>t.keydownHandler(e.event)}"
        @focusout="${(t,e)=>t.focusOutHandler(e.event)}"
    >
        <slot name="label"></slot>
        <div
            class="positioning-region ${t=>t.orientation===uh.horizontal?"horizontal":"vertical"}"
            part="positioning-region"
        >
            <slot
                ${Ol({property:"slottedRadioButtons",filter:kl("[role=radio]")})}
            ></slot>
        </div>
    </template>
`,styles:(t,e)=>Ml`
  ${Ll("flex")} :host {
    align-items: flex-start;
    margin: calc(${Hi} * 1px) 0;
    flex-direction: column;
  }

  .positioning-region {
    display: flex;
    flex-wrap: wrap;
  }

  :host([orientation='vertical']) .positioning-region {
    flex-direction: column;
  }

  :host([orientation='horizontal']) .positioning-region {
    flex-direction: row;
  }
`});const Hp=class extends sh{}.compose({baseName:"progress-ring",template:(t,e)=>Dl`
    <template
        role="progressbar"
        aria-valuenow="${t=>t.value}"
        aria-valuemin="${t=>t.min}"
        aria-valuemax="${t=>t.max}"
        class="${t=>t.paused?"paused":""}"
    >
        ${Gl((t=>"number"==typeof t.value),Dl`
                <svg
                    class="progress"
                    part="progress"
                    viewBox="0 0 16 16"
                    slot="determinate"
                >
                    <circle
                        class="background"
                        part="background"
                        cx="8px"
                        cy="8px"
                        r="7px"
                    ></circle>
                    <circle
                        class="determinate"
                        part="determinate"
                        style="stroke-dasharray: ${t=>44*t.percentComplete/100}px ${44}px"
                        cx="8px"
                        cy="8px"
                        r="7px"
                    ></circle>
                </svg>
            `)}
        ${Gl((t=>"number"!=typeof t.value),Dl`
                <slot name="indeterminate" slot="indeterminate">
                    ${e.indeterminateIndicator||""}
                </slot>
            `)}
    </template>
`,styles:(t,e)=>Ml`
      ${Ll("flex")} :host {
        align-items: center;
        outline: none;
        height: calc(${Tu} * 1px);
        width: calc(${Tu} * 1px);
        margin: calc(${Tu} * 1px) 0;
      }

      .progress {
        height: 100%;
        width: 100%;
      }

      .background {
        stroke: ${Ao};
        fill: none;
        stroke-width: 2px;
      }

      .determinate {
        stroke: ${ro};
        fill: none;
        stroke-width: 2px;
        stroke-linecap: round;
        transform-origin: 50% 50%;
        transform: rotate(-90deg);
        transition: all 0.2s ease-in-out;
      }

      .indeterminate-indicator-1 {
        stroke: ${ro};
        fill: none;
        stroke-width: 2px;
        stroke-linecap: round;
        transform-origin: 50% 50%;
        transform: rotate(-90deg);
        transition: all 0.2s ease-in-out;
        animation: spin-infinite 2s linear infinite;
      }

      :host(.paused) .indeterminate-indicator-1 {
        animation-play-state: paused;
        stroke: ${Ao};
      }

      :host(.paused) .determinate {
        stroke: ${ia};
      }

      @keyframes spin-infinite {
        0% {
          stroke-dasharray: 0.01px 43.97px;
          transform: rotate(0deg);
        }
        50% {
          stroke-dasharray: 21.99px 21.99px;
          transform: rotate(450deg);
        }
        100% {
          stroke-dasharray: 0.01px 43.97px;
          transform: rotate(1080deg);
        }
      }
    `.withBehaviors(Nc(Ml`
          .indeterminate-indicator-1,
          .determinate {
            stroke: ${_c.FieldText};
          }
          .background {
            stroke: ${_c.Field};
          }
          :host(.paused) .indeterminate-indicator-1 {
            stroke: ${_c.Field};
          }
          :host(.paused) .determinate {
            stroke: ${_c.GrayText};
          }
        `)),indeterminateIndicator:'\n    <svg class="progress" part="progress" viewBox="0 0 16 16">\n        <circle\n            class="background"\n            part="background"\n            cx="8px"\n            cy="8px"\n            r="7px"\n        ></circle>\n        <circle\n            class="indeterminate-indicator-1"\n            part="indeterminate-indicator-1"\n            cx="8px"\n            cy="8px"\n            r="7px"\n        ></circle>\n    </svg>\n  '}),Zp=hh.compose({baseName:"divider",template:(t,e)=>Dl`
    <template role="${t=>t.role}" aria-orientation="${t=>t.orientation}"></template>
`,styles:(t,e)=>Ml`
    ${Ll("block")} :host {
      box-sizing: content-box;
      height: 0;
      margin: calc(${Hi} * 1px) 0;
      border: none;
      border-top: calc(${Ui} * 1px) solid ${$o};
    }
  `}),Bp=Zl.compose({baseName:"anchored-region",template:(t,e)=>Dl`
    <template class="${t=>t.initialLayoutComplete?"loaded":""}">
        ${Gl((t=>t.initialLayoutComplete),Dl`
                <slot></slot>
            `)}
    </template>
`,styles:(t,e)=>Ml`
  :host {
    contain: layout;
    display: block;
  }
`});var Up;!function(t){t.top="top",t.right="right",t.bottom="bottom",t.left="left",t.start="start",t.end="end",t.topLeft="top-left",t.topRight="top-right",t.bottomLeft="bottom-left",t.bottomRight="bottom-right",t.topStart="top-start",t.topEnd="top-end",t.bottomStart="bottom-start",t.bottomEnd="bottom-end"}(Up||(Up={}));class Gp extends qs{constructor(){super(...arguments),this.anchor="",this.delay=300,this.autoUpdateMode="anchor",this.anchorElement=null,this.viewportElement=null,this.verticalPositioningMode="dynamic",this.horizontalPositioningMode="dynamic",this.horizontalInset="false",this.verticalInset="false",this.horizontalScaling="content",this.verticalScaling="content",this.verticalDefaultPosition=void 0,this.horizontalDefaultPosition=void 0,this.tooltipVisible=!1,this.currentDirection=xe.ltr,this.showDelayTimer=null,this.hideDelayTimer=null,this.isAnchorHoveredFocused=!1,this.isRegionHovered=!1,this.handlePositionChange=t=>{this.classList.toggle("top","start"===this.region.verticalPosition),this.classList.toggle("bottom","end"===this.region.verticalPosition),this.classList.toggle("inset-top","insetStart"===this.region.verticalPosition),this.classList.toggle("inset-bottom","insetEnd"===this.region.verticalPosition),this.classList.toggle("center-vertical","center"===this.region.verticalPosition),this.classList.toggle("left","start"===this.region.horizontalPosition),this.classList.toggle("right","end"===this.region.horizontalPosition),this.classList.toggle("inset-left","insetStart"===this.region.horizontalPosition),this.classList.toggle("inset-right","insetEnd"===this.region.horizontalPosition),this.classList.toggle("center-horizontal","center"===this.region.horizontalPosition)},this.handleRegionMouseOver=t=>{this.isRegionHovered=!0},this.handleRegionMouseOut=t=>{this.isRegionHovered=!1,this.startHideDelayTimer()},this.handleAnchorMouseOver=t=>{this.tooltipVisible?this.isAnchorHoveredFocused=!0:this.startShowDelayTimer()},this.handleAnchorMouseOut=t=>{this.isAnchorHoveredFocused=!1,this.clearShowDelayTimer(),this.startHideDelayTimer()},this.handleAnchorFocusIn=t=>{this.startShowDelayTimer()},this.handleAnchorFocusOut=t=>{this.isAnchorHoveredFocused=!1,this.clearShowDelayTimer(),this.startHideDelayTimer()},this.startHideDelayTimer=()=>{this.clearHideDelayTimer(),this.tooltipVisible&&(this.hideDelayTimer=window.setTimeout((()=>{this.updateTooltipVisibility()}),60))},this.clearHideDelayTimer=()=>{null!==this.hideDelayTimer&&(clearTimeout(this.hideDelayTimer),this.hideDelayTimer=null)},this.startShowDelayTimer=()=>{this.isAnchorHoveredFocused||(this.delay>1?null===this.showDelayTimer&&(this.showDelayTimer=window.setTimeout((()=>{this.startHover()}),this.delay)):this.startHover())},this.startHover=()=>{this.isAnchorHoveredFocused=!0,this.updateTooltipVisibility()},this.clearShowDelayTimer=()=>{null!==this.showDelayTimer&&(clearTimeout(this.showDelayTimer),this.showDelayTimer=null)},this.getAnchor=()=>{const t=this.getRootNode();return t instanceof ShadowRoot?t.getElementById(this.anchor):document.getElementById(this.anchor)},this.handleDocumentKeydown=t=>{if(!t.defaultPrevented&&this.tooltipVisible&&t.key===ec)this.isAnchorHoveredFocused=!1,this.updateTooltipVisibility(),this.$emit("dismiss")},this.updateTooltipVisibility=()=>{if(!1===this.visible)this.hideTooltip();else{if(!0===this.visible)return void this.showTooltip();if(this.isAnchorHoveredFocused||this.isRegionHovered)return void this.showTooltip();this.hideTooltip()}},this.showTooltip=()=>{this.tooltipVisible||(this.currentDirection=Hl(this),this.tooltipVisible=!0,document.addEventListener("keydown",this.handleDocumentKeydown),Tt.SO.queueUpdate(this.setRegionProps))},this.hideTooltip=()=>{this.tooltipVisible&&(this.clearHideDelayTimer(),null!==this.region&&void 0!==this.region&&(this.region.removeEventListener("positionchange",this.handlePositionChange),this.region.viewportElement=null,this.region.anchorElement=null,this.region.removeEventListener("mouseover",this.handleRegionMouseOver),this.region.removeEventListener("mouseout",this.handleRegionMouseOut)),document.removeEventListener("keydown",this.handleDocumentKeydown),this.tooltipVisible=!1)},this.setRegionProps=()=>{this.tooltipVisible&&(this.region.viewportElement=this.viewportElement,this.region.anchorElement=this.anchorElement,this.region.addEventListener("positionchange",this.handlePositionChange),this.region.addEventListener("mouseover",this.handleRegionMouseOver,{passive:!0}),this.region.addEventListener("mouseout",this.handleRegionMouseOut,{passive:!0}))}}visibleChanged(){this.$fastController.isConnected&&(this.updateTooltipVisibility(),this.updateLayout())}anchorChanged(){this.$fastController.isConnected&&(this.anchorElement=this.getAnchor())}positionChanged(){this.$fastController.isConnected&&this.updateLayout()}anchorElementChanged(t){if(this.$fastController.isConnected){if(null!=t&&(t.removeEventListener("mouseover",this.handleAnchorMouseOver),t.removeEventListener("mouseout",this.handleAnchorMouseOut),t.removeEventListener("focusin",this.handleAnchorFocusIn),t.removeEventListener("focusout",this.handleAnchorFocusOut)),null!==this.anchorElement&&void 0!==this.anchorElement){this.anchorElement.addEventListener("mouseover",this.handleAnchorMouseOver,{passive:!0}),this.anchorElement.addEventListener("mouseout",this.handleAnchorMouseOut,{passive:!0}),this.anchorElement.addEventListener("focusin",this.handleAnchorFocusIn,{passive:!0}),this.anchorElement.addEventListener("focusout",this.handleAnchorFocusOut,{passive:!0});const t=this.anchorElement.id;null!==this.anchorElement.parentElement&&this.anchorElement.parentElement.querySelectorAll(":hover").forEach((e=>{e.id===t&&this.startShowDelayTimer()}))}null!==this.region&&void 0!==this.region&&this.tooltipVisible&&(this.region.anchorElement=this.anchorElement),this.updateLayout()}}viewportElementChanged(){null!==this.region&&void 0!==this.region&&(this.region.viewportElement=this.viewportElement),this.updateLayout()}connectedCallback(){super.connectedCallback(),this.anchorElement=this.getAnchor(),this.updateTooltipVisibility()}disconnectedCallback(){this.hideTooltip(),this.clearShowDelayTimer(),this.clearHideDelayTimer(),super.disconnectedCallback()}updateLayout(){switch(this.verticalPositioningMode="locktodefault",this.horizontalPositioningMode="locktodefault",this.position){case Up.top:case Up.bottom:this.verticalDefaultPosition=this.position,this.horizontalDefaultPosition="center";break;case Up.right:case Up.left:case Up.start:case Up.end:this.verticalDefaultPosition="center",this.horizontalDefaultPosition=this.position;break;case Up.topLeft:this.verticalDefaultPosition="top",this.horizontalDefaultPosition="left";break;case Up.topRight:this.verticalDefaultPosition="top",this.horizontalDefaultPosition="right";break;case Up.bottomLeft:this.verticalDefaultPosition="bottom",this.horizontalDefaultPosition="left";break;case Up.bottomRight:this.verticalDefaultPosition="bottom",this.horizontalDefaultPosition="right";break;case Up.topStart:this.verticalDefaultPosition="top",this.horizontalDefaultPosition="start";break;case Up.topEnd:this.verticalDefaultPosition="top",this.horizontalDefaultPosition="end";break;case Up.bottomStart:this.verticalDefaultPosition="bottom",this.horizontalDefaultPosition="start";break;case Up.bottomEnd:this.verticalDefaultPosition="bottom",this.horizontalDefaultPosition="end";break;default:this.verticalPositioningMode="dynamic",this.horizontalPositioningMode="dynamic",this.verticalDefaultPosition=void 0,this.horizontalDefaultPosition="center"}}}Et([Kt({mode:"boolean"})],Gp.prototype,"visible",void 0),Et([Kt],Gp.prototype,"anchor",void 0),Et([Kt],Gp.prototype,"delay",void 0),Et([Kt],Gp.prototype,"position",void 0),Et([Kt({attribute:"auto-update-mode"})],Gp.prototype,"autoUpdateMode",void 0),Et([Kt({attribute:"horizontal-viewport-lock"})],Gp.prototype,"horizontalViewportLock",void 0),Et([Kt({attribute:"vertical-viewport-lock"})],Gp.prototype,"verticalViewportLock",void 0),Et([Nt],Gp.prototype,"anchorElement",void 0),Et([Nt],Gp.prototype,"viewportElement",void 0),Et([Nt],Gp.prototype,"verticalPositioningMode",void 0),Et([Nt],Gp.prototype,"horizontalPositioningMode",void 0),Et([Nt],Gp.prototype,"horizontalInset",void 0),Et([Nt],Gp.prototype,"verticalInset",void 0),Et([Nt],Gp.prototype,"horizontalScaling",void 0),Et([Nt],Gp.prototype,"verticalScaling",void 0),Et([Nt],Gp.prototype,"verticalDefaultPosition",void 0),Et([Nt],Gp.prototype,"horizontalDefaultPosition",void 0),Et([Nt],Gp.prototype,"tooltipVisible",void 0),Et([Nt],Gp.prototype,"currentDirection",void 0);const Vp=class extends Gp{connectedCallback(){super.connectedCallback();const t=Oo.getValueFor(this),e=no.getValueFor(this.parentElement);no.setValueFor(this,(i=>t.evaluate(i,e).rest))}}.compose({baseName:"tooltip",baseClass:Gp,template:(t,e)=>Dl`
        ${Gl((t=>t.tooltipVisible),Dl`
            <${t.tagFor(Zl)}
                fixed-placement="true"
                auto-update-mode="${t=>t.autoUpdateMode}"
                vertical-positioning-mode="${t=>t.verticalPositioningMode}"
                vertical-default-position="${t=>t.verticalDefaultPosition}"
                vertical-inset="${t=>t.verticalInset}"
                vertical-scaling="${t=>t.verticalScaling}"
                horizontal-positioning-mode="${t=>t.horizontalPositioningMode}"
                horizontal-default-position="${t=>t.horizontalDefaultPosition}"
                horizontal-scaling="${t=>t.horizontalScaling}"
                horizontal-inset="${t=>t.horizontalInset}"
                vertical-viewport-lock="${t=>t.horizontalViewportLock}"
                horizontal-viewport-lock="${t=>t.verticalViewportLock}"
                dir="${t=>t.currentDirection}"
                ${Ul("region")}
            >
                <div class="tooltip" part="tooltip" role="tooltip">
                    <slot></slot>
                </div>
            </${t.tagFor(Zl)}>
        `)}
    `,styles:(t,e)=>Ml`
    :host {
      --elevation: 11;
      position: relative;
      contain: layout;
      overflow: visible;
      height: 0;
      width: 0;
      z-index: 10000;
    }

    .tooltip {
      box-sizing: border-box;
      border-radius: calc(${Zi} * 1px);
      border: calc(${Ui} * 1px) solid transparent;
      background: ${no};
      color: ${ta};
      padding: 4px 12px;
      height: fit-content;
      width: fit-content;
      font-family: ${Vi};
      font-size: ${$i};
      line-height: ${Wi};
      white-space: nowrap;
      ${Hu}
    }

    fluent-anchored-region {
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: visible;
      flex-direction: row;
    }

    fluent-anchored-region.right,
    fluent-anchored-region.left {
      flex-direction: column;
    }

    fluent-anchored-region.top .tooltip::after,
    fluent-anchored-region.bottom .tooltip::after,
    fluent-anchored-region.left .tooltip::after,
    fluent-anchored-region.right .tooltip::after {
      content: '';
      width: 12px;
      height: 12px;
      background: ${no};
      border-radius: calc(${Zi} * 1px);
      position: absolute;
    }

    fluent-anchored-region.top .tooltip::after {
      transform: rotate(45deg) translateX(-50%);
      bottom: 4px;
      left: 50%;
    }

    fluent-anchored-region.top .tooltip {
      margin-bottom: 12px;
    }

    fluent-anchored-region.bottom .tooltip::after {
      transform: rotate(45deg) translateX(-50%);
      top: 12px;
      left: 50%;
    }

    fluent-anchored-region.bottom .tooltip {
      margin-top: 12px;
    }

    fluent-anchored-region.left .tooltip::after {
      transform: rotate(45deg) translateY(-50%);
      top: 50%;
      right: 12px;
    }

    fluent-anchored-region.left .tooltip {
      margin-right: 12px;
    }

    fluent-anchored-region.right .tooltip::after {
      transform: rotate(45deg) translateY(-50%);
      top: 50%;
      left: 4px;
    }

    fluent-anchored-region.right .tooltip {
      margin-left: 12px;
    }
  `.withBehaviors(Nc(Ml`
        :host([disabled]) {
          opacity: 1;
        }
        fluent-anchored-region.top .tooltip::after,
        fluent-anchored-region.bottom .tooltip::after,
        fluent-anchored-region.left .tooltip::after,
        fluent-anchored-region.right .tooltip::after {
          content: '';
          width: unset;
          height: unset;
        }
      `))});function $p(t,e,i,n){var o,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r}Object.create;Object.create;function Wp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var zp,Kp,Yp=function(t){(0,O.Z)(i,t);var e=Wp(i);function i(){var t;return(0,s.Z)(this,i),(t=e.apply(this,arguments)).isVideoCard=!1,t.hasAnnotation=!1,t}return(0,l.Z)(i)}(xu);$p([Kt],Yp.prototype,"price",void 0),$p([Kt],Yp.prototype,"savings",void 0),$p([Kt],Yp.prototype,"lowest",void 0),$p([Kt],Yp.prototype,"retailer",void 0),$p([Kt],Yp.prototype,"description",void 0),$p([Kt],Yp.prototype,"isAd",void 0),$p([Kt],Yp.prototype,"isProductHistoryPane",void 0),$p([Nt],Yp.prototype,"isVideoCard",void 0),$p([Nt],Yp.prototype,"hasAnnotation",void 0);var jp,Xp,qp,Jp,Qp,tf,ef,nf,of=Ml(zp||(zp=(0,E.Z)(["\n    "," :host {\n        --content-max-lines: 2;\n        outline: none;\n        font-family: ",";\n        font-size: ",";\n        font-weight: 600;\n        line-height: ",";\n        min-width: calc("," * 1px);\n        border-radius: calc("," * 1px);\n        box-sizing: border-box;\n        color: ",";\n        fill: currentcolor;\n        cursor: pointer;\n        height: 100px;\n        position: relative;\n    }\n    :host {\n        display: block;\n        box-sizing: border-box;\n    }\n    :host(:hover) {\n        background: linear-gradient(265.08deg, rgba(36, 255, 0, 0.06) -6.71%, rgba(0, 210, 255, 0.06) 38.87%, rgba(255, 188, 125, 0.06) 93.88%);\n    }\n    .control:"," {\n        box-shadow: 0 0 0 calc("," * 1px) ",";\n    }\n    .aProductCardWrapper {\n        display: grid;\n        grid-template-columns: 66px 1fr auto;\n        height: 100px;\n        width: 100%;\n        align-items: center;\n        gap: 15px;\n        padding: 12px;\n        box-sizing: border-box;\n        text-decoration: none;\n        background: transparent;\n        outline: none;\n        border: none;\n        color: inherit;\n        fill: inherit;\n        border-radius: 0px;\n        border-top: 1px solid rgb(236, 236, 236);\n        position: relative;\n    }\n    .divPriceInfo {\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-end;\n        row-gap: 5px;\n    }\n    .divLowestPrice {\n        width: auto;\n        height: 22px;\n        background-color: #DE3700;\n        border-radius: 4px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding-left: 8px;\n        padding-right: 8px;\n        letter-spacing: 0.02em;\n    }\n    .txtPrice {\n        font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n        font-size: 20px;\n        line-height: 24px;\n        text-align: right;\n        color: rgba(0, 0, 0, 0.83);\n        font-weight: 400;\n    }\n    .txtDescription {\n        display: -webkit-box;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n        overflow: hidden;\n    }\n    .txtSavings {\n        font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n        font-size: 11px;\n        line-height: 16px;\n        text-align: right;\n        color: #DE3700;\n        font-weight: 400;\n    }\n    .txtLowest {\n        font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n        font-size: 11px;\n        line-height: 16px;\n        color: #FFFFFF;\n        text-align: center;\n        font-weight: 700;\n    }\n    .txtRetailer {\n        font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n        font-size: 12px;\n        line-height: 16px;\n        text-align: left;\n        align-self: center;\n        font-weight: normal;\n        color: rgba(0, 0, 0, 0.83);\n    }\n    .divTopAnnotation {\n        display: grid;\n        grid-template-columns: auto 1fr;\n        align-items: center;\n    }\n    .divAttribution {\n        display: grid;\n        grid-template-columns: auto minmax(0px, 1fr);\n    }\n    .divTextContent {\n        display: flex;\n        flex-direction: column;\n        row-gap: 6px;\n        padding: 5px;\n        min-width: 0;\n    }\n    .imgProductImage {\n        display: flex;\n        justify-content: center;\n        min-width: 0;\n    }\n    ::slotted([slot=\"previous-price\"]) {\n        text-align: end;\n    }\n    ::slotted([slot=\"deleteEntry\"]) {\n        position: absolute;\n        right: 0px;\n        top: 0px;\n        z-index: 10;\n    }\n    @media (prefers-color-scheme: dark) {\n        .txtRetailer {\n            color: #FFFFFF;\n        }\n        .txtPrice {\n            color: #FFFFFF;\n        }\n        .txtSavings {\n            color: #FFB833;\n        }\n        .aProductCardWrapper {\n            border-top: 1px solid rgb(236, 236, 236, 0.08);\n        }\n    }\n"])),Ll("grid"),Vi,zi,Ki,Tu,Bi,ta,Au,Gi,Xo).withBehaviors(Nc(Ml(Kp||(Kp=(0,E.Z)(["\n        :host {\n            forced-color-adjust: auto;\n        }\n\n        :host .control:hover,\n        :host .control:"," {\n            forced-color-adjust: none;\n            box-shadow: inset 0 0 0 calc(("," * 1px)) ",";\n        }\n\n        :host([href]),\n        :host([href]) .control {\n            color: ",";\n            border-color: ",";\n        }\n\n        :host([href]) .control:hover,\n        :host([href]) .control:"," {\n            forced-color-adjust: none;\n            box-shadow: inset 0 0 0 calc(("," * 1px)) ",';\n        }\n\n        ::slotted([slot="image"]),\n        ::slotted([slot="start"]),\n        ::slotted([slot="end"]) {\n            color: ',";\n            fill: currentcolor;\n        }\n    "])),Au,Ui,_c.ButtonText,_c.LinkText,_c.LinkText,Au,Ui,_c.LinkText,_c.ButtonText))),af=Yp.compose({baseName:"product-card",shadowOptions:{delegatesFocus:!0},styles:of,template:function(t,e){return Dl(jp||(jp=(0,E.Z)(['\n    <template>\n        <a\n        class="aProductCardWrapper control"\n        part="control"\n        ','\n        download="','"\n        href="#"\n        hreflang="','"\n        ping="','"\n        referrerpolicy="','"\n        rel="','"\n        target="','"\n        type="','"\n        aria-atomic="','"\n        aria-busy="','"\n        aria-controls="','"\n        aria-current="','"\n        aria-describedBy="','"\n        aria-details="','"\n        aria-disabled="','"\n        aria-errormessage="','"\n        aria-expanded="','"\n        aria-flowto="','"\n        aria-haspopup="','"\n        aria-hidden="','"\n        aria-invalid="','"\n        aria-keyshortcuts="','"\n        aria-label="','"\n        aria-labelledby="','"\n        aria-live="','"\n        aria-owns="','"\n        aria-relevant="','"\n        aria-roledescription="','">\n            ',"\n            ","\n            ",'\n            <slot name="deleteEntry" class="btnDelete"></slot>\n            <slot name="image" class="imgProductImage"></slot>\n            <div class="divTextContent" part="divTextContent">\n                ','\n                <div class="divTopAnnotation">\n                    <msft-attribution class="divAttribution" part="divAttribution">\n                        <slot name="icon"></slot>\n                        <span class="txtRetailer" title="','">',"</span>\n                    </msft-attribution>\n                    ",'\n                </div>\n                <slot name="end">\n            </div>\n            <div class="divPriceInfo" part="divPriceInfo">\n                ','\n                <span class="txtPrice" part="txtPrice">',"</span>\n                ",'\n                <slot name="previous-price"></slot>\n            </div>\n        </a>\n    </template>\n'])),Ul("control"),(function(t){return t.download}),(function(t){return t.hreflang}),(function(t){return t.ping}),(function(t){return t.referrerpolicy}),(function(t){return t.rel}),(function(t){return t.target}),(function(t){return t.type}),(function(t){return t.ariaAtomic}),(function(t){return t.ariaBusy}),(function(t){return t.ariaControls}),(function(t){return t.ariaCurrent}),(function(t){return t.ariaDescribedby}),(function(t){return t.ariaDetails}),(function(t){return t.ariaDisabled}),(function(t){return t.ariaErrormessage}),(function(t){return t.ariaExpanded}),(function(t){return t.ariaFlowto}),(function(t){return t.ariaHaspopup}),(function(t){return t.ariaHidden}),(function(t){return t.ariaInvalid}),(function(t){return t.ariaKeyshortcuts}),(function(t){return t.ariaLabel}),(function(t){return t.ariaLabelledby}),(function(t){return t.ariaLive}),(function(t){return t.ariaOwns}),(function(t){return t.ariaRelevant}),(function(t){return t.ariaRoledescription}),Gl((function(t){return t.isVideoCard}),Dl(Xp||(Xp=(0,E.Z)(["\n                <style>\n                 .aProductCardWrapper {\n                    height: 85px!important;\n                 }\n                </style>\n            "])))),Gl((function(t){return t.hasAnnotation}),Dl(qp||(qp=(0,E.Z)(["\n                <style>\n                .aProductCardWrapper {\n                    height: 115px!important;\n                }\n                </style>\n            "])))),Gl((function(t){return t.isProductHistoryPane}),Dl(Jp||(Jp=(0,E.Z)(["\n                <style>\n                .aProductCardWrapper {\n                    border-top: unset!important;\n                }\n                </style>\n            "])))),Gl((function(t){return t.description}),Dl(Qp||(Qp=(0,E.Z)(['<span class="txtDescription" title="','">',"</span>"])),(function(t){return t.description}),(function(t){return t.description}))),(function(t){return t.retailer}),(function(t){return t.retailer}),Gl((function(t){return t.isAd}),Dl(tf||(tf=(0,E.Z)(['<slot name="adslug"></slot>'])))),Gl((function(t){return t.lowest}),Dl(ef||(ef=(0,E.Z)(['\n                        <div class="divLowestPrice" part="divLowestPrice">\n                            <span class="txtLowest" part="txtLowest">',"</span>\n                        </div>\n                        "])),(function(t){return t.lowest}))),(function(t){return t.price}),Gl((function(t){return t.savings}),Dl(nf||(nf=(0,E.Z)(['\n                <span class="txtSavings" part="txtSavings">\n                    ',"</span>"])),(function(t){return t.savings}))))}});function rf(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=(0,M.Z)(t)););return t}function sf(){return sf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=rf(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},sf.apply(this,arguments)}function lf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var cf,uf,df,hf=function(t){(0,O.Z)(i,t);var e=lf(i);function i(){var t;return(0,s.Z)(this,i),(t=e.apply(this,arguments)).subTitleId=zd("subTitleId"),t.descriptionId=zd("descriptionId"),t.cashbackNonstackableMessageId=zd("cashbackMessageId"),t.successRateId=zd("successRateId"),t.isSelected=!1,t.isHover=!1,t.handleSelected=function(e){t.isSelected&&t.controlCopy.addEventListener("transitionend",t.handleTransitionEnd)},t.handleTransitionEnd=function(e){t.isSelected=!1,t.controlCopy.removeEventListener("transitionend",t.handleTransitionEnd)},t.onKeyPressHandler=function(e){switch(e.keyCode){case jl:case 13:e.preventDefault(),t.onSelectedHandler()}},t.onSelectedHandler=function(){document.activeElement!==(0,R.Z)(t)&&t.focus(),t.isSelected=!0,t.$emit("selected")},t}return(0,l.Z)(i,[{key:"connectedCallback",value:function(){sf((0,M.Z)(i.prototype),"connectedCallback",this).call(this),this.addEventListener("selected",this.handleSelected)}},{key:"disconnectedCallback",value:function(){sf((0,M.Z)(i.prototype),"disconnectedCallback",this).call(this),this.removeEventListener("selected",this.handleSelected)}},{key:"onClickHandler",value:function(){this.onSelectedHandler()}},{key:"onHoverHandler",value:function(){this.isHover=!0}},{key:"onHoverEndHandler",value:function(){this.isHover=!1}},{key:"onBlurHandler",value:function(){this.isSelected=!1,this.isHover=!1,this.controlCopy.removeEventListener("transitionend",this.handleTransitionEnd)}}]),i}(qs);$p([Kt],hf.prototype,"name",void 0),$p([Kt({attribute:"sub-title"})],hf.prototype,"subTitle",void 0),$p([Kt],hf.prototype,"description",void 0),$p([Kt({attribute:"indicator-message"})],hf.prototype,"indicatorMessage",void 0),$p([Kt({attribute:"selected-indicator-message"})],hf.prototype,"selectedIndicatorMessage",void 0),$p([Kt({attribute:"cashback-nonstackable-message"})],hf.prototype,"cashbackNonstackableMessage",void 0),$p([Kt],hf.prototype,"regularColors",void 0),$p([Kt],hf.prototype,"hasIcon",void 0),$p([Kt({attribute:"label"})],hf.prototype,"label",void 0),$p([Kt({attribute:"success-rate"})],hf.prototype,"successRate",void 0),$p([Kt({attribute:"isYoutuber"})],hf.prototype,"isYoutuber",void 0),$p([Nt],hf.prototype,"isSelected",void 0),$p([Nt],hf.prototype,"isHover",void 0),$p([Nt],hf.prototype,"childElements",void 0);var pf,ff,gf,mf,vf,yf,Cf,bf,Sf=hf.compose({baseName:"shopping-coupon-new",shadowOptions:{delegatesFocus:!0},styles:function(t,e){return Ml(cf||(cf=(0,E.Z)(["\n    "," :host {\n        position: relative;\n        box-sizing: border-box;\n        border: none;\n        border-radius: 8px;\n        font-family: ",";\n        font-size: ",";\n        line-height: ",";\n        color: ",";\n        outline: none;\n        --coupon-border-color: #C9E1E7;\n        --coupon-background-gradient-start: #EDFBFF;\n        --coupon-background-gradient-end: #FFFFFF;\n    }\n\n    .control {\n        position: relative;\n        font-family: ",";\n        background: linear-gradient(\n            44.89deg, var(--coupon-background-gradient-start) 0%,\n            var(--coupon-background-gradient-end) 82.76%);\n        border: 1px dashed var(--coupon-border-color);\n        box-sizing: border-box;\n        border-radius: 8px;\n        display: flex;\n        flex-direction: column;\n        padding: 8px 0;\n        width: 100%;\n        height: 88px;\n        cursor: pointer;\n        outline: none;\n    }\n\n    .controlSuccessHover {\n        background: linear-gradient(224.24deg, #FFF1F7 0%, #FFFEF0 33.85%, #FFFFFF 81.25%)!important;\n    }\n    .controlSuccess {\n        border: 1px dashed #F5D6D8;\n        background: linear-gradient(44.89deg, #FFEEF5 0%, #FFFBF0 37.1%, #FFFFFF 89.03%);\n    }\n    .controlHover {\n        background: linear-gradient(44.89deg, #FFFFFF 26.25%, #EDFBFF 109.58%);\n    }\n    .control:"," {\n        border-color: ",";\n        box-shadow: 0 0 0 calc("," * 1px) ",";\n    }\n\n    .content {\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        height: 100%;\n    }\n\n    .start-content {\n        display: grid;\n        grid-template-columns: 1fr auto;\n        margin-bottom: 8px;\n        min-height: 16px;\n    }\n\n    .end-content {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n        height: 100%;\n    }\n\n    .title {\n        font-size: 12px;\n        line-height: ",";\n        overflow: hidden;\n        overflow-wrap: break-word;\n        display: -webkit-box;\n        -webkit-line-clamp: 1;\n        -webkit-box-orient: vertical;\n        margin: 0 8px;\n        grid-column: 1/2;\n        text-align: start;\n        font-weight: 700;\n        color: #207A90;\n    }\n    .titleHover {\n        color: #666666;\n    }\n    .titleSuccess {\n        color: #DE3700;\n    }\n    .sub-title {\n        font-size: ",";\n        line-height: ",";\n        margin-top: 4px;\n        color: ",";\n        text-align: start;\n        margin-inline-start: 8px;\n    }\n\n    .description {\n        font-size: ",";\n        font-weight: 400;\n        line-height: ",";\n        color: ",";\n        text-align: start;\n        display: -webkit-box;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n        overflow: hidden;\n        overflow-wrap: break-word;\n        margin: 0 8px;\n    }\n\n    .success-rate {\n        font-size: ",";\n        line-height: ",";\n        display: flex;\n        justify-content: center;\n        margin-inline-end: 6px;\n        width: auto;\n        background: linear-gradient(93.45deg, #E4008A -4.64%, #FF4B14 83.31%, #FF8D24 106.45%);\n        grid-column: 3/4;\n        height: 16px;\n        padding: 0 6px;\n        border-radius: 4px;\n    }\n    .txtSuccessRate {\n        font-family: ",";\n        color: #FFFFFF;\n        font-weight: 500;\n        font-size: 10px;\n        line-height: 16px;\n    }\n\n    .corner-icon {\n        display: flex;\n        justify-content: center;\n        margin-inline-end: 6px;\n        width: auto;\n        height: 13.5px;\n        padding: 0 6px;\n    }\n\n    .copiedIndicator {\n        opacity: 0;\n        position: absolute;\n        pointer-events: none;\n    }\n\n    .nonStackableMessage {\n        display: inline;\n        color: #666666;\n        font-weight: normal;\n    }\n    .cashback-nonstackable-message {\n        font-size: ",";\n        line-height: ",";\n        color: ",";\n    }\n    .check-icon {\n        display: flex;\n        fill: #8BB73A;\n    }\n    .warning-icon {\n        height: 12px;\n    }\n    .warning-icon svg {\n        fill: #BE5A00;\n        transform: translate(-3px, 1px);\n    }\n    .selected-success {\n        color: #DE3700;\n    }\n    .selected-success svg {\n        fill: #DE3700;\n    }\n    .selected {\n        color: #207A90;\n    }\n    .selected svg {\n        fill: #207A90;\n    }\n"])),Ll("flex"),Vi,$i,Wi,ta,Vi,Au,Xo,Gi,Xo,ji,Yi,ji,ia,zi,Ki,ta,Yi,ji,Vi,zi,Ki,ia).withBehaviors(Nc(Ml(uf||(uf=(0,E.Z)(["\n            .title-container {\n                background: ",";\n                border-color: ",";\n            }\n            .control,\n            .controlSuccess,\n            .sub-title,\n            .description,\n            .controlSuccess:hover\n            .control:hover .title-container {\n                color: ",";\n                border-color: ",";\n            }\n            .title,\n            .selected-success,\n            .selected {\n                color: ",";\n            }\n            .selected-success svg {\n                fill: ",";\n            }\n            .selected svg {\n                fill: ",";\n            }\n            .controlSuccess:hover,\n            .controlSuccess:",",\n            .control:hover,\n            .control:"," {\n                forced-color-adjust: none;\n                background: ","!important;\n                color: ",";\n                box-shadow: 0 0 0 calc(("," - ",") * 1px)\n                    ",";\n            }\n            .success-rate {\n                background: ",";\n            }\n\n            .cashback-nonstackable-message {\n                color: ",";\n            }\n\n            .warning-icon,\n            .copy-icon {\n                fill: ",";\n            }\n        "])),_c.ButtonFace,_c.ButtonText,_c.ButtonText,_c.ButtonText,_c.Highlight,_c.Highlight,_c.Highlight,Au,Au,_c.ButtonFace,_c.ButtonText,Gi,Ui,_c.Highlight,_c.ButtonFace,_c.HighlightText,_c.HighlightText)),Lc(Ml(df||(df=(0,E.Z)(["\n                .warning-icon svg {\n                    fill: #FFB833;\n                }\n                .selected-success {\n                    color: #FFB833;\n                }\n                .selected-success svg {\n                    fill: #FFB833;\n                }\n                .selected {\n                    color: #41CFF2;\n                }\n                .selected svg {\n                    fill: #41CFF2;\n                }\n                .control {\n                    background: linear-gradient(44.89deg, rgba(0, 198, 255, 0.08) 0%, rgba(255, 255, 255, 0) 82.76%);\n                    border: 1px dashed rgba(201, 225, 231, 0.3);\n                }\n                .controlHover {\n                    background: linear-gradient(44.89deg, rgba(255, 255, 255, 0) 26.25%, rgba(0, 198, 255, 0.08) 109.58%)!important;\n                }\n                .controlSuccess {\n                    background: linear-gradient(44.89deg, rgba(255, 0, 107, 0.08) 0%, rgba(255, 184, 0, 0.08) 38.24%, rgba(255, 255, 255, 0) 86.18%);\n                    border: 1px dashed rgba(245, 214, 216, 0.3);\n                }\n                .controlSuccessHover {\n                    background: linear-gradient(224.24deg, rgba(255, 0, 107, 0.08) 0%, rgba(255, 230, 0, 0.08) 33.85%, rgba(255, 255, 255, 0) 81.25%)!important;\n                }\n                .nonStackableMessage {\n                    color: #FFFFFF;\n                }\n                .success-rate {\n                    background: linear-gradient(93.45deg, #C11371 -4.64%, #E74818 88.52%, #F78216 106.45%);\n                }\n                .title {\n                    color: #41CFF2;\n                }\n                .titleHover {\n                    color: #C4C4C4;\n                }\n                .titleSuccess {\n                    color: #FFB833;\n                }\n            "])))))},template:function(t,e){return Dl(pf||(pf=(0,E.Z)(["\n    <template ",'>\n        <button\n            class= "','"\n            part="control"\n            aria-label="','"\n            aria-describedby="'," "," "," "," ",'"\n            @click="','"\n            @keypress="','"\n            @blur="','"\n            @mouseover="','"\n            @mouseout="','"\n            @focus="','"\n            role="','"\n        >\n            <div class="content">\n                <div class="start-content" part="start-content">\n                    <span class="','" part="title" ',">\n                        ","\n                    </span>\n                    ",'\n                    <div class="corner-icon" part="corner-icon">\n                        <slot name="icon"></slot>\n                    </div>\n                </div>\n                <div class="end-content" part="end-content">\n                    <span\n                        id="','"\n                        class="description"\n                        part="description"\n                    >\n                        ','\n                    </span>\n                    <span id="','" class="sub-title" part="sub-title">\n                        ',"\n                    </span>\n                </div>\n            </div>\n            ","\n        </button>\n        ","\n    </template>\n"])),Oc({property:"childElements",filter:kl()}),(function(t){return t.successRate&&!t.regularColors?t.isHover?"control controlSuccess controlSuccessHover":"control controlSuccess":t.isHover?"control controlHover":"control"}),(function(t){return t.label}),(function(t){return t.name}),(function(t){return t.subTitleId}),(function(t){return t.descriptionId}),(function(t){return t.cashbackNonstackableMessageId}),(function(t){return t.successRateId}),(function(t){return t.onClickHandler()}),(function(t,e){return t.onKeyPressHandler(e.event)}),(function(t){return t.onBlurHandler()}),(function(t,e){return t.onHoverHandler()}),(function(t){return t.onHoverEndHandler()}),(function(t){return t.onHoverHandler()}),(function(t){return t.indicatorMessage?"button":"link"}),(function(t){return t.isHover?"title titleHover":t.successRate&&!t.regularColors?"title titleSuccess":"title"}),Ul("controlCopy"),(function(t){return t.isSelected&&t.selectedIndicatorMessage?Dl(ff||(ff=(0,E.Z)(['<span class="','">'," ","</span>"])),t.successRate&&!t.regularColors?"selected-success":"selected",t.selectedIndicatorMessage,'<svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none">\n                         <path d="M7.85355 0.146447C8.04882 0.341709 8.04882 0.658291 7.85355 0.853553L3.35355 5.35355C3.15829 5.54882 2.84171 5.54882 2.64645 5.35355L0.646447 3.35355C0.451184 3.15829 0.451184 2.84171 0.646447 2.64645C0.841709 2.45118 1.15829 2.45118 1.35355 2.64645L3 4.29289L7.14645 0.146447C7.34171 -0.0488155 7.65829 -0.0488155 7.85355 0.146447Z"/>\n                         </svg>'):t.isHover&&t.indicatorMessage?t.indicatorMessage:t.name}),Gl((function(t){return t.successRate&&!t.hasIcon}),Dl(gf||(gf=(0,E.Z)(['\n                            <div class="success-rate" part="success-rate">\n                                <span class="txtSuccessRate" part="txtSuccessRate" id="','">',"</span>\n                            </div>"])),(function(t){return t.successRateId}),(function(t){return t.successRate}))),(function(t){return t.descriptionId}),(function(t){return t.cashbackNonstackableMessage&&(t.isSelected||t.isHover)?Dl(mf||(mf=(0,E.Z)(['\n                                <div class="nonStackableMessage">\n                                    <span aria-hidden="true" class="warning-icon">\n                                        ',"\n                                    </span>\n                                 ","\n                                </div>"])),'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none">\n                                    <path d="M4.2829 2.9799C4.13361 1.93492 4.94447 1 6.00005 1C7.05564 1 7.86649 1.93492 7.71721 2.9799L7.14147 7.01005C7.06033 7.57808 6.57385 8 6.00005 8C5.42626 8 4.93978 7.57808 4.85863 7.01005L4.2829 2.9799ZM7 10C7 10.5523 6.55228 11 6 11C5.44772 11 5 10.5523 5 10C5 9.44771 5.44772 9 6 9C6.55228 9 7 9.44771 7 10Z"/>\n                                    </svg>',t.cashbackNonstackableMessage):Dl(vf||(vf=(0,E.Z)(["",""])),t.description)}),(function(t){return t.subTitleId}),Gl((function(t){return!(t.cashbackNonstackableMessage&&(t.isSelected||t.isHover))}),Dl(yf||(yf=(0,E.Z)(["",""])),(function(t){return t.subTitle}))),Gl((function(t){return t.isYoutuber}),Dl(Cf||(Cf=(0,E.Z)(['<slot name="youtuber-info"></slot>'])))),Gl((function(t){return t.isSelected&&t.selectedIndicatorMessage}),Dl(bf||(bf=(0,E.Z)(['<span aria-live="assertive" aria-relevant="all" aria-atomic="true" class="copiedIndicator">\n            ',"\n            </span>"])),(function(t){return t.selectedIndicatorMessage}))))}}),xf=i(388);function Ef(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var Af,Tf=function(t){(0,O.Z)(i,t);var e=Ef(i);function i(){var t;return(0,s.Z)(this,i),(t=e.apply(this,arguments)).isVisible=!1,t.isFocused=!1,t.hasLink=!1,t.onKeyDownHandlerLink=function(e){var i;switch(e.keyCode){case jl:case 13:e.preventDefault(),t.linkHandler();break;case 9:case 27:e.preventDefault(),t.isVisible=!1;var n=null===(i=t.shadowRoot)||void 0===i?void 0:i.querySelector(".control");n&&n.focus()}},t}return(0,l.Z)(i,[{key:"onHoverHandler",value:function(){this.isVisible=!0,this.$emit("hover")}},{key:"onHoverEndHandler",value:function(t){this.isVisible=null!=t&&t}},{key:"onFocusHandler",value:function(){this.isFocused=!0}},{key:"onBlurHandler",value:function(){this.isFocused=!1}},{key:"onKeypressHandler",value:function(t){var e;switch(t.keyCode){case 27:this.isVisible&&(t.preventDefault(),this.isVisible=!1);break;case 13:if(this.isFocused){t.preventDefault(),this.isVisible=!0;var i=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".link");i&&this.linkText&&i.focus()}}}},{key:"onClickHandlerLink",value:function(){this.linkHandler()}},{key:"generateTooltipOffsets",value:function(){var t,e=null!==(t=this.caratSide)&&void 0!==t?t:xf.W.Top;e!==xf.W.Bottom&&e!==xf.W.Top||!this.caratLeftOffset?e!==xf.W.Left&&e!==xf.W.Right||!this.caratTopOffset||this.style.setProperty("--carat-top-offset",this.caratTopOffset):this.style.setProperty("--carat-left-offset",this.caratLeftOffset)}},{key:"connectedCallback",value:function(){var t=this;sf((0,M.Z)(i.prototype),"connectedCallback",this).call(this),(this.caratTopOffset||this.caratLeftOffset)&&this.generateTooltipOffsets(),this.width?this.style.setProperty("--tooltip-width",this.width):this.style.setProperty("--tooltip-width","300px"),this.addEventListener("hover",(function(){t.generateTooltipOffsets(),t.style.setProperty("--tooltip-width",t.width)})),this.addEventListener("keydown",(function(e){t.onKeypressHandler(e)}))}}]),i}(xu);$p([Kt],Tf.prototype,"header",void 0),$p([Kt],Tf.prototype,"content",void 0),$p([Kt],Tf.prototype,"linkText",void 0),$p([Kt],Tf.prototype,"linkHandler",void 0),$p([Kt],Tf.prototype,"caratSide",void 0),$p([Kt],Tf.prototype,"width",void 0),$p([Kt],Tf.prototype,"caratLeftOffset",void 0),$p([Kt],Tf.prototype,"caratTopOffset",void 0),$p([Nt],Tf.prototype,"isVisible",void 0),$p([Nt],Tf.prototype,"isFocused",void 0),$p([Nt],Tf.prototype,"hasLink",void 0);var If,Df,kf,wf,Rf=Tf.compose({baseName:"shopping-tooltip",shadowOptions:{delegatesFocus:!0},styles:function(t,e){return Ml(Af||(Af=(0,E.Z)(["\n    .title {\n        font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n        font-weight: 600;\n        font-size: 14px;\n        line-height: 20px;\n        margin: 0px;\n        margin-bottom: 10px;\n        color: var(--neutral-foreground-rest);\n    }\n    .content {\n        font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n        font-size: 12px;\n        line-height: 16px;\n        margin: 0px;\n        color: var(--neutral-foreground-rest);\n    }\n    .link {\n        font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n        font-size: 12px;\n        font-weight: 600;\n        line-height: 16px;\n        color: rgba(0, 0, 0, 0.5);\n        text-decoration: none;\n    }\n    .tooltip {\n        position: absolute;\n        background: #FFFFFF;\n        text-align: left;\n        box-shadow: 0px 12.8px 28.8px rgba(0, 0, 0, 0.13), 0px 0px 9.2px rgba(0, 0, 0, 0.11);\n        border-radius: 4px;\n        padding: 12px;\n        padding-bottom: 10px;\n        z-index: 900;\n        cursor: default;\n        width: var(--tooltip-width);\n    }\n    .tooltip.top {\n        margin-top: 22px;\n        margin-left: calc(var(--carat-left-offset, calc(var(--tooltip-width) / 2)) * -1 - 4px);\n    }\n    .tooltip.bottom {\n        margin-bottom: 22px;\n        margin-left: calc(var(--carat-left-offset, calc(var(--tooltip-width) / 2)) * -1 - 4px);\n    }\n    .tooltip.right {\n        margin-right: 18px;\n        margin-top: calc(var(--carat-top-offset, 5px) * -1);\n    }\n    .tooltip.left {\n        margin-left: 18px;\n        margin-top: calc(var(--carat-top-offset, 5px) * -1);\n    }\n    .top .carat {\n        content: \" \";\n        width: 0;\n        height: 0;\n        border-left: 10px solid transparent;\n        border-right: 10px solid transparent;\n        border-bottom: 6px solid #FFFFFF;\n        position: absolute;\n        top: -5px;\n        left: var(--carat-left-offset, calc(var(--tooltip-width) / 2));\n    }\n    .bottom .carat {\n        content: \" \";\n        width: 0;\n        height: 0;\n        border-left: 10px solid transparent;\n        border-right: 10px solid transparent;\n        border-top: 6px solid #FFFFFF;\n        position: absolute;\n        bottom: -5px;\n        left: var(--carat-left-offset, calc(var(--tooltip-width) / 2));\n    }\n    .right .carat {\n        content: \" \";\n        width: 0;\n        height: 0;\n        border-top: 10px solid transparent;\n        border-bottom: 10px solid transparent;\n        border-left: 6px solid #FFFFFF;\n        position: absolute;\n        top: var(--carat-top-offset);\n        right: -5px;\n    }\n    .left .carat {\n        content: \" \";\n        width: 0;\n        height: 0;\n        border-top: 10px solid transparent;\n        border-bottom: 10px solid transparent;\n        border-right: 6px solid #FFFFFF;\n        position: absolute;\n        top: var(--carat-top-offset);\n        left: -5px;\n    }\n    .icon:focus {\n        outline: none;\n        box-shadow: 0px 0px 0px 2px #898989;\n        border-radius: 4px;\n    }\n    .link:focus {\n        outline: none;\n        box-shadow: 0px 0px 0px 2px #898989;\n        border-radius: 4px;\n    }\n    @media (prefers-color-scheme: dark) {\n        .tooltip {\n            background: #3b3b3b;\n        }\n        .top .carat {\n            border-bottom: 6px solid #3b3b3b;\n        }\n        .bottom .carat {\n            border-top: 6px solid #3b3b3b;\n        }\n        .right .carat {\n            border-left: 6px solid #3b3b3b;\n        }\n        .left .carat {\n            border-right: 6px solid #3b3b3b;\n        }\n        .link {\n            color: rgba(255, 255, 255, 0.7);\n        }\n        .icon:focus {\n            outline: none;\n            box-shadow: 0px 0px 0px 2px #898989;\n            border-radius: 4px;\n        }\n    }"])))},template:function(t,e){return Dl(If||(If=(0,E.Z)(['\n    <template>\n        <a\n        class="icon control"\n        part="control"\n        ','\n        href="#"\n        role="button"\n        style="\n            display:flex;\n            flex-direction:',";\n            align-items:",";\n            justify-content:",';\n            position: relative;"\n        aria-atomic="','"\n        aria-busy="','"\n        aria-controls="','"\n        aria-current="','"\n        aria-describedBy="','"\n        aria-details="','"\n        aria-disabled="','"\n        aria-errormessage="','"\n        aria-expanded="','"\n        aria-flowto="','"\n        aria-haspopup="','"\n        aria-hidden="','"\n        aria-invalid="','"\n        aria-keyshortcuts="','"\n        aria-label="','"\n        aria-labelledby="hover-anchor"\n        aria-live="','"\n        aria-owns="','"\n        aria-relevant="','"\n        aria-roledescription="','"\n        @blur="','"\n        @mouseenter="','"\n        @mouseleave="','"\n        @focus="','"">\n            <slot name="hover-anchor" id="hover-anchor" class="hover-anchor"></slot>\n            <div\n            class=',"\n            role=",'\n            style="display:',';"\n            aria-hidden="','"\n            aria-labelledby="title content">\n                <div class="carat"></div>\n                ',"\n                ","\n                ","\n            </div>\n        </a>\n    </template>\n"])),Ul("control"),(function(t){return t.caratSide===xf.W.Right||t.caratSide===xf.W.Left?"column":"row"}),(function(t){return t.caratSide===xf.W.Right?"flex-end":"flex-start"}),(function(t){return t.caratSide===xf.W.Bottom?"flex-end":"flex-start"}),(function(t){return t.ariaAtomic}),(function(t){return t.ariaBusy}),(function(t){return t.ariaControls}),(function(t){return t.ariaCurrent}),(function(t){return t.ariaDescribedby}),(function(t){return t.ariaDetails}),(function(t){return t.ariaDisabled}),(function(t){return t.ariaErrormessage}),(function(t){return t.isVisible}),(function(t){return t.ariaFlowto}),(function(t){return t.linkText&&t.linkHandler}),(function(t){return t.ariaHidden}),(function(t){return t.ariaInvalid}),(function(t){return t.ariaKeyshortcuts}),(function(t){return t.ariaLabel}),(function(t){return t.ariaLive}),(function(t){return t.ariaOwns}),(function(t){return t.ariaRelevant}),(function(t){return t.ariaRoledescription}),(function(t){return t.onBlurHandler()}),(function(t){return t.onHoverHandler()}),(function(t){return t.onHoverEndHandler()}),(function(t){return t.onFocusHandler()}),(function(t){return t.caratSide===xf.W.Right?"tooltip right":t.caratSide===xf.W.Left?"tooltip left":t.caratSide===xf.W.Bottom?"tooltip bottom":"tooltip top"}),(function(t){return t.linkText?"dialog":"tooltip"}),(function(t){return t.isVisible?"block":"none"}),(function(t){return!t.isVisible}),Gl((function(t){return t.header}),Dl(Df||(Df=(0,E.Z)(['\n                        <p id="title" class="title">\n                            ',"\n                        </p>"])),(function(t){return t.header}))),Gl((function(t){return t.content}),Dl(kf||(kf=(0,E.Z)(['\n                        <p id="content" class="content" style="margin-bottom: ',';">\n                            ',"\n                        </p>"])),(function(t){return t.linkHandler&&t.linkText?"4px":"0px"}),(function(t){return t.content}))),Gl((function(t){return t.linkText&&t.linkHandler}),Dl(wf||(wf=(0,E.Z)(['\n                    <a class="link" href="#" tabindex="0" @click="','" @keydown="','">\n                        ',"\n                    </a>"])),(function(t){return t.onClickHandlerLink()}),(function(t,e){return t.onKeyDownHandlerLink(e.event)}),(function(t){return t.linkText}))))}}),Of=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"initializeComponents",value:function(){var t;Ph.getOrCreate(t).withPrefix("fluent").register(Zh(),Wh(),zh(),Lu(),jh(),Jd(),Xh(),qh(),Qh(),tp(),rp(),up(),Cp(),Ep(),Rp(),Op(),Lp(),Fp(),ch(),Hp(),Zp(),Bp(),Vp()),Ph.getOrCreate().withPrefix("msft").register(kc(),Fc(),Cu(),bu(),Zu(),Yd(),Sf(),af(),ah(),fh(),xh(),Ih(),Ac(),Tc(),Rf())}}]),t}(),Pf=function(){function t(e,i,n,o,a,r){(0,s.Z)(this,t),(0,I.Z)(this,"logModule",void 0),(0,I.Z)(this,"pageHandlerModule",void 0),(0,I.Z)(this,"strings",void 0),(0,I.Z)(this,"currentTheme",void 0),(0,I.Z)(this,"currentDirection",void 0),(0,I.Z)(this,"commonAssets",void 0),this.logModule=e,this.pageHandlerModule=i,this.strings=n,this.currentTheme=o,this.currentDirection=a,this.commonAssets=r}return(0,l.Z)(t,[{key:"renderErrorUI",value:function(t){var e=document.querySelector("#divContentWrapper");if(e){var i=document.createElement("msft-edge-shopping");this.addCommonStyles(i);var n=this.createElement("DIV",{id:"emptyCouponDiv",style:"display: flex; flex-direction: column; justify-content: center; align-items: center; margin-bottom: 12px;"}),r=this.createElement("DIV",{style:"margin: 20px;"});r.innerHTML=this.commonAssets.getErrorImage(),r.setAttribute("aria-hidden","true");var s=this.createElement("P",{style:"font-weight: 600; margin-top: 5px; color: #666666;"});s.className=D.aM.EmptyCoupon,s.textContent=this.strings.commonErrorTitle;var l=this.createElement("P",{style:"margin-top: 5px; color: #666666;"});l.className=D.aM.Small,l.textContent=this.strings.commonErrorSubTitle,n.appendChild(r),n.appendChild(s),n.appendChild(l),n.slot="header-content",i.appendChild(n),i.fixedTitle="Shopping in Microsoft Edge";try{this.addHeaderIcon(i),this.createCloseButton(!1,i)}catch(t){}var c=new o.Z(a.xu.OnErrorInvoked);this.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"User saw error page - ".concat(t),c),e.appendChild(i),Tt.SO.queueUpdate((function(){parent.postMessage({height:e.offsetHeight,type:"resize_iframe",width:e.offsetWidth},"edge://shopping")}))}}},{key:"createElement",value:function(t,e,i){var n=document.createElement(t);if(e)for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);return i&&(n.innerText=i),n}},{key:"createCloseButton",value:function(t,e){var i,n=document.createElement("fluent-button");n.slot="header-actions",null!==(i=this.strings)&&void 0!==i&&i.commonClose?n.ariaLabel=this.strings.commonClose:n.ariaLabel="close",n.id=D.z6.CLOSE;var o=this.createElement("DIV");o.setAttribute("aria-hidden","true"),o.innerHTML=this.commonAssets.getCloseButton(),n.appearance="stealth",n.appendChild(o);var r=this.pageHandlerModule,s=this.logModule;n.addEventListener("click",(function(){if(t){if(t){var e=new na.Z(a.$S.NotificationDismiss);r.RecordAsUserAction(Ca.bS.DISMISSED),s.LogInfoEvent(a.R.ButtonClick,"Notification Dismissed",e)}}else{var i=new na.Z(a.$S.FlyoutDismiss);r.RecordAsUserAction(Ca.bS.DISMISSED),s.LogInfoEvent(a.R.ButtonClick,"Flyout Dismissed",i)}r.DismissPopup()})),e.appendChild(n)}},{key:"addHeaderIcon",value:function(t){var e=document.createElement("DIV");e.innerHTML=this.commonAssets.getHeaderIcon(),e.slot="header-icon",t.appendChild(e)}},{key:"addCommonStyles",value:function(t){if(t){var e,i=document.querySelector("fluent-design-system-provider");if(i)this.currentTheme===D.Q2.Dark?i.setAttribute("background-color","#4a4a4a"):i.setAttribute("background-color","#FFFFFF"),this.currentDirection===D.m5.RTL?i.style.direction="rtl":i.style.direction="ltr",null!==(e=this.strings)&&void 0!==e&&e.commonFixedTitle?i.setAttribute("aria-label",this.strings.commonFixedTitle):i.setAttribute("aria-label","Shopping in Microsoft Edge");this.applyStyles(t,this.commonAssets.getStyles())}}},{key:"applyStyles",value:function(t,e){var i=this.createElement("STYLE");i.textContent=e,i.type="text/css",i.rel="stylesheet",t.appendChild(i)}}]),t}(),Mf=Pf,Nf=(0,l.Z)((function t(){(0,s.Z)(this,t)}));(0,I.Z)(Nf,"markers",{column:0,finishedCreatingModules:!1,finishedSettingHeader:!1,initializeFlyout:!1,initializeWithData:!1,initializedLogData:!1,lastModuleFinished:"",lastModuleStarted:"",line:0,logFinished:!1,logStarted:!1,modulesRendered:!1,popupOrigination:void 0,settingRegularFlyout:!1,src:"",startedCreatingModules:!1,startedSettingHeader:!1,triggeredSupportedExperiments:!1});var Lf=Nf,_f=i(604),Ff=function(){function e(t,i,n,o,a){(0,s.Z)(this,e),(0,I.Z)(this,"flyoutData",void 0),(0,I.Z)(this,"stateManagement",void 0),(0,I.Z)(this,"utilities",void 0),(0,I.Z)(this,"pageHandlerModule",void 0),(0,I.Z)(this,"commonAssets",void 0),(0,I.Z)(this,"logModule",void 0),this.flyoutData=t,this.utilities=i,this.pageHandlerModule=n,this.logModule=o,this.stateManagement=a,this.commonAssets=i.commonAssets}var i;return(0,l.Z)(e,[{key:"createFlyoutButtons",value:(i=(0,t.Z)(n().mark((function t(e,i,o){var a,r,s,l,c=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=this.flyoutData.dataStoreModule.CashBackData,o&&(s=null!==(r=a&&(a.isTurnedOff||a.isConfirmationPage))&&void 0!==r&&r,i&&!this.isDisableOptOutMenuActive()&&(this.stateManagement.getState(Ia.IY.modulesRendered)&&this.createContextMenu(e,null!==(l=null==a?void 0:a.canRenderCashback)&&void 0!==l&&l,this.stateManagement.getState(Ia.IY.topModuleName),o),this.stateManagement.addEventListener(Ia.e1.ModulesRendered,(function(){var t;c.createContextMenu(e,null!==(t=null==a?void 0:a.canRenderCashback)&&void 0!==t&&t,c.stateManagement.getState(Ia.IY.topModuleName),o)}))),this.flyoutData.experimentData.isExperimentActive(xt.H.snooze)&&this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_COUPONS_CHECKOUT&&!this.edgeForceEnablePopupOrigination(this.flyoutData.common.popupOrigination)&&this.createSnoozeButton(e),this.createCloseButton(e,s)),Tt.SO.queueUpdate((function(){c.handleMenuItemKeyboardClick(e)}));case 3:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return i.apply(this,arguments)})},{key:"handleMenuItemKeyboardClick",value:function(t){var e=t.querySelectorAll("fluent-menu-item"),i=t.querySelector("#".concat(D.z6.MENUCONTENT)),n=t.querySelector("#".concat(D.z6.MENU));e&&e.length>0&&i&&n&&e.forEach((function(t){t.addEventListener("keydown",(function(t){"Enter"!==t.key&&"Space"!==t.key||(i.className="hide",n.setAttribute("aria-expanded","undefined"),n.focus())}))}))}},{key:"createSnoozeButton",value:function(t){if(!t.querySelector("#".concat(D.z6.SNOOZE))){var e=document.createElement("fluent-button");e.slot="header-actions",e.id=D.z6.SNOOZE,e.ariaHaspopup="menu",e.ariaLabel=this.flyoutData.strings.commonMoreOptionsLabel,e.ariaControls=D.z6.SNOOZE_CONTENT,e.appearance="stealth",e.title=this.flyoutData.strings.snoozeTooltip,e.setAttribute("aria-labelledby","snoozeButton"),t.appendChild(e);var i=this.utilities.createElement("DIV");i.setAttribute("aria-hidden","true"),0===this.flyoutData.common.autoshowFeaturePref?(i.innerHTML=this.commonAssets.getSnoozeLineButton(),e.ariaLabel=this.flyoutData.strings.ariaSnoozeOn):(i.innerHTML=this.commonAssets.getSnoozeFilledButton(),e.ariaLabel=this.flyoutData.strings.ariaSnoozeoff),e.appendChild(i);var n,o=document.createElement("fluent-menu");o.id=D.z6.SNOOZE_CONTENT,o.setAttribute("aria-labelledby",D.z6.SNOOZE_CONTENT),this.addSnoozeItem(o,e),n=this.flyoutData.common.currentDirection===D.m5.RTL?"35px":"50px",o.setAttribute("style","position: absolute; top: 40px; left: "+n+"; z-index: 100; right: 10px; outline: none; padding: 0px!important;"),o.tabIndex=-1,o.className="hide",Tt.SO.queueUpdate((function(){o.setAttribute("slot","start-content")})),this.manageMenuEvents(o,e);var a=t.querySelector("#".concat(D.z6.MENU));a?t.insertBefore(e,a):t.appendChild(e),t.addEventListener("click",(function(){"hide"!==o.className?(e.style.backgroundColor="transparent",o.className="hide",e.setAttribute("aria-expanded","false")):e.setAttribute("aria-expanded","true")})),t.appendChild(o)}}},{key:"createCloseButton",value:function(t,e){var i,n=t.querySelector("#".concat(D.z6.CLOSE));if(n)i=n;else{var o;(i=document.createElement("fluent-button")).slot="header-actions",null!==(o=this.flyoutData.strings)&&void 0!==o&&o.commonClose?i.ariaLabel=this.flyoutData.strings.commonClose:i.ariaLabel="close",i.id=D.z6.CLOSE,i.title=this.flyoutData.strings.commonClose;var r=this.utilities.createElement("DIV");r.setAttribute("aria-hidden","true"),r.innerHTML=this.commonAssets.getCloseButton(),i.appearance="stealth",i.appendChild(r),t.appendChild(i)}var s=this.pageHandlerModule,l=this.logModule;i.addEventListener("click",(function(){if(e){if(e){var t=new na.Z(a.$S.NotificationDismiss);s.RecordAsUserAction(Ca.bS.DISMISSED),l.LogInfoEvent(a.R.ButtonClick,"Notification Dismissed",t)}}else{var i=new na.Z(a.$S.FlyoutDismiss);s.RecordAsUserAction(Ca.bS.DISMISSED),l.LogInfoEvent(a.R.ButtonClick,"Flyout Dismissed",i)}s.DismissPopup()}))}},{key:"createContextMenu",value:function(t,e,i,n){var o,a,r=t.querySelector("#".concat(D.z6.MENU)),s=t.querySelector("#".concat(D.z6.MENUCONTENT));if(r)o=r,s&&s.remove(),a=this.createContextMenuDiv(i,e,o,t);else{(o=document.createElement("fluent-button")).slot="header-actions",o.id=D.z6.MENU,o.ariaHaspopup="menu",o.ariaControls=D.z6.MENUCONTENT,o.ariaLabel=this.flyoutData.strings.commonMoreOptionsLabel,o.title=this.flyoutData.strings.commonAltSettings;var l=this.utilities.createElement("DIV");l.setAttribute("aria-hidden","true"),l.innerHTML=this.commonAssets.getMenuIcon(),o.appearance="stealth",o.appendChild(l),a=this.createContextMenuDiv(i,e,o,t)}this.manageMenuEvents(a,o),t.addEventListener("click",(function(){"hide"!==a.className&&(o.style.backgroundColor="transparent",a.className="hide",o.setAttribute("aria-expanded","undefined"))})),this.flyoutData.common.isPane&&n&&n.addEventListener("click",(function(){"hide"!==a.className&&(o.style.backgroundColor="transparent",a.className="hide",o.setAttribute("aria-expanded","undefined"))}))}},{key:"createContextMenuDiv",value:function(t,e,i,n){var r,s,l,c,u,d,h,p,f=document.createElement("fluent-menu");f.id=D.z6.MENUCONTENT,f.setAttribute("aria-labelledby",D.z6.MENU);var g=this.flyoutData.experimentData;if((!g.isExperimentActive(xt.H.snooze)||this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_COUPONS_CHECKOUT||this.edgeForceEnablePopupOrigination(this.flyoutData.common.popupOrigination))&&(this.flyoutData.common.openedWith!==D.Te.Auto||this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_REBATES&&this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_REBATES_ORGANIC||0!==this.flyoutData.common.autoshowFeaturePref))if(this.pageHandlerModule.TriggerExperiment(xt.H.autoShowControlForFeature),g.isExperimentActive(xt.H.autoShowControlForFeature)){var m=t,v=this.getPopupOrigination(m);if(v)this.addAutoShowItem(f,v);else if(this.flyoutData.common.openedWith===D.Te.Auto){var y=new o.Z(a.xu.ContextMenuInfo);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"Popup origination not valid for "+m,y)}}else this.addAutoShowItem(f);void 0!==this.flyoutData.common.isOrganicFlowEnabled&&e&&this.addRebatesFlow(f,this.flyoutData.common.isOrganicFlowEnabled),void 0!==this.flyoutData.common.isShoppingPersonalizationEnabled&&this.flyoutData.experimentData.isExperimentActive(xt.H.priceDropNotification)&&this.addReminderFlow(f,this.flyoutData.common.isShoppingPersonalizationEnabled);var C=this.flyoutData.experimentData.isExperimentActive(xt.H.orderStatusTrackingExp),b=null!==(r=null===(s=this.flyoutData)||void 0===s||null===(l=s.dataStoreModule)||void 0===l||null===(c=l.OrderTrackingData)||void 0===c?void 0:c.shouldShowPackageTrackingNotification)&&void 0!==r&&r,S=null!==(u=null===(d=this.flyoutData)||void 0===d||null===(h=d.dataStoreModule)||void 0===h||null===(p=h.OrderTrackingData)||void 0===p?void 0:p.packageTrackingUserConsented)&&void 0!==u&&u;C&&b&&S&&this.addPackageTrackingFlow(f);var x=document.createElement("fluent-menu-item"),E=document.createElement("DIV");E.innerHTML=this.commonAssets.getSettingsIcon(),E.slot="start",E.setAttribute("aria-hidden","true"),x.title=this.flyoutData.strings.commonCMManage,x.textContent=this.flyoutData.strings.commonCMManage,x.className+="defaultFontFamily",x.appendChild(E);var A,T=this.pageHandlerModule,I=this.logModule;if(x.addEventListener("change",(function(){T.RecordAsUserAction(Ca.bS.MANAGE);var t=new na.Z(a.$S.FlyoutManage);I.LogInfoEvent(a.R.ButtonClick,"Flyout Menu Manage",t),T.NavigateToSettings()})),f.appendChild(x),A=this.flyoutData.common.currentDirection===D.m5.RTL?"35px":"50px",f.setAttribute("style","position: absolute; top: 40px; left: "+A+"; z-index: 100; right: 10px; outline: none; padding: 0px!important;"),f.tabIndex=-1,f.className="hide",this.flyoutData.experimentData.isExperimentActive(xt.H.snooze)&&this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_COUPONS_CHECKOUT&&!this.edgeForceEnablePopupOrigination(this.flyoutData.common.popupOrigination)||n.appendChild(f),n.appendChild(f),Tt.SO.queueUpdate((function(){f.setAttribute("slot","start-content")})),this.flyoutData.experimentData.isExperimentActive(xt.H.snooze)&&this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_COUPONS_CHECKOUT&&!this.edgeForceEnablePopupOrigination(this.flyoutData.common.popupOrigination)){var k=n.querySelector("#".concat(D.z6.CLOSE));k?n.insertBefore(i,k):n.appendChild(i),n.appendChild(f)}else n.prepend(i);return f}},{key:"getPopupOrigination",value:function(t){if(void 0!==this.flyoutData.common.popupOrigination&&this.flyoutData.common.openedWith===D.Te.Auto)return Object.values(this.pageHandlerModule.PopupOrigination).includes(this.flyoutData.common.popupOrigination)?this.flyoutData.common.popupOrigination:null;switch(t){case D.GX.CASHBACK:var e,i=this.flyoutData.dataStoreModule.CashBackData;return null!=i&&i.isPersonalizedCashback?null!==(e=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==e&&e.isConfirmationPage?this.pageHandlerModule.PopupOrigination.AUTO_SHOW_PERSONALIZED_CASHBACK_CONFIRMATION:this.pageHandlerModule.PopupOrigination.AUTO_SHOW_PERSONALIZED_CASHBACK:null!=i&&i.isConfirmationPage?this.pageHandlerModule.PopupOrigination.AUTO_SHOW_REBATES_CONFIRMATION:null!=i&&i.isTurnedOff?null:this.flyoutData.common.isCheckoutPage?this.pageHandlerModule.PopupOrigination.AUTO_SHOW_REBATES_CHECKOUT:null!=i&&i.isCashBackActivated?this.pageHandlerModule.PopupOrigination.AUTO_SHOW_REBATES:this.pageHandlerModule.PopupOrigination.AUTO_SHOW_REBATES_ORGANIC_NEW;case D.GX.COUPON:return this.pageHandlerModule.PopupOrigination.AUTO_SHOW_COUPONS_CHECKOUT;case D.GX.PRICECOMPARISON:return this.pageHandlerModule.PopupOrigination.AUTO_SHOW_LOWER_PRICE_FOUND;case D.GX.PRICEHISTORY:return this.pageHandlerModule.PopupOrigination.AUTO_SHOW_PRICE_HISTORY;case D.GX.COUPONCLIPPING:return this.pageHandlerModule.PopupOrigination.AUTO_SHOW_COUPONS_CLIPPING;case D.GX.SIMILARSELLERS:return this.pageHandlerModule.PopupOrigination.AUTO_SHOW_OTHER_SELLERS;case D.GX.CHECKOUTAUTOFILL:return this.pageHandlerModule.PopupOrigination.AUTO_SHOW_EXPRESS_CHECKOUT;case D.GX.ATTAINABLECOUPONS:return this.pageHandlerModule.PopupOrigination.AUTO_SHOW_ATTAINABLE_COUPONS;case D.GX.GROCERY_CASHBACK:return this.pageHandlerModule.PopupOrigination.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK}return null}},{key:"edgeForceEnablePopupOrigination",value:function(t){return t===St.s.AUTO_SHOW_BING_SEARCH||t===St.s.AUTO_SHOW_REBATES_DEACTIVATED||t===St.s.AUTO_SHOW_URL_PARAM_REBATES||t===St.s.AUTO_SHOW_URL_PARAM_PRICE_COMPARISON||t===St.s.AUTO_SHOW_URL_PARAM_PRICE_HISTORY||t===St.s.AUTO_SHOW_REBATES_ACTIVATION_FAILED||t===St.s.AUTO_SHOW_REBATES_SWITCHED_TO_MSA||t===St.s.AUTO_SHOW_NOTIFICATION}},{key:"getFeatureFromPopupOrigination",value:function(t){var e=this.pageHandlerModule.PopupOrigination,i=this.pageHandlerModule.AutoShowFeature;switch(t){case e.AUTO_SHOW_COUPONS_CHECKOUT:return i.COUPONS_CHECKOUT;case e.AUTO_SHOW_LOWER_PRICE_FOUND:return i.PRICE_COMPARE;case e.AUTO_SHOW_REBATES:return i.REBATES_BING;case e.AUTO_SHOW_REBATES_CONFIRMATION:return i.REBATES_CONFIRMATION;case e.AUTO_SHOW_REBATES_ORGANIC:return i.REBATES_ORGANIC;case e.AUTO_SHOW_PRICE_HISTORY:return i.PRICE_HISTORY;case e.AUTO_SHOW_REBATES_ORGANIC_NEW:return i.REBATES_ORGANIC;case e.AUTO_SHOW_REBATES_CHECKOUT:return i.REBATES_CHECKOUT;case e.AUTO_SHOW_PERSONALIZED_CASHBACK:return i.PERSONALIZED_CASHBACK;case e.AUTO_SHOW_PERSONALIZED_CASHBACK_CONFIRMATION:return i.PERSONALIZED_CASHBACK_CONFIRMATION;case e.AUTO_SHOW_EXPRESS_CHECKOUT:return i.EXPRESS_CHECKOUT;case e.AUTO_SHOW_SERVER_DRIVEN_REWARDS:return i.REWARDS;case e.AUTO_SHOW_COUPONS_CLIPPING:return i.COUPONS_CLIPPING;case e.AUTO_SHOW_OTHER_SELLERS:return i.OTHER_SELLER;case e.AUTO_SHOW_ATTAINABLE_COUPONS:return i.ATTAINABLE_COUPONS;case e.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK:return i.GROCERY_CASHBACK}return null}},{key:"manageMenuEvents",value:function(t,e){var i=this;t.addEventListener("keydown",(function(i){"Escape"===i.key?(e.style.backgroundColor="transparent",t.className="hide",e.setAttribute("aria-expanded","undefined"),e.focus(),i.preventDefault()):"Tab"===i.key&&i.preventDefault()})),e.addEventListener("focus",(function(){"hide"!==t.className&&(e.style.backgroundColor="transparent",t.className="hide",e.setAttribute("aria-expanded","undefined"))})),e.addEventListener("keydown",(function(i){"Escape"!==i.key&&"Tab"!==i.key||"hide"===t.className||(e.style.backgroundColor="transparent",t.className="hide",e.setAttribute("aria-expanded","undefined"),e.focus(),i.preventDefault())})),e.addEventListener("click",(function(n){if(t.classList.toggle("hide"),"hide"===t.className)e.style.backgroundColor="transparent",e.ariaExpanded="true";else{e.style.backgroundColor="rgba(0, 0, 0, 0.07)";var o=t.querySelectorAll("*")[0];o&&i.utilities.isKeyboardClick(n)&&o.focus(),e.setAttribute("ariaExpanded","undefined")}n.stopPropagation()}))}},{key:"addReminderFlow",value:function(t,e){var i=this;if(""!==this.flyoutData.strings.reminderDisabled&&""!==this.flyoutData.strings.reminderEnabled){var n=this.flyoutData.strings.reminderEnabled,o=this.flyoutData.strings.reminderDisabled,r=document.createElement("fluent-menu-item"),s=document.createElement("DIV");e?(s.innerHTML=this.commonAssets.getDisableAutoOpen(),s.setAttribute("aria-hidden","true"),r.id="Enabled",r.className+="defaultFontFamily",r.textContent=o,r.title=o):(s.innerHTML=this.commonAssets.getEnableAutoOpen(),s.setAttribute("aria-hidden","true"),r.id="Disabled",r.className+="defaultFontFamily",r.textContent=n,r.title=n),s.slot="start",r.appendChild(s);var l=this.pageHandlerModule,c=this.logModule;r.addEventListener("change",(function(t){if("Enabled"===r.id){r.textContent=n,r.title=n,r.id="Disabled";var e=document.createElement("DIV");e.slot="start",e.innerHTML=i.commonAssets.getEnableAutoOpen(),e.setAttribute("aria-hidden","true"),r.appendChild(e);var s=new na.Z(a.$S.OrganicFlowTurnedOff);c.LogInfoEvent(a.R.ButtonClick,"Organic flow turned off",s),l.SetIsPersonalizedShoppingEnabled(!1),l.RecordAsUserAction(Ca.bS.PWILO_NOTIFICATION_PRICE_DROP_DISABLE_REMINDERS),l.AllowServerDrivenNotifications(!1)}else{r.textContent=o,r.title=o,r.id="Enabled";var u=document.createElement("DIV");u.slot="start",u.innerHTML=i.commonAssets.getDisableAutoOpen(),u.setAttribute("aria-hidden","true"),r.appendChild(u);var d=new na.Z(a.$S.OrganicFlowTurnedOn);c.LogInfoEvent(a.R.ButtonClick,"Organic flow turned on",d),l.SetIsPersonalizedShoppingEnabled(!0),l.AllowServerDrivenNotifications(!0)}t.stopPropagation()})),r.addEventListener("click",(function(t){t.stopPropagation()})),t.appendChild(r)}}},{key:"addSnoozeItem",value:function(e,i,o){var r=this,s=document.createElement("fluent-menu-item"),l=document.createElement("DIV");0===this.flyoutData.common.autoshowFeaturePref?(l.innerHTML=this.commonAssets.getSnoozeLineButton(),l.ariaLabel=this.flyoutData.strings.ariaSnoozeOn,l.style.width="20px",l.style.height="17px",l.setAttribute("aria-hidden","true"),s.id="Enabled",s.className+="defaultFontFamily",s.textContent=this.flyoutData.strings.commonSnoozeShopping,s.title=this.flyoutData.strings.commonSnoozeShopping,s.setAttribute("aria-labelledby",this.flyoutData.strings.ariaSnoozeOn)):(l.innerHTML=this.commonAssets.getSnoozeFilledButton(),l.ariaLabel=this.flyoutData.strings.ariaSnoozeoff,l.style.width="20px",l.style.height="17px",l.setAttribute("aria-hidden","true"),s.id="Disabled",s.className+="defaultFontFamily",s.textContent=this.flyoutData.strings.turnOffSnooze,s.title=this.flyoutData.strings.turnOffSnooze,s.setAttribute("aria-labelledby",this.flyoutData.strings.ariaSnoozeoff)),l.slot="start",s.appendChild(l);var c=this.pageHandlerModule,u=this.logModule;s.addEventListener("change",function(){var e=(0,t.Z)(n().mark((function t(e){var o,l,d,h;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"Enabled"===s.id?(s.textContent=r.flyoutData.strings.turnOffSnooze,s.title=r.flyoutData.strings.turnOffSnooze,s.setAttribute("aria-labelledby",r.flyoutData.strings.ariaSnoozeoff),s.id="Disabled",(o=document.createElement("DIV")).slot="start",o.innerHTML=r.commonAssets.getSnoozeFilledButton(),i.innerHTML=r.commonAssets.getSnoozeFilledButton(),i.ariaLabel=r.flyoutData.strings.ariaSnoozeoff,o.setAttribute("aria-hidden","true"),o.style.width="20px",o.style.height="17px",s.appendChild(o),l=new na.Z(a.$S.FlyoutSnooze),c.RecordAsUserAction(Ca.bS.FLYOUT_SNOOZED),"Flyout Snoozed",u.LogInfoEvent(a.R.ButtonClick,"Flyout Snoozed",l,ya.g.CouponImpressionId),c.AutoShowForAllFeatures(!1),c.DismissPopup()):(s.textContent=r.flyoutData.strings.commonSnoozeShopping,s.title=r.flyoutData.strings.commonSnoozeShopping,s.setAttribute("aria-labelledby",r.flyoutData.strings.ariaSnoozeOn),s.id="Enabled",(d=document.createElement("DIV")).slot="start",d.innerHTML=r.commonAssets.getSnoozeLineButton(),i.innerHTML=r.commonAssets.getSnoozeLineButton(),i.ariaLabel=r.flyoutData.strings.ariaSnoozeOn,d.setAttribute("aria-hidden","true"),d.style.width="20px",d.style.height="17px",s.appendChild(d),h=new na.Z(a.$S.FlyoutSnoozeUndo),c.RecordAsUserAction(Ca.bS.FLYOUT_SNOOZE_UNDO),"Flyout snooze turned off",u.LogInfoEvent(a.R.ButtonClick,"Flyout snooze turned off",h,ya.g.CouponImpressionId),c.AutoShowForAllFeatures(!0)),e.stopPropagation();case 2:case"end":return t.stop()}}),t)})));return function(t){return e.apply(this,arguments)}}()),s.addEventListener("click",(function(t){t.stopPropagation()})),e.appendChild(s)}},{key:"addAutoShowItem",value:function(t,e){var i=this,n=document.createElement("fluent-menu-item"),o=document.createElement("DIV");this.isAutoOpenEnabledForFeature(e)?(o.innerHTML=this.commonAssets.getDisableAutoOpen(),o.setAttribute("aria-hidden","true"),n.id="Enabled",n.className+="defaultFontFamily",n.textContent=this.flyoutData.strings.commonCMAutoShowDisable,n.title=this.flyoutData.strings.commonCMAutoShowDisable):(o.innerHTML=this.commonAssets.getEnableAutoOpen(),o.setAttribute("aria-hidden","true"),n.id="Disabled",n.className+="defaultFontFamily",n.textContent=this.flyoutData.strings.commonCMAutoShowEnable,n.title=this.flyoutData.strings.commonCMAutoShowEnable),o.slot="start",n.appendChild(o);var r=this.pageHandlerModule,s=this.logModule;n.addEventListener("change",(function(t){if("Enabled"===n.id){n.textContent=i.flyoutData.strings.commonCMAutoShowEnable,n.title=i.flyoutData.strings.commonCMAutoShowEnable,n.id="Disabled";var o=document.createElement("DIV");o.slot="start",o.innerHTML=i.commonAssets.getEnableAutoOpen(),o.setAttribute("aria-hidden","true"),n.appendChild(o);var l=new na.Z(a.$S.AutoShowTurnedOff);r.RecordAsUserAction(Ca.bS.TURN_OFF_AUTO_SHOW);var c="Auto Show turned off";e&&(c="Auto Show turned off for "+e),s.LogInfoEvent(a.R.ButtonClick,c,l,ya.g.CouponImpressionId),e&&e===St.s.AUTO_SHOW_SERVER_DRIVEN_NOTIFICATION?r.AllowServerDrivenNotifications(!1):r.AllowAutoShow(!1,e)}else{n.textContent=i.flyoutData.strings.commonCMAutoShowDisable,n.title=i.flyoutData.strings.commonCMAutoShowDisable,n.id="Enabled";var u=document.createElement("DIV");u.slot="start",u.innerHTML=i.commonAssets.getDisableAutoOpen(),u.setAttribute("aria-hidden","true"),n.appendChild(u);var d=new na.Z(a.$S.AutoShowTurnedOn);r.RecordAsUserAction(Ca.bS.TURN_ON_AUTO_SHOW);var h="Auto Show turned on";e&&(h="Auto Show turned on for "+e),s.LogInfoEvent(a.R.ButtonClick,h,d,ya.g.CouponImpressionId),e&&e===St.s.AUTO_SHOW_SERVER_DRIVEN_NOTIFICATION?r.AllowServerDrivenNotifications(!0):r.AllowAutoShow(!0,e)}t.stopPropagation()})),n.addEventListener("click",(function(t){t.stopPropagation()})),t.appendChild(n)}},{key:"isAutoOpenEnabledForFeature",value:function(t){if(this.flyoutData.experimentData.isExperimentActive(xt.H.autoShowControlForFeature)&&t){var e=this.getFeatureFromPopupOrigination(t);if(void 0!==this.flyoutData.common.autoshowFeaturePref&&e)return(this.flyoutData.common.autoshowFeaturePref&e)!==e}return this.flyoutData.common.autoShowAllowed}},{key:"addRebatesFlow",value:function(t,e){var i=this;if(""!==this.flyoutData.strings.cbFindAutomatically&&""!==this.flyoutData.strings.cbDontFindAutomatically){var n=this.flyoutData.strings.cbFindAutomatically,o=this.flyoutData.strings.cbDontFindAutomatically,r=document.createElement("fluent-menu-item"),s=document.createElement("DIV");e?(s.innerHTML=this.commonAssets.getDisableAutoOpen(),s.setAttribute("aria-hidden","true"),r.id="Enabled",r.className+="defaultFontFamily",r.textContent=o,r.title=o):(s.innerHTML=this.commonAssets.getEnableAutoOpen(),s.setAttribute("aria-hidden","true"),r.id="Disabled",r.className+="defaultFontFamily",r.textContent=n,r.title=n),s.slot="start",r.appendChild(s);var l=this.pageHandlerModule,c=this.logModule;r.addEventListener("change",(function(t){if("Enabled"===r.id){r.textContent=n,r.title=n,r.id="Disabled";var e=document.createElement("DIV");e.slot="start",e.innerHTML=i.commonAssets.getEnableAutoOpen(),e.setAttribute("aria-hidden","true"),r.appendChild(e);var s=new na.Z(a.$S.OrganicFlowTurnedOff);c.LogInfoEvent(a.R.ButtonClick,"Organic flow turned off",s),l.SetAllowOrganicRebates(!1)}else{r.textContent=o,r.title=o,r.id="Enabled";var u=document.createElement("DIV");u.slot="start",u.innerHTML=i.commonAssets.getDisableAutoOpen(),u.setAttribute("aria-hidden","true"),r.appendChild(u);var d=new na.Z(a.$S.OrganicFlowTurnedOn);c.LogInfoEvent(a.R.ButtonClick,"Organic flow turned on",d),l.SetAllowOrganicRebates(!0)}t.stopPropagation()})),r.addEventListener("click",(function(t){t.stopPropagation()})),t.appendChild(r)}}},{key:"addPackageTrackingFlow",value:function(t){var e,i,n,o,r=this,s=null===(e=this.flyoutData)||void 0===e||null===(i=e.strings)||void 0===i?void 0:i.disablePackageTrackingFromMenuText,l=null===(n=this.flyoutData)||void 0===n||null===(o=n.strings)||void 0===o?void 0:o.enablePackageTrackingFromMenuText;if(!np(s)&&!np(l)){var c=document.createElement("fluent-menu-item");c.className+="defaultFontFamily",c.textContent=s,c.title=s,c.id="Disabled";var u=document.createElement("DIV");u.innerHTML=this.commonAssets.getDisableAutoOpen(),u.setAttribute("aria-hidden","true"),u.slot="start",c.appendChild(u),c.addEventListener("change",(function(){if("Enabled"===c.id){r.pageHandlerModule.SetPackageTrackingUserConsent(!0),r.pageHandlerModule.RecordAsUserAction(Ca.bS.PACKAGE_TRACKING_OPT_IN);var t=new na.Z(a.$S.PackageTrackingOptIn);r.logModule.LogInfoEvent(a.R.ButtonClick,"User enabled package tracking from menu",t),c.id="Disabled",c.textContent=s,c.title=s;var e=document.createElement("DIV");e.slot="start",e.innerHTML=r.commonAssets.getDisableAutoOpen(),e.setAttribute("aria-hidden","true"),c.appendChild(e)}else{r.pageHandlerModule.SetPackageTrackingUserConsent(!1),r.pageHandlerModule.RecordAsUserAction(Ca.bS.PACKAGE_TRACKING_OPT_OUT);var i=new na.Z(a.$S.PackageTrackingOptOut);r.logModule.LogInfoEvent(a.R.ButtonClick,"User disabled package tracking from menu",i),c.id="Enabled",c.textContent=l,c.title=l;var n=document.createElement("DIV");n.slot="start",n.innerHTML=r.commonAssets.getEnableAutoOpen(),n.setAttribute("aria-hidden","true"),c.appendChild(n)}})),c.addEventListener("click",(function(t){t.stopPropagation()})),t.appendChild(c)}}},{key:"isDisableOptOutMenuActive",value:function(){var t,e;if("amazon.com"===(null===(t=this.flyoutData)||void 0===t||null===(e=t.common)||void 0===e?void 0:e.domain)){this.pageHandlerModule.TriggerExperiment(xt.H.showAmazonOtherSellers);var i=this.flyoutData.experimentData.isExperimentActive(xt.H.showAmazonOtherSellers),n=this.flyoutData.experimentData.isVariantActive(xt.H.showAmazonOtherSellers,_f.UD.AS_FeatureOpt);return i&&n}return!1}}]),e}(),Hf=Ff;function Zf(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return Bf(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Bf(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function Bf(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Uf=function(){function e(t,i,n,o,a,r,l){var c=this;(0,s.Z)(this,e),(0,I.Z)(this,"availableModules",void 0),(0,I.Z)(this,"stateManagement",void 0),(0,I.Z)(this,"pageHandlerModule",void 0),(0,I.Z)(this,"logModule",void 0),(0,I.Z)(this,"flyoutData",void 0),(0,I.Z)(this,"utilities",void 0),(0,I.Z)(this,"commonAssets",void 0),(0,I.Z)(this,"viewModules",void 0),(0,I.Z)(this,"bannerModule",void 0),(0,I.Z)(this,"notificationModules",void 0),(0,I.Z)(this,"bingShoppingCampaignGuid",void 0),(0,I.Z)(this,"ExclusiveModule",new Set([D.GX.CHECKOUTAUTOFILL])),(0,I.Z)(this,"modulesGroups",new Set([new Set([D.GX.VIRTUAL_CARD,D.GX.FEEDBACK])])),(0,I.Z)(this,"currentModulesGroup",new Set([])),(0,I.Z)(this,"couponImpressionIdModules",new Set([D.GX.COUPON,D.GX.CASHBACK,D.GX.CHECKOUTAUTOFILL,D.GX.COUPONCLIPPING,D.GX.DEALS,D.GX.EMPTYCOUPON,D.GX.REWARD])),(0,I.Z)(this,"isExclusiveModule",(function(t,e){return e.has(t)})),(0,I.Z)(this,"isInCurrentModuleGroup",(function(t){return!(c.currentModulesGroup.size>0)||c.currentModulesGroup.has(t)})),(0,I.Z)(this,"updateModuleGroup",(function(t){if(!(c.currentModulesGroup.size>0)){var e,i=Zf(c.modulesGroups);try{for(i.s();!(e=i.n()).done;){var n,o,a=e.value;(null==a||null===(n=a.values())||void 0===n||null===(o=n.next())||void 0===o?void 0:o.value)===t&&(c.currentModulesGroup=a)}}catch(t){i.e(t)}finally{i.f()}}})),this.stateManagement=t,this.stateManagement.addEventListener(Ia.e1.CreateModules,(function(t){t&&t.detail&&t.detail.flyoutWrapper&&c.createModules(t.detail.flyoutWrapper)})),this.pageHandlerModule=n.pageHandlerModule,this.logModule=n.logModule,this.flyoutData=i,this.utilities=n.viewModulesUtilities,this.viewModules=a,this.bannerModule=l,this.notificationModules=r,this.commonAssets=o,this.stateManagement.addEventListener(Ia.e1.pdpEligibility,(function(t){t&&t.detail&&void 0!==t.detail.pdpElegibility&&yt("isPDP",t.detail.pdpElegibility)}))}var i,r;return(0,l.Z)(e,[{key:"createModules",value:(r=(0,t.Z)(n().mark((function t(e){var i=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.delegateYield(n().mark((function t(){var r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,S;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=null!==(r=null===(s=i.flyoutData.dataStoreModule.CouponData)||void 0===s?void 0:s.isCheckoutPageWithAutoApply)&&void 0!==r&&r,c=[],u=!1,!(i.notificationModules&&i.notificationModules.length>0&&i.flyoutData.common.openedWith===D.Te.Auto)){t.next=25;break}i.pageHandlerModule.TriggerExperiment(xt.H.smallNotification),p=Zf(i.notificationModules),t.prev=6,g=n().mark((function t(){var e,r,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=f.value,t.prev=1,d=performance.now(),Lf.markers.lastModuleStarted=e.GetNotificationName(),t.next=6,e.ShouldRenderNotification();case 6:if(!t.sent){t.next=15;break}return t.next=9,e.RenderNotification(i.flyoutData.common.shopping);case 9:return r=t.sent,u=!0,Lf.markers.lastModuleFinished=e.GetNotificationName(),Tt.SO.queueUpdate((function(){if(i.utilities.styleAnchorsRefresh(),r)try{e.PostProcessing(r.name,0,r.element),h=performance.now(),i.logViewModulePerf(r.name,h-d)}catch(e){var t=new o.Z(a.xu.OnErrorInvoked);i.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"Error while Post processing Module: ".concat(r.name," ").concat(Ma.getErrorString(e)),t,i.GetImpressionType(r.name))}})),i.utilities.recordContentViewed(e.GetNotificationName(),i.stateManagement.getState(Ia.IY.isAutoApplyVisible),ya.g.EdgeImpressionId,!0,!0),t.abrupt("return","break");case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(1),s=new o.Z(a.xu.OnErrorInvoked),i.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"Module Notification Exception: ".concat(e.GetNotificationName()," ").concat(Ma.getErrorString(t.t0)),s);case 21:case"end":return t.stop()}}),t,null,[[1,17]])})),p.s();case 9:if((f=p.n()).done){t.next=16;break}return t.delegateYield(g(),"t0",11);case 11:if("break"!==t.t0){t.next=14;break}return t.abrupt("break",16);case 14:t.next=9;break;case 16:t.next=21;break;case 18:t.prev=18,t.t1=t.catch(6),p.e(t.t1);case 21:return t.prev=21,p.f(),t.finish(21);case 24:new Hf(i.flyoutData,i.utilities,i.pageHandlerModule,i.logModule,i.stateManagement).createFlyoutButtons(i.flyoutData.common.shopping,!0,e);case 25:if(u){t.next=31;break}return t.next=28,i.GetRenderedModules();case 28:if((c=t.sent)&&c.length>0&&(i.stateManagement.setState(Ia.IY.topModuleName,c[0].name),i.stateManagement.setState(Ia.IY.topModulePriority,c[0].priority)),i.flyoutData.common.shouldShowBanner)try{if(i.bannerModule)try{i.bannerModule.renderBanner()}catch(t){m=new o.Z(a.xu.OnErrorInvoked),i.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"Banner Exception: ".concat(Ma.getErrorString(t)),m)}}catch(t){v=new o.Z(a.xu.OnErrorInvoked),i.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"Module Exception: Banner ".concat(Ma.getErrorString(t)),v)}else i.renderModules(c,l,e);case 31:i.flyoutData.common.shouldShowBanner&&i.bannerModule||!(c.length>0||u)||(y=performance.now(),i.appendContentToFlyout(e),Tt.SO.queueUpdate((function(){i.utilities.handleFlyoutFocus(c,i.flyoutData.common.shopping)})),C=new CustomEvent(Ia.e1.ModulesRendered),i.stateManagement.dispatchEvent(C),i.stateManagement.setState(Ia.IY.modulesRendered,!0),i.flyoutData.common.channel===D.Ee.STABLE&&i.flyoutData.common.shopping.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),b=performance.now(),S=new o.Z(a.xu.PerfAppendToDOM,void 0,void 0,void 0,i.flyoutData.common.isPane?"pane":""),i.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"".concat(b-y),S));case 32:case"end":return t.stop()}}),t,null,[[6,18,21,24]])}))(),"t0",2);case 2:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})},{key:"appendContentToFlyout",value:function(t){try{t&&this.flyoutData.common.shopping&&t.appendChild(this.flyoutData.common.shopping)}catch(t){var e=new o.Z(a.xu.OnErrorInvoked);this.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"Error appending content to flyout ".concat(t),e)}}},{key:"GetRenderedModules",value:(i=(0,t.Z)(n().mark((function t(){var e,i,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,S,x,E,A,T,I,k,w,R,O,P,M,N,L,_,F,H,Z,B,U,G,V,$;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v=[],y=null===(e=this.flyoutData.dataStoreModule.CouponData)||void 0===e?void 0:e.isCheckoutPageWithAutoApply,C=null!==(i=null===(r=this.flyoutData.dataStoreModule.CashBackData)||void 0===r?void 0:r.isCashBackActivated)&&void 0!==i?i:null,this.stateManagement.setState(Ia.IY.renderedViewModuleCount,0),b=new Map,S=Zf(this.viewModules),t.prev=6,S.s();case 8:if((x=S.n()).done){t.next=42;break}if(E=x.value,t.prev=10,A=void 0,T=void 0,Lf.markers.lastModuleStarted=E.GetModuleName(),A=performance.now(),t.t0=E,!t.t0){t.next=20;break}return t.next=19,E.ShouldRenderModule();case 19:t.t0=t.sent;case 20:if(!t.t0){t.next=34;break}return t.next=23,E.renderModule();case 23:if(I=t.sent,T=performance.now(),!I||!this.isInCurrentModuleGroup(I.name)){t.next=34;break}if(this.logViewModulePerf(I.name,T-A),v.push(I),this.stateManagement.setState(Ia.IY.renderedViewModuleCount,v.length),b.set(I.name,v.length-1),Lf.markers.lastModuleFinished=E.GetModuleName(),this.updateModuleGroup(I.name),!this.isExclusiveModule(I.name,this.ExclusiveModule)){t.next=34;break}return t.abrupt("break",42);case 34:t.next=40;break;case 36:t.prev=36,t.t1=t.catch(10),k=new o.Z(a.xu.OnErrorInvoked),this.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"Module Exception: ".concat(E.GetModuleName()," ").concat(Ma.getErrorString(t.t1)),k,this.GetImpressionType(E.GetModuleName()));case 40:t.next=8;break;case 42:t.next=47;break;case 44:t.prev=44,t.t2=t.catch(6),S.e(t.t2);case 47:return t.prev=47,S.f(),t.finish(47);case 50:w=null===(s=this.flyoutData.dataStoreModule.PriceComparisonData)||void 0===s?void 0:s.shouldBeInPolePosition,R=b.get(D.GX.COUPONCLIPPING),O=b.get(D.GX.COUPON),P=b.get(D.GX.EMPTYCOUPON),M=b.get(D.GX.PRICEHISTORY),N=b.get(D.GX.PRICECOMPARISON),L=b.get(D.GX.CASHBACK),_=b.get(D.GX.REWARD),F=b.get(D.GX.SIMILARSELLERS),H=b.get(D.GX.AUTOSMARKETPLACE),Z=b.get(D.GX.GROCERY_CASHBACK),B=this.flyoutData.dataLoader.GetLoadTimeDataValue("url",void 0);try{this.bingShoppingCampaignGuid=new URL(B).searchParams.get("bing_shopping_campaign_guid")||""}catch(t){}return U=b.get(D.GX.EXCLUSIVECOUPONS),G=b.get(D.GX.SUSTAINABILITY),V=void 0!==_&&v[_].moduleInterface.isRewardsAdded(),void 0!==(null==($=this.utilities.loadLocalStorageAsJSON("activatedNotifItem"))?void 0:$.keys)&&void 0!==Z?v[Z].priority=0:this.bingShoppingCampaignGuid===D.Bl.PRICEHISTORY&&void 0!==M&&this.flyoutData.common.openedWith===D.Te.Auto&&this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_BING_CAMPAIGN&&void 0===R&&void 0===F?v[M].priority=0:this.bingShoppingCampaignGuid===D.Bl.PRICECOMPARISON&&void 0!==N&&this.flyoutData.common.openedWith===D.Te.Auto&&this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_BING_CAMPAIGN&&void 0===R&&void 0===F&&(null===(l=this.flyoutData.dataStoreModule.PriceComparisonData)||void 0===l||null===(c=l.segment)||void 0===c?void 0:c.toLowerCase())!==D.VG.AUTOS?v[N].priority=0:void 0===_||void 0===L||C||V?void 0!==R?(v[R].priority=0,void 0!==O&&(v[O].priority=D.H7.MAX),void 0!==P&&(v[P].priority=D.H7.MAX)):this.flyoutData.common.openedWith===D.Te.Auto&&this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_OTHER_SELLERS&&void 0!==F?v[F].priority=0:void 0!==U?v[U].priority=0:void 0===M||y||w?void 0!==O&&y?v[O].priority=0:(y||void 0===L||this.flyoutData.common.seeInfoFromPCNotification||!(this.flyoutData.common.openedWith===D.Te.Auto||(null===(u=this.flyoutData.dataStoreModule.CashBackData)||void 0===u?void 0:u.activateRebatesStatus)===D.FA.PENDING_SWITCH_TO_MSA_PROFILE||null!==(d=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==d&&d.isSignInSupportedDomainCashBack||null===(h=this.flyoutData.dataStoreModule.CashBackData)||void 0===h)&&h.isCashBackActivated)&&(!this.utilities.isPinterest()||void 0===L||null!==(p=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==p&&p.isCashBackActivated)?void 0===N||y||this.flyoutData.dataStoreModule.PriceHistoryData&&!w?void 0!==H&&(null===(f=this.flyoutData.dataStoreModule.PriceComparisonData)||void 0===f||null===(g=f.segment)||void 0===g?void 0:g.toLowerCase())===D.VG.AUTOS?v[H].priority=0:!this.flyoutData.common.isPane||void 0===L||null!==(m=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==m&&m.isCashBackActivated||(v[L].priority=0):v[N].priority=0:v[L].priority=0:v[M].priority=0:(v[_].priority=0,v[L].priority=.5),void 0!==G&&(v[G].priority=D.H7.MAX),v.sort((function(t,e){return t.priority-e.priority})),this.flyoutData.experimentData.isVariantActive(xt.H.coloredHeader,_f.HS.ColoredHeaderExp1)?this.utilities.applyStyles(this.flyoutData.common.shopping,this.commonAssets.getColoredHeaderCssExp1()):this.flyoutData.experimentData.isVariantActive(xt.H.coloredHeader,_f.HS.ColoredHeaderExp2)?this.utilities.applyStyles(this.flyoutData.common.shopping,this.commonAssets.getColoredHeaderCssExp2()):this.flyoutData.experimentData.isVariantActive(xt.H.coloredHeader,_f.HS.ColoredHeaderExp3)?this.utilities.applyStyles(this.flyoutData.common.shopping,this.commonAssets.getColoredHeaderCssExp3()):this.flyoutData.experimentData.isVariantActive(xt.H.coloredHeader,_f.HS.ColoredHeaderExp4)&&this.utilities.applyStyles(this.flyoutData.common.shopping,this.commonAssets.getColoredHeaderCssExp4()),t.abrupt("return",v);case 72:case"end":return t.stop()}}),t,this,[[6,44,47,50],[10,36]])}))),function(){return i.apply(this,arguments)})},{key:"logViewModulePerf",value:function(t,e){try{var i=t;this.flyoutData.common.isPane&&(i+=" pane");var n=new o.Z(a.xu.PerfViewModule,void 0,void 0,this.flyoutData.common.domain,i);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"".concat(e),n)}catch(t){var r=new o.Z(a.xu.OnErrorInvoked);this.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"error logging module perf time ".concat(t),r)}}},{key:"setSectionExpandedState",value:function(t,e,i,n,o,a){var r,s,l=this.flyoutData.dataStoreModule.CashBackData,c=null!==(r=null==l?void 0:l.isCashBackActivated)&&void 0!==r?r:null;0===t?e.element.expanded=!0:e.name!==D.GX.PRICECOMPARISON||!this.flyoutData.common.foundLowerPrice&&this.flyoutData.common.bannerContext!==D.De.VIEWALLPC||i||n===D.Bl.PRICEHISTORY?e.name===D.GX.PRICEHISTORY&&this.flyoutData.common.bannerContext===D.De.VIEWPRICEHISTORY&&n!==D.Bl.PRICECOMPARISON||1===t&&e.name===D.GX.CASHBACK&&o[0].name===D.GX.REWARD&&!1===c?e.element.expanded=!0:e.element.expanded=!1:e.element.expanded=!0,e.element.expanded&&!(t>0)||a&&this.isExclusiveModule(e.name,a)&&"none"!==(null===(s=e.element)||void 0===s?void 0:s.style.display)||this.utilities.hideModule(t,e)||this.utilities.addSectionSeparator(this.flyoutData.common.shopping)}},{key:"getModuleByName",value:function(t){if(this.viewModules&&this.viewModules.length>0){var e,i=Zf(this.viewModules);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n.GetModuleName()===t)return n}}catch(t){i.e(t)}finally{i.f()}}return null}},{key:"GetImpressionType",value:function(t){return this.couponImpressionIdModules.has(t)?ya.g.CouponImpressionId:ya.g.EdgeImpressionId}},{key:"setTitle",value:function(t){if(t){if(t.name===D.GX.EMPTYCOUPON)return;try{var e=this.flyoutData.common.shopping.querySelectorAll('[slot="header-content"]');(!e||e&&0===e.length)&&t.moduleInterface.populateMainHeader()}catch(e){var i=new o.Z(a.xu.OnErrorInvoked);this.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"Populate Header Exception: ".concat(t.name," ").concat(Ma.getErrorString(e)),i,this.GetImpressionType(t.name))}}}}]),e}(),Gf=Uf;function Vf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var $f,Wf=function(e){(0,O.Z)(c,e);var i,r=Vf(c);function c(){return(0,s.Z)(this,c),r.apply(this,arguments)}return(0,l.Z)(c,[{key:"renderModules",value:(i=(0,t.Z)(n().mark((function t(e,i,r){var s,l,c,u,d,h=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=performance.now(),this.stateManagement.addEventListener(Ia.e1.onDataUpdate,(function(t){t&&t.detail&&t.detail.moduleType&&h.utilities.styleElementsUXRefresh(t.detail.moduleType)})),e&&e.length>0){for(l=function(t){var n=e[t];if(n&&n.element){h.setSectionExpandedState(t,n,i,h.bingShoppingCampaignGuid,e,h.ExclusiveModule),h.utilities.hideModule(t,n)||h.flyoutData.common.shopping.appendChild(n.element),Tt.SO.queueUpdate((function(){h.utilities.styleModules(n,t)}));try{n.moduleInterface.PostProcessing(n.name,t,n.element),Tt.SO.queueUpdate((function(){h.utilities.sendCTRLog(n,t,h.stateManagement.getState(Ia.IY.isAutoApplyVisible),h.stateManagement.getState(Ia.IY.topModuleName),h.GetImpressionType(n.name)),h.utilities.styleElementsUXRefresh(n)}))}catch(t){var r=new o.Z(a.xu.OnErrorInvoked);h.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"Error while Post processing Module: ".concat(n.name," ").concat(Ma.getErrorString(t)),r,h.GetImpressionType(n.name))}}},c=0;c<e.length;c++)l(c);this.flyoutData.experimentData.isPCBannerUXExperimentActive()||this.setTitle(e[0]),this.flyoutData.common.currentDevice!==D.AS.Desktop&&null===this.flyoutData.dataLoader.mobileData.channel||new Hf(this.flyoutData,this.utilities,this.pageHandlerModule,this.logModule,this.stateManagement).createFlyoutButtons(this.flyoutData.common.shopping,this.flyoutData.common.currentDevice===D.AS.Desktop&&!this.flyoutData.experimentData.isPCBannerUXExperimentActive(),r),u=performance.now(),d=new o.Z(a.xu.PerfAddModulesToShopping),this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"".concat(u-s),d)}else new Mf(this.logModule,this.pageHandlerModule,this.flyoutData.strings,this.flyoutData.common.currentTheme,this.flyoutData.common.currentDirection,this.commonAssets).renderErrorUI("no view module to render");case 3:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return i.apply(this,arguments)})}]),c}(Gf),zf=Wf,Kf=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getInfoIcon",value:function(){return A.Z.getTrustedHTML($f||($f=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="12" height="13" viewBox="0 0 12 13" fill="none" aria-hidden="true">\n        <path opacity="0.7" d="M5.4 7.14712C5.4 6.81575 5.66863 6.54712 6 6.54712C6.33137 6.54712 6.6 6.81575 6.6 7.14712V8.94712C6.6 9.27849 6.33137 9.54712 6 9.54712C5.66863 9.54712 5.4 9.27849 5.4 8.94712V7.14712ZM6 3.84712C5.50294 3.84712 5.1 4.25006 5.1 4.74712C5.1 5.24418 5.50294 5.64712 6 5.64712C6.49706 5.64712 6.9 5.24418 6.9 4.74712C6.9 4.25006 6.49706 3.84712 6 3.84712ZM0 6.54712C0 3.23341 2.68629 0.547119 6 0.547119C9.31371 0.547119 12 3.23341 12 6.54712C12 9.86083 9.31371 12.5471 6 12.5471C2.68629 12.5471 0 9.86083 0 6.54712ZM6 1.74712C3.34903 1.74712 1.2 3.89615 1.2 6.54712C1.2 9.19809 3.34903 11.3471 6 11.3471C8.65097 11.3471 10.8 9.19809 10.8 6.54712C10.8 3.89615 8.65097 1.74712 6 1.74712Z" fill="var(--neutral-foreground-rest)"/>\n        </svg>'])))}},{key:"getStyles",value:function(){return"\n        #attainableCouponDiv {\n            display: flex;\n            flex-direction: row;\n            justify-content: center;\n            background: linear-gradient(90deg, rgba(255, 249, 217, 0.6) 0%, rgba(233, 251, 255, 0.6) 53.12%, rgba(221, 235, 255, 0.6) 100%);\n            width: calc(100% + 40px);\n            height: 52px;\n            margin-left: -20px;\n            margin-right: -20px;\n            margin-top: 20px;\n            margin-bottom: -10px;\n        }\n        #attLock {\n            width: 20px;\n            height: 20px;\n            margin-right: 12px;\n            align-self: center;\n        }\n        #attPrompt {\n            font-size: 14px;\n            line-height: 20px;\n            margin: 0px;\n            align-self: center;\n        }\n        #notificationDiv {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            background: linear-gradient(90deg, rgba(255, 249, 217, 0.6) 0%, rgba(233, 251, 255, 0.6) 53.12%, rgba(221, 235, 255, 0.6) 100%);\n            width: calc(100%);\n            margin-top: -20px;\n        }\n        #notificationBanner {\n            display: flex;\n            flex-direction: row;\n            justify-content: center;\n            width: calc(100%);\n            height: 52px;\n        }\n        @media (prefers-color-scheme: dark) {\n            #attainableCouponDiv, #notificationDiv {\n                background: linear-gradient(90deg, rgba(105, 99, 67, 0.6) 0%, rgba(83, 101, 105, 0.6) 53.12%, rgba(71, 85, 105, 0.6) 100%);\n            }\n        }"}}]),t}(),Yf=function(){function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"utilities",void 0),this.utilities=e.viewModulesUtilities}return(0,l.Z)(t,[{key:"isAttainableCoupon",value:function(t,e){var i,n,o=null!==(i=null==t?void 0:t.minimumPurchase)&&void 0!==i?i:null!==(n=null==t?void 0:t.calculatedCutoffPrice)&&void 0!==n?n:0;return(null==t?void 0:t.shortHeader)&&e&&o>e}},{key:"shouldShowAttainableCoupon",value:function(t,e,i){var n=i&&e?i-e:0;if(!t||n<=0)return!1;var o=Number(t.amount);if(t.type.includes("Percent"))o=i*t.amount/100;else if("Amount"!==t.type)return!1;return!!(n<o/2)&&{couponSavings:o,amountToThreshold:n}}},{key:"getSavingsAmount",value:function(t){if(!t)return null;var e=/(Percentage|Amount)Offer ([0-9]+)/.exec(t);return e&&e[1]&&e[2]?{amount:e[2],type:e[1]}:void 0}},{key:"getSavingsString",value:function(t,e){if(!t)return null;if(t.type.includes("Percent"))return"".concat(t.amount,"% OFF");if("Amount"===t.type){var i="".concat(D.iM.currency).concat(t.amount," OFF");return this.utilities.replaceStringsPlaceholders(i,e)}return null}}]),t}(),jf=i(245);function Xf(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return qf(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return qf(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function qf(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Jf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var Qf=function(e){(0,O.Z)(u,e);var i,o,r,c=Jf(u);function u(t,e){var i;return(0,s.Z)(this,u),i=c.call(this),(0,I.Z)((0,R.Z)(i),"flyoutData",void 0),(0,I.Z)((0,R.Z)(i),"utilities",void 0),(0,I.Z)((0,R.Z)(i),"attainableUtilities",void 0),(0,I.Z)((0,R.Z)(i),"assets",void 0),(0,I.Z)((0,R.Z)(i),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(i),"logModule",void 0),(0,I.Z)((0,R.Z)(i),"lockedCoupons",void 0),(0,I.Z)((0,R.Z)(i),"cartValue",void 0),i.flyoutData=t,i.utilities=e.viewModulesUtilities,i.attainableUtilities=new Yf(e),i.assets=new Kf,i.pageHandlerModule=e.pageHandlerModule,i.logModule=e.logModule,i.cartValue=-1,i}return(0,l.Z)(u,[{key:"GetModuleName",value:function(){return D.GX.ATTAINABLECOUPONS}},{key:"ShouldRenderModule",value:(r=(0,t.Z)(n().mark((function t(){var e,i,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.updateLockedCoupons(),e=this.lockedCoupons.length>0,i=this.flyoutData.common.isCheckoutPage,o=this.flyoutData.common.isPane,t.abrupt("return",i&&e&&!o);case 5:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"renderModule",value:(o=(0,t.Z)(n().mark((function t(){var e,i,o,a,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),(e=this.utilities.createElement("div")).slot="actions",e.id="attainableCouponDiv",e.setAttribute("role","group"),e.setAttribute("aria-labelledby","attPrompt"),i=this.flyoutData.common.domain,t.next=9,this.parseInfo(i);case 9:if(!((o=t.sent)&&o.isCouponAttained&&o.lastAttainableCoupon)||o.referenceCoupon){t.next=14;break}this.populateCouponAttained(o.lastSavings,e),t.next=21;break;case 14:if(!(o&&o.referenceCoupon&&this.lockedCoupons.length>0)){t.next=20;break}this.populateAttainableCoupon(o.referenceCoupon,o.referenceSavings,o.lastAttainableCoupons,i,e),this.createInfoTooltip(e,o.referenceCoupon),e.style.marginTop=this.lockedCoupons.length===(null===(a=this.flyoutData.dataStoreModule.CouponData)||void 0===a?void 0:a.Coupons.length)?"0px":"20px",t.next=21;break;case 20:return t.abrupt("return",Promise.resolve(null));case 21:return this.pageHandlerModule.RecordAsUserAction(Ca.bS.ATTAINABLE_COUPON_VIEWED),r=this.CreateModule(e,D.H7.ATTAINABLECOUPON,D.GX.ATTAINABLECOUPONS,D.$k.CONTEXTUAL),t.abrupt("return",Promise.resolve(r));case 24:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"populateMainHeader",value:function(){}},{key:"parseInfo",value:(i=(0,t.Z)(n().mark((function t(e){var i,o,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,S,x,E,A,T,I=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pageHandlerModule.GetStorageValue("CartValues").then((function(t){var i;if(null!=t&&null!==(i=t.value)&&void 0!==i&&i.stringValue)try{var n=JSON.parse(null==t?void 0:t.value.stringValue)[e].cartValue;I.cartValue=n.OrderTotal}catch(t){return{}}}));case 2:i=!1,t.prev=3,s=vt("lastAttainableCoupon"),r=s?JSON.parse(s):{},this.cartValue>0&&r&&(p=null!==(l=r[e])&&void 0!==l?l:{},o=p.referenceCoupon,f=null!==(c=null===(u=o)||void 0===u?void 0:u.minimumPurchase)&&void 0!==c?c:null!==(d=null===(h=o)||void 0===h?void 0:h.calculatedCutoffPrice)&&void 0!==d?d:0,o&&(i=f<this.cartValue,a=this.attainableUtilities.getSavingsAmount(o.shortHeader))),t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return",{});case 13:this.updateLockedCoupons(),g=75,C=Xf(this.lockedCoupons);try{for(C.s();!(b=C.n()).done;)E=b.value,A=this.attainableUtilities.getSavingsAmount(E.shortHeader),T=null!==(S=E.minimumPurchase)&&void 0!==S?S:null!==(x=E.calculatedCutoffPrice)&&void 0!==x?x:0,y=this.attainableUtilities.shouldShowAttainableCoupon(A,this.cartValue,T),E.successRate&&E.successRate>g&&y&&(m=E,v=A,g=E.successRate)}catch(t){C.e(t)}finally{C.f()}return t.abrupt("return",{isCouponAttained:i,lastAttainableCoupon:o,lastAttainableCoupons:r,lastSavings:a,referenceCoupon:m,referenceSavings:v});case 18:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(t){return i.apply(this,arguments)})},{key:"populateAttainableCoupon",value:function(t,e,i,n,o){var a,r,s,l,c,u=this.utilities.createElement("img");if(u.id="attLock",u.src=this.flyoutData.common.resourcesEndpoint+"common/Lock.png",u.setAttribute("aria-hidden","true"),o.append(u),void 0===t||void 0===e)return Promise.resolve(null);var d=new Date;i[n]={referenceCoupon:t,timestamp:d},yt("lastAttainableCoupon",JSON.stringify(i));var h=this.utilities.createElement("p");h.id="attPrompt";var p=(null!==(a=null==t?void 0:t.minimumPurchase)&&void 0!==a?a:null!==(r=null==t?void 0:t.calculatedCutoffPrice)&&void 0!==r?r:0)-this.cartValue,f=this.flyoutData.strings.attFlyoutLocked,g=this.utilities.createElement("span",{style:"display: inline; color: var(--neutral-foreground-rest); font-size: 14px; font-weight: bold;"});g.textContent="".concat(D.iM.currency).concat(p.toFixed(2)),g.textContent=this.utilities.replaceStringsPlaceholders(g.textContent);var m=null!==(s=null===(l=this.flyoutData.dataStoreModule.ApiData)||void 0===l||null===(c=l.retailerData)||void 0===c?void 0:c.exclusiveMarket)&&void 0!==s?s:"en-us",v=this.attainableUtilities.getSavingsString(e,m),y=this.utilities.createElement("span",{style:"display: inline; color: var(--neutral-foreground-rest); font-size: 14px; font-weight: bold;"});y.textContent=v,this.utilities.populateMultipleChildrenHTML(h,f,g,y),o.append(h)}},{key:"createInfoTooltip",value:function(t,e){var i,n,o=this,r=null!==(i=null==e?void 0:e.minimumPurchase)&&void 0!==i?i:null!==(n=null==e?void 0:e.calculatedCutoffPrice)&&void 0!==n?n:0,s="".concat(D.iM.currency).concat((r-this.cartValue).toFixed(2)),l="".concat(D.iM.currency).concat(r.toFixed(2)),c=this.utilities.createElement("div");c.innerHTML=this.assets.getInfoIcon(),c.href="#",c.slot="hover-anchor";var u=this.utilities.createElement("msft-shopping-tooltip");u.id="header-tooltip",u.style.alignSelf="center",u.style.marginLeft="4px",u.style.marginTop="2px",u.header=this.utilities.replaceValueInKey("attTooltipHeader",this.flyoutData.strings.attTooltipHeader,s),u.header=this.utilities.replaceStringsPlaceholders(u.header),u.content=this.utilities.replaceValueInKey("attTooltipText",this.flyoutData.strings.attTooltipText,l),u.content=this.utilities.replaceStringsPlaceholders(u.content),u.addEventListener("hover",(function(){o.utilities.shouldDisplayTooltipSide(c,u,110)?(u.caratSide=xf.W.Right,u.caratTopOffset="100px",u.width="257px"):(u.caratSide=xf.W.Top,u.caratLeftOffset="293px",u.width="300px");var t=new na.Z(a.$S.AttainableInfoIcon);o.pageHandlerModule.RecordAsUserAction(Ca.bS.ATTAINABLE_COUPON_CLICK),o.logModule.LogInfoEvent(a.R.ButtonClick,"Attainable coupon info viewed",t)})),u.append(c),t.append(u)}},{key:"populateCouponAttained",value:function(t,e){var i,n,o,a=this.utilities.createElement("p");a.id="attPrompt";var r=this.flyoutData.strings.attFlyoutUnlocked,s=null!==(i=null===(n=this.flyoutData.dataStoreModule.ApiData)||void 0===n||null===(o=n.retailerData)||void 0===o?void 0:o.exclusiveMarket)&&void 0!==i?i:"en-us",l=this.attainableUtilities.getSavingsString(t,s),c=this.utilities.createElement("span",{style:"display: inline; color: var(--neutral-foreground-rest); font-size: 14px; font-weight: bold;"});c.textContent=l,this.utilities.populateSingleChildHtml(a,r,c),e.append(a)}},{key:"updateLockedCoupons",value:function(){var t;if(this.lockedCoupons=[],null!==(t=this.flyoutData.dataStoreModule.CouponData)&&void 0!==t&&t.Coupons){var e,i,n=Xf(null===(e=this.flyoutData.dataStoreModule.CouponData)||void 0===e?void 0:e.Coupons);try{for(n.s();!(i=n.n()).done;){var o,a,r=i.value,s=null!==(o=r.minimumPurchase)&&void 0!==o?o:null!==(a=r.calculatedCutoffPrice)&&void 0!==a?a:0;s&&s>this.cartValue&&r.shortHeader&&this.lockedCoupons.push(r)}}catch(t){n.e(t)}finally{n.f()}}}}]),u}(jf.Z),tg=Qf;function eg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var ig,ng,og,ag=function(e){(0,O.Z)(a,e);var i,o=eg(a);function a(t,e){return(0,s.Z)(this,a),o.call(this,t,e)}return(0,l.Z)(a,[{key:"RenderNotification",value:(i=(0,t.Z)(n().mark((function t(e){var i,o,a,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.utilities.applyStyles(e,this.assets.getStyles()),(i=this.utilities.createElement("div")).id="notificationDiv",(o=this.utilities.createElement("div")).id="notificationBanner",a=this.flyoutData.common.domain,t.next=8,this.parseInfo(a);case 8:return r=t.sent,this.populateAttainableCoupon(r.referenceCoupon,r.referenceSavings,r.lastAttainableCoupons,a,o),i.append(o),this.createInfoTooltip(o,r.referenceCoupon),e.append(i),t.abrupt("return",Promise.resolve(null));case 14:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"ShouldRenderNotification",value:function(){this.flyoutData.common.openedWith===D.Te.Auto&&(this.flyoutData.common.popupOrigination,St.s.AUTO_SHOW_ATTAINABLE_COUPONS);return Promise.resolve(!1)}},{key:"GetNotificationName",value:function(){return D.sM.ATTAINABLECOUPONS}}]),a}(tg),rg=ag,sg=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n        .headerContentWrapper {\n            display: flex;\n            text-align: center;\n        }\n        .headerTitle {\n            font-weight: 600;\n            align-items: center;\n            font-size: 24px;\n            line-height: 36px;\n            margin: 0px;\n        }\n        .imageWrapper {\n            width: 114px;\n            height: 76px;\n            overflow: hidden;\n            margin-right: 12px;\n            border-radius: 4px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n        .productImage {\n            width: 100%;\n            object-fit: cover;\n            transition: width 0.5s;\n        }\n        .productImage:hover {\n            width: 125%;\n            object-fit: cover;\n            transition: width 0.5s;\n        }\n        .btnSeeMore {\n            font-size: 16px;\n            font-weight: 600;\n            background: #F7F7F7;\n            border-radius: 8px;\n            color: #0000FF;\n            margin: 8px 12px;\n            height: 48px;\n            width: -webkit-fill-available;\n        }\n        .autoScenarioLink {\n            display: flex;\n            height: 100px;\n            width: 100%;\n            align-items: center;\n            padding: 12px;\n            box-sizing: border-box;\n            background: transparent;\n            border-top: 1px solid rgb(236, 236, 236);\n            border-bottom: 1px solid rgb(236, 236, 236);\n            position: relative;\n            cursor: pointer;\n        }\n        .autoScenarioLink:hover {\n            background: linear-gradient(265.08deg, rgba(36, 255, 0, 0.06) -6.71%, rgba(0, 210, 255, 0.06) 38.87%, rgba(255, 188, 125, 0.06) 93.88%);\n        }\n        @media (prefers-color-scheme: dark) {\n            .autoScenarioLink {\n                border-top: 1px solid #999999;\n                border-bottom: 1px solid #999999;\n            }\n        }\n        "}},{key:"getNotificationStyles",value:function(){return"\n        @keyframes zoom {\n            0% { width: 100%; }\n            25% { width: 125%; }\n            75% { width: 125%; }\n            100% { width: 100%; }\n        }\n        .divContent {\n            display: grid;\n            grid-template-columns: 55% auto;\n            text-align: start;\n        }\n        .title {\n            font-size: 18px;\n            font-weight: 600;\n            line-height: 22px;\n            color: #1A1A1A;\n            margin-bottom: 6px;\n        }\n        .vehicleTitle {\n            font-size: 14px;\n            line-height: 20px;\n            color: #1A1A1A;\n            -webkit-line-clamp: 1;\n            text-overflow: ellipsis;\n            overflow: hidden;\n            display: -webkit-box;\n            -webkit-box-orient: vertical;\n            margin-bottom: 4px;\n        }\n        .vehicleMileage {\n            font-size: 12px;\n            line-height: 16px;\n            color: #717171;\n            display: flex;\n            align-items: center;\n        }\n        .vehicleMileageIcon {\n            display: flex;\n            width: 14px;\n            margin-right: 4px;\n            justify-content: center;\n        }\n        .vehicleLocation {\n            font-size: 12px;\n            line-height: 16px;\n            color: #717171;\n            display: flex;\n            align-items: center;\n        }\n        .vehicleLocationIcon {\n            display: flex;\n            width: 14px;\n            margin-right: 4px;\n            justify-content: center;\n        }\n        .vehicleLocationText {\n            -webkit-line-clamp: 1;\n            text-overflow: ellipsis;\n            overflow: hidden;\n            display: -webkit-box;\n            -webkit-box-orient: vertical;\n        }\n        .vehiclePrice {\n            display: flex;\n            margin-top: 4px;\n        }\n        .vehiclePriceIcon {\n            font-size: 8px;\n            line-height: 22px;\n            color: #1A1A1A;\n        }\n        .vehiclePriceNumber {\n            font-size: 16px;\n            line-height: 22px;\n            color: #1A1A1A;\n        }\n        .imageWrapper {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            width: 149px;\n            height: 100px;\n            overflow: hidden;\n            border-radius: 8px;\n        }\n        .notifProductImage {\n            width: 100%;\n            object-fit: cover;\n            transition: width 0.5s;\n            animation-name: zoom;\n            animation-duration: 3s;\n            animation-delay: 0.5s;\n        }\n        .notifProductImage:hover {\n            width: 125%;\n            object-fit: cover;\n            transition: width 0.5s;\n        }\n        .btnActions {\n            width: 97%;\n            display: grid;\n            grid-template-columns: 50% 50%;\n            grid-gap: 10px;\n            margin-top: 8px;\n            justify-content: center;\n        }\n        .btnSeeMoreInfo {\n            font-size: 16px;\n            font-weight: 600;\n            background: #F7F7F7;\n            border-radius: 8px;\n            color: #0000FF;\n            height: 48px;\n            width: -webkit-fill-available;\n        }\n        @media (prefers-color-scheme: dark) {\n            .title {\n                color: #FFFFFF;\n            }\n            .vehicleTitle {\n                color: #FFFFFF;\n            }\n            .vehicleMileage {\n                color: #FFFFFF;\n            }\n            .vehicleLocation {\n                color: #FFFFFF;\n            }\n            .vehiclePriceIcon {\n                color: #FFFFFF;\n            }\n            .vehiclePriceNumber {\n                color: #FFFFFF;\n            }\n        }\n        "}},{key:"getToolTipStyles",value:function(){return Ml(ig||(ig=(0,E.Z)(["\n        .tooltip {\n            width: 250px;\n            white-space: unset;\n            font-size: 10px;\n            hyphens: auto;\n            padding: 4px 6px;\n            line-height: 12px;\n            padding-bottom: 8px;\n            color: #FFFFFF;\n            border-radius: 4px;\n            background: #000000;\n        }"])))}}]),t}(),lg=i(410);function cg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}!function(t){t.COUPONS_COPIED="COUPONS_COPIED",t.NAVIGATE_TO_RETAILER="NAVIGATE_TO_RETAILER",t.TRY_ALL_COUPONS="TRY_ALL_COUPONS",t.SHOW_MORE_SELLERS="SHOW_MORE_SELLERS",t.REBATES_LEARN_MORE="REBATES_LEARN_MORE",t.REBATES_ACCOUNT="REBATES_ACCOUNT",t.REBATES_HISTORY="REBATES_HISTORY",t.ACTIVATE_CASHBACK="ACTIVATE_CASHBACK",t.EXPAND_GRAPH="EXPAND_GRAPH",t.VIEW_PRICE_HISTORY="VIEW_PRICE_HISTORY",t.COUPONS_COPIED_AUTOFILL="COUPONS_COPIED_AUTOFILL",t.TRY_ALL_COUPONS_AUTOFILL="TRY_ALL_COUPONS_AUTOFILL",t.NAVIGATE_TO_DEAL_OFFER="NAVIGATE_TO_DEAL_OFFER",t.NAVIGATE_TO_PROFESSIONAL_REVIEW="NAVIGATE_TO_PROFESSIONAL_REVIEW",t.NAVIGATE_TO_VIDEO_REVIEW="NAVIGATE_TO_VIDEO_REVIEW",t.EXPRESS_CHECKOUT="EXPRESS_CHECKOUT",t.OPEN_FLYOUT="OPEN_FLYOUT",t.NAVIGATE_TO_RECOMMENDED_OFFER="NAVIGATE_TO_RECOMMENDED_OFFER",t.CLIP_COUPON="CLIP_COUPON",t.ACTIVATE_CASHBACK_NEW="ACTIVATE_CASHBACK_NEW",t.PRODUCT_HISTORY_NAVIGATION="PRODUCT_HISTORY_NAVIGATION",t.NAVIGATE_TO_OTHER_SELLER="NAVIGATE_TO_OTHER_SELLER",t.TIPS_CLICK="TIPS_CLICK",t.REWARDS_SIGNIN_CLICK="REWARDS_SIGNIN_CLICK",t.REWARDS_REDEEM_CLICK="REWARDS_REDEEM_CLICK",t.CASHBACK_OTHERSITES_CLICK="CASHBACK_OTHERSITES_CLICK",t.OPEN_FLYOUT_MICRO_NOTIFICATION="OPEN_FLYOUT_MICRO_NOTIFICATION",t.ZIP_CHECKOUT="ZIP_CHECKOUT",t.PWILO_NOTIFICATION_PRICE_DROP="PWILO_NOTIFICATION_PRICE_DROP",t.YOUTUBE_COUPON_COPIED_HOME="YOUTUBE_COUPON_COPIED_HOME",t.YOUTUBE_COUPON_COPIED_VIDEO="YOUTUBE_COUPON_COPIED_VIDEO",t.YOUTUBE_COUPON_COPIED_RETAILER="YOUTUBE_COUPON_COPIED_RETAILER",t.YOUTUBE_COUPON_COPIED_RETAILER_CHECKOUT="YOUTUBE_COUPON_COPIED_RETAILER_CHECKOUT",t.YOUTUBE_TRY_ALL_COUPONS="YOUTUBE_TRY_ALL_COUPONS",t.CASHBACK_RETAILER_CLICK="CASHBACK_RETAILER_CLICK",t.ACTIVATE_CASHBACK_RETURNED="ACTIVATE_CASHBACK_RETURNED",t.PRINT_COUPONS_CLICK="PRINT_COUPONS_CLICK",t.SELECT_PRINTABLE_COUPON="SELECT_PRINTABLE_COUPON",t.DIGITAL_GROCERY_COUPONS_CLICK="DIGITAL_GROCERY_COUPONS_CLICK",t.PINTEREST_COUPON_COPIED="PINTEREST_COUPON_COPIED",t.PINTEREST_CASHBACK_ACTIVATED="PINTEREST_CASHBACK_ACTIVATED",t.PINTEREST_VIEW_PRICE_HISTORY="PINTEREST_VIEW_PRICE_HISTORY",t.PACKAGE_TRACKING_EXPAND_SECTION="PACKAGE_TRACKING_EXPAND_SECTION",t.PACKAGE_TRACKING_OPT_IN="PACKAGE_TRACKING_OPT_IN",t.PACKAGE_TRACKING_CARD_CLICKED="PACKAGE_TRACKING_CARD_CLICKED",t.VIEW_AUTOS_MARKETPLACE="VIEW_AUTOS_MARKETPLACE"}(ng||(ng={})),function(t){t[t.COUPONS_COPIED=0]="COUPONS_COPIED",t[t.NAVIGATE_TO_RETAILER=1]="NAVIGATE_TO_RETAILER",t[t.TRY_ALL_COUPONS=2]="TRY_ALL_COUPONS",t[t.SHOW_MORE_SELLERS=3]="SHOW_MORE_SELLERS",t[t.REBATES_LEARN_MORE=4]="REBATES_LEARN_MORE",t[t.REBATES_ACCOUNT=5]="REBATES_ACCOUNT",t[t.REBATES_HISTORY=6]="REBATES_HISTORY",t[t.ACTIVATE_CASHBACK=7]="ACTIVATE_CASHBACK",t[t.EXPAND_GRAPH=8]="EXPAND_GRAPH",t[t.VIEW_PRICE_HISTORY=9]="VIEW_PRICE_HISTORY",t[t.COUPONS_COPIED_AUTOFILL=10]="COUPONS_COPIED_AUTOFILL",t[t.TRY_ALL_COUPONS_AUTOFILL=11]="TRY_ALL_COUPONS_AUTOFILL",t[t.NAVIGATE_TO_DEAL_OFFER=12]="NAVIGATE_TO_DEAL_OFFER",t[t.NAVIGATE_TO_PROFESSIONAL_REVIEW=13]="NAVIGATE_TO_PROFESSIONAL_REVIEW",t[t.NAVIGATE_TO_VIDEO_REVIEW=14]="NAVIGATE_TO_VIDEO_REVIEW",t[t.EXPRESS_CHECKOUT=15]="EXPRESS_CHECKOUT",t[t.OPEN_FLYOUT=16]="OPEN_FLYOUT",t[t.NAVIGATE_TO_RECOMMENDATION_OFFER=17]="NAVIGATE_TO_RECOMMENDATION_OFFER",t[t.CLIP_COUPON=18]="CLIP_COUPON",t[t.ACTIVATE_CASHBACK_NEW=19]="ACTIVATE_CASHBACK_NEW",t[t.PRODUCT_HISTORY_NAVIGATION=20]="PRODUCT_HISTORY_NAVIGATION",t[t.NAVIGATE_TO_OTHER_SELLER=23]="NAVIGATE_TO_OTHER_SELLER",t[t.TIPS_CLICK=24]="TIPS_CLICK",t[t.REWARDS_SIGNIN_CLICK=25]="REWARDS_SIGNIN_CLICK",t[t.REWARDS_REDEEM_CLICK=26]="REWARDS_REDEEM_CLICK",t[t.CASHBACK_OTHERSITES_CLICK=27]="CASHBACK_OTHERSITES_CLICK",t[t.OPEN_FLYOUT_MICRO_NOTIFICATION=28]="OPEN_FLYOUT_MICRO_NOTIFICATION",t[t.ZIP_CHECKOUT=29]="ZIP_CHECKOUT",t[t.PWILO_NOTIFICATION_PRICE_DROP=30]="PWILO_NOTIFICATION_PRICE_DROP",t[t.YOUTUBE_COUPON_COPIED_HOME=31]="YOUTUBE_COUPON_COPIED_HOME",t[t.YOUTUBE_COUPON_COPIED_VIDEO=32]="YOUTUBE_COUPON_COPIED_VIDEO",t[t.YOUTUBE_COUPON_COPIED_RETAILER=33]="YOUTUBE_COUPON_COPIED_RETAILER",t[t.YOUTUBE_COUPON_COPIED_RETAILER_CHECKOUT=34]="YOUTUBE_COUPON_COPIED_RETAILER_CHECKOUT",t[t.YOUTUBE_TRY_ALL_COUPONS=35]="YOUTUBE_TRY_ALL_COUPONS",t[t.CASHBACK_RETAILER_CLICK=36]="CASHBACK_RETAILER_CLICK",t[t.ACTIVATE_CASHBACK_RETURNED=37]="ACTIVATE_CASHBACK_RETURNED",t[t.PRINT_COUPONS_CLICK=38]="PRINT_COUPONS_CLICK",t[t.SELECT_PRINTABLE_COUPON=39]="SELECT_PRINTABLE_COUPON",t[t.DIGITAL_GROCERY_COUPONS_CLICK=40]="DIGITAL_GROCERY_COUPONS_CLICK",t[t.PINTEREST_COUPON_COPIED=41]="PINTEREST_COUPON_COPIED",t[t.PINTEREST_CASHBACK_ACTIVATED=42]="PINTEREST_CASHBACK_ACTIVATED",t[t.PINTEREST_VIEW_PRICE_HISTORY=43]="PINTEREST_VIEW_PRICE_HISTORY",t[t.PACKAGE_TRACKING_EXPAND_SECTION=44]="PACKAGE_TRACKING_EXPAND_SECTION",t[t.PACKAGE_TRACKING_OPT_IN=45]="PACKAGE_TRACKING_OPT_IN",t[t.PACKAGE_TRACKING_CARD_CLICKED=46]="PACKAGE_TRACKING_CARD_CLICKED"}(og||(og={}));var ug=function(e){(0,O.Z)(c,e);var i,r=cg(c);function c(t,e,i){var n;return(0,s.Z)(this,c),n=r.call(this),(0,I.Z)((0,R.Z)(n),"assets",void 0),(0,I.Z)((0,R.Z)(n),"logModule",void 0),(0,I.Z)((0,R.Z)(n),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(n),"stateManagement",void 0),(0,I.Z)((0,R.Z)(n),"flyoutData",void 0),(0,I.Z)((0,R.Z)(n),"utilities",void 0),(0,I.Z)((0,R.Z)(n),"visibilityRequest",[]),(0,I.Z)((0,R.Z)(n),"sectionId","priceComparisonSection"),(0,I.Z)((0,R.Z)(n),"loadingUXId","divPCLoadingStateContainer"),n.logModule=i.logModule,n.pageHandlerModule=i.pageHandlerModule,n.stateManagement=t,n.flyoutData=e,n.utilities=i.viewModulesUtilities,n.assets=new sg,n}return(0,l.Z)(c,[{key:"GetModuleName",value:function(){return D.GX.AUTOSMARKETPLACE}},{key:"ShouldRenderModule",value:function(){var t,e,i=this,n=this.flyoutData.dataStoreModule.PriceComparisonData,o=(null==n||null===(t=n.segment)||void 0===t?void 0:t.toLowerCase())===D.VG.AUTOS,a=null!==(e=n&&n.CompetingPrices&&n.CompetingPrices.length>0)&&void 0!==e&&e;return o&&a?(this.stateManagement.addEventListener(Ia.e1.pcCreateHeader,this.populateMainHeader.bind(this)),this.stateManagement.addEventListener(Ia.e1.PDPUpdate,(function(t){var e,n,o=new CustomEvent(Ia.e1.PDPRemoved,{detail:{moduleName:i.GetModuleName()}});if(t&&t.detail&&t.detail.data&&t.detail.data.comparableOffers&&t.detail.data.comparableOffers.length>0&&t.detail.data.price&&(null===(e=i.flyoutData.dataStoreModule.PriceComparisonData)||void 0===e||!e.CompetingPrices)){var a=t.detail.data;a?i.updateModule(a):i.stateManagement.dispatchEvent(o)}else null!==(n=i.flyoutData.dataStoreModule.PriceComparisonData)&&void 0!==n&&n.CompetingPrices||i.stateManagement.dispatchEvent(o)})),Promise.resolve(!0)):Promise.resolve(!1)}},{key:"renderModule",value:function(){var t=this.flyoutData.dataStoreModule.PriceComparisonData;if(t&&t.CompetingPrices.length>0){var e;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var i=this.flyoutData.common.shopping.querySelector("#".concat(this.sectionId));i?e=i:(e=document.createElement("msft-edge-shopping-section")).id=this.sectionId,this.populatePriceList(e,!1,!1),this.renderSeeMoreLink(e,t.CompetingPrices[0].marketHint);var n=this.CreateModule(e,D.H7.AUTOSMARKETPLACE,D.GX.AUTOSMARKETPLACE,D.$k.CONTEXTUAL),r=new o.Z(a.xu.AutosMarketplaceRenderViewModule);return this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"Autos Marketplace - recommended cars to user",r),Promise.resolve(n)}return Promise.resolve(null)}},{key:"populateMainHeader",value:function(){var t,e=this,i=this.flyoutData.common.shopping,n=this.flyoutData.dataStoreModule.PriceComparisonData,r=null==n?void 0:n.CompetingPrices,s=this.utilities.createElement("DIV",{className:"headerContentWrapper"});s.slot="header-content";var l=this.utilities.createElement("H2",{className:"headerTitle"});l.textContent=this.flyoutData.strings.autosMarketplaceHeader;var c=this.utilities.createElement("DIV",{style:"display: flex;\n                align-items: center;\n                margin-left: 5px;\n                "}),u=this.utilities.createElement("IMG");u.src=this.flyoutData.common.resourcesEndpoint+"common/largeInfoIcon.svg",u.slot="hover-anchor",u.setAttribute("aria-labelledby","txtAMTooltip");var d=this.utilities.createElement("msft-shopping-tooltip");d.id="header-tooltip",d.id="txtAMTooltip";var h=this.flyoutData.strings.autosMarketplaceDisclaimer;r&&r.length>0&&(null===(t=r[0].marketHint)||void 0===t?void 0:t.toLowerCase())===D.Jk.US&&(h=h+" "+this.flyoutData.strings.autosMarketplaceAccidentStatement),d.content=h;var p=0,f=0,g=!0;d.addEventListener("mouseenter",(function(){y()})),d.addEventListener("mouseleave",(function(){C()})),d.addEventListener("focus",(function(){y()})),d.addEventListener("blur",(function(){C()}));var m=this.logModule,v=!0,y=function(){if(v){if(v=!1,!(Date.now()-f>200))return;g=!0,p=Date.now();var t=new o.Z(a.xu.AutosMarketplaceShowMoreInfoTooltip);m.LogInfoEvent(a.R.EdgeFlyoutStatus,"Autos Marketplace - show more info tooltip",t)}},C=function(){f=Date.now(),v=!0,setTimeout((function(){if(g){g=!1,e.sendAutosMarketplaceDwellTimeTelemery(p,a.xu.AutosMarketplaceDwellTimeHover,"hover time over info button");var t=new o.Z(a.xu.AutosMarketplaceShowMoreInfoTooltip);m.LogInfoEvent(a.R.EdgeFlyoutStatus,"Autos Marketplace - hide more info tooltip",t)}}),200)};d.addEventListener("hover",(function(){d.caratSide=xf.W.Right,d.caratTopOffset="0px",d.width="257px"})),d.append(u),c.appendChild(d),s.appendChild(l),s.appendChild(c),i.appendChild(s)}},{key:"navigateToRetailer",value:function(t,e){var i=new na.Z(a.$S.NavigatedToAutosMarketplaceRecommendation,t.Url);this.pageHandlerModule.RecordAsUserAction(Ca.bS.NAVIGATE_TO_RETAILER),this.logModule.LogInfoEvent(a.R.ButtonClick,"Navigation to Autos Marketplace recommendation",i),this.flyoutData.dataLoader.IsServerData()||this.flyoutData.common.currentDevice===D.AS.Mobile?this.pageHandlerModule.NavigateToAlternateRetailerWithDisposition(t.Url):""!==t.PriceId?this.pageHandlerModule.NavigateToAlternateRetailerWithDisposition(t.PriceId,e):this.pageHandlerModule.NavigateToAlternateRetailerWithDisposition(t.ImpressionToken,e)}},{key:"populatePriceList",value:function(t,e,i){var n,o=!1,a=this.flyoutData.dataStoreModule.PriceComparisonData,r=null==a?void 0:a.CompetingPrices;if(r){r.length>0&&(n=r.length),n>D.CS.AUTOSMARKETPLACE&&(n=D.CS.AUTOSMARKETPLACE);for(var s=0;s<n;s++){var l;this.createNewTile(t,r[s]),null!==(l=r[s].listingTypes)&&void 0!==l&&l.includes(D.$U.ONLINEONLY)&&(o=!0)}o&&this.renderOnlineListingDisclaimer(t)}}},{key:"sendAutosMarketplaceDwellTimeTelemery",value:function(t,e,i){var n=Date.now()-t,r=new o.Z(e);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"Autos Marketplace - ".concat(i," - ").concat(n," ms"),r),n>=1e3&&ng&&this.pageHandlerModule.RecordAsUserEngagement(ng.VIEW_AUTOS_MARKETPLACE)}},{key:"updateModule",value:(i=(0,t.Z)(n().mark((function t(e){var i,o,a,r=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.flyoutData.dataStoreModule.PriceComparisonData=new vr(e.comparableOffers,e.price,e.extracted_entity,this.flyoutData.common.openedWith,this.flyoutData.common.popupOrigination),!(i=this.flyoutData.common.shopping.querySelector("#".concat(this.loadingUXId)))){t.next=11;break}return i.remove(),t.next=7,this.renderModule();case 7:(o=t.sent)&&(this.populateMainHeader(),Tt.SO.queueUpdate((function(){r.utilities.styleModules(o,0)})),this.utilities.sendFlyoutUpdateEvent(this.stateManagement,o)),t.next=15;break;case 11:return t.next=13,this.renderModule();case 13:(a=t.sent)&&a.element&&(this.stateManagement.getState(Ia.IY.modulesRendered)?this.appendUpdateElement(a):this.stateManagement.addEventListener(Ia.e1.ModulesRendered,(function(){r.appendUpdateElement(a)})),this.utilities.sendFlyoutUpdateEvent(this.stateManagement,a));case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0);case 20:case"end":return t.stop()}}),t,this,[[0,17]])}))),function(t){return i.apply(this,arguments)})},{key:"appendUpdateElement",value:function(t){var e=this;this.utilities.appendNewModuleToFlyout(t),(this.flyoutData.common.isPane||this.flyoutData.dataStoreModule.PriceComparisonData&&-1!==this.flyoutData.dataStoreModule.PriceComparisonData.lowestPrice)&&(t.element.expanded=!0),Tt.SO.queueUpdate((function(){e.utilities.sendCTRLog(t,t.priority,e.stateManagement.getState(Ia.IY.isAutoApplyVisible),e.stateManagement.getState(Ia.IY.topModuleName),ya.g.EdgeImpressionId);var i=new CustomEvent(Ia.e1.ModulesRendered);e.stateManagement.dispatchEvent(i)}))}},{key:"manageLinkEvents",value:function(t,e){var i=this;t.addEventListener("click",(function(){i.navigateToRetailer(e,lg.$.NEW_FOREGROUND_TAB)})),t.addEventListener("mousedown",(function(t){if(1===t.button)i.navigateToRetailer(e,lg.$.NEW_FOREGROUND_TAB)}))}},{key:"createNewTile",value:function(t,e){var i,n;if(e){var o=e.ProductImageOriginalUrl.replace("edge://image?",""),a=this.utilities.createElement("DIV");a.className="autoScenarioLink";var r=this.utilities.createElement("DIV",{className:"imageWrapper"}),s=this.utilities.createElement("IMG",{className:"productImage"});s.src=o+"&w=150",s.setAttribute("aria-hidden","true"),r.appendChild(s);var l=this.utilities.createElement("DIV",{style:"font-size: 12px; line-height: 16px; margin-right: 12px; width: 120px;"}),c=this.utilities.createElement("DIV",{style:"font-weight: 600; color: #2B2B2B; -webkit-line-clamp: 2; text-overflow: ellipsis; overflow: hidden; display: -webkit-box; -webkit-box-orient: vertical; margin-bottom: 10px;"});c.textContent=e.Description;var u=this.utilities.createElement("DIV",{style:"display: flex; margin-bottom: 2px; color: #717171;"}),d=this.utilities.createElement("IMG",{style:"width: 14px; margin-right: 4px;"});d.src=this.flyoutData.common.resourcesEndpoint+"autosMarketplace/vehicleMileage.svg";var h=this.utilities.createElement("DIV",{style:"-webkit-line-clamp: 1; text-overflow: ellipsis; overflow: hidden; display: -webkit-box; -webkit-box-orient: vertical;"});h.textContent=this.utilities.formatPrice(e.mileageValue)+" "+e.mileageUnit,u.appendChild(d),u.appendChild(h);var p=this.utilities.createElement("DIV",{style:"display: flex; color: #717171;"}),f=this.utilities.createElement("IMG",{style:"width: 14px; margin-right: 4px;"});null!==(i=e.listingTypes)&&void 0!==i&&i.includes(D.$U.ONLINEONLY)?f.src=this.flyoutData.common.resourcesEndpoint+"autosMarketplace/onlineVehicle.svg":f.src=this.flyoutData.common.resourcesEndpoint+"autosMarketplace/vehicleLocation.svg";var g=this.utilities.createElement("DIV",{style:"-webkit-line-clamp: 1; text-overflow: ellipsis; overflow: hidden; display: -webkit-box; -webkit-box-orient: vertical;"});null!==(n=e.listingTypes)&&void 0!==n&&n.includes(D.$U.ONLINEONLY)?g.textContent=this.flyoutData.strings.autosMarketplaceOnlineListing:g.textContent=e.SellerName+" (".concat(e.geoDistance," ").concat(e.mileageUnit,")"),p.appendChild(f),p.appendChild(g),l.appendChild(c),l.appendChild(u),l.appendChild(p);var m=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: column; justify-content: space-between; height: 100%; align-items: flex-start; width: 76px;"}),v=this.utilities.createElement("DIV",{style:"height: 20px;"}),y=this.utilities.createElement("DIV",{style:"background-color: #FFFFFF; padding: 0px 4px; border-radius: 4px; height: 20px; display: flex; align-items: center; border: 1px solid rgba(0, 0, 0, 0.16);"}),C=this.utilities.createElement("IMG",{style:"height: 10px; width: 10px;"}),b=this.utilities.createElement("DIV",{style:"color: #000000; font-size: 10px; font-weight: 600; margin-left: 3px;"});e.isPopular?(C.src=this.flyoutData.common.resourcesEndpoint+"autosMarketplace/start-autos-popular-icon.webp",b.textContent=this.flyoutData.strings.autosMarketplacePopular):"GreatDeal"===e.dealRating&&(C.src=this.flyoutData.common.resourcesEndpoint+"autosMarketplace/start-autos-great-deal-icon.webp",b.textContent=this.flyoutData.strings.autosMarketplaceGreatDeal),y.appendChild(C),y.appendChild(b),(e.isPopular||"GreatDeal"===e.dealRating)&&v.appendChild(y);var S=this.utilities.createElement("DIV",{style:"display: flex; color: #1A1A1A; font-weight: 600;"}),x=this.utilities.createElement("DIV",{style:"font-size: 10px; line-height: 22px;"}),E=this.utilities.createElement("DIV",{style:"font-size: 16px; line-height: 22px;"});x.textContent="$",E.textContent=this.utilities.formatPrice(e.IntendedPrice),S.appendChild(x),S.appendChild(E);var A=this.utilities.createElement("DIV",{style:"height: 20px;"});this.flyoutData.common.currentTheme===D.Q2.Dark&&(c.style.color="#FFFFFF",u.style.color="#FFFFFF",p.style.color="#FFFFFF",S.style.color="#FFFFFF"),m.appendChild(v),m.appendChild(S),m.appendChild(A),a.appendChild(r),a.appendChild(l),a.appendChild(m),this.manageLinkEvents(a,e),t.appendChild(a)}}},{key:"renderOnlineListingDisclaimer",value:function(t){var e=this.utilities.createElement("DIV",{style:"-webkit-line-clamp: 1; text-overflow: ellipsis; overflow: hidden; display: -webkit-box; -webkit-box-orient: vertical; font-size: 11px; padding: 0px 12px; margin: 6px 0px;"});e.textContent=this.flyoutData.strings.autosMarketplaceOnlineListingDisclaimer,t.appendChild(e)}},{key:"renderSeeMoreLink",value:function(t,e){var i=this,n=this.utilities.createElement("fluent-button",{className:"btnSeeMore"});n.textContent=this.flyoutData.strings.autosMarketplaceSeeMoreLink;var o=this.flyoutData.common.currentDevice;n.addEventListener("click",(function(){var t,n=new na.Z(a.$S.NavigatedToAutosMarketplace);i.logModule.LogInfoEvent(a.R.ButtonClick,"Navigation to Autos Marketplace",n);var r=(null===(t=i.flyoutData.dataStoreModule.PriceComparisonData)||void 0===t?void 0:t.entityName)||"";o===D.AS.Desktop&&i.pageHandlerModule.NavigateToOtherSellerWithDisposition("https://www.msn.com/".concat(e,"/autos/marketplace/search?q=").concat(r,"&form=MARFL2"),lg.$.NEW_FOREGROUND_TAB)})),t.appendChild(n)}}]),c}(jf.Z),dg=ug;function hg(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return pg(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return pg(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function pg(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function fg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var gg,mg=function(t){(0,O.Z)(i,t);var e=fg(i);function i(t,n,o){var a;return(0,s.Z)(this,i),(a=e.call(this,t,n,o)).flyoutData=n,a.utilities=o.viewModulesUtilities,a.logModule=o.logModule,a.pageHandlerModule=o.pageHandlerModule,a.stateManagement=t,a.assets=new sg,a}return(0,l.Z)(i,[{key:"RenderNotification",value:function(t){var e=this,i=this.flyoutData.dataStoreModule.PriceComparisonData,n=this.getCompetingVehicle(i);if(n){var r,s,l;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getNotificationStyles());var c=this.utilities.createElement("DIV",{style:"width: 100%;"}),u=this.utilities.createElement("DIV",{className:"divContent"}),d=this.utilities.createElement("DIV",{style:"margin-right: 10px;"}),h=this.utilities.createElement("DIV",{className:"title"});h.textContent=this.flyoutData.strings.autosMarketplaceNotificationHeader;var p=this.utilities.createElement("DIV",{className:"vehicleTitle"});p.textContent=n.Description;var f=this.utilities.createElement("DIV",{className:"vehicleMileage"}),g=this.utilities.createElement("IMG",{className:"vehicleMileageIcon"});g.src=this.flyoutData.common.resourcesEndpoint+"autosMarketplace/vehicleMileage.svg";var m=this.utilities.createElement("DIV");m.textContent=this.utilities.formatPrice(n.mileageValue)+" "+n.mileageUnit,f.appendChild(g),f.appendChild(m);var v=this.utilities.createElement("DIV",{className:"vehicleLocation"}),y=this.utilities.createElement("IMG",{className:"vehicleLocationIcon"});null!==(r=n.listingTypes)&&void 0!==r&&r.includes(D.$U.ONLINEONLY)?y.src=this.flyoutData.common.resourcesEndpoint+"autosMarketplace/onlineVehicle.svg":y.src=this.flyoutData.common.resourcesEndpoint+"autosMarketplace/vehicleLocation.svg";var C=this.utilities.createElement("DIV",{className:"vehicleLocationText"});null!==(s=n.listingTypes)&&void 0!==s&&s.includes(D.$U.ONLINEONLY)?C.textContent=this.flyoutData.strings.autosMarketplaceOnlineListing:C.textContent=n.SellerName+" (".concat(n.geoDistance," ").concat(n.mileageUnit,")"),v.appendChild(y),v.appendChild(C);var b=this.utilities.createElement("DIV",{className:"vehiclePrice"}),S=this.utilities.createElement("DIV",{className:"vehiclePriceIcon"});S.textContent="$";var x=this.utilities.createElement("DIV",{className:"vehiclePriceNumber"});x.textContent=this.utilities.formatPrice(n.IntendedPrice),b.appendChild(S),b.appendChild(x);var E=this.utilities.createElement("DIV",{style:"display: flex;\n                    align-items: center;\n                    margin-left: 5px;\n                    "}),A=this.utilities.createElement("IMG");A.src=this.flyoutData.common.resourcesEndpoint+"common/largeInfoIcon.svg",A.slot="hover-anchor",A.setAttribute("aria-labelledby","txtAMTooltip");var T=this.utilities.createElement("msft-shopping-tooltip");T.id="header-tooltip",T.id="txtAMTooltip";var I=this.flyoutData.strings.autosMarketplaceDisclaimer;(null===(l=n.marketHint)||void 0===l?void 0:l.toLowerCase())===D.Jk.US&&(I=I+" "+this.flyoutData.strings.autosMarketplaceAccidentStatement),T.content=I;var k=0,w=0,R=!0;T.addEventListener("mouseenter",(function(){M()})),T.addEventListener("mouseleave",(function(){N()})),T.addEventListener("focus",(function(){M()})),T.addEventListener("blur",(function(){N()}));var O=this.logModule,P=!0,M=function(){if(P){if(P=!1,!(Date.now()-w>200))return;R=!0,k=Date.now();var t=new o.Z(a.xu.AutosMarketplaceShowMoreInfoTooltip);O.LogInfoEvent(a.R.EdgeFlyoutStatus,"Autos Marketplace - show more info tooltip",t)}},N=function(){w=Date.now(),P=!0,setTimeout((function(){if(R){R=!1,e.sendAutosMarketplaceDwellTimeTelemery(k,a.xu.AutosMarketplaceDwellTimeHover,"hover time over info button");var t=new o.Z(a.xu.AutosMarketplaceShowMoreInfoTooltip);O.LogInfoEvent(a.R.EdgeFlyoutStatus,"Autos Marketplace - hide more info tooltip",t)}}),200)};T.addEventListener("hover",(function(){T.caratSide=xf.W.Left,T.caratTopOffset="95px",T.width="155px"})),T.append(A),E.appendChild(T);var L=this.utilities.createElement("DIV",{style:"margin-left: 5px; background-color: #FFFFFF; padding: 0px 4px; border-radius: 4px; height: 20px; display: flex; align-items: center; border: 1px solid rgba(0, 0, 0, 0.16);"}),_=this.utilities.createElement("IMG",{style:"height: 10px; width: 10px;"}),F=this.utilities.createElement("DIV",{style:"color: #000000; font-size: 10px; font-weight: 600; margin-left: 3px;"});n.isPopular?(_.src="https://marketplaceassets.azureedge.net/publicassets/misc/badge-popular-icon.webp",F.textContent=this.flyoutData.strings.autosMarketplacePopular):"GreatDeal"===n.dealRating&&(_.src="https://marketplaceassets.azureedge.net/publicassets/misc/badge-great-deal-icon.webp",F.textContent=this.flyoutData.strings.autosMarketplaceGreatDeal),L.appendChild(_),L.appendChild(F),(n.isPopular||"GreatDeal"===n.dealRating)&&b.appendChild(L),b.appendChild(E),d.appendChild(h),d.appendChild(p),d.appendChild(f),d.appendChild(v),d.appendChild(b);var H=this.utilities.createElement("DIV",{className:"imageWrapper"}),Z=this.utilities.createElement("IMG",{className:"notifProductImage"}),B=n.ProductImageOriginalUrl.replace("edge://image?","");Z.src=B+"&w=175",Z.setAttribute("aria-hidden","true"),H.appendChild(Z),u.appendChild(d),u.appendChild(H),c.appendChild(u),c.slot="header-content";var U=this.utilities.createElement("DIV",{className:"btnActions"});U.id="divNotificationActions",U.slot="actions";var G=this.utilities.createBaseActionButton();G.textContent=this.flyoutData.strings.autosMarketplaceSeeThisCar,G.style.marginTop="0px",G.style.minWidth="unset";var V=this.flyoutData.common.currentDevice;G.addEventListener("click",(function(){V===D.AS.Desktop&&e.navigateToRetailer(n,lg.$.NEW_FOREGROUND_TAB)}));var $=this.utilities.createElement("fluent-button",{className:"btnSeeMoreInfo"});$.textContent=this.flyoutData.strings.autosMarketplaceSeeMoreButton,$.addEventListener("click",(function(){e.handleSeeMoreInfoNotificationClick(c)})),U.appendChild(G),U.appendChild($),n.listingTypes.includes(D.$U.ONLINEONLY)&&this.addOnlineListingDisclaimer(c),t.appendChild(c),t.appendChild(U);var W=new o.Z(a.xu.AutosMarketplaceRenderNotification);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"Autos Marketplace Notification - recommended car to user",W)}return Promise.resolve(null)}},{key:"ShouldRenderNotification",value:function(){var t,e=this.flyoutData.dataStoreModule.PriceComparisonData,i=this.getCompetingVehicle(e);return e&&this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_LOWER_PRICE_FOUND&&(null==e||null===(t=e.segment)||void 0===t?void 0:t.toLowerCase())===D.VG.AUTOS&&i&&this.flyoutData.common.openedWith===D.Te.Auto&&!this.flyoutData.common.seeInfoFromPCNotification?Promise.resolve(!0):Promise.resolve(!1)}},{key:"GetNotificationName",value:function(){return D.sM.AUTOSMARKETPLACE}},{key:"getCompetingVehicle",value:function(t){if(!t||!t.CompetingPrices)return null;var e,i=hg(t.CompetingPrices);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n.isPopular||"GreatDeal"===n.dealRating||n.IntendedPrice<t.Price)return n}}catch(t){i.e(t)}finally{i.f()}return null}},{key:"addOnlineListingDisclaimer",value:function(t){var e=this.utilities.createElement("DIV",{style:"-webkit-line-clamp: 1; text-overflow: ellipsis; overflow: hidden; display: -webkit-box; -webkit-box-orient: vertical; font-size: 11px; margin-top: 6px; text-align: start;"});e.textContent=this.flyoutData.strings.autosMarketplaceOnlineListingDisclaimer,t.appendChild(e)}},{key:"handleSeeMoreInfoNotificationClick",value:function(t){var e=this,i=!1;if(this.flyoutData.common.isPaneEnabled&&(i=this.pageHandlerModule.OpenPane()),!i){t.remove();var n=this.flyoutData.common.shopping.querySelector("#divNotificationActions");n&&n.remove();var o=this.flyoutData.common.shopping.querySelector("#divDisclaimer");o&&o.remove();var a=document.querySelectorAll("msft-edge-shopping");if(a&&a.length>0){var r,s=hg(a);try{for(s.s();!(r=s.n()).done;){r.value.remove()}}catch(t){s.e(t)}finally{s.f()}}this.flyoutData.common.seeInfoFromPCNotification=!0,Tt.SO.queueUpdate((function(){e.utilities.trapFlyoutFocusMac();var t=document.querySelector("#divContentWrapper"),i=new CustomEvent(Ia.e1.CreateModules,{detail:{flyoutWrapper:t}});e.stateManagement.dispatchEvent(i)}))}}}]),i}(dg),vg=i(207),yg=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n            #exclusiveCouponSection {\n                width: 100%;\n                text-align: left;\n            }\n            #divImgWrapper {\n                width: 48px;\n                height: 48px;\n                border-radius: 50%;\n                overflow: hidden;\n                z-index: 1;\n            }\n            #divProfileImgWrapper {\n                width: 58px;\n                height: 58px;\n                background-color: var(--fill-color);\n                border-radius: 50%;\n                place-self: center;\n            }\n            #divInfluencerInfo {\n                width: 100%;\n                display: grid;\n                grid-template-columns: 70px auto;\n                place-self: center;\n                align-items:center;\n                column-gap: 16px;\n                min-height: 70px;\n                box-sizing: border-box;\n                padding: 12px;\n                padding-bottom: 0px;\n                padding-top: 0px;\n                z-index: 5;\n            }\n            .divRetailerCoupon {\n                width: 100%;\n                display: grid;\n                grid-template-columns: 40% 60%;\n                place-self: center;\n                align-items:center;\n                margin-bottom: 5px;\n                background: linear-gradient(0deg, #FFFFFF, #FFFFFE);\n                border: 1px solid rgba(234, 230, 232, 0.5);\n                box-shadow: 0px 0px 12px rgba(0, 0, 0, 0.04);\n                border-radius: 8px;\n                column-gap: 12px;\n                min-height: 105px;\n                box-sizing: border-box;\n                padding: 8px;\n            }\n            .divCouponCodeWrapper {\n                display: flex;\n                flex-direction: column;\n                place-self: center;\n                background: #F7F4F5;\n                border-radius: 8px;\n                width: 100%;\n                height: 100%;\n                justify-content: center;\n                align-items: center;\n                row-gap: 8px;\n            }\n            .divRetailerInfluencerWrapper {\n                display: flex;\n                flex-direction: row;\n                justify-content: flex-start;\n                align-items: center;\n                column-gap: 8px;\n                padding: 5px;\n            }\n            @media (forced-colors: active) {\n                .divRetailerInfluencerWrapper .txtSmall {\n                    opacity: 1!important;\n                }\n            }\n        "}},{key:"getHeaderStyles",value:function(){return"\n            ::part(header) {\n                margin: 0px!important;\n            }\n            ::part(sections) {\n                margin: 0px!important;\n            }"}},{key:"getCouponsStyles",value:function(){return".ytCouponElement {\n            display: flex;\n            flex-direction: column;\n            row-gap: 8px;\n            justify-content: center;\n            align-items: center;\n            width: 150px;\n            min-height: 74px;\n            background: linear-gradient(0deg, #FFFFFF, #FFFFFF);\n            border: 1px solid rgba(234, 230, 232, 0.5);\n            box-sizing: border-box;\n            box-shadow: 0px 0px 12px rgba(0, 0, 0, 0.04);\n            border-radius: 8px;\n            cursor: pointer;\n        }\n        .divYTCouponWrapperTemplate {\n            display: grid;\n            grid-template-columns: calc(50% - 6px) calc(50% - 6px);\n            grid-gap: 12px;\n            margin-bottom: 10px;\n            margin-left: 12px;\n            margin-right: 12px;\n        }"}},{key:"getStylesYoutuberTile",value:function(){return"\n        #exclusiveCouponSection msft-shopping-coupon-new::part(control) {\n            display: grid;\n            grid-template-columns: 40% 60%;\n        }"}},{key:"getYoutubeIcon",value:function(){return A.Z.getTrustedHTML(gg||(gg=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12" viewBox="0 0 16 12" fill="none">\n        <path d="M15.6654 1.7491C15.4811 1.06026 14.9397 0.518933 14.2509 0.334541C13.0036 1.0014e-07 7.99997 0 7.99997 0C7.99997 0 2.99637 1.0014e-07 1.74909 0.334541C1.06026 0.518933 0.518933 1.06026 0.334541 1.7491C1.0014e-07 2.99637 0 5.60026 0 5.60026C0 5.60026 1.0014e-07 8.20416 0.334541 9.45145C0.518933 10.1403 1.06026 10.6816 1.74909 10.866C2.99637 11.2005 7.99997 11.2005 7.99997 11.2005C7.99997 11.2005 13.0036 11.2005 14.2509 10.866C14.9397 10.6816 15.4811 10.1403 15.6654 9.45145C16 8.20416 16 5.60026 16 5.60026C16 5.60026 15.9987 2.99637 15.6654 1.7491Z" fill="#FF0000"/>\n        <path d="M6.39844 7.99984L10.5552 5.60013L6.39844 3.20038V7.99984Z" fill="white"/>\n        </svg>'])))}}]),t}();function Cg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var bg=function(e){(0,O.Z)(d,e);var i,o,r,c,u=Cg(d);function d(t,e,i){var n;return(0,s.Z)(this,d),n=u.call(this),(0,I.Z)((0,R.Z)(n),"assets",void 0),(0,I.Z)((0,R.Z)(n),"flyoutData",void 0),(0,I.Z)((0,R.Z)(n),"utilities",void 0),(0,I.Z)((0,R.Z)(n),"logModule",void 0),(0,I.Z)((0,R.Z)(n),"stateManagement",void 0),(0,I.Z)((0,R.Z)(n),"pageHandlerModule",void 0),n.stateManagement=t,n.flyoutData=e,n.utilities=i.viewModulesUtilities,n.assets=new yg,n.logModule=i.logModule,n.pageHandlerModule=i.pageHandlerModule,n}return(0,l.Z)(d,[{key:"GetModuleName",value:function(){return D.GX.EXCLUSIVECOUPONS}},{key:"ShouldRenderModule",value:function(){var t;return this.flyoutData.dataStoreModule.ExclusiveCouponsData&&(this.flyoutData.experimentData.isExperimentActive(xt.H.youtubeCoupons)||this.flyoutData.experimentData.isExperimentActive(xt.H.youtubeCouponsAutoShow))&&this.flyoutData.dataLoader.IsServerData()&&(this.flyoutData.dataStoreModule.ExclusiveCouponsData.hasExclusiveCoupons||this.utilities.hasSocialSelectors()&&(null===(t=this.flyoutData.dataStoreModule.ExclusiveCouponsData.youtubeCouponsData)||void 0===t?void 0:t.length)>0)?Promise.resolve(!0):Promise.resolve(!1)}},{key:"renderModule",value:(c=(0,t.Z)(n().mark((function t(){var e,i,o,a,r,s,l,c,u,d;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.flyoutData.dataStoreModule.ExclusiveCouponsData&&(null===(e=this.flyoutData.dataStoreModule.ExclusiveCouponsData.youtubeCouponsData)||void 0===e?void 0:e.length)>0)){t.next=26;break}if(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),(i=document.createElement("msft-edge-shopping-section")).id="exclusiveCouponSection",!this.utilities.hasSocialSelectors()){t.next=20;break}return this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getCouponsStyles()),t.next=8,this.getYoutubeCouponData();case 8:if(o=t.sent,(a=null==o?void 0:o.coupons)&&(r=function(t){var e=D.CS.COUPON;return t&&s.common.bannerContext===D.De.VIEWALL&&(e=t.length),e},this.populateExclusiveCouponsListYoutube(i,!1,!1,a,"divYTCouponWrapper"),s=this.flyoutData,this.utilities.createCommonListStructure(i,this.flyoutData.strings.ytSectionTitleOnYoutube,a,this.GetModuleName(),r,this.populateExclusiveCouponsListYoutube.bind(this),"divYTCouponWrapper")),this.flyoutData.dataStoreModule.ExclusiveCouponsData.permission&&(l=this.createSectionExclusive(o,i)),!a){t.next=16;break}return t.abrupt("return",Promise.resolve(this.CreateModule(i,D.H7.EXCLUSIVECOUPONS,D.GX.EXCLUSIVECOUPONS,D.$k.CONTEXTUAL)));case 16:if(!l){t.next=18;break}return t.abrupt("return",Promise.resolve(this.CreateModule(l,D.H7.EXCLUSIVECOUPONS,D.GX.EXCLUSIVECOUPONS,D.$k.CONTEXTUAL)));case 18:t.next=26;break;case 20:if(!this.flyoutData.dataStoreModule.ExclusiveCouponsData.permission){t.next=26;break}return u=function(t){var e=D.CS.COUPON;return t&&d.common.bannerContext===D.De.VIEWALL&&(e=t.length),e},this.populateExclusiveCouponsList(i,!1,!1),d=this.flyoutData,this.utilities.createCommonListStructure(i,this.flyoutData.strings.ytSectionTitleOnRetailer,null===(c=this.flyoutData.dataStoreModule.ExclusiveCouponsData)||void 0===c?void 0:c.exclusiveCouponsForDomain,this.GetModuleName(),u,this.populateExclusiveCouponsList.bind(this),"divYTCouponWrapper"),t.abrupt("return",Promise.resolve(this.CreateModule(i,D.H7.EXCLUSIVECOUPONS,D.GX.EXCLUSIVECOUPONS,D.$k.CONTEXTUAL)));case 26:return t.abrupt("return",Promise.resolve(null));case 27:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"populateMainHeader",value:function(){if(this.utilities.hasSocialSelectors())this.createYoutubeHeader(this.flyoutData.common.shopping);else{var t=new CustomEvent(Ia.e1.CreateCouponHeader);this.stateManagement.dispatchEvent(t)}}},{key:"PostProcessing",value:function(){var t;if(!this.utilities.hasSocialSelectors()&&this.flyoutData.common.isCheckoutPage&&0===(null===(t=this.flyoutData.dataStoreModule.CouponData)||void 0===t?void 0:t.Coupons.length)&&this.flyoutData.dataStoreModule.CouponData.IsAutoApplyAvailable){var e=new CustomEvent(Ia.e1.CreateAutoApplyButton);this.stateManagement.dispatchEvent(e)}var i=this.flyoutData.common.shopping.querySelector("#otherExclusiveCouponSection");i&&Tt.SO.queueUpdate((function(){var t,e=null===(t=i.shadowRoot)||void 0===t?void 0:t.querySelector("fluent-accordion-item");if(e){var n,o,a=null===(n=e.shadowRoot)||void 0===n?void 0:n.querySelector(".button");a&&(a.style.paddingLeft="12px");var r=null===(o=e.shadowRoot)||void 0===o?void 0:o.querySelector(".icon");r&&(r.style.paddingRight="12px")}})),this.createPermissionUX()}},{key:"createPermissionUX",value:function(){var e,i=this,o=this.flyoutData.common.shopping.querySelector("#divPermissionWrapper");if(null===(null===(e=this.flyoutData.dataStoreModule.ExclusiveCouponsData)||void 0===e?void 0:e.permission)&&!o){var r=this.utilities.createElement("DIV");r.id="divPermissionWrapper",r.slot="actions";var s=this.utilities.createBaseActionButton();if(s.textContent=this.flyoutData.strings.ytSaveCouponsPermission,this.flyoutData.common.openedWith===D.Te.Auto){var l=function t(){var e=new CustomEvent(Ia.e1.onNotificationClick);c.dispatchEvent(e);var i=new na.Z(a.$S.HomePageNotificationHover);u.LogInfoEvent(a.R.EdgeFlyoutStatus,"Youtube notification expanded",i,ya.g.CouponImpressionId),s.removeEventListener("mouseover",t),s.removeEventListener("focus",t)};s.addEventListener("mouseover",l),s.addEventListener("focus",l);var c=this.stateManagement,u=this.logModule}s.addEventListener("click",function(){var e=(0,t.Z)(n().mark((function t(e){var o,s,l,c,u,d,h,p,f,g;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(s=new oa).boolValue=!0,i.pageHandlerModule.SetStorageValue("CanSaveExclusiveCoupons",s),(l=new aa.Z).stringValue=JSON.stringify(null===(o=i.flyoutData.dataStoreModule.ExclusiveCouponsData)||void 0===o?void 0:o.youtubeCouponsData),i.pageHandlerModule.SetStorageValue("exclusiveCoupons",l),c=new na.Z(a.$S.SaveExclusiveCoupons),i.logModule.LogInfoEvent(a.R.ButtonClick,"Permission set to save exclusive coupons",c,ya.g.CouponImpressionId),i.flyoutData.dataStoreModule.ExclusiveCouponsData&&(i.flyoutData.dataStoreModule.ExclusiveCouponsData.permission=!0),r.remove(),u=i.flyoutData.common.shopping.querySelector("#ytMainTitle"),d=i.flyoutData.common.shopping.querySelector("#divInfluencerInfo"),t.next=14,i.getYoutubeCouponData();case 14:h=t.sent,u&&h&&d&&i.flyoutData.dataStoreModule.ExclusiveCouponsData&&(u.remove(),p=i.createMainTitle(h,i.flyoutData.dataStoreModule.ExclusiveCouponsData.permission),d.appendChild(p)),i.utilities.isKeyboardClick(e)&&(f=i.flyoutData.common.shopping.querySelectorAll("msft-shopping-coupon-new"))&&f.length>0&&f[0].focus(),g=new CustomEvent(Ia.e1.ModulesRendered),i.stateManagement.dispatchEvent(g);case 19:case"end":return t.stop()}}),t)})));return function(t){return e.apply(this,arguments)}}());var d=this.utilities.createElement("fluent-button");d.appearance="lightweight",d.textContent=this.flyoutData.strings.ytDontSaveCouponsPermission,this.flyoutData.common.currentTheme===D.Q2.Dark?d.style.color="#FFFFFF":d.style.color="#717171",d.addEventListener("click",(function(){var t=new oa;t.boolValue=!1,i.pageHandlerModule.SetStorageValue("CanSaveExclusiveCoupons",t);var e=new na.Z(a.$S.DontSaveExclusiveCoupons);i.logModule.LogInfoEvent(a.R.ButtonClick,"Permission set to never save exclusive coupons",e,ya.g.CouponImpressionId),i.pageHandlerModule.DismissPopup()})),r.appendChild(s),r.appendChild(d),this.flyoutData.common.shopping.appendChild(r)}}},{key:"populateExclusiveCouponsList",value:function(t,e,i){var n,o,r=null===(n=this.flyoutData.dataStoreModule.ExclusiveCouponsData)||void 0===n?void 0:n.exclusiveCouponsForDomain;if(r){r.length>0&&(o=r.length);var s=0;if(e){var l=new na.Z(a.$S.SeeMoreExclusiveCoupons);this.pageHandlerModule.RecordAsUserAction(Ca.bS.VIEW_MORE_COUPONS),this.logModule.LogInfoEvent(a.R.ButtonClick,"See more exclusive coupons on retailer",l,ya.g.CouponImpressionId),s=D.CS.COUPON}else o>D.CS.COUPON&&(o=D.CS.COUPON);var c=null;e?c=t.querySelector("#divExclusiveCouponWrapper"):(c=this.utilities.createElement("DIV",{style:"padding-left: 12px; padding-right: 12px; display: flex; flex-direction: column; row-gap: 12px; margin-top: 5px; margin-bottom: 5px;"})).id="divExclusiveCouponWrapper";for(var u=s;u<o;u++)r[u].coupons.length>0&&this.createInfluencerTile(c,r[u],s,e,i,u);c&&(e||t.appendChild(c))}}},{key:"populateExclusiveCouponsListYoutube",value:(r=(0,t.Z)(n().mark((function t(e,i,o,r,s){var l,c,u,d,h,p,f=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){for(r.length>0&&(l=r.length),c=0,i?(u=new na.Z(a.$S.SeeMoreExclusiveCoupons),this.pageHandlerModule.RecordAsUserAction(Ca.bS.VIEW_MORE_COUPONS),this.logModule.LogInfoEvent(a.R.ButtonClick,"See more exclusive coupons on youtube",u,ya.g.CouponImpressionId),c=D.CS.COUPON):l>D.CS.COUPON&&(l=D.CS.COUPON),d=null,i?d=e.querySelector("#".concat(s)):((d=this.utilities.createElement("DIV")).id=s,d.className="divYTCouponWrapperTemplate"),h=function(t){var e,n=f.createCouponElement(r[t]),s=f.utilities.replaceValueInKey("ytShopOn",f.flyoutData.strings.ytShopOn,f.utilities.CapitalizeWordsInString(r[t].retailerDomain));n.description=s,n.label="".concat(r[t].couponCode,", ").concat(s),null===(e=d)||void 0===e||e.appendChild(n);var l=r[t].retailerLink;n.addEventListener("click",(function(){var t=new na.Z(a.$S.YoutubeNavigateToAnohterRetailer);f.pageHandlerModule.RecordAsUserAction(Ca.bS.NAVIGATE_TO_RETAILER),f.logModule.LogInfoEvent(a.R.ButtonClick,"Navigation to another retailer from youtube",t),f.pageHandlerModule.NavigateToRetailerSite(l)}));var u=f.flyoutData.common.currentDevice;t===c&&i&&o&&u===D.AS.Desktop&&n&&n.focus()},p=c;p<l;p++)h(p);d&&(i||e.appendChild(d))}case 1:case"end":return t.stop()}}),t,this)}))),function(t,e,i,n,o){return r.apply(this,arguments)})},{key:"createYoutubeHeader",value:(o=(0,t.Z)(n().mark((function t(e){var i,o,r,s,l,c,u,d,h,p;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.flyoutData.dataStoreModule.ExclusiveCouponsData&&(null===(i=this.flyoutData.dataStoreModule.ExclusiveCouponsData.youtubeCouponsData)||void 0===i?void 0:i.length)>0)){t.next=6;break}return this.utilities.applyStyles(e,this.assets.getHeaderStyles()),t.next=4,this.getYoutubeCouponData();case 4:(o=t.sent)&&((s=this.utilities.createElement("DIV",{style:"display: flex; justify-content: center; overflow: hidden;"})).slot="header-content",s.id="divExclusiveCouponsNotification",(l=this.utilities.createElement("DIV")).id="divInfluencerInfo",c=this.createProfileImageWrapper(o),l.appendChild(c),u=this.createMainTitle(o,this.flyoutData.dataStoreModule.ExclusiveCouponsData.permission),l.appendChild(u),s.appendChild(l),this.flyoutData.common.openedWith===D.Te.Auto&&!0===(null===(r=this.flyoutData.dataStoreModule.ExclusiveCouponsData)||void 0===r?void 0:r.permission)&&(d=function t(){var e=new CustomEvent(Ia.e1.onNotificationClick);h.dispatchEvent(e);var i=new na.Z(a.$S.HomePageNotificationHover);p.LogInfoEvent(a.R.EdgeFlyoutStatus,"Youtube notification expanded",i,ya.g.CouponImpressionId),s.removeEventListener("mouseover",t),s.removeEventListener("focus",t),s.removeAttribute("tabindex")},s.tabIndex=0,s.addEventListener("mouseover",d),s.addEventListener("focus",d),h=this.stateManagement,p=this.logModule),e.appendChild(s));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"createMainTitle",value:function(t,e){var i=this.utilities.createElement("H2");i.id="ytMainTitle",i.className="txtLarge",i.style.fontSize="18px",i.style.lineHeight="22px",i.style.textAlign="left",i.style.fontWeight="500";var n=t.coupons.length>1?this.utilities.replaceValueInKey("ytHeader",this.flyoutData.strings.ytHeader,t.coupons.length.toString()):this.flyoutData.strings.ytHeaderSingular;null===e&&(n=t.coupons.length>1?this.utilities.replaceValueInKey("ytHeaderPermission",this.flyoutData.strings.ytHeaderPermission,t.coupons.length.toString()):this.flyoutData.strings.ytHeaderPermissionSingular);var o=this.utilities.createElement("SPAN");return o.textContent=t.influencerName,o.className="txtGradient",o.style.fontWeight="600",this.utilities.populateSingleChildHtml(i,n,o),i.slot="header-content",i}},{key:"createSectionExclusive",value:function(t,e){var i,n=this,o=document.createElement("msft-edge-shopping-section");o.id="otherExclusiveCouponSection";var a=null===(i=this.flyoutData.dataStoreModule.ExclusiveCouponsData)||void 0===i?void 0:i.youtubeCouponsData;if(a){for(var r=0;r<a.length;r++){var s=a[r];(!t||t&&s.channelId!==t.channelId&&s.influencerName!==t.influencerName)&&function(){var e=n.utilities.createElement("DIV");e.className="divRetailerInfluencerWrapper",e.style.paddingLeft="12px",e.style.paddingRight="12px";var i=n.createProfileImageWrapper(s);e.appendChild(i);var a=n.utilities.createElement("DIV",{style:"display: flex; flex-direction: column; column-gap: 1px; text-align: left;"}),l=n.utilities.createElement("H3");l.textContent=s.influencerName,l.className="txtMedium",l.style.fontWeight="500",a.appendChild(l),e.appendChild(a),o.appendChild(e);var c=s.coupons;n.populateExclusiveCouponsListYoutube(o,!1,!1,c,"divYTCouponWrapper"+r);var u=n.flyoutData,d=n.flyoutData.strings.ytMoreCoupons;t||(d=n.flyoutData.strings.ytSectionTitleOnYoutube),n.utilities.createCommonListStructure(o,d,s.coupons,n.GetModuleName(),(function(t){var e=D.CS.COUPON;return t&&u.common.bannerContext===D.De.VIEWALL&&(e=t.length),e}),n.populateExclusiveCouponsListYoutube.bind(n),"divYTCouponWrapper"+r)}()}return o.hasChildNodes()&&e.appendChild(o),o}}},{key:"getYoutubeCouponData",value:(i=(0,t.Z)(n().mark((function t(){var e,i,o,a,r,s,l,c,u;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.utilities.hasSocialSelectors()){t.next=9;break}if(o=null===(i=this.flyoutData.dataStoreModule.ApiData)||void 0===i?void 0:i.retailerData,!(a=null==o?void 0:o.allCheckoutPages[0].socialSelectors)){t.next=9;break}return t.next=6,this.pageHandlerModule.RunQuerySelectorOnBodyWithReponse(a.influencerInfoSelector);case 6:r=t.sent,s=JSON.parse(r.extractedValues),r.found&&s.offsetHeight>0&&s.offsetWidth>0&&(c=null===(l=this.flyoutData.dataStoreModule.ExclusiveCouponsData)||void 0===l?void 0:l.youtubeCouponsData)&&(e=c.find((function(t){return r.innerText.includes(t.influencerName)})));case 9:return u=new CustomEvent(Ia.e1.ModulesRendered),this.stateManagement.dispatchEvent(u),t.abrupt("return",e);case 12:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"createProfileImageWrapper",value:function(t){var e,i,n=this.utilities.createElement("DIV");n.setAttribute("role","image");var o=this.utilities.replaceValueInKey("ytPhotoLabel",this.flyoutData.strings.ytPhotoLabel,t.influencerName);n.setAttribute("aria-label",o),n.id="divProfileImgWrapper",n.style.position="relative",n.style.display="flex",n.style.justifyContent="center";var a=this.utilities.createElement("DIV");a.id="divImgWrapper",a.style.placeSelf="center";var r=this.utilities.createElement("IMG");r.setAttribute("aria-hidden","true");var s=null===(e=t.imgSrc)||void 0===e||null===(i=e.replace("s88","s48"))||void 0===i?void 0:i.replace("s176","s48");r.src=s,a.appendChild(r),n.appendChild(a);var l=this.utilities.createElement("DIV");return l.setAttribute("aria-hidden","true"),l.innerHTML=this.assets.getYoutubeIcon(),l.style.position="absolute",l.style.top="43px",l.style.zIndex="2",n.appendChild(l),n}},{key:"createInfluencerTile",value:function(t,e,i,n,o,r){var s=this;this.utilities.applyStyles(t,this.assets.getStylesYoutuberTile());var l=[];e.coupons.forEach((function(c){if(-1===l.indexOf(c.couponCode)){l.push(c.couponCode);var u=s.createCouponElement(c);u.isYoutuber=!0,u.indicatorMessage=s.flyoutData.strings.couponCopyLabelRefresh.toUpperCase(),u.selectedIndicatorMessage=s.flyoutData.strings.couponCopied.toUpperCase(),u.label="".concat(c.couponCode," ").concat(s.flyoutData.strings.couponCopyLabel.toUpperCase(),", ").concat(e.influencerName,", ").concat(e.followers);var d=s.utilities.createElement("DIV");d.className="divRetailerInfluencerWrapper",d.slot="youtuber-info";var h=s.createProfileImageWrapper(e);d.appendChild(h);var p=s.utilities.createElement("DIV",{style:"display: flex; flex-direction: column; column-gap: 1px; text-align: left;"}),f=s.utilities.createElement("P");f.textContent=e.influencerName,f.className="txtMedium",f.style.fontWeight="500";var g=s.utilities.createElement("P");g.textContent=e.followers,g.className="txtSmall",g.style.opacity="0.6",p.appendChild(f),p.appendChild(g),d.appendChild(p),u.appendChild(d),t.appendChild(u);var m=s.flyoutData.common.currentDevice;r===i&&n&&o&&m===D.AS.Desktop&&u&&u.focus(),u.addEventListener("click",(function(){if(m===D.AS.Desktop){var t=new na.Z(a.$S.CouponCopied);s.logModule.LogInfoEvent(a.R.ButtonClick,"Exclusive Coupon copied",t,ya.g.CouponImpressionId)}s.pageHandlerModule.RecordAsUserAction(Ca.bS.COUPONS_COPIED),s.pageHandlerModule.CopyCoupon(u.name)}))}}))}},{key:"createCouponElement",value:function(t){var e=document.createElement("msft-shopping-coupon-new");return e.name=t.couponCode.toUpperCase(),e.description=this.utilities.CapitalizeWordsInString(t.retailerDomain),e.setAttribute("title",t.couponCode),e.label="".concat(this.flyoutData.strings.couponCopyLabel," ").concat(t.couponCode),e}}]),d}(jf.Z),Sg=bg;function xg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var Eg,Ag=function(e){(0,O.Z)(a,e);var i,o=xg(a);function a(t,e,i){return(0,s.Z)(this,a),o.call(this,t,e,i)}return(0,l.Z)(a,[{key:"RenderNotification",value:(i=(0,t.Z)(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.utilities.applyStyles(e,this.assets.getStyles()),this.utilities.applyStyles(e,this.assets.getHeaderStyles()),t.next=4,this.createYoutubeHeader(e);case 4:return this.createPermissionUX(),t.abrupt("return",Promise.resolve(null));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"ShouldRenderNotification",value:function(){var t,e,i=this.flyoutData.common.shopping.querySelector("#divExclusiveCouponsNotification"),n=null===(t=this.flyoutData.dataStoreModule.ApiData)||void 0===t?void 0:t.retailerData,o=null==n?void 0:n.GetCurrentCheckoutPageByPathName(this.flyoutData.common.lastCommittedURL);return i?Promise.resolve(!1):null!=o&&o.socialSelectors&&this.flyoutData.dataStoreModule.ExclusiveCouponsData&&(null===(e=this.flyoutData.dataStoreModule.ExclusiveCouponsData.youtubeCouponsData)||void 0===e?void 0:e.length)>0&&this.flyoutData.common.openedWith===D.Te.Auto?Promise.resolve(!0):Promise.resolve(!1)}},{key:"GetNotificationName",value:function(){return D.sM.EXCLUSIVECOUPONS}}]),a}(Sg),Tg=Ag,Ig=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"#giftCardDescp {\n            text-align: center;\n            font-weight: 500;\n            margin: 0 12px 12px 12px;\n        }\n        #divButtonWrapper {\n            margin: 10px;\n            text-align: center;\n        }\n        .joinButton {\n            min-width: 150px;\n            max-width: 100%;\n            height: 48px;\n            font-weight: 600;\n            background: linear-gradient(90.05deg, #8300D4 0.59%, #0048D4 67.54%, #00D4A1 104.11%);\n        }\n        .joinButton:hover {\n            background: linear-gradient(90.05deg, #9E00FF 0.59%, #0048D4 67.54%, #00FFC2 104.11%);\n        }\n        #successDivWrapper, #shoppingUpsell {\n            text-align: center;\n            margin: 12px;\n        }\n        .divDismiss {\n            text-align: center;\n        }\n        .divCookies {\n            text-align: center;\n            margin: 8px;\n        }\n        #btnMaybeLater {\n            border: 1px solid;\n            border-radius: 8px;\n            border-color: #04AA6D;\n            font-weight: 600;\n            cursor: pointer;\n            min-width: 150px;\n            height: 48px;\n            margin-left: 5px;\n            vertical-align: bottom;\n          }"}},{key:"getShoppingIcon",value:function(){return A.Z.getTrustedHTML(Eg||(Eg=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none"><path xmlns="http://www.w3.org/2000/svg" d="M17.5719 5.02911C17.5703 3.93081 16.6833 3.0393 15.585 3.0321L10.6946 3.00004C10.1606 2.99654 9.64727 3.20681 9.26913 3.58399L2.58759 10.2485C1.80484 11.0293 1.80403 12.297 2.58579 13.0788L7.53418 18.0271C8.31523 18.8082 9.58156 18.8082 10.3626 18.0271L16.9934 11.3963C17.3692 11.0205 17.58 10.5106 17.5792 9.97917L17.5719 5.02911ZM13.5654 7.99594C13.0131 7.99594 12.5654 7.54822 12.5654 6.99594C12.5654 6.44366 13.0131 5.99594 13.5654 5.99594C14.1177 5.99594 14.5654 6.44366 14.5654 6.99594C14.5654 7.54822 14.1177 7.99594 13.5654 7.99594Z" fill="#0178D4"/></svg>'])))}}]),t}();function Dg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var kg=function(e){(0,O.Z)(r,e);var i,o=Dg(r);function r(t,e,i){var n;return(0,s.Z)(this,r),n=o.call(this),(0,I.Z)((0,R.Z)(n),"assets",void 0),(0,I.Z)((0,R.Z)(n),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(n),"flyoutData",void 0),(0,I.Z)((0,R.Z)(n),"interactionType",void 0),(0,I.Z)((0,R.Z)(n),"timeVisited",void 0),(0,I.Z)((0,R.Z)(n),"utilities",void 0),(0,I.Z)((0,R.Z)(n),"commonAssets",void 0),(0,I.Z)((0,R.Z)(n),"logModule",void 0),n.flyoutData=t,n.utilities=e.viewModulesUtilities,n.pageHandlerModule=e.pageHandlerModule,n.logModule=e.logModule,n.assets=new Ig,n.commonAssets=i,n}return(0,l.Z)(r,[{key:"GetModuleName",value:function(){return D.GX.GIFT_CARD}},{key:"ShouldRenderModule",value:function(){if(this.pageHandlerModule.TriggerExperiment(xt.H.amazongiftCardExp),!this.flyoutData.experimentData.isExperimentActive(xt.H.amazongiftCardExp))return Promise.resolve(!1);this.initializeInteractionType();var t=this.isValidGiftCardScenario();return Promise.resolve(t)}},{key:"populateMainHeader",value:function(){var t=this.flyoutData.common.shopping;if(t){var e=this.utilities.createElement("H2");e.className="txtLarge",e.style.textAlign="center",e.style.fontWeight="500";e.textContent="",e.slot="header-content",t.appendChild(e)}}},{key:"renderModule",value:function(){var t=this.createModule();return Promise.resolve(this.CreateModule(t,D.H7.GIFT_CARD,D.GX.GIFT_CARD,D.$k.CONTEXTUAL))}},{key:"createModule",value:function(){var t,e,i=this,n=this.utilities.createElement("msft-edge-shopping-section"),o=this.utilities.createElement("DIV");o.id="divGiftCard",o.style.borderWidth="0px",o.style.marginTop="-35px";var r=this.utilities.createElement("IMG");r.style.width="100%",r.src=this.flyoutData.common.resourcesEndpoint+"amazonGiftCard.png",r.setAttribute("aria-hidden","true");var s=this.flyoutData.experimentData.isVariantActive(xt.H.amazongiftCardExp,_f.R6.CampaignFive),l=this.utilities.createElement("DIV");l.id="giftCardDescp";var c=!0===s?this.flyoutData.strings.giftCardSubtitleFiveDollar:this.flyoutData.strings.giftCardSubtitle;l.textContent=c,l.setAttribute("aria-labelledby",c),l.setAttribute("role","heading"),l.setAttribute("aria-level","2"),o.appendChild(r),o.appendChild(l);var u="line-height: 16px; font-size: 12px;",d=!1;if(-1!==this.interactionType&&Date.now()-this.timeVisited>1728e3&&null!==(t=this.flyoutData.dataStoreModule)&&void 0!==t&&null!==(e=t.CouponData)&&void 0!==e&&e.IsAmazonGiftCardEnabled&&(d=!0),-1===this.interactionType||d){this.creatButtons(o,s);var h=this.utilities.createElement("DIV",{className:"divDismiss",style:u});h.id="divDismiss";var p=this.utilities.createElement("P");p.style.display="inline",p.style.cursor="pointer",p.style.fontSize="12px",p.textContent=this.flyoutData.strings.giftCardDismiss,h.appendChild(p),o.appendChild(h),h.addEventListener("click",(function(){Ct("giftCardData"),yt("giftCardData","0&"+Date.now());var t=new aa.Z;t.stringValue="0",i.pageHandlerModule.SetStorageValue("GiftCardData",t),i.pageHandlerModule.DismissPopup();var e=new na.Z(a.$S.DismissGiftCard);i.logModule.LogInfoEvent(a.R.ButtonClick,"Clicked on dimiss rewards",e),i.pageHandlerModule.RecordAsUserAction(Ca.bS.REWARD_DISMISS)}))}else o.appendChild(this.createSuccessDiv(this.flyoutData.strings.rewardOfferSuccess));var f=this.utilities.createElement("DIV",{className:"divCookies",style:u}),g=this.utilities.createElement("P");g.style.display="inline",g.style.fontSize="12px";var m=document.createElement("fluent-anchor");m.id="privacyConsent",m.setAttribute("href","#"),m.style.fontSize="12px",m.textContent=this.flyoutData.strings.rewardsPrivacyText,m.setAttribute("appearance","hypertext"),m.style.display="inline",this.utilities.populateSingleChildHtml(g,this.flyoutData.strings.rewardGiftCardConsent,m),m.addEventListener("click",(function(){i.pageHandlerModule.NavigateToPrivacyStatement()}));var v=document.createElement("fluent-anchor");v.id="termsConsent",v.setAttribute("href","#"),v.style.fontSize="12px",v.textContent=this.flyoutData.strings.rewardsTermsText,v.setAttribute("appearance","hypertext"),v.style.display="inline",v.addEventListener("click",(function(){i.pageHandlerModule.NavigateToTermsStatement()}));var y=this.utilities.createElement("P");y.style.display="inline",y.style.fontSize="12px",y.textContent=this.flyoutData.strings.rewardGiftConsentSubtext;var C=document.createElement("fluent-anchor");return C.id="rewardLearnMore",C.setAttribute("href","#"),C.style.fontSize="12px",C.textContent=this.flyoutData.strings.commonLearnMore,C.setAttribute("appearance","hypertext"),C.style.display="inline",C.addEventListener("click",(function(){i.pageHandlerModule.NavigateToRewardsInfo()})),g.appendChild(v),g.appendChild(y),g.appendChild(C),f.appendChild(g),o.appendChild(f),this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),n.appendChild(o),n}},{key:"isValidGiftCardScenario",value:function(){var t,e,i,n="amazon.com"===this.flyoutData.common.domain,o=new URL(this.flyoutData.common.lastCommittedURL);if(!n||!("/"===(null==o?void 0:o.pathname)||null!=o&&null!==(t=o.pathname)&&void 0!==t&&t.includes("/gp/buy")))return!1;var a=null===(e=this.flyoutData.dataStoreModule)||void 0===e||null===(i=e.CouponData)||void 0===i?void 0:i.IsAmazonGiftCardEnabled,r=!0;return(-1!==this.interactionType||!0===a)&&(1===this.interactionType&&Date.now()-this.timeVisited>1296e6&&(r=!1),0===this.interactionType&&(r=!1),2===this.interactionType&&(Date.now()-this.timeVisited<2592e5?r=!1:(Ct("giftCardData"),r=!0)),r)}},{key:"creatButtons",value:(i=(0,t.Z)(n().mark((function t(e,i){var o,s,l,c=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(o=this.utilities.createElement("DIV")).id="divButtonWrapper",o.setAttribute("role","presentation"),(s=this.utilities.createElement("fluent-button")).appearance="accent",s.style.fontSize="16px",s.style.borderRadius="8px",s.className="joinButton",s.disabled=!1,s.appearance="accent",s.style.backgroundColor="var(--accent-fill-rest)",s.id="joinButton",s.setAttribute("aria-live","assertive"),s.setAttribute("role","presentation"),s.textContent=this.flyoutData.strings.joinNowButtonText,(l=this.utilities.createElement("fluent-button")).id="btnMaybeLater",l.setAttribute("role","presentation"),l.slot="actions",l.style.background=this.flyoutData.common.currentTheme===D.Q2.Dark?"#3b3b3b":"#FFFFFF",l.style.color=this.flyoutData.common.currentTheme===D.Q2.Dark?"#02d9c8":"#008076",this.utilities.createElement("DIV").setAttribute("role","presentation"),l.textContent=this.flyoutData.strings.maybeLaterButtontext,s.id="laterButton",l.setAttribute("aria-live","assertive"),l.setAttribute("role","presentation"),s.addEventListener("click",(function(){!0===i?c.pageHandlerModule.NavigateToUrlBackground(r.joinUrlFive,r.rewardsJoinDestinationUrl,!1):c.pageHandlerModule.NavigateToUrlBackground(r.joinUrlOnePointFive,r.rewardsJoinDestinationUrl,!1);var t=new na.Z(a.$S.JoinNow);c.logModule.LogInfoEvent(a.R.ButtonClick,"Clicked on Join now rewards",t),c.pageHandlerModule.RecordAsUserAction(Ca.bS.REWARD_JOIN_NOW),Ct("giftCardData"),yt("giftCardData","1&"+Date.now());var e=new aa.Z;e.stringValue="1",c.pageHandlerModule.SetStorageValue("GiftCardData",e);var n=document.getElementById("divDismiss");null==n||n.remove();var o=document.getElementById("divButtonWrapper"),s=c.createSuccessDiv(c.flyoutData.strings.rewardJoinSuccess);o&&o.parentNode&&s&&o.parentNode.replaceChild(s,o)})),l.addEventListener("click",(function(){var t=new na.Z(a.$S.MaybeLater);c.logModule.LogInfoEvent(a.R.ButtonClick,"Clicked on maybe later rewards",t),Ct("giftCardData"),c.pageHandlerModule.RecordAsUserAction(Ca.bS.REWARD_MAYBE_LATER),yt("giftCardData","2&"+Date.now());var e=new aa.Z;e.stringValue="2",c.pageHandlerModule.SetStorageValue("GiftCardData",e),c.pageHandlerModule.DismissPopup()})),o.append(s),o.append(l),e.append(o);case 32:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"initializeInteractionType",value:function(){this.interactionType=-1;var t=vt("giftCardData");if(t){var e=null==t?void 0:t.split("&")[0];null===e||isNaN(parseInt(e,10))||(this.interactionType=parseInt(e,10));var i=null==t?void 0:t.split("&")[1];null===i||isNaN(parseInt(i,10))||(this.timeVisited=parseInt(i,10))}}},{key:"createSuccessDiv",value:function(t){var e=this,i=this.utilities.createElement("DIV");i.id="successDivWrapper";var n=this.utilities.createElement("DIV");n.innerHTML=this.commonAssets.getGreenCheck(),n.slot="start",n.style.display="inline",n.style.marginRight="5px",n.style.verticalAlign="middle",n.setAttribute("aria-hidden","true"),i.appendChild(n);var o=this.utilities.createElement("DIV");o.textContent=t,o.style.display="inline",o.style.fontSize="12px",o.style.fontWeight="500",i.appendChild(o);var a=document.createElement("fluent-anchor");a.id="rewardsLink",a.setAttribute("href","#"),a.style.fontSize="12px",a.textContent=this.flyoutData.strings.commonMicrosoftRewards,a.setAttribute("appearance","hypertext"),a.style.display="inline",i.appendChild(a),a.addEventListener("click",(function(){e.pageHandlerModule.RecordAsUserAction(Ca.bS.REWARD_LINK_CLICK),e.pageHandlerModule.NavigateToRewardsInfo()}));var r=this.utilities.createElement("DIV");r.id="shoppingUpsell";var s=this.utilities.createElement("DIV");return s.innerHTML=this.assets.getShoppingIcon(),s.slot="start",s.setAttribute("aria-hidden","true"),s.style.display="inline",s.style.verticalAlign="middle",r.textContent=this.flyoutData.strings.rewardsjoinAckText,r.appendChild(s),r.style.fontSize="12px",this.utilities.populateSingleChildHtml(r,this.flyoutData.strings.rewardsjoinAckText,s),i.appendChild(r),i}}]),r}(jf.Z);(0,I.Z)(kg,"joinUrlOnePointFive","https://rewards.microsoft.com/createuser?idType=LiveId&ACCEPTEDTOU=TRUE&form=MY020A&OCID=MY020A&PUBL=MSNIP&PROGRAMNAME=MULTIAZNGCACQ202101&CREA=MY020A"),(0,I.Z)(kg,"joinUrlFive","https://rewards.microsoft.com/createuser?idType=LiveId&ACCEPTEDTOU=TRUE&form=MY0212&OCID=MY0212&PUBL=MSNIP&PROGRAMNAME=MULTIAZNGCACQ202202&CREA=MY0212"),(0,I.Z)(kg,"rewardsJoinDestinationUrl","https://rewards.microsoft.com/welcometour");var wg=kg;function Rg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var Og=function(t){(0,O.Z)(i,t);var e=Rg(i);function i(t,n,o){return(0,s.Z)(this,i),e.call(this,t,n,o)}return(0,l.Z)(i,[{key:"GetNotificationName",value:function(){return D.sM.GIFT_CARD}},{key:"ShouldRenderNotification",value:function(){this.pageHandlerModule.TriggerExperiment(xt.H.amazongiftCardExp);var t=this.flyoutData.experimentData.isExperimentActive(xt.H.amazongiftCardExp),e=this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_GIFT_CARD;return Promise.resolve(e&&t)}},{key:"RenderNotification",value:function(t){if(t){var e=this.createModule();t.appendChild(e);var i=this.CreateModule(e,0,D.GX.GIFT_CARD,D.$k.CONTEXTUAL);return Promise.resolve(i)}return Promise.resolve(null)}}]),i}(wg),Pg=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n        .gcSectionWrapper {\n            margin: 20px;\n            margin-top: 0px;\n        }\n        .groceryCashback {\n            display: flex;\n            flex-direction: row;\n            column-gap: 12px;\n            text-decoration: none;\n            color: unset;\n        }\n        .gcHR {\n            margin-top: 15px;\n            margin-bottom: 15px;\n            border: solid 0.5px #DFDFDF;\n            background: #DFDFDF;\n        }\n        .gcImageDiv {\n            height: 80px;\n            flex: 0 0 80px;\n            border-radius: 6px;\n            background-repeat: no-repeat;\n            background-size: contain;\n            background-position: center center\n        }\n        .gcTextDiv {\n            display: flex;\n            flex-direction: column;\n            row-gap: 8px;\n            justify-content: center;\n        }\n        .gcTitle {\n            color: #00000096;\n            font-size: 12px;\n            line-height: 16px;\n            display: -webkit-box;\n            -webkit-box-orient: vertical;\n            -webkit-line-clamp: 1;\n            overflow: hidden;\n            margin: 0px;\n        }\n        .gcCashbackDiv {\n            display: flex;\n            flex-direction: row;\n            margin-top: 4px;\n            margin-bottom: 4px;\n            column-gap: 4px;\n        }\n        .gcCashback {\n            font-size: 16px;\n            line-height: 24px;\n            font-weight: 600;\n            margin: 0px;\n        }\n        .gcInfoIcon {\n            margin-top: 5px;\n        }\n        .gcTooltip:focus {\n            outline: none;\n        }\n        .gcButton {\n            background: #FFFFFF;\n            color: #008076;\n            font-weight: 500;\n            height: 26px;\n            width: 119px;\n            border-color: transparent;\n            border-radius: 2px;\n            font-size: 12px;\n            font-family: inherit;\n            line-height: 16px;\n            cursor: pointer;\n        }\n        .gcButton:focus {\n            outline: none;\n        }\n        fluent-button[id*='gcButton']::part(control):focus {\n            box-shadow: 0 0 3px 3px #898989;\n        }\n        .gcButtonColorful {\n            background: linear-gradient(88.14deg, #018DC8 0.49%, #01CC83 53.44%, #0CBFC9 104.22%);\n            border-radius: 4px;\n            padding: 1px;\n            height: min-content;\n            width: min-content;\n            display: flex;\n        }\n        .gcButtonColorful:focus-within {\n            box-shadow: 0px 0px 0px 2px #898989;\n        }\n        .gcActivatedDiv {\n            display: flex;\n            align-content: center;\n            column-gap: 4px;\n        }\n        .gcActivated {\n            margin: 0px;\n            color: #008076;\n        }\n        #gcActivatedNotif {\n            background: #f5f8f9;\n            padding: 16px;\n            margin-top: -20px;\n        }\n        #groceryRebatesTitle {\n            font-family: 'Segoe UI Variable Static Text','Segoe UI';\n            font-size: 20px;\n            line-height: 24px;\n            font-weight: 800;\n            text-align: center;\n            margin: 0px;\n            width: calc(75%);\n        }\n        #groceryRebatesSubtitle {\n            font-family: 'Segoe UI';\n            font-size: 12px;\n            line-height: 16px;\n            text-align: center;\n            color: #333333;\n            margin: 0px;\n            width: calc(75%);\n        }\n        @media (prefers-color-scheme: dark) {\n            .gcImageDiv {\n                background-color: #FFFFFF;\n            }\n            .gcTitle {\n                color: #FFFFFF96;\n            }\n            .gcButton {\n                background: #3b3b3b;\n                color: #02d9c8;\n            }\n            .gcHR {\n                border: solid 0.5px #656565;\n            }\n            #gcActivatedNotif {\n                background: #464b4d;\n            }\n            #groceryRebatesSubtitle {\n                color: #dedede;\n            }\n        }"}}]),t}();function Mg(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return Ng(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ng(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function Ng(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Lg=new Map;Lg.set("albertsons.com","albertsonsLarge"),Lg.set("safeway.com","safewayLarge");var _g=function(){function t(e,i){(0,s.Z)(this,t),(0,I.Z)(this,"flyoutData",void 0),(0,I.Z)(this,"utilities",void 0),(0,I.Z)(this,"pageHandlerModule",void 0),(0,I.Z)(this,"logModule",void 0),(0,I.Z)(this,"brandIdParam","almBrandId"),(0,I.Z)(this,"amazonFreshId","QW1hem9uIEZyZXNo"),(0,I.Z)(this,"wholeFoodsId","VUZHIFdob2xlIEZvb2Rz"),(0,I.Z)(this,"itemAddedToCartUrl","/cart/smart-wagon"),(0,I.Z)(this,"activatedCashbackKey","activatedGroceryCashback"),(0,I.Z)(this,"redeemedCashbackKey","redeemedCashback"),this.flyoutData=e,this.utilities=i.viewModulesUtilities,this.pageHandlerModule=i.pageHandlerModule,this.logModule=i.logModule}return(0,l.Z)(t,[{key:"shouldShowGroceryCashback",value:function(){var t=this.flyoutData.common.domain;if("amazon.com"!==t)return!1;var e=new URL(this.flyoutData.common.lastCommittedURL);return this.IsGroceryPage(e)||this.IsCashbackURL(e)||this.isCartPage(e)&&this.getActivatedCashbackItems(t).activatedItems.length>0}},{key:"IsCashbackURL",value:function(t){var e,i,n=null===(e=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===e||null===(i=e.Cashback)||void 0===i?void 0:i.ItemizedCashback;if(n){var o,a=Mg(n);try{for(a.s();!(o=a.n()).done;){var r=o.value,s=new URL(r.url).pathname.match("/dp/([a-zA-Z0-9]+)($|/)");if(s&&s.length>1){var l=s[1];if(-1!==t.pathname.indexOf(l))return!0}}}catch(t){a.e(t)}finally{a.f()}}return!1}},{key:"IsGroceryPage",value:function(t){var e=t.searchParams.get(this.brandIdParam)===this.amazonFreshId,i=t.searchParams.get(this.brandIdParam)===this.wholeFoodsId,n="/s"===t.pathname,o=n&&"amazonfresh"===t.searchParams.get("i"),a=n&&"10329849011"===t.searchParams.get("bbn");return e||i||o||a}},{key:"isCartPage",value:function(t){var e,i,n=t.pathname,o=null!==(e=null===(i=this.flyoutData.dataStoreModule.ApiData)||void 0===i?void 0:i.retailerData.allCheckoutPages)&&void 0!==e?e:[];if(n.includes(this.itemAddedToCartUrl))return!0;var a,r=Mg(o);try{for(r.s();!(a=r.n()).done;){var s,l=Mg(a.value.checkoutPageUrl.split(","));try{for(l.s();!(s=l.n()).done;){var c=s.value;if(n.includes(c))return!0}}catch(t){l.e(t)}finally{l.f()}}}catch(t){r.e(t)}finally{r.f()}return!1}},{key:"getCashbackString",value:function(t){if(t.includes(".")){var e=t.split("."),i=e&&e[1]&&1===e[1].length?e[1]+"0":e[1];return i?e[0]+"."+i:t}return t}},{key:"getActivatedCashbackItems",value:function(t){var e=[],i=[];if(!t)return{activatedItems:e,redeemedItems:i};var n=this.utilities.loadLocalStorageAsJSON(this.activatedCashbackKey),o=this.utilities.loadLocalStorageAsJSON(this.redeemedCashbackKey);try{var a,r,s,l=n?n[t]:{},c=l&&null!==(a=l.items)&&void 0!==a?a:{};e=null!==(r=Object.keys(c))&&void 0!==r?r:[];var u=o?o[t]:{};return{activatedItems:e,redeemedItems:i=u&&null!==(s=u.items)&&void 0!==s?s:[]}}catch(t){return{activatedItems:e,redeemedItems:i}}}},{key:"getGroceryLogo",value:function(t,e){var i;if(e===D.GX.GROCERY_COUPON){var n=Lg.get(t);i=n?"https://th.bing.com/th?id=OCG."+n+"&w=50&h=50":""}else i=this.flyoutData.common.resourcesEndpoint+"/retailerBranding/SquareIcons/"+t+".png";return i}},{key:"createGroceryHeader",value:function(t,e,i,n,o){var r,s=this,l=this.utilities.createElement("DIV");l.slot="header-content",l.id="groceryHeaderDiv",l.setAttribute("role","group"),l.setAttribute("aria-labelledby","groceryHeaderRetailer groceryHeaderText");var c=this.utilities.createElement("DIV");c.id="groceryHeaderTextWrapper";var u=null===(r=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===r?void 0:r.DomainName;if(u){var d=this.utilities.CapitalizeString(u),h=this.utilities.createElement("P");h.id="groceryHeaderRetailer",h.className="txtLarge",h.setAttribute("role","heading"),h.setAttribute("aria-level","2"),h.textContent=d,c.appendChild(h);var p=this.utilities.createElement("P");p.className="txtSmall",p.id="groceryHeaderText",p.setAttribute("role","heading"),p.setAttribute("aria-level","3"),p.textContent=this.flyoutData.strings.gcSectionTitle,c.appendChild(p);var f=this.utilities.createElement("IMG");f.src=this.getGroceryLogo(this.flyoutData.common.domain,t),f.id="groceryHeaderIcon",f.addEventListener("error",(function(){l.style.gridTemplateColumns="auto",f.setAttribute("aria-hidden","true")}));var g=document.createElement("button");g.id="groceryHeaderButton",g.setAttribute("role","presentation"),g.slot="header-actions",g.textContent="See all";var m=this.utilities.createElement("DIV");return m.id="divColorful",m.className="divSeeMore",m.setAttribute("role","presentation"),m.appendChild(g),g.addEventListener("click",(function(t){s.pageHandlerModule.RecordAsUserAction(e);var r=new na.Z(i);s.logModule.LogInfoEvent(a.R.ButtonClick,n,r),s.pageHandlerModule.NavigateToCouponPage(o)})),l.appendChild(f),l.appendChild(c),l.appendChild(m),l}}},{key:"extractProductFromDescription",value:function(t){var e,i=t.replace(/[^A-zÀ-ú'0-9\(\)\-. &’,]/g,""),n=/(\([0-9]*\)| of) ([A-zÀ-ú'0-9\- &’]*)/.exec(i);if(n&&n[2]&&(e=n[2]),np(e)){var o=/^(ONE |TWO |THREE |FOUR )([A-zÀ-ú'0-9\- &’]*)/.exec(i);o&&o[2]&&(e=o[2])}if(e){e=(e=e.replace(/( product | Product )/," Products ")).replace(/( any |[pP]ackage of |[pP]ackages of )/," ")}return this.utilities.CapitalizeWordsInString(e)}},{key:"getQuotientDate",value:function(t){var e=6e4*(new Date).getTimezoneOffset();return new Date(Date.now()-e).toISOString().slice(0,-1).split(".")[0]+this.getTimeZone()}},{key:"getTimeZone",value:function(){var t=(new Date).getTimezoneOffset(),e=Math.abs(t);return(t<0?"+":"-")+("00"+Math.floor(e/60)).slice(-2)+":"+("00"+e%60).slice(-2)}}]),t}(),Fg=_g;function Hg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var Zg=function(e){(0,O.Z)(r,e);var i,o=Hg(r);function r(t,e,i){var n;return(0,s.Z)(this,r),n=o.call(this),(0,I.Z)((0,R.Z)(n),"utilities",void 0),(0,I.Z)((0,R.Z)(n),"groceryUtilities",void 0),(0,I.Z)((0,R.Z)(n),"assets",void 0),(0,I.Z)((0,R.Z)(n),"commonAssets",void 0),(0,I.Z)((0,R.Z)(n),"flyoutData",void 0),(0,I.Z)((0,R.Z)(n),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(n),"logModule",void 0),(0,I.Z)((0,R.Z)(n),"activatedNotifItemKey","activatedNotifItem"),(0,I.Z)((0,R.Z)(n),"activatedCashbackKey","activatedGroceryCashback"),(0,I.Z)((0,R.Z)(n),"redeemedCashbackKey","redeemedCashback"),(0,I.Z)((0,R.Z)(n),"submitKey","activationSubmitted"),(0,I.Z)((0,R.Z)(n),"cashbackItems",void 0),n.flyoutData=t,n.utilities=e.viewModulesUtilities,n.groceryUtilities=new Fg(t,e),n.pageHandlerModule=e.pageHandlerModule,n.logModule=e.logModule,n.assets=new Pg,n.commonAssets=i,n}return(0,l.Z)(r,[{key:"GetModuleName",value:function(){return D.GX.GROCERY_CASHBACK}},{key:"ShouldRenderModule",value:function(){var t,e,i,n,o=null===(t=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===t||null===(e=t.Cashback)||void 0===e?void 0:e.ItemizedCashback,a=this.groceryUtilities.shouldShowGroceryCashback();if(o){var r=this.flyoutData.common.domain;this.utilities.checkLocalStorageTimeout(r,this.redeemedCashbackKey),this.utilities.checkLocalStorageTimeout(r,this.activatedCashbackKey)&&this.utilities.clearDomainMappedStringStorage("GroceryCashbackActivated",!0);var s=this.groceryUtilities.getActivatedCashbackItems(r),l=s.activatedItems,c=s.redeemedItems;this.cashbackItems=o.filter((function(t){return t.imageUrl&&t.title&&t.value&&t.id&&t.upc&&t.url&&!l.includes(t.title)&&!c.includes(t.title)}))}var u=null!==(i=(null===(n=this.cashbackItems)||void 0===n?void 0:n.length)>0)&&void 0!==i&&i,d=this.flyoutData.experimentData.isExperimentActive(xt.H.groceryCashback);return Promise.resolve(u&&a&&d)}},{key:"populateMainHeader",value:function(){var t=this.flyoutData.common.shopping,e=this.utilities.createElement("p");e.textContent=this.flyoutData.strings.gcbSectionTitle,e.slot="header-content",e.style.alignSelf="flex-start",e.style.margin="0px",t.append(e)}},{key:"renderModule",value:function(){var t,e,i;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var n=this.utilities.createElement("msft-edge-shopping-section"),o=null===(t=this.flyoutData.dataStoreModule)||void 0===t||null===(e=t.GroceryCouponData)||void 0===e||null===(i=e.Cashback)||void 0===i?void 0:i.ItemizedCashback;if(this.utilities.checkLocalStorageTimeout(this.flyoutData.common.domain,this.activatedCashbackKey),yt(this.submitKey,"false"),o){var a=this.flyoutData;this.cashbackItems&&this.cashbackItems.length>0&&(this.populateGroceryCashbackList(n,!1,!1),this.utilities.createCommonListStructure(n,this.flyoutData.strings.gcbSectionTitle,this.cashbackItems,this.GetModuleName(),(function(t){var e=D.CS.GROCERY_CASHBACK;return t&&a.common.bannerContext===D.De.VIEWALL&&(e=t.length),e}),this.populateGroceryCashbackList.bind(this)))}return this.pageHandlerModule.RecordAsContentViewed(ba.r.ITEMIZED_CASHBACK),Promise.resolve(this.CreateModule(n,D.H7.GROCERY_CASHBACK,D.GX.GROCERY_CASHBACK,D.$k.CONTEXTUAL))}},{key:"populateGroceryCashbackList",value:function(t,e,i){if(this.cashbackItems){var n=0;this.cashbackItems.length>0&&(n=this.cashbackItems.length);var o=0;e?(o=D.CS.GROCERY_CASHBACK,this.pageHandlerModule.RecordAsUserAction(Ca.bS.CLICK_ITEMIZED_CASHBACK_SEE_ALL)):n>D.CS.GROCERY_CASHBACK&&(n=D.CS.GROCERY_CASHBACK);var a=null;e?a=t.querySelector("#gcSection"):((a=this.utilities.createElement("DIV")).className="gcSectionWrapper",a.id="gcSection");for(var r=o;r<n;r++){var s=this.cashbackItems[r],l=this.createGroceryCashbackTile(s);if(a&&l){if(r===o&&e){var c=this.utilities.createElement("hr");c.className="gcHR",a.appendChild(c)}if(a.appendChild(l),r!==n-1){var u=this.utilities.createElement("hr");u.className="gcHR",a.appendChild(u)}r===o&&e&&i&&this.flyoutData.common.currentDevice===D.AS.Desktop&&l.focus(),e||t.appendChild(a)}}}}},{key:"createGroceryCashbackTile",value:function(t){var e=this,i=this.utilities.createElement("div");i.className="groceryCashback",i.setAttribute("role","group");var n=this.utilities.createElement("div");n.className="gcImageDiv",n.style.backgroundImage="linear-gradient(0deg, rgba(0, 0, 0, 0.03), rgba(0, 0, 0, 0.03)), url('".concat(t.imageUrl,"')"),n.setAttribute("aria-hidden","true");var o=this.utilities.createElement("div"),r=this.utilities.createElement("p");r.className="gcTitle",r.textContent=t.title;var s=this.utilities.createElement("div");s.className="gcCashbackDiv";var l=this.utilities.createElement("p");l.className="gcCashback";var c="".concat(D.iM.currency).concat(this.groceryUtilities.getCashbackString(t.value));if(c===D.iM.currency)return null;l.textContent=this.utilities.replaceValueInKey("gcbCashBack",this.flyoutData.strings.gcbCashBack,c),l.textContent=this.utilities.replaceStringsPlaceholders(l.textContent);var u=this.utilities.createElement("div");u.className="gcInfoIcon",u.slot="hover-anchor",u.setAttribute("aria-label","Info icon"),u.innerHTML=this.commonAssets.getInfoIcon();var d=t.id,h=t.title,p=this.logModule,f=this.pageHandlerModule;var g=this.utilities.createElement("msft-shopping-tooltip");g.className="gcTooltip",g.width="225px",g.caratLeftOffset="145px",g.content=this.utilities.CapitalizeString(t.description.replace(/on (any )*/,"").trim()),g.linkText="Details",g.linkHandler=function(){var t=new na.Z(a.$S.GroceryItemDisclaimer),e="https://msn.com/en-us/foodanddrink/groceries/cashback/".concat(d);p.LogInfoEvent(a.R.ButtonClick,"Navigated to disclaimer for ".concat(h),t),f.RecordAsUserAction(Ca.bS.CLICK_DISCLAIMER_ITEMIZED_CASHBACK),f.NavigateToUrl(e)},g.addEventListener("hover",(function(){var t=new na.Z(a.$S.GroceryItemTooltipViewed);e.pageHandlerModule.RecordAsUserAction(Ca.bS.HOVER_INFO_ICON_ITEMIZED_CASHBACK),e.logModule.LogInfoEvent(a.R.ButtonClick,"Grocery item-level cashback tooltip viewed",t)})),g.append(u),s.append(l),s.append(g);var m=this.utilities.createElement("div");m.className="gcButtonColorful",m.setAttribute("role","presentation");var v=this.utilities.createElement("fluent-button");return v.className="gcButton",v.textContent="Shop and Activate",v.addEventListener("click",(function(){e.cashbackClickHandler(t)})),m.append(v),o.append(r),o.append(s),o.append(m),i.setAttribute("aria-label",r.textContent+" "+l.textContent),i.append(n),i.append(o),i}},{key:"cashbackClickHandler",value:(i=(0,t.Z)(n().mark((function t(e){var i,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new na.Z(a.$S.GroceryItemShopAndActivate),this.pageHandlerModule.RecordAsUserAction(Ca.bS.ACTIVATE_CLICK_ITEMIZED_CASHBACK),this.logModule.LogInfoEvent(a.R.ButtonClick,"Activated cashback for and navigated to ".concat(e.title),i),this.addActivatedCashbackItem(e),yt(this.activatedNotifItemKey,JSON.stringify(e)),(o=new aa.Z).stringValue=JSON.stringify(e),this.pageHandlerModule.SetStorageValue("GroceryCashbackItem",o),t.next=10,W.Sleep(25);case 10:this.pageHandlerModule.NavigateToUrl(e.url);case 11:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"addActivatedCashbackItem",value:function(t){if(t){var e=this.flyoutData.common.domain,i=this.utilities.loadLocalStorageAsJSON(this.activatedCashbackKey),n=t.title,o=t.upc,a=t.value,r=t.limit,s=t.id;(!i[e]||i[e]&&!i[e].items)&&(i[e]={items:{},timestamp:""}),i[e].items[n]={limit:r,offerId:s,upc:o,value:a},i[e].timestamp=new Date,yt(this.activatedCashbackKey,JSON.stringify(i));var l=new aa.Z;l.stringValue=JSON.stringify(i),this.pageHandlerModule.SetStorageValue("GroceryCashbackActivated",l)}}}]),r}(jf.Z),Bg=Zg;function Ug(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return Gg(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Gg(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function Gg(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Vg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var $g=function(e){(0,O.Z)(u,e);var i,r,c=Vg(u);function u(t,e,i){var n;return(0,s.Z)(this,u),n=c.call(this,t,e,i),(0,I.Z)((0,R.Z)(n),"activatedItem",void 0),(0,I.Z)((0,R.Z)(n),"storage",void 0),(0,I.Z)((0,R.Z)(n),"shouldConfirmActivation",void 0),(0,I.Z)((0,R.Z)(n),"shouldConfirmPurchase",void 0),(0,I.Z)((0,R.Z)(n),"activatedItems",void 0),(0,I.Z)((0,R.Z)(n),"redeemedItems",void 0),(0,I.Z)((0,R.Z)(n),"activationTimestamp",void 0),(0,I.Z)((0,R.Z)(n),"groceryOrder",void 0),(0,I.Z)((0,R.Z)(n),"rebatesAmount",void 0),n.storage=n.flyoutData.dataLoader.GetLoadTimeDataValue("storage",void 0),n.shouldConfirmActivation=!1,n.shouldConfirmPurchase=!1,n.activatedItems=[],n.activationTimestamp="",n.rebatesAmount=0,n}return(0,l.Z)(u,[{key:"RenderNotification",value:(r=(0,t.Z)(n().mark((function t(e){var i,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.utilities.applyStyles(e,this.assets.getStyles()),this.shouldConfirmPurchase?(this.shouldConfirmPurchase=!1,i=new o.Z(a.xu.RebatesConfirmationNotification),this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"GroceryConfirmation",i),this.pageHandlerModule.RecordAsUserAction(Ca.bS.ACTIVATE_CLICK_ITEMIZED_CASHBACK),this.createCashbackRefundConfirmation(e)):this.shouldConfirmActivation&&(this.shouldConfirmActivation=!1,r=new o.Z(a.xu.RebatesConfirmationNotification),this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"GroceryActivation",r),this.createItemCashbackActivated(e)),t.abrupt("return",Promise.resolve(null));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"ShouldRenderNotification",value:function(){var t,e;this.activatedItem=this.utilities.loadLocalStorageAsJSON(this.activatedNotifItemKey);var i=this.flyoutData.common.openedWith===D.Te.Auto&&(this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK||this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_PACKAGE_TRACKING),n=this.flyoutData.experimentData.isExperimentActive(xt.H.groceryCashback);return this.shouldConfirmActivation=!!this.activatedItem&&void 0!==(null===(t=this.activatedItem)||void 0===t?void 0:t.title)&&void 0!==(null===(e=this.activatedItem)||void 0===e?void 0:e.imageUrl),this.shouldConfirmPurchase=this.shouldRenderPurchaseConfirmation(),this.shouldConfirmPurchase&&this.sendActivationRequest(),Promise.resolve(i&&n&&(this.shouldConfirmActivation||this.shouldConfirmPurchase))}},{key:"GetNotificationName",value:function(){return D.sM.GROCERY_CASHBACK}},{key:"createItemCashbackActivated",value:function(t){var e=this.utilities.createElement("div");e.className="groceryCashback",e.id="gcActivatedNotif",e.setAttribute("role","alert");var i=this.utilities.createElement("div",{style:"\n            background-image: url('".concat(this.activatedItem.imageUrl,"');\n            border: 1px solid rgba(0, 0, 0, 0.05);\n            background-color: white;\n        ")});i.className="gcImageDiv",i.setAttribute("aria-hidden","true");var n=this.utilities.createElement("div");n.className="gcTextDiv";var o=this.utilities.createElement("p");o.id="pt",o.className="gcTitle",o.textContent=this.activatedItem.title,o.setAttribute("aria-hidden","true");var a=this.utilities.createElement("div");a.className="gcActivatedDiv";var r=this.utilities.createElement("div");r.innerHTML=this.commonAssets.getGreenCheckCircle(),r.style.marginTop="3px",r.setAttribute("role","presentation");var s=this.utilities.createElement("p");s.className="gcCashback",s.textContent=this.flyoutData.strings.gcbActivatedSectionTitle,s.style.marginLeft="4px",r.setAttribute("aria-hidden","true"),a.append(r),a.append(s),n.append(o),n.append(a),e.append(i),e.append(n),e.setAttribute("aria-label",s.textContent+" for "+o.textContent),t.append(e),this.clearingActivationStorage(this.utilities)}},{key:"clearingActivationStorage",value:function(t){try{yt(this.activatedNotifItemKey,JSON.stringify(void 0)),t.setStorageString("GroceryCashbackItem","")}catch(t){}}},{key:"createCashbackRefundConfirmation",value:function(t){var e=this.utilities.createElement("div",{style:"\n            background: linear-gradient(180deg, rgba(16, 142, 220, 0.1) 0%, rgba(78, 136, 74, 0) 100%);\n            padding: 16px;\n            margin-top: -20px;\n            align-items: center;\n            display: flex;\n            flex-direction: column;\n            row-gap: 16px;\n        "});e.setAttribute("role","alert");var i=!!(window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches),n=this.utilities.createElement("img");n.src=i?this.flyoutData.common.resourcesEndpoint+"common/money_sparkles_dark.png":this.flyoutData.common.resourcesEndpoint+"common/money_sparkles.png",n.style.width="64px",n.setAttribute("aria-hidden","true");var o=this.utilities.createElement("span");o.id="groceryRebatesTitle",o.setAttribute("aria-hidden","true");var a=this.utilities.replaceValueInKey("gcbNotifTitle",this.flyoutData.strings.gcbNotifTitle,"".concat(D.iM.currency).concat(this.rebatesAmount.toFixed(2))),r=this.utilities.createElement("span");r.textContent=this.flyoutData.strings.gcbNotifRebates,r.style.color="#0078d4",this.utilities.replaceElementInKey(o,a,r),a=this.utilities.replaceStringsPlaceholders(a);var s=this.utilities.createElement("p");s.id="groceryRebatesSubtitle",s.textContent=this.flyoutData.strings.gcbNotifSubtitle,s.setAttribute("aria-hidden","true"),e.append(n),e.append(o),e.append(s),e.setAttribute("aria-label",o.textContent+" "+s.textContent),t.append(e),this.clearingPurchaseStorage(this.utilities)}},{key:"clearingPurchaseStorage",value:function(t){try{t.clearDomainMappedStringStorage("GroceryOrder",!0),yt(this.activatedNotifItemKey,JSON.stringify(void 0)),yt(this.submitKey,"false"),t.setStorageString("GroceryCashbackItem","")}catch(t){}}},{key:"shouldRenderPurchaseConfirmation",value:function(){var t,e,i,n,o,a,r,s=this.flyoutData.common.domain,l=null===(t=this.flyoutData.dataStoreModule.ApiData)||void 0===t?void 0:t.retailerData;if(!(null==l?void 0:l.IsConfirmationPage(null===(e=this.flyoutData.common)||void 0===e?void 0:e.lastCommittedURL)))return!1;var c=this.utilities.loadLocalStorageAsJSON(this.activatedCashbackKey);try{var u,d,h=c?c[s]:{};this.activatedItems=h&&null!==(u=h.items)&&void 0!==u?u:{},this.activationTimestamp=h&&null!==(d=h.timestamp)&&void 0!==d?d:""}catch(t){return!1}var p=this.utilities.loadLocalStorageAsJSON(this.redeemedCashbackKey);(!p[s]||p[s]&&!p[s].items)&&(p[s]={items:[],timestamp:""});try{var f,g=p?p[s]:{};this.redeemedItems=g&&null!==(f=g.items)&&void 0!==f?f:[]}catch(t){return!1}var m=null!==(i=Object.keys(this.activatedItems))&&void 0!==i?i:[],v=null!==(n=null===(o=this.storage)||void 0===o?void 0:o.GroceryOrder)&&void 0!==n?n:"",y=v?JSON.parse(v):{},C=y?y[s]:{};if(this.groceryOrder=null!==(a=null==C?void 0:C.cartDataStorageInfo)&&void 0!==a?a:{},(null==m?void 0:m.length)>0&&null!==(r=this.groceryOrder)&&void 0!==r&&r.Products){var b,S=Ug(this.groceryOrder.Products);try{for(S.s();!(b=S.n()).done;){var x=b.value;if(m.includes(x.productTitle)){var E,A=this.activatedItems[x.productTitle],T=null!==(E=A.limit)&&void 0!==E?E:1,I=T<x.productQuantity?T:x.productQuantity;this.rebatesAmount+=Number(A.value)*I,this.redeemedItems.includes(x.productTitle)||this.redeemedItems.push(x.productTitle)}}}catch(t){S.e(t)}finally{S.f()}}p[s].items=this.redeemedItems,p[s].timestamp=new Date,yt(this.redeemedCashbackKey,JSON.stringify(p));var D=this.rebatesAmount>0;return D||this.shouldConfirmActivation||this.utilities.clearDomainMappedStringStorage("GroceryOrder"),D}},{key:"sendActivationRequest",value:(i=(0,t.Z)(n().mark((function t(){var e,i,o,a,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("true"!==(e=vt(this.submitKey))&&"processing"!==e){t.next=3;break}return t.abrupt("return");case 3:return yt(this.submitKey,"processing"),t.next=6,this.pageHandlerModule.GetAnid(!0);case 6:return i=t.sent,o=this.createCashbackAPIRequest(i.anid),a={body:JSON.stringify(o),headers:{"Content-Type":"application/json"},method:"POST"},t.next=14,fetch("https://www.bing.com/api/shopping/v1/savings/grocerycashback/activate",a);case 14:return r=t.sent,t.next=17,r.json();case 17:t.sent,yt(this.submitKey,"true");case 20:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"createCashbackAPIRequest",value:function(t){if(!this.groceryOrder||!this.activatedItems)return{};var e,i=Object.keys(this.activatedItems),n=[],o=[],a=Ug(this.groceryOrder.Products);try{for(a.s();!(e=a.n()).done;){var r=e.value,s=r.productTitle,l=i.includes(s)?this.activatedItems[s]:{offerId:"",upc:""},c=l.upc,u=l.offerId,d={count:r.productQuantity,offerId:u,price:r.productPrice,soldBy:r.productSeller,title:s,upc:c};np(c)||np(u)||(n.push(d),o.push(d.offerId))}}catch(t){a.e(t)}finally{a.f()}return{activateOffersBody:{activationDate:this.groceryUtilities.getQuotientDate(this.activationTimestamp),offers:o},anid:t,estimatedShippingDate:this.groceryOrder.ShipmentDate,estimatedTax:this.groceryOrder.CartEstimatedTax,grandTotal:this.groceryOrder.OrderTotal,items:n,placementDate:this.groceryUtilities.getQuotientDate(),totalBeforeTax:this.groceryOrder.CartPreTax}}}]),u}(Bg),Wg=$g,zg=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n        html {\n            overflow: hidden;\n        }\n        #divContentWrapper {\n            width: auto;\n            height: auto;\n            display: inline-block;\n        }\n        body {\n            margin: 0px;\n        }\n        fluent-design-system-provider {\n            width: auto;\n            height: 36px;\n            margin: 0px;\n            display: flex;\n        }\n        .txtLarge {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 24px;\n            line-height: 28px;\n            margin: 0px;\n        }\n        .txtMedium {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 16px;\n            line-height: 20px;\n            margin: 0px;\n        }\n        .txtSmall {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 14px;\n            line-height: 16px;\n            margin: 0px;\n        }\n        ::part(header-fixed) {\n            display: none;\n        }\n        ::part(header) {\n            margin: 0px!important;\n        }\n        ::part(sections) {\n            margin-top: 0px!important;\n        }\n        @media (prefers-color-scheme: dark) {\n            .txtSmall {\n                color: #FFFFFF;\n            }\n            .txtMedium {\n                color: #FFFFFF;\n            }\n            .txtLarge {\n                color: #FFFFFF;\n            }\n        }\n    }"}}]),t}(),Kg=function(){function t(e,i,n,o){(0,s.Z)(this,t),(0,I.Z)(this,"utilities",void 0),(0,I.Z)(this,"commonAssets",void 0),(0,I.Z)(this,"microAssets",void 0),(0,I.Z)(this,"stateManagement",void 0),(0,I.Z)(this,"pageHandlerModule",void 0),(0,I.Z)(this,"logModule",void 0),(0,I.Z)(this,"flyoutData",void 0),(0,I.Z)(this,"microNotificationID","divMicroNotification"),this.utilities=n.viewModulesUtilities,this.stateManagement=e,this.microAssets=new zg,this.commonAssets=o,this.pageHandlerModule=n.pageHandlerModule,this.logModule=n.logModule,this.flyoutData=i}return(0,l.Z)(t,[{key:"PostProcessing",value:function(t,e,i){}},{key:"RenderNotification",value:function(t){var e=this,i=this.utilities.createElement("DIV");i.id=this.microNotificationID,this.utilities.applyStyles(i,this.microAssets.getStyles());var n=this.utilities.createElement("BUTTON",{style:"display: flex;\n        flex-direction: row; width: auto; background: transparent; cursor: pointer; border-width: 0px;"});n.setAttribute("describedBy","txtMicroNotificationTitle"),n.style.minHeight="36px";var o=this.addHeaderIcon();o.style.placeSelf="center",o.style.display="flex",o.style.alignItems="center",o.style.marginRight="8px",o.setAttribute("aria-hidden","true");var r=this.utilities.createElement("P");r.textContent=this.flyoutData.common.microNotificationTitle,r.id="txtMicroNotificationTitle",r.className="txtSmall",r.style.textAlign="left",r.style.width="auto",r.style.placeSelf="center",this.flyoutData.common.currentTheme===D.Q2.Dark?r.style.color="#FFFFFF":r.style.color="#4179FC",r.style.fontWeight="500",r.style.whiteSpace="nowrap",n.appendChild(o),n.appendChild(r);var s=document.querySelector("html");return s&&(s.style.overflow="hidden"),i.appendChild(n),n.addEventListener("click",(function(){Tt.SO.queueUpdate((function(){e.pageHandlerModule.CancelAutoDismiss(),e.pageHandlerModule.RecordAsUserAction(Ca.bS.OPEN_FLYOUT_MICRO_NOTIFICATION);var t=new na.Z(a.$S.MicroNotificationClick);e.logModule.LogInfoEvent(a.R.ButtonClick,"Micro notification was clicked",t,ya.g.CouponImpressionId),e.stateManagement.setState(Ia.IY.microNotificationClicked,!0),null==i||i.remove();var n=new CustomEvent(Ia.e1.onNotificationClick);e.stateManagement.dispatchEvent(n)}))})),t.appendChild(i),Promise.resolve(null)}},{key:"ShouldRenderNotification",value:function(){var t;if(!this.stateManagement.getState(Ia.IY.microNotificationClicked))return Promise.resolve(null!==(t=this.flyoutData.common.openedWith===D.Te.Auto&&void 0!==this.flyoutData.common.microNotificationTitle&&this.flyoutData.experimentData.isExperimentActive(xt.H.microNotification)&&this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_NOTIFICATION)&&void 0!==t&&t);var e=this.flyoutData.common.shopping.querySelector("#".concat(this.microNotificationID));return e&&e.remove(),Promise.resolve(!1)}},{key:"GetNotificationName",value:function(){return D.sM.MICRONOTIFICATION}},{key:"addHeaderIcon",value:function(){var t=document.createElement("DIV");return t.innerHTML=this.commonAssets.getHeaderIcon(),t}}]),t}(),Yg=Kg,jg=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"#txtPCProductTitle {\n            margin-top: 5px;\n            overflow: hidden;\n            overflow-wrap: break-word;\n            display: -webkit-box;\n            -webkit-line-clamp: 2;\n            -webkit-box-orient: vertical;\n        }\n        #imgPCProductImage {\n            max-width: 100px;\n            height: auto;\n            max-height: 100px;\n            box-sizing: border-box;\n            place-self: center;\n            object-fit: cover;\n        }\n        #divDisclaimer {\n            display: flex;\n            flex-direction: row;\n            background-color: #F7F7F7;\n            height: 48px;\n            width: 100%;\n            margin-top: 3px;\n        }\n        .disclaimer {\n            display: flex;\n            flex-direction: row;\n        }\n        .disclaimerIcon {\n            margin: 11px 9px 11px 12px;\n        }\n        .disclaimerIconFlyout {\n            margin: 9px 9px 0 0;\n        }\n        .disclaimerTextFlyout {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 10px;\n            color: #7A7A7A;\n            line-height: 14px;\n            margin: 10px 2px 3px;\n            width: 272px;\n            text-align: left;\n        }\n        .disclaimerText {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 10px;\n            color: #7A7A7A;\n            line-height: 14px;\n            margin:10px 59px 10px 2px;\n            text-align: left;\n        }"}},{key:"getSmallerNotificationCssStyles",value:function(){return"\n        #divContentWrapper {\n            width: 268px;\n        }\n        .actionsButtonRefresh {\n            min-width: 249px;\n            height: 36px;\n            font-size: 14px;\n        }\n        "}}]),t}(),Xg=function(){function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"BannerExperimentActive",!1),this.BannerExperimentActive=e.isPCBannerUXExperimentActive()}return(0,l.Z)(t,[{key:"UpdateTextOnLowestPriceTileBadge",value:function(){return this.BannerExperimentActive}}]),t}();function qg(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return Jg(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Jg(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function Jg(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Qg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var tm=function(e){(0,O.Z)(c,e);var i,r=Qg(c);function c(t,e,i,n){var o;return(0,s.Z)(this,c),o=r.call(this),(0,I.Z)((0,R.Z)(o),"assets",void 0),(0,I.Z)((0,R.Z)(o),"logModule",void 0),(0,I.Z)((0,R.Z)(o),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(o),"stateManagement",void 0),(0,I.Z)((0,R.Z)(o),"flyoutData",void 0),(0,I.Z)((0,R.Z)(o),"utilities",void 0),(0,I.Z)((0,R.Z)(o),"visibilityRequest",[]),(0,I.Z)((0,R.Z)(o),"pcModuleUXConfig",void 0),(0,I.Z)((0,R.Z)(o),"sectionId","priceComparisonSection"),(0,I.Z)((0,R.Z)(o),"loadingUXId","divPCLoadingStateContainer"),(0,I.Z)((0,R.Z)(o),"commonAssets",void 0),o.logModule=i.logModule,o.pageHandlerModule=i.pageHandlerModule,o.stateManagement=t,o.flyoutData=e,o.utilities=i.viewModulesUtilities,o.assets=new jg,o.pcModuleUXConfig=new Xg(o.flyoutData.experimentData),o.commonAssets=n,o}return(0,l.Z)(c,[{key:"GetModuleName",value:function(){return D.GX.PRICECOMPARISON}},{key:"ShouldRenderModule",value:function(){var t,e,i=this,n=this.flyoutData.dataStoreModule.PriceComparisonData,o=null!==(t=n&&n.CompetingPrices&&n.CompetingPrices.length>0)&&void 0!==t&&t;if((null==n||null===(e=n.segment)||void 0===e?void 0:e.toLowerCase())===D.VG.AUTOS)return Promise.resolve(!1);var a=!1;try{a="3"===new URL(this.flyoutData.common.lastCommittedURL).searchParams.get("bing_shopping_campaign_guid")}catch(t){}var r="false";this.flyoutData.common.isPane&&(r=vt("isPDP"));var s=(this.flyoutData.common.openedWith&&this.flyoutData.common.openedWith===D.Te.Auto&&this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_BING_CAMPAIGN&&a||"true"===r)&&!o;return this.stateManagement.addEventListener(Ia.e1.pcCreateHeader,this.populateMainHeader.bind(this)),this.stateManagement.addEventListener(Ia.e1.PDPUpdate,(function(t){var e,n,o=new CustomEvent(Ia.e1.PDPRemoved,{detail:{moduleName:i.GetModuleName()}});if(t&&t.detail&&t.detail.data&&t.detail.data.comparableOffers&&t.detail.data.comparableOffers.length>0&&t.detail.data.price&&(null===(e=i.flyoutData.dataStoreModule.PriceComparisonData)||void 0===e||!e.CompetingPrices)){var a=t.detail.data;a?i.updatePCModule(a):i.stateManagement.dispatchEvent(o)}else null!==(n=i.flyoutData.dataStoreModule.PriceComparisonData)&&void 0!==n&&n.CompetingPrices||i.stateManagement.dispatchEvent(o)})),s?Promise.resolve(s):Promise.resolve(o)}},{key:"renderModule",value:function(){var t,e=this.flyoutData.dataStoreModule.PriceComparisonData;if(null==e||!e.CompetingPrices){var i=document.createElement("msft-edge-shopping-section");i.id=this.sectionId,i.title=this.flyoutData.strings.pcPriceSectionTitle,this.utilities.createPDPLoadingStateUX(i,this.loadingUXId,this.sectionId,this.stateManagement);var n=this.CreateModule(i,D.H7.PRICECOMPARISON,D.GX.PRICECOMPARISON,D.$k.CONTEXTUAL);return Promise.resolve(n)}if(0===(null==e||null===(t=e.CompetingPrices)||void 0===t?void 0:t.length))return Promise.resolve(null);if(e&&e.CompetingPrices.length>0){var r,s;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var l=this.flyoutData.common.shopping.querySelector("#".concat(this.sectionId));l?s=l:(s=document.createElement("msft-edge-shopping-section")).id=this.sectionId,this.populatePriceList(s,!1,!1);var c=this.flyoutData.strings.pcPriceSectionTitle;this.utilities.createCommonListStructure(s,c,null===(r=this.flyoutData.dataStoreModule.PriceComparisonData)||void 0===r?void 0:r.CompetingPrices,this.GetModuleName(),(function(t){return D.CS.PRICECOMPARISON}),this.populatePriceList.bind(this));var u=this.CreateModule(s,D.H7.PRICECOMPARISON,D.GX.PRICECOMPARISON,D.$k.CONTEXTUAL),d=e.lowestPrice,h=e.Price-d;if(d>0&&h>0){var p=new o.Z(a.xu.YouCanSave,e.CompetingPrices.length,parseFloat(h.toFixed(2)));this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"Price comparison - user can save money",p)}else{var f=new o.Z(a.xu.BestPrice,e.CompetingPrices.length);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"Price comparison - user has the best price",f)}return this.pcModuleUXConfig.BannerExperimentActive&&this.disableNotificationHeader(),Promise.resolve(u)}return Promise.resolve(null)}},{key:"populateMainHeader",value:function(){var t=this.flyoutData.dataStoreModule.PriceComparisonData,e=this.flyoutData.common.shopping;if(t&&t.CompetingPrices&&t.CompetingPrices.length>0){var i,n=t.lowestPrice,o=t.Price-n,a="$";t.CompetingPrices[0].CurrencySymbol&&(a=t.CompetingPrices[0].CurrencySymbol);var r,s=this.utilities.createElement("DIV",{style:"display: grid; grid-template-columns: 40% auto;"}),l=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: column; margin-top: 10px;"}),c=this.utilities.createElement("H2");if(c.className="txtLarge",c.style.fontWeight="500",n>0&&o>0&&this.isAboveThreshold(t.Price,n)){r=this.utilities.createElement("SPAN");var u=this.utilities.formatPrice(o);r.textContent=a+u,r.className="txtGradient",o>=1e5?(r.style.fontSize="26px",r.style.lineHeight="36px"):(r.style.fontSize="48px",r.style.lineHeight="56px"),r.style.fontWeight="600",this.utilities.populateSingleChildHtml(c,this.flyoutData.strings.savingsHeader,r),l.style.marginTop="0px",s.style.gridTemplateColumns="auto auto",s.style.alignItems="center",s.style.gridGap="8px",c.style.fontSize="26px",c.style.fontWeight="600"}else{var d=this.utilities.createElement("SPAN",{style:"font-size: 26px; line-height: 36px; font-weight: 600; display: inline-block;"});d.className="txtGradient",d.textContent=this.flyoutData.strings.pcBestPriceTitle.toLowerCase(),this.utilities.populateSingleChildHtml(c,this.flyoutData.strings.pcBestPriceRefreshHeader,d)}if(l.appendChild(c),t.currentImageUrl&&""!==t.currentImageUrl){var h=this.utilities.createElement("IMG");h.id="imgPCProductImage",this.utilities.addImageSrc(h,this.flyoutData.common.urlPrefix+t.currentImageUrl),h.setAttribute("aria-label",t.currentProductTitle);var p=!0;l.style.textAlign="left",h.addEventListener("error",(function(){p=!1,h.remove(),s.style.gridTemplateColumns="auto",l.style.textAlign="center",r&&c&&(c.style.display="flex",c.style.alignItems="center",c.style.columnGap="3px",c.style.placeSelf="center",r.style.fontSize="40px",r.style.lineHeight="47px")})),p?(h.style.borderRadius="8px",s.appendChild(h),h.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1}))):(s.style.gridTemplateColumns="auto",l.style.textAlign="center",r&&c&&(c.style.display="flex",c.style.alignItems="center",c.style.columnGap="3px",c.style.placeSelf="center",r.style.fontSize="40px",r.style.lineHeight="47px"))}else s.style.gridTemplateColumns="auto",l.style.textAlign="center",r&&c&&(c.style.display="flex",c.style.alignItems="center",c.style.columnGap="3px",r.style.fontSize="40px",r.style.lineHeight="47px");if(t.currentProductTitle&&""!==t.currentProductTitle&&null!==(i=this.flyoutData.dataStoreModule.RatingsAndReviewsData)&&void 0!==i&&i.canCreateInlineRating){var f,g=this.utilities.createElement("P");if(g.className="txtSmall",g.textContent=t.currentProductTitle,g.id="txtPCProductTitle",g.title=t.currentProductTitle,l.appendChild(g),null!==(f=this.flyoutData.dataStoreModule.RatingsAndReviewsData)&&void 0!==f&&f.canCreateInlineRating){var m=new CustomEvent(Ia.e1.CreateInlineRating,{detail:{callback:function(t){t&&l&&(l.appendChild(t),l.style.marginTop="1px",g.style.marginTop="8px",t.style.marginTop="4px")},moduleName:D.GX.PRICECOMPARISON}});this.stateManagement.dispatchEvent(m)}}s.appendChild(l);var v=e.querySelector("#".concat(this.sectionId));this.flyoutData.common.isPane&&v?(s.style.marginBottom="18px",v.prepend(s),v.slot="header-content"):(s.slot="header-content",e.appendChild(s))}}},{key:"PostProcessing",value:function(t,e,i){var n=this;0===e?this.visibilityRequest.length>0&&this.pageHandlerModule.SendBingVisibilityRequest(this.visibilityRequest):Tt.SO.queueUpdate((function(){var t,e=null===(t=i.shadowRoot)||void 0===t?void 0:t.querySelector("fluent-accordion-item");if(e&&e.classList.contains("expanded"))n.visibilityRequest.length>0&&n.pageHandlerModule.SendBingVisibilityRequest(n.visibilityRequest);else if(e){i.addEventListener("click",(function t(){i&&(e&&(e.classList.contains("expanded")||o.SendBingVisibilityRequest(a)),i.removeEventListener("click",t))}));var o=n.pageHandlerModule,a=n.visibilityRequest;if(!n.flyoutData.common.isPane){var r,s=null===(r=e.shadowRoot)||void 0===r?void 0:r.querySelector(".region");s&&(s.style.marginBottom="0px")}}}))}},{key:"populatePriceList",value:function(t,e,i){var n,o=this.flyoutData.dataStoreModule.PriceComparisonData,r=null==o?void 0:o.CompetingPrices;if(r){r.length>0&&(n=r.length);var s=0;if(e){var l=new na.Z(a.$S.SeeMoreRetailers);this.pageHandlerModule.RecordAsUserAction(Ca.bS.VIEW_MORE_RETAILERS),this.logModule.LogInfoEvent(a.R.ButtonClick,"",l),s=D.CS.PRICECOMPARISON}else n>D.CS.PRICECOMPARISON&&(n=D.CS.PRICECOMPARISON);for(var c=null==o?void 0:o.lowestPrice,u=this.stateManagement.getState(Ia.IY.pcLowestPriceImpression),d=s;d<n;d++)this.createNewPriceComparisonTile(t,r[d],c,s,e,i,d,null==o?void 0:o.Price,u);this.visibilityRequest.length>0&&e&&this.pageHandlerModule.SendBingVisibilityRequest(this.visibilityRequest)}}},{key:"navigateToRetailer",value:function(t,e){var i=new na.Z(a.$S.NavigatedToAnotherRetailer);this.pageHandlerModule.RecordAsUserAction(Ca.bS.NAVIGATE_TO_RETAILER),this.logModule.LogInfoEvent(a.R.ButtonClick,"Navigation to another retailer from price comparison",i),this.flyoutData.dataLoader.IsServerData()||this.flyoutData.common.currentDevice===D.AS.Mobile?this.pageHandlerModule.NavigateToAlternateRetailerWithDisposition(t.Url):""!==t.PriceId?this.pageHandlerModule.NavigateToAlternateRetailerWithDisposition(t.PriceId,e):this.pageHandlerModule.NavigateToAlternateRetailerWithDisposition(t.ImpressionToken,e)}},{key:"updatePCModule",value:(i=(0,t.Z)(n().mark((function t(e){var i,o,a,r,s,l=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.flyoutData.dataStoreModule.PriceComparisonData=new vr(e.comparableOffers,e.price,e.extracted_entity,this.flyoutData.common.openedWith,this.flyoutData.common.popupOrigination),!(i=this.flyoutData.common.shopping.querySelector("#".concat(this.loadingUXId)))){t.next=10;break}return t.next=6,this.renderModule();case 6:(o=t.sent)&&o.element?(i.remove(),this.flyoutData.common.isPane&&(o.element.expanded=!0),a=D.H7.PRICECOMPARISON,this.stateManagement.getState(Ia.IY.topModuleName)===D.GX.PRICECOMPARISON&&(this.populateMainHeader(),a=0),Tt.SO.queueUpdate((function(){l.utilities.styleModules(o,a)})),this.PostProcessing(o.name,a,o.element),this.utilities.sendFlyoutUpdateEvent(this.stateManagement,o)):null===(r=i.parentElement)||void 0===r||r.remove(),t.next=14;break;case 10:return t.next=12,this.renderModule();case 12:(s=t.sent)&&s.element&&(this.PostProcessing(s.name,s.priority,s.element),this.stateManagement.getState(Ia.IY.modulesRendered)?this.appendPCUpdateElement(s):this.stateManagement.addEventListener(Ia.e1.ModulesRendered,(function(){l.appendPCUpdateElement(s)})),this.utilities.sendFlyoutUpdateEvent(this.stateManagement,s));case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0);case 19:case"end":return t.stop()}}),t,this,[[0,16]])}))),function(t){return i.apply(this,arguments)})},{key:"appendPCUpdateElement",value:function(t){var e=this;this.utilities.appendNewModuleToFlyout(t),(this.flyoutData.common.isPane||this.flyoutData.dataStoreModule.PriceComparisonData&&-1!==this.flyoutData.dataStoreModule.PriceComparisonData.lowestPrice&&this.flyoutData.common.openedWith!==D.Te.Auto)&&(t.element.expanded=!0),Tt.SO.queueUpdate((function(){e.utilities.sendCTRLog(t,t.priority,e.stateManagement.getState(Ia.IY.isAutoApplyVisible),e.stateManagement.getState(Ia.IY.topModuleName),ya.g.EdgeImpressionId);var i=new CustomEvent(Ia.e1.ModulesRendered);e.stateManagement.dispatchEvent(i)}))}},{key:"createNewPriceComparisonTile",value:function(t,e,i,n,o,a,r,s,l){var c=this.utilities.createElement("msft-product-card"),u=e.IntendedPrice;if(u){var d=this.utilities.formatPrice(u);c.price=e.CurrencySymbol+d}if(s&&u){var h=s-u;if(h&&h>0&&this.isAboveThreshold(s,u)){var p=this.utilities.formatPrice(h);c.savings=this.utilities.replaceValueInKey("pcVisitedBtn",this.flyoutData.strings.commonSave,"".concat(e.CurrencySymbol).concat(p))}u===i&&(c.lowest=this.flyoutData.strings.pcLowestUpdated.toUpperCase())}c.retailer=e.SellerName,this.createPCLinkImages(c,e,!1,l),this.managePCLinkEvents(c,e),t.appendChild(c),r===n&&o&&a&&this.flyoutData.common.currentDevice===D.AS.Desktop&&c&&c.focus()}},{key:"isAboveThreshold",value:function(t,e){var i=t-e;return i>0&&i>=Math.ceil(.05*t)}},{key:"disableNotificationHeader",value:function(){var t=this;Tt.SO.queueUpdate((function(){var e=t.flyoutData.common.shopping;if(e.shadowRoot){var i=e.shadowRoot.querySelector(".header");i&&(i.style.display="none")}}))}},{key:"managePCLinkEvents",value:function(t,e){var i=this;t.addEventListener("click",(function(){i.navigateToRetailer(e,lg.$.NEW_FOREGROUND_TAB)})),t.addEventListener("mousedown",(function(t){if(1===t.button)i.navigateToRetailer(e,lg.$.NEW_FOREGROUND_TAB)}))}},{key:"createPCLinkImages",value:function(t,e,i,n){var o=this,a=document.createElement("IMG");this.utilities.addFavIconSrc(a,t,e.Domain),a.style.width="16px",a.style.height="16px",a.style.marginRight="8px",a.style.verticalAlign="text-bottom",a.style.minWidth="0px";var r=this.utilities.createElement("IMG");if(e.ProductImageOriginalUrl&&""!==e.ProductImageOriginalUrl?(""===this.flyoutData.common.urlPrefix&&this.utilities.addImageSrc(r,e.ProductImageOriginalUrl.replace("edge://image?","")),r.style.maxWidth="66px",r.style.maxHeight="66px",r.style.borderRadius="8px"):e.ProductImageUrl&&""!==e.ProductImageUrl?this.utilities.addImageSrc(r,e.ProductImageUrl):this.utilities.addImageSrc(r,this.commonAssets.getDefaultProductImage()),r.setAttribute("aria-hidden","true"),r.slot="image",r.addEventListener("error",(function(){o.utilities.addImageSrc(r,o.commonAssets.getDefaultProductImage())})),a.style.width="16px",a.style.height="16px",a.style.marginRight="calc(var(--design-unit) * 2px)",t.appendChild(r),""!==e.ImpressionToken&&this.visibilityRequest&&!i&&n!==e.ImpressionToken&&this.visibilityRequest.push(e.ImpressionToken),e.BillingType===D.YO.Paid){t.isAd=!0;var s=this.utilities.createElement("IMG");this.utilities.addImageSrc(s,this.flyoutData.common.resourcesEndpoint+"priceComparison/adSlug.png"),s.slot="adslug",s.style.marginLeft="8px",s.setAttribute("aria-label","Ad"),t.appendChild(s)}this.addPCAnnotations(t,e.Extensions)}},{key:"addPCAnnotations",value:function(t,e){if(e&&e.length>0){var i,n,o=qg(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.ExtensionText===D.vu.Used||a.ExtensionText===D.vu.New||a.ExtensionText===D.vu.Refurbished){var r=this.utilities.createElement("msft-attribution");r.textContent=a.ExtensionText,r.slot="start",t.appendChild(r)}else i||(i=a)}}catch(t){o.e(t)}finally{o.f()}if(i&&i.ExtensionText){var s=this.utilities.createElement("msft-attribution");s.textContent=i.ExtensionText,this.flyoutData.common.currentTheme===D.Q2.Dark&&(s.style.color="#FFFFFF");var l=this.utilities.createElement("IMG"),c=!1;i.ExtensionText.toLowerCase().includes(D.vu.Shipping)&&(this.utilities.addImageSrc(l,this.flyoutData.common.resourcesEndpoint+"priceComparison/shippingAnnotation.svg"),c=!0),c&&(l.slot="image",s.appendChild(l)),s.slot="end",t.appendChild(s)}}}}]),c}(jf.Z),em=tm;function im(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return nm(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return nm(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function nm(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function om(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var am=function(t){(0,O.Z)(i,t);var e=om(i);function i(t,n,o,a){var r;return(0,s.Z)(this,i),(r=e.call(this,t,n,o,a)).flyoutData=n,r.utilities=o.viewModulesUtilities,r.logModule=o.logModule,r.pageHandlerModule=o.pageHandlerModule,r.stateManagement=t,r.assets=new jg,r}return(0,l.Z)(i,[{key:"RenderNotification",value:function(t){var e=this.flyoutData.dataStoreModule.PriceComparisonData;if(e&&e.Price&&e.CompetingPrices&&e.CompetingPrices.length>0){var i,n,r=e.lowestPrice,s=im(e.CompetingPrices);try{for(s.s();!(n=s.n()).done;){var l=n.value;if(r===l.IntendedPrice){i=l;break}}}catch(t){s.e(t)}finally{s.f()}r=this.flyoutData.dataLoader.GetLoadTimeDataValue("price",void 0);var c,u=im(e.CompetingPrices);try{for(u.s();!(c=u.n()).done;){var d=c.value;if(d.ShouldOnTop){var h=d.IntendedPrice;h&&h<r&&(r=h,i=d)}}}catch(t){u.e(t)}finally{u.f()}var p=r;if(i&&p){if(document.querySelector("#divContentWrapper")){var f=document.querySelector("fluent-design-system-provider");f&&(f.style.width="auto")}var g=e.Price-p;if(g>0){var m,v=this.utilities.createElement("DIV",{style:"width: 100%;"});m=this.utilities.createElement("DIV",{style:"display: grid; grid-template-columns: 60% 50%; margin-left: 10px; margin-right: 10px;"});var y,C,b=this.utilities.formatPrice(g),S=this.createNotificationTextContent(b,i,p,e.Price);y=this.utilities.createElement("DIV",{style:"display: flex; justify-content: center; width: calc(100% - 20px); height: 100%;"}),C=this.utilities.createElement("IMG",{style:"place-self: center; width: auto; max-width: 100%; height: auto; max-height: 170px;"});var x=i.ProductImageUrl.replace("w=66&h=66","");""===this.flyoutData.common.urlPrefix&&(x=x.replace("edge://image?","")),C.src=x,C.setAttribute("aria-label",i.Description),y.appendChild(C),m.appendChild(S),m.appendChild(y);var E=this.createNotificationFooter(v,i,b);v.appendChild(m),v.slot="header-content",t.appendChild(E),""!==i.ImpressionToken&&this.visibilityRequest&&(this.stateManagement.setState(Ia.IY.pcLowestPriceImpression,i.ImpressionToken),this.visibilityRequest.push(i.ImpressionToken),this.pageHandlerModule.SendBingVisibilityRequest(this.visibilityRequest)),t.appendChild(v);var A=new o.Z(a.xu.YouCanSave,e.CompetingPrices.length,parseFloat(g.toFixed(2)));this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"Price comparison Notificatoin - user can save money",A)}}}return this.utilities.shouldRenderSmallNotification()&&(this.utilities.dismissNotificationTimeOut(),this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getSmallerNotificationCssStyles())),Promise.resolve(null)}},{key:"ShouldRenderNotification",value:function(){var t,e=this.flyoutData.dataStoreModule.PriceComparisonData;return(null==e||null===(t=e.segment)||void 0===t?void 0:t.toLowerCase())===D.VG.AUTOS?Promise.resolve(!1):e&&e.shoudlRenderPriceComparisonNotification&&!this.flyoutData.common.seeInfoFromPCNotification?Promise.resolve(!0):Promise.resolve(!1)}},{key:"GetNotificationName",value:function(){return D.sM.PRICECOMPARISON}},{key:"createNotificationFooter",value:function(t,e,i){var n,o=this;(n=this.utilities.createElement("DIV",{style:"width: 100%; display: grid; grid-template-columns: 60% auto; grid-gap: 10px; margin-top: 22px;"})).id="divNotificationActions",n.slot="actions";var a=this.utilities.createBaseActionButton();a.style.marginTop="0px",this.utilities.shouldRenderSmallNotification()||(a.style.minWidth="unset"),a.textContent=this.flyoutData.strings.pcNotificationVisitItem;var r=this.flyoutData.common.currentDevice;a.addEventListener("click",(function(){r===D.AS.Desktop&&o.navigateToRetailer(e,lg.$.NEW_FOREGROUND_TAB)})),n.appendChild(a);var s=this.utilities.createElement("fluent-anchor");return s.appearance="lightweight",s.href="#",s.style.placeSelf="center",s.textContent=this.flyoutData.strings.pcNotificationSeeMoreInfo,s.addEventListener("click",(function(){o.handleSeeMoreInfoNotificationClick(t)})),this.utilities.shouldRenderSmallNotification()||n.appendChild(s),n}},{key:"handleSeeMoreInfoNotificationClick",value:function(t){var e=this,i=!1;if(this.flyoutData.common.isPaneEnabled&&(i=this.pageHandlerModule.OpenPane()),!i){t.remove();var n=this.flyoutData.common.shopping.querySelector("#divNotificationActions");n&&n.remove();var o=this.flyoutData.common.shopping.querySelector("#divDisclaimer");o&&o.remove();var a=document.querySelectorAll("msft-edge-shopping");if(a&&a.length>0){var r,s=im(a);try{for(s.s();!(r=s.n()).done;){r.value.remove()}}catch(t){s.e(t)}finally{s.f()}}this.flyoutData.common.seeInfoFromPCNotification=!0,Tt.SO.queueUpdate((function(){e.utilities.trapFlyoutFocusMac();var t=document.querySelector("#divContentWrapper"),i=new CustomEvent(Ia.e1.CreateModules,{detail:{flyoutWrapper:t}});e.stateManagement.dispatchEvent(i)}))}}},{key:"createNotificationTextContent",value:function(t,e,i,n){var o=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: column; grid-gap: 14px;"}),a=this.utilities.createElement("H2",{style:"text-align: left; font-weight: 600;"});a.style.fontSize="26px",a.style.lineHeight="36px";var r,s,l=this.utilities.createElement("SPAN",{style:"display: inline-block; font-weight: 600; font-size: 26px; line-height: 36px;"});if(l.className="txtGradient",l.textContent="".concat(e.CurrencySymbol).concat(t),this.utilities.replaceElementInKey(a,this.utilities.shouldRenderSmallNotification()?this.flyoutData.strings.pcNotificationTitleSmall:this.flyoutData.strings.pcNotificationTitleRefresh,l),a.className="txtLarge",o.appendChild(a),!this.utilities.shouldRenderSmallNotification()){var c=this.utilities.createElement("P",{style:"text-align: left; overflow: hidden; overflow-wrap: break-word; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;"});c.className="txtMedium",c.textContent=e.Description,c.title=e.Description,o.appendChild(c)}r=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: column;"}),s=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: row;"});var u=this.utilities.createElement("P"),d=this.utilities.formatPrice(i);if(u.textContent="".concat(e.CurrencySymbol).concat(d),u.className="txtLarge",u.style.fontWeight="500",u.setAttribute("aria-label",this.utilities.replaceValueInKey("pcLowestPriceAria",this.flyoutData.strings.pcLowestPriceAria,"".concat(e.CurrencySymbol).concat(d),e.SellerName)),s.appendChild(u),e.SellerName){var h;h=this.utilities.createElement("DIV",{style:"display: grid; grid-template-columns: auto auto 1fr; align-items: center;"});var p=this.utilities.createElement("P",{style:"margin-left: 6px; display: -webkit-box;\n                        text-align: initial;\n                        -webkit-line-clamp: 1;\n                        -webkit-box-orient: vertical;\n                        overflow: hidden;"});p.textContent=e.SellerName,p.className="txtSmall",p.title=e.SellerName;var f=this.utilities.createElement("IMG");if(this.utilities.addFavIconSrc(f,h,e.Domain),h.appendChild(p),e.BillingType===D.YO.Paid){var g=this.utilities.createElement("IMG");g.src=this.flyoutData.common.resourcesEndpoint+"priceComparison/adSlug.png",g.style.marginLeft="8px",g.style.width="22px",g.style.height="14px",g.setAttribute("aria-label","Ad"),h.appendChild(g)}r.appendChild(h)}var m=this.utilities.formatPrice(n),v=this.utilities.createElement("P",{style:"align-self: flex-end; margin-left: 9px;"});return v.className="txtMedium",v.textContent="".concat(e.CurrencySymbol).concat(m),v.setAttribute("aria-label",this.utilities.replaceValueInKey("pcCurrentPriceAria",this.flyoutData.strings.pcCurrentPriceAria,"".concat(e.CurrencySymbol).concat(m))),v.style.textDecoration="line-through",s.appendChild(v),this.utilities.shouldRenderSmallNotification()||r.appendChild(s),o.appendChild(r),o}}]),i}(em);function rm(t){return function(t){if(Array.isArray(t))return ra(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||sa(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sm(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lm(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cm(t){let e,i,n;function o(t,n,o=0,a=t.length){if(o<a){if(0!==e(n,n))return a;do{const e=o+a>>>1;i(t[e],n)<0?o=e+1:a=e}while(o<a)}return o}return 2!==t.length?(e=sm,i=(e,i)=>sm(t(e),i),n=(e,i)=>t(e)-i):(e=t===sm||t===lm?t:um,i=t,n=t),{left:o,center:function(t,e,i=0,a=t.length){const r=o(t,e,i,a-1);return r>i&&n(t[r-1],e)>-n(t[r],e)?r-1:r},right:function(t,n,o=0,a=t.length){if(o<a){if(0!==e(n,n))return a;do{const e=o+a>>>1;i(t[e],n)<=0?o=e+1:a=e}while(o<a)}return o}}}function um(){return 0}function dm(t,e){let i;if(void 0===e)for(const e of t)null!=e&&(i<e||void 0===i&&e>=e)&&(i=e);else{let n=-1;for(let o of t)null!=(o=e(o,++n,t))&&(i<o||void 0===i&&o>=o)&&(i=o)}return i}function hm(t,e){let i;if(void 0===e)for(const e of t)null!=e&&(i>e||void 0===i&&e>=e)&&(i=e);else{let n=-1;for(let o of t)null!=(o=e(o,++n,t))&&(i>o||void 0===i&&o>=o)&&(i=o)}return i}function pm(){}function fm(t){return null==t?pm:function(){return this.querySelector(t)}}function gm(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function mm(){return[]}function vm(t){return null==t?mm:function(){return this.querySelectorAll(t)}}function ym(t){return function(){return this.matches(t)}}function Cm(t){return function(e){return e.matches(t)}}var bm=Array.prototype.find;function Sm(){return this.firstElementChild}var xm=Array.prototype.filter;function Em(){return Array.from(this.children)}function Am(t){return new Array(t.length)}function Tm(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Im(t){return function(){return t}}function Dm(t,e,i,n,o,a){for(var r,s=0,l=e.length,c=a.length;s<c;++s)(r=e[s])?(r.__data__=a[s],n[s]=r):i[s]=new Tm(t,a[s]);for(;s<l;++s)(r=e[s])&&(o[s]=r)}function km(t,e,i,n,o,a,r){var s,l,c,u=new Map,d=e.length,h=a.length,p=new Array(d);for(s=0;s<d;++s)(l=e[s])&&(p[s]=c=r.call(l,l.__data__,s,e)+"",u.has(c)?o[s]=l:u.set(c,l));for(s=0;s<h;++s)c=r.call(t,a[s],s,a)+"",(l=u.get(c))?(n[s]=l,l.__data__=a[s],u.delete(c)):i[s]=new Tm(t,a[s]);for(s=0;s<d;++s)(l=e[s])&&u.get(p[s])===l&&(o[s]=l)}function wm(t){return t.__data__}function Rm(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Om(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Tm.prototype={constructor:Tm,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Pm="http://www.w3.org/1999/xhtml",Mm={svg:"http://www.w3.org/2000/svg",xhtml:Pm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nm(t){var e=t+="",i=e.indexOf(":");return i>=0&&"xmlns"!==(e=t.slice(0,i))&&(t=t.slice(i+1)),Mm.hasOwnProperty(e)?{space:Mm[e],local:t}:t}function Lm(t){return function(){this.removeAttribute(t)}}function _m(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fm(t,e){return function(){this.setAttribute(t,e)}}function Hm(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Zm(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttribute(t):this.setAttribute(t,i)}}function Bm(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function Um(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Gm(t){return function(){this.style.removeProperty(t)}}function Vm(t,e,i){return function(){this.style.setProperty(t,e,i)}}function $m(t,e,i){return function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,i)}}function Wm(t,e){return t.style.getPropertyValue(e)||Um(t).getComputedStyle(t,null).getPropertyValue(e)}function zm(t){return function(){delete this[t]}}function Km(t,e){return function(){this[t]=e}}function Ym(t,e){return function(){var i=e.apply(this,arguments);null==i?delete this[t]:this[t]=i}}function jm(t){return t.trim().split(/^|\s+/)}function Xm(t){return t.classList||new qm(t)}function qm(t){this._node=t,this._names=jm(t.getAttribute("class")||"")}function Jm(t,e){for(var i=Xm(t),n=-1,o=e.length;++n<o;)i.add(e[n])}function Qm(t,e){for(var i=Xm(t),n=-1,o=e.length;++n<o;)i.remove(e[n])}function tv(t){return function(){Jm(this,t)}}function ev(t){return function(){Qm(this,t)}}function iv(t,e){return function(){(e.apply(this,arguments)?Jm:Qm)(this,t)}}function nv(){this.textContent=""}function ov(t){return function(){this.textContent=t}}function av(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function rv(){this.innerHTML=""}function sv(t){return function(){this.innerHTML=t}}function lv(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function cv(){this.nextSibling&&this.parentNode.appendChild(this)}function uv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dv(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===Pm&&e.documentElement.namespaceURI===Pm?e.createElement(t):e.createElementNS(i,t)}}function hv(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function pv(t){var e=Nm(t);return(e.local?hv:dv)(e)}function fv(){return null}function gv(){var t=this.parentNode;t&&t.removeChild(this)}function mv(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function vv(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function yv(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}}))}function Cv(t){return function(){var e=this.__on;if(e){for(var i,n=0,o=-1,a=e.length;n<a;++n)i=e[n],t.type&&i.type!==t.type||i.name!==t.name?e[++o]=i:this.removeEventListener(i.type,i.listener,i.options);++o?e.length=o:delete this.__on}}}function bv(t,e,i){return function(){var n,o=this.__on,a=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(o)for(var r=0,s=o.length;r<s;++r)if((n=o[r]).type===t.type&&n.name===t.name)return this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=a,n.options=i),void(n.value=e);this.addEventListener(t.type,a,i),n={type:t.type,name:t.name,value:e,listener:a,options:i},o?o.push(n):this.__on=[n]}}function Sv(t,e,i){var n=Um(t),o=n.CustomEvent;"function"==typeof o?o=new o(e,i):(o=n.document.createEvent("Event"),i?(o.initEvent(e,i.bubbles,i.cancelable),o.detail=i.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function xv(t,e){return function(){return Sv(this,t,e)}}function Ev(t,e){return function(){return Sv(this,t,e.apply(this,arguments))}}qm.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Av=[null];function Tv(t,e){this._groups=t,this._parents=e}function Iv(){return new Tv([[document.documentElement]],Av)}Tv.prototype=Iv.prototype={constructor:Tv,select:function(t){"function"!=typeof t&&(t=fm(t));for(var e=this._groups,i=e.length,n=new Array(i),o=0;o<i;++o)for(var a,r,s=e[o],l=s.length,c=n[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(r=t.call(a,a.__data__,u,s))&&("__data__"in a&&(r.__data__=a.__data__),c[u]=r);return new Tv(n,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return gm(t.apply(this,arguments))}}(t):vm(t);for(var e=this._groups,i=e.length,n=[],o=[],a=0;a<i;++a)for(var r,s=e[a],l=s.length,c=0;c<l;++c)(r=s[c])&&(n.push(t.call(r,r.__data__,c,s)),o.push(r));return new Tv(n,o)},selectChild:function(t){return this.select(null==t?Sm:function(t){return function(){return bm.call(this.children,t)}}("function"==typeof t?t:Cm(t)))},selectChildren:function(t){return this.selectAll(null==t?Em:function(t){return function(){return xm.call(this.children,t)}}("function"==typeof t?t:Cm(t)))},filter:function(t){"function"!=typeof t&&(t=ym(t));for(var e=this._groups,i=e.length,n=new Array(i),o=0;o<i;++o)for(var a,r=e[o],s=r.length,l=n[o]=[],c=0;c<s;++c)(a=r[c])&&t.call(a,a.__data__,c,r)&&l.push(a);return new Tv(n,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,wm);var i=e?km:Dm,n=this._parents,o=this._groups;"function"!=typeof t&&(t=Im(t));for(var a=o.length,r=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var u=n[c],d=o[c],h=d.length,p=Rm(t.call(u,u&&u.__data__,c,n)),f=p.length,g=s[c]=new Array(f),m=r[c]=new Array(f),v=l[c]=new Array(h);i(u,d,g,m,v,p,e);for(var y,C,b=0,S=0;b<f;++b)if(y=g[b]){for(b>=S&&(S=b+1);!(C=m[S])&&++S<f;);y._next=C||null}}return(r=new Tv(r,n))._enter=s,r._exit=l,r},enter:function(){return new Tv(this._enter||this._groups.map(Am),this._parents)},exit:function(){return new Tv(this._exit||this._groups.map(Am),this._parents)},join:function(t,e,i){var n=this.enter(),o=this,a=this.exit();return"function"==typeof t?(n=t(n))&&(n=n.selection()):n=n.append(t+""),null!=e&&(o=e(o))&&(o=o.selection()),null==i?a.remove():i(a),n&&o?n.merge(o).order():o},merge:function(t){for(var e=t.selection?t.selection():t,i=this._groups,n=e._groups,o=i.length,a=n.length,r=Math.min(o,a),s=new Array(o),l=0;l<r;++l)for(var c,u=i[l],d=n[l],h=u.length,p=s[l]=new Array(h),f=0;f<h;++f)(c=u[f]||d[f])&&(p[f]=c);for(;l<o;++l)s[l]=i[l];return new Tv(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var n,o=t[e],a=o.length-1,r=o[a];--a>=0;)(n=o[a])&&(r&&4^n.compareDocumentPosition(r)&&r.parentNode.insertBefore(n,r),r=n);return this},sort:function(t){function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}t||(t=Om);for(var i=this._groups,n=i.length,o=new Array(n),a=0;a<n;++a){for(var r,s=i[a],l=s.length,c=o[a]=new Array(l),u=0;u<l;++u)(r=s[u])&&(c[u]=r);c.sort(e)}return new Tv(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],o=0,a=n.length;o<a;++o){var r=n[o];if(r)return r}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,i=0,n=e.length;i<n;++i)for(var o,a=e[i],r=0,s=a.length;r<s;++r)(o=a[r])&&t.call(o,o.__data__,r,a);return this},attr:function(t,e){var i=Nm(t);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((null==e?i.local?_m:Lm:"function"==typeof e?i.local?Bm:Zm:i.local?Hm:Fm)(i,e))},style:function(t,e,i){return arguments.length>1?this.each((null==e?Gm:"function"==typeof e?$m:Vm)(t,e,null==i?"":i)):Wm(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?zm:"function"==typeof e?Ym:Km)(t,e)):this.node()[t]},classed:function(t,e){var i=jm(t+"");if(arguments.length<2){for(var n=Xm(this.node()),o=-1,a=i.length;++o<a;)if(!n.contains(i[o]))return!1;return!0}return this.each(("function"==typeof e?iv:e?tv:ev)(i,e))},text:function(t){return arguments.length?this.each(null==t?nv:("function"==typeof t?av:ov)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?rv:("function"==typeof t?lv:sv)(t)):this.node().innerHTML},raise:function(){return this.each(cv)},lower:function(){return this.each(uv)},append:function(t){var e="function"==typeof t?t:pv(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var i="function"==typeof t?t:pv(t),n=null==e?fv:"function"==typeof e?e:fm(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)}))},remove:function(){return this.each(gv)},clone:function(t){return this.select(t?vv:mv)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,i){var n,o,a=yv(t+""),r=a.length;if(!(arguments.length<2)){for(s=e?bv:Cv,n=0;n<r;++n)this.each(s(a[n],e,i));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(n=0,l=s[c];n<r;++n)if((o=a[n]).type===l.type&&o.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?Ev:xv)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n,o=t[e],a=0,r=o.length;a<r;++a)(n=o[a])&&(yield n)}};var Dv=Iv,kv={value:()=>{}};function wv(){for(var t,e=0,i=arguments.length,n={};e<i;++e){if(!(t=arguments[e]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new Rv(n)}function Rv(t){this._=t}function Ov(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",n=t.indexOf(".");if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}function Pv(t,e){for(var i,n=0,o=t.length;n<o;++n)if((i=t[n]).name===e)return i.value}function Mv(t,e,i){for(var n=0,o=t.length;n<o;++n)if(t[n].name===e){t[n]=kv,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=i&&t.push({name:e,value:i}),t}Rv.prototype=wv.prototype={constructor:Rv,on:function(t,e){var i,n=this._,o=Ov(t+"",n),a=-1,r=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<r;)if(i=(t=o[a]).type)n[i]=Mv(n[i],t.name,e);else if(null==e)for(i in n)n[i]=Mv(n[i],t.name,null);return this}for(;++a<r;)if((i=(t=o[a]).type)&&(i=Pv(n[i],t.name)))return i},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new Rv(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var i,n,o=new Array(i),a=0;a<i;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,i=(n=this._[t]).length;a<i;++a)n[a].value.apply(e,o)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],o=0,a=n.length;o<a;++o)n[o].value.apply(e,i)}};var Nv,Lv,_v=wv,Fv=0,Hv=0,Zv=0,Bv=0,Uv=0,Gv=0,Vv="object"==typeof performance&&performance.now?performance:Date,$v="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Wv(){return Uv||($v(zv),Uv=Vv.now()+Gv)}function zv(){Uv=0}function Kv(){this._call=this._time=this._next=null}function Yv(t,e,i){var n=new Kv;return n.restart(t,e,i),n}function jv(){Uv=(Bv=Vv.now())+Gv,Fv=Hv=0;try{!function(){Wv(),++Fv;for(var t,e=Nv;e;)(t=Uv-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Fv}()}finally{Fv=0,function(){var t,e,i=Nv,n=1/0;for(;i;)i._call?(n>i._time&&(n=i._time),t=i,i=i._next):(e=i._next,i._next=null,i=t?t._next=e:Nv=e);Lv=t,qv(n)}(),Uv=0}}function Xv(){var t=Vv.now(),e=t-Bv;e>1e3&&(Gv-=e,Bv=t)}function qv(t){Fv||(Hv&&(Hv=clearTimeout(Hv)),t-Uv>24?(t<1/0&&(Hv=setTimeout(jv,t-Vv.now()-Gv)),Zv&&(Zv=clearInterval(Zv))):(Zv||(Bv=Vv.now(),Zv=setInterval(Xv,1e3)),Fv=1,$v(jv)))}function Jv(t,e,i){var n=new Kv;return e=null==e?0:+e,n.restart((i=>{n.stop(),t(i+e)}),e,i),n}Kv.prototype=Yv.prototype={constructor:Kv,restart:function(t,e,i){if("function"!=typeof t)throw new TypeError("callback is not a function");i=(null==i?Wv():+i)+(null==e?0:+e),this._next||Lv===this||(Lv?Lv._next=this:Nv=this,Lv=this),this._call=t,this._time=i,qv()},stop:function(){this._call&&(this._call=null,this._time=1/0,qv())}};var Qv=_v("start","end","cancel","interrupt"),ty=[];function ey(t,e,i,n,o,a){var r=t.__transition;if(r){if(i in r)return}else t.__transition={};!function(t,e,i){var n,o=t.__transition;function a(t){i.state=1,i.timer.restart(r,i.delay,i.time),i.delay<=t&&r(t-i.delay)}function r(a){var c,u,d,h;if(1!==i.state)return l();for(c in o)if((h=o[c]).name===i.name){if(3===h.state)return Jv(r);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete o[c]):+c<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete o[c])}if(Jv((function(){3===i.state&&(i.state=4,i.timer.restart(s,i.delay,i.time),s(a))})),i.state=2,i.on.call("start",t,t.__data__,i.index,i.group),2===i.state){for(i.state=3,n=new Array(d=i.tween.length),c=0,u=-1;c<d;++c)(h=i.tween[c].value.call(t,t.__data__,i.index,i.group))&&(n[++u]=h);n.length=u+1}}function s(e){for(var o=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=5,1),a=-1,r=n.length;++a<r;)n[a].call(t,o);5===i.state&&(i.on.call("end",t,t.__data__,i.index,i.group),l())}function l(){for(var n in i.state=6,i.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=i,i.timer=Yv(a,0,i.time)}(t,i,{name:e,index:n,group:o,on:Qv,tween:ty,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function iy(t,e){var i=oy(t,e);if(i.state>0)throw new Error("too late; already scheduled");return i}function ny(t,e){var i=oy(t,e);if(i.state>3)throw new Error("too late; already running");return i}function oy(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function ay(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}var ry,sy=180/Math.PI,ly={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cy(t,e,i,n,o,a){var r,s,l;return(r=Math.sqrt(t*t+e*e))&&(t/=r,e/=r),(l=t*i+e*n)&&(i-=t*l,n-=e*l),(s=Math.sqrt(i*i+n*n))&&(i/=s,n/=s,l/=s),t*n<e*i&&(t=-t,e=-e,l=-l,r=-r),{translateX:o,translateY:a,rotate:Math.atan2(e,t)*sy,skewX:Math.atan(l)*sy,scaleX:r,scaleY:s}}function uy(t,e,i,n){function o(t){return t.length?t.pop()+" ":""}return function(a,r){var s=[],l=[];return a=t(a),r=t(r),function(t,n,o,a,r,s){if(t!==o||n!==a){var l=r.push("translate(",null,e,null,i);s.push({i:l-4,x:ay(t,o)},{i:l-2,x:ay(n,a)})}else(o||a)&&r.push("translate("+o+e+a+i)}(a.translateX,a.translateY,r.translateX,r.translateY,s,l),function(t,e,i,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:i.push(o(i)+"rotate(",null,n)-2,x:ay(t,e)})):e&&i.push(o(i)+"rotate("+e+n)}(a.rotate,r.rotate,s,l),function(t,e,i,a){t!==e?a.push({i:i.push(o(i)+"skewX(",null,n)-2,x:ay(t,e)}):e&&i.push(o(i)+"skewX("+e+n)}(a.skewX,r.skewX,s,l),function(t,e,i,n,a,r){if(t!==i||e!==n){var s=a.push(o(a)+"scale(",null,",",null,")");r.push({i:s-4,x:ay(t,i)},{i:s-2,x:ay(e,n)})}else 1===i&&1===n||a.push(o(a)+"scale("+i+","+n+")")}(a.scaleX,a.scaleY,r.scaleX,r.scaleY,s,l),a=r=null,function(t){for(var e,i=-1,n=l.length;++i<n;)s[(e=l[i]).i]=e.x(t);return s.join("")}}}var dy=uy((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ly:cy(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),hy=uy((function(t){return null==t?ly:(ry||(ry=document.createElementNS("http://www.w3.org/2000/svg","g")),ry.setAttribute("transform",t),(t=ry.transform.baseVal.consolidate())?cy((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):ly)}),", ",")",")");function py(t,e){var i,n;return function(){var o=ny(this,t),a=o.tween;if(a!==i)for(var r=0,s=(n=i=a).length;r<s;++r)if(n[r].name===e){(n=n.slice()).splice(r,1);break}o.tween=n}}function fy(t,e,i){var n,o;if("function"!=typeof i)throw new Error;return function(){var a=ny(this,t),r=a.tween;if(r!==n){o=(n=r).slice();for(var s={name:e,value:i},l=0,c=o.length;l<c;++l)if(o[l].name===e){o[l]=s;break}l===c&&o.push(s)}a.tween=o}}function gy(t,e,i){var n=t._id;return t.each((function(){var t=ny(this,n);(t.value||(t.value={}))[e]=i.apply(this,arguments)})),function(t){return oy(t,n).value[e]}}function my(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function vy(t,e){var i=Object.create(t.prototype);for(var n in e)i[n]=e[n];return i}function yy(){}var Cy=.7,by=1/Cy,Sy="\\s*([+-]?\\d+)\\s*",xy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ey="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ay=/^#([0-9a-f]{3,8})$/,Ty=new RegExp(`^rgb\\(${Sy},${Sy},${Sy}\\)$`),Iy=new RegExp(`^rgb\\(${Ey},${Ey},${Ey}\\)$`),Dy=new RegExp(`^rgba\\(${Sy},${Sy},${Sy},${xy}\\)$`),ky=new RegExp(`^rgba\\(${Ey},${Ey},${Ey},${xy}\\)$`),wy=new RegExp(`^hsl\\(${xy},${Ey},${Ey}\\)$`),Ry=new RegExp(`^hsla\\(${xy},${Ey},${Ey},${xy}\\)$`),Oy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Py(){return this.rgb().formatHex()}function My(){return this.rgb().formatRgb()}function Ny(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=Ay.exec(t))?(i=e[1].length,e=parseInt(e[1],16),6===i?Ly(e):3===i?new Zy(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===i?_y(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===i?_y(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Ty.exec(t))?new Zy(e[1],e[2],e[3],1):(e=Iy.exec(t))?new Zy(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Dy.exec(t))?_y(e[1],e[2],e[3],e[4]):(e=ky.exec(t))?_y(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=wy.exec(t))?Wy(e[1],e[2]/100,e[3]/100,1):(e=Ry.exec(t))?Wy(e[1],e[2]/100,e[3]/100,e[4]):Oy.hasOwnProperty(t)?Ly(Oy[t]):"transparent"===t?new Zy(NaN,NaN,NaN,0):null}function Ly(t){return new Zy(t>>16&255,t>>8&255,255&t,1)}function _y(t,e,i,n){return n<=0&&(t=e=i=NaN),new Zy(t,e,i,n)}function Fy(t){return t instanceof yy||(t=Ny(t)),t?new Zy((t=t.rgb()).r,t.g,t.b,t.opacity):new Zy}function Hy(t,e,i,n){return 1===arguments.length?Fy(t):new Zy(t,e,i,null==n?1:n)}function Zy(t,e,i,n){this.r=+t,this.g=+e,this.b=+i,this.opacity=+n}function By(){return`#${$y(this.r)}${$y(this.g)}${$y(this.b)}`}function Uy(){const t=Gy(this.opacity);return`${1===t?"rgb(":"rgba("}${Vy(this.r)}, ${Vy(this.g)}, ${Vy(this.b)}${1===t?")":`, ${t})`}`}function Gy(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Vy(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $y(t){return((t=Vy(t))<16?"0":"")+t.toString(16)}function Wy(t,e,i,n){return n<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new Ky(t,e,i,n)}function zy(t){if(t instanceof Ky)return new Ky(t.h,t.s,t.l,t.opacity);if(t instanceof yy||(t=Ny(t)),!t)return new Ky;if(t instanceof Ky)return t;var e=(t=t.rgb()).r/255,i=t.g/255,n=t.b/255,o=Math.min(e,i,n),a=Math.max(e,i,n),r=NaN,s=a-o,l=(a+o)/2;return s?(r=e===a?(i-n)/s+6*(i<n):i===a?(n-e)/s+2:(e-i)/s+4,s/=l<.5?a+o:2-a-o,r*=60):s=l>0&&l<1?0:r,new Ky(r,s,l,t.opacity)}function Ky(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}function Yy(t){return(t=(t||0)%360)<0?t+360:t}function jy(t){return Math.max(0,Math.min(1,t||0))}function Xy(t,e,i){return 255*(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)}function qy(t,e,i,n,o){var a=t*t,r=a*t;return((1-3*t+3*a-r)*e+(4-6*a+3*r)*i+(1+3*t+3*a-3*r)*n+r*o)/6}my(yy,Ny,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Py,formatHex:Py,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return zy(this).formatHsl()},formatRgb:My,toString:My}),my(Zy,Hy,vy(yy,{brighter(t){return t=null==t?by:Math.pow(by,t),new Zy(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Cy:Math.pow(Cy,t),new Zy(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Zy(Vy(this.r),Vy(this.g),Vy(this.b),Gy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:By,formatHex:By,formatHex8:function(){return`#${$y(this.r)}${$y(this.g)}${$y(this.b)}${$y(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Uy,toString:Uy})),my(Ky,(function(t,e,i,n){return 1===arguments.length?zy(t):new Ky(t,e,i,null==n?1:n)}),vy(yy,{brighter(t){return t=null==t?by:Math.pow(by,t),new Ky(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Cy:Math.pow(Cy,t),new Ky(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*e,o=2*i-n;return new Zy(Xy(t>=240?t-240:t+120,o,n),Xy(t,o,n),Xy(t<120?t+240:t-120,o,n),this.opacity)},clamp(){return new Ky(Yy(this.h),jy(this.s),jy(this.l),Gy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Gy(this.opacity);return`${1===t?"hsl(":"hsla("}${Yy(this.h)}, ${100*jy(this.s)}%, ${100*jy(this.l)}%${1===t?")":`, ${t})`}`}}));var Jy=t=>()=>t;function Qy(t,e){return function(i){return t+i*e}}function tC(t){return 1==(t=+t)?eC:function(e,i){return i-e?function(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(n){return Math.pow(t+n*e,i)}}(e,i,t):Jy(isNaN(e)?i:e)}}function eC(t,e){var i=e-t;return i?Qy(t,i):Jy(isNaN(t)?e:t)}var iC=function t(e){var i=tC(e);function n(t,e){var n=i((t=Hy(t)).r,(e=Hy(e)).r),o=i(t.g,e.g),a=i(t.b,e.b),r=eC(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=o(e),t.b=a(e),t.opacity=r(e),t+""}}return n.gamma=t,n}(1);function nC(t){return function(e){var i,n,o=e.length,a=new Array(o),r=new Array(o),s=new Array(o);for(i=0;i<o;++i)n=Hy(e[i]),a[i]=n.r||0,r[i]=n.g||0,s[i]=n.b||0;return a=t(a),r=t(r),s=t(s),n.opacity=1,function(t){return n.r=a(t),n.g=r(t),n.b=s(t),n+""}}}nC((function(t){var e=t.length-1;return function(i){var n=i<=0?i=0:i>=1?(i=1,e-1):Math.floor(i*e),o=t[n],a=t[n+1],r=n>0?t[n-1]:2*o-a,s=n<e-1?t[n+2]:2*a-o;return qy((i-n/e)*e,r,o,a,s)}})),nC((function(t){var e=t.length;return function(i){var n=Math.floor(((i%=1)<0?++i:i)*e),o=t[(n+e-1)%e],a=t[n%e],r=t[(n+1)%e],s=t[(n+2)%e];return qy((i-n/e)*e,o,a,r,s)}}));var oC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aC=new RegExp(oC.source,"g");function rC(t,e){var i,n,o,a=oC.lastIndex=aC.lastIndex=0,r=-1,s=[],l=[];for(t+="",e+="";(i=oC.exec(t))&&(n=aC.exec(e));)(o=n.index)>a&&(o=e.slice(a,o),s[r]?s[r]+=o:s[++r]=o),(i=i[0])===(n=n[0])?s[r]?s[r]+=n:s[++r]=n:(s[++r]=null,l.push({i:r,x:ay(i,n)})),a=aC.lastIndex;return a<e.length&&(o=e.slice(a),s[r]?s[r]+=o:s[++r]=o),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var i,n=0;n<e;++n)s[(i=l[n]).i]=i.x(t);return s.join("")})}function sC(t,e){var i;return("number"==typeof e?ay:e instanceof Ny?iC:(i=Ny(e))?(e=i,iC):rC)(t,e)}function lC(t){return function(){this.removeAttribute(t)}}function cC(t){return function(){this.removeAttributeNS(t.space,t.local)}}function uC(t,e,i){var n,o,a=i+"";return function(){var r=this.getAttribute(t);return r===a?null:r===n?o:o=e(n=r,i)}}function dC(t,e,i){var n,o,a=i+"";return function(){var r=this.getAttributeNS(t.space,t.local);return r===a?null:r===n?o:o=e(n=r,i)}}function hC(t,e,i){var n,o,a;return function(){var r,s,l=i(this);if(null!=l)return(r=this.getAttribute(t))===(s=l+"")?null:r===n&&s===o?a:(o=s,a=e(n=r,l));this.removeAttribute(t)}}function pC(t,e,i){var n,o,a;return function(){var r,s,l=i(this);if(null!=l)return(r=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:r===n&&s===o?a:(o=s,a=e(n=r,l));this.removeAttributeNS(t.space,t.local)}}function fC(t,e){return function(i){this.setAttribute(t,e.call(this,i))}}function gC(t,e){return function(i){this.setAttributeNS(t.space,t.local,e.call(this,i))}}function mC(t,e){var i,n;function o(){var o=e.apply(this,arguments);return o!==n&&(i=(n=o)&&gC(t,o)),i}return o._value=e,o}function vC(t,e){var i,n;function o(){var o=e.apply(this,arguments);return o!==n&&(i=(n=o)&&fC(t,o)),i}return o._value=e,o}function yC(t,e){return function(){iy(this,t).delay=+e.apply(this,arguments)}}function CC(t,e){return e=+e,function(){iy(this,t).delay=e}}function bC(t,e){return function(){ny(this,t).duration=+e.apply(this,arguments)}}function SC(t,e){return e=+e,function(){ny(this,t).duration=e}}function xC(t,e){if("function"!=typeof e)throw new Error;return function(){ny(this,t).ease=e}}function EC(t,e,i){var n,o,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?iy:ny;return function(){var r=a(this,t),s=r.on;s!==n&&(o=(n=s).copy()).on(e,i),r.on=o}}var AC=Dv.prototype.constructor;function TC(t){return function(){this.style.removeProperty(t)}}function IC(t,e,i){return function(n){this.style.setProperty(t,e.call(this,n),i)}}function DC(t,e,i){var n,o;function a(){var a=e.apply(this,arguments);return a!==o&&(n=(o=a)&&IC(t,a,i)),n}return a._value=e,a}function kC(t){return function(e){this.textContent=t.call(this,e)}}function wC(t){var e,i;function n(){var n=t.apply(this,arguments);return n!==i&&(e=(i=n)&&kC(n)),e}return n._value=t,n}var RC=0;function OC(t,e,i,n){this._groups=t,this._parents=e,this._name=i,this._id=n}function PC(){return++RC}var MC=Dv.prototype;OC.prototype=function(t){return Dv().transition(t)}.prototype={constructor:OC,select:function(t){var e=this._name,i=this._id;"function"!=typeof t&&(t=fm(t));for(var n=this._groups,o=n.length,a=new Array(o),r=0;r<o;++r)for(var s,l,c=n[r],u=c.length,d=a[r]=new Array(u),h=0;h<u;++h)(s=c[h])&&(l=t.call(s,s.__data__,h,c))&&("__data__"in s&&(l.__data__=s.__data__),d[h]=l,ey(d[h],e,i,h,d,oy(s,i)));return new OC(a,this._parents,e,i)},selectAll:function(t){var e=this._name,i=this._id;"function"!=typeof t&&(t=vm(t));for(var n=this._groups,o=n.length,a=[],r=[],s=0;s<o;++s)for(var l,c=n[s],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,p=t.call(l,l.__data__,d,c),f=oy(l,i),g=0,m=p.length;g<m;++g)(h=p[g])&&ey(h,e,i,g,p,f);a.push(p),r.push(l)}return new OC(a,r,e,i)},selectChild:MC.selectChild,selectChildren:MC.selectChildren,filter:function(t){"function"!=typeof t&&(t=ym(t));for(var e=this._groups,i=e.length,n=new Array(i),o=0;o<i;++o)for(var a,r=e[o],s=r.length,l=n[o]=[],c=0;c<s;++c)(a=r[c])&&t.call(a,a.__data__,c,r)&&l.push(a);return new OC(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,n=e.length,o=i.length,a=Math.min(n,o),r=new Array(n),s=0;s<a;++s)for(var l,c=e[s],u=i[s],d=c.length,h=r[s]=new Array(d),p=0;p<d;++p)(l=c[p]||u[p])&&(h[p]=l);for(;s<n;++s)r[s]=e[s];return new OC(r,this._parents,this._name,this._id)},selection:function(){return new AC(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,i=PC(),n=this._groups,o=n.length,a=0;a<o;++a)for(var r,s=n[a],l=s.length,c=0;c<l;++c)if(r=s[c]){var u=oy(r,e);ey(r,t,i,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new OC(n,this._parents,t,i)},call:MC.call,nodes:MC.nodes,node:MC.node,size:MC.size,empty:MC.empty,each:MC.each,on:function(t,e){var i=this._id;return arguments.length<2?oy(this.node(),i).on.on(t):this.each(EC(i,t,e))},attr:function(t,e){var i=Nm(t),n="transform"===i?hy:sC;return this.attrTween(t,"function"==typeof e?(i.local?pC:hC)(i,n,gy(this,"attr."+t,e)):null==e?(i.local?cC:lC)(i):(i.local?dC:uC)(i,n,e))},attrTween:function(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;var n=Nm(t);return this.tween(i,(n.local?mC:vC)(n,e))},style:function(t,e,i){var n="transform"==(t+="")?dy:sC;return null==e?this.styleTween(t,function(t,e){var i,n,o;return function(){var a=Wm(this,t),r=(this.style.removeProperty(t),Wm(this,t));return a===r?null:a===i&&r===n?o:o=e(i=a,n=r)}}(t,n)).on("end.style."+t,TC(t)):"function"==typeof e?this.styleTween(t,function(t,e,i){var n,o,a;return function(){var r=Wm(this,t),s=i(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=Wm(this,t)),r===l?null:r===n&&l===o?a:(o=l,a=e(n=r,s))}}(t,n,gy(this,"style."+t,e))).each(function(t,e){var i,n,o,a,r="style."+e,s="end."+r;return function(){var l=ny(this,t),c=l.on,u=null==l.value[r]?a||(a=TC(e)):void 0;c===i&&o===u||(n=(i=c).copy()).on(s,o=u),l.on=n}}(this._id,t)):this.styleTween(t,function(t,e,i){var n,o,a=i+"";return function(){var r=Wm(this,t);return r===a?null:r===n?o:o=e(n=r,i)}}(t,n,e),i).on("end.style."+t,null)},styleTween:function(t,e,i){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;return this.tween(n,DC(t,e,null==i?"":i))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(gy(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,wC(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var i=this._id;if(t+="",arguments.length<2){for(var n,o=oy(this.node(),i).tween,a=0,r=o.length;a<r;++a)if((n=o[a]).name===t)return n.value;return null}return this.each((null==e?py:fy)(i,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?yC:CC)(e,t)):oy(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?bC:SC)(e,t)):oy(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(xC(e,t)):oy(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var i=e.apply(this,arguments);if("function"!=typeof i)throw new Error;ny(this,t).ease=i}}(this._id,t))},end:function(){var t,e,i=this,n=i._id,o=i.size();return new Promise((function(a,r){var s={value:r},l={value:function(){0==--o&&a()}};i.each((function(){var i=ny(this,n),o=i.on;o!==t&&((e=(t=o).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),i.on=e})),0===o&&a()}))},[Symbol.iterator]:MC[Symbol.iterator]};var NC={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function LC(t,e){for(var i;!(i=t.__transition)||!(i=i[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return i}Dv.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var i,n,o,a=t.__transition,r=!0;if(a){for(o in e=null==e?null:e+"",a)(i=a[o]).name===e?(n=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(n?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete a[o]):r=!1;r&&delete t.__transition}}(this,t)}))},Dv.prototype.transition=function(t){var e,i;t instanceof OC?(e=t._id,t=t._name):(e=PC(),(i=NC).time=Wv(),t=null==t?null:t+"");for(var n=this._groups,o=n.length,a=0;a<o;++a)for(var r,s=n[a],l=s.length,c=0;c<l;++c)(r=s[c])&&ey(r,t,e,c,s,i||LC(r,e));return new OC(n,this._parents,t,e)};const{abs:_C,max:FC,min:HC}=Math;function ZC(t){return[+t[0],+t[1]]}function BC(t){return[ZC(t[0]),ZC(t[1])]}["w","e"].map(UC),["n","s"].map(UC),["n","w","e","s","nw","ne","sw","se"].map(UC);function UC(t){return{type:t}}var GC=Math.sqrt(50),VC=Math.sqrt(10),$C=Math.sqrt(2);function WC(t,e,i){var n=(e-t)/Math.max(0,i),o=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,o);return o>=0?(a>=GC?10:a>=VC?5:a>=$C?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(a>=GC?10:a>=VC?5:a>=$C?2:1)}function zC(t,e,i){var n=Math.abs(e-t)/Math.max(0,i),o=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),a=n/o;return a>=GC?o*=10:a>=VC?o*=5:a>=$C&&(o*=2),e<t?-o:o}const KC=cm(sm),YC=KC.right;KC.left,cm((function(t){return null===t?NaN:+t})).center;var jC=YC;function XC(t,e){var i,n=e?e.length:0,o=t?Math.min(n,t.length):0,a=new Array(o),r=new Array(n);for(i=0;i<o;++i)a[i]=tb(t[i],e[i]);for(;i<n;++i)r[i]=e[i];return function(t){for(i=0;i<o;++i)r[i]=a[i](t);return r}}function qC(t,e){var i=new Date;return t=+t,e=+e,function(n){return i.setTime(t*(1-n)+e*n),i}}function JC(t,e){var i,n={},o={};for(i in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)i in t?n[i]=tb(t[i],e[i]):o[i]=e[i];return function(t){for(i in n)o[i]=n[i](t);return o}}function QC(t,e){e||(e=[]);var i,n=t?Math.min(e.length,t.length):0,o=e.slice();return function(a){for(i=0;i<n;++i)o[i]=t[i]*(1-a)+e[i]*a;return o}}function tb(t,e){var i,n,o=typeof e;return null==e||"boolean"===o?Jy(e):("number"===o?ay:"string"===o?(i=Ny(e))?(e=i,iC):rC:e instanceof Ny?iC:e instanceof Date?qC:(n=e,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(e)?XC:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?JC:ay:QC))(t,e)}function eb(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}function ib(t){return+t}var nb=[0,1];function ob(t){return t}function ab(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:(i=isNaN(e)?NaN:.5,function(){return i});var i}function rb(t,e,i){var n=t[0],o=t[1],a=e[0],r=e[1];return o<n?(n=ab(o,n),a=i(r,a)):(n=ab(n,o),a=i(a,r)),function(t){return a(n(t))}}function sb(t,e,i){var n=Math.min(t.length,e.length)-1,o=new Array(n),a=new Array(n),r=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++r<n;)o[r]=ab(t[r],t[r+1]),a[r]=i(e[r],e[r+1]);return function(e){var i=jC(t,e,1,n)-1;return a[i](o[i](e))}}function lb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function cb(){var t,e,i,n,o,a,r=nb,s=nb,l=tb,c=ob;function u(){var t,e,i,l=Math.min(r.length,s.length);return c!==ob&&(t=r[0],e=r[l-1],t>e&&(i=t,t=e,e=i),c=function(i){return Math.max(t,Math.min(e,i))}),n=l>2?sb:rb,o=a=null,d}function d(e){return null==e||isNaN(e=+e)?i:(o||(o=n(r.map(t),s,l)))(t(c(e)))}return d.invert=function(i){return c(e((a||(a=n(s,r.map(t),ay)))(i)))},d.domain=function(t){return arguments.length?(r=Array.from(t,ib),u()):r.slice()},d.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},d.rangeRound=function(t){return s=Array.from(t),l=eb,u()},d.clamp=function(t){return arguments.length?(c=!!t||ob,u()):c!==ob},d.interpolate=function(t){return arguments.length?(l=t,u()):l},d.unknown=function(t){return arguments.length?(i=t,d):i},function(i,n){return t=i,e=n,u()}}function ub(){return cb()(ob,ob)}function db(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var hb,pb=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fb(t){if(!(e=pb.exec(t)))throw new Error("invalid format: "+t);var e;return new gb({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function gb(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function mb(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,n=t.slice(0,i);return[n.length>1?n[0]+n.slice(2):n,+t.slice(i+1)]}function vb(t){return(t=mb(Math.abs(t)))?t[1]:NaN}function yb(t,e){var i=mb(t,e);if(!i)return t+"";var n=i[0],o=i[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}fb.prototype=gb.prototype,gb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Cb={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>yb(100*t,e),r:yb,s:function(t,e){var i=mb(t,e);if(!i)return t+"";var n=i[0],o=i[1],a=o-(hb=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,r=n.length;return a===r?n:a>r?n+new Array(a-r+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+mb(t,Math.max(0,e+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function bb(t){return t}var Sb,xb,Eb,Ab=Array.prototype.map,Tb=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ib(t){var e,i,n=void 0===t.grouping||void 0===t.thousands?bb:(e=Ab.call(t.grouping,Number),i=t.thousands+"",function(t,n){for(var o=t.length,a=[],r=0,s=e[0],l=0;o>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),a.push(t.substring(o-=s,o+s)),!((l+=s+1)>n));)s=e[r=(r+1)%e.length];return a.reverse().join(i)}),o=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",r=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?bb:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Ab.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=fb(t)).fill,i=t.align,d=t.sign,h=t.symbol,p=t.zero,f=t.width,g=t.comma,m=t.precision,v=t.trim,y=t.type;"n"===y?(g=!0,y="g"):Cb[y]||(void 0===m&&(m=12),v=!0,y="g"),(p||"0"===e&&"="===i)&&(p=!0,e="0",i="=");var C="$"===h?o:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===h?a:/[%p]/.test(y)?l:"",S=Cb[y],x=/[defgprs%]/.test(y);function E(t){var o,a,l,h=C,E=b;if("c"===y)E=S(t)+E,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:S(Math.abs(t),m),v&&(t=function(t){t:for(var e,i=t.length,n=1,o=-1;n<i;++n)switch(t[n]){case".":o=e=n;break;case"0":0===o&&(o=n),e=n;break;default:if(!+t[n])break t;o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(e+1):t}(t)),A&&0==+t&&"+"!==d&&(A=!1),h=(A?"("===d?d:c:"-"===d||"("===d?"":d)+h,E=("s"===y?Tb[8+hb/3]:"")+E+(A&&"("===d?")":""),x)for(o=-1,a=t.length;++o<a;)if(48>(l=t.charCodeAt(o))||l>57){E=(46===l?r+t.slice(o+1):t.slice(o))+E,t=t.slice(0,o);break}}g&&!p&&(t=n(t,1/0));var T=h.length+t.length+E.length,I=T<f?new Array(f-T+1).join(e):"";switch(g&&p&&(t=n(I+t,I.length?f-E.length:1/0),I=""),i){case"<":t=h+t+E+I;break;case"=":t=h+I+t+E;break;case"^":t=I.slice(0,T=I.length>>1)+h+t+E+I.slice(T);break;default:t=I+h+t+E}return s(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),E.toString=function(){return t+""},E}return{format:d,formatPrefix:function(t,e){var i=d(((t=fb(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(vb(e)/3))),o=Math.pow(10,-n),a=Tb[8+n/3];return function(t){return i(o*t)+a}}}}function Db(t,e,i,n){var o,a=zC(t,e,i);switch((n=fb(null==n?",f":n)).type){case"s":var r=Math.max(Math.abs(t),Math.abs(e));return null!=n.precision||isNaN(o=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(vb(e)/3)))-vb(Math.abs(t)))}(a,r))||(n.precision=o),Eb(n,r);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(o=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,vb(e)-vb(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(n.precision=o-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(o=function(t){return Math.max(0,-vb(Math.abs(t)))}(a))||(n.precision=o-2*("%"===n.type))}return xb(n)}function kb(t){var e=t.domain;return t.ticks=function(t){var i=e();return function(t,e,i){var n,o,a,r,s=-1;if(i=+i,(t=+t)==(e=+e)&&i>0)return[t];if((n=e<t)&&(o=t,t=e,e=o),0===(r=WC(t,e,i))||!isFinite(r))return[];if(r>0){let i=Math.round(t/r),n=Math.round(e/r);for(i*r<t&&++i,n*r>e&&--n,a=new Array(o=n-i+1);++s<o;)a[s]=(i+s)*r}else{r=-r;let i=Math.round(t*r),n=Math.round(e*r);for(i/r<t&&++i,n/r>e&&--n,a=new Array(o=n-i+1);++s<o;)a[s]=(i+s)/r}return n&&a.reverse(),a}(i[0],i[i.length-1],null==t?10:t)},t.tickFormat=function(t,i){var n=e();return Db(n[0],n[n.length-1],null==t?10:t,i)},t.nice=function(i){null==i&&(i=10);var n,o,a=e(),r=0,s=a.length-1,l=a[r],c=a[s],u=10;for(c<l&&(o=l,l=c,c=o,o=r,r=s,s=o);u-- >0;){if((o=WC(l,c,i))===n)return a[r]=l,a[s]=c,e(a);if(o>0)l=Math.floor(l/o)*o,c=Math.ceil(c/o)*o;else{if(!(o<0))break;l=Math.ceil(l*o)/o,c=Math.floor(c*o)/o}n=o}return t},t}function wb(){var t=ub();return t.copy=function(){return lb(t,wb())},db.apply(t,arguments),kb(t)}Sb=Ib({thousands:",",grouping:[3],currency:["$",""]}),xb=Sb.format,Eb=Sb.formatPrefix;const Rb=1e3,Ob=6e4,Pb=36e5,Mb=864e5,Nb=6048e5,Lb=2592e6,_b=31536e6;var Fb=new Date,Hb=new Date;function Zb(t,e,i,n){function o(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return o.floor=function(e){return t(e=new Date(+e)),e},o.ceil=function(i){return t(i=new Date(i-1)),e(i,1),t(i),i},o.round=function(t){var e=o(t),i=o.ceil(t);return t-e<i-t?e:i},o.offset=function(t,i){return e(t=new Date(+t),null==i?1:Math.floor(i)),t},o.range=function(i,n,a){var r,s=[];if(i=o.ceil(i),a=null==a?1:Math.floor(a),!(i<n&&a>0))return s;do{s.push(r=new Date(+i)),e(i,a),t(i)}while(r<i&&i<n);return s},o.filter=function(i){return Zb((function(e){if(e>=e)for(;t(e),!i(e);)e.setTime(e-1)}),(function(t,n){if(t>=t)if(n<0)for(;++n<=0;)for(;e(t,-1),!i(t););else for(;--n>=0;)for(;e(t,1),!i(t););}))},i&&(o.count=function(e,n){return Fb.setTime(+e),Hb.setTime(+n),t(Fb),t(Hb),Math.floor(i(Fb,Hb))},o.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?o.filter(n?function(e){return n(e)%t==0}:function(e){return o.count(0,e)%t==0}):o:null}),o}var Bb=Zb((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Bb.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Zb((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,i){e.setTime(+e+i*t)}),(function(e,i){return(i-e)/t})):Bb:null};var Ub=Bb,Gb=(Bb.range,Zb((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*Rb)}),(function(t,e){return(e-t)/Rb}),(function(t){return t.getUTCSeconds()}))),Vb=Gb,$b=(Gb.range,Zb((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Rb)}),(function(t,e){t.setTime(+t+e*Ob)}),(function(t,e){return(e-t)/Ob}),(function(t){return t.getMinutes()}))),Wb=$b,zb=($b.range,Zb((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Rb-t.getMinutes()*Ob)}),(function(t,e){t.setTime(+t+e*Pb)}),(function(t,e){return(e-t)/Pb}),(function(t){return t.getHours()}))),Kb=zb,Yb=(zb.range,Zb((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ob)/Mb),(t=>t.getDate()-1))),jb=Yb;Yb.range;function Xb(t){return Zb((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ob)/Nb}))}var qb=Xb(0),Jb=Xb(1),Qb=Xb(2),tS=Xb(3),eS=Xb(4),iS=Xb(5),nS=Xb(6),oS=(qb.range,Jb.range,Qb.range,tS.range,eS.range,iS.range,nS.range,Zb((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),aS=oS,rS=(oS.range,Zb((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));rS.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Zb((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,i){e.setFullYear(e.getFullYear()+i*t)})):null};var sS=rS,lS=(rS.range,Zb((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*Ob)}),(function(t,e){return(e-t)/Ob}),(function(t){return t.getUTCMinutes()}))),cS=lS,uS=(lS.range,Zb((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*Pb)}),(function(t,e){return(e-t)/Pb}),(function(t){return t.getUTCHours()}))),dS=uS,hS=(uS.range,Zb((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Mb}),(function(t){return t.getUTCDate()-1}))),pS=hS;hS.range;function fS(t){return Zb((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Nb}))}var gS=fS(0),mS=fS(1),vS=fS(2),yS=fS(3),CS=fS(4),bS=fS(5),SS=fS(6),xS=(gS.range,mS.range,vS.range,yS.range,CS.range,bS.range,SS.range,Zb((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),ES=xS,AS=(xS.range,Zb((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));AS.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Zb((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,i){e.setUTCFullYear(e.getUTCFullYear()+i*t)})):null};var TS=AS;AS.range;function IS(t,e,i,n,o,a){const r=[[Vb,1,Rb],[Vb,5,5e3],[Vb,15,15e3],[Vb,30,3e4],[a,1,Ob],[a,5,3e5],[a,15,9e5],[a,30,18e5],[o,1,Pb],[o,3,108e5],[o,6,216e5],[o,12,432e5],[n,1,Mb],[n,2,1728e5],[i,1,Nb],[e,1,Lb],[e,3,7776e6],[t,1,_b]];function s(e,i,n){const o=Math.abs(i-e)/n,a=cm((([,,t])=>t)).right(r,o);if(a===r.length)return t.every(zC(e/_b,i/_b,n));if(0===a)return Ub.every(Math.max(zC(e,i,n),1));const[s,l]=r[o/r[a-1][2]<r[a][2]/o?a-1:a];return s.every(l)}return[function(t,e,i){const n=e<t;n&&([t,e]=[e,t]);const o=i&&"function"==typeof i.range?i:s(t,e,i),a=o?o.range(t,+e+1):[];return n?a.reverse():a},s]}const[DS,kS]=IS(TS,ES,gS,pS,dS,cS),[wS,RS]=IS(sS,aS,qb,jb,Kb,Wb);function OS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function PS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function MS(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}var NS,LS,_S={"-":"",_:" ",0:"0"},FS=/^\s*\d+/,HS=/^%/,ZS=/[\\^$*+?|[\]().{}]/g;function BS(t,e,i){var n=t<0?"-":"",o=(n?-t:t)+"",a=o.length;return n+(a<i?new Array(i-a+1).join(e)+o:o)}function US(t){return t.replace(ZS,"\\$&")}function GS(t){return new RegExp("^(?:"+t.map(US).join("|")+")","i")}function VS(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function $S(t,e,i){var n=FS.exec(e.slice(i,i+1));return n?(t.w=+n[0],i+n[0].length):-1}function WS(t,e,i){var n=FS.exec(e.slice(i,i+1));return n?(t.u=+n[0],i+n[0].length):-1}function zS(t,e,i){var n=FS.exec(e.slice(i,i+2));return n?(t.U=+n[0],i+n[0].length):-1}function KS(t,e,i){var n=FS.exec(e.slice(i,i+2));return n?(t.V=+n[0],i+n[0].length):-1}function YS(t,e,i){var n=FS.exec(e.slice(i,i+2));return n?(t.W=+n[0],i+n[0].length):-1}function jS(t,e,i){var n=FS.exec(e.slice(i,i+4));return n?(t.y=+n[0],i+n[0].length):-1}function XS(t,e,i){var n=FS.exec(e.slice(i,i+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function qS(t,e,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function JS(t,e,i){var n=FS.exec(e.slice(i,i+1));return n?(t.q=3*n[0]-3,i+n[0].length):-1}function QS(t,e,i){var n=FS.exec(e.slice(i,i+2));return n?(t.m=n[0]-1,i+n[0].length):-1}function tx(t,e,i){var n=FS.exec(e.slice(i,i+2));return n?(t.d=+n[0],i+n[0].length):-1}function ex(t,e,i){var n=FS.exec(e.slice(i,i+3));return n?(t.m=0,t.d=+n[0],i+n[0].length):-1}function ix(t,e,i){var n=FS.exec(e.slice(i,i+2));return n?(t.H=+n[0],i+n[0].length):-1}function nx(t,e,i){var n=FS.exec(e.slice(i,i+2));return n?(t.M=+n[0],i+n[0].length):-1}function ox(t,e,i){var n=FS.exec(e.slice(i,i+2));return n?(t.S=+n[0],i+n[0].length):-1}function ax(t,e,i){var n=FS.exec(e.slice(i,i+3));return n?(t.L=+n[0],i+n[0].length):-1}function rx(t,e,i){var n=FS.exec(e.slice(i,i+6));return n?(t.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function sx(t,e,i){var n=HS.exec(e.slice(i,i+1));return n?i+n[0].length:-1}function lx(t,e,i){var n=FS.exec(e.slice(i));return n?(t.Q=+n[0],i+n[0].length):-1}function cx(t,e,i){var n=FS.exec(e.slice(i));return n?(t.s=+n[0],i+n[0].length):-1}function ux(t,e){return BS(t.getDate(),e,2)}function dx(t,e){return BS(t.getHours(),e,2)}function hx(t,e){return BS(t.getHours()%12||12,e,2)}function px(t,e){return BS(1+jb.count(sS(t),t),e,3)}function fx(t,e){return BS(t.getMilliseconds(),e,3)}function gx(t,e){return fx(t,e)+"000"}function mx(t,e){return BS(t.getMonth()+1,e,2)}function vx(t,e){return BS(t.getMinutes(),e,2)}function yx(t,e){return BS(t.getSeconds(),e,2)}function Cx(t){var e=t.getDay();return 0===e?7:e}function bx(t,e){return BS(qb.count(sS(t)-1,t),e,2)}function Sx(t){var e=t.getDay();return e>=4||0===e?eS(t):eS.ceil(t)}function xx(t,e){return t=Sx(t),BS(eS.count(sS(t),t)+(4===sS(t).getDay()),e,2)}function Ex(t){return t.getDay()}function Ax(t,e){return BS(Jb.count(sS(t)-1,t),e,2)}function Tx(t,e){return BS(t.getFullYear()%100,e,2)}function Ix(t,e){return BS((t=Sx(t)).getFullYear()%100,e,2)}function Dx(t,e){return BS(t.getFullYear()%1e4,e,4)}function kx(t,e){var i=t.getDay();return BS((t=i>=4||0===i?eS(t):eS.ceil(t)).getFullYear()%1e4,e,4)}function wx(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+BS(e/60|0,"0",2)+BS(e%60,"0",2)}function Rx(t,e){return BS(t.getUTCDate(),e,2)}function Ox(t,e){return BS(t.getUTCHours(),e,2)}function Px(t,e){return BS(t.getUTCHours()%12||12,e,2)}function Mx(t,e){return BS(1+pS.count(TS(t),t),e,3)}function Nx(t,e){return BS(t.getUTCMilliseconds(),e,3)}function Lx(t,e){return Nx(t,e)+"000"}function _x(t,e){return BS(t.getUTCMonth()+1,e,2)}function Fx(t,e){return BS(t.getUTCMinutes(),e,2)}function Hx(t,e){return BS(t.getUTCSeconds(),e,2)}function Zx(t){var e=t.getUTCDay();return 0===e?7:e}function Bx(t,e){return BS(gS.count(TS(t)-1,t),e,2)}function Ux(t){var e=t.getUTCDay();return e>=4||0===e?CS(t):CS.ceil(t)}function Gx(t,e){return t=Ux(t),BS(CS.count(TS(t),t)+(4===TS(t).getUTCDay()),e,2)}function Vx(t){return t.getUTCDay()}function $x(t,e){return BS(mS.count(TS(t)-1,t),e,2)}function Wx(t,e){return BS(t.getUTCFullYear()%100,e,2)}function zx(t,e){return BS((t=Ux(t)).getUTCFullYear()%100,e,2)}function Kx(t,e){return BS(t.getUTCFullYear()%1e4,e,4)}function Yx(t,e){var i=t.getUTCDay();return BS((t=i>=4||0===i?CS(t):CS.ceil(t)).getUTCFullYear()%1e4,e,4)}function jx(){return"+0000"}function Xx(){return"%"}function qx(t){return+t}function Jx(t){return Math.floor(+t/1e3)}function Qx(t){return new Date(t)}function tE(t){return t instanceof Date?+t:+new Date(+t)}function eE(t,e,i,n,o,a,r,s,l,c){var u=ub(),d=u.invert,h=u.domain,p=c(".%L"),f=c(":%S"),g=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),y=c("%b %d"),C=c("%B"),b=c("%Y");function S(t){return(l(t)<t?p:s(t)<t?f:r(t)<t?g:a(t)<t?m:n(t)<t?o(t)<t?v:y:i(t)<t?C:b)(t)}return u.invert=function(t){return new Date(d(t))},u.domain=function(t){return arguments.length?h(Array.from(t,tE)):h().map(Qx)},u.ticks=function(e){var i=h();return t(i[0],i[i.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?S:c(e)},u.nice=function(t){var i=h();return t&&"function"==typeof t.range||(t=e(i[0],i[i.length-1],null==t?10:t)),t?h(function(t,e){var i,n=0,o=(t=t.slice()).length-1,a=t[n],r=t[o];return r<a&&(i=n,n=o,o=i,i=a,a=r,r=i),t[n]=e.floor(a),t[o]=e.ceil(r),t}(i,t)):u},u.copy=function(){return lb(u,eE(t,e,i,n,o,a,r,s,l,c))},u}!function(t){NS=function(t){var e=t.dateTime,i=t.date,n=t.time,o=t.periods,a=t.days,r=t.shortDays,s=t.months,l=t.shortMonths,c=GS(o),u=VS(o),d=GS(a),h=VS(a),p=GS(r),f=VS(r),g=GS(s),m=VS(s),v=GS(l),y=VS(l),C={a:function(t){return r[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:ux,e:ux,f:gx,g:Ix,G:kx,H:dx,I:hx,j:px,L:fx,m:mx,M:vx,p:function(t){return o[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:qx,s:Jx,S:yx,u:Cx,U:bx,V:xx,w:Ex,W:Ax,x:null,X:null,y:Tx,Y:Dx,Z:wx,"%":Xx},b={a:function(t){return r[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Rx,e:Rx,f:Lx,g:zx,G:Yx,H:Ox,I:Px,j:Mx,L:Nx,m:_x,M:Fx,p:function(t){return o[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:qx,s:Jx,S:Hx,u:Zx,U:Bx,V:Gx,w:Vx,W:$x,x:null,X:null,y:Wx,Y:Kx,Z:jx,"%":Xx},S={a:function(t,e,i){var n=p.exec(e.slice(i));return n?(t.w=f.get(n[0].toLowerCase()),i+n[0].length):-1},A:function(t,e,i){var n=d.exec(e.slice(i));return n?(t.w=h.get(n[0].toLowerCase()),i+n[0].length):-1},b:function(t,e,i){var n=v.exec(e.slice(i));return n?(t.m=y.get(n[0].toLowerCase()),i+n[0].length):-1},B:function(t,e,i){var n=g.exec(e.slice(i));return n?(t.m=m.get(n[0].toLowerCase()),i+n[0].length):-1},c:function(t,i,n){return A(t,e,i,n)},d:tx,e:tx,f:rx,g:XS,G:jS,H:ix,I:ix,j:ex,L:ax,m:QS,M:nx,p:function(t,e,i){var n=c.exec(e.slice(i));return n?(t.p=u.get(n[0].toLowerCase()),i+n[0].length):-1},q:JS,Q:lx,s:cx,S:ox,u:WS,U:zS,V:KS,w:$S,W:YS,x:function(t,e,n){return A(t,i,e,n)},X:function(t,e,i){return A(t,n,e,i)},y:XS,Y:jS,Z:qS,"%":sx};function x(t,e){return function(i){var n,o,a,r=[],s=-1,l=0,c=t.length;for(i instanceof Date||(i=new Date(+i));++s<c;)37===t.charCodeAt(s)&&(r.push(t.slice(l,s)),null!=(o=_S[n=t.charAt(++s)])?n=t.charAt(++s):o="e"===n?" ":"0",(a=e[n])&&(n=a(i,o)),r.push(n),l=s+1);return r.push(t.slice(l,s)),r.join("")}}function E(t,e){return function(i){var n,o,a=MS(1900,void 0,1);if(A(a,t,i+="",0)!=i.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(o=(n=PS(MS(a.y,0,1))).getUTCDay(),n=o>4||0===o?mS.ceil(n):mS(n),n=pS.offset(n,7*(a.V-1)),a.y=n.getUTCFullYear(),a.m=n.getUTCMonth(),a.d=n.getUTCDate()+(a.w+6)%7):(o=(n=OS(MS(a.y,0,1))).getDay(),n=o>4||0===o?Jb.ceil(n):Jb(n),n=jb.offset(n,7*(a.V-1)),a.y=n.getFullYear(),a.m=n.getMonth(),a.d=n.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),o="Z"in a?PS(MS(a.y,0,1)).getUTCDay():OS(MS(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(o+5)%7:a.w+7*a.U-(o+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,PS(a)):OS(a)}}function A(t,e,i,n){for(var o,a,r=0,s=e.length,l=i.length;r<s;){if(n>=l)return-1;if(37===(o=e.charCodeAt(r++))){if(o=e.charAt(r++),!(a=S[o in _S?e.charAt(r++):o])||(n=a(t,i,n))<0)return-1}else if(o!=i.charCodeAt(n++))return-1}return n}return C.x=x(i,C),C.X=x(n,C),C.c=x(e,C),b.x=x(i,b),b.X=x(n,b),b.c=x(e,b),{format:function(t){var e=x(t+="",C);return e.toString=function(){return t},e},parse:function(t){var e=E(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=E(t+="",!0);return e.toString=function(){return t},e}}}(t),LS=NS.format,NS.parse,NS.utcFormat,NS.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const iE=Math.PI,nE=2*iE,oE=1e-6,aE=nE-oE;function rE(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function sE(){return new rE}rE.prototype=sE.prototype={constructor:rE,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,n){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+n)},bezierCurveTo:function(t,e,i,n,o,a){this._+="C"+ +t+","+ +e+","+ +i+","+ +n+","+(this._x1=+o)+","+(this._y1=+a)},arcTo:function(t,e,i,n,o){t=+t,e=+e,i=+i,n=+n,o=+o;var a=this._x1,r=this._y1,s=i-t,l=n-e,c=a-t,u=r-e,d=c*c+u*u;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>oE)if(Math.abs(u*s-l*c)>oE&&o){var h=i-a,p=n-r,f=s*s+l*l,g=h*h+p*p,m=Math.sqrt(f),v=Math.sqrt(d),y=o*Math.tan((iE-Math.acos((f+d-g)/(2*m*v)))/2),C=y/v,b=y/m;Math.abs(C-1)>oE&&(this._+="L"+(t+C*c)+","+(e+C*u)),this._+="A"+o+","+o+",0,0,"+ +(u*h>c*p)+","+(this._x1=t+b*s)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,i,n,o,a){t=+t,e=+e,a=!!a;var r=(i=+i)*Math.cos(n),s=i*Math.sin(n),l=t+r,c=e+s,u=1^a,d=a?n-o:o-n;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>oE||Math.abs(this._y1-c)>oE)&&(this._+="L"+l+","+c),i&&(d<0&&(d=d%nE+nE),d>aE?this._+="A"+i+","+i+",0,1,"+u+","+(t-r)+","+(e-s)+"A"+i+","+i+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):d>oE&&(this._+="A"+i+","+i+",0,"+ +(d>=iE)+","+u+","+(this._x1=t+i*Math.cos(o))+","+(this._y1=e+i*Math.sin(o))))},rect:function(t,e,i,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +n+"h"+-i+"Z"},toString:function(){return this._}};var lE=sE;Array.prototype.slice;function cE(t){return function(){return t}}function uE(t){this._context=t}function dE(t){return new uE(t)}function hE(t){return t[0]}function pE(t){return t[1]}function fE(t,e){var i=cE(!0),n=null,o=dE,a=null;function r(r){var s,l,c,u=(r=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(r)).length,d=!1;for(null==n&&(a=o(c=lE())),s=0;s<=u;++s)!(s<u&&i(l=r[s],s,r))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(l,s,r),+e(l,s,r));if(c)return a=null,c+""||null}return t="function"==typeof t?t:void 0===t?hE:cE(t),e="function"==typeof e?e:void 0===e?pE:cE(e),r.x=function(e){return arguments.length?(t="function"==typeof e?e:cE(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:cE(+t),r):e},r.defined=function(t){return arguments.length?(i="function"==typeof t?t:cE(!!t),r):i},r.curve=function(t){return arguments.length?(o=t,null!=n&&(a=o(n)),r):o},r.context=function(t){return arguments.length?(null==t?n=a=null:a=o(n=t),r):n},r}function gE(t){return t<0?-1:1}function mE(t,e,i){var n=t._x1-t._x0,o=e-t._x1,a=(t._y1-t._y0)/(n||o<0&&-0),r=(i-t._y1)/(o||n<0&&-0),s=(a*o+r*n)/(n+o);return(gE(a)+gE(r))*Math.min(Math.abs(a),Math.abs(r),.5*Math.abs(s))||0}function vE(t,e){var i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-e)/2:e}function yE(t,e,i){var n=t._x0,o=t._y0,a=t._x1,r=t._y1,s=(a-n)/3;t._context.bezierCurveTo(n+s,o+s*e,a-s,r-s*i,a,r)}function CE(t){this._context=t}function bE(t){this._context=new SE(t)}function SE(t){this._context=t}function xE(t){return new CE(t)}function EE(t,e,i){this.k=t,this.x=e,this.y=i}uE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},CE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yE(this,this._t0,vE(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var i=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,yE(this,vE(this,i=mE(this,t,e)),i);break;default:yE(this,this._t0,i=mE(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=i}}},(bE.prototype=Object.create(CE.prototype)).point=function(t,e){CE.prototype.point.call(this,e,t)},SE.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,i,n,o,a){this._context.bezierCurveTo(e,t,n,i,a,o)}},EE.prototype={constructor:EE,scale:function(t){return 1===t?this:new EE(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new EE(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new EE(1,0,0);EE.prototype;var AE=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"#divPriceHistory .x.axis line {\n            stroke: none;\n        }\n        #divPriceHistory .x.axis path {\n            stroke: #EDEBE9;\n        }\n        #divPriceHistory .x.axis text {\n            fill: #767676;\n            font-size: 13px;\n            font-weight: 700;\n            margin-top: 5px;\n        }\n        #divPriceHistory text.x.axis {\n            fill: #767676;\n            font-size: 13px;\n            font-weight: 700;\n            margin-top: 5px;\n        }\n        #divPriceHistory tspan.currPriceDrop {\n            font-size: 16px;\n            line-height: 20px;\n            fill: #22865E;\n            font-weight: 700;\n        }\n\n        #divPriceHistory tspan.textBig {\n            font-size: 24px !important;\n            line-height: 44px !important;\n            font-weight: 400 !important;\n        }\n        #divPriceHistory tspan.textWhite {\n            fill: #FFFFFF!important;\n        }\n        #divPriceHistory tspan.textBold {\n            font-weight: 500;\n            fill: #000000!important;\n        }\n        #divPriceHistory tspan.currPriceIncrease {\n            font-size: 16px;\n            line-height: 20px;\n            fill: #D54034;\n            font-weight: 700;\n        }\n        #divPriceHistory tspan.currFairPrice {\n            font-size: 16px;\n            line-height: 20px;\n            fill: #3470EB;\n            font-weight: 700;\n        }\n        #divPriceHistory tspan.price {\n            font-size: 1.2em;\n            line-height: 16px;\n            fill: #797775;\n            font-weight: 700;\n        }\n        #divPriceHistory tspan.label {\n            font-size: 1.1em;\n            line-height: 16px;\n            fill: #727575;\n            font-weight: 700;\n        }\n        #divPriceHistory tspan.desc {\n            font-size: 1.1em;\n            line-height: 16px;\n            fill: #727575;\n        }\n        #divPriceHistory tspan.median {\n            fill: #727575;\n        }\n        #btnPHInfo {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n        .gotItBtn:focus-visible {\n            outline: 3px solid #878787;\n        }\n        @media (prefers-color-scheme: dark) {\n            #divPriceHistory tspan.currPriceDrop {\n                fill: #4BDBA2;\n            }\n            #divPriceHistory tspan.currPriceIncrease {\n                fill: #FFCBC7;\n            }\n            #divPriceHistory tspan.currFairPrice {\n                fill: #86E5F3;\n            }\n            #divPriceHistory tspan.price {\n                fill: #FFFFFF;\n            }\n            #divPriceHistory tspan.label {\n                fill: #FFFFFF;\n            }\n            #divPriceHistory tspan.desc {\n                fill: #FFFFFF;\n            }\n            #divPriceHistory tspan.median {\n                fill: #FFFFFF;\n            }\n            #divPriceHistory tspan.textBold {\n                fill: #FFFFFF!important;\n            }\n            .gotItBtn:focus-visible {\n                outline: 3px solid #FFFFFF;\n            }\n        }\n        @media (forced-colors: active) {\n            #divPriceHistory .ph_head {\n                color: windowText;\n            }\n            #divPriceHistory tspan.currPriceDrop {\n                fill: windowText;\n            }\n            #divPriceHistory tspan.currPriceIncrease {\n                fill: windowText;\n            }\n            #divPriceHistory tspan.currFairPrice {\n                fill: windowText;\n            }\n            #divPriceHistory tspan.price {\n                fill: windowText;\n            }\n            #divPriceHistory tspan.label {\n                fill: windowText;\n            }\n            #divPriceHistory tspan.desc {\n                fill: windowText;\n            }\n            #divPriceHistory tspan.median {\n                fill: windowText;\n            }\n        }"}},{key:"getPriceHistoryInlineRatingRefreshStyles",value:function(){return"\n            .ph_info > div { margin-bottom: 8px !important;}\n            .ph_info > div > div { margin-bottom: 0 !important; }\n            .ph_title {\n                font-size: 16px;\n                font-weight: 600;\n                line-height: normal;\n                margin-top: 4px;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n            }"}},{key:"getSmallerNotificationCssStyles",value:function(){return"\n        #divContentWrapper {\n            width: 268px;\n        }\n        .actionsButtonRefresh {\n            min-width: 236px;\n            height: 36px;\n            font-size: 14px;\n        }\n        "}}]),t}();function TE(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return IE(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return IE(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function IE(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function DE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var kE="#008847",wE="#DF352C",RE="#165CC5",OE="#4BDBA2",PE="#FFA39C",ME="#34D3EB",NE=function(e){(0,O.Z)(c,e);var i,r=DE(c);function c(t,e,i){var n;return(0,s.Z)(this,c),n=r.call(this),(0,I.Z)((0,R.Z)(n),"assets",void 0),(0,I.Z)((0,R.Z)(n),"stateManagement",void 0),(0,I.Z)((0,R.Z)(n),"flyoutData",void 0),(0,I.Z)((0,R.Z)(n),"refreshCount",0),(0,I.Z)((0,R.Z)(n),"utilities",void 0),(0,I.Z)((0,R.Z)(n),"logModule",void 0),(0,I.Z)((0,R.Z)(n),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(n),"todayString",void 0),(0,I.Z)((0,R.Z)(n),"lowString",void 0),(0,I.Z)((0,R.Z)(n),"highString",void 0),(0,I.Z)((0,R.Z)(n),"wasPriceHistorySectionExpanded",void 0),(0,I.Z)((0,R.Z)(n),"graphWidth",void 0),(0,I.Z)((0,R.Z)(n),"maxRefresh",100),(0,I.Z)((0,R.Z)(n),"sectionId","divPriceHistorySection"),(0,I.Z)((0,R.Z)(n),"loadingUXId","divPHLoadingStateContainer"),n.logModule=i.logModule,n.stateManagement=t,n.pageHandlerModule=i.pageHandlerModule,n.flyoutData=e,n.todayString=n.flyoutData.strings.phToday,n.lowString=n.flyoutData.strings.phLow,n.highString=n.flyoutData.strings.phHigh,n.utilities=i.viewModulesUtilities,n.wasPriceHistorySectionExpanded=!1,n.assets=new AE,n}return(0,l.Z)(c,[{key:"GetModuleName",value:function(){return D.GX.PRICEHISTORY}},{key:"ShouldRenderModule",value:function(){var t,e,i,n,o,a=this,r=this.flyoutData.dataStoreModule.PriceComparisonData;if(null!==(e=(null==r||null===(t=r.segment)||void 0===t?void 0:t.toLowerCase())===D.VG.AUTOS&&(null==r?void 0:r.CompetingPrices)&&(null==r?void 0:r.CompetingPrices.length)>0)&&void 0!==e&&e)return Promise.resolve(!1);var s=this.flyoutData.dataStoreModule.PriceHistoryData,l=null!==(i=null===(n=this.flyoutData.dataStoreModule.CouponData)||void 0===n?void 0:n.isCheckoutPageWithAutoApply)&&void 0!==i&&i,c=null==s?void 0:s.DailyPrices,u=null!==(o=s&&c&&c.length>=2&&(!l||"amazon.com"===this.flyoutData.common.domain))&&void 0!==o&&o,d=!1;try{d="4"===new URL(this.flyoutData.common.lastCommittedURL).searchParams.get("bing_shopping_campaign_guid")}catch(t){}var h="false";this.flyoutData.common.isPane&&(h=vt("isPDP"));var p=(this.flyoutData.common.openedWith&&this.flyoutData.common.openedWith===D.Te.Auto&&this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_BING_CAMPAIGN&&d||"true"===h)&&!u;return this.stateManagement.addEventListener(Ia.e1.ModulesRendered,this.updatePriceGraph.bind(this)),this.stateManagement.addEventListener(Ia.e1.onFlyoutResize,this.updatePriceGraph.bind(this)),this.stateManagement.addEventListener(Ia.e1.CreatePHHeader,(function(t){if(t&&t.detail&&t.detail.section&&s){var e=t.detail.section;s.ShowPriceHistoryInsight?a.renderPriceHistoryUXWithInsight(e,s):a.renderPriceHistoryUXWithoutInsight(e,s)}})),this.stateManagement.addEventListener(Ia.e1.PDPUpdate,(function(t){var e=new CustomEvent(Ia.e1.PDPRemoved,{detail:{moduleName:a.GetModuleName()}});if(t&&t.detail&&t.detail.data&&t.detail.data.priceHistory&&t.detail.data.priceHistory.priceHistoryData&&!a.flyoutData.dataStoreModule.PriceHistoryData){var i=t.detail.data;i?(a.refreshCount=0,a.updatePHModule(i)):a.stateManagement.dispatchEvent(e)}else a.flyoutData.dataStoreModule.PriceHistoryData||a.stateManagement.dispatchEvent(e)})),p?Promise.resolve(p):Promise.resolve(u)}},{key:"renderModule",value:function(){var t=this.flyoutData.dataStoreModule.PriceHistoryData;if(!t){var e=document.createElement("msft-edge-shopping-section");e.id=this.sectionId,e.title="Price history",this.utilities.createPDPLoadingStateUX(e,this.loadingUXId,this.sectionId,this.stateManagement);var i=this.CreateModule(e,D.H7.PRICEHISTORY,D.GX.PRICEHISTORY,D.$k.CONTEXTUAL);return Promise.resolve(i)}if(t.DailyPrices&&t.DailyPrices.length>=2){var n;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var r=this.flyoutData.common.shopping.querySelector("#".concat(this.sectionId));r?n=r:((n=document.createElement("msft-edge-shopping-section")).id=this.sectionId,n.accordion=!0,n.expanded=!1,n.title="Price history"),this.utilities.shouldRenderSmallNotification()&&(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getSmallerNotificationCssStyles()),this.utilities.dismissNotificationTimeOut()),this.populatePriceList(t,n);var s=t.PriceHistoryInsightType;if(this.flyoutData.common.openedWith&&this.flyoutData.common.openedWith===D.Te.Auto){var l=new o.Z(a.xu.AutoTrigger);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"Price history - auto trigger".concat(s?" - "+s:""),l)}else{var c=new o.Z(a.xu.UserTrigger);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"Price history - manual trigger".concat(s?" - "+s:""),c)}var u=this.pageHandlerModule,d=this.wasPriceHistorySectionExpanded;if(n.addEventListener("click",(function t(){if(d&&(u.RecordAsUserAction(Ca.bS.HIDE_PRICE_HISTORY),n&&n.removeEventListener("click",t)),d=!0,n){var e=n.shadowRoot;if(e){var i=e.querySelector("fluent-accordion-item");i&&(i.classList.contains("expanded")||u.RecordAsUserAction(Ca.bS.VIEW_PRICE_HISTORY))}}})),n.children&&n.children.length>0){var h=this.CreateModule(n,D.H7.PRICEHISTORY,D.GX.PRICEHISTORY,D.$k.CONTEXTUAL);return Promise.resolve(h)}}return Promise.resolve(null)}},{key:"populateMainHeader",value:function(){var t,e=this,i=this.flyoutData.common.shopping.querySelector("#".concat(this.sectionId));if(i&&(i.style.marginTop="0px",i.style.textAlign="start",i.style.marginLeft="auto",i.style.width="100%",i.slot="header-content",null!==(t=this.flyoutData.dataStoreModule.RatingsAndReviewsData)&&void 0!==t&&t.canCreateInlineRating)){var n=i.querySelector(".ph_info"),o=new CustomEvent(Ia.e1.CreateInlineRating,{detail:{callback:function(t){if(n&&t){var o;e.utilities.applyStyles(i,e.assets.getPriceHistoryInlineRatingRefreshStyles());var a=e.flyoutData.dataStoreModule.PriceHistoryData,r=n.querySelector(".ph_head"),s=n.querySelector(".ph_ill"),l=null==a||null===(o=a.ProductDetails)||void 0===o?void 0:o.title;if(r&&s&&l){r.remove();var c=e.utilities.createElement("div",{className:"ph_title"},l);s.insertAdjacentElement("afterend",t),s.insertAdjacentElement("afterend",c)}else n.appendChild(t)}},moduleName:D.GX.PRICEHISTORY}});this.stateManagement.dispatchEvent(o)}}},{key:"PostProcessing",value:function(t,e,i){var n=0===e,r=this.flyoutData.dataStoreModule.PriceHistoryData,s=!1;try{s="4"===new URL(this.flyoutData.common.lastCommittedURL).searchParams.get("auto_show_edge_shopping_flyout")}catch(t){var l=new o.Z(a.xu.OnErrorInvoked);this.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"Invalid lastCommittedURL",l)}if(this.flyoutData.common.openedWith&&this.flyoutData.common.openedWith===D.Te.Auto&&!s&&r&&r.TriggerPriceHistoryAlert&&this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_PRICE_HISTORY)if(n){var c=new o.Z(a.xu.FlyoutAutoPriceHistoryTrigger);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"",c)}else{var u=this.stateManagement.getState(Ia.IY.topModuleName),d=new o.Z(a.xu.ErrorWrongAutoTrigger);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"Price History - Wrong module in pole position ".concat(u),d)}}},{key:"getPriceDifference",value:function(t,e){var i,n=null===(i=this.getStrikeoutPricePoint(t,e))||void 0===i?void 0:i.minPrice,o=t.CurrentPrice;return n?Math.abs(o-n):void 0}},{key:"createPriceHistoryTypeIllustration",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.utilities.createElement("DIV",{className:"ph_ill",style:"\n                ".concat(i?"":"margin-bottom: 10px;","\n                ")}),o=this.utilities.createElement("IMG",{style:"display: flex; place-self: center;"});o.setAttribute("aria-hidden","true"),t===ca.PRICEDROP?o.src=this.flyoutData.common.resourcesEndpoint+"priceHistory/decreaseTrend.svg":t===ca.PRICEINCREASE?o.src=this.flyoutData.common.resourcesEndpoint+"priceHistory/increaseTrend.svg":o.src=this.flyoutData.common.resourcesEndpoint+"priceHistory/stableTrend.svg";var a=this.flyoutData.common.currentTheme===D.Q2.Dark?"#FFFFFF":"rgba(0, 0, 0, 0.83)",r=this.utilities.createElement("span",{style:"\n                    font-size: 36px;\n                    color: transparent;\n                    line-height: 40px;\n                    font-weight: 500;\n                    display: flex;\n                    flex-direction: row;\n                    column-gap: 8px;\n                    background-image: ".concat(this.flyoutData.common.currentTheme===D.Q2.Dark?"linear-gradient(267.26deg, #3C9CF4 18.23%, #5EC4FE 100%)":"linear-gradient(267.26deg, #165AC2 0%, #0C6DFF 100%)",";\n                    background-clip: text;\n                    -webkit-background-clip: text;\n                    ").concat("","\n                ")}),s=this.utilities.createElement("div",{style:"\n                    font-size: 26px;\n                    line-height: 34px;\n                    color: ".concat(a,";\n                    text-align: left;\n                ")});if(this.utilities.shouldRenderSmallNotification()&&(s.style.fontSize="20px",s.style.lineHeight="24px"),t===ca.PRICEDROP||t===ca.PRICEINCREASE)Tt.SO.queueUpdate((function(){return e.addPricePercentage(t,r,s,n,o)}));else{n.style.fontSize="26px",n.style.lineHeight="34px",n.style.fontWeight="400",n.style.color=a,r.textContent=this.flyoutData.strings.phStableLabel,o.style.marginTop="5px";var l=this.utilities.createElement("DIV");l.appendChild(r),r.appendChild(o),this.utilities.replaceElementInKey(n,this.flyoutData.strings.phPriceStableRefresh,l)}return n}},{key:"updatePHModule",value:(i=(0,t.Z)(n().mark((function t(e){var i,o,a,r,s,l=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.flyoutData.dataStoreModule.PriceHistoryData=new va(e.priceHistory,e.price,e.base64ProductImage,this.flyoutData.common.domain,this.flyoutData.experimentData),!(i=this.flyoutData.common.shopping.querySelector("#".concat(this.loadingUXId)))){t.next=10;break}return t.next=6,this.renderModule();case 6:(o=t.sent)&&o.element?(i.remove(),this.flyoutData.common.isPane&&(o.element.expanded=!0),a=D.H7.PRICEHISTORY,this.stateManagement.getState(Ia.IY.topModuleName)===D.GX.PRICEHISTORY&&(this.populateMainHeader(),a=0),Tt.SO.queueUpdate((function(){l.utilities.styleModules(o,a)})),this.PostProcessing(o.name,a,o.element),this.utilities.sendFlyoutUpdateEvent(this.stateManagement,o),this.refreshCount=0,this.updatePriceGraph()):null===(r=i.parentElement)||void 0===r||r.remove(),t.next=14;break;case 10:return t.next=12,this.renderModule();case 12:(s=t.sent)&&s.element&&(this.stateManagement.getState(Ia.IY.modulesRendered)?(this.appendPHUpdateElement(s),this.PostProcessing(s.name,s.priority,s.element)):this.stateManagement.addEventListener(Ia.e1.ModulesRendered,(function(){l.appendPHUpdateElement(s),l.PostProcessing(s.name,s.priority,s.element)})),this.utilities.sendFlyoutUpdateEvent(this.stateManagement,s),this.refreshCount=0,this.updatePriceGraph());case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0);case 19:case"end":return t.stop()}}),t,this,[[0,16]])}))),function(t){return i.apply(this,arguments)})},{key:"appendPHUpdateElement",value:function(t){var e,i=this;this.utilities.appendNewModuleToFlyout(t);var n=null===(e=this.flyoutData.dataStoreModule.PriceHistoryData)||void 0===e?void 0:e.getPriceHistoryType();this.flyoutData.common.isPane?t.element.expanded=!0:n!==ca.PRICEDROP&&n!==ca.PRICEINCREASE||this.flyoutData.common.openedWith===D.Te.Auto||(t.element.expanded=!0),Tt.SO.queueUpdate((function(){i.utilities.sendCTRLog(t,t.priority,i.stateManagement.getState(Ia.IY.isAutoApplyVisible),i.stateManagement.getState(Ia.IY.topModuleName),ya.g.EdgeImpressionId),i.refreshCount=0;var e=new CustomEvent(Ia.e1.ModulesRendered);i.stateManagement.dispatchEvent(e)}))}},{key:"addPricePercentage",value:function(t,e,i,n,o){if(t===ca.PRICEDROP){var a,r,s=null===(a=this.flyoutData.dataStoreModule.PriceHistoryData)||void 0===a?void 0:a.DailyPriceDropPercentage,l=!1;null!=s&&(r=this.utilities.toFixedSafe(Math.abs(s),0),l=!0),e.textContent=r+"% ",e.style.backgroundImage=this.flyoutData.common.currentTheme===D.Q2.Dark?"linear-gradient(267.48deg, #43E498 31.68%, #32DDE8 97.64%)":"linear-gradient(267.48deg, #008847 31.68%, #02838B 97.64%)",i.textContent=this.flyoutData.strings.phPriceDrop.toLowerCase(),l&&(e.appendChild(o),n.appendChild(e)),n.appendChild(i)}else if(t===ca.PRICEINCREASE){var c,u,d=null===(c=this.flyoutData.dataStoreModule.PriceHistoryData)||void 0===c?void 0:c.DailyPriceDropPercentage,h=!1;null!=d&&(u=this.utilities.toFixedSafe(Math.abs(d),0),h=!0),e.textContent=u+"% ",e.style.backgroundImage=this.flyoutData.common.currentTheme===D.Q2.Dark?"linear-gradient(267.48deg, #EE2757 -7.9%, #FF762B 97.64%)":"linear-gradient(267.48deg, #C7274D -7.9%, #D04A00 97.64%)",i.textContent=this.flyoutData.strings.phPriceIncrease.toLowerCase(),h&&(e.appendChild(o),n.appendChild(e)),n.appendChild(i)}}},{key:"getGraphAriaLabel",value:function(t,e,i,n){if(!n)return"";if(!t||i===ca.FAIRPRICE)return this.utilities.replaceValueInKey("phGraphLabel",this.flyoutData.strings.phGraphLabel,"".concat(n).concat(e.minPrice));if(t&&n){var o="",a="";switch(i){case ca.PRICEDROP:o=this.highString,a="decreased";break;case ca.PRICEINCREASE:o=this.lowString,a="increased"}return"The ".concat(o," price was ").concat(n).concat(t.minPrice," on ").concat(LS("%B %d")(t.dtg),", and today it has ").concat(a," to ").concat(n).concat(e.minPrice)}return""}},{key:"drawPriceHistoryChart",value:function(t,e,i,n){var o=this,r=t.DailyPrices;if(r.length<2)return null;var s=this.isLastPriceDateToday(t),l=50,c=50,u=150,d=function(){return db.apply(eE(wS,RS,sS,aS,qb,jb,Kb,Wb,Vb,LS).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().range([0,n]),h=wb().range([100,0]);d.domain(function(t,e){let i,n;if(void 0===e)for(const e of t)null!=e&&(void 0===i?e>=e&&(i=n=e):(i>e&&(i=e),n<e&&(n=e)));else{let o=-1;for(let a of t)null!=(a=e(a,++o,t))&&(void 0===i?a>=a&&(i=n=a):(i>a&&(i=a),n<a&&(n=a)))}return[i,n]}(r,(function(t){return t.dtg}))),h.domain([hm(r,(function(t){return t.minPrice/1.2})),dm(r,(function(t){return 1.2*t.minPrice}))]);var p=r[0],f=r[r.length-1],g=this.getCriticalPoints(r),m=g.length>0?this.getMinCriticalPoint(g,f):null,v=g.length>0?this.getMaxCriticalPoint(g,r[r.length-1],m&&m.minPrice?m.minPrice:Number.NEGATIVE_INFINITY,d):null,y=this.getLowPoint(p,f,m),C=this.getHighPoint(p,f,v),b=t.MedianPrice,S={x:f.dtg,y:f.minPrice,text:this.todayString},x=y?{text:this.lowString,x:y.dtg,y:y.minPrice}:null,E=C?{text:this.highString,x:C.dtg,y:C.minPrice}:null,A=[].concat(rm(x?[x]:[]),rm(E?[E]:[]),[S]),T=this.getStrikeoutPricePoint(t,e),I=this.getGraphAriaLabel(T,f,e,i),k=fE().x((function(t){return d(t.dtg)})).y((function(t){return h(t.minPrice)})).curve(xE),w=document.createElementNS("http://www.w3.org/2000/svg","svg"),R=0,O=c+15,P=function(t){return"string"==typeof t?new Tv([[document.querySelector(t)]],[document.documentElement]):new Tv([[t]],Av)}(w).attr("aria-label",I).attr("width",n).attr("height",u).attr("tabindex","0").attr("viewBox","0 0 ".concat(n+c+l," ").concat(u)).on("mouseenter",(function(){return R=Date.now()})).on("mouseleave",(function(t){o.sendPriceHistoryDwellTimeTelemery(R,a.xu.PriceHistoryDwellTimeHover,"hover time over graph")})).append("g").attr("transform","translate(".concat(O,", ",10,")")),M=P.append("defs"),N=M.append("linearGradient").attr("x1","319.56").attr("y1","38.583").attr("x2","-4.00001").attr("y2","38.583").attr("gradientUnits","userSpaceOnUse").attr("id","linear-gradient");N.append("stop").attr("stop-color",this.flyoutData.common.currentTheme===D.Q2.Dark?"#A8A8A8":"#000000"),N.append("stop").attr("offset","0.979167").attr("stop-color",this.flyoutData.common.currentTheme===D.Q2.Dark?"#A8A8A8":"#000000"),N.append("stop").attr("stop-color",this.flyoutData.common.currentTheme===D.Q2.Dark?"#A8A8A8":"#000000"),M.append("linearGradient").attr("x1","1.67776e-07").attr("y1","22").attr("x2","112.278").attr("y2","-6.73097").attr("gradientUnits","userSpaceOnUse").attr("id","linear-gradient-today-drop").append("stop").attr("offset","1").attr("stop-color","#810BE3"),P.append("path").data([r]).attr("d",k).style("fill","none").style("stroke","url(#linear-gradient)").style("stroke-width",2);var L=P.append("g").style("opacity",1).style("transition-duration","0.4s").style("transition-property","opacity");L.append("line").attr("x1",d(S.x)).attr("y1",h(S.y)).attr("x2",d(S.x)).attr("y2",-25).style("stroke-width",1).style("stroke",(function(){if(s)switch(e){case ca.PRICEDROP:return o.flyoutData.common.currentTheme===D.Q2.Dark?OE:kE;case ca.PRICEINCREASE:return o.flyoutData.common.currentTheme===D.Q2.Dark?PE:wE;case ca.FAIRPRICE:return o.flyoutData.common.currentTheme===D.Q2.Dark?ME:RE}return o.flyoutData.common.currentTheme===D.Q2.Dark?"#A8A8A8":"#767676"})).style("stroke-dasharray","2").style("fill","none"),x&&L.append("line").attr("x1",d(x.x)).attr("y1",h(x.y)).attr("x2",d(x.x)).attr("y2",u).style("stroke-width",1).style("stroke",(function(){return o.flyoutData.common.currentTheme===D.Q2.Dark?"#A8A8A8":"#767676"})).style("stroke-dasharray","2").style("fill","none"),E&&L.append("line").attr("x1",d(E.x)).attr("y1",h(E.y)).attr("x2",d(E.x)).attr("y2",-25).style("stroke-width",1).style("stroke",(function(){return o.flyoutData.common.currentTheme===D.Q2.Dark?"#A8A8A8":"#767676"})).style("stroke-dasharray","2").style("fill","none"),L.selectAll(".dot").data(A).enter().append("circle").style("fill","var(--fill-color)").attr("cx",(function(t){return d(t.x)})).attr("cy",(function(t){return h(t.y)})).attr("r",(function(t){return t.text===o.todayString?12:8})),L.selectAll(".dot").data(A).enter().append("circle").attr("tabindex","0").attr("aria-label",(function(t){return t.text===o.todayString&&f&&f.minPrice?o.utilities.replaceValueInKey("todayLabel",o.flyoutData.strings.phTodayPriceAriaLabel,f.minPrice.toString()):t.text===o.lowString&&y&&y.minPrice&&y.dtg?o.utilities.replaceValueInKey("lowLabel",o.flyoutData.strings.phLowPriceArialLabel,y.minPrice.toString(),y.dtg.toString()):t.text===o.highString&&C&&C.minPrice&&C.dtg?o.utilities.replaceValueInKey("highLabel",o.flyoutData.strings.phHighPriceAriaLabel,C.minPrice.toString(),C.dtg.toString()):""})).style("fill",(function(t){if(t.text!==o.todayString)return o.flyoutData.common.currentTheme===D.Q2.Dark?"#FFFFFF":"#000000";switch(e){case ca.PRICEDROP:return o.flyoutData.common.currentTheme===D.Q2.Dark?OE:kE;case ca.PRICEINCREASE:return o.flyoutData.common.currentTheme===D.Q2.Dark?PE:wE;case ca.FAIRPRICE:return o.flyoutData.common.currentTheme===D.Q2.Dark?ME:RE}})).attr("cx",(function(t){return d(t.x)})).attr("cy",(function(t){return h(t.y)})).attr("r",(function(t){return t.text===o.todayString?8:4})),s&&L.selectAll(".node").data(A).enter().append("g").attr("transform",(function(t){return t.text===o.lowString?"translate(-10,-40)":"translate(-10,-25)"})).append("rect").attr("height",(function(t){return t.text===o.todayString?"26px":"0px"})).attr("width","0px").attr("fill",(function(t){if(t.text===o.todayString)switch(e){case ca.PRICEDROP:return o.flyoutData.common.currentTheme===D.Q2.Dark?"#008847":"#028948";case ca.PRICEINCREASE:return o.flyoutData.common.currentTheme===D.Q2.Dark?"#C7274D":"#C82B45";case ca.FAIRPRICE:return o.flyoutData.common.currentTheme===D.Q2.Dark?"#165AC2":"#165CC5"}})).attr("x",(function(t){return t.text,o.todayString,d(t.x)})).attr("y",-7).attr("id",(function(t){if(t.text===o.todayString)return"todayTextRect"})).attr("rx",4);var _=L.selectAll(".node").data(A).enter().append("g").attr("transform",(function(t){return t.text===o.todayString&&s?"translate(-25, -25)":t.text===o.lowString?"translate(-10,-40)":"translate(-10,-25)"})).append("text").attr("text-anchor","end").attr("x",(function(t){return t.text,o.todayString,d(t.x)})).attr("y",(function(t){return t.text===o.lowString?u:0})).attr("id",(function(t){if(t.text===o.todayString)return"todayText"}));return _.append("tspan").text((function(t){return t.text===o.todayString&&s?"".concat(i).concat(o.utilities.toFixedSafe(Number(t.y),2)," ").concat(t.text.toUpperCase()):"".concat(i).concat(o.utilities.toFixedSafe(Number(t.y),2))})).attr("class",(function(t){if(t.text!==o.todayString||!s)return"price textBold";switch(e){case ca.PRICEDROP:return"currPriceDrop textWhite";case ca.PRICEINCREASE:return"currPriceIncrease textWhite";case ca.FAIRPRICE:return"currFairPrice textWhite"}})).attr("dx",(function(){return"0.4em"})).attr("dy","0.8em"),_.append("tspan").text((function(t){return t.text===o.todayString?"":t.text.charAt(0).toUpperCase()+t.text.slice(1)})).attr("x",(function(t){return d(t.x)})).attr("dx","0.4em").attr("dy","1.1em").attr("class","desc"),_.append("tspan").text((function(t){return t.text===o.todayString&&s?"":LS("%b %d")(t.x)})).attr("x",(function(t){return d(t.x)})).attr("dx","0.4em").attr("dy","1.1em").attr("class","desc"),this.setUpInteractiveHover(r,O,w,P,n,u,d,h,i,L),this.setUpMedianLine(b,L,d,h,n,i,E,x),w}},{key:"setUpMedianLine",value:function(t,e,i,n,o,a,r,s){var l,c=null!==(l=this.flyoutData.common.currentTheme===D.Q2.Dark)&&void 0!==l&&l;t&&e.append("line").attr("x1",i(0)).attr("y1",n(t)).attr("x2",o).attr("y2",n(t)).style("stroke-width",1).style("stroke",c?"#FFFFFF":"#666666").style("stroke-dasharray","3 6").style("fill","none").attr("pointer-events","none")}},{key:"setUpInteractiveHover",value:function(t,e,i,n,o,a,r,s,l,c){var u=this,d=n.append("g").style("opacity",0).style("transition-duration","0.4s").style("transition-property","opacity");d.selectAll(".dot").data(t).enter().append("circle").style("fill",this.flyoutData.common.currentTheme===D.Q2.Dark?"#A8A8A8":"#767676").attr("cx",(function(t){return r(t.dtg)})).attr("cy",(function(t){return s(t.minPrice)})).attr("r",4);var h=d.append("g").attr("transform","translate(-10,-25)").append("text").attr("aria-hidden","true").attr("text-anchor","end").style("fill",this.flyoutData.common.currentTheme===D.Q2.Dark?"#FFFFFF":"#444444"),p=h.append("tspan").attr("class","price").attr("dx","0.4em").attr("dy","0.8em"),f=h.append("tspan").attr("class","desc").attr("dx","0.4em").attr("dy","1.1em"),g=d.append("line").attr("y1",-25).attr("y2",a).style("stroke-width",1).style("stroke",(function(){return u.flyoutData.common.currentTheme===D.Q2.Dark?"#A8A8A8":"#767676"})).style("stroke-dasharray","2").style("fill","none"),m=d.append("circle").attr("class","hover-price").style("fill",this.flyoutData.common.currentTheme===D.Q2.Dark?"#FFFFFF":"#363636").style("stroke",this.flyoutData.common.currentTheme===D.Q2.Dark?"#FFFFFF":"#363636").attr("r",4);n.append("rect").attr("width",o).attr("height",a).style("fill","none").style("pointer-events","all").on("mouseout",(function(){u.hideHoveredGroup(d,c)})).on("mousemove",(function(n){var o=i.createSVGPoint();o.x=n.clientX,o.y=n.clientY;var a=o.matrixTransform(i.getScreenCTM().inverse()).x-e,v=u.getClosestDataPointToTheHoverLine(t,r,a);null!==v?(u.showHoveredGroup(d,c),m.attr("transform","translate(".concat(r(v.dtg),", ").concat(s(v.minPrice),")")),p.attr("x",a),f.attr("x",a),h.attr("x",a).attr("y",0),p.text("".concat(l).concat(u.utilities.toFixedSafe(v.minPrice,2))),f.text("".concat(LS("%b %d")(v.dtg))),g.attr("x1",a).attr("x2",a)):u.hideHoveredGroup(d,c)}))}},{key:"getClosestDataPointToTheHoverLine",value:function(t,e,i){for(var n=e.invert(i),o=cm((function(t){return t.dtg})).left(t,n),a=[t[o-1],t[o]],r=Number.MAX_VALUE,s=null,l=0,c=a;l<c.length;l++){var u=c[l];if(void 0!==u){var d=e(u.dtg),h=Math.abs(d-i);r>h&&(r=h,s=u)}}return s}},{key:"sendPriceHistoryDwellTimeTelemery",value:function(t,e,i){var n=Date.now()-t,r=new o.Z(e);if(this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"Price history - ".concat(i," - ").concat(n," ms"),r),n>=1e3)try{this.pageHandlerModule.RecordAsUserEngagement(ng.VIEW_PRICE_HISTORY)}catch(t){var s=new o.Z(a.xu.ErrorToRecordEngagement);this.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,t,s)}}},{key:"hideHoveredGroup",value:function(t,e){t.style("opacity",0),e.style("opacity",1)}},{key:"showHoveredGroup",value:function(t,e){t.style("opacity",1),e.style("opacity",0)}},{key:"GetHeaderContent",value:function(t,e){return e&&""!==e?e:t===ca.PRICEDROP?this.flyoutData.strings.phTitlePriceDropped:t===ca.PRICEINCREASE?this.flyoutData.strings.phTitlePriceIncrease:this.flyoutData.strings.phTitleStable}},{key:"isLastPriceDateToday",value:function(t){if(t.DailyPrices.length>0){var e=new Date,i=t.DailyPrices[t.DailyPrices.length-1].dtg;return 0===t.getDaysDifference(e,i)}return!1}},{key:"populatePriceList",value:function(t,e){var i=this;if(t.ShowPriceHistoryInsight?this.renderPriceHistoryUXWithInsight(e,t):this.renderPriceHistoryUXWithoutInsight(e,t),this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_PRICE_HISTORY&&this.renderPriceHistoryGraph(e),this.utilities.shouldRenderSmallNotification()&&e.addEventListener("mouseover",(function(){i.renderPriceHistoryGraph(e)})),!this.flyoutData.experimentData.isExperimentActive(xt.H.snooze)&&!this.flyoutData.experimentData.isExperimentActive(xt.H.remindLaterFooter)&&this.flyoutData.common.openedWith===D.Te.Auto&&this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_PRICE_HISTORY){var n=this.utilities.createRemindLaterButton();n&&e.appendChild(n)}}},{key:"renderPriceHistoryGraph",value:function(t){var e=this.utilities.createElement("DIV",{style:"display: none;"});e.id="priceDropNotifChart";var i=this.utilities.createElement("DIV",{style:"margin-top: 12px;"});i.id="divPriceHistory",e.appendChild(i);var n=document.getElementById("priceDropNotifChart")?document.getElementById("priceDropNotifChart"):e;n&&(n.style.display="block"),t.appendChild(e)}},{key:"renderPriceHistoryUXWithInsight",value:function(t,e){var i,n,r,s,l,c,u,d=e.DailyPrices;if(0===d.length||!e||null==e||!e.ProductDetails)return null;var h=e.getPriceHistoryType();if(h===ca.PRICEDROP){var p=new o.Z(a.xu.PriceHistoryPriceDrop);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"",p)}else if(h===ca.PRICEINCREASE){var f=new o.Z(a.xu.PriceHistoryPriceIncrease);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"",f)}else{var g=new o.Z(a.xu.PriceHistoryPriceStable);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"",g)}var m,v=(null==e||null===(i=e.ProductDetails)||void 0===i?void 0:i.currency)||"$",y="".concat(v).concat(this.utilities.toFixedSafe(d[d.length-1].minPrice,2)),C=null!=e&&null!==(n=e.ProductDetails)&&void 0!==n&&n.title&&""!==(null==e||null===(r=e.ProductDetails)||void 0===r?void 0:r.title)?null==e||null===(s=e.ProductDetails)||void 0===s?void 0:s.title:"Product",b=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: row; font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n                        padding-left: 12px; padding-right: 12px;"}),S=this.stateManagement.getState(Ia.IY.topModuleName),x=null!=e&&null!==(l=e.ProductDetails)&&void 0!==l&&l.base64ProductImage&&S!==D.GX.PRICECOMPARISON?null==e||null===(c=e.ProductDetails)||void 0===c?void 0:c.base64ProductImage:void 0;if(!x){var E=new o.Z(a.xu.PriceHistoryNoImage);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"Price history - no image",E)}if(x){m=this.utilities.createElement("DIV",{style:"background-color: white;\n                    display: flex;\n                    margin-right: 12px;\n                    justify-content: space-around;\n                    align-items: center;\n                    flex-direction: column;"});var A=document.createElement("IMG");A.src="data:image/png;base64,".concat(x),A.alt=C,A.width=103,A.height=109,this.utilities.shouldRenderSmallNotification()&&(m.style.marginTop="-10px",m.style.marginRight="0px",A.width=88,A.height=88),A.style.objectFit="contain",A.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),m.appendChild(A)}var T=this.utilities.createElement("DIV",{className:"ph_info",style:"display: flex; flex-direction: column; width: 100%;"}),I=this.createPriceHistoryTypeIllustration(h),k=this.setUpMoreInfoButton(e,v,t.id);this.utilities.shouldRenderSmallNotification()||T.appendChild(k);var w=this.utilities.createElement("DIV",{className:"ph_head"});w.textContent=x?this.GetHeaderContent(h):this.GetHeaderContent(h,C),w.style.fontSize="14px",w.style.lineHeight="20px",w.style.fontWeight="500",w.style.overflow="hidden",w.style.textOverflow="ellipsis",w.style.display="-webkit-box",w.style.webkitLineClamp="2",w.style.webkitBoxOrient="vertical",w.style.marginBottom="10px",w.style.marginTop="10px",w.style.marginRight="5px",T.appendChild(I);var R=this.utilities.createElement("DIV",{style:"\n                    display: flex;\n                    align-items: baseline;\n                "}),O=null===(u=this.getStrikeoutPricePoint(e,h))||void 0===u?void 0:u.minPrice;if(O){var P=this.utilities.createElement("S",{style:"\n                    margin-right: 5px;\n                    color: ".concat(this.flyoutData.common.currentTheme===D.Q2.Dark?"#FFFFFF":"#757575",";\n                    font-size: 14px;\n                ")},"".concat(v).concat(this.utilities.toFixedSafe(O,2))),M=this.utilities.createElement("SPAN",{style:"\n                    position: absolute;\n                    clip: rect(0 0 0 0);\n                "},this.flyoutData.strings.phOldPrice);P.appendChild(M),R.appendChild(P)}var N=this.flyoutData.common.currentTheme===D.Q2.Dark?"#FFFFFF":"#444444",L=this.utilities.createElement("DIV",{style:"color: ".concat(N,";\n                    font-size: 18px;\n                    line-height: 20px;\n                    font-weight: 600;\n                    margin-bottom: 6px;")},y),_=this.utilities.createElement("SPAN",{style:"\n                position: absolute;\n                clip: rect(0 0 0 0);\n            "},this.flyoutData.strings.phNewPrice);L.appendChild(_),R.appendChild(L),this.utilities.shouldRenderSmallNotification()?(b.appendChild(T),m&&b.appendChild(m)):(m&&b.appendChild(m),b.appendChild(T)),t.appendChild(b)}},{key:"renderPriceHistoryUXWithoutInsight",value:function(t,e){var i,n,o,a,r=this.stateManagement.getState(Ia.IY.topModuleName),s=null!=e&&null!==(i=e.ProductDetails)&&void 0!==i&&i.base64ProductImage&&r!==D.GX.PRICECOMPARISON?null==e||null===(n=e.ProductDetails)||void 0===n?void 0:n.base64ProductImage:void 0,l=null==e||null===(o=e.ProductDetails)||void 0===o?void 0:o.imageUrl,c=null==e||null===(a=e.ProductDetails)||void 0===a?void 0:a.title,u=this.utilities.createElement("DIV",{style:"\n                position: relative;\n                overflow: hidden;\n                padding: 0 12px;\n            "});if(l||s){var d=document.createElement("IMG");d.src=l||"data:image/png;base64,".concat(s),d.alt=c,d.width=103,d.height=109,d.style.objectFit="contain",d.style.float="left",d.style.marginRight="12px",d.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),u.appendChild(d)}var h=this.utilities.createElement("DIV",{style:"\n                display: inline-block;\n                position: ".concat(l||s?"absolute":"initial",";\n                bottom: 12px;\n            ")}),p=this.utilities.createElement("DIV",{style:"\n                font-size: 20px;\n                line-height: 24px;\n                font-weight: 700;\n            "},"Price history");if(h.appendChild(p),c&&""!==c){var f=this.utilities.createElement("DIV",{style:"\n                    display: -webkit-box;\n                    font-size: 16px;\n                    line-height: 22px;\n                    overflow: hidden;\n                    text-overflow: ellipsis;\n                    margin-top: 12px;\n                    -webkit-line-clamp: 2;\n                    -webkit-box-orient: vertical;\n                "},c);h.appendChild(f)}u.appendChild(h),t.appendChild(u)}},{key:"setUpMoreInfoButton",value:function(t,e,i){var n=this,r=this.utilities.createElement("DIV",{style:"align-self: flex-end;\n                margin-right: 10px;\n                position: relative;"}),s=this.utilities.createElement("IMG");s.src=this.flyoutData.common.resourcesEndpoint+"/priceHistory/infoIcon.svg",s.slot="hover-anchor",s.setAttribute("aria-labelledby","txtPHTooltip");var l=this.utilities.createElement("msft-shopping-tooltip");l.id="header-tooltip",l.style.alignSelf="center",this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_PRICE_HISTORY&&(l.style.marginLeft="0px",l.style.marginTop="0px");var c=t.MedianPrice,u=c?"".concat(e).concat(this.utilities.toFixedSafe(c,2)):"";l.content=this.utilities.replaceValueInKey("phTooltipText",this.flyoutData.strings.phTooltipText,u),l.id="txtPHTooltip";var d=0,h=0,p=!0;l.addEventListener("mouseenter",(function(){m()})),l.addEventListener("mouseleave",(function(){v()})),l.addEventListener("focus",(function(){m()})),l.addEventListener("blur",(function(){v()}));var f=this.logModule,g=!0,m=function(){if(g){if(g=!1,!(Date.now()-h>200))return;p=!0,d=Date.now();var t=new o.Z(a.xu.PriceHistoryShowMoreInfoTooltip);f.LogInfoEvent(a.R.EdgeFlyoutStatus,"Price history - show more info tooltip",t)}},v=function(){h=Date.now(),g=!0,setTimeout((function(){if(p){p=!1,n.sendPriceHistoryDwellTimeTelemery(d,a.xu.PriceHistoryDwellTimeHover,"hover time over info button");var t=new o.Z(a.xu.PriceHistoryHideMoreInfoTooltip);f.LogInfoEvent(a.R.EdgeFlyoutStatus,"Price history - hide more info tooltip",t)}}),200)};return l.addEventListener("hover",(function(){n.utilities.shouldDisplayTooltipSide(s,l,110)?(l.caratSide=xf.W.Right,l.caratTopOffset="0px",l.width="257px"):(l.caratSide=xf.W.Top,l.caratLeftOffset="193px",l.width="200px")})),l.append(s),r.appendChild(l),r}},{key:"getLowPoint",value:function(t,e,i){return!i&&t.minPrice>=e.minPrice||i&&i.dtg===e.dtg?null:i?t.minPrice!==e.minPrice&&t.minPrice<i.minPrice?t:i:t.minPrice<e.minPrice?t:null}},{key:"getHighPoint",value:function(t,e,i){return!i&&t.minPrice<=e.minPrice||i&&i.dtg===e.dtg?null:i?t.minPrice!==e.minPrice&&t.minPrice>i.minPrice?t:i:t.minPrice>e.minPrice?t:null}},{key:"getMinCriticalPoint",value:function(t,e){var i=t.reduce((function(t,e){return t.minPrice<e.minPrice?t:e}));return 1===t.length&&t[0].minPrice>e.minPrice?null:i}},{key:"getMaxCriticalPoint",value:function(t,e,i,n){var o,a=t.sort((function(t,e){return e.minPrice-t.minPrice})).filter((function(t){return t.minPrice>i})),r=this.utilities.toFixedSafe(e.minPrice,2).length;r=13*this.utilities.toFixedSafe(e.minPrice,2).length+13*this.flyoutData.strings.phToday.length+7;var s,l=TE(a);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(n(e.dtg)-n(c.dtg)>r){o=c;break}}}catch(t){l.e(t)}finally{l.f()}return o}},{key:"getCriticalPoints",value:function(t){if(t.length<3)return[];for(var e=[],i=t[1].minPrice-t[0].minPrice,n=2;n<t.length;n++){var o=t[n].minPrice,a=t[n-1].minPrice;((a-o)*i>0||a-o!=0&&0===i)&&e.push(t[n-1]),i=o-a}return e}},{key:"getStrikeoutPricePoint",value:function(t,e){var i=t.DailyPrices;if(i.length>1){if(e===ca.PRICEDROP){var n,o=i[0].minPrice,a=i[0].dtg,r=TE(i);try{for(r.s();!(n=r.n()).done;){var s=n.value;s.minPrice>o&&(o=s.minPrice,a=s.dtg)}}catch(t){r.e(t)}finally{r.f()}return{dtg:a,minPrice:o}}if(e===ca.PRICEINCREASE){var l,c=i[0].minPrice,u=i[0].dtg,d=TE(i);try{for(d.s();!(l=d.n()).done;){var h=l.value;h.minPrice<c&&(c=h.minPrice,u=h.dtg)}}catch(t){d.e(t)}finally{d.f()}return{dtg:u,minPrice:c}}}}},{key:"reDrawGraph",value:function(t){var e=this.flyoutData.dataStoreModule.PriceHistoryData;if(e){var i,n=e.getPriceHistoryType(),o=(null==e||null===(i=e.ProductDetails)||void 0===i?void 0:i.currency)||"$",a=this.drawPriceHistoryChart(e,n,o,t),r=this.flyoutData.common.shopping.querySelector("#divPriceHistory");if(r){var s=r.querySelector("svg");s&&s.remove(),a&&(this.graphWidth=t,r.appendChild(a))}}}},{key:"updatePriceGraph",value:function(){if(this.refreshCount++,this.refreshCount<this.maxRefresh){var t,e,i=null===(t=this.flyoutData.common.shopping)||void 0===t?void 0:t.querySelector("#divPriceHistory"),n=null!==(e=null==i?void 0:i.offsetWidth)&&void 0!==e?e:0;if(0===n&&(n=319),i)(!i.querySelector("SVG")||i&&n>0&&n!==this.graphWidth)&&this.reDrawGraph(n);var o=document.getElementById("todayText"),a=document.getElementById("todayTextRect"),r=null==a?void 0:a.getAttribute("width");if(o&&a&&"0px"===r){var s=o.getBoundingClientRect().width+50;o.textContent&&o.textContent.length>0&&(s=10*o.textContent.length+8);var l=s;a.setAttribute("width",l+"px");var c=a.getAttribute("x");c&&a.setAttribute("x",parseInt(c,10)-l+4+"")}}}}]),c}(jf.Z),LE=NE;function _E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var FE,HE,ZE,BE,UE,GE=function(e){(0,O.Z)(r,e);var i,o,a=_E(r);function r(t,e,i){return(0,s.Z)(this,r),a.call(this,t,e,i)}return(0,l.Z)(r,[{key:"RenderNotification",value:(o=(0,t.Z)(n().mark((function t(e){var i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.renderModule();case 2:if(!(i=t.sent)||!i.element){t.next=13;break}return i.element.style.marginTop="0px",i.element.slot="header-content",i.element.title="",i.element.accordion=!1,i.element.style.width="100%",this.utilities.applyStyles(this.flyoutData.common.shopping,"::part(header) {\n                margin-top: 0px;\n                margin-bottom: 0px;\n                }\n                ::part(sections) {\n                    margin-top: 0px;\n                }"),this.utilities.shouldRenderSmallNotification()&&(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getSmallerNotificationCssStyles()),this.utilities.dismissNotificationTimeOut()),e.appendChild(i.element),t.abrupt("return",Promise.resolve(i));case 13:return t.abrupt("return",Promise.resolve(null));case 14:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"ShouldRenderNotification",value:(i=(0,t.Z)(n().mark((function t(){var e,i,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ShouldRenderModule();case 2:return i=t.sent,o=null!==(e=i&&this.flyoutData.common.openedWith===D.Te.Auto&&this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_PRICE_HISTORY)&&void 0!==e&&e,t.abrupt("return",o);case 5:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"GetNotificationName",value:function(){return D.sM.PRICEHISTORY}}]),r}(LE),VE=GE,$E=i(782),WE=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n            .divRewardWrapper {\n                width: 336px;\n                height: auto;\n                background: rgba(0, 120, 212, 0.05);\n                border: 1px solid rgba(250, 181, 39, 0.12);\n                box-sizing: border-box;\n                border-radius: 4px;\n            }\n            .divRewardsHeader {\n                display: grid;\n                grid-template-columns: auto auto;\n                margin: 12px;\n            }\n            .divRewardTitle {\n                width: 100%;\n                height: auto;\n                font-family: Segoe UI;\n                font-size: 16px;\n                font-weight: 600;\n                line-height: 22px;\n                display: flex;\n                align-items: center;\n                justify-content: flex-start;\n                color: rgba(0, 0, 0, 0.83);\n            }\n            .divRewardPointSection {\n                width: auto;\n                height: auto;\n                font-family: Segoe UI;\n                font-size: 12px;\n                font-weight: 600;\n                line-height: 16px;\n                display: flex;\n                justify-content: flex-end;\n                align-items: center;\n                color: rgba(0, 0, 0, 0.83);\n            }\n            .divRewardPoint {\n                width: auto;\n                text-align: right;\n                margin-right: 5px;\n            }\n            .divRewardPointIcon {\n                width: 12px;\n                height: 12px;\n                float:right;\n                place-self: center;\n            }\n            .divRewardDetailsSection {\n                height: auto;\n                margin: 12px;\n                text-align: start;\n                font-family: Segoe UI;\n                font-size: 12px;\n                line-height: 16px;\n                color: #333333;\n            }\n            .divRewardAdditionalLink {\n                margin-top: 5px;\n                height: auto;\n                width: auto;\n                display: block;\n            }\n            .divRewardFailedSignIn {\n                width: 100%;\n                height: auto;\n                font-family: Segoe UI;\n                font-size: 16px;\n                line-height: 20px;\n                justify-content: center;\n                display: grid;\n                margin-bottom: 10px;\n                grid-template-columns: auto auto;\n            }\n            .divRewardErrorIcon {\n                place-self: center;\n                margin-right: 5px;\n            }\n            .divRewardIconSet {\n                display: grid;\n                grid-template-columns: auto auto auto;\n                width: 93%;\n                height: auto;\n                margin-left: 12px;\n                font-family: Segoe UI;\n                font-size: 14px;\n                font-weight: 600;\n                line-height: 25px;\n            }\n            .divIconSection {\n                display: grid;\n                grid-template-columns: auto auto;\n                width: auto;\n                height: auto;\n            }\n            .detailLink {\n                vertical-align: super;\n                height: auto;\n            }\n            .detailLink {\n                vertical-align: super;\n                height: auto;\n                font-weight: 500;\n            }\n            .tailString {\n                display: inline;\n            }\n            #rewardButtonLearnMore {\n                margin-bottom: 12px;\n                margin-left: 11px;\n                width: 93%;\n                height: 32px;\n            }\n            #accordionItem {\n                margin-top: 0px;\n                margin-bottom: 0px;\n            }\n            #titleRewardTwo {\n                font-size: 20px;\n                line-height: 28px;\n                margin-left: 12px;\n            }\n            #detailRewardTwo {\n                font-size: 14px;\n                line-height: 20px;\n            }\n            @media (prefers-color-scheme: dark) {\n                .divRewardDetailsSection {\n                    color: #FFFFFF;\n                }\n                .divRewardWrapper {\n                    background: linear-gradient(0deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08)), rgba(0, 120, 212, 0.1);\n                }\n                .divRewardTitle,\n                .divRewardPointSection {\n                    color: #FFFFFF;\n                }\n                .cupIcon {\n                    fill: #FFFFFF;\n                }\n            }\n            @media screen and (-ms-high-contrast: white-on-black) {\n                .divRewardWrapper {\n                    background: #0078D4;\n                }\n                .divRewardTitle,\n                .divRewardPointSection {\n                    color: #FFFFFF;\n                }\n                .cupIcon {\n                    fill: #FFFFFF;\n                }\n            }"}},{key:"getCupIcon",value:function(){return A.Z.getTrustedHTML(FE||(FE=(0,E.Z)(['<svg class="cupIcon" width="12" height="12" viewBox="0 0 12 12" aria-hidden="true" fill="black" xmlns="http://www.w3.org/2000/svg">\n        <path d="M1.5 0C0.671573 0 0 0.671573 0 1.5V2.69253C0 3.21234 0.26912 3.6951 0.711267 3.96843L4.57713 6.35823C3.63807 6.86508 3 7.85803 3 9C3 10.6569 4.34315 12 6 12C7.65685 12 9 10.6569 9 9C9 7.85803 8.36193 6.86508 7.42287 6.35823L11.2887 3.96843C11.7309 3.6951 12 3.21234 12 2.69253V1.5C12 0.671573 11.3284 0 10.5 0H1.5ZM4 4.82581V1H8V4.82581L6.26291 5.89965C6.10179 5.99925 5.89821 5.99925 5.73709 5.89965L4 4.82581ZM6 7C7.10457 7 8 7.89543 8 9C8 10.1046 7.10457 11 6 11C4.89543 11 4 10.1046 4 9C4 7.89543 4.89543 7 6 7Z" fill-opacity="0.83"/>\n        </svg>'])))}},{key:"getErrorCircleIcon",value:function(){return A.Z.getTrustedHTML(HE||(HE=(0,E.Z)(['<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1ZM8 10.5C8.41421 10.5 8.75 10.8358 8.75 11.25C8.75 11.6642 8.41421 12 8 12C7.58579 12 7.25 11.6642 7.25 11.25C7.25 10.8358 7.58579 10.5 8 10.5ZM8 4C8.24546 4 8.44961 4.17688 8.49194 4.41012L8.5 4.5V9C8.5 9.27614 8.27614 9.5 8 9.5C7.75454 9.5 7.55039 9.32312 7.50806 9.08988L7.5 9V4.5C7.5 4.22386 7.72386 4 8 4Z" fill="#C42B1C"/>\n        </svg>'])))}},{key:"getCouponIcon",value:function(){return A.Z.getTrustedHTML(ZE||(ZE=(0,E.Z)(['<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <circle cx="14" cy="14" r="14" fill="#E0EFFA"/>\n        <path d="M16.6731 6.95142C16.0191 6.29744 14.9588 6.29744 14.3048 6.95142L6.95239 14.3038C6.29842 14.9578 6.29842 16.0181 6.95239 16.6721L7.82433 17.544C8.20443 17.9241 8.73798 17.8561 9.06037 17.6644C9.1988 17.5821 9.36033 17.5347 9.53463 17.5347C10.0484 17.5347 10.465 17.9513 10.465 18.465C10.465 18.6394 10.4176 18.8009 10.3353 18.9394C10.1436 19.2617 10.0756 19.7953 10.4557 20.1754L11.3277 21.0474C11.9817 21.7014 13.042 21.7014 13.696 21.0474L21.0483 13.695C21.7023 13.041 21.7023 11.9807 21.0483 11.3267L20.1764 10.4548C19.7963 10.0746 19.2626 10.1427 18.9402 10.3344C18.8018 10.4167 18.6402 10.4642 18.4659 10.4642C17.952 10.4642 17.5355 10.0476 17.5355 9.53383C17.5355 9.35949 17.5829 9.19793 17.6653 9.05947C17.857 8.73708 17.9251 8.20345 17.5449 7.82332L16.6731 6.95142Z" fill="#0078D4"/>\n        </svg>'])))}},{key:"getCashbackIcon",value:function(){return A.Z.getTrustedHTML(BE||(BE=(0,E.Z)(['<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <circle cx="14" cy="14" r="14" fill="#E4EFE4"/>\n        <path d="M6.46191 10.1877C6.46191 9.32033 7.16506 8.61719 8.03243 8.61719H20.1478C21.0152 8.61719 21.7183 9.32033 21.7183 10.1877V17.8159C21.7183 18.6833 21.0152 19.3864 20.1478 19.3864H8.03243C7.16506 19.3864 6.46191 18.6833 6.46191 17.8159V10.1877ZM9.15422 9.73898V10.6364C9.15422 11.0081 8.85287 11.3095 8.48114 11.3095H7.58371V12.6556H8.48114C9.59633 12.6556 10.5004 11.7516 10.5004 10.6364V9.73898H9.15422ZM14.0901 16.2454C15.2053 16.2454 16.1093 15.3413 16.1093 14.2262C16.1093 13.111 15.2053 12.2069 14.0901 12.2069C12.9749 12.2069 12.0709 13.111 12.0709 14.2262C12.0709 15.3413 12.9749 16.2454 14.0901 16.2454ZM7.58371 16.6941H8.48114C8.85287 16.6941 9.15422 16.9955 9.15422 17.3672V18.2646H10.5004V17.3672C10.5004 16.252 9.59633 15.348 8.48114 15.348H7.58371V16.6941ZM19.026 17.3672C19.026 16.9955 19.3274 16.6941 19.6991 16.6941H20.5965V15.348H19.6991C18.5839 15.348 17.6799 16.252 17.6799 17.3672V18.2646H19.026V17.3672ZM19.026 10.6364V9.73898H17.6799V10.6364C17.6799 11.7516 18.5839 12.6556 19.6991 12.6556H20.5965V11.3095H19.6991C19.3274 11.3095 19.026 11.0081 19.026 10.6364Z" fill="#0F7B0F"/>\n        </svg>'])))}},{key:"getRewardIcon",value:function(){return A.Z.getTrustedHTML(UE||(UE=(0,E.Z)(['<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <circle cx="14" cy="14" r="14" fill="#FFFBE9"/>\n        <path d="M9.15347 8.61719C8.26132 8.61719 7.53809 9.34042 7.53809 10.2326V11.5168C7.53809 12.0766 7.82791 12.5965 8.30407 12.8909L12.4673 15.4645C11.456 16.0104 10.7689 17.0797 10.7689 18.3095C10.7689 20.0938 12.2153 21.5403 13.9996 21.5403C15.7839 21.5403 17.2304 20.0938 17.2304 18.3095C17.2304 17.0797 16.5432 16.0104 15.5319 15.4645L19.6952 12.8909C20.1713 12.5965 20.4612 12.0766 20.4612 11.5168V10.2326C20.4612 9.34042 19.7379 8.61719 18.8458 8.61719H9.15347ZM11.8458 13.8142V9.69411H16.1535V13.8142L14.2828 14.9707C14.1092 15.0779 13.89 15.0779 13.7165 14.9707L11.8458 13.8142ZM13.9996 16.1556C15.1892 16.1556 16.1535 17.12 16.1535 18.3095C16.1535 19.499 15.1892 20.4633 13.9996 20.4633C12.8101 20.4633 11.8458 19.499 11.8458 18.3095C11.8458 17.12 12.8101 16.1556 13.9996 16.1556Z" fill="#D17D00"/>\n        </svg>'])))}}]),t}();function zE(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return KE(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return KE(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function KE(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function YE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var jE=function(e){(0,O.Z)(r,e);var i=YE(r);function r(t,e,n){var o;return(0,s.Z)(this,r),o=i.call(this),(0,I.Z)((0,R.Z)(o),"assets",void 0),(0,I.Z)((0,R.Z)(o),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(o),"flyoutData",void 0),(0,I.Z)((0,R.Z)(o),"utilities",void 0),(0,I.Z)((0,R.Z)(o),"stateManagement",void 0),(0,I.Z)((0,R.Z)(o),"rewardApplied",void 0),(0,I.Z)((0,R.Z)(o),"logModule",void 0),(0,I.Z)((0,R.Z)(o),"pointsToAllocate",void 0),(0,I.Z)((0,R.Z)(o),"maxSupportedDomains",void 0),(0,I.Z)((0,R.Z)(o),"localStorageKeyRewardMap","rewardMap"),(0,I.Z)((0,R.Z)(o),"localStorageKeyRewardPoints","rewardPoints"),(0,I.Z)((0,R.Z)(o),"localStorageKeyDomainCount","domainCount"),o.pageHandlerModule=e.pageHandlerModule,o.flyoutData=t,o.utilities=e.viewModulesUtilities,o.assets=new WE,o.stateManagement=n,o.logModule=e.logModule,o.maxSupportedDomains=1,o}return(0,l.Z)(r,[{key:"GetModuleName",value:function(){return D.GX.REWARD}},{key:"setInitialStatesAndListeners",value:function(){var t=this;this.stateManagement.addEventListener(Ia.e1.onRewardsTelemetryFail,(function(e){if(e.detail&&e.detail.status){var i=new o.Z(a.xu.ErrorRewardSignIn);t.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"Reward sign in error - ".concat(e.detail.status),i,ya.g.CouponImpressionId)}})),this.stateManagement.addEventListener(Ia.e1.onRewardsTelemetrySuccess,(function(){var e=new o.Z(a.xu.RewardSignInSuccess);t.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"Reward sign in success",e,ya.g.CouponImpressionId)}))}},{key:"ShouldRenderModule",value:function(){var t,e,i,n=null!==(t=null===(e=this.flyoutData.dataStoreModule.CashBackData)||void 0===e?void 0:e.canRenderCashback)&&void 0!==t&&t,r=this.flyoutData.dataStoreModule.RewardData;r&&(this.pageHandlerModule.TriggerExperiment(xt.H.rewardFlyout),this.pageHandlerModule.TriggerExperiment(xt.H.signinRewards),this.pageHandlerModule.TriggerExperiment(xt.H.rewardNotification));var s=this.flyoutData.experimentData.isExperimentActive(xt.H.rewardFlyout),l=this.flyoutData.experimentData.isExperimentActive(xt.H.signinRebates),c=this.flyoutData.experimentData.isExperimentActive(xt.H.signinRewards),u=this.flyoutData.dataStoreModule.CashBackData,d=s&&null!=r&&r.IsRewardsActive&&n&&(l&&c||u&&(null===(i=u.userRebatesResponse)||void 0===i?void 0:i.isRebatesUser)),h=this.isRewardsAdded();if(d&&!h){this.flyoutData.experimentData.isVariantActive(xt.H.rewardFlyout,_f.Az.Rewards_100)?this.pointsToAllocate=100:this.flyoutData.experimentData.isVariantActive(xt.H.rewardFlyout,_f.Az.Rewards_50)?this.pointsToAllocate=50:(this.flyoutData.experimentData.isVariantActive(xt.H.rewardFlyout,_f.Az.Rewards_200),this.pointsToAllocate=200),this.setInitialStatesAndListeners();var p=new o.Z(a.xu.RewardWillBeRendered);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"Rendered reward module in flyout",p,ya.g.CouponImpressionId)}return Promise.resolve(d&&!h)}},{key:"renderModule",value:function(){if(this.isRewardsAdded())return Promise.resolve(null);var t=this.flyoutData.dataStoreModule.RewardData;if(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),t){var e=document.createElement("msft-edge-shopping-section");e.id="rewardSection",e.accordion=!0,e.title=this.flyoutData.strings.rewardRewards,e.setAttribute("aria-labelledby","divRewardTitleId");var i=this.renderFailedSignInSection(),n=this.renderWrapper(t);return!t.IsSignedInUser&&t.ActivateRewardsStatus&&this.isFailedSignInState(t.ActivateRewardsStatus)&&e.appendChild(i),e.appendChild(n),Promise.resolve(this.CreateModule(e,D.H7.REWARD,D.GX.REWARD,D.$k.CONTEXTUAL))}return Promise.resolve(null)}},{key:"PostProcessing",value:function(t,e,i){var n,o,a,r=this;0===e&&Tt.SO.queueUpdate((function(){var t=r.flyoutData.common.shopping.querySelector("#rewardSection");if(t&&t.shadowRoot){var e=t.shadowRoot.querySelector("fluent-accordion-item");e&&(e.style.marginTop="0px")}}));var s=this.flyoutData.dataStoreModule.CashBackData,l=this.flyoutData.dataStoreModule.CouponData;!(null!==(n=null===(o=this.flyoutData.dataStoreModule.CouponData)||void 0===o?void 0:o.isCheckoutPageWithAutoApply)&&void 0!==n&&n&&null!=s&&s.canRenderCashback&&s&&!s.isCashBackActivated&&l&&l.Coupons)||null!==(a=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==a&&a.isPersonalizedCashback||this.isRewardsAdded()||Tt.SO.queueUpdate((function(){var t=r.flyoutData.common.shopping.querySelector("#rewardSection");t&&t.shadowRoot&&(t.title="",t.style.marginTop="0px",t.slot="header-content",t.expanded=!0,t.accordion=!1,t.style.marginTop="0px")}))}},{key:"populateMainHeader",value:function(){if(this.flyoutData.common.shopping){var t=this.flyoutData.common.shopping.querySelector("#rewardSection");t&&(t.style.marginTop="0px",t.slot="header-content")}}},{key:"StringifyMap",value:function(){return JSON.stringify(Array.from(this.rewardApplied.entries()))}},{key:"isRewardsAdded",value:function(){try{var t=vt(this.localStorageKeyRewardMap),e=!1;if(t){var i,n=zE(new Map(JSON.parse(t)).entries());try{for(n.s();!(i=n.n()).done;){var r=la(i.value,2),s=r[0],l=r[1];if(s){var c=l;c&&(e=Date.now()-c<=6048e5)}}}catch(t){n.e(t)}finally{n.f()}}if(e)return!0}catch(t){var u=new o.Z(a.xu.ErrorRewardsAdded);this.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"isRewardsAdded Exception: ".concat(Ma.getErrorString(t)),u)}return!1}},{key:"renderIconSetSection",value:function(){var t=this.utilities.createElement("DIV");t.className="divRewardIconSet";var e=this.renderIconSection(this.assets.getCouponIcon(),this.flyoutData.strings.rewardCoupons),i=this.renderIconSection(this.assets.getCashbackIcon(),this.flyoutData.strings.rewardCashback),n=this.renderIconSection(this.assets.getRewardIcon(),this.flyoutData.strings.rewardRewards);return t.appendChild(e),t.appendChild(i),t.appendChild(n),t}},{key:"renderIconSection",value:function(t,e){var i=this.utilities.createElement("DIV");i.className+=" divIconSection";var n=this.utilities.createElement("DIV");n.textContent=t;var o=this.utilities.createElement("DIV");return o.textContent=e,i.append(n),i.append(o),i}},{key:"renderWrapper",value:function(t){var e=this.utilities.createElement("div");e.className="divRewardWrapper";var i=this.utilities.createElement("div");i.className+=" divRewardsHeader";var n=this.renderTitle(t),o=this.renderPointSection(t);i.appendChild(n),i.appendChild(o);var a=this.renderDetails(t);return e.appendChild(i),e.appendChild(a),e}},{key:"renderFailedSignInSection",value:function(){var t=this.utilities.createElement("div");t.className="divRewardFailedSignIn";var e=this.utilities.createElement("div");e.className="divRewardErrorIcon",e.innerHTML=this.assets.getErrorCircleIcon();var i=this.utilities.createElement("div");return i.textContent=this.flyoutData.strings.rewardFailedSignin,t.append(e),t.append(i),t}},{key:"isFailedSignInState",value:function(t){return t===D.aE.FAILED_SWITCH_TO_MSA_PROFILE||t===D.aE.FAILED_SWITCH_TO_MSA_DECLINED||t===D.aE.FAILED_SIGN_INTO_PROFILE}},{key:"renderTitle",value:function(t){var e=this.utilities.createElement("div");e.className="divRewardTitle",e.id="divRewardTitleId",e.setAttribute("aria-live","assertive");var i=this.getRewardPoints(t);if(this.isRewardsAdded()){var n=this.utilities.replaceValueInKey("rewardTitleRewardsAdded",this.flyoutData.strings.rewardTitleRewardsAdded,this.pointsToAllocate.toString());e.textContent=n}else t.IsTrialUser&&i>=5e3?e.textContent=this.flyoutData.strings.rewardTitleEarnedMaximum:e.textContent=this.flyoutData.strings.rewardTitleDefault;return e}},{key:"renderPointSection",value:function(e){var i=this,o=this.utilities.createElement("div");o.className="divRewardPointSection";var r=this.utilities.createElement("div");r.className="divRewardPointIcon",r.innerHTML=this.assets.getCupIcon();var s=this.utilities.createElement("div");s.className="divRewardPoint";var l=this.getRewardPoints(e);return s.setAttribute("aria-label",l.toString()+"Microsoft Rewards"),e.IsSignedInUser||e.IsAssociatedUser?s.textContent=l.toString():s.textContent=l>=5e3?this.flyoutData.strings.rewardPointMax:l.toString()+this.flyoutData.strings.rewardPerMaxPoint,this.stateManagement.addEventListener(Ia.e1.onCashBackActivatedForRewards,(0,t.Z)(n().mark((function t(){var o,r,c,u,d,h,p,f,g,m;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.pageHandlerModule.RecordAsUserAction(Ca.bS.ACTIVATE_REWARDS_NEW),o=new na.Z(a.$S.RewardsClick),i.logModule.LogInfoEvent(a.R.ButtonClick,"Clicked on Rewards",o),!(e.IsTrialUser&&l>=5e3||e.IsAssociatedUser)){t.next=7;break}return o=new na.Z(a.$S.ActivateCashbackToEarnRewardFail),e.IsTrialUser&&l>=5e3?i.logModule.LogInfoEvent(a.R.ButtonClick,"Trial user already earned maximum reward points (5000)",o,ya.g.CouponImpressionId):i.logModule.LogInfoEvent(a.R.ButtonClick,"Associated user attempted to earn rewards",o,ya.g.CouponImpressionId),t.abrupt("return");case 7:r=i.flyoutData.common.domain,c=vt(i.localStorageKeyRewardMap),u=vt(i.localStorageKeyDomainCount),d=0,null===(h=null==u?void 0:u.split("&")[0])||isNaN(parseInt(h,10))||(d=parseInt(h,10)),null===(p=null==u?void 0:u.split("&")[1])||isNaN(parseInt(p,10))||(f=parseInt(p,10),Date.now()-f>6048e5&&(d=0)),i.rewardApplied=c?new Map(JSON.parse(c)):new Map,g=i.rewardApplied.get(r),d<i.maxSupportedDomains?g?Date.now()-g>=6048e5?i.updatePoints(e,l,s,r,d+1):(o=new na.Z(a.$S.ActivateCashbackToEarnRewardFail),i.logModule.LogInfoEvent(a.R.ButtonClick,"User already earned rewards on "+r+" today",o,ya.g.CouponImpressionId)):(i.updatePoints(e,l,s,r,d+1),o=new na.Z(a.$S.ActivateCashbackToEarnReward),i.logModule.LogInfoEvent(a.R.ButtonClick,"User earned ".concat(i.pointsToAllocate," reward points on ")+r,o,ya.g.CouponImpressionId)):(o=new na.Z(a.$S.ActivateCashbackToEarnRewardFail),i.logModule.LogInfoEvent(a.R.ButtonClick,"User already earned rewards on 5 domains",o,ya.g.CouponImpressionId)),m=i.StringifyMap(),yt(i.localStorageKeyRewardMap,m);case 20:case"end":return t.stop()}}),t)})))),o.append(s),o.append(r),o}},{key:"getRewardPoints",value:function(t){var e=vt(this.localStorageKeyRewardPoints);if(e){var i=e.split("&");if(i){var n=i[0],o=parseInt(i[1],10);if(Date.now()-o<36e5){if(null!==n&&!isNaN(parseInt(n,10)))return parseInt(n,10)}else Ct(this.localStorageKeyRewardPoints)}}return t.Points?t.Points:0}},{key:"updatePoints",value:function(t,e,i,n,o){e+=this.pointsToAllocate;var r=document.querySelector("#divRewardTitleId"),s=this.utilities.replaceValueInKey("rewardTitleRewardsAdded",this.flyoutData.strings.rewardTitleRewardsAdded,this.pointsToAllocate.toString());r.textContent=s,r.setAttribute("aria-live","off"),document.querySelector("#divContentWrapper").style.background='url( "'.concat(this.flyoutData.common.resourcesEndpoint,'confetti.png") no-repeat'),document.querySelector("#divDetailFirstLine").style.display="none";var l=document.querySelector("#divDetailSecondLine");l.style.float="none",l.style.position="relative",l.style.bottom="2px",l.style.display="block";var c=document.querySelector(".divRewardAdditionalLink");if(c){var u=this.utilities.createElement("DIV");u.className="divRewardAdditionalLink",u.textContent=this.flyoutData.strings.rewardKeepExploringText,c.replaceWith(u)}if(yt(this.localStorageKeyRewardPoints,e.toString()+"&"+Date.now()),1===o)yt(this.localStorageKeyDomainCount,o.toString()+"&"+Date.now());else{var d,h=null===(d=vt(this.localStorageKeyDomainCount))||void 0===d?void 0:d.split("&")[1];yt(this.localStorageKeyDomainCount,o.toString()+"&"+h)}t.IsTrialUser?i.textContent=e.toString()+this.flyoutData.strings.rewardPerMaxPoint:i.textContent=e.toString();var p=new $E.Z(this.pointsToAllocate,this.pointsToAllocate,n,this.pointsToAllocate);this.logModule.LogInfoEvent(a.R.RewardsActivity,"rewards points info",p,ya.g.CouponImpressionId),this.rewardApplied.set(n,Date.now())}},{key:"renderDetails",value:function(t){var e=this.utilities.createElement("DIV");e.className="divRewardDetailsSection";var i=this.renderLinkForMoreDetails(),n=this.renderLinkToSignIn(),o=this.utilities.createElement("div",{style:"\n        display: inline-block;"}),a=this.utilities.createElement("div",{style:"\n        display: inline-block;"});if(o.id="divDetailFirstLine",a.id="divDetailSecondLine",t.IsSignedInUser)i.textContent=this.flyoutData.strings.rewardRedeem,a.append(i),this.renderRewardsBanner(a,o,i,e);else if(t.IsAssociatedUser)n.textContent=this.flyoutData.strings.rewardAssociateSignIn,a.append(n),this.renderRewardsBanner(a,o,i,e);else{if(n.textContent=this.flyoutData.strings.rewardSignIn,a.append(n),this.isRewardsAdded())a.style.display="block";else{o.textContent=this.flyoutData.strings.rewardDetailFirstLine;var r=this.utilities.createElement("span",{style:"\n        font-weight: 500;"});r.textContent=this.utilities.replaceValueInKey("rewardDetailFirstLineBold",this.flyoutData.strings.rewardDetailFirstLineBold,this.pointsToAllocate.toString()),o.appendChild(r),e.appendChild(o),a.style.float="right",a.style.position="relative",a.style.bottom="3px"}a.style.display="none",e.appendChild(a)}if(!t.IsAssociatedUser){var s=this.renderLinkToLeanMore();e.appendChild(s)}return e}},{key:"renderLinkToLeanMore",value:function(){var t=this,e=this.utilities.createElement("fluent-anchor");return e.className+=" divRewardAdditionalLink",e.appearance="lightweight",e.href="#",e.textContent=this.flyoutData.strings.commonLearnMore,e.addEventListener("click",(function(){t.pageHandlerModule.RecordAsUserAction(Ca.bS.REWARDS_REDEEM_CLICK),t.pageHandlerModule.NavigateToRewardsInfo();var e=new na.Z(a.$S.RewardAdditionalLink);t.logModule.LogInfoEvent(a.R.ButtonClick,"User navigated to explore additional rebates sites",e,ya.g.CouponImpressionId)})),e}},{key:"renderLinkToSignIn",value:function(){var e=this,i=this.utilities.createElement("fluent-anchor");return i.className+=" detailLink",i.appearance="lightweight",i.href="#",i.addEventListener("click",(0,t.Z)(n().mark((function t(){var i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.pageHandlerModule.ActivateRewards(!0),i=new na.Z(a.$S.RewardSignIn),e.logModule.LogInfoEvent(a.R.ButtonClick,"Rewards Sign In started",i,ya.g.CouponImpressionId);case 3:case"end":return t.stop()}}),t)})))),i}},{key:"renderLinkForMoreDetails",value:function(){var t=this,e=this.utilities.createElement("fluent-anchor");return e.className+=" detailLink",e.appearance="lightweight",e.href="#",e.addEventListener("click",(function(){t.pageHandlerModule.RecordAsUserAction(Ca.bS.REWARDS_REDEEM_CLICK),t.pageHandlerModule.NavigateToRedeemRewards();var e=new na.Z(a.$S.RewardRedeem);t.logModule.LogInfoEvent(a.R.ButtonClick,"User navigated to redeem rewards",e,ya.g.CouponImpressionId)})),e}},{key:"renderRewardsBanner",value:function(t,e,i,n){if(this.isRewardsAdded())t.style.display="block";else{e.textContent=this.flyoutData.strings.rewardDetailFirstLine;var o=this.utilities.createElement("span",{style:"\n    font-weight: 500; font-size: 18px;"}),a=this.utilities.replaceValueInKey("rewardDetailFirstLineBold",this.flyoutData.strings.rewardDetailFirstLineBold,this.pointsToAllocate.toString());o.textContent=a,e.appendChild(o),n.appendChild(e),t.style.float="right",t.style.position="relative",t.style.bottom="3px"}t.style.display="none",n.appendChild(t)}}]),r}(jf.Z),XE=jE;function qE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var JE,QE=function(t){(0,O.Z)(i,t);var e=qE(i);function i(t,n,o){return(0,s.Z)(this,i),e.call(this,n,o,t)}return(0,l.Z)(i,[{key:"RenderNotification",value:function(t){var e=this.utilities.createElement("div",{style:"width: 100%;"}),i=this.utilities.createElement("div");i.className="divRewardTitle",i.id="titleRewardTwo",i.textContent=this.flyoutData.strings.rewardTitleRewardTwo;var n=this.utilities.createElement("div");n.className="divRewardDetailsSection",n.id="detailRewardTwo",n.textContent=this.flyoutData.strings.rewardDetailTwo;var r=this.renderIconSetSection(),s=this.renderLearnMoreButton();e.appendChild(i),e.appendChild(n),e.appendChild(r),e.appendChild(s),t.appendChild(e);var l=this.CreateModule(e,0,this.GetNotificationName(),D.$k.HOME);this.disableNotificationHeader();var c=new o.Z(a.xu.RewardNotification);return this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"User saw reward notification",c,ya.g.CouponImpressionId),Promise.resolve(l)}},{key:"ShouldRenderNotification",value:function(){var t,e=this.flyoutData.dataStoreModule.RewardData;return Promise.resolve(null!==(t=null==e?void 0:e.shouldRenderRewardNotification)&&void 0!==t&&t)}},{key:"GetNotificationName",value:function(){return D.sM.REWARD}},{key:"disableNotificationHeader",value:function(){var t=this;Tt.SO.queueUpdate((function(){var e=t.flyoutData.common.shopping;e.shadowRoot&&(e.shadowRoot.querySelector(".header").style.display="none")}))}},{key:"renderLearnMoreButton",value:function(){var t=this,e=this.utilities.createElement("fluent-button");return e.className+=" actionsButton",e.id="rewardButtonLearnMore",e.textContent=this.flyoutData.strings.commonLearnMore,e.appearance="accent",e.addEventListener("click",(function(){t.pageHandlerModule.NavigateToRewardsInfo();var e=new na.Z(a.$S.RewardInfo);t.logModule.LogInfoEvent(a.R.ButtonClick,"User navigated to learn more about rewards",e,ya.g.CouponImpressionId)})),e}}]),i}(XE),tA=function(){function e(){(0,s.Z)(this,e)}var i;return(0,l.Z)(e,null,[{key:"getOtherSellerConfirmationData",value:(i=(0,t.Z)(n().mark((function t(e,i){var o,a,r,s,l,c,u,d;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=new URL(i.common.lastCommittedURL),a="OtherSellersConfirmationData_"+o.pathname,!(r=i.dataLoader.GetLoadTimeDataValue("storage",void 0))){t.next=9;break}l={value:{stringValue:r[a]}},s=l,t.next=12;break;case 9:return t.next=11,e.GetStorageValue(a);case 11:s=t.sent;case 12:if(!s){t.next=19;break}if(!(c=s)||!c.value){t.next=19;break}if(!(d=null===(u=aa.Z.Create(s.value))||void 0===u?void 0:u.stringValue)){t.next=19;break}return e.SetStorageValue(a,new Na),t.abrupt("return",Promise.resolve(JSON.parse(d)));case 19:t.next=25;break;case 21:return t.prev=21,t.t0=t.catch(0),t.abrupt("return",Promise.resolve(null));case 25:return t.abrupt("return",Promise.resolve(null));case 26:case"end":return t.stop()}}),t,null,[[0,21]])}))),function(t,e){return i.apply(this,arguments)})}]),e}(),eA=tA;!function(t){t[t.Clipping=0]="Clipping",t[t.OtherSellers=1]="OtherSellers",t[t.BackgroundAA=2]="BackgroundAA"}(JE||(JE={}));var iA=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"otherSellers",void 0),(0,I.Z)(this,"productImage",void 0),(0,I.Z)(this,"productPrice",void 0),(0,I.Z)(this,"productUrl",void 0),(0,I.Z)(this,"dataCreationTime",void 0)}return(0,l.Z)(t,null,[{key:"Create",value:function(e){var i=new t;return i.productImage=e.productImage,i.productPrice=e.productPrice,i.productUrl=e.productUrl,i.otherSellers=new Array,e.otherSellers.forEach((function(t){i.otherSellers.push(t)})),i}}]),t}(),nA=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n            .divNotificationContent {\n                text-align: center;\n                overflow: hidden;\n                margin-top: -10px;\n            }\n            ::part(sections) {\n            height: 25px!important;\n        }\n        @media (prefers-color-scheme: dark) {\n        .otherSellerSavings {\n            color: #FFFFFF!important;\n        }\n        }\n        "}}]),t}(),oA=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"intValue",void 0)}return(0,l.Z)(t,null,[{key:"Create",value:function(e){var i=new t;return i.intValue=e.intValue,i}}]),t}();function aA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var rA=function(e){(0,O.Z)(g,e);var i,r,c,u,d,h,p,f=aA(g);function g(t,e,i){var n;return(0,s.Z)(this,g),n=f.call(this),(0,I.Z)((0,R.Z)(n),"assets",void 0),(0,I.Z)((0,R.Z)(n),"flyoutData",void 0),(0,I.Z)((0,R.Z)(n),"utilities",void 0),(0,I.Z)((0,R.Z)(n),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(n),"logModule",void 0),(0,I.Z)((0,R.Z)(n),"commonAssets",void 0),(0,I.Z)((0,R.Z)(n),"shouldRenderSimilarSellers",void 0),(0,I.Z)((0,R.Z)(n),"otherSellersData",void 0),n.flyoutData=t,n.utilities=e.viewModulesUtilities,n.pageHandlerModule=e.pageHandlerModule,n.logModule=e.logModule,n.assets=new nA,n.commonAssets=i,n.setShouldShowOtherSellersModule(),n}return(0,l.Z)(g,[{key:"GetModuleName",value:function(){return D.GX.SIMILARSELLERS}},{key:"ShouldRenderModule",value:(p=(0,t.Z)(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.shouldRenderSimilarSellers){t.next=2;break}return t.abrupt("return",this.shouldRenderSimilarSellers);case 2:return t.next=4,this.setShouldShowOtherSellersModule();case 4:return t.abrupt("return",!!this.shouldRenderSimilarSellers);case 5:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"populateMainHeader",value:function(){var t,e,i=this.flyoutData.common.shopping,n="amazon.com"===this.flyoutData.common.domain?this.flyoutData.strings.similarSellerStringAmazon:this.flyoutData.strings.similarSellerString;if(i&&this.otherSellersData&&(null===(t=this.otherSellersData)||void 0===t||null===(e=t.otherSellers)||void 0===e?void 0:e.length)>0){var o=this.utilities.replaceValueInKey("similarSellerString",n,"$$"),a="",r=0;try{var s;r=parseFloat(this.otherSellersData.productPrice.replace("$",""))-parseFloat(null===(s=this.otherSellersData.otherSellers[0])||void 0===s?void 0:s.price.replace("$",""));var l=this.otherSellersData.otherSellers[0].delivery.split(" ");if((null==l?void 0:l.length)>0&&l[0]){var c=parseFloat(l[0].replace("$",""));isNaN(c)||(r-=c)}a="$"+r.toFixed(2),r>0&&(o=this.utilities.replaceValueInKey("similarSellerString",n,a))}catch(t){}if(""!==a&&r>0&&this.otherSellersData.productImage)this.CreateTitle(a,this.otherSellersData.productImage,i);else{var u=this.utilities.createElement("H2");u.innerText=o,u.className="txtLarge",u.style.textAlign="center",u.style.fontWeight="500";var d=o;u.textContent=d,u.slot="header-content",i.appendChild(u)}}}},{key:"renderModule",value:(h=(0,t.Z)(n().mark((function t(){var e,i,o,a,r,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(e=this.utilities.createElement("msft-edge-shopping-section")).id="similarSellerDiv",this.flyoutData.common.openedWith!==D.Te.Auto||this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_ITEM_ADDED_TO_CART_FROM_OTHER_SELLER){t.next=9;break}return t.next=7,this.renderSimilarSellerNotification();case 7:t.next=18;break;case 9:if(!(this.otherSellersData&&(null===(i=this.otherSellersData.otherSellers)||void 0===i?void 0:i.length)>0)){t.next=18;break}return o=function(t){var e=D.CS.SIMILARSELLERS;return t&&s.common.bannerContext===D.De.VIEWALL&&(e=t.length),e},a=this.flyoutData.common.domain,r="amazon.com"===a?this.flyoutData.strings.similarSellerStringCollapsedAmazon:this.flyoutData.strings.similarSellerStringCollapsed,this.populateOtherSellersList(e,!1,!1),s=this.flyoutData,this.utilities.createCommonListStructure(e,r,this.otherSellersData.otherSellers,this.GetModuleName(),o,this.populateOtherSellersList.bind(this)),this.updateAutoShowCount(),t.abrupt("return",Promise.resolve(this.CreateModule(e,D.H7.SIMILARSELLERS,D.GX.SIMILARSELLERS,D.$k.CONTEXTUAL)));case 18:t.next=24;break;case 20:return t.prev=20,t.t0=t.catch(0),t.abrupt("return",Promise.resolve(null));case 24:return t.abrupt("return",Promise.resolve(null));case 25:case"end":return t.stop()}}),t,this,[[0,20]])}))),function(){return h.apply(this,arguments)})},{key:"updateAutoShowCount",value:(d=(0,t.Z)(n().mark((function t(){var e,i,o,a,r,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.flyoutData.common.openedWith!==D.Te.Auto||this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_OTHER_SELLERS){t.next=14;break}return t.next=4,this.pageHandlerModule.GetStorageValue("OtherSellersAutoShowCount");case 4:e=t.sent,i=0,e&&""!==e&&(a=e.value,i=null!==(o=a.intValue)&&void 0!==o?o:0),i=i?i+1:1,(r=new oA).intValue=i,(s=new aa.Z).stringValue=(new Date).toUTCString(),this.pageHandlerModule.SetStorageValue("OtherSellersAutoShowCount",r),this.pageHandlerModule.SetStorageValue("OtherSellersLastAutoShowTime",s);case 14:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"renderSimilarSellerNotification",value:(u=(0,t.Z)(n().mark((function t(){var e,i,r,s,l,c,u,d;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),t.next=3,eA.getOtherSellerConfirmationData(this.pageHandlerModule,this.flyoutData);case 3:e=t.sent,(i=this.flyoutData.common.shopping)&&(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),(r=this.utilities.createElement("DIV",{id:"productAddedPopup"})).slot="header-content",(s=this.utilities.createElement("DIV",{className:"txtMedium"})).className="divNotificationContent",l="",l=null!=e&&e.Success?this.utilities.replaceValueInKey("similarSellerNotificationTitle",this.flyoutData.strings.similarSellerNotificationTitle,"$"+e.Savings):this.flyoutData.strings.similarSellerNotificationError,c=this.utilities.createElement("H2",{style:"margin: 0px; font-weight: 500; font-size: 24px; line-height: 34px;"},l),s.appendChild(c),r.appendChild(s),i.appendChild(r),null!=e&&e.Success&&(u=this.createAddedToCartButton())&&i.appendChild(u),d=new o.Z(a.xu.AddedToCartNotification),this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"User saw other seller added to cart notification",d,ya.g.CouponImpressionId));case 6:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"populateOtherSellersList",value:function(t,e,i){var n,o,a=null===(n=this.otherSellersData)||void 0===n?void 0:n.otherSellers,r=null===(o=this.otherSellersData)||void 0===o?void 0:o.productPrice;if(a){var s=0;a.length>0&&(s=a.length);var l=0;e?l=D.CS.SIMILARSELLERS:s>D.CS.SIMILARSELLERS&&(s=D.CS.SIMILARSELLERS);for(var c=l;c<s;c++){var u=a[c],d=this.createSellerTile(u,null!=r?r:"",u.index);t.appendChild(d),c===l&&e&&i&&this.flyoutData.common.currentDevice===D.AS.Desktop&&d&&d.focus()}}}},{key:"createAddedToCartButton",value:function(){var t=this.utilities.createElement("fluent-button"),e=this.utilities.createElement("DIV");return e.innerHTML=this.commonAssets.getGreenCheck(),e.slot="start",e.setAttribute("aria-hidden","true"),t.disabled=!0,t.slot="actions",t.textContent=this.flyoutData.strings.similarSellerAddedToCartTitle,t.appendChild(e),t.style.backgroundColor="transparent",t.style.boxSizing="border-box",t.style.borderRadius="4px",t.style.opacity="1",t.style.border="1px solid rgba(0, 0, 0, 0.07)",t.style.maxWidth="218px",t.style.width="100%",t.style.marginTop="10px",this.flyoutData.common.currentTheme===D.Q2.Dark?(t.style.color="#FFFFFF",t.style.borderColor="#FFFFFF"):t.style.color="#000000",t}},{key:"setShouldShowOtherSellersModule",value:(c=(0,t.Z)(n().mark((function t(){var e,i,o,a,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("amazon.com"===(i=this.flyoutData.common.domain)||"walmart.com"===i){t.next=5;break}return this.shouldRenderSimilarSellers=!1,t.abrupt("return");case 5:if(o=!1,"amazon.com"===i&&(o=!0),"walmart.com"===i&&(o=!0),o){t.next=11;break}return this.shouldRenderSimilarSellers=!1,t.abrupt("return");case 11:return t.next=13,this.getSimilarSellersData();case 13:return this.otherSellersData=t.sent,this.otherSellersData&&(this.flyoutData.dataStoreModule.SimilarSellerData=iA.Create(this.otherSellersData),(null===(a=this.flyoutData.dataStoreModule.SimilarSellerData.otherSellers)||void 0===a?void 0:a.length)>3&&(r=this.flyoutData.dataStoreModule.SimilarSellerData.otherSellers,this.flyoutData.dataStoreModule.SimilarSellerData.otherSellers=r.slice(0,3))),this.otherSellersData&&(null===(e=this.otherSellersData.otherSellers)||void 0===e?void 0:e.length)>0&&(this.shouldRenderSimilarSellers=!0),t.abrupt("return");case 17:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"getSimilarSellersData",value:(r=(0,t.Z)(n().mark((function t(){var e,i,r,s,l,c,u,d,h;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=new URL(this.flyoutData.common.lastCommittedURL),!(i=this.flyoutData.dataLoader.GetLoadTimeDataValue("storage",void 0))){t.next=8;break}s={value:{stringValue:i["OtherSellersData_"+e.pathname]}},r=s,t.next=11;break;case 8:return t.next=10,this.pageHandlerModule.GetStorageValue("OtherSellersData_"+e.pathname);case 10:r=t.sent;case 11:if(!r||""===r){t.next=22;break}if(!(l=r)){t.next=22;break}if(!((u=this.deserializeStorageData(null==l?void 0:l.value))&&(null===(c=u.otherSellers)||void 0===c?void 0:c.length)>0)){t.next=22;break}if(u.productUrl===e.pathname){t.next=18;break}return t.abrupt("return",Promise.resolve(null));case 18:if(d=Date.now(),!(void 0===u.dataCreationTime||d-u.dataCreationTime>18e5)){t.next=21;break}return t.abrupt("return",Promise.resolve(null));case 21:return t.abrupt("return",Promise.resolve(u));case 22:t.next=29;break;case 24:t.prev=24,t.t0=t.catch(0),h=new o.Z(a.xu.OtherSeller),this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"Failed to deserialize data",h,ya.g.CouponImpressionId);case 29:return t.abrupt("return",Promise.resolve(null));case 30:case"end":return t.stop()}}),t,this,[[0,24]])}))),function(){return r.apply(this,arguments)})},{key:"deserializeStorageData",value:function(t){var e,i=null===(e=aa.Z.Create(t))||void 0===e?void 0:e.stringValue;if(i)return JSON.parse(i)}},{key:"createSellerTile",value:function(t,e,i){var n=this,o=this.utilities.createElement("msft-shopping-similar-seller");try{if(o.actionButtonText=this.flyoutData.strings.similarSellerAddToCartTitle,o.actionButtonAriaLabel=this.flyoutData.strings.similarSellerAddToCartAriaLable,o.onClickHandler=function(){try{var o=new Na;n.pageHandlerModule.SetStorageValue("OtherSellersAutoShowCount",o);var r=new na.Z(a.$S.AddToCart,void 0,JSON.stringify(t));n.pageHandlerModule.RecordAsUserAction(Ca.bS.ADD_TO_CART_FROM_OTHER_SELLER),n.pageHandlerModule.AddItemFromOtherSeller(JSON.stringify({action:JE.OtherSellers,data:{OtherSeller:{ItemIndex:i,ItemPrice:t.price.replace("$",""),OriginalItemPrice:e.replace("$","")},SkipAutoApply:!0}})),n.logModule.LogInfoEvent(a.R.ButtonClick,"Added to the cart",r,ya.g.CouponImpressionId)}catch(t){}},o.itemTitle=t.heading,o.itemTitleId=t.heading,o.itemPrice=t.price,t.delivery&&"amazon.com"===this.flyoutData.common.domain){var r=t.delivery.replace(/  |\r\n|\n|\r/gm," ").replace("Delivery","delivery").trim(),s="delivery";r.includes(":")&&(s+=":");var l=r.split(s),c="",u="";l.length>=2&&(c=l[0].trim()+" Delivery",u=l[1].trim()),u&&u.indexOf("Fastest")>=0&&(u=u.substring(0,u.indexOf("Fastest")).trim()),u&&u.indexOf("Order")>=0&&(u=u.substring(0,u.indexOf("Order")).trim()),u&&u.indexOf("Details")>=0&&(u=u.substring(0,u.indexOf("Details")).trim()),o.deliveryLabel=c+": ",o.deliveryLabelId=o.deliveryLabel,o.deliveryInfo=u,o.deliveryInfoId=u,c.includes("$")&&(o.hasShippingCost=!0)}if(t.delivery&&"walmart.com"===this.flyoutData.common.domain){var d=t.delivery.split("+");d&&(o.deliveryInfo=d[0],o.deliveryInfo=o.deliveryInfo,d.length>1?(o.hasShippingCost=!0,o.deliveryLabel=d[1].trim()):o.deliveryLabel=this.flyoutData.strings.similarSellerFreeDelivery,o.deliveryLabel+=": ",o.deliveryLabelId=o.deliveryLabel,o.deliveryInfo=o.deliveryInfo)}o.shipperLabel="".concat(this.flyoutData.strings.similarSellerShipFromString," "),o.shipperLabelId="".concat(this.flyoutData.strings.similarSellerShipFromString," "),o.shipperName=g.CapitalizeText(t.soldBy.toString());var h=t.soldBy.split(" ");return(null==h?void 0:h.length)>=4&&(o.shipperName=h.slice(-2).join(" ")),o.shipperLinkId=o.shipperName,this.flyoutData.dataLoader.IsServerData()&&t.sellerUrl&&(o.shipperUrl="https://www."+this.flyoutData.common.domain+"/"+t.sellerUrl,o.linkClickHandler=function(){n.navigateToOtherSeller(t,o.shipperUrl,lg.$.NEW_FOREGROUND_TAB)}),t.rating&&(o.ratingLabel="".concat(this.flyoutData.strings.similarSellerRatingLabel," "),o.ratingLabelId="".concat(this.flyoutData.strings.similarSellerRatingLabel," "),o.rating=t.rating.toString(),o.ratingId=o.rating),o}catch(t){}return new HTMLElement}},{key:"navigateToOtherSeller",value:function(t,e,i){var n=new na.Z(a.$S.NavigateToOtherSeller,void 0,JSON.stringify(t));this.pageHandlerModule.RecordAsUserAction(Ca.bS.ADD_TO_CART_FROM_OTHER_SELLER),this.logModule.LogInfoEvent(a.R.ButtonClick,"Clicked on other seller link",n),this.pageHandlerModule.NavigateToOtherSellerWithDisposition(e,i)}},{key:"CreateTitle",value:(i=(0,t.Z)(n().mark((function t(e,i,o){var a,r,s,l,c,u,d,h,p;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=this.flyoutData.common.domain,r="amazon.com"===a?this.flyoutData.strings.similarSellerStringSubtitleAmazon:this.flyoutData.strings.similarSellerStringSubtitle,(s=this.utilities.createElement("DIV",{style:"position: relative; height: 100%; display: grid; grid-template-columns: auto 60% auto; grid-gap: 20px;"})).setAttribute("aria-label",this.flyoutData.strings.commonYouCanSave+" "+e+r),i&&(l=this.utilities.createElement("DIV",{style:"display: inline-block; width: 124px; height: 124px; margin: 0px;"}),(c=this.utilities.createElement("IMG",{style:"display: inline-block;\n            width: auto;\n            margin-left: 15px;\n            height: calc(100% - 10px);\n            max-width: calc(100% - 10px)"})).src=this.flyoutData.common.urlPrefix+i,c.setAttribute("aria-hidden","true"),l.appendChild(c),s.appendChild(l)),u=this.utilities.createElement("DIV"),(d=this.utilities.createElement("DIV",{style:"font-size: 26px;"})).className="similarSellerTitle",d.textContent=this.flyoutData.strings.commonYouCanSave,u.appendChild(d),e&&((h=this.utilities.createElement("DIV",{style:"color: #107C10; font-size: 48px; margin-top: 25px;"})).textContent=e,h.className="otherSellerSavings",u.appendChild(h)),(p=this.utilities.createElement("DIV",{style:"color: #767676; font-size: 12px; margin-top: 25px;"})).className="similarSellerSubtitle",p.textContent=r,u.appendChild(p),s.appendChild(u),o.prepend(s);case 17:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return i.apply(this,arguments)})}],[{key:"CapitalizeText",value:function(t){if(t){var e="";return t.split(" ").forEach((function(t){t.length>0&&(e+=t[0].toUpperCase()+t.substring(1)+" ")})),e.substring(0,e.length-1)}return t}}]),g}(jf.Z),sA=rA;function lA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var cA=function(e){(0,O.Z)(c,e);var i,r=lA(c);function c(t,e,i){return(0,s.Z)(this,c),r.call(this,t,e,i)}return(0,l.Z)(c,[{key:"RenderNotification",value:(i=(0,t.Z)(n().mark((function t(e){var i,r,s,l,c,u,d;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),t.next=3,eA.getOtherSellerConfirmationData(this.pageHandlerModule,this.flyoutData);case 3:return i=t.sent,e&&(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),(r=this.utilities.createElement("DIV",{id:"productAddedPopup"})).slot="header-content",(s=this.utilities.createElement("DIV",{className:"txtMedium"})).className="divNotificationContent",l="",l=null!=i&&i.Success?this.utilities.replaceValueInKey("similarSellerNotificationTitle",this.flyoutData.strings.similarSellerNotificationTitle,"$"+i.Savings):this.flyoutData.strings.similarSellerNotificationError,c=this.utilities.createElement("H2",{style:"margin: 0px; font-weight: 500; font-size: 24px; line-height: 34px;"},l),s.appendChild(c),r.appendChild(s),e.appendChild(r),null!=i&&i.Success&&(u=this.createAddedToCartButton())&&e.appendChild(u),d=new o.Z(a.xu.AddedToCartNotification),this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"User saw other seller added to cart notification",d,ya.g.CouponImpressionId)),t.abrupt("return",Promise.resolve(null));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"ShouldRenderNotification",value:function(){var t=this.flyoutData.common.openedWith===D.Te.Auto&&this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_ITEM_ADDED_TO_CART_FROM_OTHER_SELLER;return Promise.resolve(t)}},{key:"GetNotificationName",value:function(){return D.sM.SIMILARSELLERS}}]),c}(sA),uA=cA,dA=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n            .divSustainabilityWrapper {\n                display: flex;\n                flex-direction: row;\n                background: linear-gradient(271.14deg, #8DFFEB -21.94%, rgba(255, 230, 183, 0.49) 52.25%, #D9FDFF 104.12%);\n                height: 50px;\n                width: 100%;\n                margin-top: -19px;\n            }\n            .divSustainabilityIcon {\n                margin: 11px 3px 11px 12px;\n            }\n            .divSustainabilityLink {\n                margin-top: 5px;\n            }\n            #divSustainabilityTitle {\n                font-family: Segoe UI;\n                font-size: 14px;\n                line-height: 20px;\n                margin:11px 2px 9px 2px;\n            }\n\n            .divSustainabilityNotificationWrapper {\n                background: linear-gradient(125.41deg,#FAFEF2 0%, #F6FFF9 59.38%, #F3FEFD 100%);\n                display: flex;\n                flex-direction: row;\n                width: 100%;\n                height: 168px;\n                margin-top: -20px;\n            }\n            .divSustainabilityNotificationIcon {\n                margin:22px 16px;\n            }\n            .divSustainabilityNotificationTextSection {\n                display: flex;\n                flex-direction: column;\n                margin-top: 22px;\n                margin-right: 10px;\n            }\n            .divSustainabilityNotificationTitle {\n                font-family: Segoe UI;\n                font-size: 16px;\n                line-height: 19px;\n                font-weight: 700;\n                margin-bottom: 12px;\n            }\n            .divSustainabilityNotificationDescription {\n                margin-bottom: 12px;\n                font-family: Segoe UI;\n                font-size: 12px;\n                line-height: 16px;\n                color: #2F3132;\n                width: 194px;\n            }\n            .divSustainabilityNotificationLink {\n                height: 12px;\n                width: 60px;\n                position: relative;\n                left: 3px;\n            }\n            .divSustainabilityConfirmationWrapper {\n                background: linear-gradient(125.41deg,#FAFEF2 0%, #F6FFF9 59.38%, #F3FEFD 100%);\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                height: auto;\n                margin-top: -20px;\n            }\n            .divSustainabilityConfirmationIcon {\n                width: 90px;\n                height: 100px;\n                position: relative;\n                top: -39px;\n                left: 19px;\n                margin-right: 31px;\n            }\n            .divSustainabilityConfirmationTitle {\n                font-family: Segoe UI;\n                font-size: 24px;\n                line-height: 31px;\n                font-weight: 600;\n                margin: 12px 16px 14px;\n                text-align: right;\n            }\n            .divSustainabilityConfirmationBottomSection {\n                display: flex;\n                flex-direction: row;\n            }\n            #shareFB, #shareTwitter {\n                border: none;\n                background: none;\n                position: relative;\n                top: -5px;\n            }\n            .divSustainabilityConfirmationTextSection {\n                display: flex;\n                flex-direction: row;\n            }\n            .divSustainabilityConfirmationLink  {\n                height: 16px;\n                position: relative;\n            }\n            .divSustainabilityConfirmationDescription {\n                font-family: Segoe UI;\n                font-size: 12px;\n                line-height: 16px;\n                width: 219px;\n                text-align: right;\n                height: 66px;\n            }\n            .divSustainabilityDescription {\n                font-family: Segoe UI;\n                font-size: 12px;\n                line-height: 16px;\n                width: 206px;\n            }\n\n            #confirmationButtonLearnMore {\n                border: 1.5px solid #000000;\n                border-radius: 4px;\n                background: transparent;\n                color: black;\n                height: 36px;\n                width: 296px;\n                margin-left: 33px;\n                margin-bottom: 18px;\n            }\n            #confirmationButtonLearnMore:hover {\n                border-color: rgba(0, 0, 0, 0.39);\n            }\n            .divShareSection {\n                display: flex;\n                flex-direction: row;\n                margin-left: 50px;\n            }\n            @media (prefers-color-scheme: dark) {\n                .divSustainabilityWrapper, .divSustainabilityNotificationWrapper, .divSustainabilityConfirmationWrapper {\n                    background: linear-gradient(96.59deg, rgba(15, 107, 255, 0.3) -13.45%, rgba(13, 19, 77, 0.3) 100.1%), #4A4A4A;\n                }\n                #confirmationButtonLearnMore {\n                    border: 1.5px solid #FFFFFF;\n                    color: #FFFFFF;\n                }\n                .divSustainabilityNotificationDescription {\n                    color: rgba(255, 255, 255, 0.9);\n                }\n            }\n            @media screen and (-ms-high-contrast: active) {\n                .divSustainabilityWrapper, .divSustainabilityNotificationWrapper, .divSustainabilityConfirmationWrapper {\n                    background: linear-gradient(96.59deg, rgba(15, 107, 255, 0.3) -13.45%, rgba(13, 19, 77, 0.3) 100.1%), #4A4A4A;\n                }\n                #confirmationButtonLearnMore {\n                    border: 1.5px solid Text;\n                    color: Text;\n                }\n                .divSustainabilityNotificationDescription {\n                    color: rgba(255, 255, 255, 0.9);\n                }\n            }\n        }\n        "}}]),t}();function hA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var pA=function(e){(0,O.Z)(a,e);var i,o=hA(a);function a(t,e){var i;return(0,s.Z)(this,a),i=o.call(this),(0,I.Z)((0,R.Z)(i),"assets",void 0),(0,I.Z)((0,R.Z)(i),"flyoutData",void 0),(0,I.Z)((0,R.Z)(i),"utilities",void 0),(0,I.Z)((0,R.Z)(i),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(i),"logModule",void 0),i.flyoutData=t,i.utilities=e.viewModulesUtilities,i.pageHandlerModule=e.pageHandlerModule,i.logModule=e.logModule,i.assets=new dA,i}return(0,l.Z)(a,[{key:"GetModuleName",value:function(){return D.GX.SUSTAINABILITY}},{key:"ShouldRenderModule",value:function(){var t=this.flyoutData.dataStoreModule.SustainabilityData;t&&this.pageHandlerModule.TriggerExperiment(xt.H.sustainability);var e=this.flyoutData.experimentData.isExperimentActive(xt.H.sustainability)&&null!=t&&t.isDomainSustainabilitySupported;return Promise.resolve(e)}},{key:"populateMainHeader",value:function(){}},{key:"renderModule",value:(i=(0,t.Z)(n().mark((function t(){var e,i,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.flyoutData.dataStoreModule.SustainabilityData)){t.next=11;break}if(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),(i=this.utilities.createElement("msft-edge-shopping-section")).id="sustainabilityDiv",!e){t.next=11;break}if(!e.shouldRenderSustainability){t.next=11;break}return o=this.renderWrapper(),i.appendChild(o),this.pageHandlerModule.RecordAsContentViewed(ba.r.SUSTAINABILITY_LANDING_FOOTER),t.abrupt("return",Promise.resolve(this.CreateModule(i,D.H7.SUSTAINABILITY,D.GX.SUSTAINABILITY,D.$k.CONTEXTUAL)));case 11:return t.abrupt("return",Promise.resolve(null));case 12:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"renderWrapper",value:function(){var t=this.utilities.createElement("div");t.className="divSustainabilityWrapper";var e=this.utilities.createElement("IMG"),i=new Image;i.addEventListener("load",(function(){e.src=i.src})),this.flyoutData.common.currentTheme===D.Q2.Dark?i.src=this.flyoutData.common.resourcesEndpoint+"sustainability/sustainabilitySmallDark.png":i.src=this.flyoutData.common.resourcesEndpoint+"sustainability/sustainabilitySmall.png",e.className="divSustainabilityIcon";var n=this.renderTitle(),o=this.renderLinkToLeanMore();return o.setAttribute("aria-labelledby","divSustainabilityTitle"),t.appendChild(e),t.appendChild(n),t.appendChild(o),t}},{key:"renderTitle",value:function(){var t=this.utilities.createElement("div");return t.id="divSustainabilityTitle",t.textContent=this.flyoutData.strings.sustainabilityString,t}},{key:"renderLinkToLeanMore",value:function(){var t=this,e=this.utilities.createElement("fluent-anchor");return e.className="divSustainabilityLink",e.appearance="lightweight",e.href="#",e.textContent=this.flyoutData.strings.commonLearnMore,e.addEventListener("click",(function(){t.pageHandlerModule.NavigateToSustainabilityLearnMore(),t.pageHandlerModule.RecordAsUserAction(Ca.bS.SUSTAINABILITY_LANDING_FOOTER_LEARN_MORE)})),e}}]),a}(jf.Z),fA=pA;function gA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var mA,vA=function(t){(0,O.Z)(i,t);var e=gA(i);function i(t,n){return(0,s.Z)(this,i),e.call(this,t,n)}return(0,l.Z)(i,[{key:"RenderNotification",value:function(t){var e;this.utilities.applyStyles(t,this.assets.getStyles()),this.ShouldRenderPDPNotification()?e=this.CreatePDPDiv():this.ShouldRenderConfirmationNotification()&&(e=this.CreateConfirmationDiv()),t.appendChild(e);var i=this.CreateModule(e,0,this.GetNotificationName(),D.$k.HOME);return Promise.resolve(i)}},{key:"CreatePDPDiv",value:function(){var t=this,e=this.utilities.createElement("div");e.className="divSustainabilityNotificationWrapper";var i=this.utilities.createElement("IMG");this.flyoutData.common.currentTheme===D.Q2.Dark?i.src=this.flyoutData.common.resourcesEndpoint+"sustainability/sustainabilityImageDark.png":i.src=this.flyoutData.common.resourcesEndpoint+"sustainability/sustainabilityImage.png",i.className="divSustainabilityNotificationIcon";var n=this.utilities.createElement("div");n.className="divSustainabilityNotificationTextSection";var r=this.utilities.createElement("div");r.className="divSustainabilityNotificationTitle",r.textContent=this.flyoutData.strings.sustainabilityString,r.setAttribute("aria-level","2"),r.setAttribute("role","heading");var s=this.utilities.createElement("div");s.className="divSustainabilityDescription";var l=this.utilities.createElement("span");l.className="divSustainabilityNotificationDescription";var c=this.flyoutData.strings.sustainabilityDescriptionLight.split("|"),u=this.utilities.createElement("span");u.textContent=c[0];var d=this.utilities.createElement("span",{style:"font-weight:700"});d.textContent=c[1],l.appendChild(u),l.appendChild(d);var h=this.utilities.createElement("fluent-anchor");h.className="divSustainabilityNotificationLink",h.appearance="lightweight",h.href="#",h.textContent=this.flyoutData.strings.commonLearnMore,h.addEventListener("click",(function(){t.pageHandlerModule.NavigateToSustainabilityLearnMore();var e=new na.Z(a.$S.SustainabilityLearnMore);t.logModule.LogInfoEvent(a.R.ButtonClick,"User navigated to explore bing sustainability learn more site",e,ya.g.CouponImpressionId),t.pageHandlerModule.RecordAsUserAction(Ca.bS.SUSTAINABILITY_LANDING_FULL_LEARN_MORE)})),s.appendChild(l),s.appendChild(h),n.appendChild(r),n.appendChild(s),e.appendChild(i),e.appendChild(n);var p=new o.Z(a.xu.SustainabilityPDP),f=this.flyoutData.common.domain;return this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"User viewed sustainability purchase confirmation notification domain:"+f,p,ya.g.CouponImpressionId),this.pageHandlerModule.RecordAsContentViewed(ba.r.SUSTAINABILITY_LANDING_FULL),e}},{key:"CreateConfirmationDiv",value:function(){var t=this,e=this.utilities.createElement("div");e.className="divSustainabilityConfirmationWrapper",e.addEventListener("mouseover",n),e.addEventListener("focus",n);var i=this.logModule;function n(){var t=new na.Z(a.$S.SustainabilityConfirmationHover);i.LogInfoEvent(a.R.ButtonClick,"User interacts on the sustainability confirmation notification flyout domain:"+p,t,ya.g.CouponImpressionId),e.removeEventListener("mouseover",n),e.removeEventListener("focus",n)}var r=this.utilities.createElement("div");r.className="divSustainabilityConfirmationTitle",r.textContent=this.flyoutData.strings.sustainabilityConfirmationTitle;var s=this.utilities.createElement("IMG");this.flyoutData.common.currentTheme===D.Q2.Dark?s.src=this.flyoutData.common.resourcesEndpoint+"sustainability/sustainabilityImageDark.png":s.src=this.flyoutData.common.resourcesEndpoint+"sustainability/sustainabilityImage.png",s.className="divSustainabilityConfirmationIcon";var l=this.utilities.createElement("div");l.className="divSustainabilityConfirmationTextSection";var c=this.utilities.createElement("div");c.className="divSustainabilityConfirmationDescription";var u=this.utilities.createElement("span");u.textContent=this.flyoutData.strings.sustainabilityDescription;var d=this.utilities.createElement("fluent-anchor");d.className="divSustainabilityConfirmationLink",d.appearance="lightweight",d.href="#",d.textContent=this.flyoutData.strings.commonLearnMore,d.addEventListener("click",(function(){var e=new na.Z(a.$S.SustainabilityLearnMore);t.logModule.LogInfoEvent(a.R.ButtonClick,"User navigated to explore bing sustainability learn more sites",e,ya.g.CouponImpressionId),t.pageHandlerModule.RecordAsUserAction(Ca.bS.SUSTAINABILITY_PURCHASE_CONFIRMATION_LEARN_MORE),t.pageHandlerModule.NavigateToSustainabilityLearnMore()})),c.appendChild(u),c.appendChild(d),l.appendChild(s),l.appendChild(c),e.appendChild(r),e.appendChild(l);var h=new o.Z(a.xu.SustainabilityConfirmation),p=this.flyoutData.common.domain;return this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"User viewed sustainability purchase confirmation notification domain:"+p,h,ya.g.CouponImpressionId),this.pageHandlerModule.RecordAsContentViewed(ba.r.SUSTAINABILITY_PURCHASE_CONFIRMATION),e}},{key:"ShouldRenderNotification",value:function(){return this.ShouldRenderPDPNotification()||this.ShouldRenderConfirmationNotification()?Promise.resolve(!0):Promise.resolve(!1)}},{key:"ShouldRenderPDPNotification",value:function(){var t=this.flyoutData.dataStoreModule.SustainabilityData;return!(!t||!t.shouldRenderSustainability)&&(t.shouldRenderSustainability&&this.flyoutData.common.openedWith===D.Te.Auto&&this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_SUSTAINABILITY_LANDING)}},{key:"ShouldRenderConfirmationNotification",value:function(){var t=this.flyoutData.dataStoreModule.SustainabilityData;return!(!t||!t.shouldRenderSustainability)&&(t.shouldRenderSustainability&&this.flyoutData.common.openedWith===D.Te.Auto&&this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_SUSTAINABILITY_PURCHASE)}},{key:"GetNotificationName",value:function(){return D.sM.SUSTAINABILITY}}]),i}(fA),yA=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n         msft-package-tracker-card::part(base-card) {\n            --card-width: 325px;\n            margin-bottom: 15px;\n        }\n\n        msft-package-tracker-card {\n            margin: 0 8px;\n        }\n\n        .my-main-image {\n            max-width: 140px;\n        }\n\n        @media (prefers-color-scheme: dark) {\n            msft-package-tracker-card::part(base-card) {\n                background-color: transparent;\n            }\n        }\n            "}},{key:"getCloseButton",value:function(){return A.Z.getTrustedHTML(mA||(mA=(0,E.Z)(['<svg\n        width="16"\n        height="16"\n        aria-hidden="true"\n        viewBox="0 0 16 16"\n        xmlns="http://www.w3.org/2000/svg"\n        >\n        <path\n        d="M8.5332 8L12.5762 12.0488L12.0488 12.5762L8 8.5332L3.95117 12.5762L3.42383 12.0488L7.4668 8L3.42383 3.95117L3.95117 3.42383L8 7.4668L12.0488 3.42383L12.5762 3.95117L8.5332 8Z"\n        />\n        </svg>'])))}},{key:"getConfirmationNotificationStyles",value:function(){return"\n            #trackingConfirmationButtonContainer {\n                text-align: center;\n                height: auto;\n            }\n\n            .trackingConfirmationPopupContent {\n                text-align: center;\n            }\n\n            #trackingOptInButton {\n                margin-bottom: 10px;\n            }\n\n            #trackingOptOutButtonContainer {\n                margin-bottom: 10px;\n            }\n\n            #trackingOptOutButton {\n                font-size: 12px;\n                text-decoration: none;\n            }\n\n            #trackingConfirmationPopup {\n                --progress-determinate-background: linear-gradient(\n                    90deg,\n                    #e70780 0%,\n                    #ffa318 32.29%,\n                    #01c190 58.33%,\n                    #01ada5 70.83%,\n                    #00a9ff 98.96%\n                );\n            }\n\n            .euMarketOptInOptOutTrackingConfirmationButtonContainer {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                margin-bottom: 10px;\n            }\n\n            .euMarketOptInOptOutTrackingConfirmationButtonContainer .actionsButtonRefresh,\n            .euMarketOptInOptOutTrackingConfirmationButtonContainer .actionsButtonRefresh::part(control) {\n                min-width: 150px;\n                max-width: 150px;\n                white-space: normal;\n            }\n\n            .euMarketOptInOptOutTrackingConfirmationButtonContainer #trackingOptOutButtonContainer {\n                margin-left: 10px;\n            }\n\n             msft-package-tracker-card::part(base-card) {\n                box-shadow: none;\n                display: flex;\n                pointer-events: none;\n                cursor: none;\n                background-color: transparent!important;\n                border: 1px solid transparent !important;\n            }\n\n            @media (prefers-color-scheme: dark) {\n                msft-package-tracker-card::part(base-card) {\n                    box-shadow: none;\n                    display: flex;\n                    background-color: transparent;\n                    pointer-events: none;\n                    cursor: none;\n                }\n            }\n\n            @media (prefers-color-scheme: light) {\n                msft-package-tracker-card::part(base-card) {\n                    box-shadow: none;\n                    display: flex;\n                    background-color: transparent;\n                    pointer-events: none;\n                    cursor: none;\n                }\n            }\n\n        "}}]),t}();function CA(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return bA(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return bA(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function bA(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function SA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var xA=function(t){(0,O.Z)(i,t);var e=SA(i);function i(t,n,o,a){var r;return(0,s.Z)(this,i),r=e.call(this),(0,I.Z)((0,R.Z)(r),"assets",void 0),(0,I.Z)((0,R.Z)(r),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(r),"flyoutData",void 0),(0,I.Z)((0,R.Z)(r),"utilities",void 0),(0,I.Z)((0,R.Z)(r),"stateManagement",void 0),(0,I.Z)((0,R.Z)(r),"logModule",void 0),(0,I.Z)((0,R.Z)(r),"commonAssets",void 0),(0,I.Z)((0,R.Z)(r),"commonUtils",void 0),r.pageHandlerModule=n.pageHandlerModule,r.flyoutData=t,r.utilities=n.viewModulesUtilities,r.assets=new yA,r.stateManagement=o,r.logModule=n.logModule,r.commonAssets=a,r.commonUtils=n,r}return(0,l.Z)(i,[{key:"GetModuleName",value:function(){return D.GX.ORDERSTATUSTRACKING}},{key:"ShouldRenderModule",value:function(){var t,e,i,n,o,a,r,s,l,c;if(this.pageHandlerModule.TriggerExperiment(xt.H.orderStatusTrackingExp),!this.flyoutData.experimentData.isExperimentActive(xt.H.orderStatusTrackingExp))return Promise.resolve(!1);var u=null!==(t=null===(e=this.flyoutData)||void 0===e||null===(i=e.dataStoreModule)||void 0===i||null===(n=i.OrderTrackingData)||void 0===n?void 0:n.shouldShowPackageTrackingNotification)&&void 0!==t&&t;if(!1===(null===(o=this.flyoutData)||void 0===o||null===(a=o.dataStoreModule)||void 0===a||null===(r=a.OrderTrackingData)||void 0===r?void 0:r.packageTrackingUserConsented)&&!0===u)return Promise.resolve(!0);var d=!1,h=null===(s=this.flyoutData)||void 0===s||null===(l=s.dataStoreModule)||void 0===l||null===(c=l.OrderTrackingData)||void 0===c?void 0:c.orders;return h&&h.length>0&&(d=!0),Promise.resolve(d)}},{key:"renderModule",value:function(){var t,e,i,n,o,a,r,s,l,c,u=null===(t=this.flyoutData)||void 0===t||null===(e=t.dataStoreModule)||void 0===e||null===(i=e.OrderTrackingData)||void 0===i?void 0:i.orders,d=null!==(n=null===(o=this.flyoutData)||void 0===o||null===(a=o.dataStoreModule)||void 0===a||null===(r=a.OrderTrackingData)||void 0===r?void 0:r.shouldShowPackageTrackingNotification)&&void 0!==n&&n;if(!1===(null===(s=this.flyoutData)||void 0===s||null===(l=s.dataStoreModule)||void 0===l||null===(c=l.OrderTrackingData)||void 0===c?void 0:c.packageTrackingUserConsented)&&!0===d){var h=this.utilities.createElement("msft-edge-shopping-section");return h.id="orderStatusTrackingSection",h.accordion=!0,h.expanded=!1,h.title=this.flyoutData.strings.packageTrackingDeactivatedTitle,new NA(this.flyoutData,this.commonUtils,this.stateManagement,this.commonAssets).RenderNotification(h),Promise.resolve(this.CreateModule(h,D.H7.ORDERSTATUSTRACKING,D.GX.ORDERSTATUSTRACKING,D.$k.HOME))}if(u){this.flyoutData.common.isPane?this.utilities.applyStyles(this.flyoutData.common.shoppingPersistent,this.assets.getStyles()):this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());try{var p=this.utilities.createElement("msft-edge-shopping-section");p.id="orderStatusTrackingSection";var f=this.flyoutData.strings.orderTrackingTitle;this.populateOrdersList(p,!1,!1);var g=this.flyoutData;this.utilities.createCommonListStructure(p,f,u,this.GetModuleName(),(function(t){var e=D.CS.ORDERTRACKING;return t&&g.common.bannerContext===D.De.VIEWALL&&(e=t.length),e}),this.populateOrdersList.bind(this)),p.addEventListener("click",(function t(){if(p){var e=p.shadowRoot;if(e){var i=e.querySelector("fluent-accordion-item");i&&(i.classList.contains("expanded")||v?y||(m.RecordAsUserAction(Ca.bS.PACKAGE_TRACKING_COLLAPSE_SECTION),y=!0):(m.RecordAsUserAction(Ca.bS.PACKAGE_TRACKING_EXPAND_SECTION),v=!0))}}v&&y&&p&&p.removeEventListener("click",t)}));var m=this.pageHandlerModule,v=!1,y=!1;return Promise.resolve(this.CreateModule(p,D.H7.ORDERSTATUSTRACKING,D.GX.ORDERSTATUSTRACKING,D.$k.HOME))}catch(t){}}return Promise.resolve(null)}},{key:"populateOrdersList",value:function(t,e,i){var n,o,a,r=null===(n=this.flyoutData)||void 0===n||null===(o=n.dataStoreModule)||void 0===o||null===(a=o.OrderTrackingData)||void 0===a?void 0:a.orders;if(r){var s=0;r.length>0&&(s=r.length);var l=0;e?l=D.CS.ORDERTRACKING:s>D.CS.ORDERTRACKING&&(s=D.CS.ORDERTRACKING);for(var c=l;c<s;c++){var u=r[c],d=this.createOrderTile(u,t,r.length);d&&t.appendChild(d),d&&c===l&&e&&i&&this.flyoutData.common.currentDevice===D.AS.Desktop&&d.focus()}}}},{key:"populateMainHeader",value:function(){var t=this.flyoutData.common.isPane?this.flyoutData.common.shoppingPersistent:this.flyoutData.common.shopping;if(t){var e=t.querySelector("#orderStatusTrackingSection");e&&(e.style.marginTop="0px",e.slot="header-content")}}},{key:"getProgressBarPercentage",value:function(t){if(np(t))return"0";switch(t.toUpperCase()){case"ORDERED":return"15";case"SHIPPED":return"55";case"DELIVERED":case"RETURNED":case"CANCELED":return"100";default:return"0"}}},{key:"createOrderTile",value:function(t,e,i){var n=this,r=e.shadowRoot;if(r){var s=r.querySelector("fluent-accordion-item");if(s&&!s.classList.contains("expanded")){this.pageHandlerModule.RecordPackageTrackingAction(Ca._f.CARD_VIEWED,t.trackerKey);var l=new o.Z(a.xu.PackageTrackingCardViewed);this.logModule.LogInfoEvent(a.R.ButtonClick,"Userviewed the package tracking card with key ".concat(t.trackerKey),l)}}var c="";2===t.productsInOrder.length?c=t.productsInOrder.length-1+" more item":t.productsInOrder.length>2&&(c=t.productsInOrder.length-1+" more items");var u=document.createElement("msft-package-tracker-card");u.data={heading:t.domain,link:t.actionURL,mainTitle:t.orderSummary,otherItemsTitle:c,progressPercentage:this.getProgressBarPercentage(t.orderStatus),subTitle:t.productsInOrder[0].productName};var d,h="",p=CA(t.productsInOrder);try{for(p.s();!(d=p.n()).done;){h+=d.value.productName+" "}}catch(t){p.e(t)}finally{p.f()}var f=this.utilities.replaceValueInKey("dealsTitle",this.flyoutData.strings.productDetailsOrderTracking,t.domain,h);u.setAttribute("aria-describedby",f);var g=this.utilities.createElement("IMG");null!=t&&t.domain&&(g.classList.add("my-icon-image"),g.slot="heading-icon",this.utilities.addFavIconSrc(g,u,t.domain));var m=this.utilities.createElement("fluent-button");if(m.classList.add("more-actions"),m.slot="more-actions",m.setAttribute("aria-label",this.flyoutData.strings.deteTrackerText),m.title=this.flyoutData.strings.deteTrackerText,m.innerHTML=this.assets.getCloseButton(),m)try{m.addEventListener("click",(function(o){n.pageHandlerModule.DeletePackageTrackerByGuid(t.trackerKey),n.pageHandlerModule.RecordAsUserAction(Ca.bS.DELETE_TRACKER),n.pageHandlerModule.RecordPackageTrackingAction(Ca._f.CARD_DELETED,t.trackerKey);var r=new na.Z(a.$S.DeletePackageTrackerByGuid);n.logModule.LogInfoEvent(a.R.ButtonClick,"User deleted package tracking order",r);var s=window.sessionStorage.getItem("totalTrackersDeleted");if(s&&Number(s)){u.remove();var l=Number(s)+1;if(window.sessionStorage.setItem("totalTrackersDeleted",l.toString()),l>=i){var c=n.getEmptyModule();e.appendChild(c)}}else u.remove(),window.sessionStorage.setItem("totalTrackersDeleted","1");n.handleFocus(e),o.stopPropagation()}))}catch(t){}var v=this.utilities.createElement("IMG");t.productsInOrder&&""!==t.productsInOrder[0].productImageUrl&&(v.src=this.flyoutData.common.urlPrefix+t.productsInOrder[0].productImageUrl,v.classList.add("my-main-image"),v.slot="main-image",v.setAttribute("aria-hidden","true"));var y=this.utilities.createElement("IMG");return t.productsInOrder.length>1&&t.productsInOrder&&""!==t.productsInOrder[1].productImageUrl&&(y.src=this.flyoutData.common.urlPrefix+t.productsInOrder[1].productImageUrl,y.classList.add("my-other-image"),y.slot="other-image",y.setAttribute("aria-hidden","true")),u.appendChild(m),u.appendChild(v),t.productsInOrder.length>1&&u.appendChild(y),this.managePCLinkEvents(u,t.actionURL,t.trackerKey),u}},{key:"managePCLinkEvents",value:function(t,e,i){var n=this;t.addEventListener("click",(function(){n.flyoutData.common.currentDevice===D.AS.Desktop&&n.navigateToOrder(e,i,lg.$.NEW_FOREGROUND_TAB)})),t.addEventListener("mousedown",(function(t){if(1===t.button)n.navigateToOrder(e,i,lg.$.NEW_FOREGROUND_TAB)}))}},{key:"navigateToOrder",value:function(t,e,i){var n=new na.Z(a.$S.PackageTrackingOrderClick);this.pageHandlerModule.RecordPackageTrackingAction(Ca._f.CARD_CLICKED,e),this.logModule.LogInfoEvent(a.R.ButtonClick,"Clicked on package tracking order",n),this.pageHandlerModule.NavigateToOrderWithDisposition(t,i)}},{key:"getEmptyModule",value:function(){var t=this.utilities.createElement("DIV",{className:"txtSmall",style:"line-height: 20px; margin-top: 10px; padding-left: 12px;"});return t.textContent=this.flyoutData.strings.checkBackForOrders,t}},{key:"handleFocus",value:function(t){var e=t.querySelectorAll(Ea);if(e&&e.length>0)e[0].focus();else{var i=this.flyoutData.common.shopping.querySelectorAll(Ea);i&&i.length>0&&i[0].focus()}}}]),i}(jf.Z),EA=xA;function AA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var TA,IA,DA,kA,wA,RA,OA,PA,MA,NA=function(t){(0,O.Z)(i,t);var e=AA(i);function i(t,n,o,a){return(0,s.Z)(this,i),e.call(this,t,n,o,a)}return(0,l.Z)(i,[{key:"GetNotificationName",value:function(){return D.sM.TRACKING_CONFIRMATION}},{key:"ShouldRenderNotification",value:function(){var t,e,i,n,o,a,r,s,l;if(this.pageHandlerModule.TriggerExperiment(xt.H.orderStatusTrackingExp),!this.flyoutData.experimentData.isExperimentActive(xt.H.orderStatusTrackingExp))return Promise.resolve(!1);if(!0===(null===(t=this.flyoutData)||void 0===t||null===(e=t.dataStoreModule)||void 0===e||null===(i=e.OrderTrackingData)||void 0===i?void 0:i.packageTrackingUserConsented))return Promise.resolve(!1);var c=!0===(null===(n=this.flyoutData)||void 0===n||null===(o=n.dataStoreModule)||void 0===o||null===(a=o.CashBackData)||void 0===a?void 0:a.isConfirmationPage)&&!0===(null===(r=this.flyoutData)||void 0===r||null===(s=r.dataStoreModule)||void 0===s||null===(l=s.OrderTrackingData)||void 0===l?void 0:l.shouldShowPackageTrackingNotification);return Promise.resolve(c)}},{key:"RenderNotification",value:function(t){if(t){var e,i,n,o,a,r;this.utilities.applyStyles(t,this.assets.getConfirmationNotificationStyles());var s=this.utilities.createElement("DIV",{id:"trackingConfirmationPopup"}),l=this.createPopupContent();if(s.appendChild(l),null!==(e=this.flyoutData)&&void 0!==e&&null!==(i=e.dataStoreModule)&&void 0!==i&&null!==(n=i.CashBackData)&&void 0!==n&&n.isConfirmationPage){var c=this.utilities.createElement("DIV",{style:"height: 85px;"}),u=this.utilities.createElement("msft-package-tracker-card");u.data={mainTitle:"Order Placed",progressPercentage:"15"};var d=this.createMainItemImage();u.appendChild(d),c.appendChild(u),s.appendChild(c)}var h=this.utilities.createElement("DIV",{id:"trackingConfirmationButtonContainer"}),p=this.utilities.createElement("DIV",{id:"trackingOptInButtonContainer"}),f=this.createOptInButton(t);if(p.appendChild(f),h.appendChild(p),null!==(o=this.flyoutData)&&void 0!==o&&null!==(a=o.dataStoreModule)&&void 0!==a&&null!==(r=a.CashBackData)&&void 0!==r&&r.isConfirmationPage){this.isEUMarket()&&h.classList.add("euMarketOptInOptOutTrackingConfirmationButtonContainer");var g=this.utilities.createElement("DIV",{id:"trackingOptOutButtonContainer"}),m=this.createOptOutButton(t);g.appendChild(m),h.appendChild(g)}t.appendChild(s),t.appendChild(h)}return Promise.resolve(null)}},{key:"createPopupContent",value:function(){var t,e,i=this.utilities.createElement("DIV",{className:"txtMedium"});if(i.className="trackingConfirmationPopupContent",null!==(t=this.flyoutData)&&void 0!==t&&null!==(e=t.dataStoreModule.CashBackData)&&void 0!==e&&e.isConfirmationPage){var n=this.flyoutData.strings.packageTrackingNotificationTitle,o=this.utilities.createElement("H2",{style:"margin: 0px; font-weight: 500; font-size: 24px; line-height: 34px;"},n);i.appendChild(o)}var a=this.flyoutData.strings.packageTrackingNotificationDescription,r=this.utilities.createElement("P",{className:"txtSmall",style:"line-height: 20px; margin: 16px 16px 0 16px;"},a);return i.appendChild(r),i}},{key:"createMainItemImage",value:function(){var t=this.utilities.createElement("IMG",{style:"width: 40px; height: 40px; float: left;\n                box-shadow: 0 0 calc((var(--elevation) * 0.225px) + 2px) rgba(0, 0, 0, calc(0.11 * (2 - var(--background-luminance, 1)))), 0 calc(var(--elevation) * 0.4px) calc((var(--elevation) * 0.9px)) rgba(0, 0, 0, calc(0.13 * (2 - var(--background-luminance, 1))));\n                border-color: #ECECEC;"});return t.src="".concat(this.flyoutData.common.resourcesEndpoint,"retailerBranding/SquareIcons/").concat(this.flyoutData.common.domain,".png"),t.setAttribute("aria-hidden","true"),t.addEventListener("error",(function(){t.style.visibility="hidden"})),t.classList.add("my-main-image"),t.slot="main-image",t}},{key:"isEUMarket",value:function(){var t,e,i,n;return(null===(t=this.flyoutData)||void 0===t||null===(e=t.dataStoreModule)||void 0===e||null===(i=e.ApiData)||void 0===i||null===(n=i.retailerData)||void 0===n?void 0:n.exclusiveMarket)===D.Jk.GB}},{key:"changeButtonColorScheme",value:function(t){var e=this.flyoutData.common.currentTheme===D.Q2.Dark?"#02d9c8":"#008076";t.style.color=e,t.style.border="1px solid ".concat(e),t.style.background=this.flyoutData.common.currentTheme===D.Q2.Dark?"#3b3b3b":"#FFFFFF"}},{key:"createOptInButton",value:function(t){var e=this,i=this.utilities.createBaseActionButton();return i.id="trackingOptInButton",i.textContent=this.flyoutData.strings.packageTrackingOptInButtonText,i.setAttribute("aria-live","assertive"),this.isEUMarket()&&this.changeButtonColorScheme(i),i.addEventListener("click",(function(){try{var i=new na.Z(a.$S.PackageTrackingOptIn);e.logModule.LogInfoEvent(a.R.ButtonClick,"User opted in for package tracking",i),e.pageHandlerModule.SetPackageTrackingUserConsent(!0),e.pageHandlerModule.RecordAsUserAction(Ca.bS.PACKAGE_TRACKING_OPT_IN);var n=e.utilities.createElement("DIV",{style:"margin-right: 5px;"});n.innerHTML=e.commonAssets.getGreenCheck(),n.slot="start",n.setAttribute("aria-hidden","true"),e.showTrackingOptInOptOutAcknowledgement(t,n,e.flyoutData.strings.packageTrackingActivatedTitle,e.flyoutData.strings.packageTrackingOptInAcknowledgement)}catch(i){var r=new o.Z(a.xu.OnErrorInvoked);e.logModule.LogErrorEvent(a.R.ButtonClick,"Package tracking opt in error: ".concat(null==i?void 0:i.message),r),e.showTrackingOptInOptOutAcknowledgement(t,null,e.flyoutData.strings.packageTrackingDeactivatedTitle,e.flyoutData.strings.packageTrackingOptInAcknowledgementFailure)}finally{setTimeout((function(){e.pageHandlerModule.DismissPopup()}),1500)}})),i}},{key:"createOptOutButton",value:function(t){var e,i=this;return this.isEUMarket()?((e=this.utilities.createBaseActionButton()).setAttribute("aria-live","assertive"),this.changeButtonColorScheme(e)):((e=this.utilities.createElement("fluent-anchor",{id:"trackingOptOutButton",style:"margin-bottom: 10px;"})).setAttribute("href","#"),e.setAttribute("appearance","hypertext"),e.setAttribute("role","button"),e.setAttribute("aria-haspopup","listbox"),e.setAttribute("aria-label",this.flyoutData.strings.packageTrackingOptOutButtonText)),e.textContent=this.flyoutData.strings.packageTrackingOptOutButtonText,e.addEventListener("click",(function(){try{var e=new na.Z(a.$S.PackageTrackingOptOut);i.logModule.LogInfoEvent(a.R.ButtonClick,"User opted out of package tracking",e),i.pageHandlerModule.SetPackageTrackingUserConsent(!1),i.pageHandlerModule.RecordAsUserAction(Ca.bS.PACKAGE_TRACKING_OPT_OUT);var n=i.utilities.createElement("DIV",{style:"margin-right: 5px;"});n.innerHTML=i.commonAssets.getGreenCheck(),n.slot="start",n.setAttribute("aria-hidden","true"),i.showTrackingOptInOptOutAcknowledgement(t,n,"",i.flyoutData.strings.packageTrackingOptOutAcknowledgement)}catch(e){var r=new o.Z(a.xu.OnErrorInvoked);i.logModule.LogErrorEvent(a.R.ButtonClick,"Package tracking opt out error: ".concat(null==e?void 0:e.message),r),i.showTrackingOptInOptOutAcknowledgement(t,null,"",i.flyoutData.strings.packageTrackingOptOutAcknowledgementFailure)}finally{setTimeout((function(){i.pageHandlerModule.DismissPopup()}),1500)}})),e}},{key:"showTrackingOptInOptOutAcknowledgement",value:function(t,e,i,n){if(t){for(;t.firstElementChild;)t.firstElementChild.remove();np(null==t?void 0:t.title)||np(i)||(t.title=i);var o=this.utilities.createElement("DIV",{className:"txtMedium",id:"packageTrackingAcknowledgementContainer",style:"display: flex; justify-content: center; padding: 12px 0;"});e&&o.appendChild(e);var a=this.utilities.createElement("DIV");a.textContent=n,o.appendChild(a),t.append(o)}return t}}]),i}(EA),LA=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n        #divPriceDrop {\n            display: flex;\n            flex-direction: column;\n            height: 184px;\n        }\n        .vppdn_image {\n            width: 100px;\n            height: 100px;\n            border-radius: 8px;\n            margin-right: 16px;\n        }\n        .vppdn_title {\n            font-family: Segoe UI;\n            font-size: 12px;\n            line-height: 20px;\n            font-weight: 600;\n        }\n        .vppdn_saveMoney {\n            font-size: 40px;\n            line-height: 44px;\n            font-family: Segoe UI;\n            margin-bottom: 8px;\n            white-space: nowrap;\n        }\n        #vppdn_shopButton {\n            background: linear-gradient(white, white) padding-box, linear-gradient(90deg, #018DC8 3%, #01CC83 67%, #0CBFC9 104%) border-box;\n            border-radius: 8px;\n            border: 2px solid transparent;\n            height: 40px;\n            width: 332px;\n            margin-left: 12px;\n            margin-bottom: 8px;\n            color: #008076;\n            font-weight: 500;\n            font-family: Segoe UI;\n            font-size: 16px;\n            line-height: 20px;\n        }\n        .infoicon {\n            top: 1px !important;\n        }\n        .vppdn_link {\n            font-family: Segoe UI;\n            font-size: 12px;\n            line-height: 20px;\n            text-align: center;\n            color: #717171;\n            text-decoration: none;\n        }\n        .toolTipsOverlay {\n            display: none;\n        }\n        .toolTipsOverlayShow {\n            border: 1px solid rgba(0, 0, 0, 0.08);\n            box-sizing: border-box;\n            border-radius: 4px;\n            display: flex;\n            flex-direction: column;\n            position: absolute;\n            top: -22px;\n            right: 12px;\n            font-size: 10px;\n            background: #FFFFFF;\n            line-height: 14px;\n            width: 336px;\n            height: 228px;\n            font-family: Segoe UI;\n            text-align: center;\n            color: rgba(0, 0, 0, 0.6);\n            padding: 7px;\n            z-index:1;\n        }\n        ::part(content) {\n            overflow: unset !important;\n        }\n        .overlayTitle {\n            font-family: Segoe UI;\n            font-size: 14px;\n            line-height: 20px;\n            color: #000000;\n            font-weight: 500;\n            margin-bottom: 8px;\n        }\n        .overlayDesc {\n            font-family: Segoe UI;\n            font-size: 12px;\n            line-height: 16px;\n            margin-bottom: 12px;\n        }\n        .buttonGroup {\n            margin-left: 50px;\n        }\n        .gotIt {\n            margin-right: 24px;\n            background: linear-gradient(white, white) padding-box, linear-gradient(90deg, #018DC8 3%, #01CC83 67%, #0CBFC9 104%) border-box;\n            border-radius: 8px;\n            border: 2px solid transparent;\n            height: 35px;\n            width: 80px;\n            color: #008076;\n            font-weight: 500;\n            font-family: Segoe UI;\n            font-size: 14px;\n            line-height: 20px;\n        }\n        .learnMore {\n            border:none;\n            background: none;\n            font-family: Segoe UI;\n            font-size: 14px;\n            line-height: 20px;\n            position: relative;\n            top: 4px;\n        }\n\n        @media (prefers-color-scheme: dark) {\n            #vppdn_shopButton .gotIt {\n                background: linear-gradient(var(--fill-color), var(--fill-color)) padding-box, linear-gradient(90deg, #018DC8 3%, #01CC83 67%, #0CBFC9 104%) border-box;\n            }\n            .vppdn_link {\n                color: #FFFFFF;\n            }\n        }\n    "}}]),t}(),_A=function(){function t(e,i,n){(0,s.Z)(this,t),(0,I.Z)(this,"logModule",void 0),(0,I.Z)(this,"utilities",void 0),(0,I.Z)(this,"viewedProductPriceDropAssets",void 0),(0,I.Z)(this,"pageHandlerModule",void 0),(0,I.Z)(this,"flyoutData",void 0),(0,I.Z)(this,"commonAssets",void 0),(0,I.Z)(this,"viewedProductPriceDropNotificationID","divPriceDrop"),this.utilities=i.viewModulesUtilities,this.viewedProductPriceDropAssets=new LA,this.pageHandlerModule=i.pageHandlerModule,this.flyoutData=e,this.commonAssets=n,this.logModule=i.logModule}return(0,l.Z)(t,[{key:"PostProcessing",value:function(t,e,i){}},{key:"RenderNotification",value:function(t){var e=this,i=this.utilities.createElement("DIV");i.id=this.viewedProductPriceDropNotificationID,i.addEventListener("mouseover",r),i.addEventListener("focus",r);var n=this.logModule;function r(){var t=new na.Z(a.$S.PriceDropProductPageHover);n.LogInfoEvent(a.R.ButtonClick,"User interacts on the price drop notification flyout",t,ya.g.CouponImpressionId),i.removeEventListener("mouseover",r),i.removeEventListener("focus",r)}this.utilities.applyStyles(i,this.viewedProductPriceDropAssets.getStyles());var s=this.flyoutData.dataStoreModule.ViewedProductListData;if(s&&s.productShowItem){var l=s.productShowItem,c=l.currencySymbol||"$",u="".concat(c).concat(this.toFixedSafe(l.currentPrice,2)),d="".concat(c).concat(this.toFixedSafe(l.olderPrice,2)),h="".concat(c).concat(this.toFixedSafe(l.olderPrice-l.currentPrice,2)),p=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: row; font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n                            padding-left: 12px;\n                            margin-top: -15px;\n                            padding-right: 12px;\n                            margin-bottom: 12px;"}),f=this.utilities.createElement("IMG");f.className="vppdn_image",l.imageUrl&&""!==l.imageUrl&&(l.imageUrl.startsWith("http")||(l.imageUrl="https://"+l.imageUrl),f.src=l.imageUrl,l.title&&f.setAttribute("aria-label","item.title"));var g=this.utilities.createElement("DIV",{className:"vppdn_info",style:"display: flex; flex-direction: column; width: 100%;"}),m=this.utilities.createElement("DIV",{className:"vppdn_title"});m.setAttribute("aria-level","2"),m.textContent=this.flyoutData.strings.prodHPriceDropTitle;var v=this.utilities.createElement("DIV",{className:"txtGradient vppdn_saveMoney"});v.textContent=this.flyoutData.strings.prodHPriceDropSave+h;var y=this.utilities.createElement("DIV",{style:"\n                        display: flex;\n                        align-items: baseline;\n                    "}),C=this.utilities.createElement("S",{style:"\n                        margin-right: 5px;\n                        color: ".concat(this.flyoutData.common.currentTheme===D.Q2.Dark?"#FFFFFF":"#757575",";\n                        font-size: 14px;\n                    ")},d),b=this.utilities.createElement("SPAN",{style:"\n                        position: absolute;\n                        clip: rect(0 0 0 0);\n                    "},this.flyoutData.strings.phOldPrice);b.id="oldPriceClippedText",C.setAttribute("aria-labelledby","oldPriceClippedText"),C.appendChild(b);var S=this.flyoutData.common.currentTheme===D.Q2.Dark?"#FFFFFF":"#444444",x=this.utilities.createElement("DIV",{style:"color: ".concat(S,";\n                            font-size: 18px;\n                            line-height: 20px;\n                            font-weight: 600;\n                            margin-bottom: 6px;\n                            margin-right: 8px;")},u),E=this.utilities.createElement("SPAN",{style:"\n                        position: absolute;\n                        clip: rect(0 0 0 0);\n                    "},this.flyoutData.strings.phNewPrice);E.id="newPriceClippedText",x.setAttribute("aria-labelledby","newPriceClippedText"),x.appendChild(E),y.appendChild(x),y.appendChild(C),g.appendChild(m),g.appendChild(v),g.appendChild(y),p.appendChild(f),p.appendChild(g);var A=this.renderShopButton(l.domain,l.productUrl),T=this.utilities.createElement("a");T.setAttribute("href","#"),T.className="vppdn_link",T.textContent=this.flyoutData.strings.prodHPriceDropDonotRemindMe,T.addEventListener("click",(function(){l.productUrl.startsWith("http")?e.pageHandlerModule.DeletePwiloEntry(l.productUrl):(e.pageHandlerModule.DeletePwiloEntry("https://"+l.productUrl),e.pageHandlerModule.DeletePwiloEntry("http://"+l.productUrl)),e.pageHandlerModule.RecordAsUserAction(Ca.bS.PWILO_NOTIFICATION_PRICE_DROP_DELETE),e.pageHandlerModule.DismissPopup()}));var I=this.utilities.createElement("fluent-button",{style:"position: relative; display: inline; background: none; width:10px;bottom: 6px;"});I.setAttribute("aria-label",this.flyoutData.strings.reminderInfoButtonName);var k=this.utilities.createElement("DIV");k.className="infoicon",k.innerHTML=this.commonAssets.getInfoIcon(),k.setAttribute("aria-hidden","true");var w=this.utilities.createElement("DIV");w.className="toolTipsOverlay";var R=this.utilities.createElement("DIV");R.setAttribute("aria-level","2"),R.className="overlayTitle",R.textContent=this.flyoutData.strings.notificationPrivacyTitle;var O=this.utilities.createElement("DIV");O.className="overlayDesc",O.textContent=this.flyoutData.strings.notificationPrivacyDesc;var P=this.utilities.createElement("DIV",{style:"display: flex; flex-direction: row;"});P.className="buttonGroup";var M=this.utilities.createElement("fluent-button");M.className="gotIt",M.textContent=this.flyoutData.strings.commonGotIt,M.addEventListener("click",(function(){w.classList.toggle("toolTipsOverlayShow"),Tt.SO.queueUpdate((function(){if(parent.postMessage({height:F.offsetHeight,type:"resize_iframe",width:F.offsetWidth},"edge://shopping"),F){var t=new CustomEvent(Ia.e1.onFlyoutResize);F.dispatchEvent(t)}}))}));var N=this.utilities.createElement("fluent-button");N.className="learnMore",N.textContent=this.flyoutData.strings.commonLearnMore,N.addEventListener("click",(function(){e.pageHandlerModule.NavigateToShoppingLearnMore()})),P.appendChild(M),P.appendChild(N),w.appendChild(R),w.appendChild(O),w.appendChild(P),I.addEventListener("click",(function(){w.classList.toggle("toolTipsOverlayShow");var t,e,i=w.classList.contains("toolTipsOverlayShow");i?(I.setAttribute("aria-expanded","true"),null===(t=document.getElementById("vppdn_shopButton"))||void 0===t||t.setAttribute("aria-hidden","true")):(I.setAttribute("aria-expanded","false"),null===(e=document.getElementById("vppdn_shopButton"))||void 0===e||e.setAttribute("aria-hidden","false"));Tt.SO.queueUpdate((function(){if(parent.postMessage({height:F.offsetHeight+(i?56:0),type:"resize_iframe",width:F.offsetWidth},"edge://shopping"),F){var t=new CustomEvent(Ia.e1.onFlyoutResize);F.dispatchEvent(t)}}))})),I.appendChild(k),i.appendChild(p);var L=this.utilities.createElement("DIV");L.appendChild(p),L.appendChild(A);var _=this.utilities.createElement("DIV",{style:"display:flex; flex-direction: row; position: fixed; bottom: 0px; margin-left:63px;"});_.appendChild(T),_.appendChild(I),i.appendChild(L),i.appendChild(w),i.appendChild(_);var F=document.querySelector("#divContentWrapper");this.pageHandlerModule.OnOpenNotification(l.productUrl,l.currentPrice.toString()),this.pageHandlerModule.RecordAsContentViewed(ba.r.PWILO_NOTIFICATION_PRICE_DROP);var H=new o.Z(a.xu.ViewedProductPriceDrop,void 0,void 0,this.flyoutData.common.lastCommittedURL,l.domain);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"User viewed product price drop notification",H,ya.g.CouponImpressionId)}return t.appendChild(i),Promise.resolve(null)}},{key:"ShouldRenderNotification",value:function(){var t,e=this.flyoutData.dataStoreModule.ViewedProductListData;return this.pageHandlerModule.TriggerExperiment(xt.H.priceDropNotification),e&&null!=e&&e.productShowItem?Promise.resolve(null!==(t=this.flyoutData.common.openedWith===D.Te.Auto&&this.flyoutData.experimentData.isExperimentActive(xt.H.priceDropNotification)&&this.flyoutData.common.popupOrigination===St.s.AUTO_SHOW_SERVER_DRIVEN_NOTIFICATION)&&void 0!==t&&t):Promise.resolve(!1)}},{key:"GetNotificationName",value:function(){return D.sM.ViewedProductPriceDrop}},{key:"renderShopButton",value:function(t,e){var i=this,n=this.utilities.createElement("fluent-button");return n.className="shopbutton",n.id="vppdn_shopButton",n.textContent=this.utilities.replaceValueInKey("prodHPriceDropViewAt",this.flyoutData.strings.prodHPriceDropViewAt,t),n.addEventListener("click",(function(){e.startsWith("http")||(e="https://"+e),i.pageHandlerModule.NavigateToRetailerSite(e),i.pageHandlerModule.RecordAsUserAction(Ca.bS.PWILO_NOTIFICATION_PRICE_DROP);var n=new na.Z(a.$S.PriceDropProductPage,i.flyoutData.common.lastCommittedURL,t);i.logModule.LogInfoEvent(a.R.ButtonClick,"User navigated to retailer page with price drop product",n,ya.g.CouponImpressionId)})),n}},{key:"toFixedSafe",value:function(t,e){return t&&t.toFixed?t.toFixed(e):""}}]),t}(),FA=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n            .message-bar {\n                border-radius: 4px;\n                display: flex;\n                align-items: center;\n                padding: 8px;\n                width: 100%;\n                text-align: left;\n                box-sizing: border-box;\n                color: #000000;\n                font-size: 12px;\n                margin-bottom: 8px;\n            }\n\n            .message-bar.success {\n                background-color: #DFF6DD;\n            }\n\n            .message-bar .icon {\n                fill: currentcolor;\n                margin-right: 8px;\n            }\n\n            .message-bar.success .icon {\n                color: #107C10;\n            }\n\n            .message-bar.error .icon {\n                color: #A80000;\n            }\n\n            .message-bar .content {\n                flex: 1;\n                margin-right: 8px;\n            }\n\n            .message-bar.error {\n                background-color: #FDE7E9;\n            }\n\n            .mainTitle {\n                font-size: 20px;\n            }\n\n            .description {\n                margin-top: 4px;\n                margin-bottom: 12px;\n                font-size: 12px;\n                line-height: 16px;\n                text-align: center;\n            }\n\n            .card-title {\n                color: #FFF;\n                opacity: 0.5;\n                user-select: none;\n                position: absolute;\n                font-size: 10px;\n            }\n\n            .card-text {\n                color: #FFF;\n                font-size: 14px;\n                user-select: none;\n                position: absolute;\n                font-size: 12px;\n                max-width: 100px;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n            }\n\n            .card-info {\n                margin: 8px 0 12px 0;\n                padding-bottom: 8px;\n            }\n\n            .virtual-card-info-card {\n                margin: 4px 12px;\n                background: var(--neutral-fill-rest);\n                line-height: 16px;\n                font-size: 14px;\n                display: block;\n                padding: 8px 16px;\n                box-sizing: border-box;\n                white-space: nowrap;\n            }\n\n            .virtual-card-info-single-column .card-content {\n                justify-content: space-between;\n            }\n\n            .virtual-card-info-card .card-header {\n                font-weight: 600;\n                margin: 0 0 8px;\n                font-size: 12px;\n            }\n\n            .virtual-card-info-card .card-content {\n                display: flex;\n                align-items: center;\n            }\n\n            .virtual-card-info-card .card-content .content-controls {\n                margin-left: 16px;\n            }\n\n            .virtual-card-info-card .card-content .content-text  {\n                white-space: pre-wrap;\n            }\n\n            @media (-ms-high-contrast: active) {\n                .message-bar .icon {\n                    fill: ButtonText;\n                }\n                .message-bar .cancel {\n                    fill: ButtonText;\n                }\n            }"}},{key:"getUxRefreshStyles",value:function(){return"\n            :root {\n                --virtual-card-info-background: linear-gradient(90deg, rgba(255, 249, 217, 0.6) 0%, rgba(233, 251, 255, 0.6) 53.13%, rgba(221, 235, 255, 0.6) 100%);\n            }\n\n            @media (prefers-color-scheme: dark) {\n                :root {\n                    --virtual-card-info-background: linear-gradient(90deg, #4C544A 0%, #425559 47.4%, #544E5D 100%);\n                }\n            }\n\n            .message-bar {\n                margin: 0 12px;\n            }\n\n            .virtual-card-info-card {\n                background: var(--virtual-card-info-background);\n                border-radius: 8px;\n            }\n\n            .virtual-card-info-card fluent-button {\n                background-color: transparent;\n            }\n\n            .virtual-card-info-card fluent-button:active {\n                background-color: var(--neutral-fill-active);\n            }\n\n            .virtual-card-info-card fluent-button:hover {\n                background-color: var(--neutral-fill-hover);\n            }\n\n            .card-info .card-header {\n                font-weight: 400;\n                color: #717171;\n            }\n\n            @media (prefers-color-scheme: dark) {\n                .card-info .card-header {\n                    color: #FFFFFF\n                }\n            }\n            .description {\n                margin-left: 12px;\n                margin-right: 12px;\n            }"}},{key:"getNotificationStyles",value:function(){return"\n            #virtual-card-notification h2 {\n                font-weight: 500;\n                margin: 32px 0 16px 0;\n            }\n\n            #virtual-card-notification .description {\n                line-height: 18px;\n            }\n\n            #virtual-card-notification .detail-link {\n                margin: 16px 0;\n            }\n\n            #virtual-card-notification.virtual-card-notification-ux-refresh {\n                padding-bottom: 12px;\n            }\n\n            #virtual-card-notification.virtual-card-notification-ux-refresh h2 {\n                margin: 8px 0;\n            }\n\n            #virtual-card-notification.virtual-card-notification-ux-refresh .description {\n                width: 330px;\n                margin: auto;\n                font-size: 12px;\n            }\n\n            #virtual-card-notification.virtual-card-notification-ux-refresh .detail-button {\n                width: 240px;\n                height: 48px;\n                display: block;\n                margin: 16px auto 0;\n                border-radius: 8px;\n                background: transparent;\n                border: 1px solid #008076;\n                outline: none;\n                box-sizing: border-box;\n                fill: inherit;\n                text-align: center;\n                cursor: pointer;\n                font-weight: 600;\n                color: #008076;\n            }\n            #virtual-card-notification.virtual-card-notification-ux-refresh .detail-button:hover {\n                background: linear-gradient(267.73deg, #F0FEFF -9.53%, #DBFFFB 45.72%, #F8FDFF 97.76%);\n                color: #008076;\n            }\n            @media (prefers-color-scheme: dark) {\n                #virtual-card-notification.virtual-card-notification-ux-refresh .detail-button {\n                    background: rgba(255, 255, 255, 0.09);\n                    color: #FFFFFF;\n                }\n            }"}},{key:"getCopyIcon",value:function(){return A.Z.getTrustedHTML(TA||(TA=(0,E.Z)(['\n        <svg role="img" style="width: 1em" viewBox="0 0 10 12" width="10" height="12" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">\n            <path d="M1 2.085V8.5a2.5 2.5 0 002.336 2.495L3.5 11h4.414A1.5 1.5 0 016.5 12H3a3 3 0 01-3-3V3.5a1.5 1.5 0 011-1.415zM8.5 0A1.5 1.5 0 0110 1.5v7A1.5 1.5 0 018.5 10h-5A1.5 1.5 0 012 8.5v-7A1.5 1.5 0 013.5 0h5zm0 1h-5a.5.5 0 00-.5.5v7a.5.5 0 00.5.5h5a.5.5 0 00.5-.5v-7a.5.5 0 00-.5-.5z"/>\n        </svg>'])))}},{key:"getShowIcon",value:function(){return A.Z.getTrustedHTML(IA||(IA=(0,E.Z)(['\n    <svg role="img" style="width: 1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048" aria-hidden="true">\n        <path d="M1024 512q150 0 292 39t272 107 246 163 214 203q-98 110-213 203t-246 162-273 108-292 39q-150 0-292-39t-272-107-247-162T0 1024q97-109 213-203t246-162 273-108 292-39zm0 878q76 0 142-29t116-78 79-116 29-143q0-76-29-142t-78-116-116-79-143-29q-76 0-142 29t-116 78-79 116-29 143q0 76 29 142t78 116 116 79 143 29zm-375-54q-55-66-84-146t-29-166q0-86 29-166t84-146q-134 53-251 132t-221 180q103 100 220 179t252 133zm1222-312q-103-100-220-179t-252-133q55 66 84 146t29 166q0 86-29 166t-84 146q134-53 251-132t221-180zm-847-171q35 0 66 13t54 37 37 55 14 66q0 35-13 66t-37 55-55 36-66 14q-35 0-66-13t-55-37-36-54-14-67q0-35 13-66t37-54 54-37 67-14z" />\n    </svg>'])))}},{key:"getHideIcon",value:function(){return A.Z.getTrustedHTML(DA||(DA=(0,E.Z)(['\n        <svg role="img" style="width: 1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048" aria-hidden="true">\n            <path d="M1024 896q27 0 50 10t40 27 28 41 10 50q0 27-10 50t-27 40-41 28-50 10q-27 0-50-10t-40-27-28-41-10-50q0-27 10-50t27-40 41-28 50-10zm576 256q93 0 174 35t143 96 96 142 35 175q0 93-35 174t-96 143-142 96-175 35q-93 0-174-35t-143-96-96-142-35-175q0-93 35-174t96-143 142-96 175-35zm-320 448q0 66 25 124t68 102 102 69 125 25q47 0 92-13t84-40l-443-443q-26 39-39 84t-14 92zm587 176q26-39 39-84t14-92q0-66-25-124t-69-101-102-69-124-26q-47 0-92 13t-84 40l443 443zM640 1024q0 74 26 139t72 117 108 84 136 42q19 2 38 2t39 0q-22 63-29 128-152 0-294-38t-273-107-247-162T0 1024q97-109 213-203t246-162 273-108 292-39q153 0 296 36t272 104 245 161 211 211l-91 91-8-9q-108-126-232-224t-280-161q48 66 73 144t26 159v6q-65 7-128 29v-35q0-79-30-149t-83-122-122-82-149-31q-79 0-149 30t-122 83-82 122-31 149zm-37 291q-45-64-68-138t-23-153q0-78 23-152t68-139q-120 52-226 126t-200 165q94 91 200 165t226 126z" />\n        </svg>'])))}},{key:"getSuccessIcon",value:function(){return A.Z.getTrustedHTML(kA||(kA=(0,E.Z)(['\n        <svg role="img" style="width: 1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048">\n            <path d="M1491 595l90 90-749 749-365-365 90-90 275 275 659-659zM1024 0q141 0 272 36t245 103 207 160 160 208 103 245 37 272q0 141-36 272t-103 245-160 207-208 160-245 103-272 37q-141 0-272-36t-245-103-207-160-160-208-103-244-37-273q0-141 36-272t103-245 160-207 208-160T751 37t273-37zm0 1920q123 0 237-32t214-90 182-141 140-181 91-214 32-238q0-123-32-237t-90-214-141-182-181-140-214-91-238-32q-123 0-237 32t-214 90-182 141-140 181-91 214-32 238q0 123 32 237t90 214 141 182 181 140 214 91 238 32z" />\n        </svg>'])))}},{key:"getErrorIcon",value:function(){return A.Z.getTrustedHTML(wA||(wA=(0,E.Z)(['\n        <svg role="img" style="width: 1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048">\n            <path d="M960 0q133 0 255 34t230 96 194 150 150 195 97 229 34 256q0 133-34 255t-96 230-150 194-195 150-229 97-256 34q-133 0-255-34t-230-96-194-150-150-195-97-229T0 960q0-133 34-255t96-230 150-194 195-150 229-97T960 0zm0 1792q114 0 220-30t199-84 169-130 130-168 84-199 30-221q0-114-30-220t-84-199-130-169-168-130-199-84-221-30q-115 0-221 30t-198 84-169 130-130 168-84 199-30 221q0 114 30 220t84 199 130 169 168 130 199 84 221 30zM896 512h128v640H896V512zm0 768h128v128H896v-128z" />\n        </svg>'])))}},{key:"getCancelButton",value:function(){return A.Z.getTrustedHTML(RA||(RA=(0,E.Z)(['\n        <svg aria-hidden="true" role="img" style="width: 1em" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048">\n            <path d="M1115 1024l690 691-90 90-691-690-691 690-90-90 690-691-690-691 90-90 691 690 691-690 90 90-690 691z" />\n        </svg>'])))}},{key:"getZipCardBackground",value:function(){return A.Z.getTrustedHTML(OA||(OA=(0,E.Z)(['\n    <svg width="280" height="170" viewBox="0 0 280 170" fill="none" xmlns="http://www.w3.org/2000/svg" style="border-radius: 8px; overflow: hidden;">\n        <path d="M280 0H0V170H280V0Z" fill="url(#zipCardBackground)"/>\n        <path opacity="0.3" d="M22.965 291.636C108.55 291.636 177.931 243.588 177.931 184.318C177.931 125.048 108.55 77 22.965 77C-62.6203 77 -132.001 125.048 -132.001 184.318C-132.001 243.588 -62.6203 291.636 22.965 291.636Z" fill="#411361"/>\n        <path opacity="0.3" d="M267.931 76.9269C353.516 76.9269 422.897 28.879 422.897 -30.3911C422.897 -89.6612 353.516 -137.709 267.931 -137.709C182.345 -137.709 112.965 -89.6612 112.965 -30.3911C112.965 28.879 182.345 76.9269 267.931 76.9269Z" fill="#411361"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M25.9503 34.2636L26.502 38.6662H45.8137L45.1825 33.6247H36.1771L36.0992 32.9993L44.3923 27.3222L43.8382 22.9101H24.5273L25.1593 27.9523H34.1783L34.2578 28.5825L25.9503 34.2636Z" fill="#FFFFFA"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M46.082 22.9099L48.0567 38.6659H67.3836L65.4081 22.9099H46.082Z" fill="#AA8FFF"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M47.9535 20.8192C49.2183 21.9214 51.0428 21.9214 52.0281 20.8192C53.0143 19.717 52.7878 17.9295 51.523 16.8273C50.259 15.7242 48.4345 15.7242 47.4484 16.8273C46.463 17.9295 46.6887 19.717 47.9535 20.8192Z" fill="#FFFFFA"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M80.508 31.0975L74.4596 31.1038L73.9858 27.3227L80.066 27.3274C81.495 27.3439 82.227 28.133 82.345 29.2124C82.421 29.9071 82.097 31.0975 80.508 31.0975ZM87.652 28.583C87.206 25.0411 84.366 22.8949 80.507 22.9098H67.6514L69.6261 38.6667H75.4088L75.0129 35.515H81.133C85.95 35.515 88.154 32.5742 87.652 28.583Z" fill="#FFFFFA"/>\n        <path opacity="0.49814" d="M30.6016 84.0156C29.9245 84.0156 29.3418 83.778 28.8535 83.3027C28.3653 82.8275 28.1211 82.2513 28.1211 81.5742C28.1211 80.9036 28.3653 80.3242 28.8535 79.8359C29.3418 79.3411 29.9245 79.0938 30.6016 79.0938C31.2787 79.0938 31.8548 79.3379 32.3301 79.8262C32.8054 80.3145 33.043 80.8971 33.043 81.5742C33.043 82.2513 32.8054 82.8275 32.3301 83.3027C31.8548 83.778 31.2787 84.0156 30.6016 84.0156ZM40.3868 84.0156C39.7097 84.0156 39.127 83.778 38.6388 83.3027C38.1505 82.8275 37.9063 82.2513 37.9063 81.5742C37.9063 80.9036 38.1505 80.3242 38.6388 79.8359C39.127 79.3411 39.7097 79.0938 40.3868 79.0938C41.0639 79.0938 41.6401 79.3379 42.1153 79.8262C42.5906 80.3145 42.8282 80.8971 42.8282 81.5742C42.8282 82.2513 42.5906 82.8275 42.1153 83.3027C41.6401 83.778 41.0639 84.0156 40.3868 84.0156ZM50.172 84.0156C49.4949 84.0156 48.9123 83.778 48.424 83.3027C47.9357 82.8275 47.6915 82.2513 47.6915 81.5742C47.6915 80.9036 47.9357 80.3242 48.424 79.8359C48.9123 79.3411 49.4949 79.0938 50.172 79.0938C50.8491 79.0938 51.4253 79.3379 51.9005 79.8262C52.3758 80.3145 52.6134 80.8971 52.6134 81.5742C52.6134 82.2513 52.3758 82.8275 51.9005 83.3027C51.4253 83.778 50.8491 84.0156 50.172 84.0156ZM59.9572 84.0156C59.2801 84.0156 58.6975 83.778 58.2092 83.3027C57.7209 82.8275 57.4768 82.2513 57.4768 81.5742C57.4768 80.9036 57.7209 80.3242 58.2092 79.8359C58.6975 79.3411 59.2801 79.0938 59.9572 79.0938C60.6343 79.0938 61.2105 79.3379 61.6857 79.8262C62.161 80.3145 62.3986 80.8971 62.3986 81.5742C62.3986 82.2513 62.161 82.8275 61.6857 83.3027C61.2105 83.778 60.6343 84.0156 59.9572 84.0156Z" fill="white"/>\n        <path opacity="0.49814" d="M75.9346 84.0156C75.2575 84.0156 74.6748 83.778 74.1865 83.3027C73.6983 82.8275 73.4541 82.2513 73.4541 81.5742C73.4541 80.9036 73.6983 80.3242 74.1865 79.8359C74.6748 79.3411 75.2575 79.0938 75.9346 79.0938C76.6117 79.0938 77.1879 79.3379 77.6631 79.8262C78.1384 80.3145 78.376 80.8971 78.376 81.5742C78.376 82.2513 78.1384 82.8275 77.6631 83.3027C77.1879 83.778 76.6117 84.0156 75.9346 84.0156ZM85.7202 84.0156C85.0432 84.0156 84.4602 83.778 83.9722 83.3027C83.4832 82.8275 83.2392 82.2513 83.2392 81.5742C83.2392 80.9036 83.4832 80.3242 83.9722 79.8359C84.4602 79.3411 85.0432 79.0938 85.7202 79.0938C86.3972 79.0938 86.9732 79.3379 87.4482 79.8262C87.9232 80.3145 88.1612 80.8971 88.1612 81.5742C88.1612 82.2513 87.9232 82.8275 87.4482 83.3027C86.9732 83.778 86.3972 84.0156 85.7202 84.0156ZM95.5052 84.0156C94.8282 84.0156 94.2452 83.778 93.7572 83.3027C93.2682 82.8275 93.0242 82.2513 93.0242 81.5742C93.0242 80.9036 93.2682 80.3242 93.7572 79.8359C94.2452 79.3411 94.8282 79.0938 95.5052 79.0938C96.1822 79.0938 96.7582 79.3379 97.2332 79.8262C97.7092 80.3145 97.9462 80.8971 97.9462 81.5742C97.9462 82.2513 97.7092 82.8275 97.2332 83.3027C96.7582 83.778 96.1822 84.0156 95.5052 84.0156ZM105.29 84.0156C104.613 84.0156 104.03 83.778 103.542 83.3027C103.054 82.8275 102.81 82.2513 102.81 81.5742C102.81 80.9036 103.054 80.3242 103.542 79.8359C104.03 79.3411 104.613 79.0938 105.29 79.0938C105.967 79.0938 106.543 79.3379 107.019 79.8262C107.494 80.3145 107.731 80.8971 107.731 81.5742C107.731 82.2513 107.494 82.8275 107.019 83.3027C106.543 83.778 105.967 84.0156 105.29 84.0156Z" fill="white"/>\n        <path opacity="0.49814" d="M121.268 84.0156C120.591 84.0156 120.009 83.778 119.52 83.3027C119.032 82.8275 118.788 82.2513 118.788 81.5742C118.788 80.9036 119.032 80.3242 119.52 79.8359C120.009 79.3411 120.591 79.0938 121.268 79.0938C121.945 79.0938 122.522 79.3379 122.997 79.8262C123.472 80.3145 123.71 80.8971 123.71 81.5742C123.71 82.2513 123.472 82.8275 122.997 83.3027C122.522 83.778 121.945 84.0156 121.268 84.0156ZM131.054 84.0156C130.377 84.0156 129.794 83.778 129.306 83.3027C128.817 82.8275 128.573 82.2513 128.573 81.5742C128.573 80.9036 128.817 80.3242 129.306 79.8359C129.794 79.3411 130.377 79.0938 131.054 79.0938C131.731 79.0938 132.307 79.3379 132.782 79.8262C133.257 80.3145 133.495 80.8971 133.495 81.5742C133.495 82.2513 133.257 82.8275 132.782 83.3027C132.307 83.778 131.731 84.0156 131.054 84.0156ZM140.839 84.0156C140.162 84.0156 139.579 83.778 139.091 83.3027C138.602 82.8275 138.358 82.2513 138.358 81.5742C138.358 80.9036 138.602 80.3242 139.091 79.8359C139.579 79.3411 140.162 79.0938 140.839 79.0938C141.516 79.0938 142.092 79.3379 142.567 79.8262C143.043 80.3145 143.28 80.8971 143.28 81.5742C143.28 82.2513 143.043 82.8275 142.567 83.3027C142.092 83.778 141.516 84.0156 140.839 84.0156ZM150.624 84.0156C149.947 84.0156 149.364 83.778 148.876 83.3027C148.388 82.8275 148.144 82.2513 148.144 81.5742C148.144 80.9036 148.388 80.3242 148.876 79.8359C149.364 79.3411 149.947 79.0938 150.624 79.0938C151.301 79.0938 151.877 79.3379 152.353 79.8262C152.828 80.3145 153.065 80.8971 153.065 81.5742C153.065 82.2513 152.828 82.8275 152.353 83.3027C151.877 83.778 151.301 84.0156 150.624 84.0156Z" fill="white"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M239.658 120.884C241.117 120.884 242.287 121.245 243.032 121.581L242.523 125.174L242.185 124.983C241.491 124.647 240.598 124.324 239.367 124.347C237.894 124.347 237.213 125.084 237.213 125.773C237.204 126.55 238.009 127.062 239.324 127.829C241.496 129.012 242.498 130.447 242.484 132.334C242.455 135.776 239.888 138 235.931 138C234.243 137.979 232.617 137.579 231.738 137.116L232.266 133.403L232.751 133.667C233.988 134.286 234.788 134.537 236.294 134.537C237.376 134.537 238.537 134.029 238.547 132.918C238.554 132.192 238.061 131.674 236.596 130.862C235.168 130.068 233.276 128.739 233.297 126.357C233.319 123.133 235.939 120.884 239.658 120.884ZM209.15 121.411H215.227C216.045 121.445 216.706 121.741 216.934 122.736L218.243 130.313C218.244 130.314 218.243 130.317 218.243 130.318L218.637 132.588L222.326 121.411H226.317L220.385 137.771L216.398 137.775L213.224 124.574C215.112 125.695 216.72 126.993 217.651 128.778C217.411 128.213 217.095 127.575 216.69 126.947C216.242 126.251 215.3 125.363 214.843 124.931L214.775 124.868C213.292 123.467 211.279 122.335 209.104 121.736L209.15 121.411ZM231.807 121.43H227.904L225.463 137.765H229.366L231.807 121.43ZM249.948 121.43H252.905L256 137.765H252.451C252.451 137.765 252.098 135.888 251.984 135.316C251.688 135.316 250.455 135.314 249.294 135.313C248.265 135.311 247.293 135.31 247.087 135.31C246.938 135.752 246.281 137.765 246.281 137.765H242.266L247.945 122.786C248.347 121.722 249.032 121.43 249.948 121.43ZM249.893 126.88C250 126.558 250.138 126.14 250.238 125.823L250.495 127.218C250.495 127.218 251.224 131.081 251.376 131.891L248.219 131.893C248.533 130.96 249.734 127.369 249.734 127.369C249.724 127.39 249.795 127.176 249.893 126.88Z" fill="white"/>\n        <defs>\n            <linearGradient id="zipCardBackground" x1="140.966" y1="-28.1842" x2="147.412" y2="191.269" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#1B1323"/>\n            <stop offset="1" stop-color="#21182A"/>\n            </linearGradient>\n        </defs>\n        </svg>'])))}},{key:"getAffirmCardBackground",value:function(){return A.Z.getTrustedHTML(PA||(PA=(0,E.Z)(['\n        <svg width="280" height="172" viewBox="0 0 280 172" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <g id="Affirm Visa" filter="url(#filter0_ii_1_2)">\n                <rect width="280" height="171.902" rx="9.06191" fill="url(#paint0_linear_1_2)"/>\n                <g id="Frame 63343327" filter="url(#filter1_d_1_2)">\n                    <g id="white_logo-solid_bg 1" clip-path="url(#clip0_1_2)">\n                        <path id="Vector" fill-rule="evenodd" clip-rule="evenodd" d="M28.5899 45.4986C27.7242 45.4986 27.2832 45.0727 27.2832 44.3727C27.2832 43.0674 28.7402 42.6284 31.3977 42.3462C31.3977 44.0855 30.22 45.4986 28.5817 45.4986H28.5899ZM29.7333 35.7166C27.8336 35.7166 25.6498 36.6091 24.4639 37.5538L25.5468 39.8382C26.4975 38.9685 28.0345 38.2245 29.4213 38.2245C30.7395 38.2245 31.468 38.665 31.468 39.5527C31.468 40.1483 30.9861 40.4501 30.0747 40.5692C26.6674 41.0098 23.9967 41.9497 23.9967 44.5718C23.9967 46.6506 25.4782 47.9086 27.7928 47.9086C29.4458 47.9086 30.9159 46.9916 31.615 45.7874V47.5823H34.6956V40.0618C34.6956 36.9615 32.5411 35.71 29.7349 35.71L29.7333 35.7166Z" fill="white"/>\n                        <path id="Vector_2" fill-rule="evenodd" clip-rule="evenodd" d="M60.6522 36.0543V47.5676H63.9484V42.0198C63.9484 39.3846 65.5459 38.6096 66.6583 38.6096C67.159 38.6057 67.6497 38.7505 68.0679 39.0256L68.6706 35.9825C68.2036 35.7958 67.7035 35.7053 67.2006 35.7166C65.5067 35.7166 64.4417 36.4655 63.7394 37.9895V36.0543H60.6522Z" fill="white"/>\n                        <path id="Vector_3" fill-rule="evenodd" clip-rule="evenodd" d="M83.9463 35.7165C82.2035 35.7165 80.9 36.7445 80.2222 37.7366C79.5933 36.4557 78.2621 35.7165 76.6613 35.7165C74.9201 35.7165 73.713 36.6825 73.156 37.7953V36.0543H69.9774V47.5676H73.2769V41.6396C73.2769 39.5184 74.3925 38.4921 75.433 38.4921C76.3755 38.4921 77.2412 39.1007 77.2412 40.672V47.5676H80.5341V41.6396C80.5341 39.4874 81.622 38.4921 82.7115 38.4921C83.5837 38.4921 84.5082 39.1252 84.5082 40.6492V47.5676H87.8012V39.6082C87.8012 37.0219 86.0583 35.7165 83.9529 35.7165" fill="white"/>\n                        <path id="Vector_4" fill-rule="evenodd" clip-rule="evenodd" d="M52.6305 36.0543H49.6446V34.8844C49.6446 33.3604 50.5152 32.9263 51.265 32.9263C51.7769 32.933 52.2802 33.0587 52.735 33.2935L53.751 30.9716C53.751 30.9716 52.7203 30.2993 50.8468 30.2993C48.7413 30.2993 46.3451 31.4855 46.3451 35.2075V36.0543H41.355V34.8844C41.355 33.3604 42.224 32.9263 42.9754 32.9263C43.4881 32.9263 43.993 33.0524 44.4455 33.2935L45.4614 30.9716C44.8554 30.6175 43.8803 30.2993 42.5589 30.2993C40.4534 30.2993 38.0572 31.4855 38.0572 35.2075V36.0543H36.1493V38.5932H38.0621V47.5676H41.355V38.5932H46.3516V47.5676H49.6446V38.5932H52.6305V36.0543Z" fill="white"/>\n                        <path id="Vector_5" d="M57.8868 36.0543H54.5971V47.5627H57.8868V36.0543Z" fill="white"/>\n                        <path id="Vector_6" fill-rule="evenodd" clip-rule="evenodd" d="M54.718 34.0979H57.9407C59.8208 28.1928 66.1993 23.0023 73.7849 23.0023C83.0104 23.0023 90.9831 30.0187 90.9831 40.9413C91.0112 43.1833 90.7028 45.4169 90.0684 47.5676H93.1964L93.2274 47.4599C93.7545 45.3307 94.0145 43.1443 94.0016 40.9511C94.0016 28.7704 85.1159 20.0033 73.7914 20.0033C64.8958 20.0033 56.9672 26.1711 54.7196 34.1012L54.718 34.0979Z" fill="white"/>\n                    </g>\n                    <g id="Frame 63343326">\n                        <g id="Frame 63343197">\n                            <g id="Frame 63343196">\n                                <g id="Frame 63343325">\n                                    <circle id="Ellipse 1161" cx="27" cy="108.402" r="3" fill="white"/>\n                                    <circle id="Ellipse 1162" cx="39" cy="108.402" r="3" fill="white"/>\n                                    <circle id="Ellipse 1163" cx="51" cy="108.402" r="3" fill="white"/>\n                                    <circle id="Ellipse 1164" cx="63" cy="108.402" r="3" fill="white"/>\n                                </g>\n                            </g>\n                        </g>\n                        <path id="visa" fill-rule="evenodd" clip-rule="evenodd" d="M235.093 127.22C236.96 127.22 238.456 127.657 239.41 128.063L238.758 132.405L238.326 132.174C237.438 131.768 236.296 131.377 234.721 131.405C232.836 131.405 231.964 132.295 231.964 133.128C231.953 134.066 232.983 134.685 234.666 135.612C237.444 137.042 238.728 138.776 238.71 141.055C238.673 145.215 235.387 147.902 230.325 147.902C228.165 147.877 226.084 147.393 224.96 146.834L225.636 142.347L226.257 142.667C227.838 143.415 228.862 143.718 230.79 143.718C232.174 143.718 233.659 143.104 233.671 141.761C233.68 140.884 233.05 140.259 231.176 139.277C229.349 138.318 226.927 136.712 226.954 133.833C226.983 129.939 230.334 127.22 235.093 127.22ZM196.06 127.857H203.834C204.881 127.899 205.726 128.256 206.018 129.459L207.693 138.614C207.694 138.615 207.693 138.616 207.693 138.617C207.693 138.618 207.693 138.619 207.693 138.619L208.197 141.363L212.917 127.857H218.023L210.433 147.626L205.332 147.631L201.271 131.679C203.688 133.034 205.745 134.602 206.936 136.759C206.629 136.077 206.224 135.306 205.706 134.546C205.133 133.706 203.928 132.633 203.343 132.111L203.256 132.034C201.359 130.341 198.783 128.974 196 128.251L196.06 127.857ZM225.047 127.881H220.054L216.93 147.619H221.923L225.047 127.881ZM248.257 127.881H252.04L256 147.619H251.46C251.46 147.619 251.009 145.351 250.863 144.66C250.485 144.66 248.911 144.658 247.429 144.656L247.421 144.656L247.414 144.656C246.099 144.654 244.86 144.652 244.597 144.652C244.407 145.187 243.566 147.619 243.566 147.619H238.429L245.695 129.52C246.209 128.234 247.086 127.881 248.257 127.881ZM248.186 134.467C248.323 134.078 248.501 133.572 248.629 133.189V133.19L248.957 134.875C248.957 134.875 249.889 139.542 250.084 140.521L246.045 140.523C246.447 139.397 247.984 135.057 247.984 135.057C247.97 135.082 248.061 134.823 248.186 134.467Z" fill="white"/>\n                    </g>\n                </g>\n            </g>\n            <defs>\n                <filter id="filter0_ii_1_2" x="0" y="0" width="280" height="171.902" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n                    <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>\n                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n                    <feOffset dy="-0.787992"/>\n                    <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>\n                    <feColorMatrix type="matrix" values="0 0 0 0 0.0288889 0 0 0 0 0.0296 0 0 0 0 0.0333333 0 0 0 0.2 0"/>\n                    <feBlend mode="normal" in2="shape" result="effect1_innerShadow_1_2"/>\n                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n                    <feOffset dy="0.393996"/>\n                    <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>\n                    <feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.5 0"/>\n                    <feBlend mode="normal" in2="effect1_innerShadow_1_2" result="effect2_innerShadow_1_2"/>\n                </filter>\n                <filter id="filter1_d_1_2" x="-4" y="0" width="288" height="179.902" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n                    <feOffset dy="4"/>\n                    <feGaussianBlur stdDeviation="2"/>\n                    <feComposite in2="hardAlpha" operator="out"/>\n                    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>\n                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1_2"/>\n                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1_2" result="shape"/>\n                </filter>\n                <linearGradient id="paint0_linear_1_2" x1="2.27207e-06" y1="4.75535" x2="234.857" y2="156.995" gradientUnits="userSpaceOnUse">\n                    <stop stop-color="#4A4AF4"/>\n                    <stop offset="1" stop-color="#3231C2"/>\n                </linearGradient>\n                <clipPath id="clip0_1_2">\n                    <rect width="70" height="27.9021" fill="white" transform="translate(24 20)"/>\n                </clipPath>\n            </defs>\n        </svg>'])))}},{key:"getErrorImage",value:function(){return A.Z.getTrustedHTML(MA||(MA=(0,E.Z)(['\n        <svg width="298" height="110" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M8.618 109.982c-27.889-31.488 16.657 1.434 65.81-57.223C116.96 1.997 235.773-23.593 219.788 29.02c-15.986 52.614-64.687 72.74-35.655 63.03 29.032-9.709 79.982-23.465 106.964-25.262C318.077 64.99 257.274 110 257.274 110H8.618v-.018Z" fill="#F5F5F5"/>\n        <path d="m185.759 45.401-24.532 24.731c-1.43 1.43-.786 3.931 1.216 4.431l33.686 8.935a2.701 2.701 0 0 0 3.29-3.288l-9.154-33.594c-.644-2-3.076-2.716-4.506-1.215Z" fill="url(#a)"/>\n        <path d="m114.382 17.383-14.59 31.664c-.858 1.858.643 3.93 2.646 3.788l34.687-3.217c2.074-.214 3.147-2.501 1.931-4.217l-20.097-28.447c-1.216-1.715-3.719-1.43-4.577.429Z" fill="url(#b)"/>\n        <path d="m142.132 21.814-42.125 62.399c-2.504 3.645-.072 8.649 4.362 9.006l75.168 5.289c4.434.286 7.509-4.288 5.578-8.291l-33.042-67.688c-1.931-4.002-7.438-4.36-9.941-.715Z" fill="url(#c)"/>\n        <path d="M143.562 72.562c-1.573-.143-2.789-1.5-2.646-3.073l2.074-29.234c.143-1.572 1.502-2.787 3.075-2.644 1.574.143 2.789 1.5 2.646 3.073l-2.074 29.234c-.143 1.572-1.502 2.716-3.075 2.644ZM143.133 82.569a3.218 3.218 0 1 0-3.218-3.217 3.217 3.217 0 0 0 3.218 3.217Z" fill="#fff"/>\n        <path d="M189.049 62.198c-1.502-.428-2.361-2.072-1.931-3.573l6.15-20.514c.429-1.5 2.074-2.359 3.576-1.93 1.502.43 2.36 2.073 1.931 3.574l-6.222 20.585a2.735 2.735 0 0 1-3.504 1.858ZM187.046 71.99a3.217 3.217 0 1 0 .001-6.434 3.217 3.217 0 0 0-.001 6.435Z" fill="#4A0FFA"/>\n        <path d="M110.735 37.253c-1.502.429-3.076-.429-3.505-2.001l-5.865-20.657c-.429-1.5.43-3.073 2.003-3.502 1.502-.429 3.075.429 3.504 2.001l5.865 20.657c.358 1.5-.501 3.073-2.002 3.502ZM112.594 47.045a3.218 3.218 0 1 0-3.218-3.216 3.217 3.217 0 0 0 3.218 3.216Z" fill="#1F65F1"/>\n        <path d="M154.218 14.167c-.429.714-.286 1.572.286 2.144.072.071.215.214.358.214.858.5 1.931.215 2.36-.571l2.217-3.717c.215-.43.286-.858.215-1.358a1.591 1.591 0 0 0-.572-.93c-.072-.071-.143-.071-.215-.142-.858-.5-1.931-.215-2.36.571l-2.289 3.789ZM161.013 22.1c.071.143.214.358.357.5.573.501 1.359.644 2.003.287l3.719-1.859a1.69 1.69 0 0 0 .858-1c.143-.43.143-.93-.071-1.358-.143-.215-.286-.43-.501-.572-.143-.143-.358-.215-.501-.286-.429-.143-.929-.143-1.358.071l-3.72 1.859a1.69 1.69 0 0 0-.858 1c-.143.5-.143.93.072 1.358ZM145.493 12.594c.072.357.215.715.501 1 .357.358.929.572 1.43.501.93-.143 1.645-1 1.502-2.001l-.644-4.575c-.071-.429-.286-.857-.643-1.143a1.795 1.795 0 0 0-1.359-.358c-.93.143-1.645 1-1.502 2.002l.715 4.574Z" fill="#C8C8C8"/>\n        <defs>\n        <linearGradient id="a" x1="160" y1="64" x2="211" y2="64" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#8CCFFF"/>\n            <stop offset="1" stop-color="#1F65F1"/>\n        </linearGradient>\n        <linearGradient id="b" x1="140" y1="43" x2="99.995" y2="52.978" gradientUnits="userSpaceOnUse">\n            <stop offset=".001" stop-color="#1F65F1"/>\n            <stop offset="1" stop-color="#8CCFFF"/>\n        </linearGradient>\n        <linearGradient id="c" x1="92" y1="99" x2="186" y2="99" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#FE7002"/>\n            <stop offset="1" stop-color="#FFBE00"/>\n        </linearGradient>\n        </defs>\n        </svg>'])))}},{key:"getErrorImageUXRefresh",value:function(){return"iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAMAAAC/MqoPAAAC61BMVEUAAAC0qKY2MzrYzd/91zb/9kxTSV1FImHdz+eSfZ/ej0h1WJJFQZSQg5rcMX9dW1+WhqGYgabLxs69GGeKgJL9yTf652LppknbhkWmfk/pzV67gC/uKkranENwamxRT1LWxs3//WHtu0Tqv15VUVejcJf/6j7rxF7Qx9fONXSDeIvVMmJlX2tiVH/PLnfNxNTKwNHSydmETVi9KWfPN3nBs8i5rcCwnV5NTVuxqrVtYnnbyVTs0jq9J2fDuMrIIz3Hvc27scOwpLjGJkDyMVDaNnlnWm93aoVpYW6ekKddVmv042jBhC2OX3CFXVO3n1786WaUh25OPF1MO1tKOlhPPGBJOlVHOVNFOFD40UL7u0T7vkNCN0z5x0L5xEL6wkNANkdBNkr6zUNEN076tEP7ykNBOkb3zkL5z0L6tkL6y0L4s0P6sUP7x0P5ukL8t0T6uEL7wUP400FMLWNKKGP3v0T51UT3ykLazeL4rkEzMDhPOGHWx9+diqr7xEP/8FE9OEBNNGHPv9pWQV7Txdurl7hRQVtPP1a3pcONfZhYTWL+xUH/0kCvnbs6MESlaWtGREf+1j/Jt9TyqTylk7BYN3UwKTdINVv/5lHGkEm0oMFcU2ZNPlE6LUrSy9ejjrHSI3YrKTPIGG5KPUn82Ub/wELNv9XzxEPGttHArsyNalf+xDcEEkvgn0i7qMf/3kmacVb8z0JEMlT/uEI7MjleSlkkI0onImBAMFxHOkr0uEUtKFT/zEGJdZaDakn4x0c6K1Xvr0deT0qteTPvoEe+rMgVGVPomEjemTDTkC70qUbqojbHiC3Cr84fHlrHElTltUnnLWQkCmLlvEU2LD6PGyvTsUkPIEjLETrWG2D2LD/msUfiMnXaF0jWESrEs82BbI63jUnXrk1vWInmw0PnHTSkhlfmJ1b+4TvHvM4CCTqiYlRyWUHcKHC5k0UwPkSzhEzAnDxSNHLWsk2YOj/PnFI8MWu+tsOATnJvaunrAAAAUnRSTlMABv79/v3+/f7+/k1NWP7A/v1p/t/+o/7+28H+/v6l2yP8/sLZIP7BzmLfh6T93M7OzvuuPf7+/sVpOP7+1s7ezs7Ovqight5Vzpds/fTewYakAMEs9AAAFkhJREFUeNrs0jFuhDAQheHxBdzQbkthIbmBFqXYcM/VXgily0qhpuIOGYOIA3XMFPm/C7z3PBYAAAAAAAAAAAAAAAAAAAAA+K9c7cSeE1VfWSW0fXzEOHRizYU2pirNNVVCXz2fz0cS7cafq1xxh6bSuC3Pe9+IHdceqgQpTON+XtqrQay4PlfxJbfnmx+eOgU6sbAd4VClK1mlOy9XtZgIe5XcJDopp62S4/TB5ux9nq586R9Yr3H5qQ3P3lXJqUqUYkKVty/L8rUJYqD5NX1Zu3it0kkpmjeqV5KnNxY/vh3HXEWVvoLm5cCP3SAG+r3KoUu56fcxmcZJ0+Z5z3uX67m3rcpr0ia5SrkPeP9cTcmc3BKb6Ycqu2um3xLr6dOpy19Od+fp38Tb2+uLcRwH8Ai3rpDzMW5cuRLKjSSEWJttbMwYxthqll3gygppUiJciKUccho55ZyI3DiVC6WQfskh/gDvz+fzfL/f57B59myPvL/P92sjj+fl/X2eOb7nfKKMeieZ8x8ec6CbS0FGjXqH4aT36xdm6+9tPxzQiv4fMtsO15cS4u+mZsydOtiWab9fO/P72aNHj4ZN9GaKI4unD+4g0xeP6CRTvJci14IsMicbM3TognGovkv49Pq6uj3fv3+vVk+o9O/7OmFHKnX3bjqdvvuXXPpZ7yRvv22Lb/PNqfid7+pSTthT/Y7oy93/4OOFwzt3Dh3XnX1evX+1vyNNe3b1fS2ctZLidcjZIS2y72dff//s6vs5oDQAh1la5cusr3279KV4o072YNbkL5MnDxw4viv7jPqJ6qFD1XZpGjki8lY/AQNIXvVJ/ybk7QMyDh5f+5pVvzRZTvTx48d30/qk6qETJ4jepiWRu/QCt+t/9qELnzSp830DhgzA8ffcQed+2WXkyFDUHni74wYCvf+uVqm//Xpzb7JBKTbOFht79xb3tsrtn293+Wdd388D+xw5cACHO19Kd/rqvierX3sw6wuCe53o2PJBM38X00m+zhOSNxJJpEGjyLNYxMRPwQ4N3wH5Ov/Uz33bd8mZfTgk+BLqbQcOlA7k7pyr+56M5acuIBZ9QeDaB/dn+qtW8pNvv95vbE1Iko4U7dl7pBP5ScjXIhnOpUsZDDourafJg14cqHQmx7N92ylE0ZcEpk+vCn3/rlWr1uFwya9s2EopWP5CIplIulLuWH575cq1lI32ZDI4OOvXr7+UuwT5Sf+TQX6qhA9BopN94EDc7F095UBfJVlHYx29Ynl+wwbgWa+SSPBMJgvJMuAFS776b2PVuhuQb15pZS1mhdwVrBLxV1jOJciV6FeONyQ/ADmFat85sHe6iZG3whOf9eVkg+Tqp82s6iVfr8gJbfAI6Fqe28jy0ySXc3izWr7BkpdKvdH7ja3yfnfTcXot36ro7qB36VxdGq5sNXO5a7ynwrGwPJVa6U5lJWqvSP84lLx12K3l8RKlN7pqff9+rzwLOOPb8tG5qQhUWmQgrKc3LBd6yotnOFYfOcfIQ6KjdY98GHWet9kLBN+KoVIWOXTGrt6JXuDSOdO9gZzZSAB5rvSv6Dcg35JXcFN7AXZX56vFamI6t96pzr2tb8RkOfszAeTxUOm2S5fO8/kszeyGmxtwbMXBtbvkbQKxhOWbRY7DQQecBqI6t51AD8T8vFryeDxsunWtx0+SPEtsBO1T6ZAj7s5vtKE75HtTVhiectqZbnXuezKRCzweDp33u5Gf584RLHAjkBcAv0m9G/mNYHJu3WmHmo6AcgRySo90RNONHGp1s+d16fDbOl+xwu9aV9w498F0ruwO+sqN9GwPIGc0lpDpRs6F59nNt7o84aV007n4MOSFWvTXq851SO6527V8RYDOQ6O75YTnMF30CB52NvkKFSBbhTtPO+SIAy93OslxEnUW+TmQV7RgNXKBY2F5SK1r+Sah4yGXtR5xmOTmHa92O+Q+Mbu9feuwX2K5T5Qcdnyosz60DW/kmo7YPtcJD3cweVpKN7e6174xoByBmo6e6VWi2+UC1xs+T3TsePBRecfyNUqOQwVwGkHliCUHXaJKD4cu8u15E6jZTV8wHHIskK8JKG+/4dcGkdMw9tBaV/JNWbPhsd8tPeRWCkHksGPY6S777S46z8luD691kUO9CVNteJajcYrApfM1K9as4AMTC7/hKYuRg+1pPeXo/PGxFeoccjqZOmsgv0VyYXPdTMcIp/XVx0+OhlzRs1a4cy2/SfJruEAbHQNZwYMXLS9T5144Dod8jZcuU9FFTmosDOcRTuuvXq2CPAu55cZkN75Qcsaz3Dcihxvx4DEccnhxIOyXV+YN5MduPXi5L7deOpcJPc8e6f2Jvv8ayZFNedhZropXtd8EfEPyyLXlyzuTI2XgWc7LDsARsZvOTRTd+ROh5WLXkRte03d2S7+2avQmuCGngYBPavw5TVZKxyxsaHQiX07ychlyctM0lSu3kftF5EzPqUe8/nDvuXWWc+UI6FAzHmze71uUXeTG6ADLisM84fhA3a57Pbh8PdHFnCvl1G43H26wz5wKTWB69UTz6cGDQkfltEjrmNS6ROSg80DYKW8w6Q0vx5QctZPfEXfny9VAAOWVXzjkii6dIyKP69YhX9YNvXmi+fwZ07HfcUDNcKGTPK/lLSN0CeSy2yUpLz1l5K5zeF9ZctiZbuBqSuuHB86M7O6CDvnIJ6Dr1jERuBmucwVy34g87YiLbpP7RO12dI6+gde3utRuPtdnLt09qAt6tfnwKdMRorOf8YhqXeSxjuTpdNEr3yGL0FNB5LzdVes5Wkq6fKafOjxzENJN6w+fC53tEmLb6IHkRbccYtGzPKU794t6whEcM856k5J6xF+YOWjPnm7okx4utNHRudzrtqD1vEse0y9int1ONzpNrEw3esh5ijzWibwCOsfy0gsTkf9auudoV60PfzhS0zdZydr5VudA+iQm8nRRWvc+6eA3cldireWAqw2fi2Pa3TS2lU79ig06uqdHurZjswtc6Nm8Vx5rKy8iDrqosd2xbt68ObXZK0d85KAbd07LS/FTby7X9uwh+pgeW2d8lvCGruQxDAc+xhOHlifLSQU3dInYU265/u62m8gmp4GArt18lMQO+b3oILQeAh1Rt7vCs9w/xx5/aJTLyWSxXEy79LzTBS7ymE+0XJWOKW6eJUzJgTf3YrXdIdBh58iNbuS3YtFO5Njt6Bz2NA7vlqfe28nRuT2WPKNLp96pbsE75MfCoVulZxnfTr68tfxHI0kB3t26utNTTnl7/7F7JM9AS43raTPneIF8+bFobfeeUOjmORek86iWl4VedNDToCMir8X8Urt3leSZzPoMkXOykJ/IvCj55WPRMOh6u0OOaHk0gBzBvV703usiL3ciPyZyhLc5FgSrrW/TeUzoR8O61/l3ra7Ooxj+ndPAje6xp0R+BvK/7SFAlDwngypHZJXSbZ1DHhZ9k4qr86ihR+UFr1F5WxO5rh2xs1F6Om3k8p0MlYaOlm/k/a4ecTTi0rtHLvQ9YX24CVzJW9Kjiq7kBu7pnGoXuZzAQ5cTmvscf/XK8gx1rZonMIZDHi497+qcjXarbcWXarcXzFMuWXbi+YNtL8nFjUPO4KZHIVedw42QnAfSovOQ6YhNzjrzhTe1FyRPlInt+HTTerXbX9SiknZnjEUtuSRHU5Wei8O+3in/V/RNJPdP7dznRiIBO8sxvU94utf3GnkLsYqWb0S4dNQuekTUdnn4dNO5v/zxxQTYBaCVvMi1OyNyvxi5TPVxLnTYczn757kkEgmRjgSQ4y43+72MIc85+oTrRB7BcMip7gpvd17ANr+k0fKY7Wy12qAw6SyPdNZ5geAJLl0OyMltskPLvXCn/BLJYQcek/ggm97dcmk9TLq/PGLkcqNLqHMayF92e8S5Roz8dgVwyCUiB1q3rna7Qx7ZHSYd8kgtQqeVs9MLPjD5K/lL6ZztBb7VZRG6q/NIm0TVF5ac4GyviB0DZEsPuOk8fLqR+wXyQqKQQLh3cWMwvUz4opH7Re12+YfCpvWKwKV77vz6ZZd8We/04HL5LwEQ893O9iLpuXQ6Asvp0Pe6PObWZ4gtIfkf1u2YNYooigJwpX/DxtI+f0IEZ1zFlVWQLJJonIkQFhuDBFLEkMZiBUkXazFFIiimsNFGxJ9gYS0I1p53z957817ynNnZOTPMrEKG+XLuvEyRTOVqN3UEvfWdhVt/2lL+jfIQzLsvcwjsSJfOo4kHHIEdZjZPefK1ZW/0IC8bb3bb5Rh27FSv20t82CjfbiX/OAp/ETMWurXu7zRR53F6o7PzdvKhRuxSvNCxy7xvvGgr//5xMh6HaR/HSzzkSPjhnsj7bz037eWpj2WpctlADvboFZ5r/ExeYrMLlHos+SlcDHJ0Ln8SAD7HfZXruw484LnOy37oLi8Tb3TbUefC9sqt9fWNZyr3axncP2+/FzmCyhHCg5rh+uadp/SeWs8+52V22hGTOx5h55nvoMXlCOC0+8Rr65G8/9Yp5yjiwLZ0xnHgSeWR3eks3TuX8Hr2UacdH0R+QjhLj0O6yzlD/tQ4fWcR+iN2XjI86wcP5DXdGoV77yovm2Kd+7wTz2eddMh3/1Buj482gxQL002ejcvrIfPYW/dw2tvK2bnXrnyfd7zT7ErnWoR1j2Mv9Kec9tZyT1o65OtzdU642dOBh3w65dWSSYzpVzrSX7aVV1m5Dzzkx3PK5ce6l+7htGev5vTB9Y703x/CG3ErudZu8AS/EeRbbacdduUncmYSpj0vLwrSX/9Ywu/NdaB/+Xx0eLNRvhWmfaWGPU7SucuLInO71vlI2GtBz5mP3Q8g/8lpz2UbdMj/Ll3oRP8K+a3pefRCNuyUV8OVKpWn61zUeYEd0X/5RSlfQ8Zp7eB787t/KM8mtC7yzS70q5+P9g8PVV5Iwkn/wWOQVzV22m3qne3TrtfwE7S8HjOTw47eNWeWOeu8+N+8gw55N/qno33QVe43rJ8pP4Z8JciH3KxybK5/I50XUZQOQCyHG5HSJ4DrUpfKZ0UUVoTPkNzZzt+lzc1O9E9He3tGj7x+r6XKK0NXjvew8zR+MSq2KGdGY8w88RqVc9qJJbhIO0cuHkPeiX5tD3LSnZ0G8hWRY+SBxjl+iW+WM+m0Q20DL2h90K3zU9841m9t2K0tvXrVjX4pop9vt85ZOwqnXOnkb7x53CjXzu+ujYQOe7TOnVrjVZ4OoG0c9x+/3nalX57Rp5ygJnmA167mZs95e7lE5KKHOe7dO88sHCY/WJzeJKe9hj3RD7vLiWfzwPsrzarL86H84KAz3Qe+4TlHoK4rYVfps76+iNxD+6S1HL8e3PvAp9POCJr4iD6c6zlPEsmReeQ90KfTrHy5Wq402nadyO+IfIAvwGEwwBEHHOXE/zb5s/+VPtbOt1rJ+6Gr/PSdJ3LS6bfAzc4HDUk6J131tsTfX83JB2flT3qh3yCdRWGTmNwj7AgP+dDl+Vjn2HO931c5p2WAhGNKpxy/Hdxf6wNNLI/0XOAt7Ly9nO4MfRU75M/9aqT7WQeA8n5al9LPky9T7vA6Hvh55Pdm8nSNx2FCOzp/DnlTgvw2sih9n/SMXOzhx1stbzSAJ8vcPHLQw7Z2IuoR9hO+zOEU0l4Od1/0aU4OuhUP/VC3Tp3Tjl0r5w74nPJ3cPfY+ln5Q8AVXxOPDe66k5z5R8z5vLQNhnE8PYXUigqDevHSTU/z0pP0D1DnEHbxIMy5waCTHnQkrkioEEpBEZGBIsqGF0chUCxeVmShCkKhJ8k1l6LgZZfRUdhx3/d5Y1rr6pvWST/v877+IInvJ89raOB93+Iqkr6KvHv6bMgz+znf5t6M0Y7VwbO3/BPN7h1zWg1B4igY8O6YhzgNfJ53v+bOBpkTbyjrXtrnvLeYH77N+ewSN+0PVEfW9Vbmnj5YuikA729Lvs2Xoc4nyxZpojT+0VfnkP4i3Fm0Zx6vp/2QVnaOPCTrus7cUfENNyfeeyDtC3jgMRbdJ94CzOk0NPwLb1345VzzeYijQaHM86CHHa9FMmdnedW7iPuza86nUAJypxHfkfqYq24Yhk6QuckWdDeSoBVg3rJ25p9YTJC5gJlCGuYAc8qWEfOIfy15ZeYwFADzeDzJgDrdAagfjYBXbav3vfvK1evo383ySnmlGdqvpg5uhGnrhghdToe/nWBfPgEbl6oqvtqMfZ1MZpONfJg9PMIWwkcv21PH0eOvoX5aUOvotlkun1Pcx0oZ5qoIQ07nls5OGGhbEvlY0zRDFaHb+ewdkrOfsYnwp5jULsNfYH5a0DRNdbHN83sJI1hj2oYqRNaHEmdiTmqyrGrC+2jnI5GLCCqFSzYbxy7TT6X2mTqGuixrLqodLfngvBS1VU0EzGthAQ7q2R4zF6HaeaeZC+eC5H9PdqAeGDuGOty5vR0dDA4GEby0oBQUmwNZ3SsFc42FmmbCZC7ENnPNXOacnONEIrVxqRMCfYZcJzp4L0EWAOayCE1O7wX98Isd25qbEWQOtaB2DfPOmOzbqVZ3GNWdLeJnM1u3+YPDxVSnt3yBP9sKdAzjoVDYxTt83qX59OnnIalzhmOxHk6IM0pceUyEbtHjk5AQ8dXGrxoYBVOhW8QC0n9lolKpWJaiDDAUy3oidY3ehq4oilWp9EqPR0AKQN1SBlIHB5lMZjs1oHRNPcDULerLNutKv7Lei18+HlC31pXUQWZzf21tf3M79ULqGlCHOcTRF9aV/sfMOtT/klvHuA2FMBiAkd6ULa16iu48qUul9lxkQTyJDCzoTRkYLVi4QUfGnIGZE3QNGClDdnCk/BewPxksf2K5zegYQtJmJ6XjzLeLjimtxuxfbGSQftq3SwzZ56Q3WjpOofWS+bqa4fTz8bTXcldrfYjml1HlTtcp+9LsM+hYzoL1XFPS65LD9558qeGz6MEDgOUrLf0N/x72Usr/FDqWkxJyIqe3v9foMJ7+1+lXC0qC56T0c6PrmC3INvbh9MOx/q9aTioFhf8wsnR6XzuqNfPOHjKQLm0mpuPGxV7cFHpdLanT4Xnoyk2ki/bISOmHTveglHAOZtFBCfFa9A+8Y3WlS6R/M5I80kWlu1l0nLp8GvqyTKC3E/5OB1o6nvCh05fh9Bu7doybQBBDYXiQm0mZG6SJlC7JDXIsF6ZBEylpt0yRfhpuwp0YxEqsoIHm+WntdwI+/R4KxO+S3ojo/xD69/y+jID+h6/OQkcf/Lm6DvpXuX8rqc5AHz8SutB3gy40dEHTrTVXuuPBCwN973Pw1j4KfLf0XZNw9O1MB1c35aD/OFRXVWM5eFMYvY/qBPTzwU8Rq289vuaIqh8mD7pEpVcOeh90C1xd4dXtveB3Szcgvc/0xkFvBq6uHPSOPfhOdvAKpo+x0EUUXV0I6H3Qwx388+LgwdWrulZ/utAFTzcSuqlEpQueLm/lga3j4Ke49KzOQte4b33QwdVrXDpN9cBvHUyvRHSFV68al85SXRzon+WBrap60IOvYxqzeiWqLll9uaQnPelJT/oK6Ih/VZTX014WK27bXH+WTcnlcrlcLpfLHTcKRsEoGAWjYBQMcQAANMdXEG0K8Y8AAAAASUVORK5CYII="}}]),t}();function HA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var ZA,BA;!function(t){t.On="1",t.Off="0"}(ZA||(ZA={})),function(t){t.Success="success",t.Error="error"}(BA||(BA={}));var UA=function(e){(0,O.Z)(o,e);var i=HA(o);function o(e,a){var r,l,c,u,d,h,p,f,g,m;return(0,s.Z)(this,o),m=i.call(this),(0,I.Z)((0,R.Z)(m),"assets",void 0),(0,I.Z)((0,R.Z)(m),"logModule",void 0),(0,I.Z)((0,R.Z)(m),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(m),"flyoutData",void 0),(0,I.Z)((0,R.Z)(m),"utilities",void 0),(0,I.Z)((0,R.Z)(m),"currentProviderType",void 0),(0,I.Z)((0,R.Z)(m),"strings",void 0),(0,I.Z)((0,R.Z)(m),"cardNumberLast4Digit",void 0),(0,I.Z)((0,R.Z)(m),"cardHolderName",void 0),(0,I.Z)((0,R.Z)(m),"cardExpires",void 0),(0,I.Z)((0,R.Z)(m),"GetModuleName",(function(){return D.GX.VIRTUAL_CARD})),(0,I.Z)((0,R.Z)(m),"ShouldRenderModule",(0,t.Z)(n().mark((function t(){var e,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!1===(null===(e=m.flyoutData.dataStoreModule)||void 0===e||null===(i=e.VirtualCardData)||void 0===i?void 0:i.hasError));case 1:case"end":return t.stop()}}),t)})))),(0,I.Z)((0,R.Z)(m),"populateMainHeader",(function(){})),(0,I.Z)((0,R.Z)(m),"renderModule",(0,t.Z)(n().mark((function t(){var e,i,o,a,r,s,l,c,u,d,h,p,f,g,v,y,C,b,S,x,E,A,T,I,k,w,R;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m.strings=m.GetStringForCurrentProvider(),m.utilities.applyStyles(m.flyoutData.common.shopping,m.assets.getStyles()),m.utilities.applyStyles(m.flyoutData.common.shopping,m.assets.getUxRefreshStyles()),(h=document.createElement("msft-edge-shopping-section")).id="virtual-card-section",h.accordion=!1,null!==(e=m.flyoutData.dataStoreModule.VirtualCardData)&&void 0!==e&&e.isLinking&&(m.flyoutData.dataStoreModule.VirtualCardData.isLinkingSuccess?(g=m.renderMessageBar(m.utilities.replaceValueInKey("virtualCardLinkSuccess",m.flyoutData.strings.virtualCardLinkSuccess,null!==(p=null===(f=m.strings)||void 0===f?void 0:f.payment)&&void 0!==p?p:""),BA.Success),h.appendChild(g)):(C=m.renderMessageBar(m.utilities.replaceValueInKey("virtualCardLinkFail",m.flyoutData.strings.virtualCardLinkFail,null!==(v=null===(y=m.strings)||void 0===y?void 0:y.payment)&&void 0!==v?v:""),BA.Error),h.appendChild(C))),(b=m.utilities.createElement("h2")).classList.add("txtLarge","mainTitle"),b.style.textAlign="center",b.style.fontWeight="500",b.style.marginTop="-20px",b.id="vitual-card-title",b.textContent=null!==(i=null===(o=m.strings)||void 0===o?void 0:o.title)&&void 0!==i?i:"",h.appendChild(b),(S=document.createElement("p")).classList.add("txtMedium","description"),S.id="vitual-card-description",S.textContent=null!==(a=m.flyoutData.dataStoreModule.VirtualCardData)&&void 0!==a&&a.isAutofillSuccess?null!==(r=null===(s=m.strings)||void 0===s?void 0:s.autofillSuccess)&&void 0!==r?r:"":null!==(l=null===(c=m.strings)||void 0===c?void 0:c.autofillFailed)&&void 0!==l?l:"",h.appendChild(S),x=m.renderVisualizedCard(),h.appendChild(x),(E=document.createElement("div")).classList.add("card-info"),A=m.renderCardInfoCard(),null!==(u=m.flyoutData.dataStoreModule.VirtualCardData)&&void 0!==u&&u.billingInfo?(I=m.cardHolderName?m.flyoutData.strings.virtualCardBillingInfoHeader:m.flyoutData.strings.virtualCardBillingAddressHeader,k=m.renderBillingInfoCard({contentText:null===(T=m.flyoutData.dataStoreModule.VirtualCardData)||void 0===T?void 0:T.billingInfo,headerText:"".concat(I," "),id:"billing-info"}),E.appendChild(k)):null!==(d=m.flyoutData.dataStoreModule.VirtualCardData)&&void 0!==d&&d.cardHolderName&&(R=m.renderBillingInfoCard({contentText:null===(w=m.flyoutData.dataStoreModule.VirtualCardData)||void 0===w?void 0:w.cardHolderName,headerText:"".concat(m.flyoutData.strings.virtualCardCardHolderNameHeader," "),id:"billing-info"}),E.appendChild(R)),E.appendChild(A),h.appendChild(E),t.abrupt("return",m.CreateModule(h,D.H7.VIRTUAL_CARD,D.GX.VIRTUAL_CARD,D.$k.HOME));case 29:case"end":return t.stop()}}),t)})))),(0,I.Z)((0,R.Z)(m),"GetStringForCurrentProvider",(function(){var t;switch(m.currentProviderType){case D.M$.ZIP:return{autofillFailed:m.flyoutData.strings.zipPayVirtualCardHeaderAutofillFailedDescription,autofillSuccess:m.flyoutData.strings.zipPayVirtualCardHeaderDescription,cardDetails:m.utilities.replaceValueInKey("VirtualCardDetails",m.flyoutData.strings.zipPayVisualizedCardDetails,m.cardNumberLast4Digit,m.cardHolderName,m.cardExpires),cardUrl:m.flyoutData.strings.zipPayVirtualCardURL,payment:m.flyoutData.strings.zipPayPayment,title:m.flyoutData.strings.zipPayVirtualCardHeaderTitle};case D.M$.AFFIRM:return{autofillFailed:m.flyoutData.strings.affirmVirtualCardHeaderAutofillFailedDescription,autofillSuccess:null!==(t=m.flyoutData.dataStoreModule.VirtualCardData)&&void 0!==t&&t.billingInfo?m.flyoutData.strings.affirmVirtualCardHeaderDescription:m.flyoutData.strings.affirmVirtualCardHeaderNoBillingInfoDescription,cardDetails:m.utilities.replaceValueInKey("VirtualCardDetails",m.flyoutData.strings.affirmVisualizedCardDetails,m.cardNumberLast4Digit,m.cardExpires),cardUrl:m.flyoutData.strings.affirmVirtualCardURL,payment:m.flyoutData.strings.affirmPayment,title:m.flyoutData.strings.affirmVirtualCardHeaderTitle}}return null})),(0,I.Z)((0,R.Z)(m),"applyStyle",(function(t,e){Object.keys(e).forEach((function(i){t.style[i]=e[i]}))})),(0,I.Z)((0,R.Z)(m),"renderMessageBar",(function(t,e){var i=document.createElement("div");m.applyStyle(i,{boxSizing:"border-box",display:"flex",marginBottom:"8px"});var n=document.createElement("div");n.classList.add("message-bar",e),n.setAttribute("role","group"),n.setAttribute("aria-label",t);var o=document.createElement("span");o.setAttribute("aria-hidden","true"),o.classList.add("icon");var a=e===BA.Success?m.assets.getSuccessIcon():m.assets.getErrorIcon();o.innerHTML=a,n.appendChild(o);var r=document.createElement("div");r.classList.add("content"),r.textContent=t,n.appendChild(r);var s=document.createElement("fluent-button");return s.classList.add("cancel"),s.appearance="lightweight",s.style.color="#000",s.ariaLabel=m.flyoutData.strings.dismissMessageAriaLabel,s.innerHTML=m.assets.getCancelButton(),s.addEventListener("click",(function(){n.remove(),m.resizeFlyout()})),n.appendChild(s),i.appendChild(n),i})),(0,I.Z)((0,R.Z)(m),"appendZipCardInformation",(function(t){var e=document.createElement("span");m.applyStyle(e,{color:"#FFF",fontFamily:"monospace",fontSize:"18px",left:"164px",position:"absolute",top:"70px",userSelect:"none"}),e.textContent=m.cardNumberLast4Digit;var i=document.createElement("span");i.textContent=m.flyoutData.strings.visualizedCardHolderHeader,i.classList.add("card-title"),m.applyStyle(i,{left:"24px",top:"114px"}),t.appendChild(i);var n=document.createElement("span");n.textContent=m.flyoutData.strings.visualizedCardExpiresHeader,n.classList.add("card-title"),m.applyStyle(n,{left:"124px",top:"114px"}),t.appendChild(n);var o=document.createElement("span");o.textContent=m.cardHolderName,o.classList.add("card-text"),m.applyStyle(o,{left:"24px",top:"130px"}),t.appendChild(o);var a=document.createElement("span");a.textContent=m.cardExpires,a.classList.add("card-text"),m.applyStyle(a,{left:"124px",top:"130px"}),t.appendChild(a),t.appendChild(e)})),(0,I.Z)((0,R.Z)(m),"appendAffirmCardInformation",(function(t){var e=document.createElement("span");m.applyStyle(e,{color:"#FFF",fontFamily:"monospace",fontSize:"18px",left:"80px",position:"absolute",top:"96px",userSelect:"none"}),e.textContent=m.cardNumberLast4Digit;var i=document.createElement("span");i.textContent="Exp. ".concat(m.cardExpires),i.classList.add("card-title"),m.applyStyle(i,{color:"white",fontSize:"16px",left:"24px",opacity:"1",top:"127px"}),t.appendChild(i),t.appendChild(e)})),(0,I.Z)((0,R.Z)(m),"renderVisualizedCard",(function(){var t,e,i=document.createElement("div");switch(i.id="visualized-card",i.setAttribute("aria-label",null!==(t=null===(e=m.strings)||void 0===e?void 0:e.cardDetails)&&void 0!==t?t:""),i.setAttribute("role","img"),m.applyStyle(i,{backgroundImage:'url("data:image/svg+xml;utf8,'.concat(encodeURIComponent(m.GetBackgroundForCurrentProvider()),'")'),backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"170px",margin:"0 auto",position:"relative",width:"280px"}),m.currentProviderType){case D.M$.ZIP:m.appendZipCardInformation(i);break;case D.M$.AFFIRM:m.appendAffirmCardInformation(i)}return i})),(0,I.Z)((0,R.Z)(m),"renderCardContent",(function(e){var i,o=e.headerText,a=e.contentText,r=e.id,s=e.sensitive,l=document.createElement("h3");l.classList.add("card-header"),l.textContent=o;var c="".concat(r,"-show-hide-content"),u=document.createElement("div");u.classList.add("card-content");var d=document.createElement("span");d.classList.add("content-text"),d.textContent=null!==(i=s?null==a?void 0:a.replace(/./g,"•"):a)&&void 0!==i?i:"",d.id=c,d.dataset.content=a,u.append(d);var h=document.createElement("div");if(h.setAttribute("role","group"),h.setAttribute("aria-label",m.flyoutData.strings.virtualCardDetailsActions),h.classList.add("content-controls"),s){d.setAttribute("aria-hidden","true");var p=document.createElement("fluent-button");p.id="".concat(r,"-show-hide-toggle"),p.style.width="16px",p.style.minWidth="16px",p.style.height="16px",p.style.fill="currentcolor",p.title=m.flyoutData.strings.showContentToggleTooltip,p.dataset.isShowing=ZA.Off,p.ariaLabel=m.flyoutData.strings.showContentToggleTooltip,p.innerHTML=m.assets.getShowIcon(),p.addEventListener("click",(function(t){var e,i=t.currentTarget,n=(null==i||null===(e=i.dataset)||void 0===e?void 0:e.isShowing)===ZA.On,o=document.querySelector("#".concat(c));if(i){var a,r,s,l,u;if(n){if(i.dataset.isShowing=ZA.Off,i.innerHTML=m.assets.getShowIcon(),i.title=m.flyoutData.strings.showContentToggleTooltip,i.ariaLabel=m.flyoutData.strings.showContentToggleTooltip,o)o.setAttribute("aria-hidden","true"),o.textContent=null!==(a=null===(r=o.dataset)||void 0===r||null===(s=r.content)||void 0===s?void 0:s.replace(/./g,"•"))&&void 0!==a?a:""}else if(i.dataset.isShowing=ZA.On,i.innerHTML=m.assets.getHideIcon(),i.title=m.flyoutData.strings.hideContentToggleTooltip,i.ariaLabel=m.flyoutData.strings.hideContentToggleTooltip,o)o.setAttribute("aria-hidden","false"),o.textContent=null!==(l=null===(u=o.dataset)||void 0===u?void 0:u.content)&&void 0!==l?l:"";i.focus()}})),h.appendChild(p)}var f=document.createElement("span");f.id="indicator-".concat(r),f.setAttribute("aria-live","assertive"),f.setAttribute("aria-relevant","all"),f.setAttribute("aria-atomic","true"),f.style.position="absolute",f.style.left="-999em",f.textContent=m.flyoutData.strings.couponCopied;var g=document.createElement("fluent-button");g.id="".concat(r,"-copy-button"),g.style.width="16px",g.style.minWidth="16px",g.style.height="16px",g.style.fill="currentcolor";var v="".concat(m.flyoutData.strings.copyButtonTooltip," ").concat(o);return g.title=v,g.ariaLabel=v,g.innerHTML=m.assets.getCopyIcon(),g.addEventListener("click",(0,t.Z)(n().mark((function t(){var e,i,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u.appendChild(f),setTimeout((function(){f.remove()}),3e3),null!=(i=document.querySelector("#".concat(c)))&&null!==(e=i.dataset)&&void 0!==e&&e.content&&((o=document.createElement("textarea")).value=i.dataset.content,document.body.appendChild(o),o.focus(),o.select(),document.execCommand("copy"),document.body.removeChild(o)),g.focus();case 5:case"end":return t.stop()}}),t)})))),h.appendChild(g),u.append(h),[l,u]})),(0,I.Z)((0,R.Z)(m),"renderBillingInfoCard",(function(t){var e=document.createElement("div");e.setAttribute("aria-label",t.headerText),e.classList.add("virtual-card-info-card","virtual-card-info-single-column");var i=la(m.renderCardContent(t),2),n=i[0],o=i[1];return e.appendChild(n),e.append(o),e})),(0,I.Z)((0,R.Z)(m),"GetBackgroundForCurrentProvider",(function(){switch(m.currentProviderType){case D.M$.ZIP:return m.assets.getZipCardBackground();case D.M$.AFFIRM:return m.assets.getAffirmCardBackground();default:return null}})),(0,I.Z)((0,R.Z)(m),"renderCardInfoCard",(function(){var t,e,i,n=document.createElement("div");n.classList.add("virtual-card-info-card");var o=document.createElement("div");m.applyStyle(o,{display:"flex",flexDirection:"column",rowGap:"8px"});var a={contentText:null===(t=m.flyoutData.dataStoreModule.VirtualCardData)||void 0===t?void 0:t.cardNumber,headerText:m.flyoutData.strings.virtualCardNumberHeader,id:"card-number",sensitive:!0},r=document.createElement("div");r.setAttribute("aria-label",a.headerText);var s=la(m.renderCardContent(a),2),l=s[0],c=s[1];r.appendChild(l),r.appendChild(c),o.appendChild(r),m.applyStyle(r,{flex:"1"});var u=[{contentText:null===(e=m.flyoutData.dataStoreModule.VirtualCardData)||void 0===e?void 0:e.expires,headerText:m.flyoutData.strings.virtualCardExpirationHeader,id:"card-expiration"},{contentText:null===(i=m.flyoutData.dataStoreModule.VirtualCardData)||void 0===i?void 0:i.cardCVC,headerText:m.flyoutData.strings.virtualCardCVCHeader,id:"card-cvc",sensitive:!0}],d=document.createElement("div");return u.forEach((function(t){var e=la(m.renderCardContent(t),2),i=e[0],n=e[1],o=document.createElement("div");o.setAttribute("aria-label",t.headerText),o.appendChild(i),o.appendChild(n),d.append(o)})),o.appendChild(d),m.applyStyle(d,{display:"flex",gap:"24px"}),n.appendChild(o),n})),m.logModule=a.logModule,m.pageHandlerModule=a.pageHandlerModule,m.flyoutData=e,m.utilities=a.viewModulesUtilities,m.assets=new FA,m.currentProviderType=(null===(r=m.flyoutData.dataStoreModule)||void 0===r||null===(l=r.VirtualCardData)||void 0===l?void 0:l.cardProvider)||D.M$.ZIP,m.cardNumberLast4Digit=null!==(c=null===(u=m.flyoutData.dataStoreModule.VirtualCardData)||void 0===u||null===(d=u.cardNumber)||void 0===d?void 0:d.slice(-4))&&void 0!==c?c:"",m.cardHolderName=null!==(h=null===(p=m.flyoutData.dataStoreModule.VirtualCardData)||void 0===p?void 0:p.cardHolderName)&&void 0!==h?h:"",m.cardExpires=null!==(f=null===(g=m.flyoutData.dataStoreModule.VirtualCardData)||void 0===g?void 0:g.expires)&&void 0!==f?f:"",m}return(0,l.Z)(o,[{key:"resizeFlyout",value:function(){if(this.flyoutData.dataLoader.IsServerData()){var t=document.querySelector("#divContentWrapper");Tt.SO.queueUpdate((function(){parent.postMessage({height:t.offsetHeight,type:"resize_iframe"},"edge://shopping")}))}}}]),o}(jf.Z),GA=UA;function VA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var $A=function(t){(0,O.Z)(i,t);var e=VA(i);function i(t,n,o){var a;return(0,s.Z)(this,i),a=e.call(this,n,o),(0,I.Z)((0,R.Z)(a),"stateManagement",void 0),(0,I.Z)((0,R.Z)(a),"ShouldRenderNotification",(function(){var t;return Promise.resolve(!0===(null===(t=a.flyoutData.dataStoreModule.VirtualCardData)||void 0===t?void 0:t.hasError))})),(0,I.Z)((0,R.Z)(a),"GetNotificationName",(function(){return D.sM.VIRTUAL_CARD})),a.flyoutData=n,a.utilities=o.viewModulesUtilities,a.logModule=o.logModule,a.pageHandlerModule=o.pageHandlerModule,a.stateManagement=t,a}return(0,l.Z)(i,[{key:"RenderNotification",value:function(t){var e,i,n,o,a=this;this.strings=this.GetStringForCurrentProvider(),this.utilities.applyStyles(t,this.assets.getNotificationStyles());var r=document.createElement("div");r.id="virtual-card-notification",this.applyStyle(r,{textAlign:"center"});var s=document.createElement("div");r.classList.add("virtual-card-notification-ux-refresh"),this.applyStyle(s,{backgroundImage:'url("data:image/png;base64,'.concat(this.assets.getErrorImageUXRefresh(),'")'),backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"90px",margin:"0 auto",position:"relative",width:"90px"}),r.appendChild(s);var l=document.createElement("h2");l.textContent=this.flyoutData.strings.virtualCardSystemFailureHeader,l.classList.add("txtLarge"),r.appendChild(l);var c=document.createElement("div");c.classList.add("description"),c.textContent=this.utilities.replaceValueInKey("virtualCardSystemFailureDescription",this.flyoutData.strings.virtualCardSystemFailureDescription,null!==(e=null===(i=this.strings)||void 0===i?void 0:i.payment)&&void 0!==e?e:""),r.appendChild(c);var u=document.createElement("fluent-button");u.classList.add("detail-button"),u.textContent=this.utilities.replaceValueInKey("virtualCardSystemFailurebutton",this.flyoutData.strings.virtualCardSystemFailureLink,null!==(n=null===(o=this.strings)||void 0===o?void 0:o.payment)&&void 0!==n?n:""),u.addEventListener("click",(function(){var t,e;a.pageHandlerModule.NavigateToUrl(null!==(t=null===(e=a.strings)||void 0===e?void 0:e.cardUrl)&&void 0!==t?t:"")})),Tt.SO.queueUpdate((function(){var t,e;null===(t=u.shadowRoot)||void 0===t||null===(e=t.querySelector(".control"))||void 0===e||e.setAttribute("style","\n                width: 100%;\n                height: 100%;\n                border: none;\n                font-size: 16px;\n            ")})),r.appendChild(u),t.appendChild(r);var d=this.CreateModule(r,0,this.GetModuleName(),D.$k.CONTEXTUAL);return Promise.resolve(d)}}]),i}(GA),WA=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n        #divContentWrapper {\n            width: 375px!important;\n        }\n        ::part(tablist) {\n            place-self: center;\n        }\n        ::part(header-fixed) {\n            display: none;\n        }\n        ::part(actions) {\n            display: flex;\n            justify-content: center;\n        }\n        .actionsButtonRefresh {\n            min-width: 280px;\n        }\n        msft-edge-shopping {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            max-height: unset!important;\n            height: calc(100vh - 88px)!important;\n        }\n        #contextualShopping {\n            height: calc(100vh - 148px)!important;\n        }\n        msft-edge-shopping::part(header) {\n            padding: 10px;\n            text-align: left;\n        }\n        #homeShopping::part(header) {\n            margin: 0px!important;\n        }\n        msft-edge-shopping-section {\n            width: 100%;\n        }\n        fluent-tab-panel {\n            padding: 0px;\n        }\n        fluent-design-system-provider {\n            width: 375px!important;\n        }\n        fluent-tabs {\n            -webkit-user-select: none;\n            -webkit-touch-callout: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            background-color: #F8F8F8;\n        }\n        fluent-tab {\n            padding: 0 calc((15 + (var(--design-unit) * 2 * var(--density))) * 1px);\n        }\n        msft-edge-shopping::part(content) {\n            height: 100%;\n            background-color: #F8F8F8;\n        }\n        #feedbackDiv {\n            background-color: #F8F8F8!important;\n            position: fixed!important;\n            width: 100%;\n        }\n        ::activeIndicator {\n            display: none;\n        }\n        .tabIconActive path {\n            fill: #417AFF;\n        }\n        .tabSeparator {\n            width: 100%;\n            justify-content: flex-end;\n            border: 1px solid #F1F1F1;\n            margin-bottom: 0px;\n            margin-top: 0px;\n            border-bottom: unset;\n            left: 0px;\n            right: 0px;\n        }\n        .sectionSeparator {\n            width: 375px!important;\n        }\n        #divMainHeader {\n            height: 56px;\n            display: grid;\n            grid-template-columns: 42px auto auto;\n            align-items: center;\n            border-bottom: 1px solid #DDDDDD;\n            align-content: center;\n        }\n        #divActions {\n            display: flex;\n            flex-direction: row;\n            justify-content: flex-end;\n            align-items: center;\n        }\n        .bigBlock {\n            width: 100%;\n            height: 136px;\n            border-radius: 8px;\n            background-color: var(--fill-color);\n        }\n        .smallBlock {\n            width: 120px;\n            height: 24px;\n            border-radius: 4px;\n            background-color: var(--fill-color);\n        }\n        .shimmerBlock {\n            display: inline-block;\n            -webkit-mask: linear-gradient(-90deg,#000 30%,#0005,#000 70%) right/300% 100%;\n            background-repeat: no-repeat;\n            animation: shimmerBlock 2.5s infinite;\n        }\n        @keyframes shimmerBlock {\n            100% {-webkit-mask-position:left}\n        }\n        @media (prefers-color-scheme: dark) {\n            msft-edge-shopping::part(content) {\n                background-color: unset!important;\n            }\n            #feedbackDiv {\n                background-color: unset!important;\n            }\n            msft-edge-shopping::part(header) {\n                background-color: unset!important;\n            }\n            #divMainHeader {\n                border-bottom: 1px solid #DDDDDD4a;\n            }\n            fluent-tabs, msft-edge-shopping::part(content) {\n                background-color: #3B3B3B;\n            }\n            .bigBlock {\n                background-color: #424242;\n            }\n            .smallBlock {\n                background-color: #424242;\n            }\n            ::part(activeIndicator) {\n                background-color: #63ADE5;\n            }\n        }\n    }"}},{key:"getSectionStyles",value:function(){return"\n        .regionBlock {\n            margin: 10px;\n            background-color: var(--fill-color);\n            border: 1px solid rgba(0, 0, 0, 0.08);\n            box-sizing: border-box;\n            border-radius: 8px;\n        }\n        .blockPadding {\n            padding: 10px!important;\n        }\n        @media (prefers-color-scheme: dark) {\n            .regionBlock {\n                background-color: #424242;\n                border: 1px solid rgba(255, 255, 255, 0.08);\n            }\n        }"}}]),t}();function zA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var KA,YA,jA,XA,qA,JA,QA,tT=function(t){(0,O.Z)(i,t);var e=zA(i);function i(t,n,o,a,r,l,c){var u;(0,s.Z)(this,i),u=e.call(this,t,n,o,a,r,l,c),(0,I.Z)((0,R.Z)(u),"tabs",void 0),(0,I.Z)((0,R.Z)(u),"assets",new WA),(0,I.Z)((0,R.Z)(u),"panelHomeId","panelHome"),(0,I.Z)((0,R.Z)(u),"tabHomeId","tabHome"),(0,I.Z)((0,R.Z)(u),"panelContextualId","panelContextual"),(0,I.Z)((0,R.Z)(u),"tabContextualId","tabContextual"),(0,I.Z)((0,R.Z)(u),"contextualShopping","contextualShopping"),(0,I.Z)((0,R.Z)(u),"homeShopping","homeShopping"),(0,I.Z)((0,R.Z)(u),"domainEligible",!1);var d=document.querySelector("fluent-design-system-provider");return d&&d.removeAttribute("role"),u}return(0,l.Z)(i,[{key:"renderModules",value:function(t,e,i){var n=this,r=performance.now();this.stateManagement.addEventListener(Ia.e1.onDataUpdate,(function(t){t&&t.detail&&t.detail.moduleType&&(n.utilities.styleElementsUXRefresh(t.detail.moduleType),n.styleModulesInPane(t.detail.moduleType))})),this.stateManagement.addEventListener(Ia.e1.domainEligibility,(function(t){t&&t.detail&&(t.detail.domainEligibility?(n.domainEligible=!0,n.switchTabs(!0)):(n.domainEligible=!1,n.switchTabs(!1)))})),this.stateManagement.addEventListener(Ia.e1.flyoutRefresh,(function(){var t=document.querySelector("#divActions");t&&n.createActionButtons(t,i)})),this.stateManagement.addEventListener(Ia.e1.PWILODeleted,(function(t){if(t&&t.detail&&void 0!==t.detail.index&&n.utilities.isKeyboardClick(t.detail.event)){var e=i.querySelector("#".concat(D.z6.CLOSE));e&&e.focus()}})),this.stateManagement.addEventListener(Ia.e1.PWILOEmpty,(function(){var e,i=null===(e=t.filter((function(t){return t.paneTab===D.$k.HOME})))||void 0===e?void 0:e.sort((function(t,e){return t.priority-e.priority}));if(1===i.length&&i[0].name===D.GX.PRODUCTHISTORY){var o=document.querySelector("#".concat(n.homeShopping));o&&o.remove();var a=n.tabs.querySelector("#".concat(n.tabHomeId));a&&n.manageTabControls(a,!1,null),n.domainEligible?n.switchTabs(!0):n.switchTabs(!1)}}));var s=[];this.stateManagement.addEventListener(Ia.e1.PDPRemoved,(function(e){if(e&&e.detail&&e.detail.moduleName){var i;s.push(e.detail.moduleName);var o=null===(i=t.filter((function(t){return t.paneTab===D.$k.CONTEXTUAL&&-1===s.findIndex((function(e){return e===t.name}))&&t.name!==D.GX.FEEDBACK&&t.name!==D.GX.EMPTYCOUPON})))||void 0===i?void 0:i.sort((function(t,e){return t.priority-e.priority}));if(!o||o&&0===o.length){var a=document.querySelector("#".concat(n.panelContextualId));n.createNullState(a),yt("isPDP","false");var r=document.querySelector("#".concat(n.tabHomeId)),l=document.querySelector("#".concat(n.panelHomeId));r&&l&&(n.manageTabControls(r,!0,l),n.setActiveTabId(n.tabHomeId),n.switchIndicator(1))}}}));var l=document.querySelector("fluent-tabs");l?this.tabs=l:(this.tabs=this.utilities.createElement("fluent-tabs"),this.tabs.setAttribute("orientation","horizontal")),this.renderHomeModules(t),this.renderContextualModules(t,e),Tt.SO.queueUpdate((function(){var e,i,o,a=n.tabs.getAttribute("activeid");a===n.tabContextualId?(i=D.$k.CONTEXTUAL,o=n.flyoutData.common.shopping):a===n.tabHomeId&&(i=D.$k.HOME,o=n.flyoutData.common.shoppingPersistent);var r=null===(e=t.filter((function(t){return t.paneTab===i})))||void 0===e?void 0:e.sort((function(t,e){return t.priority-e.priority}));n.utilities.handleFlyoutFocus(r,o)}));var c=performance.now(),u=new o.Z(a.xu.PerfAddModulesToTabs);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"".concat(c-r),u)}},{key:"appendContentToFlyout",value:function(t){var e=this;if(t){if(this.utilities.applyStyles(t,this.commonAssets.getStyles()),this.utilities.applyStyles(t,this.assets.getStyles()),!document.querySelector("#divMainHeader")){var i=this.createMainShoppingHeader(t);t.appendChild(i)}t.appendChild(this.tabs),Tt.SO.queueUpdate((function(){var t,i=null===(t=e.tabs.shadowRoot)||void 0===t?void 0:t.querySelector(".tablist");i&&(i.title=e.flyoutData.strings.commonFixedTitle)}))}}},{key:"switchTabs",value:function(t){var e=this.tabs.querySelector("#".concat(this.tabContextualId)),i=this.tabs.querySelector("#".concat(this.tabHomeId)),n=document.querySelector("#".concat(this.panelContextualId));if(t)e&&(this.setActiveTabId(this.tabContextualId),this.switchIndicator(2),n&&(this.manageTabControls(e,!0,n),this.createLoadingState(n)));else{var o=document.querySelector("#".concat(this.homeShopping));i&&o?(this.setActiveTabId(this.tabHomeId),this.switchIndicator(1),this.manageTabControls(i,!0,null),e&&this.manageTabControls(e,!1,n)):e&&n&&(this.setActiveTabId(this.tabContextualId),this.switchIndicator(2),this.manageTabControls(e,!0,n),this.manageTabControls(i,!1,null),this.createNullState(n))}}},{key:"switchIndicator",value:function(t){var e,i=null===(e=this.tabs.shadowRoot)||void 0===e?void 0:e.querySelector(".activeIndicator");i&&i.style.gridColumn!=="".concat(t)&&(i.style.transform="translateX(0px)",i.style.gridColumn="".concat(t))}},{key:"createMainShoppingHeader",value:function(t){var e=this.utilities.createElement("DIV");e.id="divMainHeader";var i=this.utilities.createElement("h1");i.className="txtMedium",i.style.fontWeight="500",i.style.fontSize="14px",i.textContent=this.flyoutData.strings.commonFixedTitle;var n=this.utilities.createElement("DIV");return n.id="divActions",this.createActionButtons(n,t),e.appendChild(i),e.appendChild(n),e}},{key:"createActionButtons",value:function(t,e){new Hf(this.flyoutData,this.utilities,this.pageHandlerModule,this.logModule,this.stateManagement).createFlyoutButtons(t,!0,e)}},{key:"renderContextualModules",value:function(t,e){var i,n,o=this,a=null===(i=t.filter((function(t){return t.paneTab===D.$k.CONTEXTUAL})))||void 0===i?void 0:i.sort((function(t,e){return t.priority-e.priority})),r=this.tabs.querySelector("#".concat(this.tabContextualId));if(r)n=r;else{(n=this.utilities.createElement("fluent-tab")).id=this.tabContextualId,n.style.display="flex",n.style.flexDirection="column";var s=this.utilities.createElement("P");s.className="txtSmall",s.style.color="inherit",s.textContent=this.flyoutData.strings.paneForYou,n.appendChild(s),this.tabs.appendChild(n)}if(new MutationObserver((function(){o.handleStyleTabSwitch(n)})).observe(n,{attributeFilter:["aria-selected"],attributes:!0}),document.querySelector("#".concat(this.contextualShopping))||(this.renderModulesInTab(a,this.flyoutData.common.shopping,this.panelContextualId,e),this.flyoutData.common.shopping.id=this.contextualShopping,this.flyoutData.common.shopping.fixedTitle=this.flyoutData.strings.commonContextualTab),a&&a.length>0&&a[0].name!==D.GX.EMPTYCOUPON&&a[0].name!==D.GX.FEEDBACK){this.setActiveTabId(this.tabContextualId),this.switchIndicator(2);var l=document.querySelector("#".concat(this.panelContextualId));this.manageTabControls(n,!0,l)}else n&&Tt.SO.queueUpdate((function(){var t=document.querySelector("#".concat(o.homeShopping)),e=document.querySelector("#".concat(o.panelContextualId));if(t){var i=document.querySelector("#".concat(o.tabHomeId)),a=document.querySelector("#".concat(o.panelHomeId));i&&a&&(o.manageTabControls(i,!0,a),o.setActiveTabId(o.tabHomeId),o.switchIndicator(1),o.createNullState(e))}else e&&(o.manageTabControls(n,!0,e),o.setActiveTabId(o.tabContextualId),o.switchIndicator(2),o.createNullState(e))}))}},{key:"setActiveTabId",value:function(t){this.tabs.getAttribute("activeid")!==t&&this.tabs.setAttribute("activeid",t)}},{key:"manageTabControls",value:function(t,e,i){if(e){if(i){var n=i.querySelector(".paneNullWrapper");n&&n.remove()}t.style.pointerEvents="unset",t.setAttribute("aria-disabled","false"),t.focus()}else i?this.createNullState(i):(t.style.pointerEvents="none",t.setAttribute("aria-disabled","true"))}},{key:"renderHomeModules",value:function(t){var e,i,n=this,o=null===(e=t.filter((function(t){return t.paneTab===D.$k.HOME})))||void 0===e?void 0:e.sort((function(t,e){return t.priority-e.priority})),a=this.tabs.querySelector("#".concat(this.tabHomeId));if(a)i=a;else{(i=this.utilities.createElement("fluent-tab")).id=this.tabHomeId;var r=this.utilities.createElement("P");r.className="txtSmall",r.style.color="inherit",r.textContent=this.flyoutData.strings.paneHome,i.appendChild(r),this.tabs.appendChild(i)}new MutationObserver((function(){n.handleStyleTabSwitch(i)})).observe(i,{attributeFilter:["aria-selected"],attributes:!0}),document.querySelector("#".concat(this.homeShopping))||(this.renderModulesInTab(o,this.flyoutData.common.shoppingPersistent,this.panelHomeId,!1),this.flyoutData.common.shoppingPersistent.id=this.homeShopping,this.flyoutData.common.shoppingPersistent.fixedTitle=this.flyoutData.strings.commonHomeTab,o&&o.length>0?this.manageTabControls(i,!0,null):this.manageTabControls(i,!1,null))}},{key:"renderModulesInTab",value:function(t,e,i,n){var r,s=this,l=document.querySelector("#".concat(i));l?r=l:(r=this.utilities.createElement("fluent-tab-panel")).id=i;var c=e;if(t&&t.length>0&&t[0].name!==D.GX.EMPTYCOUPON&&t[0].name!==D.GX.FEEDBACK){for(var u=function(e){var i=t[e];i.element.expanded=!0,e>0&&s.utilities.addSectionSeparator(c),c.appendChild(i.element),Tt.SO.queueUpdate((function(){s.utilities.styleModules(i,e)}));try{i.moduleInterface.PostProcessing(i.name,e,i.element),Tt.SO.queueUpdate((function(){s.utilities.sendCTRLog(i,e,s.stateManagement.getState(Ia.IY.isAutoApplyVisible),s.stateManagement.getState(Ia.IY.topModuleName),s.GetImpressionType(i.name)),s.utilities.styleElementsUXRefresh(i),s.styleModulesInPane(i,e)}))}catch(t){var n=new o.Z(a.xu.OnErrorInvoked);s.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"Error while Post processing Module: ".concat(i.name," ").concat(Ma.getErrorString(t)),n,s.GetImpressionType(i.name))}},d=0;d<t.length;d++)u(d);this.setTitle(t[0]);var h=r.querySelector(".paneLoadingWrapper");h&&h.remove();var p=r.querySelector(".paneNullWrapper");p&&p.remove(),r.appendChild(c),Tt.SO.queueUpdate((function(){var e,i,n,o=null!==(e=t[0].name===D.GX.COUPON&&s.flyoutData.common.isCheckoutPage&&(null===(i=s.flyoutData.dataStoreModule.CouponData)||void 0===i?void 0:i.IsAutoApplyAvailable))&&void 0!==e&&e,a=null!==(n="msft-edge-shopping-section"!==t[0].element.nodeName.toLocaleLowerCase()&&!t[0].element.classList.contains("regionBlock"))&&void 0!==n&&n;if(o||a){var r,l=null===(r=c.shadowRoot)||void 0===r?void 0:r.querySelector(".header");l&&(l.className+=" regionBlock",s.utilities.applyStyles(l,s.assets.getSectionStyles()))}}))}l||this.tabs.appendChild(r),Tt.SO.queueUpdate((function(){var t,e=null===(t=c.shadowRoot)||void 0===t?void 0:t.querySelector(".content");e&&e.scrollTo(0,0),setTimeout((function(){e&&e.scrollTo(0,0)}),200)}))}},{key:"handleStyleTabSwitch",value:function(t){"true"===t.getAttribute("aria-selected")?(t.style.fontWeight="500",t.id===this.tabContextualId?this.switchIndicator(2):t.id===this.tabHomeId&&this.switchIndicator(1)):t.style.fontWeight="normal"}},{key:"styleModulesInPane",value:function(t,e){var i;if(t.name!==D.GX.COUPON&&t.name!==D.GX.GROCERY_COUPON&&t.name!==D.GX.PRINTABLE_COUPON&&t.name!==D.GX.RECOMMENDATIONS&&t.name!==D.GX.TOP_RETAILERS&&t.name!==D.GX.PRODUCTHISTORY){var n,o=null===(n=t.element.shadowRoot)||void 0===n?void 0:n.querySelector("fluent-accordion-item");if(o){var a=o.shadowRoot;if(a){var r=a.querySelector(".region");if(r){if(r.className+=" regionBlock",t.name===D.GX.CASHBACK){var s=t.element.querySelector("#previousCashBackSection");if(s){var l=t.element.querySelector("#divCashBackPopup");l&&(l.style.marginTop="10px"),s.style.marginLeft="0px",s.style.marginRight="0px";var c=s.querySelector("button");c&&(c.style.marginBottom="0px",c.style.borderRadius="0px",c.style.border="0px")}else r.className+=" blockPadding"}else r.className+=" blockPadding";0===e&&(r.style.margin="0px"),this.utilities.applyStyles(r,this.assets.getSectionStyles())}}if(0!==e){var u,d=null===(u=t.element.querySelector("msft-product-card"))||void 0===u?void 0:u.shadowRoot;if(d){var h=d.querySelector(".aProductCardWrapper");h&&(h.style.borderTop="unset")}}}}var p=null===(i=t.element.shadowRoot)||void 0===i?void 0:i.querySelector("[slot=heading]");p&&(p.style.fontSize="16px",p.style.lineHeight="24px",p.style.fontWeight="500")}},{key:"createLoadingState",value:function(t){var e=this;if(!t.querySelector(".paneLoadingWrapper")){var i=t.querySelector(".paneNullWrapper");i&&i.remove();var n=this.utilities.createElement("DIV",{style:"padding: 20px; display: flex; flex-direction: column; row-gap: 8px;"});n.className="paneLoadingWrapper";var r=this.utilities.createElement("DIV");r.className="smallBlock shimmerBlock";var s=this.utilities.createElement("DIV");s.className="bigBlock shimmerBlock",n.appendChild(r),n.appendChild(s),n.appendChild(s.cloneNode(!1)),n.appendChild(s.cloneNode(!1)),n.appendChild(r.cloneNode(!1)),n.appendChild(s.cloneNode(!1)),n.appendChild(s.cloneNode(!1)),n.appendChild(s.cloneNode(!1)),t.appendChild(n),setTimeout((function(){Tt.SO.queueUpdate((function(){if(document.querySelector(".paneLoadingWrapper")){var i,n=new o.Z(a.xu.ErrorPaneStuckLoadingState);e.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"".concat(e.domainEligible),n);var r=document.querySelector("#".concat(e.panelHomeId)),s=document.querySelector("#".concat(e.tabHomeId));r&&(null===(i=r.children)||void 0===i?void 0:i.length)>0&&s&&(e.setActiveTabId(e.tabHomeId),e.manageTabControls(s,!0,r),e.switchIndicator(1)),e.createNullState(t)}}))}),15e3)}}},{key:"createNullState",value:function(t){if(!(null==t?void 0:t.querySelector(".paneNullWrapper"))&&t){for(;t&&t.lastChild;)t.lastChild.remove();var e=this.utilities.createElement("DIV");e.className="paneNullWrapper",e.style.display="flex",e.style.flexDirection="column",e.style.justifyContent="center",e.style.alignItems="center",e.style.textAlign="center",e.style.padding="45px",e.style.rowGap="20px";var i=this.utilities.createElement("IMG");i.src=this.flyoutData.common.resourcesEndpoint+"pane/nullState.png",i.style.width="70px",i.style.height="auto",i.setAttribute("aria-hidden","true");var n=this.utilities.createElement("H2");n.className="txtLarge",n.style.fontSize="20px",n.textContent=this.flyoutData.strings.paneNullStateMessage,e.appendChild(i),e.appendChild(n),t.appendChild(e);var o=t.querySelector(".paneLoadingWrapper");o&&o.remove()}}}]),i}(Gf),eT=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n        html {\n            overflow: hidden;\n        }\n        .btnBannerPrimary {\n            background: #0078D4;\n            border: none;\n            border-radius: 2px;\n            color: #FFFFFF;\n            min-height: 32px;\n            height: auto;\n            padding: 10px 24px;\n            text-align: center;\n            align-items: center;\n            justify-content: center;\n            display: flex;\n            border-width: 0px;\n            cursor: pointer;\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 12px;\n            line-height: 12px;\n            font-weight: bold;\n            outline: none;\n        }\n        .bannerMainTitleAlt {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 18px;\n            line-height: 25px;\n            margin: 0px;\n        }\n        .btnBannerPrimary:focus-visible {\n            border-color: #000000;\n            box-shadow: 0 0 0px 2px #000000;\n        }\n        .btnBannerSecondary {\n            border: none;\n            border-radius: 2px;\n            min-height: 32px;\n            height: auto;\n            text-align: center;\n            align-items: center;\n            justify-content: center;\n            display: flex;\n            cursor: pointer;\n            background: rgba(0, 0, 0, 0.07);\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 12px;\n            line-height: 12px;\n            outline: none;\n            padding: 1px 15px;\n        }\n        .btnBannerSecondary:focus-visible {\n            border-color: #000000;\n            box-shadow: 0 0 0px 2px #000000;\n        }\n        #mainDiv {\n            display: grid;\n            grid-template-columns: auto auto auto auto;\n            position: fixed;\n            top: 0px;\n            left: 0px;\n            width: 100%;\n            height: 50px;\n            overflow-y: auto;\n            box-shadow: 0px 3.2px 7.2px rgba(0, 0, 0, 0.13), 0px 0px 3.8px rgba(0, 0, 0, 0.11);\n            z-index: 3000000000;\n        }\n        .divTitle {\n            display: grid;\n            grid-gap: 10px;\n            grid-template-columns: 1fr auto;\n            justify-self: start;\n            grid-column-start: 1;\n            align-items: center;\n            margin-left: 16px;\n            margin-right: 16px;\n        }\n        #divContent {\n            display: flex;\n            flex-direction: row;\n            justify-content: center;\n            justify-self: flex-end;\n            align-items: center;\n            grid-column-start: 4;\n            grid-gap: 10px;\n            margin-left: 5px;\n            margin-right: 5px;\n        }\n        .txtSmall {\n            font-family: 'Segoe UI','Roboto', Helvetica, Verdana, sans-serif;\n            font-size: 14px;\n            line-height: 22px;\n            margin: 0px;\n        }\n        .copiedIndicator {\n            display: flex;\n            flex-direction: row;\n            width: 100%;\n            height: 100%;\n            z-index: 1;\n            background-color: #0078D4;\n            position: absolute;\n            align-items: center;\n            justify-content: center;\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            padding: 0px;\n        }\n        .btnBannerClose {\n            width: 30px;\n            height: 30px;\n            display: flex;\n            align-items: center;\n            cursor: pointer;\n            appearance: none;\n            background: none;\n            border-width: 0px;\n            outline: none;\n        }\n        .btnBannerClose:focus-visible {\n            border-color: #000000;\n            box-shadow: 0 0 0px 2px #000000;\n            border-radius: 2px;\n        }\n        #btnDisableAutoShowBanner {\n            width: 0px;\n            overflow: hidden;\n            min-width: unset;\n            transition: width 2s;\n        }\n        .bannerBackground1 {\n            background: linear-gradient(269.25deg, #FFFFFF 3.48%, #DDF1FF 34.6%, #DDFDFF 56.91%, #F3FFF9 80.98%, #FFFFFF 100.94%);\n            box-shadow: 0px 12.8px 28.8px rgba(0, 0, 0, 0.13), 0px 0px 9.2px rgba(0, 0, 0, 0.11);\n        }\n        .bannerBackground2 {\n            background: white;\n            box-shadow: 0px 12.8px 28.8px rgba(0, 0, 0, 0.13), 0px 0px 9.2px rgba(0, 0, 0, 0.11);\n        }\n        .bannerBackground3 {\n            background: linear-gradient(91.11deg, #2250AB -2.43%, #3C79D6 2.35%, #D2EFFF 21.53%, #DBFDFF 42.49%, #63B8E8 52.13%, #3C79D6 58.88%, #2250AB 69.83%, #0840B0 86.55%);\n            box-shadow: 0px 3.2px 7.2px rgba(0, 0, 0, 0.13), 0px 0px 3.8px rgba(0, 0, 0, 0.11);\n        }\n        .bannerBackground4 {\n            height: 50px;\n            background: linear-gradient(91.11deg, #D2EFFF -2.41%, #DBFDFF 18.89%, #D8F5FF 27.92%, #63B8E8 40.11%, #3C79D6 49.19%, #2250AB 64.05%, #0840B0 89.38%);\n            box-shadow: 0px 3.2px 7.2px rgba(0, 0, 0, 0.13), 0px 0px 3.8px rgba(0, 0, 0, 0.11);\n        }\n        .bannerBackground5 {\n            height: 50px;\n            background: linear-gradient(269.29deg, #FFF4F8 0.61%, #FFFCDE 21.7%, #FFFDE7 63.38%, #ECFFEF 86.01%, #F1FFFE 99.39%);\n            box-shadow: 0px 12.8px 28.8px rgba(0, 0, 0, 0.13), 0px 0px 9.2px rgba(0, 0, 0, 0.11);\n        }\n        #viewMorePricesButton {\n            display: flex;\n            flex-direction: row;\n            justify-content: center;\n            align-items: center;\n            padding: 5px 28px 5px 27px;\n            background: linear-gradient(221.42deg, #FF8A1E -21.61%, #FC5C82 109.89%, #FFD98E 150.42%);\n            box-shadow: 0px 1px 2px 1px rgba(0, 0, 0, 0.1), 0px 4px 4px rgba(0, 0, 0, 0.15);\n            border-radius: 100px;\n        }\n    "}},{key:"getArrowButtonIcon",value:function(){return A.Z.getTrustedHTML(KA||(KA=(0,E.Z)(['<svg aria-hidden="true" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M15.8527 7.64582C16.0484 7.84073 16.0489 8.15731 15.854 8.35292L10.389 13.8374C10.1741 14.0531 9.82477 14.0531 9.60982 13.8374L4.14484 8.35292C3.94993 8.15731 3.95049 7.84073 4.1461 7.64582C4.34171 7.4509 4.65829 7.45147 4.85321 7.64708L9.99942 12.8117L15.1456 7.64708C15.3406 7.45147 15.6571 7.4509 15.8527 7.64582Z" fill="#FA003C"/>\n        </svg>'])))}},{key:"getWhiteTriangleButtonIcon",value:function(){return A.Z.getTrustedHTML(YA||(YA=(0,E.Z)(['<svg aria-hidden="true" width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M4.39519 6.5125L7.38869 2.8125C7.52119 2.649 7.52819 2.4455 7.44969 2.2835C7.37119 2.1215 7.20569 2 6.99369 2H1.00669C0.794689 2 0.629689 2.121 0.551189 2.2835C0.472689 2.446 0.479689 2.6485 0.612189 2.8125L3.60569 6.5125C3.70669 6.6375 3.85319 6.7 4.00019 6.7C4.14719 6.7 4.29369 6.6375 4.39519 6.5125Z" fill="white"/>\n        </svg>'])))}},{key:"getCloseButtonWhite",value:function(){return A.Z.getTrustedHTML(jA||(jA=(0,E.Z)(['<svg id="flyoutCloseWhite" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n        <path d="M8.5332 8L12.5762 12.0488L12.0488 12.5762L8 8.5332L3.95117 12.5762L3.42383 12.0488L7.4668 8L3.42383 3.95117L3.95117 3.42383L8 7.4668L12.0488 3.42383L12.5762 3.95117L8.5332 8Z" fill="#FFFFFF"/>\n        </svg>'])))}},{key:"getCloseButtonSeparatorCss",value:function(){return"width: 22px;\n        height: 0px;\n        top: 16px;\n        border: 1px solid #ECECEC;\n        transform: rotate(90deg);"}},{key:"getCloseButtonSeparatorCssWhite",value:function(){return"width: 22px;\n        height: 0px;\n        top: 16px;\n        border: 1px solid rgba(255, 255, 255, 0.16);\n        transform: rotate(90deg);"}},{key:"getBannerConfettiImage",value:function(){return A.Z.getTrustedHTML(XA||(XA=(0,E.Z)(['<svg width="405" height="50" viewBox="0 0 405 54" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <mask id="mask0" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="405" height="54">\n        <rect width="405" height="54" fill="#C4C4C4"/>\n        </mask>\n        <g mask="url(#mask0)">\n        <rect width="11.4496" height="11.4496" transform="matrix(-0.691149 0.722712 0.722712 0.691149 216.914 7)" fill="#77E0B5"/>\n        <circle r="5.72479" transform="matrix(-4.37114e-08 1 1 4.37114e-08 6.72479 30.7248)" fill="#77E0B5"/>\n        <rect width="11.4496" height="22.8992" transform="matrix(-0.258819 0.965926 0.965926 0.258819 382.963 23)" fill="#FEAC93"/>\n        <g filter="url(#filter0_f)">\n        <rect width="11.4496" height="22.8992" rx="5.72479" transform="matrix(-0.915822 -0.401584 -0.401584 0.915822 337.682 -1.40186)" fill="#F67173"/>\n        </g>\n        <path d="M111.904 13.3424C117.117 8.12971 125.569 8.12972 130.781 13.3424C135.994 18.5551 135.994 27.0065 130.781 32.2192L111.904 13.3424Z" fill="#F67173"/>\n        <rect width="9.72902" height="6.94028" transform="matrix(-0.5 0.866025 0.866025 0.5 86.8643 -5)" fill="#3F8EF6"/>\n        <rect width="11.4496" height="23.3405" transform="matrix(0.965926 0.258819 0.258819 -0.965926 235 54.5454)" fill="#38D4FA"/>\n        </g>\n        <defs>\n        <filter id="filter0_f" x="309" y="-15" width="37.6817" height="43.5695" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n        <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n        <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>\n        <feGaussianBlur stdDeviation="4.5" result="effect1_foregroundBlur"/>\n        </filter>\n        </defs>\n        </svg>\n        '])))}}]),t}(),iT=function(){function t(e,i,n,o){(0,s.Z)(this,t),(0,I.Z)(this,"ExperimentActive",!1),(0,I.Z)(this,"ContentImageFile",void 0),(0,I.Z)(this,"ContentImageSize",void 0),(0,I.Z)(this,"TitleDivMarginLeft",void 0),(0,I.Z)(this,"ContentDivMarginRight",void 0),(0,I.Z)(this,"TitleDivSwapElementOrder",!1),(0,I.Z)(this,"AddConfetti",!1),(0,I.Z)(this,"UseSavingsTextGradient",!1),(0,I.Z)(this,"ShowTitleInWhite",!1),(0,I.Z)(this,"ClassName",void 0),(0,I.Z)(this,"UseWhiteCloseButton",!1),(0,I.Z)(this,"ExperimentsData",void 0),(0,I.Z)(this,"FlyoutData",void 0),(0,I.Z)(this,"PageHandlerModule",void 0),(0,I.Z)(this,"Utilities",void 0),this.ExperimentsData=i,this.FlyoutData=n,this.PageHandlerModule=e,this.Utilities=o,i.isPCBannerUXExperimentActive()&&(this.ExperimentActive=!0,i.isExperimentActive(xt.H.pcBannerUXExperimentation1)?(this.ClassName="bannerBackground1",this.TitleDivMarginLeft=19,this.ContentDivMarginRight=58,this.ContentImageFile="Emoji.png",this.ContentImageSize=32,this.UseSavingsTextGradient=!0):i.isExperimentActive(xt.H.pcBannerUXExperimentation2)?(this.ClassName="bannerBackground2",this.TitleDivMarginLeft=19,this.ContentDivMarginRight=58,this.AddConfetti=!0,this.UseSavingsTextGradient=!0):i.isExperimentActive(xt.H.pcBannerUXExperimentation3)?(this.ClassName="bannerBackground3",this.TitleDivMarginLeft=375,this.ContentDivMarginRight=187,this.UseWhiteCloseButton=!0,this.ShowTitleInWhite=!0):i.isExperimentActive(xt.H.pcBannerUXExperimentation4)?(this.ClassName="bannerBackground4",this.TitleDivMarginLeft=112,this.ContentDivMarginRight=58,this.TitleDivSwapElementOrder=!0,this.UseWhiteCloseButton=!0,this.ShowTitleInWhite=!0):i.isExperimentActive(xt.H.pcBannerUXExperimentation5)?(this.ClassName="bannerBackground5",this.TitleDivMarginLeft=19,this.ContentDivMarginRight=58,this.ContentImageFile="ClappingHands.png",this.ContentImageSize=36,this.UseSavingsTextGradient=!0):i.isExperimentActive(xt.H.pcBannerUXExperimentation6)&&(this.ExperimentActive=!0,this.ClassName="bannerBackground6"))}return(0,l.Z)(t,[{key:"TriggerActiveExperiment",value:function(){this.ExperimentActive&&(this.ExperimentsData.isExperimentActive(xt.H.pcBannerUXExperimentation1)?this.PageHandlerModule.TriggerExperiment(xt.H.pcBannerUXExperimentation1):this.ExperimentsData.isExperimentActive(xt.H.pcBannerUXExperimentation2)?this.PageHandlerModule.TriggerExperiment(xt.H.pcBannerUXExperimentation2):this.ExperimentsData.isExperimentActive(xt.H.pcBannerUXExperimentation3)?this.PageHandlerModule.TriggerExperiment(xt.H.pcBannerUXExperimentation3):this.ExperimentsData.isExperimentActive(xt.H.pcBannerUXExperimentation4)&&this.PageHandlerModule.TriggerExperiment(xt.H.pcBannerUXExperimentation4))}},{key:"RenderViewAllButton",value:function(t,e){function i(t,e){var i=t.querySelector("path");null!==i&&(i.style.fill=e)}var n=0;if(this.ExperimentsData.isExperimentActive(xt.H.pcBannerUXExperimentation1)||this.ExperimentsData.isExperimentActive(xt.H.pcBannerUXExperimentation2))n=20,t.innerHTML=(new eT).getArrowButtonIcon(),i(t,"#FA003C"),t.style.marginRight="-10px";else if(this.ExperimentsData.isExperimentActive(xt.H.pcBannerUXExperimentation3))n=8,t.innerHTML=(new eT).getWhiteTriangleButtonIcon();else if(this.ExperimentsData.isExperimentActive(xt.H.pcBannerUXExperimentation4)){t.id="viewMorePricesButton",t.innerText=this.FlyoutData.strings.viewMorePricesButtonText,t.style.color="white";var o=this.Utilities.createElement("DIV");o.innerHTML=(new eT).getArrowButtonIcon(),i(o,"#FFFFFF"),o.style.float="right",o.style.marginLeft="14px",t.appendChild(o)}else this.ExperimentsData.isExperimentActive(xt.H.pcBannerUXExperimentation5)&&(n=20,t.innerHTML=(new eT).getArrowButtonIcon(),i(t,"#FA003C"),t.style.marginRight="-10");if(t.style.backgroundColor="transparent",t.style.border="none",n>0){var a=t.querySelector("SVG");a&&(a.setAttribute("width",n.toString()),a.setAttribute("height",n.toString()))}}}]),t}(),nT=iT,oT=function(){function e(t,i,n,o,a,r,l,c){var u;(0,s.Z)(this,e),(0,I.Z)(this,"logModule",void 0),(0,I.Z)(this,"pagehandlerModule",void 0),(0,I.Z)(this,"data",void 0),(0,I.Z)(this,"utilities",void 0),(0,I.Z)(this,"stateManagement",void 0),(0,I.Z)(this,"classBtnBannerPrimary","btnBannerPrimary"),(0,I.Z)(this,"classSpanCouponCode","spanCouponCode"),(0,I.Z)(this,"classDivActionButtonWrapper","divActionButtonWrapper"),(0,I.Z)(this,"idMainDiv","mainDiv"),(0,I.Z)(this,"idContent","divContent"),(0,I.Z)(this,"classTitle","divTitle"),(0,I.Z)(this,"classBtnViewMorePrices","viewMorePricesButton"),(0,I.Z)(this,"classBtnBannerClose","btnBannerClose"),(0,I.Z)(this,"classTxtSmall","txtSmall"),(0,I.Z)(this,"classCopiedIndicator","copiedIndicator"),(0,I.Z)(this,"classActionsButton","actionsButton"),(0,I.Z)(this,"cashBackData",void 0),(0,I.Z)(this,"isCashbackActivated",void 0),(0,I.Z)(this,"cashBackModule",void 0),(0,I.Z)(this,"priceHistoryModule",void 0),(0,I.Z)(this,"priceComparisonModule",void 0),(0,I.Z)(this,"couponsModule",void 0),(0,I.Z)(this,"isPriceHistoryExperimentActive",void 0),(0,I.Z)(this,"isPriceComparisonExperimentActive",void 0),(0,I.Z)(this,"isCashBackExperimentActive",void 0),(0,I.Z)(this,"isCouponsExperimentActive",void 0),(0,I.Z)(this,"isPCBannerUXExperimentActive",void 0),(0,I.Z)(this,"pcBannerUXConfig",void 0),(0,I.Z)(this,"assets",void 0),(0,I.Z)(this,"commonAssets",void 0),this.logModule=l.logModule,this.pagehandlerModule=l.pageHandlerModule,this.cashBackModule=t,this.priceComparisonModule=i,this.priceHistoryModule=n,this.couponsModule=o,this.data=a,this.cashBackData=this.data.dataStoreModule.CashBackData,this.isCashbackActivated=null===(u=this.cashBackData)||void 0===u?void 0:u.isCashBackActivated,this.stateManagement=r,this.utilities=l.viewModulesUtilities,this.assets=new eT,this.commonAssets=c;var d=this.data.experimentData;this.isPriceHistoryExperimentActive=d.isExperimentActive(xt.H.bannerShowPriceHistory),this.isPriceComparisonExperimentActive=d.isExperimentActive(xt.H.bannerShowPriceComparison),this.isCashBackExperimentActive=d.isExperimentActive(xt.H.bannerShowCashback),this.isCouponsExperimentActive=d.isExperimentActive(xt.H.bannerShowCoupons),this.isPCBannerUXExperimentActive=d.isPCBannerUXExperimentActive(),this.pcBannerUXConfig=new nT(this.pagehandlerModule,d,a,this.utilities)}var i,r,c;return(0,l.Z)(e,[{key:"renderBanner",value:(c=(0,t.Z)(n().mark((function t(){var e,i,r,s,l,c,u,d,h,p=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=document.querySelector("#divContentWrapper"))){t.next=29;break}return this.utilities.applyStyles(e,this.assets.getStyles()),i=this.utilities.createElement("fluent-design-system-provider"),this.pcBannerUXConfig.ExperimentActive&&this.pcBannerUXConfig.ClassName?i.className=this.pcBannerUXConfig.ClassName:this.data.common.currentTheme===D.Q2.Dark?i.setAttribute("background-color","#4a4a4a"):i.setAttribute("background-color","#F7F7F7"),i.id=this.idMainDiv,r=this.populateMainHeader(),t.next=9,this.getModuleToRender();case 9:s=t.sent,(l=this.utilities.createElement("DIV")).id=this.idContent,this.pcBannerUXConfig.ExperimentActive&&(l.style.display="flex"),(c=this.utilities.createElement("P",{style:"font-weight: 600"})).className=this.classTxtSmall,this.createBannerContent(s,l,c),this.createBannerMenu(l),i.appendChild(r),i.appendChild(l),e.appendChild(i),i.addEventListener("click",(function(){p.pagehandlerModule.ShowFlyoutFromBanner(D.Te.Mouse)})),i.addEventListener("mouseover",(function(){u=setTimeout((function(){p.pagehandlerModule.ShowFlyoutFromBanner(D.Te.Mouse)}),500)})),i.addEventListener("mouseout",(function(){u&&clearTimeout(u)})),d=new o.Z(a.xu.BannerRendered),this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,"user saw banner with ".concat(s),d),this.pagehandlerModule.OnBannerLoad(),(h=document.querySelector("."+this.classBtnViewMorePrices))&&h.addEventListener("keydown",(function(t){"Enter"===t.key&&p.pagehandlerModule.ShowFlyoutFromBanner(D.Te.Keyboard),t.stopPropagation()})),document.addEventListener("visibilitychange",(function(t){"hidden"===document.visibilityState?yt("banneropen","false"):"visible"===document.visibilityState&&yt("banneropen","true")}));case 29:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"populateMainHeader",value:function(){var t=this.utilities.createElement("DIV",{style:"display:flex;"}),e=this.utilities.createElement("DIV",{style:"float:left;"});e.className=this.classTitle,this.pcBannerUXConfig.ExperimentActive&&(e.style.marginLeft=this.pcBannerUXConfig.TitleDivMarginLeft.toString()+"px");var i=this.utilities.createElement("DIV");i.setAttribute("aria-hidden","true"),i.innerHTML=this.commonAssets.getHeaderIcon();var n=i.querySelector("SVG");n&&(n.setAttribute("width","26px"),n.setAttribute("height","26px"));var o=this.utilities.createElement("H1",{style:"font-weight: 600; color: #000000;"});if(o.className=this.classTxtSmall,o.textContent=this.data.strings.commonFixedTitle,this.pcBannerUXConfig.TitleDivSwapElementOrder?(e.appendChild(o),e.appendChild(i)):(e.appendChild(i),e.appendChild(o)),t.appendChild(e),this.pcBannerUXConfig.AddConfetti){var a=this.utilities.createElement("DIV",{style:"float:left;"});a.setAttribute("aria-hidden","true"),a.innerHTML=this.assets.getBannerConfettiImage(),a.style.marginLeft="40",a.className=this.classTitle,t.appendChild(a)}return t}},{key:"createBannerMenu",value:function(t){var e=this,i=this.pcBannerUXConfig.UseWhiteCloseButton?this.assets.getCloseButtonSeparatorCssWhite():this.assets.getCloseButtonSeparatorCss(),n=this.utilities.createElement("DIV",{style:i});t.appendChild(n);var o=document.createElement("fluent-button");o.setAttribute("aria-label",this.data.strings.commonClose),o.id=D.z6.CLOSE,o.className=this.classBtnBannerClose,o.style.marginLeft="-15px",o.style.color="#000000";var r,s=this.pcBannerUXConfig.UseWhiteCloseButton?this.assets.getCloseButtonWhite():this.commonAssets.getCloseButton();o.textContent=s,o.addEventListener("click",(function(){r=new na.Z(a.$S.BannerDismiss),e.logModule.LogInfoEvent(a.R.ButtonClick,"Banner Dismissed",r),e.pagehandlerModule.DismissBanner()}));var l=o.querySelector("SVG");l&&l.setAttribute("aria-hidden","true"),t.appendChild(o)}},{key:"IsPriceComparisonExperimentActive",value:function(){return this.isPriceComparisonExperimentActive||this.isPCBannerUXExperimentActive}},{key:"getModuleToRender",value:(r=(0,t.Z)(n().mark((function t(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.pcBannerUXConfig.TriggerActiveExperiment(),this.pagehandlerModule.TriggerExperiment(xt.H.bannerShowPriceHistory),this.pagehandlerModule.TriggerExperiment(xt.H.bannerShowPriceComparison),this.pagehandlerModule.TriggerExperiment(xt.H.bannerShowCashback),this.pagehandlerModule.TriggerExperiment(xt.H.bannerShowCoupons),e=this.stateManagement.getState(Ia.IY.topModuleName),t.t0=e,t.next=t.t0===D.GX.PRICEHISTORY?9:t.t0===D.GX.PRICECOMPARISON?12:t.t0===D.GX.CASHBACK?15:t.t0===D.GX.COUPON?18:21;break;case 9:if(!this.isPriceHistoryExperimentActive){t.next=11;break}return t.abrupt("return",D.GX.PRICEHISTORY);case 11:return t.abrupt("break",21);case 12:if(!this.IsPriceComparisonExperimentActive()){t.next=14;break}return t.abrupt("return",D.GX.PRICECOMPARISON);case 14:return t.abrupt("break",21);case 15:if(!this.isCashBackExperimentActive){t.next=17;break}return t.abrupt("return",D.GX.CASHBACK);case 17:return t.abrupt("break",21);case 18:if(!this.isCouponsExperimentActive){t.next=20;break}return t.abrupt("return",D.GX.COUPON);case 20:return t.abrupt("break",21);case 21:if(!this.isPriceHistoryExperimentActive||!this.priceHistoryModule.ShouldRenderModule()){t.next=23;break}return t.abrupt("return",D.GX.PRICEHISTORY);case 23:if(!this.isPriceComparisonExperimentActive||!this.priceComparisonModule.ShouldRenderModule()){t.next=26;break}return t.abrupt("return",D.GX.PRICECOMPARISON);case 26:if(!this.isCashBackExperimentActive||!this.cashBackModule.ShouldRenderModule()){t.next=36;break}if(!this.isCashbackActivated){t.next=35;break}if(t.t1=this.isCouponsExperimentActive,!t.t1){t.next=33;break}return t.next=32,this.areCouponsHighSuccessRate();case 32:t.t1=t.sent;case 33:if(!t.t1){t.next=35;break}return t.abrupt("return",D.GX.COUPON);case 35:return t.abrupt("return",D.GX.CASHBACK);case 36:return t.abrupt("return",D.GX.COUPON);case 37:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"areCouponsHighSuccessRate",value:(i=(0,t.Z)(n().mark((function t(){var e,i,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.data.dataStoreModule.CouponData,t.next=3,this.couponsModule.ShouldRenderModule();case 3:if(!t.sent){t.next=6;break}return o=null!==(i=null==e?void 0:e.Coupons[0].successRate)&&void 0!==i?i:-1,t.abrupt("return",o>=75);case 6:return t.abrupt("return",!1);case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"createBannerContent",value:function(t,e,i){switch(t){case D.GX.PRICECOMPARISON:this.renderPriceComparison(e,i);break;case D.GX.CASHBACK:this.renderCashBack(e,i);break;case D.GX.PRICEHISTORY:this.renderPriceHistory(e,i);break;case D.GX.COUPON:default:this.renderCoupons(e,i)}}},{key:"createBannerTitle",value:function(t,e,i,n){if(e&&e.length>0){var o=window.trustedTypes.emptyHTML;if(t.innerHTML=o,t.textContent=e[0],this.pcBannerUXConfig.ExperimentActive&&(t.className="bannerMainTitleAlt"),e.length>1){var a=this.utilities.createElement(i,n);a.textContent=e[1],t.appendChild(a)}if(e.length>2){var r=this.utilities.createElement("P",{style:"display: inline;"});r.textContent=e[2],t.appendChild(r)}}}},{key:"getCouponTextInfo",value:function(t,e){if(t.Coupons[0].successRate>=75)if(t.Coupons.length>1&&(t.Coupons[1].successRate<75||!t.Coupons[1].successRate)){var i=this.data.strings.bannerCouponSingularTitle,n=(i=this.utilities.replaceValueInKey("bannerCouponSingularTitle",i,t.Coupons[0].successRate.toString())).split("|");this.createBannerTitle(e,n,"B")}else{var o=t.Coupons[0].successRate;t.Coupons.length>1&&t.Coupons[0].successRate>t.Coupons[1].successRate&&(o=t.Coupons[1].successRate);var a=this.data.strings.bannerCouponPluralTitle,r=(a=this.utilities.replaceValueInKey("bannerCouponPluralTitle",a,o.toString())).split("|");this.createBannerTitle(e,r,"B")}else if(1===t.Coupons.length){var s=this.data.strings.bannerFoundCouponsSingular.split("|");this.createBannerTitle(e,s,"P",{style:"display: inline; font-size:14px; font-weight:bold;"})}else{var l=this.data.strings.bannerFoundCoupons,c=(l=this.utilities.replaceValueInKey("bannerFoundCoupons",l,t.Coupons.length.toString())).split("|");this.createBannerTitle(e,c,"P",{style:"display: inline; font-size:14px; font-weight:bold;"})}}},{key:"renderCoupons",value:function(t,e){var i=this,n=this.data.dataStoreModule.CouponData;if(n&&n.Coupons&&n.Coupons.length>0){var o;this.getCouponTextInfo(n,e),t.appendChild(e);var a=2;n.Coupons.length<a&&(a=n.Coupons.length);for(var r=this.data.strings.commonLearnMore,s=null!==(o=n.Coupons[0].successRate>=75)&&void 0!==o&&o,l=0;l<a;l++)s&&n.Coupons[l].successRate>=75?this.createCouponCodeButtons(n,r,l,t):s||this.createCouponCodeButtons(n,r,l,t);var c=document.createElement("fluent-button");n.Coupons.length>1?c.textContent=this.utilities.replaceValueInKey("bannerViewAllCoupons",this.data.strings.bannerViewAllCoupons,n.Coupons.length.toString()):c.textContent=this.data.strings.bannerViewAllCouponsSingular,c.addEventListener("click",(function(){i.pagehandlerModule.StartShopping(D.Te.Banner,"viewAll")})),t.appendChild(c)}}},{key:"createCouponCodeButtons",value:function(t,e,i,n){var o=this.createBannerButtonWrapper(t.Coupons[i].couponCode+" "+this.data.strings.couponCopyLabel),a=this.utilities.createElement("BUTTON");a.className=this.classBtnBannerPrimary;var r=this.utilities.createElement("SPAN");if(r.className=this.classSpanCouponCode,r.textContent=t.Coupons[i].couponCode,r.style.display="none",e.length>t.Coupons[i].couponCode.length){a.textContent=e,o.appendChild(a);var s=this.createHoverDiv(t.Coupons[i].couponCode,!1);s&&o.appendChild(s)}else{a.textContent=t.Coupons[i].couponCode,o.appendChild(a);var l=this.createHoverDiv(e,!0);l&&o.appendChild(l)}o.appendChild(r),n.appendChild(o),this.manageBannerEvents(o,D.GX.COUPON)}},{key:"renderPriceComparison",value:function(t,e){var i=this.data.dataStoreModule.PriceComparisonData;if(i&&i.CompetingPrices&&i.CompetingPrices.length>0){var n,o=i.CompetingPrices[0].IntendedPrice,a=i.CompetingPrices[0].SellerName,r=i.CompetingPrices[0];if(-1!==i.Price&&i.CompetingPrices.forEach((function(t){var e=t.IntendedPrice;e&&o&&e<o&&(o=e,a=t.SellerName,r=t)})),o&&(n=i.Price-o),n>1){if(this.pcBannerUXConfig.ExperimentActive&&this.pcBannerUXConfig.ContentImageFile){var s=this.utilities.createElement("DIV");s.style.width=this.pcBannerUXConfig.ContentImageSize.toString()+"px",s.style.height=this.pcBannerUXConfig.ContentImageSize.toString()+"px",s.setAttribute("aria-hidden","true"),s.style.background='url( "'.concat(this.data.common.resourcesEndpoint,"banner/").concat(this.pcBannerUXConfig.ContentImageFile,'") no-repeat'),t.appendChild(s)}var l=(this.pcBannerUXConfig.ExperimentActive?this.data.strings.bannerFoundBestPriceAlt:this.data.strings.bannerFoundBestPrice).split("|");if(e.style.fontWeight="400",e.style.color="#000000",this.createBannerTitle(e,l,"P",{style:"display: inline; font-weight:bold; font-size:14px;"}),t.appendChild(e),this.pcBannerUXConfig.ExperimentActive){var c=this.utilities.createElement("DIV",{style:"top: 0px; position: fixed; opacity: 0; pointer-events: none;"});c.setAttribute("aria-live","assertive"),t.appendChild(c),c.innerText=this.data.strings.pcNotificationNarratorIntro+this.data.strings.commonFixedTitle+". "+this.data.strings.bannerFoundBestPriceAlt+" "+this.utilities.replaceValueInKey("pcNotificationTitle",this.data.strings.pcNotificationTitle,"".concat(r.CurrencySymbol).concat(n.toFixed(2)));var u=this.utilities.createElement("DIV",{style:"display:flex; grid-gap:5px;font-weight: 600;"}),d=this.pcBannerUXConfig.UseSavingsTextGradient?"background: linear-gradient(to right, #D0006A, #FF6B00);\n                        color: transparent;\n                        -webkit-background-clip: text;":"color: white;\n                        font-weight: 600;",h=this.utilities.createElement("DIV",{style:d});h.innerText=this.data.strings.commonYouCanSave,h.className="bannerMainTitleAlt",u.appendChild(h);var p="".concat(r.CurrencySymbol).concat(n.toFixed(2));if(this.pcBannerUXConfig.UseSavingsTextGradient)h.innerText+=" "+p;else{var f=this.utilities.createElement("DIV",{style:"font-weight: bold; color: orange;"});f.textContent=p+"!",f.className="bannerMainTitleAlt",f.style.fontWeight="bold",u.appendChild(f)}this.pcBannerUXConfig.ShowTitleInWhite&&(e.style.color="white"),t.appendChild(u)}else{var g=this.data.strings.bannerVisitItem,m=this.utilities.replaceValueInKey("bannerVisitItem",this.data.strings.bannerSave,"".concat(r.CurrencySymbol).concat(n.toFixed(2)),a),v=this.createBannerButtonWrapper(m+" "+g),y=this.utilities.createElement("BUTTON");if(y.className=this.classBtnBannerPrimary,g.length>m.length){y.textContent=g;var C=this.createHoverDiv(m,!1);v.appendChild(y),v.appendChild(C)}else{y.textContent=m;var b=this.createHoverDiv(g,!0);v.appendChild(y),v.appendChild(b)}t.appendChild(v),this.manageBannerEvents(v,D.GX.PRICECOMPARISON,r)}}else{var S=this.data.strings.bannerYouHaveBestPrice.split("|");this.createBannerTitle(e,S,"P",{style:"display: inline; font-weight:bold; font-size:14px;"}),t.appendChild(e)}this.renderPCBannerViewAllButton(t,n>0)}}},{key:"renderPCBannerViewAllButton",value:function(t,e){var i;this.pcBannerUXConfig.ExperimentActive?((i=document.createElement("BUTTON")).setAttribute("aria-label","Find better prices"),i.classList.add(this.classBtnViewMorePrices),this.pcBannerUXConfig.RenderViewAllButton(i,this.data.common.resourcesEndpoint)):((i=document.createElement("fluent-button")).classList.add(this.classBtnViewMorePrices),i.textContent=e?this.data.strings.bannerViewAll:this.data.strings.pcPriceSectionTitle),t.appendChild(i)}},{key:"renderCashBack",value:function(e,i){var o=this,r=this.data.dataStoreModule.CashBackData,s=this.cashBackModule.retrieveCashBackAmount(),l=this.utilities;if(s){if(null!=r&&r.isCashBackActivated){var c=this.data.strings.bannerCashBackOnTitle,u=(c=this.utilities.replaceValueInKey("bannerCashBackOnTitle",c,s)).split("|");this.createBannerTitle(i,u,"B"),e.appendChild(i)}else{var d=this.data.strings.bannerCashBackOffTitle,h=(d=this.utilities.replaceValueInKey("bannerCashBackOffTitle",d,s)).split("|");this.createBannerTitle(i,h,"B"),e.appendChild(i);var p=l.createElement("fluent-button");this.styleDefaultState(p),p.textContent=this.data.strings.cbActivateButtonRefresh,p.addEventListener("click",function(){var e=(0,t.Z)(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.cashBackModule.handleActivateCashbackClick(p,e,"Cash back activated from banner");case 2:t.sent?(o.cashBackModule.styleActivatedState(p,!1,!1),d=o.data.strings.bannerCashBackOnTitle,d=o.utilities.replaceValueInKey("bannerCashBackOnTitle",d,s),h=d.split("|"),o.createBannerTitle(i,h,"B")):o.styleDefaultState(p);case 4:case"end":return t.stop()}}),t)})));return function(t){return e.apply(this,arguments)}}()),e.appendChild(p)}var f=document.createElement("fluent-button");f.textContent=this.data.strings.bannerSeeDetails,f.addEventListener("click",(function(){var t=new na.Z(a.$S.RebatesLearnMore);o.pagehandlerModule.RecordAsUserAction(Ca.bS.REBATES_LEARN_MORE),o.logModule.LogInfoEvent(a.R.ButtonClick,"User navigated to rebates see details from banner",t,ya.g.CouponImpressionId),o.pagehandlerModule.NavigateToLearnMore(lg.$.NEW_FOREGROUND_TAB)})),e.appendChild(f)}}},{key:"renderPriceHistory",value:function(t,e){var i=this,n=this.data.dataStoreModule.PriceHistoryData;if(n&&n.CurrentPrice&&n.DailyPrices&&n.DailyPrices.length>1){var o=n.getPriceHistoryType(),a=this.priceHistoryModule.createPriceHistoryTypeIllustration(o,!0);t.appendChild(a);var r,s=n.ProductDetails&&n.ProductDetails.currency&&""!==n.ProductDetails.currency?n.ProductDetails.currency:"$",l=this.priceHistoryModule.getPriceDifference(n,o);switch(o){case ca.PRICEDROP:l&&(r=this.data.strings.bannerPriceDropTitle,r=this.utilities.replaceValueInKey("bannerPriceDropTitle",r,"".concat(s).concat(l.toFixed(2))));break;case ca.PRICEINCREASE:l&&(r=this.data.strings.bannerPriceIncreaseTitle,r=this.utilities.replaceValueInKey("bannerPriceIncreaseTitle",r,"".concat(s).concat(l.toFixed(2))));break;case ca.FAIRPRICE:default:r=this.data.strings.bannerPriceStableTitle}var c=r.split("|");this.createBannerTitle(e,c,"B"),t.appendChild(e);var u=document.createElement("fluent-button");u.textContent=this.data.strings.bannerShowPriceHistory,u.addEventListener("click",(function(){i.pagehandlerModule.StartShopping(D.Te.Auto,"viewPriceHistory")})),t.appendChild(u)}}},{key:"styleDefaultState",value:function(t){t.style.minWidth="175px",t.appearance="accent",t.style.fontSize="14px",t.style.borderRadius="2px",t.style.marginTop="0px",t.style.height="32px",t.className+=" ".concat(this.classActionsButton),t.style.width="auto"}},{key:"removeFocusBanner",value:function(t){var e=t.querySelector(".".concat(this.classCopiedIndicator)),i=t.querySelector("BUTTON");e&&i&&("hidden"===e.style.visibility?e.style.visibility="visible":e.style.visibility="hidden")}},{key:"createBannerButtonWrapper",value:function(t){var e=this.utilities.createElement("DIV");return e.style.position="relative",e.className=this.classDivActionButtonWrapper,e.setAttribute("role","button"),e.setAttribute("aria-label",t),e}},{key:"manageBannerEvents",value:function(t,e,i){var n=this;t.addEventListener("mouseover",(function(){n.addFocusBanner(t)})),t.addEventListener("mouseout",(function(){n.removeFocusBanner(t)})),t.addEventListener("focusin",(function(){n.addFocusBanner(t)})),t.addEventListener("focusout",(function(){n.removeFocusBanner(t)})),t.addEventListener("click",(function(){if(e===D.GX.COUPON){var o,a=null===(o=t.querySelector(".spanCouponCode"))||void 0===o?void 0:o.textContent;a&&n.pagehandlerModule.StartShopping(D.Te.Auto,a)}else e===D.GX.PRICECOMPARISON&&i&&n.priceComparisonModule.navigateToRetailer(i,lg.$.NEW_FOREGROUND_TAB)})),e===D.GX.PRICECOMPARISON&&i&&t.addEventListener("mousedown",(function(t){if(1===t.button)n.priceComparisonModule.navigateToRetailer(i,lg.$.NEW_FOREGROUND_TAB)}))}},{key:"addFocusBanner",value:function(t){if(t.querySelector("BUTTON")){var e=t.querySelector(".".concat(this.classCopiedIndicator));e&&("hidden"===e.style.visibility?e.style.visibility="visible":e.style.visibility="hidden")}}},{key:"createHoverDiv",value:function(t,e){var i=this.utilities.createElement("DIV");i.className="".concat(this.classBtnBannerPrimary," ").concat(this.classCopiedIndicator);var n=this.utilities.createElement("SPAN");return n.textContent=t,i.style.visibility=e?"hidden":"visible",i.appendChild(n),i}}]),e}(),aT=oT,rT=i(400),sT=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n            #divCheckoutWrapper {\n                margin-bottom: 10px;\n                justify-content: center;\n                width: 100%;\n            }\n\n            #divAddressSection>p,\n            #divPaymentSection>p\n            {\n                max-width: 230px;\n                margin:0 12px;\n                font-size: 14px;\n                line-height: 20px;\n            }\n\n            #divAddressSection>p:last-of-type,\n            #divPaymentSection>p:last-of-type\n            {\n                padding-bottom: 16px;\n            }\n            #divPaymentSection.divPaymentSectionWithZipVirtualCard {\n                margin-top: 12px;\n            }\n            #divPaymentSection p:last-of-type\n            {\n                font-size: 12px;\n                line-height: 16px;\n                margin-top: 12px;\n            }\n            #divPaymentSection ::part(control) {\n                margin:auto;\n            }\n\n            #divAddressSection .shipttl,\n            #divPaymentSection .payttl {\n                display:inline-block;\n                margin:12px 12px 8px 12px;\n                font-size: 12px;\n                line-height: 16px;\n            }\n\n            #divAddressSection img,\n            #divPaymentSection img  {\n                float:left;\n            }\n\n            #divPaymentSection .cardimg {\n                float:none;\n                display:inline-block;\n            }\n            .c011145 {\n                fill:rgba(0, 0, 0, 0.55);\n            }\n\n            #divPaymentSection,\n            #divAddressSection {\n                width: 100%;\n                height: fit-content;\n                background: #E8F5FF;\n                border-radius: 4px;\n            }\n            #divPaymentSection[data-enabled='false'] .radio-banner,\n            #divPaymentSection[data-enabled='false'] .payttl,\n            #divPaymentSection[data-enabled='false'] .txtExtraSmall,\n            #divPaymentSection[data-enabled='false'] #divCard,\n            #divPaymentSection[data-enabled='false'] #divPaymentButton,\n            #divPaymentSection[data-enabled='false'] #zipCardTurnOff,\n            #divPaymentSection[data-enabled='false'] #msZipDescription {\n                opacity: var(--disabled-opacity);\n            }\n            #divPaymentSection[data-enabled='false'] #divPaymentButton,\n            #divPaymentSection[data-enabled='false'] #learnMore {\n                pointer-events: none;\n            }\n            #couponCheckoutDiv {\n                width: 100%;\n                height: 60px;\n                background: #E8F5FF;\n                border-radius: 4px;\n                padding-top: 12px;\n                margin-top: 12px;\n            }\n            #couponTopText {\n                font-size: 14px;\n                line-height: 20px;\n                color: rgba(0, 0, 0, 0.83);\n                margin: 0 12px 8px;\n            }\n            #couponBottomText {\n                font-size: 12px;\n                line-height: 16px;\n                color: rgba(0, 0, 0, 0.55);\n                margin: 0 12px 16px;\n            }\n            @media (prefers-color-scheme: dark) {\n                #divPaymentSection,\n                #divAddressSection,\n                #couponCheckoutDiv {\n                    background: #253D51;\n                }\n                .c011145\n                {\n                    fill:#FFFFFF;\n                }\n                #couponBottomText,\n                #couponTopText{\n                    color: #FFFFFF;\n                }\n            }\n            @media screen and (-ms-high-contrast: white-on-black) {\n                .c011145 {\n                    fill:#FFFFFF;\n                }\n            }\n            @media screen and (-ms-high-contrast: black-on-white) {\n                .c011145 {\n                    fill:#000000;\n                }\n            }\n\n            #divPaymentSection {\n                margin-top: 2px;\n            }\n\n            #divAddressSection {\n                margin-top: 12px;\n            }\n\n            #divAddressSection fluent-anchor,\n            #divPaymentSection fluent-anchor  {\n                float:right;\n                font-size:14px;\n                line-height:16px;\n                color:#0078d4;\n            }\n            #divPaymentSection fluent-checkbox {\n                margin-left: 44px;\n            }\n\n            #divPaymentSection ::part(label) {\n                font-size:12px !important;\n                line-height:16px;\n            }\n            .show {\n                display: block !important;\n            }\n            .shadow {\n                background-color: rgba(0, 0, 0, 0.07) !important;\n                border-radius: 2px;\n            }\n            .listbox {\n                display: none;\n                position: absolute;\n                z-index: 1;\n                width: 308px;\n                left: 26px;\n                box-shadow: 0px 12.8px 28.8px rgba(0, 0, 0, 0.13), 0px 0px 9.2px rgba(0, 0, 0, 0.11);\n                border-radius: 4px;\n            }\n            #divPaymentButton,\n            #divAddressButton,\n            .switchButton {\n                float: right;\n                position: relative;\n                top: 13px;\n            }\n            .checkoutButton {\n                width: auto;\n                min-width: 336px;\n                max-width: 100%;\n                height: 48px;\n            }\n            ::part(footer) {\n                border: none;\n                padding-top: 0;\n            }\n            .option {\n                width: 300px;\n                height: 50px;\n                position: relative;\n                left: -1px;\n                white-space: normal;\n            }\n            .option:hover {\n                border-radius: 2px;\n            }\n        "}},{key:"getUXRefreshStyles",value:function(){return"\n            #divCheckoutWrapper {\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n            }\n            .switchButton {\n                float: unset;\n                position: unset;\n                top: unset;\n            }\n            #divPaymentSection, #divAddressSection {\n                background: linear-gradient(90deg, rgba(255, 249, 217, 0.6) 0%, rgba(233, 251, 255, 0.6) 53.13%, rgba(221, 235, 255, 0.6) 100%);\n            }\n            #defaultshippingAddress {\n                max-width: unset;\n            }\n            #divAddressSection>p,\n            #divPaymentSection>p\n            {\n                max-width: unset;\n            }\n            @media (prefers-color-scheme: dark) {\n                #divPaymentSection, #divAddressSection {\n                    background: linear-gradient(90deg, #4C544A 0%, #425559 47.4%, #544E5D 100%);\n                }\n            }\n        "}},{key:"getEcImg",value:function(){return A.Z.getTrustedHTML(qA||(qA=(0,E.Z)(['<svg aria-hidden="true" width="32" height="32" style="position: relative;bottom: -10px;margin-right:10px;" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M17.2355 30.0548L0.761976 21.9761C0.0946049 21.6249 -0.186392 20.817 0.129731 20.1497L5.0472 10.1742C5.39845 9.50684 6.20632 9.22584 6.87369 9.54196L23.3472 17.6207C24.0146 17.9719 24.2956 18.7798 23.9795 19.4472L19.0971 29.4226C18.7459 30.1251 17.938 30.4061 17.2355 30.0548Z" fill="#1F65F1"/>\n        <path d="M5.78485 20.6414L3.08024 19.3067C2.79924 19.1662 2.69386 18.8501 2.83436 18.5691L4.02861 16.1103C4.1691 15.8293 4.48523 15.724 4.76623 15.8645L7.47084 17.1992C7.75184 17.3397 7.85721 17.6558 7.71671 17.9368L6.52247 20.3956C6.38197 20.6765 6.03072 20.7819 5.78485 20.6414Z" fill="#F5F5F5"/>\n        <path d="M6.87369 23.3108L2.09672 20.9574C1.88597 20.852 1.81572 20.6062 1.92109 20.3954C2.02647 20.1847 2.27234 20.1144 2.48309 20.2198L7.26006 22.5732C7.47081 22.6785 7.54106 22.9244 7.43569 23.1352C7.36544 23.3459 7.08444 23.4162 6.87369 23.3108Z" fill="#F5F5F5"/>\n        <path d="M9.82419 24.751L8.38407 24.0485C8.17332 23.9431 8.10307 23.6972 8.20845 23.4865C8.31382 23.2757 8.5597 23.2055 8.77045 23.3109L10.2106 24.0134C10.4213 24.1187 10.4916 24.3646 10.3862 24.5754C10.2808 24.7861 10.0349 24.8564 9.82419 24.751Z" fill="#F5F5F5"/>\n        <path d="M13.5123 26.5774L11.2643 25.4885C11.0536 25.3832 10.9833 25.1373 11.0887 24.9266C11.1941 24.7158 11.4399 24.6456 11.6507 24.7509L13.8987 25.8398C14.1094 25.9452 14.1797 26.191 14.0743 26.4018C13.9689 26.5774 13.7231 26.6828 13.5123 26.5774Z" fill="#F5F5F5"/>\n        <path d="M30.6883 17.1288L10.7374 19.3768C9.89442 19.4822 9.15679 18.8851 9.08654 18.0421L7.68155 5.95913C7.57617 5.11613 8.1733 4.37851 9.01629 4.30826L28.9672 2.06027C29.8102 1.9549 30.5478 2.55202 30.618 3.39501L31.9879 15.4779C32.0933 16.2858 31.4962 17.0234 30.6883 17.1288Z" fill="url(#paint0_linear)"/>\n        <path d="M18.9397 6.38456C17.6671 6.53071 16.754 7.68079 16.9001 8.95334C17.0463 10.2259 18.1964 11.139 19.4689 10.9929C20.7415 10.8467 21.6546 9.69664 21.5085 8.42409C21.3623 7.15154 20.2122 6.23841 18.9397 6.38456ZM16.6599 11.8991C16.0231 11.9723 15.5615 12.5429 15.6351 13.1841C15.747 14.1583 16.3111 14.8377 17.1161 15.2298C17.9087 15.6159 18.9298 15.7239 19.9982 15.6012C21.0666 15.4785 22.0366 15.1418 22.721 14.5861C23.4162 14.0217 23.8115 13.2321 23.6997 12.2579C23.6266 11.6217 23.0515 11.1651 22.4153 11.2381L16.6599 11.8991Z" fill="white"/>\n        <path d="M0.358427 6.65309C0.237604 6.66481 0.188649 6.50166 0.295969 6.44493C1.26242 5.93449 1.82453 4.89045 1.71889 3.80203C1.70716 3.68121 1.87032 3.63226 1.92704 3.73958C2.43749 4.70603 3.48153 5.26813 4.56994 5.1625C4.69077 5.15077 4.73972 5.31392 4.6324 5.37065C3.66595 5.8811 3.10384 6.92514 3.20948 8.01355C3.22121 8.13437 3.05805 8.18333 3.00133 8.07601C2.49088 7.10956 1.44684 6.54745 0.358427 6.65309Z" fill="#FFBE00"/>\n        <path d="M24.8737 25.806C24.707 25.8222 24.6395 25.5972 24.7875 25.5189C26.1205 24.8149 26.8958 23.3749 26.7501 21.8737C26.734 21.707 26.959 21.6395 27.0372 21.7875C27.7413 23.1205 29.1813 23.8958 30.6825 23.7501C30.8492 23.7339 30.9167 23.959 30.7687 24.0372C29.4357 24.7413 28.6604 26.1813 28.8061 27.6825C28.8222 27.8491 28.5972 27.9167 28.519 27.7686C27.8149 26.4356 26.3749 25.6603 24.8737 25.806Z" fill="#FFBE00"/>\n        <defs>\n        <linearGradient id="paint0_linear" x1="33.9999" y1="1.99994" x2="4.33482" y2="0.260614" gradientUnits="userSpaceOnUse">\n        <stop stop-color="#FE7002"/>\n        <stop offset="0.9935" stop-color="#FFBE00"/>\n        </linearGradient>\n        </defs>\n        </svg>'])))}},{key:"getChevron",value:function(){return A.Z.getTrustedHTML(JA||(JA=(0,E.Z)(['<svg width="20" height="20" viewBox="0 0 20 20" class="c011145" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"><path d="M15.85 7.65c.2.2.2.5 0 .7l-5.46 5.49a.55.55 0 01-.78 0L4.15 8.35a.5.5 0 01.7-.7L10 12.8l5.15-5.16c.2-.2.5-.2.7 0z"></path></svg>'])))}}]),t}();!function(t){t.DefaultPayment="defaultPaymentGuid",t.DefaultProfile="defaultProfileGuid",t.BNPLProvider="BNPLProvider",t.TotalAmountDialogDataJson="totalAmountDialogDataJson"}(QA||(QA={}));var lT=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"Guid",void 0),(0,I.Z)(this,"ExpMonth",void 0),(0,I.Z)(this,"ExpYear",void 0),(0,I.Z)(this,"FullName",void 0),(0,I.Z)(this,"CardNumber",void 0),(0,I.Z)(this,"CardType",void 0),(0,I.Z)(this,"CardCVC",void 0)}return(0,l.Z)(t,[{key:"UpdateFields",value:function(t,e,i,n,o,a,r){this.Guid=t,this.ExpMonth=e,this.ExpYear=i,this.FullName=n,this.CardNumber=o,this.CardType=a,this.CardCVC=null!=r?r:""}}],[{key:"CreateFromCheckoutData",value:function(e){var i=e.card,n=e.cardholder,o=a.sj[i.brand.toUpperCase().trim()],r=new t;return r.UpdateFields("",i.expirationMonth,i.expirationYear,n.name,i.number,o,i.cvc),r}},{key:"CreateFromSettingsData",value:function(e){var i=new t;return i.UpdateFields(e.Guid,e.ExpMonth,e.ExpYear,e.FullName,e.CardNumber,e.CardType),i}}]),t}(),cT=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"Guid",void 0),(0,I.Z)(this,"Email",void 0),(0,I.Z)(this,"FirstName",void 0),(0,I.Z)(this,"MiddleName",void 0),(0,I.Z)(this,"LastName",void 0),(0,I.Z)(this,"FullName",void 0),(0,I.Z)(this,"AddressLines",void 0),(0,I.Z)(this,"City",void 0),(0,I.Z)(this,"State",void 0),(0,I.Z)(this,"Country",void 0),(0,I.Z)(this,"Zip",void 0),(0,I.Z)(this,"PhoneNumber",void 0),(0,I.Z)(this,"Honorific",void 0)}return(0,l.Z)(t,[{key:"UpdateFields",value:function(t,e,i,n,o,a,r,s,l,c,u,d,h){this.Guid=h,this.Email=t,this.FirstName=e,this.MiddleName=i,this.LastName=n,this.FullName=o,this.AddressLines=a,this.City=r,this.State=s,this.Country=l,this.Zip=c,this.PhoneNumber=u,this.Honorific=d}}],[{key:"CreateFromCheckoutData",value:function(e){var i=e.cardholder,n=new t;return n.UpdateFields("",i.firstName,i.middleName,i.lastName,i.name,i.address1+"\n"+i.address2,i.city,i.state,i.county,i.postalCode,"","",""),n}},{key:"CreateFromSettingsData",value:function(e){var i=new t;return i.UpdateFields(e.Emails[0],e.FirstName,e.MiddleName,e.LastName,e.FullName,e.AddressLines,e.City,e.State,e.Country,e.Zip,e.PhoneNumbers[0],e.Honorific,e.Guid),i}}]),t}(),uT=(0,l.Z)((function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"amount",void 0),(0,I.Z)(this,"lowerThreshold",void 0),(0,I.Z)(this,"period",void 0),(0,I.Z)(this,"upperThreshold",void 0),this.amount=e.amount,this.lowerThreshold=e.lowerThreshold,this.period=e.period,this.upperThreshold=e.upperThreshold})),dT=uT,hT=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"Profile",void 0),(0,I.Z)(this,"Payment",void 0),(0,I.Z)(this,"paymentGuid",void 0),(0,I.Z)(this,"profileGuid",void 0),(0,I.Z)(this,"SkipAutoApply",void 0),(0,I.Z)(this,"IsSkipPayment",void 0),(0,I.Z)(this,"IsSkipProfile",void 0),(0,I.Z)(this,"BNPLProvider",void 0),(0,I.Z)(this,"IsZipCard",void 0),(0,I.Z)(this,"TotalAmountDialogData",void 0)}return(0,l.Z)(t,[{key:"ToString",value:function(){return JSON.stringify(this)}}]),t}();function pT(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return fT(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return fT(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function fT(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function gT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var mT=function(t){(0,O.Z)(i,t);var e=gT(i);function i(t,n,o){var r,l,c;return(0,s.Z)(this,i),c=e.call(this),(0,I.Z)((0,R.Z)(c),"assets",void 0),(0,I.Z)((0,R.Z)(c),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(c),"stateManagement",void 0),(0,I.Z)((0,R.Z)(c),"logModule",void 0),(0,I.Z)((0,R.Z)(c),"flyoutData",void 0),(0,I.Z)((0,R.Z)(c),"utilities",void 0),(0,I.Z)((0,R.Z)(c),"isZipPayVirtualCardEnabled",void 0),(0,I.Z)((0,R.Z)(c),"isAutofillPaymentEnabled",void 0),(0,I.Z)((0,R.Z)(c),"cradTypeNameMap",void 0),(0,I.Z)((0,R.Z)(c),"shouldRenderOtherPaymentOptions",void 0),(0,I.Z)((0,R.Z)(c),"otherPaymentOptions",void 0),(0,I.Z)((0,R.Z)(c),"autoFillClickHandler",void 0),c.pageHandlerModule=o.pageHandlerModule,c.logModule=o.logModule,c.stateManagement=t,c.flyoutData=n,c.utilities=o.viewModulesUtilities,c.assets=new sT,c.autoFillClickHandler=c.autoFillHandler.bind((0,R.Z)(c)),c.isZipPayVirtualCardEnabled=c.flyoutData.experimentData.isExperimentActive(xt.H.showPaymentOptions),c.isAutofillPaymentEnabled=!0,c.otherPaymentOptions=null!==(r=c.flyoutData.dataStoreModule.PaymentOptionsData)&&void 0!==r?r:[],c.shouldRenderOtherPaymentOptions=c.isZipPayVirtualCardEnabled&&c.otherPaymentOptions.length>0,c.cradTypeNameMap=(l={},(0,I.Z)(l,a.sj.MASTERCARD,c.flyoutData.strings.masterCardPayment),(0,I.Z)(l,a.sj.VISA,c.flyoutData.strings.visaPayment),(0,I.Z)(l,a.sj.AMEX,c.flyoutData.strings.amexPayment),(0,I.Z)(l,a.sj.DISCOVER,c.flyoutData.strings.discoverPayment),(0,I.Z)(l,a.sj.ZIP,c.flyoutData.strings.zipPayPayment),l),c}return(0,l.Z)(i,[{key:"GetModuleName",value:function(){return D.GX.CHECKOUTAUTOFILL}},{key:"ShouldRenderModule",value:function(){var t,e,i=null!==(t=null===(e=this.flyoutData.dataStoreModule.CheckoutUserData)||void 0===e?void 0:e.shouldRenderCheckoutAutofill)&&void 0!==t&&t;return Promise.resolve(i)}},{key:"renderModule",value:function(){var t=this;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getUXRefreshStyles());var e=document.createElement("DIV");e.style.paddingLeft="16px",e.style.paddingRight="16px";var i=this.createAutofillSection(this.isZipPayVirtualCardEnabled?this.flyoutData.strings.checkoutAddressSectionTitle:this.flyoutData.strings.checkoutSectionTitle,"checkoutAutofillSection"),n=this.createAutofillSection(this.flyoutData.strings.checkoutPaymentSectionTitle,"paymentAutofillSection");if(!this.stateManagement.getState(Ia.IY.isAutoApplyVisible)){var r=new o.Z(a.xu.ExpressCheckout);this.LogInfoEvent(a.R.EdgeFlyoutStatus,"",r),setTimeout((function(){Tt.SO.queueUpdate((function(){var t=document.querySelector("#couponSection");t&&(t.accordion=!0,t.expanded=!1)}))}),10)}var s=this.utilities.createElement("DIV");s.id="divCheckoutWrapper";var l=this.utilities.createElement("DIV");l.id="divAddressSection";var c=this.utilities.createElement("P");c.className="shipttl",c.textContent=this.flyoutData.strings.checkoutShippingAddress;var u=document.createElement("fluent-listbox");u.setAttribute("ariaLabel",this.flyoutData.strings.checkoutShippingAddress),u.className="listbox",u.id="addressListbox",u.addEventListener("keydown",(function(t){"Escape"!==t.key&&"Enter"!==t.key||(u&&u.classList.toggle("show"),h&&(h.classList.toggle("shadow"),h.focus()),t.preventDefault())}));var d=this.utilities.createElement("P");d.id="defaultshippingAddress";var h=this.utilities.createElement("a",{style:"cursor: pointer;\n                height: 20px;\n                width: 20px;\n                position: relative;\n                background-position: center;\n                top: 11px;\n                right: 14px;"});h.setAttribute("href","#"),h.setAttribute("role","button"),h.setAttribute("aria-haspopup","listbox"),h.setAttribute("aria-label",this.flyoutData.strings.checkoutShippingAddress),h.id="divAddressButton",h.innerHTML=this.assets.getChevron();var p=this.flyoutData.dataStoreModule.CheckoutUserData;if(p&&p.Profiles&&p.Profiles.length>0){var f=vt(QA.DefaultProfile);if(f){var g=this.getAddressInfoByGuid(f);g&&(d.innerText=this.formAddress(g))}if(!d.innerText){var m=null==p?void 0:p.Profiles[0].AddressLines,v=(null==p?void 0:p.Profiles[0].City)+", "+(null==p?void 0:p.Profiles[0].State)+", "+(null==p?void 0:p.Profiles[0].Country),y="ZIP "+(null==p?void 0:p.Profiles[0].Zip);d.innerText=(null==p?void 0:p.Profiles[0].FullName)+", "+m+", "+v+", "+y,Ct(QA.DefaultProfile),yt(QA.DefaultProfile,null==p?void 0:p.Profiles[0].Guid),f=null==p?void 0:p.Profiles[0].Guid}var C=p.Profiles.find((function(t){return t.Guid===f}));if(C){var b=this.GetAddressOption(C,d);u.appendChild(b),u.addEventListener("keydown",(function(e){if("Enter"===e.key){var i=u.querySelector(".selected");i&&(d.innerText=i.innerText,Ct(QA.DefaultProfile),yt(QA.DefaultProfile,C.Guid),t.resizeIframe())}}))}var S,x=pT(p.Profiles);try{var E=function(){var e=S.value;if(e){if(e.Guid===f)return"continue";var i=t.GetAddressOption(e,d);u.appendChild(i)}u.addEventListener("keydown",(function(i){if("Enter"===i.key){var n=u.querySelector(".selected");n&&(d.innerText=n.innerText,Ct(QA.DefaultProfile),yt(QA.DefaultProfile,e.Guid),t.resizeIframe())}}))};for(x.s();!(S=x.n()).done;)E()}catch(t){x.e(t)}finally{x.f()}}h.setAttribute("aria-describedby",d.id),h.addEventListener("click",(function(t){u&&(u.classList.toggle("show"),h.classList.toggle("shadow"),"true"===h.getAttribute("aria-expanded")?h.setAttribute("aria-expanded","false"):h.setAttribute("aria-expanded","true")),t.stopPropagation()})),h.addEventListener("keydown",(function(t){"Enter"===t.key&&(u&&(u.classList.toggle("show"),h.classList.toggle("shadow"),"true"===h.getAttribute("aria-expanded")?h.setAttribute("aria-expanded","false"):h.setAttribute("aria-expanded","true"),u.focus()),t.preventDefault()),"Esc"===t.key&&"true"===h.getAttribute("aria-expanded")&&h.setAttribute("aria-expanded","false"),t.stopPropagation()})),l.appendChild(c),l.appendChild(h),l.appendChild(u),l.appendChild(d);var A=this.utilities.createElement("DIV");A.id="divPaymentSection";var T=this.utilities.createElement("P");T.textContent=this.flyoutData.strings.checkoutPaymentInfo,T.className="payttl";var I=document.createElement("fluent-listbox");I.className="listbox",I.id="paymentListbox",I.ariaLabel=this.flyoutData.strings.checkoutPaymentInfo,I.addEventListener("keydown",(function(t){"Escape"!==t.key&&"Enter"!==t.key||(I&&I.classList.toggle("show"),M&&(M.classList.toggle("shadow"),M.focus()),t.preventDefault())}));var k=this.utilities.createElement("DIV",{style:"display:block;\n            margin-left: 14px;"}),w=this.utilities.createElement("P",{style:"display:inline-block;\n            margin: 0;\n            font-size: 14px;\n            line-height: 20px;"});w.id="defaultCardInfo";var R=this.utilities.createElement("IMG",{style:"display: inline-block;\n            margin-right: 10px;\n            position: relative;\n            top: 1px;"});R.setAttribute("aria-hidden","true");var O="";k.appendChild(R),k.appendChild(w),k.id="divCard";var P="height: 20px;\n            width: 20px;\n            background-position: center;\n            position: relative;\n            top: 11px;\n            right: 14px;",M=this.utilities.createElement("a",{style:P});if(M.innerHTML=this.assets.getChevron(),M.setAttribute("href","#"),M.setAttribute("role","button"),M.setAttribute("aria-haspopup","listbox"),M.setAttribute("aria-label",this.flyoutData.strings.checkoutPaymentInfo),M.id="divPaymentButton",p&&p.Payments&&p.Payments.length>0){var N=vt(QA.DefaultPayment);if(N){var L=this.getPaymentInfoByGuid(N);L&&(w.innerText=this.formCardInfo(L),R.src=this.GetSrcByCardType(L.CardType),O=L.CardType)}if(!w.innerText){var _="•••• "+p.Payments[0].MaskedCardNumber;R.src=this.GetSrcByCardType(p.Payments[0].CardType),this.PopulateCardNumberhtml(w,{cardNumber:_,expDate:p.Payments[0].ExpMonth+"/"+p.Payments[0].ExpYear.substr(2)}),O=p.Payments[0].CardType,Ct(QA.DefaultPayment),yt(QA.DefaultPayment,p.Payments[0].Guid),N=p.Payments[0].Guid}var F=p.Payments.find((function(t){return t.Guid===N}));if(F){var H=this.GetPaymentOption(F,w,R);I.appendChild(H),I.addEventListener("keydown",(function(e){if("Enter"===e.key){var i=I.querySelector(".selected");i&&t.paymentListboxOptionClickHandler(w,F,i,R)}}))}var Z,B=pT(p.Payments);try{var U=function(){var e=Z.value;if(e){if(e.Guid===N)return"continue";var i=t.GetPaymentOption(e,w,R);I.appendChild(i),I.addEventListener("keydown",(function(i){if("Enter"===i.key){var n=I.querySelector(".selected");n&&t.paymentListboxOptionClickHandler(w,e,n,R)}}))}};for(B.s();!(Z=B.n()).done;)U()}catch(t){B.e(t)}finally{B.f()}}M.setAttribute("aria-describedby",w.id),M.addEventListener("click",(function(t){I&&(I.classList.toggle("show"),M.classList.toggle("shadow"),"true"===M.getAttribute("aria-expanded")?M.setAttribute("aria-expanded","false"):M.setAttribute("aria-expanded","true")),t.stopPropagation()})),M.addEventListener("keydown",(function(t){"Enter"===t.key&&(I&&(I.classList.toggle("show"),M.classList.toggle("shadow"),"true"===M.getAttribute("aria-expanded")?M.setAttribute("aria-expanded","false"):M.setAttribute("aria-expanded","true"),I.focus()),t.preventDefault()),"Esc"===t.key&&"true"===M.getAttribute("aria-expanded")&&M.setAttribute("aria-expanded","false"),t.stopPropagation()})),window.onclick=function(t){if(!t.target.matches("#divAddressButton")&&!t.target.matches("#divPaymentButton")){var e,i=document.getElementsByClassName("listbox");for(e=0;e<i.length;e++){var n=i[e];n.classList.contains("show")&&n.classList.remove("show")}M.classList.contains("shadow")&&M.classList.remove("shadow"),h.classList.contains("shadow")&&h.classList.remove("shadow")}if(t.target.matches("#divAddressButton")){var o=document.getElementById("paymentListbox");o&&o.classList.contains("show")&&o.classList.remove("show"),M.classList.contains("shadow")&&M.classList.remove("shadow")}if(t.target.matches("#divPaymentButton")){var a=document.getElementById("addressListbox");a&&a.classList.contains("show")&&a.classList.remove("show"),h.classList.contains("shadow")&&h.classList.remove("shadow")}};var G=this.utilities.createElement("P");if(G.textContent=this.flyoutData.strings.checkoutSameBilling,G.className="txtExtraSmall billSameAsShipAddressCheckbox",A.appendChild(T),this.shouldRenderOtherPaymentOptions&&this.otherPaymentOptions){var V,$=document.createElement("fluent-radio-group");$.className="paymentInfoRadioGroup",$.id="paymentRadioGroup",$.style.marginLeft="20px",$.setAttribute("aria-label",this.flyoutData.strings.checkoutPaymentInfo),$.value=D.M$.CARD,$.appendChild(this.getPaymentOptionRadioBanner(D.M$.CARD,{paymentButton:M,paymentListbox:I})),$.appendChild(this.getPaymentOptionRadio(D.M$.CARD,{defaultCardDiv:k,defaultCardInfo:w,defaultCardType:O,paymentButton:M,paymentButtonStyle:P,paymentListbox:I}));var W,z=new Map,K=pT(this.otherPaymentOptions);try{for(K.s();!(W=K.n()).done;){var Y,j,X,q,J=W.value;$.appendChild(this.getPaymentOptionRadioBanner(J.providerName,{otherPaymentOption:J})),$.appendChild(this.getPaymentOptionRadio(J.providerName,{otherPaymentOption:J})),z.set(J.providerName,new dT({amount:null!==(Y=J.amount)&&void 0!==Y?Y:"",lowerThreshold:null!==(j=J.lowerThreshold)&&void 0!==j?j:"",period:null!==(X=J.period)&&void 0!==X?X:"",upperThreshold:null!==(q=J.upperThreshold)&&void 0!==q?q:""}))}}catch(t){K.e(t)}finally{K.f()}A.appendChild(I),A.appendChild($);var Q=null===(V=this.otherPaymentOptions)||void 0===V?void 0:V[0];if(null!=Q&&Q.managePaymentLabel&&null!=Q&&Q.managePaymentLinkText){var tt=this.utilities.createElement("P",{style:"display :block;\n                    margin-left: 50px;\n                    font-size: 10px;\n                    line-height: 14px;\n                    min-width: 240px;"}),et=this.utilities.createElement("fluent-anchor",{style:"float: none;\n                    font-size: 10px;"});tt.id="zipCardTurnOff",et.id="turnOffZipLink",et.setAttribute("href","#"),et.setAttribute("appearance","hypertext"),et.textContent=null==Q?void 0:Q.managePaymentLinkText,this.utilities.populateSingleChildHtml(tt,null==Q?void 0:Q.managePaymentLabel,et),et.addEventListener("click",(function(){t.navigateToTurnOffZipURL()})),et.addEventListener("keydown",(function(e){"Enter"===e.key&&t.navigateToTurnOffZipURL()})),A.appendChild(tt)}var it=this.utilities.createElement("p",{style:"display :block;\n                margin-left: 50px;\n                margin-top: 4px;\n                font-size: 10px;\n                line-height: 14px;\n                min-width: 240px;"});it.id="msZipDescription",it.textContent=this.flyoutData.strings.msZipDescription,A.appendChild(it),$.onchange=function(){if(G.style.display="block",G.setAttribute("aria-hidden","false"),it.style.paddingBottom="0px",Ct(QA.BNPLProvider),$.value===D.M$.ZIP){yt(QA.BNPLProvider,$.value);var e=JSON.stringify(z.get($.value));yt(QA.TotalAmountDialogDataJson,e),G.setAttribute("aria-hidden","true"),G.style.display="none",it.style.paddingBottom="16px",t.pageHandlerModule.RecordAsUserAction(Ca.bS.EXPRESS_CHECKOUT_ZIP_OPTION_SELECTED)}t.setButtonNameAndAction({button:document.querySelector(".checkoutButton")}),t.resizeIframe()}}else Ct(QA.BNPLProvider),A.appendChild(M),A.appendChild(I),A.appendChild(k);if(A.appendChild(G),s.appendChild(l),this.isZipPayVirtualCardEnabled){var nt=document.createElement("fluent-switch");nt.className="switchButton",nt.checked=!0,nt.setAttribute("role","switch"),nt.setAttribute("aria-label",this.flyoutData.strings.checkoutPaymentSectionTitle),nt.addEventListener("change",(function(e){t.setAutofillPaymentStatus(e.target.checked);var i=document.getElementById("turnOffZipLink");i&&(i.style.pointerEvents=e.target.checked?"unset":"none")})),nt.addEventListener("keydown",(function(t){"Enter"===t.key&&(nt.checked=!nt.checked)}));var ot=n.querySelector(".divSectionTitle");ot&&ot.appendChild(nt),n.appendChild(A),A.classList.add("divPaymentSectionWithZipVirtualCard")}else s.appendChild(A);i.appendChild(s),this.isZipPayVirtualCardEnabled?(e.appendChild(i),e.appendChild(n)):(i.style.paddingLeft="16px",i.style.paddingRight="16px");var at=this.isZipPayVirtualCardEnabled?e:i,rt=this.CreateModule(at,D.H7.CHECKOUTAUTOFILL,D.GX.CHECKOUTAUTOFILL,D.$k.CONTEXTUAL);return this.isZipPayVirtualCardEnabled&&(this.pageHandlerModule.RecordAsUserAction(Ca.bS.EXPRESS_CHECKOUT_SHOWN_IN_ZIP_FEATURE),this.shouldRenderOtherPaymentOptions&&this.pageHandlerModule.RecordAsUserAction(Ca.bS.EXPRESS_CHECKOUT_ZIP_OPTION_SHOWN)),Promise.resolve(rt)}},{key:"GetSrcByCardType",value:function(t){return t===a.sj.MASTERCARD?"".concat(this.flyoutData.common.resourcesEndpoint,"expressCheckout/smallIcons/mastercard.png"):t===a.sj.VISA?"".concat(this.flyoutData.common.resourcesEndpoint,"expressCheckout/smallIcons/visa.png"):t===a.sj.AMEX?"".concat(this.flyoutData.common.resourcesEndpoint,"expressCheckout/smallIcons/amex.png"):t===a.sj.DISCOVER?"".concat(this.flyoutData.common.resourcesEndpoint,"expressCheckout/smallIcons/discover.png"):t===a.sj.ZIP?"".concat(this.flyoutData.common.resourcesEndpoint,"expressCheckout/smallIcons/zip.png"):"".concat(this.flyoutData.common.resourcesEndpoint,"expressCheckout/smallIcons/default.png")}},{key:"GetNameByCardType",value:function(t){return this.cradTypeNameMap[t]||""}},{key:"PostProcessing",value:function(t,e,i){var n;(null===(n=this.flyoutData.dataStoreModule.CheckoutUserData)||void 0===n?void 0:n.shouldRenderCheckoutAutofill)&&this.createExpressCheckoutButton()}},{key:"createExpressCheckoutButton",value:function(){var t=this.utilities.createBaseActionButton();t.appearance="accent",t.style.fontSize="16px",t.style.borderRadius="4px",t.style.marginBottom="2px",t.className+=" actionsButton checkoutButton";var e=this.utilities.createElement("DIV");e.slot="footer",e.appendChild(t),this.setButtonNameAndAction({button:t,buttonType:D.ul.AUTO_FILL}),this.flyoutData.common.shopping.prepend(e)}},{key:"populateMainHeader",value:function(){var t=this.utilities.createElement("H2");t.className="txtLarge",t.style.textAlign="center",t.style.fontWeight="500",t.textContent=this.flyoutData.strings.checkoutFillOnly,t.slot="header-content",t.setAttribute("heading-level","2"),this.flyoutData.common.shopping.appendChild(t)}},{key:"getUserChoiceConfiguration",value:function(t){var e,i=new hT,n=this.isAutofillPaymentEnabled&&this.BNPLProvider();i.SkipAutoApply=t,i.BNPLProvider=n||null,i.IsZipCard=n===D.M$.ZIP,i.IsSkipPayment=Boolean(n)||!this.isAutofillPaymentEnabled;var o=null!==(e=vt(QA.TotalAmountDialogDataJson))&&void 0!==e?e:"{}";if(i.TotalAmountDialogData=new dT(JSON.parse(o)),this.flyoutData.dataLoader.IsServerData()){if(!i.IsSkipPayment){var a=vt(QA.DefaultPayment);a&&(i.paymentGuid=a)}var r=vt(QA.DefaultProfile);return r&&(i.profileGuid=r),i}if(!i.IsSkipPayment){var s=vt(QA.DefaultPayment);if(s){var l=this.getPaymentInfoByGuid(s);if(l){var c=lT.CreateFromSettingsData(l);i.Payment=c}}}var u=vt(QA.DefaultProfile);if(u){var d=this.getAddressInfoByGuid(u);if(d){var h=cT.CreateFromSettingsData(d);i.Profile=h}}return i}},{key:"setButtonNameAndAction",value:function(t){var e=t.button,i=t.buttonType,n=void 0===i?"":i;if(e&&(""===n?n=null==e?void 0:e.getAttribute("button-type"):e.setAttribute("button-type",n),e.removeEventListener("click",this.autoFillClickHandler),n===D.ul.AUTO_FILL))e.textContent=this.BNPLProvider()&&this.isAutofillPaymentEnabled?this.utilities.replaceValueInKey("checkoutButtonWithoutAAForOtherPayment",this.flyoutData.strings.checkoutButtonWithoutAAForOtherPayment,this.flyoutData.strings.zipPayPayment):this.flyoutData.strings.checkoutButtonWithoutAA,e.addEventListener("click",this.autoFillClickHandler)}},{key:"paymentListboxOptionClickHandler",value:function(t,e,i,n){if(t.innerText=i.innerText,n.src=this.GetSrcByCardType(e.CardType),Ct(QA.DefaultPayment),yt(QA.DefaultPayment,e.Guid),this.shouldRenderOtherPaymentOptions){var o=document.querySelector(".cardInfoRadioOption"),a=document.querySelector(".paymentInfoRadioGroup");o&&a&&(a.value!==D.M$.CARD&&o.click(),this.setRadioAriaLabel(D.M$.CARD,e.CardType,i.innerText,o))}}},{key:"getPaymentOptionRadioBanner",value:function(t,e){var i=this,n=this.utilities.createElement("DIV",{style:"width: 100%; font-size: 12px; margin-bottom: 4px; display: flex; justify-content: space-between;"});switch(n.classList.add("txtMedium","radio-banner"),t){case D.M$.CARD:n.innerText=this.flyoutData.strings.cardPaymentOptionBanner;var o=e||{},a=o.paymentButton,r=o.paymentListbox;if(a&&r){var s=this.utilities.createElement("DIV",{style:"margin-right: 14px;"});r.style.marginTop="30px",r.setAttribute("aria-label",this.flyoutData.strings.checkoutCreditOrDebitCardDropDown),a.setAttribute("aria-label",this.flyoutData.strings.checkoutCreditOrDebitCardDropDown),s.appendChild(a),n.appendChild(s)}break;case D.M$.ZIP:n.style.marginTop="4px",n.innerText=this.flyoutData.strings.otherPaymentMethodBanner;var l=(e||{}).otherPaymentOption;if(l){var c=document.createElement("fluent-anchor");c.id="learnMoreAboutZip",c.setAttribute("href","#"),c.setAttribute("style","font-size : 12px;\n                        float: none;\n                        margin-right: auto;\n                        margin-left: 10px;"),c.setAttribute("appearance","hypertext"),c.setAttribute("aria-label",this.utilities.replaceValueInKey("learnMoreLinkAriaLabel",this.flyoutData.strings.learnMoreLinkAriaLabel,this.flyoutData.strings.buyNowPayLater)),c.className+=" txtSmall",c.textContent=null==l?void 0:l.helpInformation,c.addEventListener("click",(function(){i.navigateToBNPLLearnMore()})),c.addEventListener("keydown",(function(t){"Enter"===t.key&&i.navigateToBNPLLearnMore()})),n.appendChild(c)}}return n}},{key:"navigateToBNPLLearnMore",value:function(){this.pageHandlerModule.RecordAsUserAction(Ca.bS.EXPRESS_CHECKOUT_ZIP_LEARN_MORE_LINK_CLICKED),this.pageHandlerModule.NavigateToBNPLLearnMore()}},{key:"getPaymentOptionRadio",value:function(t,e){var i=document.createElement("fluent-radio");switch(i.value=t,t){case D.M$.CARD:var n=e||{},o=n.defaultCardDiv,r=n.defaultCardType,s=n.defaultCardInfo,l=n.paymentButton,c=n.paymentButtonStyle;if(o&&s&&l&&c){var u=this.utilities.createElement("DIV",{style:"display:flex;\n                        width: 260px;"});l.setAttribute("style",c),l.style.position="static",o.style.marginLeft="0px",u.appendChild(o),u.setAttribute("aria-hidden","true"),i.className="cardInfoRadioOption",this.setRadioAriaLabel(t,null!=r?r:"",s.innerText,i),i.appendChild(u)}break;case D.M$.ZIP:var d=(e||{}).otherPaymentOption;if(d){var h=this.utilities.createElement("DIV"),p=this.utilities.createElement("IMG",{style:"display: inline;\n                        margin-right: 10px;\n                        vertical-align: bottom;\n                        position: relative;\n                        float: none;\n                        height: 20px"}),f=this.utilities.createElement("span",{style:"display:inline;\n                        margin: 0;\n                        font-size: 14px;\n                        line-height: 20px;"});p.src=this.GetSrcByCardType("Z"),f.textContent=null==d?void 0:d.projectedMonthlyPaymentDetails,f.classList.add("zipCardInfo"),h.appendChild(p),h.appendChild(f),h.setAttribute("aria-hidden","true"),i.className="zipRadioOption",this.setRadioAriaLabel(t,a.sj.ZIP,f.textContent,i),i.appendChild(h)}}return i}},{key:"navigateToTurnOffZipURL",value:function(){this.pageHandlerModule.RecordAsUserAction(Ca.bS.EXPRESS_CHECKOUT_ZIP_PREFERENCE_LINK_CLICKED),this.pageHandlerModule.NavigateToTurnOffZip()}},{key:"setRadioAriaLabel",value:function(t,e,i,n){var o=this.GetNameByCardType(e)+" "+i;switch(t){case D.M$.CARD:n=n||document.querySelector(".cardInfoRadioOption");case D.M$.ZIP:n=n||document.querySelector(".zipRadioOption")}n&&n.setAttribute("aria-label",o)}},{key:"PopulateCardNumberhtml",value:function(t,e){var i=document.createElement("span");i.style.fontWeight="600",i.textContent=e.cardNumber;var n=document.createElement("span");n.textContent=" ".concat(this.flyoutData.strings.checkoutValidTill," ");var o=document.createElement("span");o.style.fontWeight="600",o.textContent=e.expDate;var a=window.trustedTypes.emptyHTML;t.innerHTML=a,t.appendChild(i).appendChild(n).appendChild(o)}},{key:"formAddress",value:function(t){var e=t.AddressLines,i=t.City+", "+t.State+", "+t.Country,n="".concat(this.flyoutData.strings.checkoutZip," ").concat(t.Zip);return t.FullName+", "+e+", "+i+", "+n}},{key:"formCardInfo",value:function(t){return"•••• "+t.MaskedCardNumber+" ".concat(this.flyoutData.strings.checkoutValidTill," ")+t.ExpMonth+"/"+t.ExpYear.substr(2)}},{key:"getPaymentInfoByGuid",value:function(t){var e=this.flyoutData.dataStoreModule.CheckoutUserData;if(e&&e.Payments){var i,n=pT(e.Payments);try{for(n.s();!(i=n.n()).done;){var o=i.value;if(o&&o.Guid===t)return o}}catch(t){n.e(t)}finally{n.f()}}}},{key:"getAddressInfoByGuid",value:function(t){var e=this.flyoutData.dataStoreModule.CheckoutUserData;if(e&&e.Profiles){var i,n=pT(e.Profiles);try{for(n.s();!(i=n.n()).done;){var o=i.value;if(o&&o.Guid===t)return o}}catch(t){n.e(t)}finally{n.f()}}}},{key:"getAutoFillHandlerMetrics",value:function(){var t,e;return this.BNPLProvider()&&this.isAutofillPaymentEnabled?(t=Ca.bS.EXPRESS_CHECKOUT_FORZIP,e=a.$S.ECWithBNPL):!this.BNPLProvider()&&this.isAutofillPaymentEnabled?(t=Ca.bS.EXPRESS_CHECKOUT,e=a.$S.ExpressCheckout):(t=Ca.bS.EXPRESS_CHECKOUT_WITHOUT_PAYMENT,e=a.$S.ECWithoutPayment),{userAction:t,buttonName:e}}},{key:"autoFillHandler",value:function(){var t=this.getAutoFillHandlerMetrics(),e=t.userAction,i=t.buttonName;this.pageHandlerModule.RecordAsUserAction(e);var n=new na.Z(i);this.LogInfoEvent(a.R.ButtonClick,"",n),this.pageHandlerModule.ApplyAllCouponsWithExpressCheckout(this.getUserChoiceConfiguration(!0))}},{key:"BNPLProvider",value:function(){return vt(QA.BNPLProvider)}},{key:"LogInfoEvent",value:function(t,e,i){this.logModule.LogInfoEvent(t,e,i,ya.g.CouponImpressionId)}},{key:"GetAddressOption",value:function(t,e){var i=this,n=t.AddressLines,o=t.City+", "+t.State+", "+t.Country,a="ZIP "+t.Zip,r=this.utilities.createElement("P");r.innerText=t.FullName+", "+n+", "+o+", "+a;var s=document.createElement("fluent-option");return s.innerText=r.innerText,s.classList.add("option"),s.addEventListener("click",(function(){e.innerText=s.innerText,Ct(QA.DefaultProfile),yt(QA.DefaultProfile,t.Guid),i.resizeIframe()})),s}},{key:"GetPaymentOption",value:function(t,e,i){var n=this,o="•••• "+t.MaskedCardNumber,a=this.utilities.createElement("P");this.PopulateCardNumberhtml(a,{cardNumber:o,expDate:t.ExpMonth+"/"+t.ExpYear.substr(2)});var r=document.createElement("fluent-option");if(r.innerText=a.innerText,r.className="option",r.style.height="32px",this.isZipPayVirtualCardEnabled){var s=this.utilities.createElement("IMG",{style:"display: inline-block;\n                margin-right: 10px;\n                position: relative;\n                top: 1px;"});s.src=this.GetSrcByCardType(t.CardType),s.setAttribute("aria-hidden","true"),r.appendChild(s),r.setAttribute("aria-label",this.GetNameByCardType(t.CardType)+a.innerText)}return r.addEventListener("click",(function(){return n.paymentListboxOptionClickHandler(e,t,r,i)})),r}},{key:"resizeIframe",value:function(){if(this.flyoutData.dataLoader.IsServerData()){var t=document.querySelector("#divContentWrapper");Tt.SO.queueUpdate((function(){parent.postMessage({height:t.offsetHeight,type:"resize_iframe"},"edge://shopping")}))}}},{key:"createAutofillSection",value:function(t,e){var i;i=this.utilities.createElement("DIV");var n=this.utilities.createElement("DIV");if(n.className="divSectionTitle",this.isZipPayVirtualCardEnabled)n.setAttribute("style","display: flex; align-items: center; justify-content: space-between;");else{n.setAttribute("style","display: flex; flex-direction: row; justify-content: center; align-items: center; column-gap: 4px;");var o=this.utilities.createElement("IMG");o.setAttribute("aria-hidden","true"),o.src=this.flyoutData.common.resourcesEndpoint+"expressCheckout/smallIcons/card.png",n.appendChild(o)}var a=this.utilities.createElement("SPAN");return a.textContent=t,a.className="txtSmall",a.setAttribute("heading-level","3"),n.appendChild(a),i.appendChild(n),i.id=e,i.className="txtMedium",i}},{key:"setAutofillPaymentStatus",value:function(t){var e=document.querySelector("#paymentRadioGroup"),i=document.querySelector("#divPaymentSection"),n=document.querySelector("#divPaymentButton"),o=document.querySelector("#learnMoreAboutZip");e&&(e.disabled=!t,e.setAttribute("tabindex",t?"auto":"-1")),i&&i.setAttribute("data-enabled",t.toString()),n&&n.setAttribute("aria-disabled",(!t).toString()),o&&(o.setAttribute("aria-disabled",(!t).toString()),o.style.pointerEvents=t?"":"none"),this.isAutofillPaymentEnabled=t,this.setSubmitButtonStatus()}},{key:"setSubmitButtonStatus",value:function(){if(this.isZipPayVirtualCardEnabled){var t=document.querySelector(".checkoutButton");t&&this.setButtonNameAndAction({button:t,buttonType:D.ul.AUTO_FILL})}}}]),i}(jf.Z),vT=mT,yT=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,null,[{key:"getInitialPrice",value:function(t){if(t)return U.GetPriceStringAsNumber(t,!0)}},{key:"getAmazonClippingDiscount",value:function(t,e){var i;if(e&&t){var n=e.substring(e.search(/\d+/g)),o=n.search(/\s|%/),a=n;-1!==o&&(a=n.substring(0,o)),i=U.GetPriceStringAsNumber(a,!0),e.search(/%/)>0&&(i=t*i/100)}return i}}]),t}();var CT=(0,l.Z)((function t(){(0,s.Z)(this,t),(0,I.Z)(this,"BgAutoApplyInProgress",void 0),(0,I.Z)(this,"ForegroundApplyingBestCoupon",void 0),(0,I.Z)(this,"progressBarStartPos",void 0),(0,I.Z)(this,"progressBarEndPos",void 0),(0,I.Z)(this,"currentCoupon",void 0),(0,I.Z)(this,"currentCouponIndex",void 0),(0,I.Z)(this,"couponsTotal",void 0),(0,I.Z)(this,"result",void 0)}));function bT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var ST=function(t){(0,O.Z)(i,t);var e=bT(i);function i(){var t;(0,s.Z)(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),(0,I.Z)((0,R.Z)(t),"StartTime",void 0),(0,I.Z)((0,R.Z)(t),"CouponsApplied",void 0),(0,I.Z)((0,R.Z)(t),"ContextID",void 0),(0,I.Z)((0,R.Z)(t),"InitialPrice",void 0),(0,I.Z)((0,R.Z)(t),"BestCoupon",void 0),(0,I.Z)((0,R.Z)(t),"MaxDiscount",void 0),(0,I.Z)((0,R.Z)(t),"CouponResults",void 0),(0,I.Z)((0,R.Z)(t),"ImpressionId",void 0),(0,I.Z)((0,R.Z)(t),"StringifiedMap",void 0),(0,I.Z)((0,R.Z)(t),"ImportOptions",void 0),(0,I.Z)((0,R.Z)(t),"Currency",void 0),(0,I.Z)((0,R.Z)(t),"PageCurrency",void 0),(0,I.Z)((0,R.Z)(t),"CashBackActive",void 0),(0,I.Z)((0,R.Z)(t),"AppliedCoupon",void 0),(0,I.Z)((0,R.Z)(t),"TrueInitialPrice",void 0),(0,I.Z)((0,R.Z)(t),"BackgroundAACancelled",void 0),(0,I.Z)((0,R.Z)(t),"BackgroundAAStatus",void 0),(0,I.Z)((0,R.Z)(t),"SuggestedCouponCode",void 0),t}return(0,l.Z)(i,[{key:"StringifyMap",value:function(){this.StringifiedMap=JSON.stringify(Array.from(this.CouponsApplied.entries()))}},{key:"ToString",value:function(){return this.StringifyMap(),JSON.stringify(this)}}],[{key:"CreateNew",value:function(t,e){var n=new i(i.fourMinutesExpiryInSeconds);return n.ContextID=t,n.StartTime=Date.now(),n.CouponsApplied=new Map,n.MaxDiscount=0,n.CouponResults=[],n.BackgroundAAStatus=new CT,e&&(n.ImpressionId=e),n}},{key:"CreateFromObject",value:function(t){if(t&&null!==t.ContextID&&void 0!==t.ContextID){var e=i.CreateNew(t.ContextID);if(t.StringifiedMap)JSON.parse(t.StringifiedMap).forEach((function(t){var i=t[0],n=t[1];e.CouponsApplied.set(i,n)}));return t.BestCoupon&&(e.BestCoupon=t.BestCoupon),null!==t.InitialPrice&&void 0!==t.InitialPrice&&(e.InitialPrice=t.InitialPrice),null!==t.MaxDiscount&&void 0!==t.MaxDiscount&&(e.MaxDiscount=t.MaxDiscount),t.CouponResults&&(e.CouponResults=t.CouponResults),t.ImpressionId&&(e.ImpressionId=t.ImpressionId),t.ImportOptions&&(e.ImportOptions=t.ImportOptions),t.CashBackActive&&(e.CashBackActive=t.CashBackActive),t.Currency&&(e.Currency=t.Currency),t.PageCurrency&&(e.PageCurrency=t.PageCurrency),t.StartTime&&(e.StartTime=t.StartTime),t.AppliedCoupon&&(e.AppliedCoupon=t.AppliedCoupon),t.TrueInitialPrice&&(e.TrueInitialPrice=t.TrueInitialPrice),t.BackgroundAACancelled&&(e.BackgroundAACancelled=t.BackgroundAACancelled),t.BackgroundAAStatus&&(e.BackgroundAAStatus=t.BackgroundAAStatus),t.SuggestedCouponCode&&(e.SuggestedCouponCode=t.SuggestedCouponCode),e}return null}}]),i}(_);(0,I.Z)(ST,"fourMinutesExpiryInSeconds",480);var xT=function(){function e(t){var i,n;(0,s.Z)(this,e),(0,I.Z)(this,"clarityEnabled",!1),null!==(i=t.experimentData)&&void 0!==i&&i.isExperimentActive(xt.H.clarity||(null===(n=t.experimentData)||void 0===n?void 0:n.isExperimentActive(xt.H.clarityWithCookies)))&&(this.clarityEnabled=!0)}var i,o;return(0,l.Z)(e,[{key:"WaitForClarityToLoad",value:(o=(0,t.Z)(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case 1:if(window.hasOwnProperty(e.clarityKey)){t.next=6;break}return t.next=4,new Promise((function(t){setTimeout(t,1e3)}));case 4:t.next=1;break;case 6:case 7:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})}],[{key:"CreateInstance",value:function(t){e.instance=new e(t)}},{key:"SetTag",value:(i=(0,t.Z)(n().mark((function t(i,o){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.instance&&o&&e.instance.clarityEnabled&&e.instance.WaitForClarityToLoad().then((function(){window[e.clarityKey]("set",i,o)}));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return i.apply(this,arguments)})},{key:"ReportClientInfo",value:function(t,i,n){e.reportedClientContextInfo||(e.SetTag(e.TAGNAME_CLIENTNAME,t),e.SetTag(e.TAGNAME_JSVERSION,i),e.SetTag(e.TAGNAME_EDGEVERSION,n),e.reportedClientContextInfo=!0)}}]),e}();(0,I.Z)(xT,"TAGNAME_DOMAIN","domain"),(0,I.Z)(xT,"TAGNAME_FLIGHT","flight"),(0,I.Z)(xT,"TAGNAME_VIEW","view"),(0,I.Z)(xT,"TAGNAME_CLIENTNAME","appinfoclientname"),(0,I.Z)(xT,"TAGNAME_JSVERSION","jsversion"),(0,I.Z)(xT,"TAGNAME_EDGEVERSION","edgeversion"),(0,I.Z)(xT,"clarityKey","clarity"),(0,I.Z)(xT,"instance",void 0),(0,I.Z)(xT,"reportedClientContextInfo",!1);var ET,AT,TT=xT,IT=(0,l.Z)((function t(e,i,n){(0,s.Z)(this,t),(0,I.Z)(this,"AppInfoClientName",void 0),(0,I.Z)(this,"JSVersion",void 0),(0,I.Z)(this,"BuildVersion",void 0),this.AppInfoClientName=e,this.JSVersion=i,this.BuildVersion=n,TT.ReportClientInfo(e,i,n)}));!function(t){t.GET_TRACKING_PAGE_DATA="GetTrackingPageData",t.INVALID_TRACKING_PAGE_ERROR="InvalidTrackingPageError",t.TRACKING_PAGE_DATA="TrackingPageData",t.TRACKING_PAGE_ERROR="TrackingPageError",t.TRACKING_PAGE_PARSING_ERROR="TrackingPageParsingError",t.TRACKING_PAGE_SCRIPT_ERROR="TrackingPageScriptError"}(ET||(ET={})),function(t){t.ORDERED="Ordered",t.SHIPPED="Shipped",t.DELIVERED="Delivered",t.RETURNED="Returned",t.CANCELED="Canceled",t.ERROR="Error"}(AT||(AT={}));var DT;new Set(["amazon.com","amazon.ca","amazon.co.uk","amazon.co.jp"]),new Map(Object.entries({"etsy.com":"receipt_id","target.com":"referenceId"}));!function(t){t.DELIVERED_REGEX="(delivered|配達しました)",t.SHIPPED_REGEX="(arriv|(^((?!not).)*ship)|到着)",t.RETURNED_REGEX="(return|戻る|返金)",t.CANCELED_REGEX="(cancel|キャンセル)"}(DT||(DT={}));var kT=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,null,[{key:"GetBuildVersion",value:function(){try{var t=navigator.userAgent.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/);if(t&&t.length>1&&t[0]&&t[0].length>4)return t[0].substr(4)}catch(t){}}},{key:"CompareBuildVersions",value:function(t,e){if(t&&e){var i=t.split("."),n=e.split(".");if(4!==i.length||4!==n.length)return;for(var o=0;o<4;o++){var a=parseInt(i[o],10),r=parseInt(n[o],10);if(a>r)return 1;if(r>a)return-1}return 0}}},{key:"IsOtherSellersExpActive",value:function(t,e){return"walmart.com"===e||t.isExperimentActive(xt.H.showAmazonOtherSellers)}}]),t}();var wT;!function(t){t.ClippingGrocery="ClippingGrocery",t.GroceryNoClipping="GroceryNoClipping",t.Clipping="Clipping",t.GiftCard="GiftCard",t.SaveExclusiveCoupons="SaveExclusiveCoupons",t.GroceryCashback="GroceryCashback",t.Grocery="Grocery",t.OtherSellers="OtherSellers",t.NoRetailerData="NoRetailerData",t.FailUpdateCheckoutPage="FailUpdateCheckoutPage",t.NoCheckoutPageUrl="NoCheckoutPageUrl",t.NoPDPPage="NoPDPPage",t.NotGiftCard="NotGiftCard",t.NotGroceries="NotGroceries",t.IsPageValid="IsPageValid",t.NoPinterestDeals="NoPinterestDeals",t.PinterestDeals="PinterestDeals",t.NoExclusiveCoupons="NoExclusiveCoupons",t.NoSelectors="NoSelectors",t.FallbackValidation="FallbackValidation",t.FallbackError="FallbackError",t.NoCoupons="NoCoupons",t.DisableAutoOpen="DisableAutoOpen"}(wT||(wT={}));var RT,OT;!function(t){t.CheckoutPageValidationError="CheckoutPageValidationError",t.LogScriptTelemetry="LogScriptTelemetry",t.PageStatus="PageStatus",t.CheckoutPageGMV="CheckoutPageGMV",t.ExpressCheckoutPageGMV="ExpressCheckoutPageGMV",t.CheckoutPageValidationStatus="CheckoutPageValidationStatus",t.PurchaseCompleted="PurchaseCompleted",t.SetStorageValue="SetStorageValue",t.GuestDomain="GuestDomain",t.BackgroundAutoApplyStateValid="BackgroundAutoApplyStateValid",t.PlatformExpansionDomain="PlatformExpansionDomain"}(RT||(RT={})),function(t){t[t.COUPONS_CLIPPING=0]="COUPONS_CLIPPING",t[t.OTHER_SELLERS=1]="OTHER_SELLERS",t[t.OTHER_SELLERS_CONFIRMATION=2]="OTHER_SELLERS_CONFIRMATION",t[t.EXCLUSIVE_COUPONS=3]="EXCLUSIVE_COUPONS",t[t.OTHER_SELLERS_TRIGGER=4]="OTHER_SELLERS_TRIGGER",t[t.ATTAINABLE_COUPONS=5]="ATTAINABLE_COUPONS",t[t.REWARDS_GIFT_CARD=6]="REWARDS_GIFT_CARD",t[t.PRINT_GROCERY=7]="PRINT_GROCERY",t[t.GROCERY_ITEMIZED_CASHBACK=8]="GROCERY_ITEMIZED_CASHBACK"}(OT||(OT={}));var PT=new Map;PT.set(1,new Set(["$","₹","£","€","CA$","CAD$","C$","A$","AU$","¥","R$","MX$"])),PT.set(3,new Set(["USD","INR","GBP","CAD","EUR","AUD","YEN","BRL","MXN"]));var MT=new Map;MT.set("en-us","$"),MT.set("en-gb","£"),MT.set("en-in","₹"),MT.set("en-ca","CA$"),MT.set("en-au","AU$"),MT.set("fr-fr","€"),MT.set("it-it","€"),MT.set("es-es","€"),MT.set("de-de","€"),MT.set("ja-jp","¥"),MT.set("pt-br","R$"),MT.set("es-mx","MX$");var NT=new Map;NT.set("$","USD"),NT.set("₹","INR"),NT.set("£","GBP"),NT.set("€","EUR"),NT.set("CA$","CAD"),NT.set("C$","CAD"),NT.set("A$","AUD"),NT.set("AU$","AUD"),NT.set("¥","YEN"),NT.set("R$","BRL"),NT.set("MX$","MXN");var LT;function _T(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return FT(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return FT(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function FT(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function HT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}!function(t){t.enus="en-us",t.engb="en-gb",t.enca="en-ca"}(LT||(LT={}));var ZT,BT,UT=function(e){(0,O.Z)(y,e);var i,r,c,u,d,h,p,f,g,m,v=HT(y);function y(t,e,i,n){var o,a,r;((0,s.Z)(this,y),a=v.call(this),(0,I.Z)((0,R.Z)(a),"assets",null),(0,I.Z)((0,R.Z)(a),"flyoutData",void 0),(0,I.Z)((0,R.Z)(a),"utilities",void 0),(0,I.Z)((0,R.Z)(a),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(a),"logModule",void 0),(0,I.Z)((0,R.Z)(a),"shouldRenderClipping",void 0),(0,I.Z)((0,R.Z)(a),"clippingCompleted",!1),(0,I.Z)((0,R.Z)(a),"market",void 0),(0,I.Z)((0,R.Z)(a),"discount",void 0),(0,I.Z)((0,R.Z)(a),"initialPrice",void 0),(0,I.Z)((0,R.Z)(a),"commonAssets",void 0),(0,I.Z)((0,R.Z)(a),"stateManagement",void 0),a.flyoutData=t,a.utilities=e.viewModulesUtilities,a.pageHandlerModule=e.pageHandlerModule,a.logModule=e.logModule,a.stateManagement=i,a.commonAssets=n,null!==(o=a.flyoutData.dataStoreModule.ApiData)&&void 0!==o&&o.retailerData.exclusiveMarket)?a.market=null===(r=a.flyoutData.dataStoreModule.ApiData)||void 0===r?void 0:r.retailerData.exclusiveMarket:a.market=LT.enus;return a}return(0,l.Z)(y,[{key:"GetModuleName",value:function(){return D.GX.COUPONCLIPPING}},{key:"ShouldRenderModule",value:(m=(0,t.Z)(n().mark((function t(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.shouldRenderClipping){t.next=2;break}return t.abrupt("return",this.shouldRenderClipping);case 2:return t.next=4,this.setShouldRenderClipping();case 4:return e=!!this.shouldRenderClipping&&!!this.flyoutData.common.lastCommittedURL,t.abrupt("return",e);case 6:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"PostProcessing",value:function(t,e,i){var n=this;if(this.shouldRenderClipping&&0===e&&!this.clippingCompleted){var o=this.utilities.createElement("DIV");o.slot="actions",o.style.width="100%",this.flyoutData.common.isPane&&(o.style.display="flex",o.style.justifyContent="center");var r=this.utilities.createBaseActionButton();o&&r&&(r.textContent=this.getClippingButtonTitle(),r.setAttribute("aria-labelledby","clippingTitle"),r.setAttribute("aria-describedby","clippingTitle"),r.addEventListener("click",(function(){var t=new na.Z(a.$S.AutoApply);n.pageHandlerModule.RecordAsUserAction(Ca.bS.CLIP_COUPON),n.logModule.LogInfoEvent(a.R.ButtonClick,"Coupon clipped",t,ya.g.CouponImpressionId),n.pageHandlerModule.StartEdgeDriver(JSON.stringify({action:JE.Clipping,data:{discount:n.discount,initialPrice:n.initialPrice}})),n.pageHandlerModule.DismissPopup()})),o.appendChild(r),this.flyoutData.common.shopping.prepend(o));var s=this.flyoutData.common.shopping.querySelector("#clippingSection");s&&Tt.SO.queueUpdate((function(){var t,e=null===(t=s.shadowRoot)||void 0===t?void 0:t.querySelector("[slot=heading]");e&&(e.style.display="none")}))}}},{key:"renderModule",value:(g=(0,t.Z)(n().mark((function t(){var e,i,o,a,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setInitialAndDiscountPrice();case 2:if(!this.clippingCompleted){t.next=12;break}return t.t0=this,t.next=6,this.renderCompleted();case 6:return t.t1=t.sent,t.t2=D.H7.COUPONCLIPPING,t.t3=D.GX.COUPONCLIPPING,t.t4=D.$k.CONTEXTUAL,e=t.t0.CreateModule.call(t.t0,t.t1,t.t2,t.t3,t.t4),t.abrupt("return",Promise.resolve(e));case 12:return(i=this.utilities.createElement("DIV")).id="clippingSection",o=this.createMainTitle(this.discount),i.appendChild(o),this.utilities.shouldRenderSmallNotification()?(this.utilities.applyStyles(this.flyoutData.common.shopping,this.commonAssets.getSmallerNotificationCssStyles()),this.utilities.dismissNotificationTimeOut()):(a=this.createSubtitle(this.initialPrice,this.discount),i.appendChild(a)),r=this.CreateModule(i,D.H7.COUPONCLIPPING,D.GX.COUPONCLIPPING,D.$k.CONTEXTUAL),t.abrupt("return",Promise.resolve(r));case 19:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)})},{key:"populateMainHeader",value:function(){var t=this.flyoutData.common.shopping.querySelector("#clippingSection");t&&(t.style.marginTop="0px",t.slot="header-content")}},{key:"renderCompleted",value:(f=(0,t.Z)(n().mark((function t(){var e,i,o,a,r,s,l;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this.utilities.createElement("DIV")).id="clippingSection",(i=this.utilities.createElement("H2")).id="clippingTitle",i.className="txtLarge",i.style.textAlign="center",o=this.flyoutData.strings.clippedTitle,this.discount?(a=this.utilities.createElement("SPAN"),r=this.discount.toFixed(2),a.textContent=this.utilities.replaceStringsPlaceholders("".concat(D.iM.currency).concat(r),this.market),a.className="txtGradient",a.style.fontSize="26px",a.style.lineHeight="30px",a.style.fontWeight="600",this.utilities.shouldRenderSmallNotification()||(s=this.utilities.createElement("BR"),a.appendChild(s)),this.utilities.populateSingleChildHtml(i,o,a)):(o=o.split(/\$\d/).join("").replace("  "," "),i.textContent=o),e.appendChild(i),l=this.createClippedCouponSubTitleSection(),e.appendChild(l),t.abrupt("return",Promise.resolve(e));case 12:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"createClippedCouponSubTitleSection",value:function(){var t=this.utilities.createElement("DIV");t.slot="actions",t.style.display="flex",t.style.justifyContent="center",t.style.marginTop="27px",t.style.marginBottom="22px",t.style.height="22px";var e=this.utilities.createElement("DIV");e.innerHTML=this.commonAssets.getGreenCheck(),e.slot="start",this.market===LT.engb&&(e.style.marginRight="6px"),e.style.marginTop="8px",t.appendChild(e);var i=this.utilities.createElement("DIV");return i.textContent=this.getClippedSubTitle(),i.style.fontSize="16px",i.style.maxWidth="220px",i.style.width="100%",i.style.marginTop="8px",i.style.fontWeight="500",this.flyoutData.common.currentTheme===D.Q2.Dark?(i.style.color="#FFFFFF",i.style.borderColor="#FFFFFF"):i.style.color="#000000",t.appendChild(i),t}},{key:"createMainTitle",value:function(t){var e=this.utilities.createElement("H2");if(e.id="clippingTitle",this.utilities.shouldRenderSmallNotification()?(e.className="txtMedium",e.style.fontSize="20px",e.style.lineHeight="24px",e.style.fontWeight="500"):(e.className="txtLarge",e.style.fontSize="26px",e.style.lineHeight="36px",e.style.fontWeight="600",e.style.marginLeft="40px",e.style.marginRight="40px"),e.style.textAlign="center",e.style.marginBottom="8px",e.textContent=this.getClippingDefaultTitle(),t){var i=t.toFixed(2);this.getRefreshClippingMainTitle(i,e)}return e}},{key:"createSubtitle",value:function(t,e){var i=this.utilities.createElement("H2");if(i.id="clippingSubtitle",i.className="txtLarge",i.style.textAlign="center",i.style.fontSize="12px",i.style.fontWeight="400",i.style.lineHeight="16px",i.style.marginBottom="4px",i.textContent=this.flyoutData.strings.defaultClippingSubTitle,this.flyoutData.common.currentTheme===D.Q2.Light&&(i.style.color="gray"),t&&e){var n=(e/t*100).toFixed(0),o=this.utilities.replaceValueInKey("clippingSubTitle",this.flyoutData.strings.clippingSubTitle,n).split("|");if(3!==o.length)return i;var a=this.utilities.createElement("B");a.textContent=o[1];var r=document.createTextNode(o[2]);i.textContent=o[0],i.appendChild(a),i.appendChild(r)}return i}},{key:"setInitialAndDiscountPrice",value:(p=(0,t.Z)(n().mark((function t(){var e,i,o,a,r,s,l,c,u,d;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=null===(e=this.flyoutData.dataStoreModule.ApiData)||void 0===e?void 0:e.retailerData,r=null==a?void 0:a.GetCurrentCheckoutPageByPathName(this.flyoutData.common.lastCommittedURL),s=null==r||null===(i=r.clippingSelectors)||void 0===i?void 0:i.orderTotalDataElementSelector,l=null==r||null===(o=r.clippingSelectors)||void 0===o?void 0:o.discountSelector,this.clippingCompleted&&(l=null==r||null===(c=r.clippingSelectors)||void 0===c?void 0:c.clippedDiscountSelector),t.next=7,this.getInitialPrice(s);case 7:return u=t.sent,t.next=10,this.getAmazonClippingDiscount(u,l);case 10:d=t.sent,this.initialPrice=u,this.discount=d;case 13:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"getInitialPrice",value:(h=(0,t.Z)(n().mark((function t(e){var i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",void 0);case 2:return t.next=4,this.getVisibleElement(e);case 4:return i=t.sent,t.abrupt("return",yT.getInitialPrice(null==i?void 0:i.innerText));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"getAmazonClippingDiscount",value:(d=(0,t.Z)(n().mark((function t(e,i){var r,s,l;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e||!i){t.next=6;break}return t.next=4,this.getVisibleElement(i);case 4:s=t.sent,r=yT.getAmazonClippingDiscount(e,null==s?void 0:s.innerText);case 6:t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),l=new o.Z(a.xu.OnErrorInvoked),this.logModule.LogErrorEvent(a.R.EdgeFlyoutStatus,"Clipping flyout getDiscount error, with Type: ".concat(t.t0.name,", with message: ").concat(t.t0.message),l);case 13:return t.abrupt("return",r);case 14:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(t,e){return d.apply(this,arguments)})},{key:"setShouldRenderClipping",value:(u=(0,t.Z)(n().mark((function t(){var e,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.getClippingSelectors()){t.next=4;break}return this.shouldRenderClipping=!1,t.abrupt("return");case 4:return t.next=6,this.isClippingAvailable(e);case 6:if(!(i=t.sent)||!this.clippingCompleted){t.next=12;break}return t.next=10,this.stateManagement.getState(Ia.IY.renderedViewModuleCount);case 10:t.t0=t.sent,i=0===t.t0;case 12:this.shouldRenderClipping=i;case 13:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"getClippingSelectors",value:function(){var t,e=null===(t=this.flyoutData.dataStoreModule.ApiData)||void 0===t?void 0:t.retailerData,i=null==e?void 0:e.GetCurrentCheckoutPageByPathName(this.flyoutData.common.lastCommittedURL);return null==i?void 0:i.clippingSelectors}},{key:"isClippingAvailable",value:(c=(0,t.Z)(n().mark((function t(e){var i,o,a,r,s,l,c,u,d,h;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.signedInSelector,a=e.clipCouponSelector,r=e.alreadyClippedSelector,this.pageHandlerModule.TriggerExperiment(xt.H.clippingCheckDiscount),(null==(s=this.flyoutData.common)?void 0:s.popupOrigination)!==St.s.AUTO_SHOW_COUPONS_CLIPPING){t.next=9;break}return this.clippingCompleted=!1,t.abrupt("return",!0);case 9:if(l=!1,!(c=null==s||null===(i=s.pageStatus)||void 0===i?void 0:i.PageValidations)){t.next=19;break}if(!c.includes(OT.COUPONS_CLIPPING)){t.next=17;break}l=!0,t.next=19;break;case 17:case 48:return t.abrupt("return",!1);case 19:if(l){t.next=26;break}return t.next=22,this.isElementVisible(o);case 22:if(t.sent){t.next=26;break}return t.abrupt("return",!1);case 26:return u=this.market===LT.enus||this.market===LT.engb||this.market===LT.enca,t.next=29,this.isElementVisible(r);case 29:if(d=t.sent,this.clippingCompleted=d&&u,!this.clippingCompleted){t.next=34;break}return t.abrupt("return",!0);case 34:return t.next=36,this.isElementVisible(a);case 36:if(!t.sent){t.next=40;break}return t.abrupt("return",!0);case 40:if(!this.flyoutData.experimentData.isExperimentActive(xt.H.clippingCheckDiscount)){t.next=48;break}return h=e.discountSelector,t.next=44,this.isElementVisible(h);case 44:if(!t.sent){t.next=48;break}return t.abrupt("return",!0);case 49:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"isElementVisible",value:(r=(0,t.Z)(n().mark((function t(e){var i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,this.getVisibleElement(e);case 4:return i=t.sent,t.abrupt("return",!!i);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"getVisibleElement",value:(i=(0,t.Z)(n().mark((function t(e){var i,o,a,r,s,l;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.split(";"),o=_T(i),t.prev=2,o.s();case 4:if((a=o.n()).done){t.next=20;break}return r=a.value,t.prev=6,t.next=9,this.pageHandlerModule.RunQuerySelectorOnBodyWithReponse(r);case 9:if(s=t.sent,l=JSON.parse(s.extractedValues),!(s.found&&l.offsetHeight>0&&l.offsetWidth>0)){t.next=13;break}return t.abrupt("return",s);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(6);case 18:t.next=4;break;case 20:t.next=25;break;case 22:t.prev=22,t.t1=t.catch(2),o.e(t.t1);case 25:return t.prev=25,o.f(),t.finish(25);case 28:return t.abrupt("return",Promise.resolve(void 0));case 29:case"end":return t.stop()}}),t,this,[[2,22,25,28],[6,15]])}))),function(t){return i.apply(this,arguments)})},{key:"getClippingButtonTitle",value:function(){return this.market===LT.engb?this.flyoutData.strings.clippingButtonTitleEnGb:this.flyoutData.strings.clippingButtonTitle}},{key:"getClippedSubTitle",value:function(){return this.market===LT.engb?this.flyoutData.strings.clippedSubTitleEnGb:this.flyoutData.strings.clippedSubTitle}},{key:"getRefreshClippingMainTitle",value:function(t,e){var i,n=this.utilities.createElement("SPAN");if(n.textContent="".concat(D.iM.currency).concat(t),n.textContent=this.utilities.replaceStringsPlaceholders(n.textContent,this.market),n.className="txtGradient",n.style.fontSize="26px",n.style.lineHeight="30px",n.style.fontWeight="600",!this.utilities.shouldRenderSmallNotification()){var o=this.utilities.createElement("BR");n.appendChild(o)}i=this.market===LT.engb?this.flyoutData.strings.clippingMainTitleEnGb:this.utilities.shouldRenderSmallNotification()?this.flyoutData.strings.clippingMainTitleSmallNotification:this.flyoutData.strings.clippingMainTitle,this.utilities.populateSingleChildHtml(e,i,n)}},{key:"getClippingDefaultTitle",value:function(){return this.market===LT.engb?this.flyoutData.strings.defaultClippingTitleEnGb:this.flyoutData.strings.defaultClippingTitle}}]),y}(jf.Z),GT=UT,VT=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getLockIcon",value:function(){return A.Z.getTrustedHTML(ZT||(ZT=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="12" height="15" viewBox="0 0 12 15" fill="none">\n        <path d="M6.00203 0.995361C7.47477 0.995361 8.6687 2.18927 8.6687 3.66203V4.99536H9.83537C10.6638 4.99536 11.3354 5.66694 11.3354 6.49536V12.8287C11.3354 13.6571 10.6638 14.3287 9.83537 14.3287H2.1687C1.34027 14.3287 0.668701 13.6571 0.668701 12.8287V6.49536C0.668701 5.66694 1.34027 4.99536 2.1687 4.99536H3.33537V3.66203C3.33537 2.18927 4.52927 0.995361 6.00203 0.995361ZM9.83537 5.99536H2.1687C1.89256 5.99536 1.6687 6.21922 1.6687 6.49536V12.8287C1.6687 13.1048 1.89256 13.3287 2.1687 13.3287H9.83537C10.1115 13.3287 10.3354 13.1048 10.3354 12.8287V6.49536C10.3354 6.21922 10.1115 5.99536 9.83537 5.99536ZM6.0021 8.66203C6.55443 8.66203 7.0021 9.10976 7.0021 9.66203C7.0021 10.2143 6.55443 10.662 6.0021 10.662C5.44983 10.662 5.0021 10.2143 5.0021 9.66203C5.0021 9.10976 5.44983 8.66203 6.0021 8.66203ZM6.00203 1.99536C5.08157 1.99536 4.33537 2.74155 4.33537 3.66203V4.99536H7.6687V3.66203C7.6687 2.74155 6.9225 1.99536 6.00203 1.99536Z" fill="black" fill-opacity="0.83"/>\n        </svg>'])))}},{key:"getUnlockedIcon",value:function(){return A.Z.getTrustedHTML(BT||(BT=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="10" height="15" viewBox="0 0 10 15" fill="none">\n        <path d="M5 10.9121C5.55228 10.9121 6 10.4644 6 9.91211C6 9.35982 5.55228 8.91211 5 8.91211C4.44772 8.91211 4 9.35982 4 9.91211C4 10.4644 4.44772 10.9121 5 10.9121ZM5 1.91211C4.17157 1.91211 3.5 2.58368 3.5 3.41211V5.41211H8.5C9.32843 5.41211 10 6.08368 10 6.91211V12.9121C10 13.7405 9.32843 14.4121 8.5 14.4121H1.5C0.671573 14.4121 0 13.7405 0 12.9121V6.91211C0 6.08368 0.671573 5.41211 1.5 5.41211H2.5V3.41211C2.5 2.0314 3.61929 0.912109 5 0.912109C6.38071 0.912109 7.5 2.0314 7.5 3.41211C7.5 3.68825 7.27614 3.91211 7 3.91211C6.72386 3.91211 6.5 3.68825 6.5 3.41211C6.5 2.58368 5.82843 1.91211 5 1.91211ZM1.5 6.41211C1.22386 6.41211 1 6.63597 1 6.91211V12.9121C1 13.1883 1.22386 13.4121 1.5 13.4121H8.5C8.77614 13.4121 9 13.1883 9 12.9121V6.91211C9 6.63597 8.77614 6.41211 8.5 6.41211H1.5Z" fill="#212121"/>\n        </svg>'])))}},{key:"getStyles",value:function(){return"\n        .divSuccessRate {\n            display: flex;\n            flex-direction: row;\n            border-radius: 0px 3px;\n        }\n        .txtSuccessRate {\n            color: #107C10;\n        }\n        #divCouponWrapper {\n            display: grid;\n            grid-template-columns: calc(50% - 6px) calc(50% - 6px);\n            grid-gap: 12px;\n            margin-bottom: 10px;\n            margin-left: 12px;\n            margin-right: 12px;\n            margin-top: 10px;\n        }\n        @media (prefers-color-scheme: dark) {\n            .txtSuccessRate {\n                color: #62C90C;\n            }\n            .divSuccessRateIcon svg path:first-child {\n                fill: #62C90C;\n            }\n        }\n        @media (forced-colors: active) {\n            .divSuccessRateIcon svg path:first-child {\n                fill: highlight;\n            }\n            .divSuccessRateIcon svg path:last-child {\n                fill: highlighttext;\n            }\n        }"}},{key:"getSmallerNotificationCssStyles",value:function(){return"\n        #divContentWrapper {\n            width: 268px;\n        }\n        .actionsButtonRefresh {\n            min-width: 236px;\n            height: 36px;\n            font-size: 13px !important;\n        }\n        .h2RebatesTitle {\n            font-weight: 500;\n            font-size: 20px;\n            line-height: 24px;\n        }\n        "}}]),t}(),$T=(0,l.Z)((function t(e,i,n){(0,s.Z)(this,t),(0,I.Z)(this,"ShowNumCouponsInHeader",!1),(0,I.Z)(this,"ShowCouponHeader",!0),(0,I.Z)(this,"SetExpandableTitleAsViewCoupons",!1),(0,I.Z)(this,"SetExpandableTitleAsNumCoupons",!1),(0,I.Z)(this,"UseAlternativeCouponApplyButtonText",!1),i.isExperimentActive(xt.H.couponsUX)&&null!=n&&n.isCheckoutPageWithAutoApply&&(e.TriggerExperiment(xt.H.couponsUX),i.isVariantActive(xt.H.couponsUX,_f.Yi.SmallerFootprintBasic)?(this.ShowNumCouponsInHeader=!0,this.SetExpandableTitleAsViewCoupons=!0,this.UseAlternativeCouponApplyButtonText=!0):i.isVariantActive(xt.H.couponsUX,_f.Yi.NoCouponSection)&&(this.ShowCouponHeader=!1,this.SetExpandableTitleAsNumCoupons=!0))})),WT=$T,zT=function(){function t(e,i){(0,s.Z)(this,t),(0,I.Z)(this,"flyoutData",void 0),(0,I.Z)(this,"utilities",void 0),this.flyoutData=e,this.utilities=i}return(0,l.Z)(t,[{key:"createCouponHeader",value:function(t,e,i,n){var o=this.utilities.createElement("DIV",{style:"width: 100%; display: flex; flex-direction: row; justify-content: flex-start; column-gap: 16px; text-align: left; font-weight: 500; overflow: hidden; height: 67px;"});o.slot="header-content",this.createRetailerIcon(o,e);var a=this.utilities.createElement("SPAN");a.textContent=t||e,a.className="txtLarge txtGradient",a.style.display="inline-block",a.style.minHeight="35px";var r=this.utilities.createElement("H2");if(r.className="txtLarge",r.style.fontWeight="500",1===i)this.utilities.populateSingleChildHtml(r,this.flyoutData.strings.ptCouponsTitleSingular,a);else{var s=this.utilities.replaceValueInKey("ptCouponsTitle",this.flyoutData.strings.ptCouponsTitle,i.toString());this.utilities.populateSingleChildHtml(r,s,a)}o.appendChild(r),n.appendChild(o)}},{key:"createRetailerIcon",value:function(t,e){var i=this.utilities.createElement("DIV");i.setAttribute("role","image");var n=this.utilities.replaceValueInKey("commonAriaLogo",this.flyoutData.strings.commonAriaLogo,e);i.setAttribute("aria-label",n),i.id="divProfileImgWrapper",i.style.position="relative",i.style.display="flex",i.style.justifyContent="center";var o=this.utilities.createElement("IMG",{style:"width: 50px; height: 50px; place-self: center;\n                    border-radius: 8px; position: relative;\n                    margin-bottom: 8px;"});o.src="".concat(this.flyoutData.common.resourcesEndpoint,"retailerBranding/SquareIcons/").concat(e,".png"),o.setAttribute("aria-hidden","true");var a=this.utilities.createElement("IMG");a.setAttribute("aria-hidden","true"),a.src=this.flyoutData.common.resourcesEndpoint+"pinterest/icon.png",a.style.position="absolute",a.style.top="46px",a.style.zIndex="2",o.addEventListener("error",(function(){t.style.gridTemplateColumns="auto",t.style.textAlign="center",t.style.justifyContent="center",t.style.height="auto",o.remove(),a.remove()})),i.appendChild(o),i.appendChild(a),t.appendChild(i)}}]),t}(),KT=1e3,YT=function(){function e(){(0,s.Z)(this,e)}var i,o,r,c;return(0,l.Z)(e,null,[{key:"calculateTotalSavings",value:(c=(0,t.Z)(n().mark((function t(e,i,o){var r,s,l,c,u,d,h;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=0,e.experimentData.isExperimentActive(xt.H.savingsFoundExp)){t.next=3;break}return t.abrupt("return",c);case 3:return this.resetSavedTransactionsInEdgeLocalStore(e,i,o),t.next=6,this.getListOfTransactions(a.Sl.AutoApplyTransactionsKey,i);case 6:return u=t.sent,t.next=9,this.getListOfTransactions(a.Sl.CouponClippingTransactionsKey,i);case 9:return d=t.sent,t.next=12,this.getListOfTransactions(a.Sl.CashbackTransactionsKey,i);case 12:return h=t.sent,c+=null!==(r=o.TotalAutoApplySavingsAmount)&&void 0!==r?r:0,c+=null!==(s=o.TotalCouponClippingSavingsAmount)&&void 0!==s?s:0,c+=null!==(l=o.TotalCashbackSavingsAmount)&&void 0!==l?l:0,c+=this.getTotalSavingsFromListOfTransactions(u,new Date(o.LastUpdatedAutoApplySavingsTimestamp)),c+=this.getTotalSavingsFromListOfTransactions(d,new Date(o.LastUpdatedCouponClippingSavingsTimestamp)),c+=this.getTotalSavingsFromListOfTransactions(h,new Date(o.LastUpdatedCashbackSavingsTimestamp)),t.abrupt("return",c);case 20:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return c.apply(this,arguments)})},{key:"getTotalSavingsFromListOfTransactions",value:function(t,e){var i=0;try{t.forEach((function(t){var n=null==t?void 0:t.EventInfoTime;if(!np(n)&&!(new Date(n)<e)){var o=null==t?void 0:t.Discount,a=null==t?void 0:t.CashbackSavings;np(o)||isNaN(o)?np(a)||isNaN(a)||(i+=Number(a)):i+=Number(o)}}))}catch(t){}return i}},{key:"saveTransactionToEdgeLocalStore",value:(r=(0,t.Z)(n().mark((function t(e,i,o,a){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.experimentData.isExperimentActive(xt.H.savingsFoundExp)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.getListOfTransactions(o,i);case 4:(r=t.sent).push(a),i.SetStorageValue(o,JSON.stringify(r));case 7:case"end":return t.stop()}}),t,this)}))),function(t,e,i,n){return r.apply(this,arguments)})},{key:"resetSavedTransactionsInEdgeLocalStore",value:(o=(0,t.Z)(n().mark((function t(e,i,o){var r,s,l,c,u,d,h,p,f,g,m;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.experimentData.isExperimentActive(xt.H.savingsFoundExp)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.getListOfTransactions(a.Sl.AutoApplyTransactionsKey,i);case 4:return r=t.sent,t.next=7,this.getListOfTransactions(a.Sl.CouponClippingTransactionsKey,i);case 7:return s=t.sent,t.next=10,this.getListOfTransactions(a.Sl.CashbackTransactionsKey,i);case 10:l=t.sent,c=!(null!=r&&r.length||null!=s&&s.length||null!=l&&l.length),u=(null==r?void 0:r.length)>KT||(null==s?void 0:s.length)>KT||(null==l?void 0:l.length)>KT,d=this.getOldestTimestampFromListOfTransactions(r),h=this.getOldestTimestampFromListOfTransactions(s),p=this.getOldestTimestampFromListOfTransactions(l),f=null==d&&null==h&&null==p,(g=new Date).setDate(g.getDate()-60),m=null!=d&&g>d||null!=h&&g>h||null!=p&&g>p,(c||u||f||m)&&this.setSavingsFoundDataInEdgeLocalStore(i,o);case 21:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return o.apply(this,arguments)})},{key:"getOldestTimestampFromListOfTransactions",value:function(t){try{var e,i=null==t||null===(e=t[0])||void 0===e?void 0:e.EventInfoTime;if(!i)return null;var n=new Date(i);return t.forEach((function(t){var e=new Date(null==t?void 0:t.EventInfoTime);e<n&&(n=e)})),n}catch(t){return null}}},{key:"getListOfTransactions",value:(i=(0,t.Z)(n().mark((function t(e,i){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i.GetStorageValue(e).then((function(t){var e,i;return JSON.parse(null!==(e=null==t||null===(i=t.value)||void 0===i?void 0:i.stringValue)&&void 0!==e?e:"[]")})).catch((function(t){return[]})));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return i.apply(this,arguments)})},{key:"setSavingsFoundDataInEdgeLocalStore",value:function(t,e){this.setSavingsFoundStringStorageValue(t,a.Sl.AutoApplyTransactionsKey,JSON.stringify(e.ListOfAutoApplyTransactions)),this.setSavingsFoundStringStorageValue(t,a.Sl.CouponClippingTransactionsKey,JSON.stringify(e.ListOfCouponClippingTransactions)),this.setSavingsFoundStringStorageValue(t,a.Sl.CashbackTransactionsKey,JSON.stringify(e.ListOfCashbackTransactions))}},{key:"setSavingsFoundStringStorageValue",value:function(t,e,i){var n=new aa.Z;n.stringValue=i,t.SetStorageValue(e,n)}}]),e}(),jT=YT;function XT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var qT=function(e){(0,O.Z)(f,e);var i,r,c,u,d,h,p=XT(f);function f(t,e,i,n){var o;return(0,s.Z)(this,f),o=p.call(this),(0,I.Z)((0,R.Z)(o),"assets",void 0),(0,I.Z)((0,R.Z)(o),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(o),"logModule",void 0),(0,I.Z)((0,R.Z)(o),"stateManagement",void 0),(0,I.Z)((0,R.Z)(o),"flyoutData",void 0),(0,I.Z)((0,R.Z)(o),"utilities",void 0),(0,I.Z)((0,R.Z)(o),"attainableUtilities",void 0),(0,I.Z)((0,R.Z)(o),"commonAssets",void 0),(0,I.Z)((0,R.Z)(o),"couponsUXConfig",void 0),(0,I.Z)((0,R.Z)(o),"cartValue",void 0),(0,I.Z)((0,R.Z)(o),"lastAttainableCoupon",void 0),(0,I.Z)((0,R.Z)(o),"attainableCouponList",[]),o.logModule=i.logModule,o.pageHandlerModule=i.pageHandlerModule,o.stateManagement=t,o.flyoutData=e,o.stateManagement.setState(Ia.IY.isAutoApplyVisible,o.isAutoApplyVisible()),o.utilities=i.viewModulesUtilities,o.attainableUtilities=new Yf(i),o.commonAssets=n,o.assets=new VT,o.couponsUXConfig=new WT(o.pageHandlerModule,o.flyoutData.experimentData,o.flyoutData.dataStoreModule.CouponData),o.stateManagement.addEventListener(Ia.e1.CreateAutoApplyButton,o.createAutoApplyButton.bind((0,R.Z)(o))),o.stateManagement.addEventListener(Ia.e1.CreateCouponHeader,o.populateMainHeader.bind((0,R.Z)(o))),o.stateManagement.addEventListener(Ia.e1.CreateTrivia,(function(t){t&&t.detail&&t.detail.parent&&o.CreateTrivia(t.detail.parent)})),o.cartValue=-1,o.stateManagement.setState(Ia.IY.canRenderAutoApply,o.canRenderAutoApplyButton()),o}return(0,l.Z)(f,[{key:"GetModuleName",value:function(){return D.GX.COUPON}},{key:"ShouldRenderModule",value:function(){var t,e,i,n,o,a=this.flyoutData.dataStoreModule.PriceComparisonData;if(null!==(e=(null==a||null===(t=a.segment)||void 0===t?void 0:t.toLowerCase())===D.VG.AUTOS&&(null==a?void 0:a.CompetingPrices)&&(null==a?void 0:a.CompetingPrices.length)>0)&&void 0!==e&&e)return Promise.resolve(!1);var r=null===(i=this.flyoutData.dataStoreModule.ApiData)||void 0===i?void 0:i.retailerData,s=null==r?void 0:r.GetCurrentCheckoutPageByPathName(this.flyoutData.common.lastCommittedURL),l=!1;null!=s&&s.clippingSelectors&&(l=!0);var c=!1===l||0===this.stateManagement.getState(Ia.IY.renderedViewModuleCount)||!0===this.flyoutData.common.isPane;return(null===(n=this.flyoutData.dataStoreModule.PriceComparisonData)||void 0===n||null===(o=n.segment)||void 0===o?void 0:o.toLowerCase())===D.VG.AUTOS?Promise.resolve(!1):Promise.resolve(c)}},{key:"renderModule",value:(h=(0,t.Z)(n().mark((function t(){var e,i,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.flyoutData.dataStoreModule.CouponData,r=null===(e=this.flyoutData.dataStoreModule.ExclusiveCouponsData)||void 0===e?void 0:e.exclusiveCouponsForDomain,!(i&&i.Coupons&&i.Coupons.length>0)){t.next=21;break}return s=function(t){var e=D.CS.COUPON;return t&&u.common.bannerContext===D.De.VIEWALL&&(e=t.length),e},this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),t.next=7,this.setupAttainableCoupons();case 7:return(l=document.createElement("msft-edge-shopping-section")).id="couponSection",this.pageHandlerModule.TriggerExperiment(xt.H.hideCoupons),!this.flyoutData.experimentData.isExperimentActive(xt.H.hideCoupons)||this.flyoutData.common.openedWith!==D.Te.Auto||this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_COUPONS_CHECKOUT&&this.flyoutData.common.popupOrigination!==St.s.AUTO_SHOW_REBATES_CHECKOUT?this.populateCouponList(l,!1,!1,this.flyoutData.common.bannerContext):l.style.display="none",this.utilities.shouldRenderSmallNotification()&&(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getSmallerNotificationCssStyles()),this.utilities.dismissNotificationTimeOut()),c=this.couponsUXConfig.SetExpandableTitleAsNumCoupons?1===i.Coupons.length?this.flyoutData.strings.couponExpandableTitleWithNumSingular:this.utilities.replaceValueInKey("couponExpandableTitleWithNum",this.flyoutData.strings.couponExpandableTitleWithNum,i.Coupons.length.toString()):this.couponsUXConfig.SetExpandableTitleAsViewCoupons?this.flyoutData.strings.couponExpandableTitleViewCoupons:1===i.Coupons.length?this.flyoutData.strings.couponSectionTitle:this.utilities.replaceValueInKey("couponSectionPluralTitle",this.flyoutData.strings.couponSectionPluralTitle,i.Coupons.length.toString()),u=this.flyoutData,d=this.filterAttainableCouponList(),this.utilities.createCommonListStructure(l,c,d,this.GetModuleName(),s,this.populateEmptyBannerCouponList.bind(this)),this.flyoutData.common.openedWith&&this.flyoutData.common.openedWith===D.Te.Auto?(h=new o.Z(a.xu.AutoTrigger),this.LogInfoEvent(a.R.EdgeFlyoutStatus,"Coupons available - auto trigger",h)):(p=new o.Z(a.xu.UserTrigger),this.LogInfoEvent(a.R.EdgeFlyoutStatus,"Coupons available - manual trigger",p)),f=this.CreateModule(l,D.H7.COUPON,D.GX.COUPON,D.$k.CONTEXTUAL),t.abrupt("return",Promise.resolve(f));case 21:if(r&&r.length>0||this.utilities.hasSocialSelectors()){t.next=42;break}return(g=document.createElement("msft-edge-shopping-section")).id="emptyCouponSection",g.accordion=!0,g.title=this.flyoutData.strings.couponEmptyCouponTitle,m=this.utilities.createElement("DIV",{id:"emptyCouponDiv",style:"display: flex; flex-direction: column; justify-content: center; align-items: center; margin-bottom: 12px;"}),(v=this.utilities.createElement("DIV",{style:"margin: 20px;"})).innerHTML=this.commonAssets.getErrorImage(),v.setAttribute("aria-hidden","true"),(y=this.utilities.createElement("P",{style:"font-weight: 600; margin-top: 5px; color: #666666;"})).className=D.aM.EmptyCoupon,y.textContent=this.flyoutData.strings.couponEmptyCouponTitle,(C=this.utilities.createElement("P",{style:"margin-top: 5px;  color: #666666;"})).className=D.aM.Small,C.textContent=this.flyoutData.strings.couponEmptyCouponSubTitle,m.appendChild(v),m.appendChild(y),m.appendChild(C),g.appendChild(m),b=this.CreateModule(g,D.H7.EMPTYCOUPON,D.GX.EMPTYCOUPON,D.$k.CONTEXTUAL),t.abrupt("return",Promise.resolve(b));case 42:return t.abrupt("return",Promise.resolve(null));case 43:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"populateMainHeader",value:function(){var t,e,i,n,o,r,s,l,c,u,d,h=this.flyoutData.common.shopping,p=this.flyoutData.dataStoreModule.CashBackData,f=this.flyoutData.dataStoreModule.CouponData,g=null!==(t=null===(e=this.flyoutData.dataStoreModule.CouponData)||void 0===e?void 0:e.isCheckoutPageWithAutoApply)&&void 0!==t&&t,m=null===(i=this.flyoutData.dataStoreModule.CouponData)||void 0===i?void 0:i.BgaaResultState,v=null!==(n=null===(o=this.flyoutData.dataStoreModule.CouponData)||void 0===o?void 0:o.BgaaSavings)&&void 0!==n?n:"";if(this.CreateTrivia(h),this.utilities.isPinterest()&&null!==(r=this.flyoutData.dataStoreModule.CouponData)&&void 0!==r&&r.DomainName)new zT(this.flyoutData,this.utilities).createCouponHeader(null===(d=this.flyoutData.dataStoreModule.CouponData)||void 0===d?void 0:d.FriendlyDomainName,this.flyoutData.dataStoreModule.CouponData.DomainName,this.flyoutData.dataStoreModule.CouponData.Coupons.length,h);else if(!(null!==(s=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==s&&s.canRenderCashback&&p&&!p.isCashBackActivated&&f&&f.Coupons)||null!==(l=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==l&&l.isPersonalizedCashback||null!==(c=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==c&&c.isSignInSupportedDomainCashBack){if(this.couponsUXConfig.ShowCouponHeader){var y=this.utilities.createElement("H2");y.className="txtLarge",y.style.textAlign="center",y.style.fontWeight="500";var C,b,S,x,E=this.hasOnlyAttainableCoupons(),A=!1;if(this.lastAttainableCoupon)A=(null!==(C=null===(b=this.lastAttainableCoupon)||void 0===b?void 0:b.minimumPurchase)&&void 0!==C?C:null!==(S=null===(x=this.lastAttainableCoupon)||void 0===x?void 0:x.calculatedCutoffPrice)&&void 0!==S?S:0)<this.cartValue;if(m===a.ps.Negative)y.textContent=this.flyoutData.strings.bgaaFailedTitle;else if(this.couponsUXConfig.ShowNumCouponsInHeader&&f&&f.Coupons&&!E){var T=f.Coupons.length,I=void 0!==T?T.toString():"";if(T&&T>1){var k=this.utilities.replaceValueInKey("couponTitleWithNum",this.flyoutData.strings.couponTitleWithNum,I);y.textContent=k}else y.textContent=this.flyoutData.strings.couponTitleWithNumSingular}else E&&this.lastAttainableCoupon?y.textContent=A?this.flyoutData.strings.attCouponHeaderUnlocked:this.flyoutData.strings.attCouponHeaderLocked:y.textContent=this.flyoutData.strings.couponTitle;y.style.display="flex",y.style.flexDirection="row",y.style.alignItems="center";var w=this.utilities.createElement("IMG");if(w.src=E&&this.lastAttainableCoupon&&!A?this.flyoutData.common.resourcesEndpoint+"common/Lock.png":this.flyoutData.common.resourcesEndpoint+"common/ClappingHands.png",w.setAttribute("aria-hidden","true"),w.style.width="36px",w.style.height="36px",w.style.marginLeft="4px",y.appendChild(w),y.style.marginBottom="12px",y.style.marginTop="12px",y.slot="header-content",h.appendChild(y),m===a.ps.Positive||m===a.ps.Negative){var R,O=this.utilities.createElement("H2"),P=this.utilities.createElement("H2"),M=this.utilities.createElement("H2"),N=this.utilities.createElement("H2");if(m===a.ps.Positive)this.createBgaaTitleStyle(O,"txtMedium","center","300",this.flyoutData.strings.bgaaSuccessLeftTitle),this.createBgaaTitleStyle(P,"txtLarge","center","500","$"+v),this.createBgaaTitleStyle(M,"txtMedium","center","300",this.flyoutData.strings.bgaaSuccessRightTitle),this.createBgaaTitleStyle(N,"txtLarge","center","500",this.flyoutData.strings.bgaaSuccessRightText);else R=f&&f.Coupons&&f.Coupons.length>0?1===f.Coupons.length?this.flyoutData.strings.couponSectionTitle:this.utilities.replaceValueInKey("couponSectionPluralTitle",this.flyoutData.strings.couponSectionPluralTitle,f.Coupons.length.toString()):this.flyoutData.strings.bgaaFailedLeftTitle,this.createBgaaTitleStyle(O,"txtMedium","center","300",R),this.createBgaaTitleStyle(P,"txtMedium","center","500",this.flyoutData.strings.bgaaFailedLeftText),this.flyoutData.common.currentTheme===D.Q2.Light?P.style.color="#228B22":P.style.color="#FFFFFF",this.createBgaaTitleStyle(M,"txtMedium","center","300",this.flyoutData.strings.bgaaFailedRightTitle),this.createBgaaTitleStyle(N,"txtMedium","center","500",this.flyoutData.strings.bgaaFailedRightText);var L=this.createBgaaContainer(O,P),_=this.createBgaaContainer(M,N),F=this.utilities.createElement("DIV");F.style.height="auto",F.style.width="1px",F.style.border="1px solid #00FFFF";var H=this.utilities.createElement("DIV");H.style.top="4px",H.style.width="100%",H.style.display="flex",H.style.justifyContent="space-between",H.appendChild(L),H.appendChild(F),H.appendChild(_),H.slot="header-content",h.appendChild(H)}}}else{var Z=this.createMergedTitle();Z.style.textAlign="center",Z.slot="header-content";var B=this.createCBSeeMore();B.slot="header-content",h.appendChild(Z),B&&h.appendChild(B)}var U=null!==(u=null==f?void 0:f.IsAutoApplyAvailable)&&void 0!==u&&u;if(this.flyoutData.common.openedWith===D.Te.Banner&&U&&!g){var G=this.utilities.createElement("P");G.className="txtSmall",G.textContent=this.flyoutData.strings.bannerSubTitleFlyout,G.slot="header-content",G.style.marginTop="10px",this.flyoutData.common.currentTheme===D.Q2.Light?G.style.color="#666666":G.style.color="#FFFFFF",this.flyoutData.common.shopping.appendChild(G)}}},{key:"PostProcessing",value:function(t,e,i){if(t===D.GX.EMPTYCOUPON){var n=i.shadowRoot;if(n){var o=n.querySelector("fluent-accordion-item"),a=this.stateManagement.getState(Ia.IY.topModulePriority)!==D.H7.MAX;this.HandleEmptyModule(o,i,a)}this.DismissIfECInvalidFlyout()}else this.canRenderAutoApplyButton()?(this.createAutoApplyButton(),this.DismissIfECInvalidAfterAAFlyout()):0===e&&this.DismissIfECInvalidFlyout()}},{key:"populateEmptyBannerCouponList",value:function(t,e,i){this.populateCouponList(t,e,i,"")}},{key:"populateCouponList",value:function(t,e,i,n){var o,r=this.filterAttainableCouponList();if(r){r.length>0&&(o=r.length);var s=0;if(e){var l=new na.Z(a.$S.SeeMoreCoupons);this.pageHandlerModule.RecordAsUserAction(Ca.bS.VIEW_MORE_COUPONS),this.LogInfoEvent(a.R.ButtonClick,"",l),s=D.CS.COUPON}else o>D.CS.COUPON&&"viewAll"!==n&&(o=D.CS.COUPON);var c=null;if(e?c=t.querySelector("#divCouponWrapper"):(c=this.utilities.createElement("DIV")).id="divCouponWrapper",c)for(var u=s;u<o;u++)this.createNewCouponTile(c,r[u],n,s,e,i,u),e||t.appendChild(c);var d=this.flyoutData;this.stateManagement.addEventListener(Ia.e1.onCashBackActivated,(function(){var t=d.common.shopping.querySelectorAll("msft-shopping-coupon,msft-shopping-coupon-new");t&&t.length>0&&t.forEach((function(t){t.className.includes("isStackable")||(t.cashbackNonstackableMessage=d.strings.cbNonStackableCoupon)}))}))}}},{key:"createAutoApplyButton",value:(d=(0,t.Z)(n().mark((function e(){var i,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,S=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.flyoutData.common.shopping.querySelector("#divAutoApplyActions"),this.flyoutData.common.shopping&&!i&&(l=this.flyoutData.dataStoreModule.CashBackData,c=null===(r=this.flyoutData.dataStoreModule.CashBackData)||void 0===r?void 0:r.canRenderCashback,u=null==l?void 0:l.isCashBackActivated,d=null===(s=this.flyoutData.dataStoreModule.CouponData)||void 0===s?void 0:s.BgaaResultState,h=d===a.ps.Positive,(p=this.utilities.createElement("DIV")).id="divAutoApplyActions",p.slot="actions",p.style.width="100%",p.style.display="flex",p.style.justifyContent="center",p.style.alignItems="center",p.style.flexDirection="column",f=this.utilities.createBaseActionButton(),!c||u||null!=l&&l.isSignInSupportedDomainCashBack?(d===a.ps.Negative?f.textContent=this.flyoutData.strings.couponAutoApplyButtonRetry:f.textContent=this.couponsUXConfig.UseAlternativeCouponApplyButtonText?this.flyoutData.strings.couponAutoApplyButtonAlt:this.flyoutData.strings.couponAutoApplyButton,p.appendChild(f)):(f.textContent=this.flyoutData.strings.mergedAutoApplyButton,f.style.marginBottom="12px",p.appendChild(f),g=new o.Z(a.xu.CashBackButtonShown),this.LogInfoEvent(a.R.EdgeFlyoutStatus,f.textContent+" button shown at actions slot  auto apply visible: true",g),(m=this.utilities.createElement("fluent-button")).appearance="lightweight",m.textContent=this.flyoutData.strings.couponAutoApplyWithoutCB,m.addEventListener("click",(function(){var t=new na.Z(a.$S.AutoApply);S.pageHandlerModule.RecordAsUserAction(Ca.bS.TRY_ALL_COUPONS),S.LogInfoEvent(a.R.ButtonClick,"",t),S.pageHandlerModule.ApplyAllCoupons(h)})),this.utilities.shouldRenderSmallNotification()||p.appendChild(m),this.pageHandlerModule.RecordAsContentViewed(ba.r.REBATES_ACTIVATE_CASHBACK),v=new o.Z(a.xu.ModuleViewed),y="".concat(ba.r.REBATES_ACTIVATE_CASHBACK),y+=" merged with coupons at checkout",this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,y,v)),C=this.flyoutData.common.currentDevice,f.addEventListener("click",(0,t.Z)(n().mark((function t(){var e,i,o,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(C!==D.AS.Desktop){t.next=13;break}if(e=new na.Z(a.$S.AutoApply),S.LogInfoEvent(a.R.ButtonClick,"",e),u||!c||null!=l&&l.isSignInSupportedDomainCashBack){t.next=13;break}return i=new na.Z(a.$S.ActivateCashBack),S.LogInfoEvent(a.R.ButtonClick,"Cash back activated",i),f.disabled=!0,o=new CustomEvent(Ia.e1.StyleProcessingState,{detail:{target:f}}),S.stateManagement.dispatchEvent(o),t.next=11,S.pageHandlerModule.ActivateRebates(!0);case 11:t.sent.activated&&(r=new CustomEvent(Ia.e1.onCashBackActivatedForRewards),S.stateManagement.dispatchEvent(r));case 13:u||!c||null!=l&&l.isSignInSupportedDomainCashBack||S.pageHandlerModule.RecordAsUserAction(Ca.bS.ACTIVATE_CASHBACK),S.pageHandlerModule.RecordAsUserAction(Ca.bS.TRY_ALL_COUPONS),S.pageHandlerModule.ApplyAllCoupons(h);case 16:case"end":return t.stop()}}),t)})))),this.flyoutData.common.shouldShowCookieConsent&&(b=this.utilities.createCookieConsent())&&p.appendChild(b),this.flyoutData.common.shopping.prepend(p));case 2:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"CreateTrivia",value:(u=(0,t.Z)(n().mark((function t(e){var i,r,s,l,c,u,d,h,p,f,g,m,v;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=null===(i=this.flyoutData.dataStoreModule.CouponData)||void 0===i?void 0:i.Trivia)){t.next=27;break}if(l=this.createTriviaDiv(),c=this.createTriviaTitle(),u=this.utilities.replaceValueInKey("triviaTitleNew",this.flyoutData.strings.triviaTitleNew,r.SellerName),(d=this.createSavingsSpan()).textContent="".concat(D.iM.currency).concat(Number(r.AverageSavings).toFixed(2)),d.textContent=this.utilities.replaceStringsPlaceholders(d.textContent),h=this.flyoutData.experimentData.isExperimentActive(xt.H.savingsFoundExp),p=null===(s=this.flyoutData.dataStoreModule.CouponData)||void 0===s?void 0:s.SavingsFound,!h||!p){t.next=24;break}return t.next=13,jT.calculateTotalSavings(this.flyoutData,this.pageHandlerModule,p);case 13:if(!((f=t.sent)>0)){t.next=21;break}return t.next=17,this.createSavingsFoundTrivia(r,f,c,d);case 17:v=new o.Z(a.xu.SavingsFoundShown,void 0,f,null===(g=this.flyoutData)||void 0===g||null===(m=g.common)||void 0===m?void 0:m.domain),this.LogInfoEvent(a.R.EdgeFlyoutStatus,"Savings Found Shown",v),t.next=22;break;case 21:this.utilities.populateSingleChildHtml(c,u,d);case 22:t.next=25;break;case 24:this.utilities.populateSingleChildHtml(c,u,d);case 25:l.appendChild(c),e.prepend(l);case 27:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"setupAttainableCoupons",value:(c=(0,t.Z)(n().mark((function t(){var e,i,o,a,r,s,l,c,u,d,h,p,f,g,m,v,y,C,b,S,x,E;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=this.flyoutData.common.domain,this.utilities.checkLocalStorageTimeout(s,"lastAttainableCoupon"),this.utilities.checkLocalStorageTimeout(s,"attainableCouponMap"),!(l=this.flyoutData.dataLoader.GetLoadTimeDataValue("storage",void 0))){t.next=9;break}u={value:{stringValue:l.CartValues}},c=u,t.next=12;break;case 9:return t.next=11,this.pageHandlerModule.GetStorageValue("CartValues");case 11:c=t.sent;case 12:if(null!==(e=c)&&void 0!==e&&null!==(i=e.value)&&void 0!==i&&i.stringValue)try{h=JSON.parse(null===(d=c)||void 0===d?void 0:d.value.stringValue),p=new Date,f=h?h[s]:void 0,g=f?new Date(f.timestamp):null,m=g?p.getTime()-g.getTime():0,Math.floor(m/1e3/60/60/24)>0?(h[s]=null,this.pageHandlerModule.SetStorageValue("CartValues",JSON.stringify({value:JSON.stringify(h)}))):(v=f.cartValue,this.cartValue=v?v.OrderTotal:-1)}catch(t){}if(y=this.utilities.loadLocalStorageAsJSON("lastAttainableCoupon"),C=null!==(o=y[s])&&void 0!==o?o:{},this.lastAttainableCoupon=C.referenceCoupon,b=this.utilities.loadLocalStorageAsJSON("attainableCouponMap"),S=null!==(a=b[s])&&void 0!==a?a:{},this.attainableCouponList=null!==(r=S.attainableCouponList)&&void 0!==r?r:[],!l){t.next=24;break}E={value:{stringValue:l.CompletedPurchase}},x=E,t.next=27;break;case 24:return t.next=26,this.pageHandlerModule.GetStorageValue("CompletedPurchase");case 26:x=t.sent;case 27:if(x)try{y[s]={},b[s]={},this.utilities.setStorageBoolean("CompletedPurchase",!1),yt("lastAttainableCoupon",JSON.stringify(y)),yt("attainableCouponMap",JSON.stringify(b))}catch(t){}case 28:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"canRenderAutoApplyButton",value:function(){var t,e,i,n,o,a=this.stateManagement.getState(Ia.IY.isAutoApplyVisible),r=null===(t=this.flyoutData.dataStoreModule.CheckoutUserData)||void 0===t?void 0:t.shouldRenderCheckoutAutofill,s=this.hasOnlyAttainableCoupons(),l=null!==(e=null===(i=this.lastAttainableCoupon)||void 0===i?void 0:i.minimumPurchase)&&void 0!==e?e:null!==(n=null===(o=this.lastAttainableCoupon)||void 0===o?void 0:o.calculatedCutoffPrice)&&void 0!==n?n:0;return!!(a&&!r&&!s||s&&this.lastAttainableCoupon&&l&&this.cartValue&&l<this.cartValue)}},{key:"createBgaaTitleStyle",value:function(t,e,i,n,o){t.className=e,t.style.textAlign=i,t.style.fontWeight=n,t.textContent=o}},{key:"createBgaaContainer",value:function(t,e){var i=this.utilities.createElement("DIV");return i.style.width="100%",i.style.display="flex",i.style.flexDirection="column",i.style.justifyContent="space-between",i.appendChild(t),i.appendChild(e),i}},{key:"createSavingsFoundTrivia",value:(r=(0,t.Z)(n().mark((function t(e,i,o,a){var r,s,l,c,u,d;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this.flyoutData.strings.savingsFoundTitle,s=this.utilities.replaceValueInKey("savingsFoundTriviaTitle",this.flyoutData.strings.savingsFoundTriviaTitle,e.SellerName),l=this.createSavingsSpan(),c="".concat(D.iM.currency).concat(i.toFixed(2)),l.textContent=this.utilities.replaceStringsPlaceholders(c),u=this.utilities.createElement("DIV",{className:"savingsFoundTextContainer"}),this.utilities.populateSingleChildHtml(u,r,l),d=this.utilities.createElement("DIV",{className:"savingsFoundTextContainer"}),this.utilities.populateSingleChildHtml(d,s,a),o.style.flexDirection="row-reverse",o.appendChild(u),o.appendChild(d);case 12:case"end":return t.stop()}}),t,this)}))),function(t,e,i,n){return r.apply(this,arguments)})},{key:"createTriviaTitle",value:function(){var t=this.utilities.createElement("H2");return t.className="triviaTitle",t.style.display="flex",t.style.columnGap="3px",t.style.fontSize="12px",t}},{key:"createSavingsSpan",value:function(){return this.utilities.createElement("SPAN",{style:"display: inline; vertical-align: middle; color: var(--neutral-foreground-rest); font-size: 12px; font-weight: bold;"})}},{key:"createTriviaDiv",value:function(){var t=this.utilities.createElement("DIV");return t.slot="start-content",t.style.background=this.flyoutData.common.currentTheme===D.Q2.Dark?"linear-gradient(90deg, rgba(238, 228, 0, 0.1) 0%, rgba(0, 224, 255, 0.1) 47.4%, rgba(158, 0, 255, 0.1) 100%)":"linear-gradient(90deg, #FFF9D9 0%, #E9FBFF 53.12%, #DDEBFF 100%)",t.style.width="100%",t.style.minHeight="36px",t.style.justifyContent="center",t.style.display="flex",t}},{key:"DismissIfECInvalidFlyout",value:function(){var t,e=null===(t=this.flyoutData.dataStoreModule.CheckoutUserData)||void 0===t?void 0:t.shouldRenderCheckoutAutofill;this.flyoutData.experimentData.isExperimentActive(xt.H.expressCheckout)&&this.flyoutData.common.openedWith&&this.flyoutData.common.openedWith===D.Te.Auto&&this.flyoutData.common.pageStatus.ExpressCheckoutStatus&&!e&&this.DismissECInvalidFlyout()}},{key:"DismissIfECInvalidAfterAAFlyout",value:(i=(0,t.Z)(n().mark((function t(){var e=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.flyoutData.common.edgeDriverDataForFlyout&&this.flyoutData.common.edgeDriverDataForFlyout.is_auto_apply_completed&&this.flyoutData.common.edgeDriverDataForFlyout.express_checkout_status&&this.flyoutData.experimentData.isExperimentActive(xt.H.expressCheckout)&&this.pageHandlerModule.GetStorageValue("ECInvalidDismiss").then((function(t){var i;if("true"===(null==t||null===(i=t.value)||void 0===i?void 0:i.stringValue)){var n=new aa.Z;n.stringValue="false",e.pageHandlerModule.SetStorageValue("ECInvalidDismiss",n),e.DismissECInvalidFlyout()}}));case 3:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"DismissECInvalidFlyout",value:function(){var t=new o.Z(a.xu.CheckoutUserDataInvalid);this.LogInfoEvent(a.R.EdgeFlyoutStatus,"",t),this.pageHandlerModule.DismissPopup()}},{key:"createNewCouponTile",value:function(t,e,i,n,o,r,s){var l,c,u,d,h=this,p=document.createElement("msft-shopping-coupon-new");p.name=e.couponCode,p.subTitle=e.attribution,p.description=this.utilities.cleanInput(e.title),p.indicatorMessage=this.flyoutData.strings.couponCopyLabelRefresh.toUpperCase(),p.selectedIndicatorMessage=this.flyoutData.strings.couponCopied.toUpperCase(),p.setAttribute("title","".concat(e.couponCode," - ").concat(e.title)),e.successRate&&e.successRate>=75&&(p.successRate="".concat(e.successRate,"% SUCCESS"));var f=this.flyoutData.common.domain,g=this.utilities.loadLocalStorageAsJSON("attainableCouponMap"),m=null!==(l=null==e?void 0:e.minimumPurchase)&&void 0!==l?l:null!==(c=null==e?void 0:e.calculatedCutoffPrice)&&void 0!==c?c:0;if(this.attainableUtilities.isAttainableCoupon(e,this.cartValue)){p.hasIcon=!0;var v=this.utilities.createElement("div");v.innerHTML=this.assets.getLockIcon(),v.slot="icon";var y=v.querySelector("path");if(this.flyoutData.common.currentTheme===D.Q2.Dark&&y&&(y.style.fill="#FFFFFF"),p.append(v),!this.attainableCouponList.includes(e.couponCode)){this.attainableCouponList.push(e.couponCode);var C=new Date;g[f]={attainableCouponList:this.attainableCouponList,timestamp:C},yt("attainableCouponMap",JSON.stringify(g))}}else if(this.attainableCouponList.includes(e.couponCode)&&m<this.cartValue){p.hasIcon=!0,p.regularColors=!0;var b=this.utilities.createElement("div");b.innerHTML=this.assets.getUnlockedIcon(),b.slot="icon";var S=b.querySelector("path");this.flyoutData.common.currentTheme===D.Q2.Dark&&S&&(S.style.fill="#FFFFFF"),p.append(b)}e.couponCode===i&&(p.style.boxSizing="border-box",p.style.boxShadow="0px 0px 4px 1px rgba(114, 155, 238, 0.4), 0px 0px 8px 2px rgba(114, 155, 238, 0.2)",p.style.borderRadius="4px");var x=null===(u=this.flyoutData.dataStoreModule.CashBackData)||void 0===u?void 0:u.canRenderCashback;p.label="".concat(this.flyoutData.strings.couponCopyLabel," ").concat(e.couponCode),!e.isStackable&&x&&null!==(d=this.flyoutData.dataStoreModule.CashBackData)&&void 0!==d&&d.isCashBackActivated&&(p.cashbackNonstackableMessage=this.flyoutData.strings.cbNonStackableCoupon),e.isStackable&&(p.className+=" isStackable"),p.addEventListener("click",(function(){var t=new na.Z(a.$S.CouponCopied),i="Coupon copied";!e.isStackable&&x?(t=new na.Z(a.$S.CouponCopiedNonStackableWithCashBack),i="Coupon copied, nonStackable"):e.isStackable&&x&&(t=new na.Z(a.$S.CouponCopiedStackableWithCashBack),i="Coupon copied, stackable"),h.LogInfoEvent(a.R.ButtonClick,i,t),h.pageHandlerModule.RecordAsUserAction(Ca.bS.COUPONS_COPIED),h.pageHandlerModule.CopyCoupon(p.name)})),t.appendChild(p);var E=this.flyoutData.common.currentDevice;s===n&&o&&r&&E===D.AS.Desktop&&p&&p.focus()}},{key:"isAutoApplyVisible",value:function(){var t,e,i=this.flyoutData.dataStoreModule.CashBackData;return null!==(t=(null===(e=this.flyoutData.dataStoreModule.CouponData)||void 0===e?void 0:e.isCheckoutPageWithAutoApply)&&!(null!=i&&i.isTurnedOff)&&!(null!=i&&i.isConfirmationPage))&&void 0!==t&&t}},{key:"createCBSeeMore",value:function(){var t,e=new CustomEvent(Ia.e1.CreateCBLearnMore,{detail:{callback:function(e){t=e}}});return this.stateManagement.dispatchEvent(e),t}},{key:"createMergedTitle",value:function(){var t=this,e=this.utilities.createElement("DIV",{style:"margin-left: 10px; margin-right: 10px;"});e.setAttribute("role","heading"),e.setAttribute("aria-level","2"),e.id="divMergedCashBackTitle";var i=this.utilities.createElement("H2");i.className="h2RebatesTitle";var n=this.flyoutData,o=this.utilities,a=new CustomEvent(Ia.e1.CreateCommissionArrow,{detail:{callback:function(e){if(e){var a,r,s=null===(a=n.dataStoreModule.CouponData)||void 0===a||null===(r=a.Coupons)||void 0===r?void 0:r.length,l=void 0!==s?s.toString():"";if(s&&s>1){var c=o.replaceValueInKey("cbMergedTitle",t.flyoutData.strings.cbMergedTitle,l);o.populateSingleChildHtml(i,c,e)}else o.populateSingleChildHtml(i,t.flyoutData.strings.cbMergedSingularTitle,e)}}}});return this.stateManagement.dispatchEvent(a),e.appendChild(i),e}},{key:"HandleEmptyModule",value:function(t,e,i){var n=this,r=e.querySelector("#emptyCouponDiv");if(r)if(i)r.style.display="none",e.accordion=!1,Tt.SO.queueUpdate((function(){var t=null==e?void 0:e.shadowRoot;if(t){var i=t.querySelector(".heading");if(i&&(i.style.marginLeft="12px",i.style.marginTop="6px"),n.flyoutData.common.isPane){var o=t.querySelector(".control");o&&(o.style.height="56px",o.style.display="flex",o.style.alignItems="center")}}}));else if(t){e.accordion=!0,e.expanded=!0;var s=t.shadowRoot;if(s){var l=s.querySelector(".heading");l&&(l.style.display="none")}var c=new o.Z(a.xu.EmptyCoupons);this.LogInfoEvent(a.R.EdgeFlyoutStatus,"Empty coupons image was shown",c)}}},{key:"LogInfoEvent",value:function(t,e,i){this.logModule.LogInfoEvent(t,e,i,ya.g.CouponImpressionId)}},{key:"filterAttainableCouponList",value:function(){var t,e,i=this,n=null!==(t=null===(e=this.flyoutData.dataStoreModule.CouponData)||void 0===e?void 0:e.Coupons)&&void 0!==t?t:[];if(n.length<1)return[];var o=n.filter((function(t){var e,n,o=null!==(e=t.minimumPurchase)&&void 0!==e?e:null!==(n=t.calculatedCutoffPrice)&&void 0!==n?n:0;return i.attainableUtilities.isAttainableCoupon(t,i.cartValue)||i.attainableCouponList.includes(t.couponCode)||i.lastAttainableCoupon&&o<i.cartValue&&i.lastAttainableCoupon.couponCode===t.couponCode})),a=n.filter((function(t){var e,n,o=null!==(e=t.minimumPurchase)&&void 0!==e?e:null!==(n=t.calculatedCutoffPrice)&&void 0!==n?n:0;return!(i.attainableUtilities.isAttainableCoupon(t,i.cartValue)||i.attainableCouponList.includes(t.couponCode)||i.lastAttainableCoupon&&o<i.cartValue&&i.lastAttainableCoupon.couponCode===t.couponCode)}));return o.concat(a)}},{key:"hasOnlyAttainableCoupons",value:function(){var t,e,i,n=this,o=null!==(t=null===(e=this.flyoutData.dataStoreModule.CouponData)||void 0===e?void 0:e.Coupons)&&void 0!==t?t:[];if(this.lastAttainableCoupon||(null===(i=this.attainableCouponList)||void 0===i?void 0:i.length)>0){var a=o.filter((function(t){var e;return!(n.attainableUtilities.isAttainableCoupon(t,n.cartValue)||null!==(e=n.attainableCouponList)&&void 0!==e&&e.includes(t.couponCode)||n.lastAttainableCoupon&&n.lastAttainableCoupon.couponCode===t.couponCode)}));return a.length<1}return!1}}]),f}(jf.Z),JT=qT,QT=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n            .gradient {\n                color: transparent;\n                background: linear-gradient(92.78deg, #00D4A1 -58.01%, #0048D4 44.73%, #6A00D4 141.23%);\n                -webkit-background-clip: text;\n            }\n            .linkRefresh:hover {\n                background: linear-gradient(265.08deg, rgba(36, 255, 0, 0.06) -6.71%, rgba(0, 210, 255, 0.06) 38.87%, rgba(255, 188, 125, 0.06) 93.88%)!important;\n            }\n            @media (prefers-color-scheme: dark) {\n                .gradient {\n                    background: linear-gradient(92.78deg, #71FFDD -58.01%, #71FFDD -58.01%, #9CBEFF 44.73%, #D3A6FF 141.23%);\n                    -webkit-background-clip: text;\n                    -webkit-text-fill-color: transparent;\n                }\n            }"}}]),t}();function tI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var eI,iI,nI=function(t){(0,O.Z)(i,t);var e=tI(i);function i(t,n){var o;return(0,s.Z)(this,i),o=e.call(this),(0,I.Z)((0,R.Z)(o),"assets",void 0),(0,I.Z)((0,R.Z)(o),"logModule",void 0),(0,I.Z)((0,R.Z)(o),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(o),"flyoutData",void 0),(0,I.Z)((0,R.Z)(o),"utilities",void 0),o.logModule=n.logModule,o.pageHandlerModule=n.pageHandlerModule,o.flyoutData=t,o.utilities=n.viewModulesUtilities,o.assets=new QT,o}return(0,l.Z)(i,[{key:"GetModuleName",value:function(){return D.GX.DEALS}},{key:"ShouldRenderModule",value:function(){var t,e=this.flyoutData.dataStoreModule.CouponData,i=null!==(t=e&&e.Deals&&e.Deals.length>0)&&void 0!==t&&t;return Promise.resolve(i)}},{key:"renderModule",value:function(){var t;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var e=this.createElement("msft-edge-shopping-section");e.id="dealsSection";var i=null===(t=this.flyoutData.dataStoreModule.CouponData)||void 0===t?void 0:t.Deals;if(i){var n,o=i.length.toString()+" deal"+(i.length>1?"s":"");this.populateDealsList(e,!1,!1);var a=this.flyoutData;this.utilities.createCommonListStructure(e,o,null===(n=this.flyoutData.dataStoreModule.CouponData)||void 0===n?void 0:n.Deals,this.GetModuleName(),(function(t){var e=D.CS.DEAL;return t&&a.common.bannerContext===D.De.VIEWALL&&(e=t.length),e}),this.populateDealsList.bind(this))}return Promise.resolve(this.CreateModule(e,D.H7.DEALS,D.GX.DEALS,D.$k.CONTEXTUAL))}},{key:"populateDealsList",value:function(t,e,i){var n,o=null===(n=this.flyoutData.dataStoreModule.CouponData)||void 0===n?void 0:n.Deals;if(o){var a=0;o.length>0&&(a=o.length);var r=0;e?r=D.CS.DEAL:a>D.CS.DEAL&&(a=D.CS.DEAL);for(var s=r;s<a;s++){var l=o[s],c=this.createDealsTile(l.headerText,l.id,l.offerUrl);t.appendChild(c),s===r&&e&&i&&this.flyoutData.common.currentDevice===D.AS.Desktop&&c&&c.focus()}}}},{key:"populateMainHeader",value:function(){if(this.flyoutData.common.shopping&&this.flyoutData.dataStoreModule.CouponData&&this.flyoutData.dataStoreModule.CouponData.Deals.length>0){var t=this.utilities.createElement("DIV",{style:"width: 100%; overflow: hidden; position: relative; display: flex; flex-direction: row; justify-content: flex-start; column-gap: 10px;"}),e=this.utilities.createElement("DIV",{style:"display: flex;\n                    flex-direction: column;\n                    justify-content: center;\n                    text-align:left;\n                    vertical-align: middle;"}),i=this.utilities.createElement("P",{style:"font-weight: 600;\n                        color: var(--neutral-foreground-rest);\n                        place-self: center;"});i.className="txtLarge",i.style.fontSize="18px",i.style.lineHeight="21px";var n=this.utilities.replaceValueInKey("dealsTitle",this.flyoutData.strings.dealsTitle,this.utilities.CapitalizeWordsInString(this.flyoutData.dataStoreModule.CouponData.FriendlyDomainName));this.flyoutData.common.isPane||(t.style.marginBottom="13px"),i.style.fontWeight="400",i.style.placeSelf="unset",i.style.fontSize="20px",i.style.lineHeight="23px",n=this.utilities.CapitalizeWordsInString(this.flyoutData.dataStoreModule.CouponData.FriendlyDomainName),i.textContent=n,e.appendChild(i),e.style.rowGap="2px";var o=this.utilities.createElement("P");o.className="txtSmall",o.style.fontSize="12px",o.style.color=this.flyoutData.common.currentTheme===D.Q2.Dark?"#FFFFFF":"#666666",o.textContent=this.utilities.replaceValueInKey("dealsSubTitle",this.flyoutData.strings.dealsSubTitle,this.flyoutData.dataStoreModule.CouponData.DomainName),e.appendChild(o);var a=this.utilities.createElement("IMG",{style:"width: 38px; height: 38px; float: left;\n                box-shadow: 0 0 calc((var(--elevation) * 0.225px) + 2px) rgba(0, 0, 0, calc(0.11 * (2 - var(--background-luminance, 1)))), 0 calc(var(--elevation) * 0.4px) calc((var(--elevation) * 0.9px)) rgba(0, 0, 0, calc(0.13 * (2 - var(--background-luminance, 1))));\n                border: 1px solid;\n                border-radius: 8px;\n                border-color: #ECECEC;"});if(a.src="".concat(this.flyoutData.common.resourcesEndpoint,"retailerBranding/SquareIcons/").concat(this.flyoutData.dataStoreModule.CouponData.DomainName,".png"),a.setAttribute("aria-hidden","true"),a.addEventListener("error",(function(){t.style.gridTemplateColumns="auto",a.style.visibility="hidden"})),t.appendChild(a),t.appendChild(e),this.flyoutData.common.isPane){var r=this.flyoutData.common.shopping.querySelector("#dealsSection");r&&(r.prepend(t),r.slot="header-content")}else t.slot="header-content",this.flyoutData.common.shopping.appendChild(t)}}},{key:"createElement",value:function(t,e,i){var n=document.createElement(t);return e&&n.setAttribute("style",e),i&&(n.innerText=i),n}},{key:"managePCLinkEvents",value:function(t,e,i){var n=this,o=this.flyoutData.common.currentDevice;t.addEventListener("click",(function(){o===D.AS.Desktop&&n.navigateToRetailer(e,i,lg.$.NEW_FOREGROUND_TAB)})),t.addEventListener("mousedown",(function(t){if(1===t.button)n.navigateToRetailer(e,i,lg.$.NEW_FOREGROUND_TAB)}))}},{key:"navigateToRetailer",value:function(t,e,i){var n=new na.Z(a.$S.NavigateToRetailerOffer);this.pageHandlerModule.RecordAsUserAction(Ca.bS.NAVIGATE_TO_DEAL_OFFER),this.logModule.LogInfoEvent(a.R.ButtonClick,"",n),this.pageHandlerModule.NavigateToDealWithDisposition(t,e,i)}},{key:"createDealsTile",value:function(t,e,i){var n=this.utilities.createElement("BUTTON",{style:"background: transparent;\n                --elevation: 5;\n                overflow: hidden;\n                align-items: center;\n                padding: 12px 12px 10px;\n                margin-bottom: 10px;\n                cursor: pointer;\n                border: calc(var(--outline-width) * 1px) solid transparent;\n                border-radius: calc(var(--elevated-corner-radius) * 1px);\n                text-align: left;\n                display: table;\n                width: 100%;"});n.className="divDealsLink";var o=this.utilities.createElement("DIV",{style:"position: relative; height: 100%; display: grid; grid-template-columns: auto 60% auto; grid-gap: 20px;"});n.style.border="none";n.style.borderTop="1px solid ".concat("rgb(236, 236, 236, 0.08)"),n.style.marginBottom="0px",n.className+=" linkRefresh",o.style.alignItems="center",n.appendChild(o);var a=this.utilities.createElement("IMG",{style:"width: 32px; height: 32px; place-self: center"});a.src=this.flyoutData.common.resourcesEndpoint+"retailerBranding/SquareIcons/DollarIcon.png",a.addEventListener("error",(function(){o.style.gridTemplateColumns="auto",o.removeChild(a)})),a.setAttribute("aria-hidden","true"),o.appendChild(a);var r=this.utilities.createElement("DIV",{style:"justify-content: space-around;\n                flex-direction: column;\n                max-width: 192px;"});o.appendChild(r);var s=this.utilities.createElement("P",{style:"margin: 0px;\n                    margin-bottom: 5px;"});s.className="txtMedium",s.style.fontWeight="600",s.style.fontSize="14px",s.style.lineHeight="16px",s.style.color="var(--neutral-foreground-rest)",s.textContent=t,r.appendChild(s),n.setAttribute("aria-label","".concat(this.flyoutData.strings.getDeal,", ").concat(t)),n.setAttribute("role","button");var l=this.utilities.createElement("P");return l.className="txtSmall gradient",l.style.fontWeight="500",l.style.fontSize="12px",l.style.lineHeight="14px",l.style.placeSelf="center",l.textContent=this.flyoutData.strings.getDeal,o.appendChild(l),this.managePCLinkEvents(n,e,i),n}}]),i}(jf.Z),oI=nI,aI=i(228),rI=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getThumbsUp",value:function(){return A.Z.getTrustedHTML(eI||(eI=(0,E.Z)(['<svg class="feedbackSVGs" slot="unselected-glyph" xmlns="http://www.w3.org/2000/svg" width="12" height="15" viewBox="0 0 12 15" fill="none">\n                                          <path d="M8.9999 3.0102C8.9999 1.38227 8.23983 0.211066 6.99563 0.211066C6.3457 0.211066 6.10136 0.572932 5.86823 1.40827L5.73083 1.92287C5.6635 2.162 5.5463 2.5692 5.3795 3.14353C5.37503 3.15893 5.36843 3.17347 5.3599 3.1868L3.4487 6.17727C2.99667 6.88453 2.32969 7.4282 1.54577 7.7284L1.23025 7.8492C0.399096 8.1674 -0.0834571 9.03658 0.0859628 9.91029L0.355623 11.301C0.516576 12.1311 1.14568 12.7917 1.9669 12.993L7.05203 14.2393C8.7395 14.6529 10.4451 13.6296 10.8744 11.9461L11.8176 8.2466C12.1133 7.08713 11.413 5.90747 10.2534 5.6118C10.0785 5.5672 9.8987 5.54467 9.7181 5.54467L8.50256 5.54467C8.8333 4.45607 8.9999 3.6162 8.9999 3.0102ZM1.06768 9.71993C0.99067 9.32279 1.21001 8.92771 1.58781 8.78306L1.90333 8.66226C2.88707 8.2856 3.72406 7.60333 4.29132 6.7158L6.2025 3.72533C6.2625 3.6314 6.30876 3.52933 6.33983 3.42233L6.70776 2.14213L6.8489 1.6146C6.94183 1.28927 6.98863 1.21107 6.99563 1.21107C7.5741 1.21107 7.9999 1.86713 7.9999 3.0102C7.9999 3.59987 7.7827 4.5672 7.34403 5.88693C7.23643 6.2106 7.47736 6.54467 7.8185 6.54467L9.7181 6.54467C9.81536 6.54467 9.91216 6.5568 10.0064 6.5808C10.6308 6.74 11.0078 7.3752 10.8486 7.99953L9.90536 11.699C9.61163 12.8509 8.4447 13.551 7.2901 13.2681L2.20495 12.0217C1.76276 11.9133 1.42401 11.5576 1.33734 11.1107L1.06768 9.71993Z" fill="#959595"/>\n                                          </svg>\n                                          <svg slot="selected-glyph" xmlns="http://www.w3.org/2000/svg" width="13" height="15" viewBox="0 0 13 15" fill="none">\n                                          <path d="M9.03773 5.54467C9.34493 4.59327 9.5 3.76053 9.5 3.04247C9.5 1.44333 8.874 0.210867 7.83334 0.210867C7.3002 0.210867 7.11474 0.510667 6.91167 1.24187L6.7318 1.92287C6.66454 2.162 6.54733 2.5692 6.38047 3.14353C6.376 3.15893 6.36947 3.17347 6.36087 3.1868L4.44971 6.17727C3.99768 6.88453 3.3307 7.4282 2.54678 7.7284L1.70862 8.04927C1.17971 8.2518 0.872628 8.80489 0.980441 9.36089L1.43788 11.72C1.54931 12.2947 1.98484 12.752 2.55337 12.8914L8.05307 14.2393C9.74053 14.6529 11.4461 13.6296 11.8754 11.9461L12.9246 7.83093C13.1748 6.8498 12.5822 5.85167 11.6011 5.60147C11.4531 5.56373 11.3009 5.54467 11.1481 5.54467L9.03773 5.54467Z" fill="#1683D8"/>\n                                          </svg>'])))}},{key:"getThumbsDown",value:function(){return A.Z.getTrustedHTML(iI||(iI=(0,E.Z)(['<svg class="feedbackSVGs" slot="unselected-glyph" xmlns="http://www.w3.org/2000/svg" width="12" height="15" viewBox="0 0 12 15" fill="none">\n                                          <path d="M8.99965 11.9898C8.99965 13.6177 8.23958 14.7889 6.99539 14.7889C6.34545 14.7889 6.10112 14.4271 5.86798 13.5917L5.73058 13.0771C5.66325 12.838 5.54605 12.4308 5.37925 11.8565C5.37479 11.8411 5.36819 11.8265 5.35965 11.8132L3.44846 8.82273C2.99642 8.11547 2.32944 7.5718 1.54552 7.2716L1.23 7.1508C0.398852 6.8326 -0.0837017 5.96342 0.0857183 5.08971L0.355378 3.69899C0.516332 2.86893 1.14544 2.20833 1.96665 2.00705L7.05178 0.760694C8.73925 0.347101 10.4449 1.37039 10.8741 3.05394L11.8174 6.7534C12.1131 7.91287 11.4127 9.09253 10.2532 9.3882C10.0783 9.4328 9.89845 9.45533 9.71785 9.45533H8.50232C8.83305 10.5439 8.99965 11.3838 8.99965 11.9898ZM1.06743 5.28007C0.990425 5.67721 1.20977 6.07229 1.58757 6.21694L1.90309 6.33774C2.88683 6.7144 3.72382 7.39667 4.29108 8.2842L6.20225 11.2747C6.26225 11.3686 6.30852 11.4707 6.33958 11.5777L6.70752 12.8579L6.84865 13.3854C6.94158 13.7107 6.98839 13.7889 6.99539 13.7889C7.57385 13.7889 7.99965 13.1329 7.99965 11.9898C7.99965 11.4001 7.78245 10.4328 7.34379 9.11307C7.23619 8.7894 7.47712 8.45533 7.81825 8.45533H9.71785C9.81512 8.45533 9.91192 8.4432 10.0061 8.4192C10.6305 8.26 11.0076 7.6248 10.8484 7.00047L9.90512 3.30101C9.61138 2.14911 8.44445 1.44896 7.28985 1.73195L2.2047 2.9783C1.76251 3.08668 1.42377 3.44239 1.3371 3.88935L1.06743 5.28007Z" fill="#959595"/>\n                                          </svg>\n                                          <svg slot="selected-glyph" xmlns="http://www.w3.org/2000/svg" width="13" height="15" viewBox="0 0 13 15" fill="none">\n                                          <path d="M9.03773 9.45533C9.34493 10.4067 9.5 11.2395 9.5 11.9575C9.5 13.5567 8.874 14.7891 7.83334 14.7891C7.3002 14.7891 7.11474 14.4893 6.91167 13.7581L6.7318 13.0771C6.66454 12.838 6.54733 12.4308 6.38047 11.8565C6.376 11.8411 6.36947 11.8265 6.36087 11.8132L4.44971 8.82273C3.99768 8.11547 3.3307 7.5718 2.54678 7.2716L1.70862 6.95073C1.17971 6.7482 0.872628 6.19511 0.980441 5.63911L1.43788 3.27999C1.54931 2.70533 1.98484 2.24799 2.55337 2.10865L8.05307 0.760693C9.74053 0.3471 11.4461 1.37039 11.8754 3.05394L12.9246 7.16907C13.1748 8.1502 12.5822 9.14833 11.6011 9.39853C11.4531 9.43627 11.3009 9.45533 11.1481 9.45533L9.03773 9.45533Z" fill="#1683D8"/>\n                                          </svg>'])))}},{key:"getStyles",value:function(){return"\n        #feedbackDiv {\n            display: flex;\n            flex-direction: row;\n            justify-content: flex-start;\n            border-top: 1px solid #F1F1F1;\n            background: #FFFFFF;\n        }\n        #feedbackPrompt {\n            font-size: 12px;\n            line-height: 16px;\n            margin-left: 12px;\n            margin-top: 12px;\n            margin-bottom: 10px;\n            font-weight: 600;\n            color: rgba(0, 0, 0, 0.83);\n        }\n        .iconButton {\n            border-color: transparent;\n            background: transparent;\n            margin-top: 5px;\n            width: 32px;\n            height: 32px;\n            cursor: pointer;\n        }\n        :is(.iconButton:hover, .iconButton:focus) {\n            background: #E6E6E6;\n            border-radius: 2px;\n            outline: none;\n        }\n        .feedbackText {\n            font-size: 14px;\n            line-height: 18px;\n            margin: 0px;\n            color: rgba(0, 0, 0, 0.83);\n        }\n        #closeButton {\n            margin-top: 2px;\n            margin-left: auto;\n            margin-right: 5px;\n            padding: 0px;\n            border: none;\n            background: transparent;\n            cursor: pointer;\n        }\n        #closeButton:focus {\n            outline: none;\n            border: 2px solid #898989;\n            border-radius: 3px;\n        }\n        #feedbackDivThanks {\n            background: linear-gradient(90deg, #EEFCFF 20.31%, #F5F9FF 46.87%, #FFFFFF 98.44%);\n            padding: 10px;\n            display: flex;\n            flex-direction: row;\n            justify-content: flex-start;\n            border-top: 1px solid #F1F1F1;\n            column-gap: 12px;\n        }\n        @media (prefers-color-scheme: dark) {\n            #feedbackDiv {\n                background: #3b3b3b;\n                border-top: 1px solid rgb(241, 241, 241, 0.08);\n            }\n            #feedbackDivThanks {\n                background: linear-gradient(90deg, #324654 20.31%, #3E444E 46.87%, #3b3b3b 98.44%);\n                border-top: 1px solid rgb(241, 241, 241, 0.08);\n            }\n            #feedbackPrompt, .feedbackText {\n                color: rgba(255, 255, 255, 0.83);\n            }\n            :is(.iconButton:hover, .iconButton:focus) {\n                background: #5f5f5f;\n            }\n            #closeButton svg path {\n                fill: #FFFFFF;\n            }\n        }"}}]),t}();function sI(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return lI(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return lI(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function lI(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function cI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var uI=new Map;uI[0]=a.$S.FeedbackDislikeMenu0,uI[1]=a.$S.FeedbackDislikeMenu1,uI[2]=a.$S.FeedbackDislikeMenu2,uI[3]=a.$S.FeedbackDislikeMenu3,uI[4]=a.$S.FeedbackDislikeMenu4;var dI=function(e){(0,O.Z)(u,e);var i,o,r,c=cI(u);function u(t,e,i){var n,o,a;return(0,s.Z)(this,u),a=c.call(this),(0,I.Z)((0,R.Z)(a),"assets",void 0),(0,I.Z)((0,R.Z)(a),"flyoutData",void 0),(0,I.Z)((0,R.Z)(a),"utilities",void 0),(0,I.Z)((0,R.Z)(a),"logModule",void 0),(0,I.Z)((0,R.Z)(a),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(a),"commonAssets",void 0),(0,I.Z)((0,R.Z)(a),"clientId",void 0),(0,I.Z)((0,R.Z)(a),"options",void 0),(0,I.Z)((0,R.Z)(a),"isBNPL",void 0),(0,I.Z)((0,R.Z)(a),"feedbackPromptText",void 0),a.flyoutData=t,a.utilities=e.viewModulesUtilities,a.logModule=e.logModule,a.pageHandlerModule=e.pageHandlerModule,a.commonAssets=i,a.assets=new rI,a.clientId="",a.isBNPL=!(null===(n=a.flyoutData.dataStoreModule)||void 0===n||null===(o=n.VirtualCardData)||void 0===o||!o.cardProvider),a.options=[],a.isBNPL?(a.options.push(a.flyoutData.dataLoader.GetLoadTimeDataValue("feedbackOptionAutofillDontWork","")),a.options.push(a.flyoutData.dataLoader.GetLoadTimeDataValue("feedbackOptionTookTooMuchTime",""))):(a.options.push(a.flyoutData.dataLoader.GetLoadTimeDataValue("feedbackOptionCouponsDontWork","")),a.options.push(a.flyoutData.dataLoader.GetLoadTimeDataValue("feedbackOptionTooFrequently","")),a.options.push(a.flyoutData.dataLoader.GetLoadTimeDataValue("feedbackOptionIncorrectInfo","")),a.options.push(a.flyoutData.dataLoader.GetLoadTimeDataValue("feedbackOptionUntrustworthy",""))),a.options.push(a.flyoutData.dataLoader.GetLoadTimeDataValue("feedbackOptionOthers","")),a.feedbackPromptText=a.isBNPL?a.flyoutData.strings.bnplFeedbackPrompt:a.flyoutData.strings.feedbackPrompt,a}return(0,l.Z)(u,[{key:"GetModuleName",value:function(){return D.GX.FEEDBACK}},{key:"ShouldRenderModule",value:function(){return this.flyoutData.common.openedWith!==D.Te.Auto?Promise.resolve(!1):this.isBNPL?Promise.resolve(this.flyoutData.dataLoader.GetLoadTimeDataValue("is_bnpl_feedback_enabled",!1)):Promise.resolve(this.flyoutData.dataLoader.GetLoadTimeDataValue("is_feedback_enabled",!1))}},{key:"populateMainHeader",value:function(){}},{key:"renderModule",value:(r=(0,t.Z)(n().mark((function t(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),(e=this.utilities.createElement("div")).id="feedbackDiv",e.style.zIndex="50",e.style.position="sticky",e.style.bottom="0px",this.flyoutData.common.isPane&&(e.style.height="56px"),e.style.alignItems="center",e.setAttribute("role","group"),this.createFeedbackPrompt(e),t.abrupt("return",Promise.resolve(this.CreateModule(e,D.H7.MAX,D.GX.FEEDBACK,D.$k.CONTEXTUAL)));case 11:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"ShowAlways",value:function(){return!0}},{key:"createFeedbackPrompt",value:(o=(0,t.Z)(n().mark((function e(i){var o,a,r,s,l=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=this.utilities.createElement("p")).className="txtSmall",o.id="feedbackPrompt",o.textContent=this.feedbackPromptText,this.flyoutData.common.isPane&&(o.style.fontSize="14px",o.style.lineHeight="20px"),i.setAttribute("aria-labelledby","feedbackPrompt"),a=this.utilities.createElement("msft-micro-feedback"),this.flyoutData.experimentData.isExperimentActive(xt.H.remindLaterFooter)&&this.flyoutData.common.openedWith===D.Te.Auto||(a.style.marginRight="6px",a.style.marginLeft="auto"),(r=this.utilities.createElement("msft-micro-feedback-item")).ariaLabel=this.flyoutData.strings.feedbackAriaLike,r.className="iconButton",r.innerHTML=this.assets.getThumbsUp(),r.addEventListener("click",function(){var e=(0,t.Z)(n().mark((function t(e){var o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.microFeedbackLog("like");case 2:for(;i.lastChild;)i.lastChild.remove();o=l.utilities.isKeyboardClick(e),l.createThankYouDialogue(i,o);case 5:case"end":return t.stop()}}),t)})));return function(t){return e.apply(this,arguments)}}()),this.handleHighContrast(r),(s=this.utilities.createElement("msft-micro-feedback-item")).ariaLabel=this.flyoutData.strings.feedbackAriaDislike,s.setAttribute("flyout-vertical-position","top"),s.className="iconButton",s.innerHTML=this.assets.getThumbsDown(),s.addEventListener("click",function(){var e=(0,t.Z)(n().mark((function t(e){var o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s.selected){for(;i.lastChild;)i.lastChild.remove();o=l.utilities.isKeyboardClick(e),l.createThankYouDialogue(i,o)}return t.next=3,l.microFeedbackLog("unlike");case 3:case"end":return t.stop()}}),t)})));return function(t){return e.apply(this,arguments)}}()),this.handleHighContrast(s),this.createDislikeMenu(i,s),a.append(r),a.append(s),this.flyoutData.common.isPane&&Tt.SO.queueUpdate((function(){var t,e,i=null===(t=r.shadowRoot)||void 0===t?void 0:t.querySelector("fluent-button");i&&(i.style.backgroundColor="unset");var n=null===(e=s.shadowRoot)||void 0===e?void 0:e.querySelector("fluent-button");n&&(n.style.backgroundColor="unset")})),this.flyoutData.experimentData.isExperimentActive(xt.H.remindLaterFooter)&&this.flyoutData.common.openedWith===D.Te.Auto||i.append(o),i.append(a);case 27:case"end":return e.stop()}}),e,this)}))),function(t){return o.apply(this,arguments)})},{key:"handleHighContrast",value:function(t){var e=t.querySelector("path");e&&(t.addEventListener("mouseover",(function(){e.setAttribute("class","feedbackSelected")})),t.addEventListener("mouseleave",(function(){e.setAttribute("class","")})),t.addEventListener("focus",(function(){e.setAttribute("class","feedbackSelected")})),t.addEventListener("blur",(function(){e.setAttribute("class","")})))}},{key:"createDislikeMenu",value:function(t,e){var i=this,n=this.utilities.createElement("fluent-menu");n.id="dislikeMenu",n.slot="menu",n.style.width="270px",n.setAttribute("aria-label","Reason for thumbs down"),n.addEventListener("click",(function(e){i.dislikeMenuLog(t,!1,e)})),n.addEventListener("keydown",(function(n){"Enter"===n.key?i.dislikeMenuLog(t,!0,n):"Tab"===n.key&&i.handleMenuDismiss(e,t,!0)})),document.addEventListener("click",(function(){i.handleMenuDismiss(e,t,!1)}));var o,a=sI(this.options);try{for(a.s();!(o=a.n()).done;){var r=o.value;if(""!==r){var s=this.utilities.createElement("fluent-menu-item");s.textContent=r,n.append(s)}}}catch(t){a.e(t)}finally{a.f()}e.append(n)}},{key:"createThankYouDialogue",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.id="feedbackDivThanks",t.style.position="sticky",t.setAttribute("aria-labelledby","feedbackText");var n=this.utilities.createElement("img");n.src=this.flyoutData.common.resourcesEndpoint+"feedbackIcons/like_1.png",n.setAttribute("aria-hidden","true"),n.style.height="fit-content";var o=this.utilities.createElement("p");o.className="txtSmall feedbackText",o.textContent=this.flyoutData.strings.feedbackThanks,this.flyoutData.common.isPane&&(o.style.fontSize="14px",o.style.lineHeight="20px"),this.flyoutData.experimentData.isExperimentActive(xt.H.remindLaterFooter)&&this.flyoutData.common.openedWith===D.Te.Auto&&(o.style.fontSize="12px",t.style.background="#ffffff",t.style.padding="0px");var r=this.utilities.createElement("div");r.innerHTML=this.commonAssets.getCloseButton(),r.setAttribute("aria-hidden","true");var s=this.utilities.createElement("button");s.appendChild(r),s.id="closeButton",s.setAttribute("aria-label",this.flyoutData.strings.feedbackAriaClose),s.addEventListener("click",(function(i){var n=new na.Z(a.$S.FeedbackClose);e.logModule.LogInfoEvent(a.R.ButtonClick,"Closed out of feedback module",n);var o=e.flyoutData.common.shopping.querySelector("#".concat(D.z6.CLOSE)),r=e.utilities.isKeyboardClick(i);if(o&&r&&o.focus(),e.flyoutData.experimentData.isExperimentActive(xt.H.remindLaterFooter)&&e.flyoutData.common.openedWith===D.Te.Auto)t.style.visibility="hidden";else{t.remove();var s=e.flyoutData.common.shopping.querySelectorAll("hr");s&&s.length>0&&s[s.length-1].remove()}})),t.append(n),t.append(o),t.append(s),i&&s&&s.focus()}},{key:"toJSON",value:function(t){try{var e=JSON.stringify(t),i=JSON.parse(e);return i&&Array.isArray(i)&&0===i.length||"object"===(0,aI.Z)(i)&&0===Object.entries(i).length?void 0:i}catch(t){return}}},{key:"getLogData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=this.flyoutData.dataLoader.GetLoadTimeDataValue("is_metrics_reporting_enabled",!1);if(!i)return{};var n,o,a,r=this.flyoutData.dataStoreModule;if("MicroFeedbackVote"===t)n={fullUrl:this.flyoutData.common.lastCommittedURL,isAutoShow:this.flyoutData.common.openedWith===D.Te.Auto};else if("MicroFeedbackFollowUpVote"===t){var s=this.options.indexOf(e);n={answer:e,answerId:s,clientFeedbackId:this.clientId,fullUrl:this.flyoutData.common.lastCommittedURL,isAutoShow:this.flyoutData.common.openedWith===D.Te.Auto,itemId:0,vote:"dislike"}}if(this.isBNPL)return n;if(e===this.options[0])n.couponData=this.toJSON(null===(o=r.CouponData)||void 0===o?void 0:o.Coupons),n.dealsData=this.toJSON(null===(a=r.CouponData)||void 0===a?void 0:a.Deals),n.exclusiveCouponsData=this.toJSON(r.ExclusiveCouponsData),n.groceryCouponData=this.toJSON(r.GroceryCouponData);else if(e===this.options[1])n.orderTrackingData=this.toJSON(r.OrderTrackingData);else if(e===this.options[2]){var l;n.priceComparisonData=this.toJSON(r.PriceComparisonData),n.priceHistoryData=this.toJSON(r.PriceHistoryData),n.priceHistoryData&&null!==(l=n.priceHistoryData.ProductDetails)&&void 0!==l&&l.base64ProductImage&&(n.priceHistoryData.ProductDetails.base64ProductImage=void 0)}else if(e===this.options[4]){var c;n.cashbackData=this.toJSON(r.CashBackData),n.orderTrackingData=this.toJSON(r.OrderTrackingData),n.rewardsData=this.toJSON(r.RewardData),n.virtualCardData=this.toJSON(r.VirtualCardData),n.pinterestData=this.toJSON(r.PinterestData),n.tipsData=this.toJSON(null===(c=r.NudgeTipsData)||void 0===c?void 0:c.Tips),n.sustainabilityData=this.toJSON(r.SustainabilityData),n.topRetailerData=this.toJSON(r.TopRetailerData)}return n}},{key:"handleMenuDismiss",value:function(t,e,i){if(t.selected&&!t.menuVisible||i){for(;e.lastChild;)e.lastChild.remove();this.createThankYouDialogue(e,i)}}},{key:"microFeedbackLog",value:(i=(0,t.Z)(n().mark((function t(e){var i,o,r,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="like"===e?a.$S.FeedbackLike:a.$S.FeedbackDislike,o=new na.Z(i),r=this.getLogData("MicroFeedbackVote"),this.logModule.LogInfoEvent(a.R.ButtonClick,"Vote: "+e,o),t.next=6,this.pageHandlerModule.SendMicroFeedbackVote(e,r,this.isBNPL);case 6:null!=(s=t.sent)&&s.clientFeedbackId&&(this.clientId=s.clientFeedbackId);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"dislikeMenuLog",value:function(t,e,i){var n,o=null!==(n=i.target.textContent)&&void 0!==n?n:"",r=this.options.indexOf(o),s=uI[r];s||(s=a.$S.Unknown);var l=new na.Z(s),c=this.getLogData("MicroFeedbackFollowUpVote",o);for(this.logModule.LogInfoEvent(a.R.ButtonClick,"Clicked follow up menu option for feedback: "+this.clientId,l),this.pageHandlerModule.SendMicroFeedbackFollowUpVote(this.clientId,r.toString(),o,c,this.isBNPL),"Other"===o&&this.pageHandlerModule.OpenMicroFeedback(JSON.stringify(c));t.lastChild;)t.lastChild.remove();this.createThankYouDialogue(t,e)}}]),u}(jf.Z),hI=dI;function pI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var fI=function(t){(0,O.Z)(i,t);var e=pI(i);function i(t,n,o){var a;return(0,s.Z)(this,i),a=e.call(this),(0,I.Z)((0,R.Z)(a),"assets",void 0),(0,I.Z)((0,R.Z)(a),"commonAssets",void 0),(0,I.Z)((0,R.Z)(a),"utilities",void 0),(0,I.Z)((0,R.Z)(a),"groceryUtilities",void 0),(0,I.Z)((0,R.Z)(a),"flyoutData",void 0),(0,I.Z)((0,R.Z)(a),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(a),"logModule",void 0),(0,I.Z)((0,R.Z)(a),"activatedCashbackKey","activatedGroceryCashback"),(0,I.Z)((0,R.Z)(a),"submitKey","activationSubmitted"),(0,I.Z)((0,R.Z)(a),"activatedCashbackItems",void 0),a.flyoutData=t,a.utilities=n.viewModulesUtilities,a.groceryUtilities=new Fg(t,n),a.pageHandlerModule=n.pageHandlerModule,a.logModule=n.logModule,a.assets=new Pg,a.commonAssets=o,a}return(0,l.Z)(i,[{key:"GetModuleName",value:function(){return D.GX.GROCERY_CASHBACK_ACTIVATED}},{key:"ShouldRenderModule",value:function(){var t,e,i,n,o,a=null===(t=this.flyoutData.dataStoreModule)||void 0===t||null===(e=t.GroceryCouponData)||void 0===e||null===(i=e.Cashback)||void 0===i?void 0:i.ItemizedCashback,r=this.flyoutData.experimentData.isExperimentActive(xt.H.groceryCashback);if(a){var s=this.flyoutData.common.domain;this.utilities.checkLocalStorageTimeout(s,this.activatedCashbackKey);var l=this.groceryUtilities.getActivatedCashbackItems(s),c=l.activatedItems,u=l.redeemedItems;this.activatedCashbackItems=a.filter((function(t){return t.imageUrl&&t.title&&t.value&&t.id&&t.upc&&t.url&&c.includes(t.title)&&!u.includes(t.title)}))}var d=null!==(n=(null===(o=this.activatedCashbackItems)||void 0===o?void 0:o.length)>0)&&void 0!==n&&n;return Promise.resolve(this.activatedCashbackItems&&d&&r)}},{key:"populateMainHeader",value:function(){var t=this.flyoutData.common.shopping,e=this.utilities.createElement("p");e.textContent=this.flyoutData.strings.gcbActivatedSectionTitle,e.slot="header-content",e.style.alignSelf="flex-start",e.style.margin="0px",t.append(e)}},{key:"renderModule",value:function(){var t,e,i,n,o=this.utilities.createElement("msft-edge-shopping-section"),a=null===(t=this.flyoutData.dataStoreModule)||void 0===t||null===(e=t.GroceryCouponData)||void 0===e||null===(i=e.Cashback)||void 0===i?void 0:i.ItemizedCashback,r=null==a?void 0:a.filter((function(t){return t.imageUrl&&t.title&&t.value&&t.id&&t.upc&&t.url})),s=this.groceryUtilities.shouldShowGroceryCashback();if((null===(n=this.activatedCashbackItems)||void 0===n?void 0:n.length)!==(null==r?void 0:r.length)&&s||(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),this.pageHandlerModule.RecordAsContentViewed(ba.r.ITEMIZED_CASHBACK),yt(this.submitKey,"false")),a){var l=this.flyoutData;this.activatedCashbackItems&&this.activatedCashbackItems.length>0&&(this.populateGroceryActivatedCashbackList(o,!1,!1),this.utilities.createCommonListStructure(o,this.flyoutData.strings.gcbActivatedSectionTitle,this.activatedCashbackItems,this.GetModuleName(),(function(t){var e=D.CS.GROCERY_CASHBACK;return t&&l.common.bannerContext===D.De.VIEWALL&&(e=t.length),e}),this.populateGroceryActivatedCashbackList.bind(this)))}return Promise.resolve(this.CreateModule(o,D.H7.GROCERY_CASHBACK_ACTIVATED,D.GX.GROCERY_CASHBACK_ACTIVATED,D.$k.CONTEXTUAL))}},{key:"populateGroceryActivatedCashbackList",value:function(t,e,i){if(this.activatedCashbackItems){var n=0;this.activatedCashbackItems.length>0&&(n=this.activatedCashbackItems.length);var o=0;e?(o=D.CS.GROCERY_CASHBACK,this.pageHandlerModule.RecordAsUserAction(Ca.bS.CLICK_ITEMIZED_CASHBACK_SEE_ALL)):n>D.CS.GROCERY_CASHBACK&&(n=D.CS.GROCERY_CASHBACK);var a=null;e?a=t.querySelector("#gcSectionActivated"):((a=this.utilities.createElement("DIV")).className="gcSectionWrapper",a.id="gcSectionActivated");for(var r=o;r<n;r++){var s=this.activatedCashbackItems[r],l=this.createGroceryCashbackActivatedTile(s);if(a&&l){if(r===o&&e){var c=this.utilities.createElement("hr");c.className="gcHR",a.appendChild(c)}if(a.appendChild(l),r!==n-1){var u=this.utilities.createElement("hr");u.className="gcHR",a.appendChild(u)}r===o&&e&&i&&this.flyoutData.common.currentDevice===D.AS.Desktop&&l.focus(),e||t.appendChild(a)}}}}},{key:"navigateToRetailer",value:function(t){var e=new na.Z(a.$S.ActivatedGroceryItem);this.pageHandlerModule.RecordAsUserAction(Ca.bS.ACTIVATED_CLICK_ITEMIZED_CASHBACK),this.logModule.LogInfoEvent(a.R.ButtonClick,"Navigation to product details page from activated cashback",e),this.pageHandlerModule.NavigateToAlternateRetailerWithDisposition(t.url)}},{key:"createGroceryCashbackActivatedTile",value:function(t){var e=this,i=this.utilities.createElement("a");i.href="#",i.className="groceryCashback",i.setAttribute("role","group"),i.addEventListener("click",(function(){e.navigateToRetailer(t)}));var n=this.utilities.createElement("div");n.className="gcImageDiv",n.style.backgroundImage="linear-gradient(0deg, rgba(0, 0, 0, 0.03), rgba(0, 0, 0, 0.03)), url('".concat(t.imageUrl,"')"),n.setAttribute("aria-hidden","true");var o=this.utilities.createElement("div",{style:"\n            display: flex;\n            flex-direction: column;\n            row-gap: 4px;\n        "}),r=this.utilities.createElement("p");r.className="gcTitle",r.textContent=t.title;var s=this.utilities.createElement("div");s.className="gcCashbackDiv";var l=this.utilities.createElement("p");l.className="gcCashback";var c="".concat(D.iM.currency).concat(this.groceryUtilities.getCashbackString(t.value));if(c===D.iM.currency)return null;l.textContent=this.utilities.replaceValueInKey("gcbCashBack",this.flyoutData.strings.gcbCashBack,c),l.textContent=this.utilities.replaceStringsPlaceholders(l.textContent);var u=this.utilities.createElement("div");u.className="gcInfoIcon",u.slot="hover-anchor",u.setAttribute("aria-label","Info icon"),u.innerHTML=this.commonAssets.getInfoIcon();var d=t.id,h=t.title,p=this.logModule,f=this.pageHandlerModule;var g=this.utilities.createElement("msft-shopping-tooltip");g.className="gcTooltip",g.width="225px",g.caratLeftOffset="145px",g.content=this.utilities.CapitalizeString(t.description.replace(/on (any )*/,"").trim()),g.linkText="Details",g.linkHandler=function(){var t=new na.Z(a.$S.GroceryItemDisclaimer),e="https://msn.com/en-us/foodanddrink/groceries/cashback/".concat(d);p.LogInfoEvent(a.R.ButtonClick,"Navigated to disclaimer for ".concat(h),t),f.RecordAsUserAction(Ca.bS.CLICK_DISCLAIMER_ITEMIZED_CASHBACK),f.NavigateToUrl(e)},g.addEventListener("hover",(function(){var t=new na.Z(a.$S.GroceryItemTooltipViewed);e.pageHandlerModule.RecordAsUserAction(Ca.bS.HOVER_INFO_ICON_ITEMIZED_CASHBACK),e.logModule.LogInfoEvent(a.R.ButtonClick,"Grocery item-level cashback tooltip viewed",t)})),g.append(u),s.append(l),s.append(g);var m=this.utilities.createElement("div");m.className="gcActivatedDiv";var v=this.utilities.createElement("div");v.innerHTML=this.commonAssets.getGreenCheckCircle(),v.setAttribute("role","presentation");var y=this.utilities.createElement("p");return y.className="gcActivated",y.textContent="Activated",m.append(v),m.append(y),o.append(r),o.append(s),o.append(m),i.setAttribute("aria-label","Activated "+r.textContent+" "+l.textContent),i.append(n),i.append(o),i}}]),i}(jf.Z),gI=fI,mI=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getHeaderStyles",value:function(){return"#groceryHeaderDiv {\n            width: 100%;\n            overflow: hidden;\n            position: relative;\n            display: flex;\n            flex-direction: row;\n            justify-content: flex-start;\n            column-gap: 10px;\n            margin-left: 5px;\n        }\n        #groceryHeaderTextWrapper {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            text-align:left;\n            vertical-align: middle;\n            row-gap: 2px;\n        }\n        #groceryHeaderRetailer {\n            font-weight: 400;\n            color: var(--neutral-foreground-rest);\n            place-self: unset;\n            font-size: 20px;\n            line-height: 23px;\n            margin-left: 4px;\n        }\n        #groceryHeaderText {\n            color: #666666;\n            font-size: 12px;\n            margin-left: 4px;\n        }\n        #groceryHeaderIcon {\n            width: 48px;\n            height: 48px;\n            float: left;\n            border: 1px solid;\n            border-radius: 8px;\n            border-color: #ECECEC;\n        }\n        #groceryHeaderButton {\n            background: #FFFFFF;\n            color: #008076;\n            font-weight: 500;\n            height: 21px;\n            width: 65px;\n            border-color: transparent;\n            border-radius: 2px;\n            font-size: 12px;\n            font-family: inherit;\n            line-height: 16px;\n            cursor: pointer;\n        }\n        #groceryHeaderButton:focus {\n            outline: none;\n        }\n        fluent-button[id*='groceryHeaderButton']::part(control):focus {\n            box-shadow: 0 0 3px 3px #898989;\n        }\n        #divColorful {\n            background: linear-gradient(88.14deg, #018DC8 0.49%, #01CC83 53.44%, #0CBFC9 104.22%);\n            border-radius: 4px;\n            margin-top: 18px;\n            margin-left: auto;\n            margin-right: 4px;\n            padding: 1.5px;\n            padding-bottom: 2px;\n            padding-left: 2px;\n            height: min-content;\n        }\n        #divColorful:focus-within {\n            box-shadow: 0px 0px 0px 2px #898989;\n        }\n        @media (prefers-color-scheme: dark) {\n            #groceryHeaderText {\n                color: #C3C3C3;\n            }\n            #groceryHeaderButton {\n                background: #3b3b3b;\n                color: #02d9c8;\n                border-radius: 3px;\n            }\n            #divColorful {\n                padding-top: 1px;\n                padding-left: 2px;\n            }\n        }"}},{key:"getStyles",value:function(){return"\n            #grocerySectionWrapper {\n                display: grid;\n                grid-template-columns: calc(50% - 6px) calc(50% - 6px);\n                grid-gap: 12px;\n                margin-bottom: 10px;\n                margin-left: 12px;\n                margin-right: 12px;\n            }\n            #groceryCouponDiv img {\n                width: auto;\n                max-width: calc(100% - 10px);\n            }\n            msft-shopping-recommendation {\n                border: 1px solid;\n                border-color: #ECECEC;\n            }\n            msft-shopping-recommendation::part(image-container) {\n                background: white;\n            }\n            msft-shopping-recommendation::part(control) {\n                box-shadow: none;\n            }\n            msft-shopping-recommendation::part(control):focus {\n                box-shadow: 0px 0px 0px 2px #898989;\n            }\n            msft-shopping-recommendation::part(price-container) {\n                min-height: 53px;\n                padding: 0px 9px;\n            }"}},{key:"getStylesRefresh",value:function(){return"\n            ::part(badge) {\n                background: linear-gradient(92.91deg, #15835B 31.47%, #499F2B 99.7%);\n                bottom: 127px;\n                left: 5px;\n                border-radius: 4px;\n            }\n            #divGroceryCouponWrapper {\n                margin-left: 8px;\n                margin-right: 8px;\n            }"}}]),t}();function vI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var yI,CI=function(t){(0,O.Z)(i,t);var e=vI(i);function i(t,n){var o;return(0,s.Z)(this,i),o=e.call(this),(0,I.Z)((0,R.Z)(o),"assets",void 0),(0,I.Z)((0,R.Z)(o),"flyoutData",void 0),(0,I.Z)((0,R.Z)(o),"utilities",void 0),(0,I.Z)((0,R.Z)(o),"groceryUtilities",void 0),(0,I.Z)((0,R.Z)(o),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(o),"logModule",void 0),o.flyoutData=t,o.utilities=n.viewModulesUtilities,o.groceryUtilities=new Fg(t,n),o.pageHandlerModule=n.pageHandlerModule,o.logModule=n.logModule,o.assets=new mI,o}return(0,l.Z)(i,[{key:"GetModuleName",value:function(){return D.GX.GROCERY_COUPON}},{key:"ShouldRenderModule",value:function(){var t,e=this.flyoutData.dataStoreModule.GroceryCouponData,i=null!==(t=this.flyoutData.dataLoader.IsServerData()&&e&&e.DigitalCoupons.length>0)&&void 0!==t&&t;return Promise.resolve(i)}},{key:"populateMainHeader",value:function(){var t,e=this.flyoutData.common.shopping;if(e&&null!==(t=this.flyoutData.dataStoreModule.GroceryCouponData)&&void 0!==t&&t.DigitalCoupons&&this.flyoutData.dataStoreModule.GroceryCouponData.DigitalCoupons.length>0){var i=this.groceryUtilities.createGroceryHeader(D.GX.GROCERY_COUPON,Ca.bS.DIGITAL_GROCERY_COUPONS_SEEALL,a.$S.DigitalGroceryCouponSeeAll,"Clicked on see all grocery digital coupons","https://www.msn.com/en-us/foodanddrink/groceries/digital");i&&e.appendChild(i)}}},{key:"renderModule",value:function(){var t,e;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getHeaderStyles()),this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStylesRefresh());var i=this.utilities.createElement("msft-edge-shopping-section");if(i.id="groceryCouponDiv",null===(t=this.flyoutData.dataStoreModule)||void 0===t||null===(e=t.GroceryCouponData)||void 0===e?void 0:e.DigitalCoupons){var n,o;this.populateGroceryCouponList(i,!1,!1);var a=this.flyoutData;this.utilities.createCommonListStructure(i,this.flyoutData.strings.gcSectionTitle,null===(n=this.flyoutData.dataStoreModule)||void 0===n||null===(o=n.GroceryCouponData)||void 0===o?void 0:o.DigitalCoupons,this.GetModuleName(),(function(t){var e=D.CS.GROCERY_COUPON;return t&&a.common.bannerContext===D.De.VIEWALL&&(e=t.length),e}),this.populateGroceryCouponList.bind(this))}return Promise.resolve(this.CreateModule(i,D.H7.GROCERY_COUPON,D.GX.GROCERY_COUPON,D.$k.CONTEXTUAL))}},{key:"populateGroceryCouponList",value:function(t,e,i){var n,o=null===(n=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===n?void 0:n.DigitalCoupons;if(o){var a=0;o.length>0&&(a=o.length);var r=0;e?r=D.CS.GROCERY_COUPON:a>D.CS.GROCERY_COUPON&&(a=D.CS.GROCERY_COUPON);var s=null;e?s=t.querySelector("#grocerySectionWrapper"):(s=this.utilities.createElement("DIV")).id="grocerySectionWrapper";for(var l=r;l<a;l++){var c=o[l],u=this.createGroceryCouponTile(c);s?u&&(s.appendChild(u),l===r&&e&&i&&this.flyoutData.common.currentDevice===D.AS.Desktop&&u.focus(),e||t.appendChild(s)):u&&(t.appendChild(u),l===r&&e&&i&&this.flyoutData.common.currentDevice===D.AS.Desktop&&u.focus())}}}},{key:"createGroceryCouponTile",value:function(t){var e=this.utilities.createElement("msft-shopping-recommendation"),i=this.groceryUtilities.extractProductFromDescription(t.offerDescription);return np(i)||i.length<10?e.textContent=t.brandName:e.textContent=i,e.setAttribute("current-price",this.utilities.replaceValueInKey("saveX",this.flyoutData.strings.commonSave,"$".concat(t.offerValue))),e.style.borderColor=this.flyoutData.common.currentTheme===D.Q2.Dark?"#8C8C8C":"#ECECEC",this.createImage(null==t?void 0:t.offerImage,e),this.managePCLinkEvents(e,null==t?void 0:t.offerExpiryDate,null==t?void 0:t.retailerClickThroughUrl),e}},{key:"createImage",value:function(t,e){if(t){var i=this.utilities.createElement("IMG");i.src=t,i.slot="image",i.setAttribute("aria-hidden","true"),e.appendChild(i)}}},{key:"managePCLinkEvents",value:function(t,e,i){var n=this;t.addEventListener("click",(function(){n.pageHandlerModule.RecordAsUserAction(Ca.bS.DIGITAL_GROCERY_COUPONS_CLICK);var t=new na.Z(a.$S.DigitalGroceryCouponClick);n.logModule.LogInfoEvent(a.R.ButtonClick,"Clicked on digital coupons",t),n.flyoutData.common.currentDevice===D.AS.Desktop&&n.navigateToOffer(e,i,lg.$.NEW_FOREGROUND_TAB)})),t.addEventListener("mousedown",(function(t){if(1===t.button){n.navigateToOffer(e,i,lg.$.NEW_FOREGROUND_TAB),n.pageHandlerModule.RecordAsUserAction(Ca.bS.DIGITAL_GROCERY_COUPONS_CLICK);var o=new na.Z(a.$S.DigitalGroceryCouponClick);n.logModule.LogInfoEvent(a.R.ButtonClick,"Clicked on grocery digital coupons",o)}}))}},{key:"navigateToOffer",value:function(t,e,i){var n=new na.Z(a.$S.NavigateToRecommendedDeal);this.pageHandlerModule.RecordAsUserAction(Ca.bS.NAVIGATE_TO_RECOMMENDATION_OFFER),this.logModule.LogInfoEvent(a.R.ButtonClick,"Clicked on recommended offer",n),this.pageHandlerModule.NavigateToRecommendationWithDisposition(t,e,i)}}]),i}(jf.Z),bI=CI,SI=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n            .payment-options .card {\n                height: 88px;\n                margin: 10px 0 20px;\n            }\n            .payment-options .content {\n                display: flex;\n            }\n            .payment-options .bank-logo {\n                width: 144px;\n                height: 88px;\n                box-sizing: border-box;\n\n            }\n            .payment-options .bank-logo.zipPay {\n                padding: 26px 0 0 30px;\n                -webkit-clip-path: polygon(96% 0, 100% 100%, 0 100%, 0 0);\n                background: #1A0826;\n            }\n            @media (prefers-color-scheme: dark) {\n                    .payment-options .bank-logo.zipPay {\n                        background: white;\n                    }\n                    .payment-options .bank-logo.zipPay svg path.lightTheme{\n                        fill: #1A0826;\n                    }\n            }\n            .payment-options .end-content {\n                margin-left: 14px;\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n            }\n            .payment-options .end-content p {\n                margin: 0;\n                line-height: 16px;\n            }\n            .payment-options .footer {\n                display: flex;\n                line-height: 16px;\n            }\n            .payment-options .wallet-link {\n                margin-left: 3px;\n                line-height: 16px;\n                height: 16px;\n            }\n        "}},{key:"getIcon",value:function(t){return{zipPay:A.Z.getTrustedHTML(yI||(yI=(0,E.Z)(['<svg width="80" height="31" viewBox="0 0 80 31" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path class="lightTheme" fill-rule="evenodd" clip-rule="evenodd" d="M1.80142 24.8119L2.49982 30.793H26.9471L26.148 23.944H14.7478L14.6492 23.0943L25.1477 15.3817L24.4462 9.38779H0L0.800065 16.2379H12.2175L12.3182 17.094L1.80142 24.8119Z" fill="#FFFFFA"/>\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M27.2871 9.38742L29.7869 30.7927H54.2535L51.7527 9.38742H27.2871Z" fill="#AA8FFF"/>\n            <path class="lightTheme" fill-rule="evenodd" clip-rule="evenodd" d="M29.6562 6.54705C31.2574 8.04447 33.5671 8.04447 34.8144 6.54705C36.0628 5.04964 35.7761 2.62128 34.175 1.12386C32.5749 -0.374621 30.2651 -0.374621 29.0168 1.12386C27.7694 2.62128 28.0551 5.04964 29.6562 6.54705Z" fill="#FFFFFA"/>\n            <path class="lightTheme" fill-rule="evenodd" clip-rule="evenodd" d="M70.8676 20.5106L63.2106 20.5191L62.6108 15.3824L70.3075 15.3888C72.117 15.4112 73.0442 16.4832 73.1936 17.9497C73.2892 18.8934 72.8784 20.5106 70.8676 20.5106ZM79.9113 17.0946C79.3461 12.2828 75.7514 9.36703 70.8656 9.38724H54.5918L57.0916 30.7937H64.4122L63.911 26.512H71.6585C77.7561 26.512 80.5467 22.5167 79.9113 17.0946Z" fill="#FFFFFA"/>\n            </svg>\n            '])))}[t]}}]),t}();function xI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var EI=function(t){(0,O.Z)(i,t);var e=xI(i);function i(t,n){var o;return(0,s.Z)(this,i),o=e.call(this),(0,I.Z)((0,R.Z)(o),"assets",void 0),(0,I.Z)((0,R.Z)(o),"logModule",void 0),(0,I.Z)((0,R.Z)(o),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(o),"flyoutData",void 0),(0,I.Z)((0,R.Z)(o),"utilities",void 0),(0,I.Z)((0,R.Z)(o),"populatePaymentOptionsList",(function(t,e,i){var n,r=o.flyoutData.dataStoreModule.PaymentOptionsData;if(r){r.length>0&&(n=r.length);var s=0,l=o.flyoutData.experimentData.isExperimentActive(xt.H.showWalletFooter),c=!1;if(e){var u=new na.Z(a.$S.SeeMorePaymentOptions);o.logModule.LogInfoEvent(a.R.ButtonClick,"See more payment options",u),s=D.CS.PAYMENT_OPTIONS,c=l}else n>D.CS.PAYMENT_OPTIONS?n=D.CS.PAYMENT_OPTIONS:c=l;for(var d=s;d<n;d++){var h=o.utilities.createElement("fluent-card");h.className="card";var p=o.utilities.createElement("div");p.className="content";var f=o.utilities.createElement("div");f.className="start-content";var g=o.utilities.createElement("div");g.className="bank-logo ".concat(r[d].providerName),g.innerHTML=o.assets.getIcon(r[d].providerName),f.appendChild(g),p.appendChild(f);var m=o.utilities.createElement("div");m.className="end-content";var v=o.utilities.createElement("p");v.className="detail",v.textContent=r[d].projectedMonthlyPaymentDetails;var y=o.utilities.createElement("p");y.className="suggestion",y.textContent=r[d].paymentSuggestion,m.appendChild(v),m.appendChild(y),p.appendChild(m),h.appendChild(p),t.appendChild(h)}if(c){var C=o.utilities.createElement("div");C.className="footer";var b=o.utilities.createElement("fluent-anchor");b.textContent=o.flyoutData.strings.microsoftWalletLinkText,b.className="wallet-link",b.appearance="lightweight",b.addEventListener("click",(function(){o.pageHandlerModule.NavigateToWallet()})),o.utilities.populateSingleChildHtml(C,o.flyoutData.strings.microsoftWalletManage,b),t.appendChild(C)}}})),o.logModule=n.logModule,o.pageHandlerModule=n.pageHandlerModule,o.flyoutData=t,o.utilities=n.viewModulesUtilities,o.assets=new SI,o}return(0,l.Z)(i,[{key:"GetModuleName",value:function(){return D.GX.PAYMENT_OPTIONS}},{key:"ShouldRenderModule",value:function(){var t,e=this.flyoutData.dataStoreModule.PaymentOptionsData,i=null!==(t=e&&e.length>0&&this.flyoutData.experimentData.isExperimentActive(xt.H.showPaymentOptionsOnProductPage))&&void 0!==t&&t;return Promise.resolve(i)}},{key:"renderModule",value:function(){var t=this.utilities.createElement("msft-edge-shopping-section");this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),t.className="payment-options",t.id="paymentOptionsSection",this.populatePaymentOptionsList(t,!1,!1),this.utilities.createCommonListStructure(t,this.flyoutData.strings.paymentOptionLabel,this.flyoutData.dataStoreModule.PaymentOptionsData,this.GetModuleName(),(function(t){return D.CS.PAYMENT_OPTIONS}),this.populatePaymentOptionsList);var e=this.CreateModule(t,D.H7.PAYMENT_OPTIONS,D.GX.PAYMENT_OPTIONS,D.$k.HOME);t.addEventListener("click",(function e(){if(t){var a=t.shadowRoot;if(a){var r=a.querySelector("fluent-accordion-item");r&&(r.classList.contains("expanded")||n?o||(i.RecordAsUserAction(Ca.bS.PAYMENT_OPTIONS_COLLAPSE_SECTION),o=!0):(i.RecordAsUserAction(Ca.bS.PAYMENT_OPTIONS_EXPAND_SECTION),n=!0))}}n&&o&&t&&t.removeEventListener("click",e)}));var i=this.pageHandlerModule,n=!1,o=!1;return Promise.resolve(e)}},{key:"populateMainHeader",value:function(){}}]),i}(jf.Z),AI=EI,TI=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getHeaderStyles",value:function(){return"#groceryHeaderDiv {\n            width: 100%;\n            overflow: hidden;\n            position: relative;\n            display: flex;\n            flex-direction: row;\n            justify-content: flex-start;\n            column-gap: 10px;\n            margin-left: 5px;\n        }\n        #groceryHeaderTextWrapper {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            text-align:left;\n            vertical-align: middle;\n            row-gap: 2px;\n        }\n        #groceryHeaderRetailer {\n            font-weight: 400;\n            color: var(--neutral-foreground-rest);\n            place-self: unset;\n            font-size: 20px;\n            line-height: 23px;\n            margin-left: 4px;\n        }\n        #groceryHeaderText {\n            color: #666666;\n            font-size: 12px;\n            margin-left: 4px;\n        }\n        #groceryHeaderIcon {\n            width: 48px;\n            height: 48px;\n            float: left;\n            border: 1px solid;\n            border-radius: 8px;\n            border-color: #ECECEC;\n        }\n        #groceryHeaderButton {\n            background: #FFFFFF;\n            color: #008076;\n            font-weight: 500;\n            height: 21px;\n            width: 65px;\n            border-color: transparent;\n            border-radius: 2px;\n            font-size: 12px;\n            font-family: inherit;\n            line-height: 16px;\n            cursor: pointer;\n        }\n        #groceryHeaderButton:focus {\n            outline: none;\n        }\n        fluent-button[id*='groceryHeaderButton']::part(control):focus {\n            box-shadow: 0 0 3px 3px #898989;\n        }\n        #divColorful {\n            background: linear-gradient(88.14deg, #018DC8 0.49%, #01CC83 53.44%, #0CBFC9 104.22%);\n            border-radius: 4px;\n            margin-top: 18px;\n            margin-left: auto;\n            margin-right: 4px;\n            padding: 1.5px;\n            padding-bottom: 2px;\n            padding-left: 2px;\n            height: min-content;\n        }\n        #divColorful:focus-within {\n            box-shadow: 0px 0px 0px 2px #898989;\n        }\n        @media (prefers-color-scheme: dark) {\n            #groceryHeaderText {\n                color: #C3C3C3;\n            }\n            #groceryHeaderButton {\n                background: #3b3b3b;\n                color: #02d9c8;\n                border-radius: 3px;\n            }\n            #divColorful {\n                padding-top: 1px;\n                padding-left: 2px;\n            }\n        }"}},{key:"getStyles",value:function(){return"\n            #divPrintableCouponWrapper {\n                display: grid;\n                grid-template-columns: calc(50% - 6px) calc(50% - 6px);\n                grid-gap: 12px;\n                margin-left: 12px;\n                margin-right: 12px;\n            }\n            #printableCouponDiv img {\n                width: auto;\n                max-width: calc(100% - 10px);\n            }\n            msft-shopping-coupon-printable {\n                height: 212px;\n                color: #666666;\n                font-size: 12px;\n                border-radius: 8px;\n            }\n            msft-shopping-coupon-printable::part(image-container) {\n                background: white;\n            }\n            #printableSeeMore {\n                margin-left: 14px;\n                margin-top: 2px;\n                font-size: 12px;\n            }\n            fluent-button[id*='printableSeeMore']::part(control) {\n                z-index: 10;\n            }\n            #divButtonWrapper {\n                background: linear-gradient(179.23deg, rgba(255, 255, 255, 0) 0.66%, rgba(255, 255, 255, 0.88) 28.29%, #FFFFFF 59.77%);\n                margin-top: -30px;\n                height: 100px;\n                width: 100%;\n                position: sticky;\n                column-span: all;\n                bottom: -1px;\n                padding-bottom: 1px;\n                z-index: 12;\n            }\n            #divButtonWrapper.isNotSticky {\n                background: transparent;\n                z-index: 0;\n                margin-bottom: -50px;\n            }\n            #divButtonWrapper.withFeedback {\n                height: 138px;\n            }\n            #printButton {\n                background: linear-gradient(90.05deg, #8300D4 0.59%, #0048D4 67.54%, #00D4A1 104.11%);\n                font-size: 16px;\n                line-height: 20px;\n                color: white;\n                width: calc(100% - 24px);\n                height: 48px;\n                margin-left: 12px;\n                margin-top: 37px;\n                border-radius: 8px;\n            }\n            #printButton:disabled {\n                background: #B8B8B8;\n                opacity: 1;\n            }\n            fluent-button[id*='printableHeaderButton']::part(control):focus {\n                box-shadow: 0 0 3px 3px #898989;\n            }\n            fluent-button[id*='printButton']::part(control):focus {\n                box-shadow: 0 0 3px 3px #898989;\n            }\n            #seeAllBottom {\n                margin-left: calc(50% - 20px);\n                color: #0078D4;\n                font-size: 12px;\n                font-weight: 500;\n            }\n            fluent-button[id*='seeAllBottom']::part(control) {\n                z-index: 10;\n            }\n            @media (prefers-color-scheme: dark) {\n                #printableSeeMore {\n                    color: #43adff;\n                }\n                #divButtonWrapper {\n                    background: linear-gradient(179.23deg, rgba(59, 59, 59, 0) 9.66%, rgba(59, 59, 59, 0.88) 38.29%, #3b3b3b 59.77%);\n                }\n                #seeAllBottom {\n                    color: #6bbfff;\n                }\n            }"}}]),t}(),II=(0,l.Z)((function t(e){(0,s.Z)(this,t),(0,I.Z)(this,"couponId",void 0),(0,I.Z)(this,"redemptionLimit",void 0),e&&(this.couponId=e.couponId,this.redemptionLimit=e.redemptionLimit)}));function DI(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return kI(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return kI(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function kI(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var wI=function(){function t(){(0,s.Z)(this,t),(0,I.Z)(this,"NationalOffers",void 0),(0,I.Z)(this,"HashCode",void 0)}return(0,l.Z)(t,null,[{key:"create",value:function(e){var i,n=new t;if(n.NationalOffers=[],(null==e||null===(i=e.NationalOffers)||void 0===i?void 0:i.length)>0){var o,a=DI(e.NationalOffers);try{for(a.s();!(o=a.n()).done;){var r=o.value;n.NationalOffers.push(new II(r))}}catch(t){a.e(t)}finally{a.f()}}return n.HashCode=null==e?void 0:e.HashCode,n}}]),t}();function RI(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return OI(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return OI(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function OI(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function PI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var MI,NI,LI,_I,FI,HI,ZI=function(e){(0,O.Z)(r,e);var i,o=PI(r);function r(t,e){var i,n,a,l;(0,s.Z)(this,r),l=o.call(this),(0,I.Z)((0,R.Z)(l),"assets",void 0),(0,I.Z)((0,R.Z)(l),"flyoutData",void 0),(0,I.Z)((0,R.Z)(l),"utilities",void 0),(0,I.Z)((0,R.Z)(l),"groceryUtilities",void 0),(0,I.Z)((0,R.Z)(l),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(l),"logModule",void 0),(0,I.Z)((0,R.Z)(l),"coupons",void 0),(0,I.Z)((0,R.Z)(l),"scriptData",void 0),l.flyoutData=t,l.utilities=e.viewModulesUtilities,l.groceryUtilities=new Fg(t,e),l.pageHandlerModule=e.pageHandlerModule,l.logModule=e.logModule,l.coupons=[],l.assets=new TI;var c=null===(i=t.dataStoreModule)||void 0===i||null===(n=i.GroceryCouponData)||void 0===n||null===(a=n.PrintableCoupons)||void 0===a?void 0:a.HashCode;return c&&(l.scriptData=new wI,l.scriptData.HashCode=c),l}return(0,l.Z)(r,[{key:"GetModuleName",value:function(){return D.GX.PRINTABLE_COUPON}},{key:"ShouldRenderModule",value:function(){var t,e,i;this.pageHandlerModule.TriggerExperiment(xt.H.groceryAutoshow);var n=null===(t=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===t?void 0:t.PrintableCoupons,o=null!==(e=n&&(null===(i=n.NationalOffers)||void 0===i?void 0:i.length)>0)&&void 0!==e&&e;return Promise.resolve(o)}},{key:"populateMainHeader",value:function(){var t,e,i=this.flyoutData.common.shopping;if(i&&null!==(t=this.flyoutData.dataStoreModule.GroceryCouponData)&&void 0!==t&&null!==(e=t.PrintableCoupons)&&void 0!==e&&e.NationalOffers&&this.flyoutData.dataStoreModule.GroceryCouponData.PrintableCoupons.NationalOffers.length>0){var n=this.groceryUtilities.createGroceryHeader(D.GX.PRINTABLE_COUPON,Ca.bS.CLICK_SEEALL_PRINTABLE_COUPON,a.$S.SeeAllPrintableCoupons,"Clicked on see all grocery printable coupons","https://www.msn.com/en-us/foodanddrink/groceries/printable");n&&i.appendChild(n)}}},{key:"renderModule",value:function(){var t,e;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getHeaderStyles()),this.scriptData.NationalOffers=[];var i=this.utilities.createElement("msft-edge-shopping-section");if(i.id="printableCouponDiv",null===(t=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===t||null===(e=t.PrintableCoupons)||void 0===e?void 0:e.NationalOffers){var n,o;this.populatePrintableCouponList(i,!1,!1);var a=this.flyoutData;this.utilities.createCommonListStructure(i,this.flyoutData.strings.gcSectionTitle,null===(n=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===n||null===(o=n.PrintableCoupons)||void 0===o?void 0:o.NationalOffers,this.GetModuleName(),(function(t){var e=a.common.openedWith===D.Te.Auto?D.CS.PRINTABLE_COUPON_AUTO:D.CS.PRINTABLE_COUPON;return t&&a.common.bannerContext===D.De.VIEWALL&&(e=t.length),e}),this.populatePrintableCouponList.bind(this)),this.createPrintButton(i)}return Promise.resolve(this.CreateModule(i,D.H7.PRINTABLE_COUPON,D.GX.PRINTABLE_COUPON,D.$k.CONTEXTUAL))}},{key:"populatePrintableCouponList",value:function(t,e,i){var n,o,r,s=this,l=null===(n=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===n||null===(o=n.PrintableCoupons)||void 0===o?void 0:o.NationalOffers,c=null===(r=this.flyoutData.dataStoreModule.GroceryCouponData)||void 0===r?void 0:r.PrintableCoupons.NationalOffersImageUrlPrefix;if(l&&c){var u,d,h=0,p=l.length;p>0&&(h=p);var f=0,g=this.flyoutData.common.openedWith===D.Te.Auto?D.CS.PRINTABLE_COUPON_AUTO:D.CS.PRINTABLE_COUPON;e?f=g:h>g&&(h=g);var m,v,y=null;e?y=t.querySelector("#divPrintableCouponWrapper"):(y=this.utilities.createElement("DIV")).id="divPrintableCouponWrapper",c=c.slice(0,4)+"s"+c.slice(4);for(var C=vt("printableCouponData"),b=C?JSON.parse(C):null,S=0,x=f;S<h-f&&x<p;x++){var E=l[x];if(b&&b[E.couponId])if(b[E.couponId]===E.redemptionLimit)continue;var A=this.createPrintableCouponTile(E,c);S++,A&&(y?(y.appendChild(A),e||t.appendChild(y)):t.appendChild(A),x===f&&e&&i&&this.flyoutData.common.currentDevice===D.AS.Desktop&&A&&A.focus())}if((null!==(u=null===(d=y)||void 0===d?void 0:d.children.length)&&void 0!==u?u:0)%2!=0)null===(m=y)||void 0===m||null===(v=m.lastChild)||void 0===v||v.remove();if(e){var T=this.utilities.createElement("fluent-button");T.textContent="See all",T.id="seeAllBottom",T.appearance="lightweight",T.addEventListener("click",(function(){s.pageHandlerModule.RecordAsUserAction(Ca.bS.CLICK_SEEALL_PRINTABLE_COUPON);var t=new na.Z(a.$S.SeeAllPrintableCoupons);s.logModule.LogInfoEvent(a.R.ButtonClick,"Clicked on see all grocery printable coupons",t),s.pageHandlerModule.NavigateToCouponPage("https://www.msn.com/en-us/foodanddrink/groceries/printable")}));var I=t.children.length;t.insertBefore(T,t.children[I-2])}}}},{key:"createPrintableCouponTile",value:function(t,e){var i=this,n=this.utilities.createElement("msft-shopping-coupon-printable");n.deselectable=!0,n.nameId=t.couponId,n.isSelected=!1;var o=this.retrieveSavingsString(t);n.name=o;var r=this.groceryUtilities.extractProductFromDescription(t.description);if(np(r)||r.length<10?n.description=t.brand+" "+t.categoryDescription:n.description=r,this.coupons.includes(r))return null;this.coupons.push(r),n.unselectedAriaLabel="Unselected",n.selectedAriaLabel="Selected",n.setAttribute("aria-checked","false");var s=this.utilities.createElement("img");return s.src=e+t.imageUrlSuffix,s.slot="image",s.setAttribute("aria-hidden","true"),n.append(s),n.addEventListener("selected-changed",(function(){var e,o=null===(e=i.flyoutData.dataStoreModule.GroceryCouponData)||void 0===e?void 0:e.PrintableCoupons.NationalOffers;if(o)if(n.isSelected){n.setAttribute("aria-checked","false");var r,s=RI(o);try{for(s.s();!(r=s.n()).done;){var l=r.value;if(l.couponId===t.couponId){i.scriptData.NationalOffers.push(l);break}}}catch(t){s.e(t)}finally{s.f()}i.pageHandlerModule.RecordAsUserAction(Ca.bS.SELECT_PRINTABLE_COUPON);var c=new na.Z(a.$S.PrintableCouponSelected);i.logModule.LogInfoEvent(a.R.ButtonClick,"Selected printable coupon",c)}else{n.setAttribute("aria-checked","true");for(var u=0;u<i.scriptData.NationalOffers.length;u++)if(i.scriptData.NationalOffers[u].couponId===t.couponId){i.scriptData.NationalOffers.splice(u,1);break}i.pageHandlerModule.RecordAsUserAction(Ca.bS.SELECT_PRINTABLE_COUPON);var d=new na.Z(a.$S.PrintableCouponSelected);i.logModule.LogInfoEvent(a.R.ButtonClick,"Deselected printable coupon",d)}})),n}},{key:"createPrintButton",value:(i=(0,t.Z)(n().mark((function t(e){var i,o,r,s,l,c=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=e.querySelector(".btnSeeMore"))&&(i.id="printableSeeMore",i.textContent="See more",this.flyoutData.common.openedWith!==D.Te.Auto&&(i.slot="")),(o=this.utilities.createElement("DIV")).id="divButtonWrapper",o.setAttribute("role","presentation"),r=this.flyoutData.dataLoader.GetLoadTimeDataValue("is_feedback_enabled",!1),s="div#feedbackDiv, div#feedbackDivThanks, div#feedbackDislike",r){o.classList.add("withFeedback");try{document.addEventListener("click",(function(t){var e=c.flyoutData.common.shopping.querySelector(s);o.classList.toggle("withFeedback",!!e)}))}catch(t){}}(l=document.createElement("fluent-button")).id="printButton",l.setAttribute("aria-live","assertive"),l.setAttribute("role","presentation"),l.textContent="Print coupons",l.disabled=!0,document.addEventListener("selected-changed",(function(){var t=c.scriptData.NationalOffers.length;t>0?(l.textContent=1===t?"Print 1 coupon":"Print "+t+" coupons",l.disabled=!1):(l.textContent="Print coupons",l.disabled=!0)})),l.addEventListener("click",(function(){if(!l.disabled){c.pageHandlerModule.PrintCoupons(JSON.stringify(c.scriptData)),c.pageHandlerModule.RecordAsUserAction(Ca.bS.PRINT_COUPONS_CLICK);var t=new na.Z(a.$S.PrintGroceryCoupons);c.logModule.LogInfoEvent(a.R.ButtonClick,"Clicked on print coupon button",t);var e=vt("printableCouponData"),i=e?JSON.parse(e):null;i||(i=new Map);var n,o=RI(c.scriptData.NationalOffers);try{for(o.s();!(n=o.n()).done;){var r=n.value,s=i[r.couponId];i[r.couponId]=s||1}}catch(t){o.e(t)}finally{o.f()}yt("printableCouponData",JSON.stringify(i))}})),o.append(l),this.observeFooter(o,r,s),e.append(o);case 19:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"observeFooter",value:function(t,e,i){var n=this;new IntersectionObserver((function(t){var o=la(t,1)[0];o.target.classList.toggle("isNotSticky",1===o.intersectionRatio),e&&n.flyoutData.common.shopping.querySelector(i)&&1!==o.intersectionRatio&&o.target.classList.add("withFeedback")}),{threshold:[1]}).observe(t)}},{key:"retrieveSavingsString",value:function(t){var e=t.value.toString();if(e.length>2){var i=e.length-2;e="Save $"+e.slice(0,i)+"."+e.substring(i)}else e="Save $0."+e;return e}}]),r}(jf.Z),BI=ZI,UI=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n            .prodHAnnotation {\n                color: #6E6E6E;\n            }\n            @media (prefers-color-scheme: dark) {\n                .prodHAnnotation {\n                    color: #FFFFFF;\n                }\n            }\n            @media (forced-colors: active) {\n                .prodHAnnotation {\n                    color: highlightText;\n                }\n            }\n            "}},{key:"getPriceDropAnnotation",value:function(){return A.Z.getTrustedHTML(MI||(MI=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="13" height="12" viewBox="0 0 13 12" fill="none">\n        <path d="M10.0428 8.84145C9.78112 8.84145 9.569 9.05357 9.569 9.31523V11.5262C9.569 11.7879 9.78112 12 10.0428 12C10.3044 12 10.5166 11.7879 10.5166 11.5262V9.31523C10.5166 9.05357 10.3044 8.84145 10.0428 8.84145ZM6.41042 6.15922C6.41042 5.89756 6.62254 5.68544 6.88421 5.68544C7.14587 5.68544 7.35799 5.89756 7.35799 6.15922V11.5262C7.35799 11.7879 7.14587 12 6.88421 12C6.62254 12 6.41042 11.7879 6.41042 11.5262V6.15922ZM3.72562 7.1057C3.46396 7.1057 3.25184 7.31783 3.25184 7.57949V11.5262C3.25184 11.7879 3.46396 12 3.72562 12C3.98729 12 4.19941 11.7879 4.19941 11.5262V7.57949C4.19941 7.31783 3.98729 7.1057 3.72562 7.1057ZM0.0932617 3.7892C0.0932617 3.52753 0.305384 3.31541 0.567048 3.31541C0.828713 3.31541 1.04084 3.52753 1.04084 3.7892V11.5262C1.04084 11.7879 0.828713 12 0.567048 12C0.305384 12 0.0932617 11.7879 0.0932617 11.5262V3.7892Z" fill="#107C10"/>\n        <path d="M11.5621 7.57916L8.6854 7.57949L8.62112 7.57516C8.38986 7.54379 8.21162 7.34556 8.21162 7.1057L8.21595 7.04141C8.24732 6.81016 8.44554 6.63192 8.6854 6.63192H10.3841L6.65215 2.89926L4.73787 4.73788L4.68473 4.78375C4.49925 4.92137 4.23604 4.90608 4.06784 4.73787L0.138768 0.808805L0.0928953 0.755666C-0.0447267 0.570187 -0.0294364 0.306974 0.138768 0.138769C0.323793 -0.0462563 0.623784 -0.0462563 0.808809 0.138769L4.40287 3.73283L6.31716 1.89419L6.3703 1.84832C6.55578 1.7107 6.819 1.726 6.9872 1.89421L11.055 5.96293L11.0553 4.26053L11.0596 4.19624C11.091 3.96498 11.2892 3.78674 11.5291 3.78674C11.7908 3.78674 12.0029 3.99886 12.0029 4.26053L12.0026 7.12371L11.9967 7.18322L11.9881 7.22365L11.976 7.26412L11.9515 7.32118L11.9173 7.37811L11.8898 7.41373L11.8641 7.44155C11.8229 7.48274 11.776 7.51476 11.7259 7.53679L11.6879 7.55293L11.6254 7.57037L11.5621 7.57916Z" fill="#107C10"/>\n        </svg>'])))}},{key:"getPriceIncreaseAnnotation",value:function(){return A.Z.getTrustedHTML(NI||(NI=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none">\n        <path d="M8.25 0.5625C8.25 0.25184 8.50184 0 8.8125 0H10.6875C10.9982 0 11.25 0.25184 11.25 0.5625V2.4375C11.25 2.74816 10.9982 3 10.6875 3C10.3768 3 10.125 2.74816 10.125 2.4375V1.92049L6.77275 5.27275C6.55308 5.49242 6.19692 5.49242 5.97725 5.27275L4.125 3.4205L0.960248 6.58525C0.740578 6.80492 0.384422 6.80492 0.164752 6.58525C-0.0549174 6.36558 -0.0549174 6.00942 0.164752 5.78975L3.72725 2.22725C3.94692 2.00758 4.30308 2.00758 4.52275 2.22725L6.375 4.0795L9.3295 1.125H8.8125C8.50184 1.125 8.25 0.87316 8.25 0.5625ZM0.5625 9C0.87316 9 1.125 9.25184 1.125 9.5625V11.4375C1.125 11.7482 0.87316 12 0.5625 12C0.25184 12 0 11.7482 0 11.4375V9.5625C0 9.25184 0.25184 9 0.5625 9ZM4.125 7.3125C4.125 7.00184 3.87316 6.75 3.5625 6.75C3.25184 6.75 3 7.00184 3 7.3125V11.4375C3 11.7482 3.25184 12 3.5625 12C3.87316 12 4.125 11.7482 4.125 11.4375V7.3125ZM6.5625 8.25C6.87316 8.25 7.125 8.50184 7.125 8.8125V11.4375C7.125 11.7482 6.87316 12 6.5625 12C6.25184 12 6 11.7482 6 11.4375V8.8125C6 8.50184 6.25184 8.25 6.5625 8.25ZM10.125 5.8125C10.125 5.50184 9.87316 5.25 9.5625 5.25C9.25184 5.25 9 5.50184 9 5.8125V11.4375C9 11.7482 9.25184 12 9.5625 12C9.87316 12 10.125 11.7482 10.125 11.4375V5.8125Z" fill="#D83B01"/>\n        </svg>'])))}},{key:"getPriceDecreaseTrendIconRefresh",value:function(t){return t?A.Z.getTrustedHTML(LI||(LI=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none">\n            <path d="M8 0L4 6L0 0H8Z" fill="#43E498"/>\n            </svg>']))):A.Z.getTrustedHTML(_I||(_I=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none">\n                <path d="M8 0L4 6L0 0H8Z" fill="#028948"/>\n                </svg>'])))}},{key:"getPriceIncreaseTrendIconRefresh",value:function(t){return t?A.Z.getTrustedHTML(FI||(FI=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none">\n            <path d="M8 6L4 0L0 6H8Z" fill="#F9A1AC"/>\n            </svg>']))):A.Z.getTrustedHTML(HI||(HI=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none">\n            <path d="M8 6L4 0L0 6H8Z" fill="#C82B45"/>\n            </svg>'])))}}]),t}();function GI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var VI,$I,WI=function(t){(0,O.Z)(i,t);var e=GI(i);function i(t,n,o,a){var r;return(0,s.Z)(this,i),r=e.call(this),(0,I.Z)((0,R.Z)(r),"assets",void 0),(0,I.Z)((0,R.Z)(r),"logModule",void 0),(0,I.Z)((0,R.Z)(r),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(r),"flyoutData",void 0),(0,I.Z)((0,R.Z)(r),"utilities",void 0),(0,I.Z)((0,R.Z)(r),"stateManagementModule",void 0),(0,I.Z)((0,R.Z)(r),"newPwiloData",void 0),(0,I.Z)((0,R.Z)(r),"sectionId","productHistorySection"),(0,I.Z)((0,R.Z)(r),"commonAssets",void 0),(0,I.Z)((0,R.Z)(r),"previousLink",null),(0,I.Z)((0,R.Z)(r),"parent",void 0),(0,I.Z)((0,R.Z)(r),"showAllItems",!1),(0,I.Z)((0,R.Z)(r),"telemetrySent",!1),r.logModule=o.logModule,r.pageHandlerModule=o.pageHandlerModule,r.flyoutData=n,r.utilities=o.viewModulesUtilities,r.assets=new UI,r.stateManagementModule=t,r.commonAssets=a,r.flyoutData.common.isPane?r.parent=r.flyoutData.common.shoppingPersistent:r.parent=r.flyoutData.common.shopping,r}return(0,l.Z)(i,[{key:"GetModuleName",value:function(){return D.GX.PRODUCTHISTORY}},{key:"ShouldRenderModule",value:function(){var t,e,i,n=this,o=this.flyoutData.dataStoreModule.PriceComparisonData;if(null!==(e=(null==o||null===(t=o.segment)||void 0===t?void 0:t.toLowerCase())===D.VG.AUTOS&&(null==o?void 0:o.CompetingPrices)&&(null==o?void 0:o.CompetingPrices.length)>0)&&void 0!==e&&e)return Promise.resolve(!1);var a=this.flyoutData.dataStoreModule.ProductHistoryData,r=null!==(i=a&&a.length>0&&this.flyoutData.dataLoader.IsServerData()&&this.flyoutData.experimentData.isExperimentActive(xt.H.showProductHistory))&&void 0!==i&&i;return r&&(this.stateManagementModule.addEventListener(Ia.e1.PWILOPriceHistory,(function(t){if(t&&t.detail&&t.detail.data){var e=t.detail.data.webAssistEntities;if(e){n.newPwiloData=!0;var i=[];e&&e.length>0&&e.forEach((function(t){i.push(new Cr(t))})),n.flyoutData.dataStoreModule.ProductHistoryData=i,document.querySelector("#".concat(n.sectionId))&&n.addProdHistoryAnnotation()}}})),this.stateManagementModule.addEventListener(Ia.e1.ModulesRendered,(function(){n.newPwiloData&&Tt.SO.queueUpdate((function(){n.addProdHistoryAnnotation()}))}))),Promise.resolve(r)}},{key:"renderModule",value:function(){var t=this;this.utilities.applyStyles(this.parent,this.assets.getStyles());var e=this.utilities.createElement("msft-edge-shopping-section");function i(t){return D.CS.PRODUCTHISTORY}e.id=this.sectionId,this.stateManagementModule.addEventListener(Ia.e1.PWILODeleted,(function(n){if(n&&n.detail&&void 0!==n.detail.index){var o;if(t.flyoutData.dataStoreModule.ProductHistoryData=null===(o=t.flyoutData.dataStoreModule.ProductHistoryData)||void 0===o?void 0:o.filter((function(t,e){return e!==n.detail.index})),t.flyoutData.dataStoreModule.ProductHistoryData&&t.flyoutData.dataStoreModule.ProductHistoryData.length>0){var a,r=document.querySelector("#".concat(t.sectionId," #pdhWraper"));a=t.flyoutData.common.isPane?document.querySelector("#".concat(t.sectionId," .btnSeeMore")):document.querySelector("#".concat(t.sectionId," .divSeeMore")),r&&(r.remove(),a&&a.remove(),Tt.SO.queueUpdate((function(){t.populateProductHistoryList(e,t.showAllItems,!1),t.showAllItems||t.utilities.createCommonListStructure(e,t.flyoutData.strings.prodHSectionTitle,t.flyoutData.dataStoreModule.ProductHistoryData,t.GetModuleName(),i,t.populateProductHistoryList.bind(t)),t.flyoutData.common.isPane&&Tt.SO.queueUpdate((function(){e.expanded=!0}))})))}else if(e){e.remove();var s=new CustomEvent(Ia.e1.PWILOEmpty);t.stateManagementModule.dispatchEvent(s)}if(t.utilities.isKeyboardClick(n.detail.event)){var l=t.parent.querySelector("#".concat(D.z6.CLOSE));l&&l.focus()}}})),this.populateProductHistoryList(e,!1,!1),this.utilities.createCommonListStructure(e,this.flyoutData.strings.prodHSectionTitle,this.flyoutData.dataStoreModule.ProductHistoryData,this.GetModuleName(),i,this.populateProductHistoryList.bind(this));var n=this.CreateModule(e,D.H7.PRODUCTHISTORY,D.GX.PRODUCTHISTORY,D.$k.HOME);e.addEventListener("click",(function t(){if(e){var i=e.shadowRoot;if(i){var n=i.querySelector("fluent-accordion-item");n&&(n.classList.contains("expanded")||a?r||(o.RecordAsUserAction(Ca.bS.PRODUCT_HISTORY_COLLAPSE_SECTION),r=!0):(o.RecordAsUserAction(Ca.bS.PRODUCT_HISTORY_EXPAND_SECTION),a=!0))}}a&&r&&e&&e.removeEventListener("click",t)}));var o=this.pageHandlerModule,a=!1,r=!1;return Promise.resolve(n)}},{key:"populateMainHeader",value:function(){if(this.flyoutData.common.shoppingPersistent){var t=this.flyoutData.common.shoppingPersistent.querySelector("#".concat(this.sectionId));if(t){t.style.marginTop="0px",t.slot="header-content";var e=t.querySelector("#pdhWraper");e&&(e.style.margin="0px!important")}}}},{key:"PostProcessing",value:function(t,e,i){Tt.SO.queueUpdate((function(){var t,e=null===(t=i.shadowRoot)||void 0===t?void 0:t.querySelector("fluent-accordion-item");if(e){var n,o=null===(n=e.shadowRoot)||void 0===n?void 0:n.querySelector(".region");o&&(o.style.marginBottom="0px")}}))}},{key:"addProdHistoryAnnotation",value:function(t,e){var i=this.flyoutData.dataStoreModule.ProductHistoryData;if(i&&i.length>0)if(this.newPwiloData){var n=document.querySelector("#".concat(this.sectionId)),o=null==n?void 0:n.querySelectorAll("msft-shopping-link, msft-product-card");if(o&&o.length===i.length)for(var a=0;a<i.length;a++)o[a].hasAnnotation||this.createAnnotation(o[a],i[a])}else t&&void 0!==e&&!t.hasAnnotation&&this.createAnnotation(t,i[e])}},{key:"populateProductHistoryList",value:function(t,e,i){var n,o=this,r=document.querySelector("#".concat(this.sectionId," #pdhWraper"));r||((r=this.utilities.createElement("DIV")).id="pdhWraper",this.flyoutData.common.isPane&&(r.style.borderRadius="8px",r.style.display="flex",r.style.flexDirection="column",r.style.rowGap="8px",r.style.margin="10px"));var s=this.flyoutData.dataStoreModule.ProductHistoryData;if(s){s.length>0&&(n=s.length);var l=0;if(e)if(this.showAllItems=!0,this.telemetrySent)l=0;else{var c=new na.Z(a.$S.SeeMoreRetailers);this.logModule.LogInfoEvent(a.R.ButtonClick,"See more product history",c),l=D.CS.PRODUCTHISTORY,this.telemetrySent=!0}else n>D.CS.PRODUCTHISTORY&&(n=D.CS.PRODUCTHISTORY);for(var u=function(n){var a=document.createElement("msft-product-card");a.price=s[n].entity.price,a.description=s[n].title,a.href="#",s[n].domain&&(a.retailer=s[n].domain,o.createProductImages(a,s[n])),o.flyoutData.common.isPane&&(a.style.backgroundColor="var(--fill-color)",a.isProductHistoryPane=!0,a.style.border="1px solid rgba(0, 0, 0, 0.08)",a.style.borderRadius="8px"),o.addProdHistoryAnnotation(a,n),o.addDeleteButton(a,s[n],o.previousLink,t,n),o.manageProductLinkEvents(a,s[n]),r.appendChild(a),n===l&&e&&i&&o.flyoutData.common.currentDevice===D.AS.Desktop&&a&&Tt.SO.queueUpdate((function(){a.focus()})),o.previousLink=a},d=l;d<n;d++)u(d);t.appendChild(r)}}},{key:"addDeleteButton",value:function(t,e,i,n,o){var a=this,r=this.utilities.createElement("fluent-button");r.slot="deleteEntry",r.appearance="stealth",r.style.visibility="hidden",r.addEventListener("click",(function(i){t.remove(),e.url.startsWith("http")?a.pageHandlerModule.DeletePwiloEntry(e.url):(a.pageHandlerModule.DeletePwiloEntry("https://"+e.url),a.pageHandlerModule.DeletePwiloEntry("http://"+e.url));var n=new CustomEvent(Ia.e1.PWILODeleted,{detail:{event:i,index:o}});a.stateManagementModule.dispatchEvent(n)})),t.addEventListener("mouseover",(function(){a.setButtonVisibility(r,!0)})),t.addEventListener("mouseout",(function(){a.setButtonVisibility(r,!1)})),t.addEventListener("focus",(function(){a.setButtonVisibility(r,!0)})),t.addEventListener("keydown",(function(t){t.shiftKey?a.setButtonVisibility(r,!1):a.setButtonVisibility(r,!0)})),document.addEventListener("keydown",(function(e){if(e.shiftKey)if(i&&document.activeElement===t){var o=i.querySelector("fluent-button");o&&Tt.SO.queueUpdate((function(){o.focus()}))}else{var a=n.querySelector(".btnSeeMore");a&&document.activeElement===a&&Tt.SO.queueUpdate((function(){r.focus()}))}})),r.addEventListener("blur",(function(){a.setButtonVisibility(r,!1)})),r.addEventListener("focus",(function(){r.setAttribute("aria-label",a.flyoutData.strings.prodHDeleteItem)})),r.title=this.flyoutData.strings.prodHDeleteItem;var s=this.utilities.createElement("DIV");s.setAttribute("aria-hidden","true"),s.innerHTML=this.utilities.commonAssets.getCloseButton(),r.appendChild(s),t.appendChild(r)}},{key:"setButtonVisibility",value:function(t,e){e?t.style.visibility="visible":(t.style.visibility="hidden",t.setAttribute("aria-label",""))}},{key:"createAnnotation",value:function(t,e){if(!t.querySelector(".prodHBottomAnnotation")){var i=e.newTimestamp;if(i&&"No data found"!==i&&e.entity){var n,o=e.entity.latestPrice,a=e.entity.priceValue,r=null!==(n=e.entity.priceCurrency)&&void 0!==n?n:"$",s=parseFloat(a.toString()),l=null;if(s&&!isNaN(s)&&o&&-1!==o&&(o>s?l=D.lp.PRICEINCREASE:o<s&&(l=D.lp.PRICEDROP)),l){var c=this.utilities.createElement("msft-attribution");c.className="prodHBottomAnnotation";var u=this.utilities.createElement("DIV"),d=!1,h=this.flyoutData.common.currentTheme===D.Q2.Dark;if(l===D.lp.PRICEDROP){var p,f=!1;if(void 0!==o&&void 0!==s&&s>0&&(p=(s-o)/s*100,f=!0),f){var g=this.utilities.toFixedSafe(p,0);c.textContent=this.utilities.replaceValueInKey("prodHPriceDropRefresh",this.flyoutData.strings.prodHPriceDropRefresh,"".concat(g,"%")),c.className="prodHAnnotation",u.innerHTML=this.assets.getPriceDecreaseTrendIconRefresh(h),d=!0,c.style.color=h?"#43E498":"#028948"}}else if(l===D.lp.PRICEINCREASE){var m,v=!1;if(void 0!==o&&void 0!==s&&o>0&&(m=(o-s)/o*100,v=!0),v){var y=this.utilities.toFixedSafe(m,0);c.textContent=this.utilities.replaceValueInKey("prodHPriceIncreaseRefresh",this.flyoutData.strings.prodHPriceIncreaseRefresh,"".concat(y,"%")),c.className="prodHAnnotation",u.innerHTML=this.assets.getPriceIncreaseTrendIconRefresh(h),d=!0,c.style.color=h?"#F9A1AC":"#C82B45"}}if(s){var C=this.utilities.createElement("P");C.className="txtSmall prodHAnnotation",C.style.fontSize="12px",C.style.marginTop="4px",C.slot="previous-price";var b=this.utilities.formatPrice(s);C.textContent=this.utilities.replaceValueInKey("prodHAnnotation",this.flyoutData.strings.prodHAnnotation,"".concat(r).concat(b)),C.style.textAlign="end",t.appendChild(C);var S=this.utilities.formatPrice(o);t.price="".concat(r).concat(S)}d&&(u.slot="image",u.style.display="flex",c.appendChild(u)),c.slot="end",c.textContent&&(t.appendChild(c),t.style.height="115px",t.hasAnnotation=!0)}}}}},{key:"createProductImages",value:function(t,e){var i=this,n=document.createElement("IMG");this.utilities.addFavIconSrc(n,t,e.domain);var o=this.utilities.createElement("IMG");e.entity.image&&""!==e.entity.image?(this.utilities.addImageSrc(o,e.entity.image),o.style.maxWidth="66px",o.style.maxHeight="66px"):this.utilities.addImageSrc(o,this.commonAssets.getDefaultProductImage()),o.setAttribute("aria-hidden","true"),o.slot="image",o.addEventListener("error",(function(){i.utilities.addImageSrc(o,i.commonAssets.getDefaultProductImage())})),n.style.width="16px",n.style.height="16px",n.style.marginRight="calc(var(--design-unit) * 2px)",t.appendChild(o)}},{key:"manageProductLinkEvents",value:function(t,e){var i=this;t.addEventListener("click",(function(t){t.target&&"deleteEntry"!==t.target.slot&&i.navigateToRetailer(e,lg.$.NEW_FOREGROUND_TAB)})),t.addEventListener("mousedown",(function(t){if(1===t.button)i.navigateToRetailer(e,lg.$.NEW_FOREGROUND_TAB)}))}},{key:"navigateToRetailer",value:function(t,e){var i=new na.Z(a.$S.NavigatedToAnotherRetailer);this.pageHandlerModule.RecordAsUserAction(Ca.bS.PRODUCT_HISTORY_NAVIGATION),this.pageHandlerModule.RecordAsUserEngagement(ng.PRODUCT_HISTORY_NAVIGATION),this.logModule.LogInfoEvent(a.R.ButtonClick,"Navigation to another retailer from product history",i),this.pageHandlerModule.NavigateToAlternateRetailerWithDisposition(t.url)}}]),i}(jf.Z),zI=WI,KI=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getAggregateRatingLineStyles",value:function(){return"\n        span[part=title] .csrc { padding-left: 5px; }\n        .csrc { padding-right: 2px; }\n        .csrc svg {\n            vertical-align: text-bottom;\n            padding-bottom: 1px;\n        }"}},{key:"getStyles",value:function(){return"\n            msft-horizontal-card-slider msft-shopping-link, .vid_cds msft-shopping-link {\n                margin: 0 !important;\n            }\n            .vid_cds {\n                display: flex;\n                column-gap: 8px;\n            }\n            .vid_cds msft-shopping-link { flex: 1 }\n            msft-shopping-link + .vid_cds { margin-top: 5px; }\n            .vid_cds:last-of-type { margin-bottom: 5px; }\n            .vid_thv, .vid_thh { position: relative; }\n            .vid_thv img {\n                border-radius: 4px 4px 0 0;\n                max-width: 100%;\n            }\n            .vid_thh img {\n                border-radius: 4px 0 0 4px;\n            }\n            .vid_thov {\n                position: absolute;\n                bottom: 0;\n                right: 0;\n                margin: 8px;\n            }\n            .vid_thov span {\n                background-color: rgba(0,0,0,0.75);\n                color: #fff;\n                margin-left: 2px;\n                padding: 1px 5px;\n                font-weight: bold;\n                font-size: 11px;\n                line-height: 14px;\n                float: right;\n            }\n            .vid_thov .vid_thply {\n                background-image: url(".concat(this.getPlayIconUri(),");\n                background-repeat: no-repeat;\n                background-position: center;\n                width: 7px;\n                height: 14px;\n            }")}},{key:"getExpertReviewShoppingLinkShadowStyles",value:function(){return"\n            .control {\n                padding: 8px 15px 10px 15px !important;\n                grid-template-columns: auto 1fr auto !important;\n                grid-template-rows: minmax(20px, auto) 1fr;\n                grid-row-gap: 8px;\n            }\n            .control .caption, .provider, .cardtitle {\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n            }\n            .provider, .cardtitle { font-size: 14px; }\n            .cardtitle { grid-column: 1 / 3; }\n            .rating { font-size: 16px; }\n            .control .caption {\n                grid-column: 1 / 4;\n                font-weight: normal;\n            }"}},{key:"getCommonEntityHeaderStyles",value:function(){return"\n            #rrPHHeader {\n                width: 100%;\n                text-align: left;\n            }\n            .ce_head {\n                display: flex;\n                flex-direction: row;\n                width: 100%;\n            }\n            .ce_im {\n                display: flex;\n                align-items: center;\n            }\n            .ce_im img { object-fit: contain; }\n            .ce_im + .ce_info {\n                width: 216px;\n                margin-right: 0;\n            }\n            .ce_info {\n                display: flex;\n                flex-direction: column;\n                margin: 0 12px;\n            }\n            .ce_info > div {\n                margin-bottom: 8px;\n                text-align: initial;\n            }\n            .ce_pcbest {\n                display: flex;\n                font-size: 12px;\n            }\n            .ce_pcill { margin: 2px 6px 0 0; }\n            .ce_info .ce_pcbest {\n                background: rgba(16, 124, 16, 0.08);\n                padding: 4px 8px;\n                border-radius: 4px;\n                margin-bottom: 4px;\n            }\n            .ce_info .ce_title {\n                font-size: 16px;\n                font-weight: 600;\n                line-height: normal;\n                margin-top: 4px;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n            }\n            .ce_head .ph_ill > div { line-height: 16px; }"}},{key:"getPlayIconUri",value:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAIBAMAAADHKvg1AAAAIVBMVEX///////////////////////////////////////////9/gMdvAAAACnRSTlMAETNEVWaImbvuo4D1oAAAAB9JREFUCB1jmMoABKuaQcSqQhCxKgFGgLhNQIkpQAwA8zkLyQAl6F0AAAAASUVORK5CYII="}},{key:"getCommonEntityHeaderBestPriceIcon",value:function(t){return t===D.Q2.Dark?A.Z.getTrustedHTML(VI||(VI=(0,E.Z)(['<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM10.5757 5.57574L7 9.15147L5.42426 7.57574C5.18995 7.34142 4.81005 7.34142 4.57574 7.57574C4.34142 7.81005 4.34142 8.18995 4.57574 8.42426L6.57574 10.4243C6.81005 10.6586 7.18995 10.6586 7.42426 10.4243L11.4243 6.42426C11.6586 6.18995 11.6586 5.81005 11.4243 5.57574C11.1899 5.34142 10.8101 5.34142 10.5757 5.57574Z" fill="#4BDBA2"/></svg>']))):A.Z.getTrustedHTML($I||($I=(0,E.Z)(['<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM10.5757 5.57574L7 9.15147L5.42426 7.57574C5.18995 7.34142 4.81005 7.34142 4.57574 7.57574C4.34142 7.81005 4.34142 8.18995 4.57574 8.42426L6.57574 10.4243C6.81005 10.6586 7.18995 10.6586 7.42426 10.4243L11.4243 6.42426C11.6586 6.18995 11.6586 5.81005 11.4243 5.57574C11.1899 5.34142 10.8101 5.34142 10.5757 5.57574Z" fill="#107C10"/></svg>'])))}}]),t}();function YI(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return jI(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return jI(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function jI(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function XI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var qI=function(t){(0,O.Z)(i,t);var e=XI(i);function i(t,n,o){var a;return(0,s.Z)(this,i),a=e.call(this),(0,I.Z)((0,R.Z)(a),"assets",void 0),(0,I.Z)((0,R.Z)(a),"stateManagement",void 0),(0,I.Z)((0,R.Z)(a),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(a),"logModule",void 0),(0,I.Z)((0,R.Z)(a),"flyoutData",void 0),(0,I.Z)((0,R.Z)(a),"utilities",void 0),(0,I.Z)((0,R.Z)(a),"ratingsRendered",!1),a.stateManagement=t,a.pageHandlerModule=o.pageHandlerModule,a.logModule=o.logModule,a.flyoutData=n,a.utilities=o.viewModulesUtilities,a.assets=new KI,a}return(0,l.Z)(i,[{key:"GetModuleName",value:function(){return D.GX.RATINGSANDREVIEWS}},{key:"ShouldRenderModule",value:function(){var t=this,e=this.flyoutData.dataStoreModule.RatingsAndReviewsData,i=!!e&&(e.hasExpertReviews||e.hasVideos);return i&&this.stateManagement.addEventListener(Ia.e1.CreateInlineRating,(function(e){e.detail&&e.detail.moduleName&&e.detail.callback&&!t.ratingsRendered&&(t.createInlineRating(e.detail.moduleName,e.detail.callback),t.ratingsRendered=!0)})),Promise.resolve(i)}},{key:"renderModule",value:function(){var t=this.flyoutData.dataStoreModule.RatingsAndReviewsData;if(t){var e,n=this.utilities.createElement("msft-edge-shopping-section");n.id=i.ShoppingSectionId,n.accordion=!0,n.expanded=!1,n.title=null!==(e=t.sectionTitle)&&void 0!==e?e:t.hasExpertReviews?t.hasVideos?this.flyoutData.strings.rrExpertAndVideoReviews:this.flyoutData.strings.rrExpertReviews:this.flyoutData.strings.rrVideoReviews,this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var r=this.RankOrderedCards(t),s={l:[]};this.RenderCards(n,r,s);var l=JSON.stringify(s);this.logModule.LogInfoEvent(a.R.EdgeFlyoutStatus,l,new o.Z(a.xu.RatingsAndReviewsRendered));var c=this.CreateModule(n,D.H7.RATINGSANDREVIEWS,D.GX.RATINGSANDREVIEWS,D.$k.CONTEXTUAL);return Promise.resolve(c)}return Promise.resolve(null)}},{key:"populateMainHeader",value:function(){var t=this.flyoutData.common.shopping.querySelector("#"+i.ShoppingSectionId);if(t&&(t.accordion=!1),this.flyoutData.common.shopping.querySelector("#divPriceHistorySection .ph_ill")){var e=this.CreateCommonEntityHeader();e.slot="header-content",this.flyoutData.common.shopping.appendChild(e)}else{if(this.flyoutData.common.shopping.querySelectorAll("#priceComparisonSection")){var n=new CustomEvent(Ia.e1.pcCreateHeader);this.stateManagement.dispatchEvent(n)}}}},{key:"PostProcessing",value:function(t,e,i){Tt.SO.queueUpdate((function(){var t,e=null===(t=i.shadowRoot)||void 0===t?void 0:t.querySelector("fluent-accordion-item");if(e){var n,o=null===(n=e.shadowRoot)||void 0===n?void 0:n.querySelector(".region");o&&(o.style.marginBottom="0px")}}))}},{key:"CreateCommonEntityHeader",value:function(){var t=this.flyoutData.dataStoreModule.PriceComparisonData,e=this.utilities.createElement("div");if(this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getCommonEntityHeaderStyles()),this.flyoutData.common.shopping.querySelector("#divPriceHistorySection .ph_ill")){e.id="rrPHHeader";var i=new CustomEvent(Ia.e1.CreatePHHeader,{detail:{section:e}});this.stateManagement.dispatchEvent(i);var n=e.querySelector(".ph_info");if(n){var o=this.createInlineRating(D.GX.RATINGSANDREVIEWS);o&&n.appendChild(o)}}else if(null!=t&&t.CompetingPrices&&t.CompetingPrices.length>0&&t.lowestPrice<0){var a,r,s,l,c=this.utilities.createElement("div",{className:"ce_info"});e.className="ce_head";var u=this.utilities.createElement("div",{className:"ce_pcbest"},this.flyoutData.strings.pcBestPriceHeader),d=this.utilities.createElement("div",{className:"ce_pcill"});d.innerHTML=this.assets.getCommonEntityHeaderBestPriceIcon(this.flyoutData.common.currentTheme),null===(a=d.firstElementChild)||void 0===a||a.setAttribute("role","presentation"),u.insertAdjacentElement("afterbegin",d),c.appendChild(u);var h=null!==(r=null!==(s=null==t?void 0:t.entityName)&&void 0!==s?s:null===(l=this.flyoutData.dataStoreModule.RatingsAndReviewsData)||void 0===l?void 0:l.entityName)&&void 0!==r?r:"Product";c.appendChild(this.utilities.createElement("div",{className:"ce_title"},h));var p=this.createInlineRating(D.GX.RATINGSANDREVIEWS);p&&c.appendChild(p),e.appendChild(c)}return e}},{key:"createInlineRating",value:function(t,e){var i=this.flyoutData.dataStoreModule.RatingsAndReviewsData;if(null!=i&&i.aggregateRating){var n=this.createAggregateRatingElement(i.aggregateRating);if(n){var r=this.utilities.createElement("div",{className:"rr_inl"}),s=r.attachShadow({mode:"open"});this.utilities.applyStyles(s,this.assets.getAggregateRatingLineStyles()),s.appendChild(n);var l=this.logModule;l.LogInfoEvent(a.R.EdgeFlyoutStatus,t?"Rendered in ".concat(t):"Rendered",new o.Z(a.xu.InlineRatingRendered));return r.addEventListener("click",(function t(){l.LogInfoEvent(a.R.ButtonClick,"First click",new na.Z(a.$S.ClickInlineRating)),r.removeEventListener("click",t)})),e&&e(r),r}}}},{key:"RankOrderedCards",value:function(t){var e=[],i=t.hasExpertReviews,n=t.hasVideos;if(i&&!n&&t.expertReviews)e=t.expertReviews;else if(!i&&n&&t.videos){var o,a=YI(t.videos);try{for(a.s();!(o=a.n()).done;){o.value.cardOrientation=wr.V}}catch(t){a.e(t)}finally{a.f()}e=t.videos}else t.expertReviews&&t.videos&&(e=t.expertReviews.concat(t.videos));return e.sort(Dr.Compare),e}},{key:"createStarRatingElement",value:function(t){var e=t.normalizedValue,i=e.toFixed(1),n=this.utilities.createElement("span",{className:"csrc",role:"img",title:"Star rating: ".concat(i," out of ").concat(Er.NormalizedMaxRating)}),o="http://www.w3.org/2000/svg",a=this.flyoutData.common.currentTheme===D.Q2.Dark?"#fff":"#2b2b2b",r=document.createElementNS(o,"svg");r.setAttribute("height",14..toString()),r.setAttribute("width",(16*Er.NormalizedMaxRating).toString());var s=document.createElementNS(o,"defs"),l=document.createElementNS(o,"path");l.setAttribute("d","M7 1.435l1.386 4.161 4.221.09-3.364 2.662 1.223 4.217L7 10.049l-3.466 2.516 1.223-4.217-3.364-2.662 4.221-.09L7 1.435l1.386 4.161z"),l.setAttribute("id","rnr_st"),l.setAttribute("stroke",a),l.setAttribute("stroke-width","0.8"),s.appendChild(l),r.appendChild(s);for(var c=0;c<Er.NormalizedMaxRating;c++){var u=void 0;if(e>=c+1)u=a;else if(e>c){var d=Math.round(15+70*(e-c))+"%",h=document.createElementNS(o,"linearGradient");h.id="rnr_sth";var p=document.createElementNS(o,"stop");p.setAttribute("offset",d),p.setAttribute("stop-color",a);var f=document.createElementNS(o,"stop");f.setAttribute("offset",d),f.setAttribute("stop-opacity","0"),h.appendChild(p),h.appendChild(f),r.appendChild(h),u="url(#rnr_sth)"}else u="none";var g=document.createElementNS(o,"use");g.setAttribute("fill",u),g.setAttribute("transform","translate(".concat(16*c," .5) scale(.95 .95)")),g.setAttribute("href","#rnr_st"),r.appendChild(g)}return n.appendChild(r),n}},{key:"createAggregateRatingElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";if(t){var i=this.utilities.createElement(e);if(i.appendChild(this.createStarRatingElement(t)),t.totalReviews){var n=this.utilities.createElement("span",{"aria-label":"User ratings",style:"color: var(--neutral-focus-hint); font-size: var(--type-ramp-minus-1-font-size);"},"(".concat(t.totalReviews,")"));i.appendChild(n)}return i}}},{key:"RenderCards",value:function(t,e,n){for(var o=0,a=0;o<e.length&&a<i.MaxCardRows;o++,a++){var r=e[o],s=Nr.Narrow(r),l=void 0===s?r:void 0;if(s){var c=[s];if(n.l.push({t:"V",id:s.id,o:wr[s.cardOrientation]}),s.cardOrientation===wr.H)for(;(null===(u=e[o+1])||void 0===u?void 0:u.cardOrientation)===wr.H;){var u,d=e[++o];c.push(d),n.l.push({t:"V",id:d.id,o:wr[d.cardOrientation]})}this.renderVideosCarousel(c,t)}else l&&(this.renderExpertReview(l,t),n.l.push({t:"R",id:l.id}))}}},{key:"addNavigateHandler",value:function(t,e,i,n,o,r){var s=this.logModule,l=this.pageHandlerModule,c=function(){s.LogInfoEvent(a.R.ButtonClick,"Id:".concat(n),new na.Z(i)),l.RecordAsUserAction(r),e(l,n,o,lg.$.NEW_FOREGROUND_TAB)};t.addEventListener("click",(function(){c()})),t.addEventListener("mousedown",(function(t){1===t.button&&c()}))}},{key:"renderExpertReview",value:function(t,e){var i,n=this;(i=this.utilities.createElement("msft-product-card")).shadowRoot&&(i.href="#",this.addNavigateHandler(i,(function(t,e,i,n){return t.NavigateToProfessionalReviewWithDisposition(e,i,n)}),a.$S.ClickExpertReview,t.id,t.url,Ca.bS.NAVIGATE_TO_PROFESSIONAL_REVIEW),this.utilities.applyStyles(i.shadowRoot,this.assets.getExpertReviewShoppingLinkShadowStyles()),this.stateManagement.addEventListener(Ia.e1.ModulesRendered,(function(){var e,o=null===(e=i.shadowRoot)||void 0===e?void 0:e.querySelector(".control");if(o){for(;o.childElementCount>0;)o.removeChild(o.children[0]);var a=!!t.attribution;if(a)o.appendChild(n.utilities.createElement("div",{className:"cardtitle"},t.title));else{if(t.favIconDomain){var r=n.utilities.createElement("img",{className:"icon",role:"presentation"});n.utilities.addFavIconSrc(r,o,t.favIconDomain)}o.appendChild(n.utilities.createElement("div",{className:"provider"},t.provider))}if(t.rating){var s=n.utilities.createElement("div",{className:"rating"},t.rating.rawValue.toFixed(1)),l=n.utilities.createElement("SPAN");l.textContent="/"+t.rating.maxValue,l.style.fontWeight="normal",n.flyoutData.common.currentTheme===D.Q2.Dark?l.style.color="#FFFFFF":l.style.color="#666666",s.appendChild(l),o.appendChild(s)}if(t.caption){var c=t.caption;if(c.length>160){var u=c.match(/^.{160}\S{0,20}/),d=u&&u[0]?u[0]:c.substr(0,160);d.length<c.length&&(c=d+"...")}o.appendChild(n.utilities.createElement("div",{className:"caption"},c))}if(a&&t.attribution){var h=n.utilities.createElement("msft-attribution");if(h.innerText=t.attribution,t.favIconDomain){var p=n.utilities.createElement("img",{className:"icon",role:"presentation",slot:"image"});n.utilities.addFavIconSrc(p,h,t.favIconDomain)}o.appendChild(h)}}})),e.appendChild(i))}},{key:"renderVideosCarousel",value:function(t,e){if(t&&t.length>0){var n=e;2===t.length&&(n=this.utilities.createElement("div",{className:"vid_cds"}));for(var o=0;o<t.length&&o<i.MaxVideos;o++)this.renderVideo(t[o],n,t.length);t.length>1&&e.appendChild(n)}}},{key:"renderVideo",value:function(t,e,i){var n,o,r=i>2,s=i>1,l=r?128:s?166:146,c=s?160:82,u=t.publisher?t.creator?"".concat(t.publisher," > ").concat(t.creator):t.publisher:t.creator,d=t.title;t.creator&&(d+=" from "+t.creator),t.publisher&&(d+=" on "+t.publisher),d+=" · Duration: "+t.durationLabel,(o=this.utilities.createElement("msft-product-card",{"aria-label":d})).style.height="82px",o.isVideoCard=!0,o.description=t.title,o.retailer=u,o.href="#",this.addNavigateHandler(o,(function(t,e,i,n){return t.NavigateToVideoReviewWithDisposition(e,i,n)}),a.$S.ClickVideoReview,t.id,t.clickthroughUrl,Ca.bS.NAVIGATE_TO_VIDEO_REVIEW);var h=this.utilities.createElement("style");h.textContent="\n.control {\n    height: ".concat(c," !important;\n    padding: 0 !important;\n}\n.control .content {\n    padding: 8px;\n    display: block;\n}\nmsft-attribution.attribution { grid-template-columns: initial; }"),s?(r&&(h.textContent+=".control { width: ".concat(l," !important; }")),h.textContent+="\n.control {\n    grid-template-columns: 1fr !important;\n    grid-template-rows: auto 1fr;\n}"):h.textContent+="\n.control {\n    grid-template-columns: auto 1fr !important;\n    column-gap: 2px !important;\n}\n.control .content { padding-right: 10px; }",null===(n=o.shadowRoot)||void 0===n||n.appendChild(h);var p=this.utilities.createElement("div",{className:s?"vid_thv":"vid_thh"});p.slot="image",s||(p.style.height=c+"px");var f=this.utilities.createElement("img",{role:"presentation"});f.width=l,f.height=s?c-74:c;var g=this.flyoutData.common.urlPrefix;t.thumbnailUrl?f.src="".concat(g).concat(t.thumbnailUrl,"&w=").concat(f.width,"&h=").concat(f.height,"&c=7&rs=1"):t.thumbnailId&&(f.src="".concat(g,"https://th.bing.com/th?id=").concat(t.thumbnailId,"&pid=Api&w=").concat(f.width,"&h=").concat(f.height,"&c=7&rs=1")),f.style.borderRadius="0px",f.style.marginRight="calc(var(--design-unit) * 2px)",p.appendChild(f);var m=this.utilities.createElement("div",{className:"vid_thov"});t.durationText&&m.appendChild(this.utilities.createElement("span",{className:"vid_thdur"},t.durationText)),m.appendChild(this.utilities.createElement("span",{className:"vid_thply"})),p.appendChild(m),o.appendChild(p),e.appendChild(o)}}]),i}(jf.Z);(0,I.Z)(qI,"ShoppingSectionId","sectRatingsAndReviews"),(0,I.Z)(qI,"MaxCardRows",3),(0,I.Z)(qI,"MaxVideos",5);var JI=qI,QI=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n            #recommendationsDiv img {\n                width: auto;\n                max-width: calc(100% - 10px);\n            }"}},{key:"getStylesRefresh",value:function(){return"\n            ::part(badge) {\n                background: linear-gradient(92.91deg, #15835B 31.47%, #499F2B 99.7%);\n                bottom: 127px;\n                left: 5px;\n                border-radius: 4px;\n            }\n            #divRecommendationWrapper {\n                margin-left: 12px;\n                margin-right: 12px;\n            }"}}]),t}();function tD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var eD=function(t){(0,O.Z)(i,t);var e=tD(i);function i(t,n){var o;return(0,s.Z)(this,i),o=e.call(this),(0,I.Z)((0,R.Z)(o),"assets",void 0),(0,I.Z)((0,R.Z)(o),"flyoutData",void 0),(0,I.Z)((0,R.Z)(o),"utilities",void 0),(0,I.Z)((0,R.Z)(o),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(o),"logModule",void 0),o.flyoutData=t,o.utilities=n.viewModulesUtilities,o.pageHandlerModule=n.pageHandlerModule,o.logModule=n.logModule,o.assets=new QI,o}return(0,l.Z)(i,[{key:"GetModuleName",value:function(){return D.GX.RECOMMENDATIONS}},{key:"ShouldRenderModule",value:function(){var t=this.hasRecommendations();return Promise.resolve(t)}},{key:"populateMainHeader",value:function(){var t,e,i,n,o,a,r;if((r=this.flyoutData.common.isPane&&null!==(t=this.flyoutData)&&void 0!==t&&null!==(e=t.dataStoreModule)&&void 0!==e&&null!==(i=e.CouponData)&&void 0!==i&&null!==(n=i.Recommendations[0])&&void 0!==n&&n.isTrendingOffer?this.flyoutData.common.shoppingPersistent:this.flyoutData.common.shopping)&&this.flyoutData.dataStoreModule.CouponData&&(null===(o=this.flyoutData.dataStoreModule.CouponData)||void 0===o||null===(a=o.Recommendations)||void 0===a?void 0:a.length)>0){var s,l,c=this.utilities.createElement("H2");c.className="txtLarge",c.style.textAlign="center",c.style.fontWeight="500";var u=null!==(s=this.flyoutData.dataStoreModule.CouponData)&&void 0!==s&&s.FriendlyDomainName?"Trending on "+(null===(l=this.flyoutData.dataStoreModule.CouponData)||void 0===l?void 0:l.FriendlyDomainName):"Trending products!";c.textContent=u,c.slot="header-content",r.appendChild(c)}}},{key:"renderModule",value:function(){var t,e,i,n,o,a;this.flyoutData.common.isPane&&null!==(t=this.flyoutData)&&void 0!==t&&null!==(e=t.dataStoreModule)&&void 0!==e&&null!==(i=e.CouponData)&&void 0!==i&&null!==(n=i.Recommendations[0])&&void 0!==n&&n.isTrendingOffer?this.utilities.applyStyles(this.flyoutData.common.shoppingPersistent,this.assets.getStyles()):this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles()),this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStylesRefresh());var r=this.utilities.createElement("msft-edge-shopping-section");if(r.id="recommendationsDiv",null===(o=this.flyoutData.dataStoreModule.CouponData)||void 0===o?void 0:o.Recommendations){var s,l,c,u=null!==(s=this.flyoutData.dataStoreModule.CouponData)&&void 0!==s&&s.FriendlyDomainName?"Trending on "+(null===(l=this.flyoutData.dataStoreModule.CouponData)||void 0===l?void 0:l.FriendlyDomainName):"Trending products!";this.populateRecommendationsList(r,!1,!1);var d=this.flyoutData;this.utilities.createCommonListStructure(r,u,null===(c=this.flyoutData.dataStoreModule.CouponData)||void 0===c?void 0:c.Recommendations,this.GetModuleName(),(function(t){var e=D.CS.RECOMMENDATIONS;return t&&d.common.bannerContext===D.De.VIEWALL&&(e=t.length),e}),this.populateRecommendationsList.bind(this))}return this.pageHandlerModule.TriggerExperiment(xt.H.isTrendingOffersEnabled),this.flyoutData.experimentData.isExperimentActive(xt.H.isTrendingOffersEnabled)&&null!==(a=this.flyoutData.dataStoreModule.CouponData)&&void 0!==a&&a.Recommendations&&this.flyoutData.dataStoreModule.CouponData.Recommendations.length>0&&this.flyoutData.dataStoreModule.CouponData.Recommendations[0].isTrendingOffer?Promise.resolve(this.CreateModule(r,D.H7.RECOMMENDATIONS,D.GX.RECOMMENDATIONS,D.$k.HOME)):Promise.resolve(this.CreateModule(r,D.H7.RECOMMENDATIONS,D.GX.RECOMMENDATIONS,D.$k.CONTEXTUAL))}},{key:"hasRecommendations",value:function(){var t,e=this.flyoutData.dataStoreModule.CouponData;return null!==(t=e&&e.Recommendations&&e.Recommendations.length>0)&&void 0!==t&&t}},{key:"populateRecommendationsList",value:function(t,e,i){var n,o=null===(n=this.flyoutData.dataStoreModule.CouponData)||void 0===n?void 0:n.Recommendations;if(o){var a=0;o.length>0&&(a=o.length);var r=0;e?r=D.CS.RECOMMENDATIONS:a>D.CS.RECOMMENDATIONS&&(a=D.CS.RECOMMENDATIONS);var s=null;e?s=t.querySelector("#divRecommendationWrapper"):(s=this.utilities.createElement("DIV")).id="divRecommendationWrapper";for(var l=r;l<a;l++){var c=o[l],u=this.createRecommendationTile(c);s?(s.appendChild(u),e||t.appendChild(s)):t.appendChild(u),l===r&&e&&i&&this.flyoutData.common.currentDevice===D.AS.Desktop&&u&&u.focus()}}}},{key:"createRecommendationTile",value:function(t){var e,i=this.utilities.createElement("msft-shopping-recommendation",{style:"padding: 5px 2px 5px 5px;\n             width: 159px;"}),n=this.utilities.createElement("DIV",{style:"display: inline-block;\n            vertical-align: bottom;"});n.className="recommendationLink",i.textContent=t.title,i.setAttribute("current-price",null==t?void 0:t.newPrice),t.originalPrice&&t.originalPrice!==t.newPrice&&i.setAttribute("previous-price",null==t?void 0:t.originalPrice);var o="free shipping"===(null==t||null===(e=t.shippingText)||void 0===e?void 0:e.toLocaleLowerCase())?null==t?void 0:t.shippingText:"",a="";return""===o&&(t.discountPercentage?o=t.discountPercentage+"% OFF":t.priceDropPercentage&&(a=t.priceDropPercentage+"% Price Drop"),""!==a&&(o=a)),""!==o&&i.setAttribute("badge",o),this.createImage(null==t?void 0:t.imageUrl,i),n.appendChild(i),this.managePCLinkEvents(n,null==t?void 0:t.id,null==t?void 0:t.offerUrl),n}},{key:"createImage",value:function(t,e){if(t){var i=this.utilities.createElement("IMG");i.src=this.flyoutData.common.urlPrefix+"https://www.bing.com/"+t,i.slot="image",e.appendChild(i)}}},{key:"managePCLinkEvents",value:function(t,e,i){var n=this;t.addEventListener("click",(function(){n.flyoutData.common.currentDevice===D.AS.Desktop&&n.navigateToOffer(e,i,lg.$.NEW_FOREGROUND_TAB)})),t.addEventListener("mousedown",(function(t){if(1===t.button)n.navigateToOffer(e,i,lg.$.NEW_FOREGROUND_TAB)}))}},{key:"navigateToOffer",value:function(t,e,i){var n=new na.Z(a.$S.NavigateToRecommendedDeal);this.pageHandlerModule.RecordAsUserAction(Ca.bS.NAVIGATE_TO_RECOMMENDATION_OFFER),this.logModule.LogInfoEvent(a.R.ButtonClick,"Clicked on recommended offer",n),this.pageHandlerModule.NavigateToRecommendationWithDisposition(t,e,i)}}]),i}(jf.Z),iD=eD,nD=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getStyles",value:function(){return"\n            .iconDiv {\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n                margin-inline-end: 12px;\n                overflow: hidden;\n                background: rgba(0, 0, 0, 0.02);\n                border: 1px solid transparent;\n                border-radius: calc(var(--corner-radius) * 2px);\n            }\n            .tipsDiv {\n                background: linear-gradient(265.08deg, rgba(36, 255, 0, 0.06) -6.71%, rgba(0, 210, 255, 0.06) 38.87%, rgba(255, 188, 125, 0.06) 93.88%);\n                --elevation: 5;\n                overflow: hidden;\n                align-items: center;\n                padding: 10px 0 10px 0;\n                margin-bottom: 10px;\n                border-radius: calc(var(--elevated-corner-radius) * 1px);\n                text-align: left;\n                display: table;\n                width: 100%;\n            }\n            #gotItButtonWrapper {\n                background: linear-gradient(88.14deg, #018DC8 0.49%, #01CC83 53.44%, #0CBFC9 104.22%);\n                border-radius: 6px;\n                height: 42px;\n                box-sizing: border-box;\n                padding: 1.5px;\n                margin-left: 10px;\n                margin-right: 10px;\n            }\n            #gotItButton {\n                width: 100%;\n                height: 39px;\n                border-radius: 5px;\n            }\n            fluent-button[id*='gotItButton']::part(control) {\n                background: white;\n                font-size: 14px;\n                font-weight: 450;\n                line-height: 20px;\n                color: #008076;\n            }\n            @media (prefers-color-scheme: dark) {\n                fluent-button[id*='gotItButton']::part(control) {\n                    background: #3b3b3b;\n                    color: #2ef4ff;\n                }\n            }\n            "}}]),t}();function oD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var aD,rD,sD=function(e){(0,O.Z)(u,e);var i,o,r,c=oD(u);function u(t,e){var i;return(0,s.Z)(this,u),i=c.call(this),(0,I.Z)((0,R.Z)(i),"assets",void 0),(0,I.Z)((0,R.Z)(i),"flyoutData",void 0),(0,I.Z)((0,R.Z)(i),"utilities",void 0),(0,I.Z)((0,R.Z)(i),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(i),"logModule",void 0),i.flyoutData=t,i.utilities=e.viewModulesUtilities,i.pageHandlerModule=e.pageHandlerModule,i.logModule=e.logModule,i.assets=new nD,i}return(0,l.Z)(u,[{key:"GetModuleName",value:function(){return D.GX.TIPS}},{key:"ShouldRenderModule",value:function(){var t=this.hasTips();return Promise.resolve(t)}},{key:"populateMainHeader",value:function(){var t,e,i=this.flyoutData.common.shopping;if(i&&this.flyoutData.dataStoreModule.NudgeTipsData&&(null===(t=this.flyoutData.dataStoreModule.NudgeTipsData)||void 0===t||null===(e=t.Tips)||void 0===e?void 0:e.length)>0){var n=this.utilities.createElement("H2");n.className="txtLarge",n.style.textAlign="center",n.style.fontWeight="500";var o=this.flyoutData.dataStoreModule.NudgeTipsData.Tips.length>1?this.utilities.replaceValueInKey("tipsMainTitle",this.flyoutData.strings.tipsMainTitle,this.flyoutData.dataStoreModule.NudgeTipsData.Tips.length.toString()):this.flyoutData.strings.tipsTiltleSingle;n.textContent=o,n.slot="header-content",i.appendChild(n)}}},{key:"renderModule",value:function(){var t;this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var e=this.utilities.createElement("msft-edge-shopping-section"),i=null===(t=this.flyoutData.dataStoreModule.NudgeTipsData)||void 0===t?void 0:t.Tips;if(i){var n,o=i.length>1?this.utilities.replaceValueInKey("tipsSubTitle",this.flyoutData.strings.tipsSubTitle,i.length.toString()):this.flyoutData.strings.tipsSubTitleSingle;this.populateTipsList(e,!1,!1);var r=this.flyoutData;this.utilities.createCommonListStructure(e,o,null===(n=this.flyoutData.dataStoreModule.NudgeTipsData)||void 0===n?void 0:n.Tips,this.GetModuleName(),(function(t){var e=D.CS.TIPS;return t&&r.common.bannerContext===D.De.VIEWALL&&(e=t.length),e}),this.populateTipsList.bind(this))}try{var s=Date.now(),l=!1,c=this.logModule,u=this.pageHandlerModule,d=function(){var t=Date.now()-s;if(l&&t>=1e3){u.RecordAsUserAction(Ca.bS.TIPS_CLICK);var e=new na.Z(a.$S.TipsDwellTime);c.LogInfoEvent(a.R.ButtonClick,"Viewed Tips",e)}};e.onmouseover=function(){if(s=Date.now(),e){var t=e.shadowRoot;if(t){var i=t.querySelector("fluent-accordion-item");i&&i.classList.contains("expanded")||(l=!0)}}},e.onmouseleave=d,e.onmouseout=d}catch(t){}return Promise.resolve(this.CreateModule(e,D.H7.TIPS,D.GX.TIPS,D.$k.CONTEXTUAL))}},{key:"hasTips",value:function(){var t,e=this.flyoutData.dataStoreModule.NudgeTipsData;return null!==(t=e&&e.Tips&&e.Tips.length>0)&&void 0!==t&&t}},{key:"populateTipsList",value:(r=(0,t.Z)(n().mark((function t(e,i,o){var a,r,s,l,c,u,d;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=null===(a=this.flyoutData.dataStoreModule.NudgeTipsData)||void 0===a?void 0:a.Tips)){t.next=17;break}s=0,r.length>0&&(s=r.length),l=0,i?l=D.CS.TIPS:s>D.CS.TIPS&&(s=D.CS.TIPS),c=l;case 7:if(!(c<s+1)){t.next=17;break}return u=r[c],t.next=11,this.createTipTile(u,c,r.length);case 11:(d=t.sent)&&e.appendChild(d),c===l&&i&&o&&this.flyoutData.common.currentDevice===D.AS.Desktop&&d&&d.focus();case 14:c++,t.next=7;break;case 17:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return r.apply(this,arguments)})},{key:"createTipTile",value:(o=(0,t.Z)(n().mark((function t(e,i,o){var a,r,s,l,c,u,d,h,p,f;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i!==o){t.next=2;break}return t.abrupt("return",this.tipsButton());case 2:if((a=this.utilities.createElement("DIV")).className="tipsDiv",r=this.utilities.createElement("DIV",{style:"position: relative; height: 100%; display: grid; grid-template-columns: auto 60% auto;"}),a.appendChild(r),(s=this.utilities.createElement("DIV")).className="iconDiv",l=this.utilities.createElement("IMG",{style:"width: 110px; height: 66px; place-self: center"}),s.style.background="none",l.style.width="40px",l.style.height="40px","Shipping"===e.IconType?l.src=this.flyoutData.common.resourcesEndpoint+"tips/ShippingNew.png":"Gift"===e.IconType?l.src=this.flyoutData.common.resourcesEndpoint+"tips/GiftNew.png":(e.IconType,l.src=this.flyoutData.common.resourcesEndpoint+"tips/MoneyNew.png"),l.addEventListener("error",(function(){r.style.gridTemplateColumns="auto",r.removeChild(l)})),l.setAttribute("aria-hidden","true"),s.appendChild(l),r.appendChild(s),c=this.utilities.createElement("DIV",{style:"justify-content: space-around;\n                flex-direction: column;\n                margin-top: 10px;\n                max-width: 192px;"}),r.appendChild(c),(u=this.utilities.createElement("P",{style:"margin: 0px;\n                    margin-bottom: 5px;"})).className="txtSmall",u.style.fontSize="12px",u.style.lineHeight="16px",u.style.color="var(--neutral-foreground-rest)",u.textContent=e.Text,!e.MinimumPurchase){t.next=30;break}return t.next=28,this.GetAmountForFreeShipping(e);case 28:(d=t.sent)>0?(h=e.Text.replace("$x","$"+d.toFixed(2).toString()),u.textContent=h):"Shipping"===e.IconType?(p=this.utilities.replaceValueInKey("tipsFreeShipping",this.flyoutData.strings.tipsFreeShipping,"$"+e.MinimumPurchase.toString()),u.textContent=p):e.Text.includes("Add $x more")&&(f=e.Text.replace("Add $x more",this.utilities.replaceValueInKey("tipsMinimumPurchase",this.flyoutData.strings.tipsMinimumPurchase,"$"+e.MinimumPurchase.toString())),u.textContent=f);case 30:return c.appendChild(u),a.setAttribute("aria-label","".concat(e.Text)),a.setAttribute("tabIndex","0"),t.abrupt("return",a);case 34:case"end":return t.stop()}}),t,this)}))),function(t,e,i){return o.apply(this,arguments)})},{key:"GetAmountForFreeShipping",value:(i=(0,t.Z)(n().mark((function t(e){var i,o,a,r,s,l,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=21;break}if(!(i=e.RetailerData.GetCurrentCheckoutPageByPathName(this.flyoutData.common.lastCommittedURL))){t.next=21;break}if(o=i.orderSubTotalElementSelector,a=i.orderTotalDataElementSelector,!o){t.next=14;break}return t.next=8,this.pageHandlerModule.RunQuerySelectorOnBodyWithReponse(o);case 8:if(r=t.sent,!(s=r.innerText)||!e.MinimumPurchase){t.next=12;break}return t.abrupt("return",e.MinimumPurchase-U.GetPriceStringAsNumber(s));case 12:t.next=21;break;case 14:if(!a){t.next=21;break}return t.next=17,this.pageHandlerModule.RunQuerySelectorOnBodyWithReponse(a);case 17:if(l=t.sent,!(c=l.innerText)||!e.MinimumPurchase){t.next=21;break}return t.abrupt("return",e.MinimumPurchase-U.GetPriceStringAsNumber(c));case 21:return t.abrupt("return",0);case 22:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"tipsButton",value:function(){var t=this;if(!this.flyoutData.common.isPane){var e=this.utilities.createElement("div");e.setAttribute("role","presentation"),e.id="gotItButtonWrapper";var i=this.utilities.createElement("fluent-button");return i.id="gotItButton",i.textContent=this.flyoutData.strings.commonGotIt,i.addEventListener("click",(function(){t.pageHandlerModule.RecordAsUserAction(Ca.bS.TIPS_CLICK);var e=new na.Z(a.$S.TipsGotIt);t.logModule.LogInfoEvent(a.R.ButtonClick,"Tips Got it button click",e),t.pageHandlerModule.DismissPopup()})),e.append(i),e}return null}}]),u}(jf.Z),lD=sD,cD=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"getTagLeft",value:function(){return A.Z.getTrustedHTML(aD||(aD=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="3.5" height="15" viewBox="0 0.5 3.5 15" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.37993 0.517212H2C1.17157 0.517212 0.5 1.18879 0.5 2.01721V13.0133C0.5 13.8417 1.17157 14.5133 2 14.5133H3.37993V0.517212Z" fill="#0078D4"/>'])))}},{key:"getTagRight",value:function(){return A.Z.getTrustedHTML(rD||(rD=(0,E.Z)(['<svg xmlns="http://www.w3.org/2000/svg" width="7.5" height="15" viewBox="1 0.5 7 15" fill="none"><path fill-rule="evenodd" clip-rule:"evenodd" d="M0.379883 14.5111C0.809365 14.4946 1.21231 14.2945 1.48503 13.9599L5.96665 8.46189C6.41642 7.91011 6.41642 7.11821 5.96665 6.56643L1.48503 1.06838C1.21231 0.73381 0.809365 0.533669 0.379883 0.517212V14.5111Z" fill="#0078D4"/>'])))}},{key:"getStyles",value:function(){return"\n        #divRebatesWrapper {\n            width: calc(100% - 4px);\n            margin-bottom: 0px;\n            margin-left: 12px;\n            margin-right: 12px;\n        }\n        #textHeader {\n            font-size: 12px;\n            line-height: 16px;\n            text-align: left;\n        }\n        #divBoxWrapper {\n            background: linear-gradient(265.08deg, rgba(36, 255, 0, 0.06) -6.71%, rgba(0, 210, 255, 0.06) 38.87%, rgba(255, 188, 125, 0.06) 93.88%);\n            border-radius: 4px;\n            padding: 12px;\n            position: relative;\n            display: flex;\n            flex-direction: row;\n            justify-content: flex-start;\n            column-gap: 10px;\n        }\n        #divTextWrapper {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            vertical-align: middle;\n            row-gap: 2px;\n            width: 50%;\n        }\n        #textRecentEarnings {\n            font-size: 12px;\n            line-height: 16px;\n            margin: 0px;\n        }\n        #linkViewActivity {\n            text-decoration: none;\n            margin-top: 10px;\n        }\n        #linkViewActivity:hover {\n            text-decoration: none;\n        }\n        #textViewActivity {\n            font-size: 10px;\n            font-weight: 500;\n            line-height: 14px;\n            margin: 0px;\n        }\n        #textBalance {\n            font-size: 10px;\n            line-height: 14px;\n            margin: 0px;\n        }\n        #numberCurrentBalance {\n            font-size: 18px;\n            line-height: 100%;\n            margin: 0px;\n        }\n        .retailerText {\n            display: flex;\n            line-height: 18px;\n            font-size: 10px;\n            margin-top: -5px;\n            margin-bottom: -3px;\n            width: 125px;\n            text-align: center;\n        }\n        .retailerIcon {\n            max-width: 100px;\n        }\n        .spanArrowValue {\n            display: flex;\n            height: 14px;\n            line-height: 14px;\n            font-size: 10px;\n            background: #0078D4;\n            color: #fff;\n            font-weight: 500;\n            float: left;\n        }\n        .divArrowValue {\n            display: inline-flex;\n            padding-top: 4px;\n            padding-left: 2px;\n            vertical-align: middle;\n        }\n        @media (forced-colors: active) {\n            .activated {\n                background-color: Highlight;\n                forced-color-adjust: none;\n                color: highlightText;\n            }\n            .activated: focus {\n                box-shadow: 0 0 0 2px HighlightText inset;\n                border-color: buttonText;\n            }\n            .imgCBTag {\n                display: none;\n            }\n        }"}}]),t}();function uD(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return dD(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return dD(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function dD(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function hD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var pD=new Map;pD.set("usd","$");var fD=function(t){(0,O.Z)(i,t);var e=hD(i);function i(t,n){var o;return(0,s.Z)(this,i),o=e.call(this),(0,I.Z)((0,R.Z)(o),"assets",void 0),(0,I.Z)((0,R.Z)(o),"logModule",void 0),(0,I.Z)((0,R.Z)(o),"pageHandlerModule",void 0),(0,I.Z)((0,R.Z)(o),"flyoutData",void 0),(0,I.Z)((0,R.Z)(o),"utilities",void 0),o.logModule=n.logModule,o.pageHandlerModule=n.pageHandlerModule,o.flyoutData=t,o.utilities=n.viewModulesUtilities,o.assets=new cD,o}return(0,l.Z)(i,[{key:"GetModuleName",value:function(){return D.GX.TOP_RETAILERS}},{key:"ShouldRenderModule",value:function(){var t,e;if(null!==(t=this.flyoutData)&&void 0!==t&&t.dataStoreModule&&null!==(e=this.flyoutData)&&void 0!==e&&e.dataLoader){var i=this.flyoutData.dataStoreModule.TopRetailerData,n=this.flyoutData.dataLoader.IsServerData();if(i&&n)return Promise.resolve(!0)}return Promise.resolve(!1)}},{key:"renderModule",value:function(){var t;this.flyoutData.common.isPane?this.utilities.applyStyles(this.flyoutData.common.shoppingPersistent,this.assets.getStyles()):this.utilities.applyStyles(this.flyoutData.common.shopping,this.assets.getStyles());var e=document.createElement("msft-edge-shopping-section");e.id="topRetailerDiv",e.setAttribute("aria-label",this.flyoutData.strings.cbTopRetailerTitle);var i=null===(t=this.flyoutData.dataStoreModule.TopRetailerData)||void 0===t?void 0:t.Retailers;if(i&&i.length>0){this.populateRetailerList(e,!1,!1,this.flyoutData.common.bannerContext);var n=this.flyoutData;this.utilities.createCommonListStructure(e,this.flyoutData.strings.cbTopRetailerTitle,i,this.GetModuleName(),(function(t){var e=D.CS.GROCERY_COUPON;return t&&n.common.bannerContext===D.De.VIEWALL&&(e=t.length),e}),this.populateEmptyBannerRetailerList.bind(this));var o=this.CreateModule(e,D.H7.TOP_RETAILERS,D.GX.TOP_RETAILERS,D.$k.HOME);return Promise.resolve(o)}return Promise.resolve(null)}},{key:"populateMainHeader",value:function(){var t,e,i=this;e=this.flyoutData.common.isPane?this.flyoutData.common.shoppingPersistent:this.flyoutData.common.shopping;var n=null===(t=this.flyoutData.dataStoreModule.CashBackData)||void 0===t?void 0:t.userRebatesResponse,o=this.utilities.createElement("DIV");if(o.id="divRebatesWrapper",o.slot="header-content",n&&n.isRebatesUser&&void 0!==n.latestCashbackApproved&&n.latestCashbackApprovedCurrency&&void 0!==n.cashbackAvailable&&void 0!==n.lifetimeBalance){var a=this.utilities.createElement("P");a.style.marginTop="0px",a.id="textHeader",a.textContent=this.flyoutData.strings.cbSnapshotTitle,a.setAttribute("role","heading"),a.setAttribute("aria-level","3"),this.flyoutData.common.isPane&&(a.style.fontSize="16px",a.style.lineHeight="24px",a.style.fontWeight="500");var r=this.utilities.createElement("DIV");r.id="divBoxWrapper";var s=this.utilities.createElement("DIV");s.id="divTextWrapper",s.style.textAlign="left";var l=this.roundNumber(n.latestCashbackApproved),c=n.latestCashbackApprovedCurrency,u=pD.get(c);u=u||"$";var d=this.utilities.createElement("P");d.id="textRecentEarnings",d.textContent=this.utilities.replaceValueInKey("bannerRecentPurchase",this.flyoutData.strings.bannerRecentPurchase,"".concat(u).concat(l));var h=this.utilities.createElement("A");h.id="linkViewActivity",h.slot="header-actions";var p=this.utilities.createElement("P");p.id="textViewActivity",p.textContent=this.flyoutData.strings.cbViewAccount,p.style.color=this.flyoutData.common.currentTheme===D.Q2.Dark?"#6dc0ff":"#0078D4",h.appendChild(p),h.href="#",h.addEventListener("click",(function(){i.pageHandlerModule.NavigateToBingRebatesHistory()})),s.append(d),s.append(h);var f=this.utilities.createElement("DIV");f.id="divTextWrapper",f.style.textAlign="right",f.setAttribute("role","group");var g=this.utilities.createElement("P");g.id="textBalance",g.textContent=this.flyoutData.strings.cbCurrBalance,g.style.fontVariant="small-caps",g.style.color=this.flyoutData.common.currentTheme===D.Q2.Dark?"#c0c0c0":"#8e8e8e";var m=this.roundNumber(n.cashbackAvailable),v=this.utilities.createElement("P");v.id="numberCurrentBalance",v.textContent="".concat(u).concat(m);var y=this.roundNumber(n.lifetimeBalance),C=this.utilities.createElement("P");C.id="textBalance",C.style.color=this.flyoutData.common.currentTheme===D.Q2.Dark?"#c0c0c0":"#8e8e8e",C.textContent=this.utilities.replaceValueInKey("bannerLifetime",this.flyoutData.strings.bannerLifetime,"".concat(u).concat(y)),C.style.marginTop="9px",f.setAttribute("aria-label",g.textContent+": "+v.textContent+", "+C.textContent),f.append(g),f.append(v),f.append(C),r.append(s),r.append(f),o.append(a),o.append(r)}var b=this.utilities.createElement("P");b.style.marginBottom="0px",b.id="textHeader",b.textContent=this.flyoutData.strings.trSectionTitle,b.setAttribute("role","heading"),b.setAttribute("aria-level","3"),this.flyoutData.common.isPane&&(b.style.fontSize="16px",b.style.lineHeight="24px",b.style.fontWeight="500"),o.append(b),e.append(o)}},{key:"populateEmptyBannerRetailerList",value:function(t,e,i){this.populateRetailerList(t,e,i,"")}},{key:"populateRetailerList",value:function(t,e,i,n){var o,r,s=null===(o=this.flyoutData.dataStoreModule.TopRetailerData)||void 0===o?void 0:o.Retailers;if(s){s.length>0&&(r=s.length);var l=0;if(e){var c=new na.Z(a.$S.SeeMoreTopRetailers);this.pageHandlerModule.RecordAsUserAction(Ca.bS.VIEW_MORE_TOP_RETAILERS),this.logModule.LogInfoEvent(a.R.ButtonClick,"",c),l=D.CS.TOP_RETAILERS}else r>D.CS.TOP_RETAILERS&&"viewAll"!==n&&(r=D.CS.TOP_RETAILERS);var u=null;e?u=t.querySelector("#divTopRetailerWrapper"):(u=this.utilities.createElement("DIV",{style:"\n                    display: grid;\n                    grid-template-columns: calc(50% - 6px) calc(50% - 6px);\n                    grid-gap: 12px;\n                    margin-bottom: 10px;\n                    margin-left: 12px;\n                    margin-right: 12px;"})).id="divTopRetailerWrapper";for(var d=l;d<r;d++)u?(this.createRetailerTile(u,s[d],n,l,e,i,d),e||t.appendChild(u)):this.createRetailerTile(t,s[d],n,l,e,i,d)}}},{key:"createRetailerTile",value:function(t,e,i,n,o,r,s){var l=this,c=document.createElement("msft-shopping-cashback-card");c.layout="grid",c.href="#",c.ariaRoledescription="button";var u=e.merchantFullName,d=this.retrieveCashBackAmount(e),h=this.utilities.replaceValueInKey("trAriaLabel",this.flyoutData.strings.trAriaLabel,d,u);c.ariaLabel=h;var p=document.createElement("div");p.className="retailerText";var f=this.createCommissionArrow(!0,d);f.setAttribute("aria-hidden","true");var g=this.flyoutData.strings.cbRetailerTitle;this.utilities.populateSingleChildHtml(p,g,f);var m=document.createElement("img");m.src=e.image,m.alt=this.utilities.replaceValueInKey("trImageLabel",this.flyoutData.strings.commonAriaLogo,u),m.slot="image",c.appendChild(m),c.appendChild(p),t.appendChild(c),c.addEventListener("click",(function(){l.pageHandlerModule.RecordAsUserAction(Ca.bS.CASHBACK_RETAILER_CLICK);var t=new na.Z(a.$S.CashbackRetailer);l.logModule.LogInfoEvent(a.R.ButtonClick,"Clicked to go to cashback retailer site",t),l.pageHandlerModule.NavigateToRetailerSite(e.originalUrl)}));var v=this.flyoutData.common.currentDevice;s===n&&o&&r&&v===D.AS.Desktop&&c?c.focus():o&&v===D.AS.Mobile&&Tt.SO.queueUpdate((function(){c.setAttribute("marker","1");var t=c.parentNode;if(t){var e,i=uD(t.children);try{for(i.s();!(e=i.n()).done;){var n=e.value,o=n.shadowRoot;if(o){var a=o.querySelector(".indicator");null==n.getAttribute("marker")?a&&(a.style.display="none"):a.style.display="flex"}}}catch(t){i.e(t)}finally{i.f()}}}))}},{key:"roundNumber",value:function(t){var e=parseFloat(t);return(Math.round(100*e)/100).toString()}},{key:"retrieveCashBackAmount",value:function(t){var e="",i="",n="";return t.commissionType&&(i=t.commissionType,n=t.commissionValue),"%"===i?e="".concat(n).concat("%"):"flat"===i&&(e="".concat("$").concat(n)),e}},{key:"createCommissionArrow",value:function(t,e,i){var n=this.utilities.createElement("DIV");n.className="imgCBTag",n.innerHTML=this.assets.getTagLeft(),n.style.float="left";var o=this.utilities.createElement("DIV");o.className="imgCBTag",o.innerHTML=this.assets.getTagRight(),o.style.float="left",o.style.paddingLeft="-0.5px";var a=this.utilities.createElement("SPAN");a.textContent=e,a.className="spanArrowValue";var r=this.utilities.createElement("DIV");return r.className="divArrowValue",r.appendChild(n),r.appendChild(a),r.appendChild(o),i&&i(r),r}}]),i}(jf.Z),gD=fD,mD=function(){function t(e,i,n){(0,s.Z)(this,t),(0,I.Z)(this,"cashBackModule",void 0),(0,I.Z)(this,"checkoutAutofillModule",void 0),(0,I.Z)(this,"couponsModule",void 0),(0,I.Z)(this,"dealsModule",void 0),(0,I.Z)(this,"recommendationsModule",void 0),(0,I.Z)(this,"clippingModule",void 0),(0,I.Z)(this,"priceComparisonModule",void 0),(0,I.Z)(this,"priceHistoryModule",void 0),(0,I.Z)(this,"bannerModule",void 0),(0,I.Z)(this,"flyoutRendererModule",void 0),(0,I.Z)(this,"paneRendererModule",void 0),(0,I.Z)(this,"ratingsAndReviewsModule",void 0),(0,I.Z)(this,"stateManagementModule",void 0),(0,I.Z)(this,"productHistoryModule",void 0),(0,I.Z)(this,"similarSellerModule",void 0),(0,I.Z)(this,"tipsModule",void 0),(0,I.Z)(this,"flyoutData",void 0),(0,I.Z)(this,"utilities",void 0),(0,I.Z)(this,"commonAssets",void 0),(0,I.Z)(this,"rewardModule",void 0),(0,I.Z)(this,"cashBackNotificationModule",void 0),(0,I.Z)(this,"similarSellersNotificationModule",void 0),(0,I.Z)(this,"rewardNotificationModule",void 0),(0,I.Z)(this,"priceComparisonNotificationModule",void 0),(0,I.Z)(this,"paymentOptionsModule",void 0),(0,I.Z)(this,"exclusiveCouponsNotificationModule",void 0),(0,I.Z)(this,"exclusiveCouponsModule",void 0),(0,I.Z)(this,"microNotificationModule",void 0),(0,I.Z)(this,"orderStatusTrackingModule",void 0),(0,I.Z)(this,"sustainabilityModule",void 0),(0,I.Z)(this,"sustainabilityNotificationModule",void 0),(0,I.Z)(this,"trackingConfirmationNotificationModule",void 0),(0,I.Z)(this,"virtualCardModule",void 0),(0,I.Z)(this,"virtualCardNotificationModule",void 0),(0,I.Z)(this,"viewedProductPriceDropNotificationModule",void 0),(0,I.Z)(this,"topRetailersModule",void 0),(0,I.Z)(this,"groceryCouponModule",void 0),(0,I.Z)(this,"printableCouponModule",void 0),(0,I.Z)(this,"giftCardModule",void 0),(0,I.Z)(this,"giftCardNotificationModule",void 0),(0,I.Z)(this,"feedbackModule",void 0),(0,I.Z)(this,"attainableCouponsModule",void 0),(0,I.Z)(this,"attainableCouponsNotificationModule",void 0),(0,I.Z)(this,"groceryCashbackModule",void 0),(0,I.Z)(this,"groceryCashbackActivatedModule",void 0),(0,I.Z)(this,"groceryCashbackNotificationModule",void 0),(0,I.Z)(this,"autosMarketplaceModule",void 0),(0,I.Z)(this,"autosMarketplaceNotificationModule",void 0),(0,I.Z)(this,"priceHistoryNotificationModule",void 0),this.flyoutData=e,this.utilities=i,this.commonAssets=n}return(0,l.Z)(t,[{key:"GetCouponModule",value:function(){return this.couponsModule||(this.couponsModule=new JT(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.couponsModule}},{key:"GetDealsModule",value:function(){return this.dealsModule||(this.dealsModule=new oI(this.flyoutData,this.utilities)),this.dealsModule}},{key:"GetRecommendationsModule",value:function(){return this.recommendationsModule||(this.recommendationsModule=new iD(this.flyoutData,this.utilities)),this.recommendationsModule}},{key:"GetSimilarSellerModule",value:function(){return this.similarSellerModule||(this.similarSellerModule=new sA(this.flyoutData,this.utilities,this.commonAssets)),this.similarSellerModule}},{key:"GetTipsModule",value:function(){return this.tipsModule||(this.tipsModule=new lD(this.flyoutData,this.utilities)),this.tipsModule}},{key:"GetCashBackModule",value:function(){return this.cashBackModule||(this.cashBackModule=new rT.Z(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.cashBackModule}},{key:"GetPriceComparisonModule",value:function(){return this.priceComparisonModule||(this.priceComparisonModule=new em(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.priceComparisonModule}},{key:"GetPriceHistoryModule",value:function(){return this.priceHistoryModule||(this.priceHistoryModule=new LE(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.priceHistoryModule}},{key:"GetClippingModule",value:function(){return this.clippingModule||(this.clippingModule=new GT(this.flyoutData,this.utilities,this.GetStateManagementModule(),this.commonAssets)),this.clippingModule}},{key:"GetRatingsAndReviewsModule",value:function(){return this.ratingsAndReviewsModule||(this.ratingsAndReviewsModule=new JI(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.ratingsAndReviewsModule}},{key:"GetBannerModule",value:function(){return this.bannerModule||(this.bannerModule=new aT(this.GetCashBackModule(),this.GetPriceComparisonModule(),this.GetPriceHistoryModule(),this.GetCouponModule(),this.flyoutData,this.GetStateManagementModule(),this.utilities,this.commonAssets)),this.bannerModule}},{key:"GetFlyoutRendererModule",value:function(){if(!this.flyoutRendererModule){var t,e,i=null!==(t=null===(e=this.flyoutData.common.lastCommittedURL)||void 0===e?void 0:e.includes("pinterest.com/pin"))&&void 0!==t&&t;this.flyoutRendererModule=new zf(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets,i?this.GetAvailableGuestModules():this.GetAvailableModules(),this.GetAvailableNotificationModules(),this.GetBannerModule())}return this.flyoutRendererModule}},{key:"GetPaneRendererModule",value:function(){return this.paneRendererModule||(this.paneRendererModule=new tT(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets,this.GetAvailableModules(),this.GetAvailableNotificationModules(),this.GetBannerModule())),this.paneRendererModule}},{key:"GetCheckoutAutofillModule",value:function(){return this.checkoutAutofillModule||(this.checkoutAutofillModule=new vT(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.checkoutAutofillModule}},{key:"GetStateManagementModule",value:function(){if(!this.stateManagementModule){var t=document.querySelector("#divContentWrapper");this.stateManagementModule=new Ia.ZP(this.utilities.logModule,t)}return this.stateManagementModule}},{key:"GetProductHistoryModule",value:function(){return this.productHistoryModule||(this.productHistoryModule=new zI(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.productHistoryModule}},{key:"GetRewardModule",value:function(){return this.rewardModule||(this.rewardModule=new XE(this.flyoutData,this.utilities,this.GetStateManagementModule())),this.rewardModule}},{key:"GetOrderStatusTrackingModule",value:function(){return this.orderStatusTrackingModule||(this.orderStatusTrackingModule=new EA(this.flyoutData,this.utilities,this.GetStateManagementModule(),this.commonAssets)),this.orderStatusTrackingModule}},{key:"GetSustainabilityModule",value:function(){return this.sustainabilityModule||(this.sustainabilityModule=new fA(this.flyoutData,this.utilities)),this.sustainabilityModule}},{key:"GetTrackingConfirmationNotificationModule",value:function(){return this.trackingConfirmationNotificationModule||(this.trackingConfirmationNotificationModule=new NA(this.flyoutData,this.utilities,this.GetStateManagementModule(),this.commonAssets)),this.trackingConfirmationNotificationModule}},{key:"GetCashBackNotificationModule",value:function(){return this.cashBackNotificationModule||(this.cashBackNotificationModule=new vg.Z(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.cashBackNotificationModule}},{key:"GetSimilarSellersNotificationModule",value:function(){return this.similarSellersNotificationModule||(this.similarSellersNotificationModule=new uA(this.flyoutData,this.utilities,this.commonAssets)),this.similarSellersNotificationModule}},{key:"GetRewardNotificationModule",value:function(){return this.rewardNotificationModule||(this.rewardNotificationModule=new QE(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.rewardNotificationModule}},{key:"GetPriceComparisonNotificationModule",value:function(){return this.priceComparisonNotificationModule||(this.priceComparisonNotificationModule=new am(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.priceComparisonNotificationModule}},{key:"GetExclusiveCouponsNotificationModule",value:function(){return this.exclusiveCouponsNotificationModule||(this.exclusiveCouponsNotificationModule=new Tg(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.exclusiveCouponsNotificationModule}},{key:"GetGiftCardNotificationModule",value:function(){return this.giftCardNotificationModule||(this.giftCardNotificationModule=new Og(this.flyoutData,this.utilities,this.commonAssets)),this.giftCardNotificationModule}},{key:"GetExclusiveCouponsModule",value:function(){return this.exclusiveCouponsModule||(this.exclusiveCouponsModule=new Sg(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.exclusiveCouponsModule}},{key:"GetPaymentOptionsModule",value:function(){return this.paymentOptionsModule||(this.paymentOptionsModule=new AI(this.flyoutData,this.utilities)),this.paymentOptionsModule}},{key:"GetMicroNotificationModule",value:function(){return this.microNotificationModule||(this.microNotificationModule=new Yg(this.GetStateManagementModule(),this.flyoutData,this.utilities,this.commonAssets)),this.microNotificationModule}},{key:"GetViewedProductPriceDropNotificationModule",value:function(){return this.viewedProductPriceDropNotificationModule||(this.viewedProductPriceDropNotificationModule=new _A(this.flyoutData,this.utilities,this.commonAssets)),this.viewedProductPriceDropNotificationModule}},{key:"GetVirtualCardModule",value:function(){return this.virtualCardModule||(this.virtualCardModule=new GA(this.flyoutData,this.utilities)),this.virtualCardModule}},{key:"GetVirtualCardNotificationModule",value:function(){return this.virtualCardNotificationModule||(this.virtualCardNotificationModule=new $A(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.virtualCardNotificationModule}},{key:"GetSustainabilityNotificationModule",value:function(){return this.sustainabilityNotificationModule||(this.sustainabilityNotificationModule=new vA(this.flyoutData,this.utilities)),this.sustainabilityNotificationModule}},{key:"GetTopRetailersModule",value:function(){return this.topRetailersModule||(this.topRetailersModule=new gD(this.flyoutData,this.utilities)),this.topRetailersModule}},{key:"GetGroceryCouponModule",value:function(){return this.groceryCouponModule||(this.groceryCouponModule=new bI(this.flyoutData,this.utilities)),this.groceryCouponModule}},{key:"GetPrintableCouponModule",value:function(){return this.printableCouponModule||(this.printableCouponModule=new BI(this.flyoutData,this.utilities)),this.printableCouponModule}},{key:"GetGiftCardModule",value:function(){return this.giftCardModule||(this.giftCardModule=new wg(this.flyoutData,this.utilities,this.commonAssets)),this.giftCardModule}},{key:"GetFeedbackModule",value:function(){return this.feedbackModule||(this.feedbackModule=new hI(this.flyoutData,this.utilities,this.commonAssets)),this.feedbackModule}},{key:"GetAttainableCouponsModule",value:function(){return this.attainableCouponsModule||(this.attainableCouponsModule=new tg(this.flyoutData,this.utilities)),this.attainableCouponsModule}},{key:"GetAttainableCouponsNotificationModule",value:function(){return this.attainableCouponsNotificationModule||(this.attainableCouponsNotificationModule=new rg(this.flyoutData,this.utilities)),this.attainableCouponsNotificationModule}},{key:"GetGroceryCashbackModule",value:function(){return this.groceryCashbackModule||(this.groceryCashbackModule=new Bg(this.flyoutData,this.utilities,this.commonAssets)),this.groceryCashbackModule}},{key:"GetGroceryCashbackActivatedModule",value:function(){return this.groceryCashbackActivatedModule||(this.groceryCashbackActivatedModule=new gI(this.flyoutData,this.utilities,this.commonAssets)),this.groceryCashbackActivatedModule}},{key:"GetGroceryCashbackNotificationModule",value:function(){return this.groceryCashbackNotificationModule||(this.groceryCashbackNotificationModule=new Wg(this.flyoutData,this.utilities,this.commonAssets)),this.groceryCashbackNotificationModule}},{key:"GetAutosMarketplaceModule",value:function(){return this.autosMarketplaceModule||(this.autosMarketplaceModule=new dg(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.autosMarketplaceModule}},{key:"GetAutosMarketplaceNotificationModule",value:function(){return this.autosMarketplaceNotificationModule||(this.autosMarketplaceNotificationModule=new mg(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.autosMarketplaceNotificationModule}},{key:"GetPriceHistoryNotificationModule",value:function(){return this.priceHistoryNotificationModule||(this.priceHistoryNotificationModule=new VE(this.GetStateManagementModule(),this.flyoutData,this.utilities)),this.priceHistoryNotificationModule}},{key:"GetAvailableModules",value:function(){if(this.flyoutData.experimentData.isPCBannerUXExperimentActive())return[this.GetPriceComparisonModule()];var t=[this.GetVirtualCardModule(),this.GetCheckoutAutofillModule(),this.GetCashBackModule(),this.GetPriceHistoryModule(),this.GetPriceComparisonModule(),this.GetClippingModule(),this.GetCouponModule(),this.GetDealsModule(),this.GetRatingsAndReviewsModule(),this.GetRecommendationsModule(),this.GetProductHistoryModule(),this.GetRewardModule(),this.GetGiftCardModule(),this.GetOrderStatusTrackingModule(),this.GetSimilarSellerModule(),this.GetSustainabilityModule(),this.GetTipsModule(),this.GetPaymentOptionsModule(),this.GetTopRetailersModule(),this.GetGroceryCouponModule(),this.GetPrintableCouponModule(),this.GetExclusiveCouponsModule(),this.GetAttainableCouponsModule(),this.GetGroceryCashbackModule(),this.GetGroceryCashbackActivatedModule(),this.GetAutosMarketplaceModule()];return this.flyoutData.experimentData.isExperimentActive(xt.H.remindLaterFooter)&&this.flyoutData.common.openedWith===D.Te.Auto||t.push(this.GetFeedbackModule()),t}},{key:"GetAvailableGuestModules",value:function(){return[this.GetCashBackModule(),this.GetPriceHistoryModule(),this.GetPriceComparisonModule(),this.GetCouponModule(),this.GetDealsModule(),this.GetRatingsAndReviewsModule(),this.GetRecommendationsModule(),this.GetProductHistoryModule(),this.GetGiftCardModule(),this.GetRewardModule(),this.GetOrderStatusTrackingModule(),this.GetSustainabilityModule(),this.GetTipsModule(),this.GetTopRetailersModule(),this.GetGroceryCouponModule(),this.GetPrintableCouponModule(),this.GetFeedbackModule(),this.GetExclusiveCouponsModule(),this.GetAutosMarketplaceModule()]}},{key:"GetAvailableNotificationModules",value:function(){var t=[];return this.flyoutData.common.openedWith===D.Te.Auto&&(t=[this.GetGroceryCashbackNotificationModule(),this.GetGiftCardNotificationModule(),this.GetExclusiveCouponsNotificationModule(),this.GetCashBackNotificationModule(),this.GetTrackingConfirmationNotificationModule(),this.GetSimilarSellersNotificationModule(),this.GetRewardNotificationModule(),this.GetSustainabilityNotificationModule(),this.GetPriceComparisonNotificationModule(),this.GetMicroNotificationModule(),this.GetVirtualCardNotificationModule(),this.GetViewedProductPriceDropNotificationModule(),this.GetAttainableCouponsNotificationModule(),this.GetAutosMarketplaceNotificationModule(),this.GetPriceHistoryNotificationModule()]),t}}]),t}(),vD=function(){function t(e,i,n,o,a,r){(0,s.Z)(this,t),(0,I.Z)(this,"EventType",void 0),(0,I.Z)(this,"JsonData",void 0),(0,I.Z)(this,"LogLevel",void 0),(0,I.Z)(this,"Message",void 0),(0,I.Z)(this,"ClientContext",void 0),(0,I.Z)(this,"ImpressionId",void 0),(0,I.Z)(this,"EventTime",void 0),this.LogLevel=e,this.EventType=i,this.JsonData=n,this.Message=o,this.ClientContext=r,this.ImpressionId=a,this.EventTime=(new Date).getTime()}return(0,l.Z)(t,[{key:"ToString",value:function(){return JSON.stringify(this)}}]),t}(),yD=function(){function t(){(0,s.Z)(this,t)}return(0,l.Z)(t,[{key:"LogInfoEvent",value:function(t,e,i,n){this.LogClientEvent(a.in.Information,t,e,i,n)}},{key:"LogErrorEvent",value:function(t,e,i,n){this.LogClientEvent(a.in.Error,t,e,i,n)}}]),t}();function CD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,M.Z)(t);if(e){var o=(0,M.Z)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,P.Z)(this,i)}}var bD=function(t){(0,O.Z)(i,t);var e=CD(i);function i(t,n){var o;return(0,s.Z)(this,i),o=e.call(this),(0,I.Z)((0,R.Z)(o),"pagehandlerModule",void 0),(0,I.Z)((0,R.Z)(o),"jsVersion",void 0),(0,I.Z)((0,R.Z)(o),"appClientInfoIname",void 0),(0,I.Z)((0,R.Z)(o),"edgeImpressionId",void 0),(0,I.Z)((0,R.Z)(o),"couponImpressionId",void 0),(0,I.Z)((0,R.Z)(o),"domainName",void 0),(0,I.Z)((0,R.Z)(o),"buildVersion",void 0),o.jsVersion=n,o.appClientInfoIname=a.BN.Edge,o.pagehandlerModule=t,o.buildVersion=kT.GetBuildVersion(),o}return(0,l.Z)(i,[{key:"setData",value:function(t,e){t===ya.g.EdgeImpressionId?this.edgeImpressionId=e:t===ya.g.CouponImpressionId?this.couponImpressionId=e:t===ya.g.DomainName?this.domainName=e:t===ya.g.Client&&(this.appClientInfoIname=e)}},{key:"LogClientEvent",value:function(t,e,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ya.g.EdgeImpressionId;this.domainName&&!n.Domain&&(n.Domain=this.domainName);var a="";switch(o){case ya.g.CouponImpressionId:a=this.couponImpressionId||this.edgeImpressionId;break;case ya.g.EdgeImpressionId:default:a=this.edgeImpressionId||this.couponImpressionId}var r=new IT(this.appClientInfoIname,this.jsVersion,this.buildVersion),s=new vD(t,e,JSON.stringify(n),i,a,r);this.pagehandlerModule.SendBingTelemetry(s.ToString())}}]),i}(yD),SD=bD,xD=function(){function e(t){(0,s.Z)(this,e),(0,I.Z)(this,"PopupOrigination",void 0),(0,I.Z)(this,"AutoShowFeature",void 0),(0,I.Z)(this,"ShoppingDataGroup",void 0),(0,I.Z)(this,"pageHandler",void 0),(0,I.Z)(this,"shoppingActions",void 0),(0,I.Z)(this,"shoppingContent",void 0),(0,I.Z)(this,"shoppingEngagement",void 0),(0,I.Z)(this,"shoppingWindowOpenDisposition",void 0),(0,I.Z)(this,"packageTrackingActions",void 0),(0,I.Z)(this,"telemetryFunctionName","sendBingTelemetry"),t?this.pageHandler=t:(this.PopupOrigination=mojom.PopupOrigination,this.AutoShowFeature=mojom.AutoShowFeature,this.ShoppingDataGroup=mojom.ShoppingDataGroup,this.pageHandler=mojom&&mojom.ShoppingHandler.getRemote(),this.shoppingActions=mojom.ShoppingActions,this.shoppingContent=mojom.ShoppingContent,this.packageTrackingActions=mojom.PackageTrackingActions,this.shoppingEngagement=mojom.ShoppingEngagement,this.shoppingWindowOpenDisposition=mojom.ShoppingWindowOpenDisposition,this.InitiatePageInterface())}var i,c,u,d,h,p,f,g,m;return(0,l.Z)(e,[{key:"OpenPane",value:function(){return!(!this.pageHandler.openPane||"function"!=typeof this.pageHandler.openPane)&&(this.CallPageHandlerFunction(this.pageHandler.openPane,"openPane"),!0)}},{key:"onActivateRebatesStateChanged",value:function(t){if(t!==D.FA.ACTIVATED&&t!==D.FA.STARTED&&t!==D.FA.PENDING_ACTIVATION_IN_PROFILE&&t!==D.FA.PENDING_ENROLL_REBATES_USER&&t!==D.FA.PENDING_SIGN_INTO_PROFILE&&t!==D.FA.PENDING_SWITCH_TO_MSA_PROFILE){var e=document.querySelector("#divContentWrapper");if(e){var i=new CustomEvent(Ia.e1.onRebatesTelemetryFail,{detail:{status:t}});e.dispatchEvent(i)}}else if(t===D.FA.ACTIVATED){var n=document.querySelector("#divContentWrapper");if(n){var o=new CustomEvent(Ia.e1.onRebatesTelemetrySuccess);n.dispatchEvent(o)}}}},{key:"onActivateRewardsStateChanged",value:function(t){if(t!==D.aE.ACTIVATED&&t!==D.aE.STARTED&&t!==D.aE.PENDING_ACTIVATION_IN_PROFILE&&t!==D.aE.PENDING_ENROLL_REWARDS_USER&&t!==D.aE.PENDING_SIGN_INTO_PROFILE&&t!==D.aE.PENDING_SWITCH_TO_MSA_PROFILE){var e=document.querySelector("#divContentWrapper");if(e){var i=new CustomEvent(Ia.e1.onRewardsTelemetryFail,{detail:{status:t}});e.dispatchEvent(i)}}else if(t===D.aE.ACTIVATED){var n=document.querySelector("#divContentWrapper");if(n){var o=new CustomEvent(Ia.e1.onRewardsTelemetrySuccess);n.dispatchEvent(o)}}}},{key:"InitiatePageInterface",value:function(){var t=this;if(mojom&&"function"==typeof mojom.PageCallbackRouter){var e=new mojom.PageCallbackRouter;this.CallPageHandlerFunction(this.pageHandler.registerPage,"registerPage",e.$.bindNewPipeAndPassRemote()),e.onActivateRebatesStateChanged&&e.onActivateRebatesStateChanged.addListener(function(e){t.onActivateRebatesStateChanged(e)}.bind(this));try{e.onActivateRewardsStateChanged&&e.onActivateRewardsStateChanged.addListener(function(e){t.onActivateRewardsStateChanged(e)}.bind(this))}catch(t){}}}},{key:"NavigateToSettings",value:function(){this.CallPageHandlerFunction(this.pageHandler.navigateToSettings,"navigateToSettings")}},{key:"NavigateToWallet",value:function(){this.CallPageHandlerFunction(this.pageHandler.navigateToWallet,"navigateToWallet")}},{key:"NavigateToTurnOffZip",value:function(){this.NavigateToUrl("edge://settings/payments")}},{key:"NavigateToPrivacyStatement",value:function(){this.CallPageHandlerFunction(this.pageHandler.navigateToPrivacyStatement,"navigateToPrivacyStatement")}},{key:"NavigateToTermsStatement",value:function(){this.CallPageHandlerFunction(this.pageHandler.navigateToTermsStatement,"navigateToTermsStatement")}},{key:"NavigateToCookieConsentStatement",value:function(){}},{key:"NavigateToLearnMore",value:function(t){var e=this.shoppingWindowOpenDisposition[t];void 0!==e&&this.CallPageHandlerFunction(this.pageHandler.navigateToLearnMore,"navigateToLearnMore",e)}},{key:"NavigateToRedeemRewards",value:function(){this.NavigateToUrl("https://rewards.microsoft.com/Signin?idru=%2Fredeem/")}},{key:"NavigateToSustainabilityLearnMore",value:function(){this.NavigateToUrl("https://aka.ms/AAeuh78")}},{key:"NavigateToShoppingLearnMore",value:function(){this.NavigateToUrl("https://docs.microsoft.com/en-us/microsoft-edge/privacy-whitepaper/#shopping")}},{key:"NavigateToPcbProductPage",value:function(t){this.NavigateToUrl(t)}},{key:"NavigateToMoreRebatesSites",value:function(){this.NavigateToUrl("https://www.bing.com/stores/edge/cashback")}},{key:"NavigateToBingReates",value:function(){this.NavigateToUrl("https://www.bing.com/rebates")}},{key:"NavigateToBingRebatesHistory",value:function(){this.NavigateToUrl("https://www.bing.com/rebates/history")}},{key:"NavigateToRewardsInfo",value:function(){this.NavigateToUrl("https://bing.com/rewards")}},{key:"NavigateToBNPLLearnMore",value:function(){this.NavigateToUrl("https://aka.ms/EdgeBNPL")}},{key:"NavigateToRetailerSite",value:function(t){}},{key:"NavigateToCouponPage",value:function(t){}},{key:"GetStorageValue",value:(m=(0,t.Z)(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pageHandler.getStorageValue(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"SetStorageValue",value:function(t,e){this.CallPageHandlerFunction(this.pageHandler.setStorageValue,"setStorageValue",t,e)}},{key:"AddItemFromOtherSeller",value:function(t){this.CallPageHandlerFunction(this.pageHandler.addItemFromOtherSeller,"addItemFromOtherSeller",t)}},{key:"StartEdgeDriver",value:function(t){this.CallPageHandlerFunction(this.pageHandler.startEdgeDriverScript,"startEdgeDriver","",t)}},{key:"NavigateToAlternateRetailerWithDisposition",value:function(t,e){var i=this.shoppingWindowOpenDisposition[e];void 0!==i&&this.CallPageHandlerFunction(this.pageHandler.navigateToAlternateRetailerWithDisposition,"navigateToAlternateRetailerWithDisposition",t,i)}},{key:"NavigateToRebatesPayouts",value:function(t){var e=this.shoppingWindowOpenDisposition[t];void 0!==e&&this.CallPageHandlerFunction(this.pageHandler.navigateToRebatesPayouts,"navigateToRebatesPayouts",e)}},{key:"NavigateToDealWithDisposition",value:function(t,e,i){var n=this.shoppingWindowOpenDisposition[i];void 0!==n&&this.CallPageHandlerFunction(this.pageHandler.navigateToDealWithDisposition,"navigateToDealWithDisposition",t,n)}},{key:"SetIsPersonalizedShoppingEnabled",value:function(t){this.pageHandler.setIsPersonalizedShoppingEnabled(t)}},{key:"NavigateToRecommendationWithDisposition",value:function(t,e,i){var n=this.shoppingWindowOpenDisposition[i];void 0!==n&&this.CallPageHandlerFunction(this.pageHandler.navigateToRecommendationWithDisposition,"navigateToRecommendationWithDisposition",t,n)}},{key:"NavigateToOrderWithDisposition",value:function(t,e){}},{key:"NavigateToOtherSellerWithDisposition",value:function(t,e){var i=this.shoppingWindowOpenDisposition[e];void 0!==i&&this.CallPageHandlerFunction(this.pageHandler.navigateToOtherSellerWithDisposition,"navigateToOtherSellerWithDisposition",t,i)}},{key:"NavigateToRebatesAccount",value:function(t){var e=this.shoppingWindowOpenDisposition[t];void 0!==e&&this.CallPageHandlerFunction(this.pageHandler.navigateToRebatesAccount,"navigateToRebatesAccount",e)}},{key:"NavigateToProfessionalReviewWithDisposition",value:function(t,e,i){var n=this.shoppingWindowOpenDisposition[i];void 0!==n&&this.CallPageHandlerFunction(this.pageHandler.navigateToProfessionalReviewWithDisposition,"navigateToProfessionalReviewWithDisposition",t,n)}},{key:"NavigateToVideoReviewWithDisposition",value:function(t,e,i){var n=this.shoppingWindowOpenDisposition[i];void 0!==n&&this.CallPageHandlerFunction(this.pageHandler.navigateToVideoReviewWithDisposition,"navigateToVideoReviewWithDisposition",t,n)}},{key:"SendBingTelemetry",value:function(t){this.CallPageHandlerFunction(this.pageHandler.sendBingTelemetry,"sendBingTelemetry",t,"-1.0")}},{key:"RecordAsUserAction",value:function(t){if(this.shoppingActions){var e=this.shoppingActions[t];void 0!==e&&this.CallPageHandlerFunction(this.pageHandler.recordAsUserAction,"recordAsUserAction",e)}}},{key:"RecordPackageTrackingAction",value:function(t,e){if(this.packageTrackingActions){var i=this.packageTrackingActions[t];void 0!==i&&this.CallPageHandlerFunction(this.pageHandler.recordPackageTrackingAction,"recordPackageTrackingAction",i,e)}}},{key:"RecordAsUserEngagement",value:function(t){if(this.shoppingEngagement){var e=this.shoppingEngagement[t];void 0!==e&&this.CallPageHandlerFunction(this.pageHandler.recordAsUserEngagement,"recordAsUserEngagement",e)}}},{key:"RecordAsContentViewed",value:function(t){if(this.shoppingContent){var e=this.shoppingContent[t];void 0!==e&&this.CallPageHandlerFunction(this.pageHandler.recordAsContentViewed,"recordAsContentViewed",e)}}},{key:"StartShopping",value:function(t,e){this.CallPageHandlerFunction(this.pageHandler.startShopping,"startShopping",t,e)}},{key:"DismissPopup",value:function(){this.CallPageHandlerFunction(this.pageHandler.dismissPopup,"dismissPopup")}},{key:"SnoozePopup",value:function(t,e){this.CallPageHandlerFunction(this.pageHandler.snoozePopup,"snoozePopup")}},{key:"DismissBanner",value:function(){yt("banneropen","false"),this.CallPageHandlerFunction(this.pageHandler.dismissBanner,"dismissBanner")}},{key:"OnBannerLoad",value:function(){yt("banneropen","true"),this.CallPageHandlerFunction(this.pageHandler.onBannerLoad,"onBannerLoad")}},{key:"ShowFlyoutFromBanner",value:function(t){this.CallPageHandlerFunction(this.pageHandler.showFlyoutFromBanner,"showFlyoutFromBanner",t)}},{key:"DeletePackageTrackerByGuid",value:function(t){this.CallPageHandlerFunction(this.pageHandler.deletePackageTrackerByGuid,"deletePackageTrackerByGuid",t)}},{key:"NavigateToUrlBackground",value:function(t,e,i){this.CallPageHandlerFunction(this.pageHandler.navigateToUrlBackground,"navigateToUrlBackground",t,e)}},{key:"AutoShowForAllFeatures",value:function(t){if(this.pageHandler.allowAutoShowForFeature&&"function"==typeof this.pageHandler.allowAutoShowForFeature)for(var e=0,i=[St.s.AUTO_SHOW_LOWER_PRICE_FOUND,St.s.AUTO_SHOW_REBATES,St.s.AUTO_SHOW_REBATES_CONFIRMATION,St.s.AUTO_SHOW_REBATES_ORGANIC,St.s.AUTO_SHOW_PRICE_HISTORY,St.s.AUTO_SHOW_REBATES_ORGANIC_NEW,St.s.AUTO_SHOW_REBATES_CHECKOUT,St.s.AUTO_SHOW_PERSONALIZED_CASHBACK,St.s.AUTO_SHOW_PERSONALIZED_CASHBACK_CONFIRMATION,St.s.AUTO_SHOW_EXPRESS_CHECKOUT,St.s.AUTO_SHOW_SERVER_DRIVEN_REWARDS,St.s.AUTO_SHOW_COUPONS_CLIPPING,St.s.AUTO_SHOW_OTHER_SELLERS,St.s.AUTO_SHOW_PRINT_GROCERY,St.s.AUTO_SHOW_GIFT_CARD,St.s.AUTO_SHOW_ATTAINABLE_COUPONS,St.s.AUTO_SHOW_PACKAGE_TRACKING,St.s.AUTO_SHOW_VIRTUAL_CARD,St.s.AUTO_SHOW_PROFESSIONAL_REVIEWS,St.s.AUTO_SHOW_GROCERY_ITEMIZED_CASHBACK];e<i.length;e++){var n=i[e];this.CallPageHandlerFunction(this.pageHandler.allowAutoShowForFeature,"allowAutoShowForFeature",t,n)}}},{key:"AllowAutoShow",value:function(t,e){this.pageHandler.allowAutoShowForFeature&&"function"==typeof this.pageHandler.allowAutoShowForFeature&&e?this.CallPageHandlerFunction(this.pageHandler.allowAutoShowForFeature,"allowAutoShowForFeature",t,e):this.CallPageHandlerFunction(this.pageHandler.allowAutoShow,"allowAutoShow",t)}},{key:"SetAllowOrganicRebates",value:function(t){this.CallPageHandlerFunction(this.pageHandler.setAllowOrganicRebates,"setAllowOrganicRebates",t)}},{key:"TriggerExperiment",value:function(t){this.CallPageHandlerFunction(this.pageHandler.triggerExperiment,"triggerExperiment",t)}},{key:"TriggerSupportedExperiments",value:function(t){this.CallPageHandlerFunction(this.pageHandler.triggerSupportedExperiments,"triggerSupportedExperiments",rm(t.values()))}},{key:"SendBingVisibilityRequest",value:function(t){this.CallPageHandlerFunction(this.pageHandler.sendBingVisibilityRequest,"sendBingVisibilityRequest",t)}},{key:"ApplyAllCoupons",value:function(){this.CallPageHandlerFunction(this.pageHandler.applyAllCoupons,"applyAllCoupons")}},{key:"PrintCoupons",value:function(t){try{this.CallPageHandlerFunction(this.pageHandler.printCoupons,"printCoupons",t)}catch(t){}}},{key:"ApplyAllCouponsWithExpressCheckout",value:function(t){this.CallPageHandlerFunction(this.pageHandler.applyAllCouponsWithExpressCheckout,"applyAllCouponsWithExpressCheckout",t.ToString())}},{key:"ActivateRebates",value:(g=(0,t.Z)(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,this.pageHandler.activateRebates();case 3:return t.abrupt("return",t.sent);case 6:return this.pageHandler.activateRebates(),t.abrupt("return",{activated:!0});case 8:case"end":return t.stop()}}),t,this)}))),function(t){return g.apply(this,arguments)})},{key:"ActivateRewards",value:(f=(0,t.Z)(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,this.pageHandler.activateRewards();case 3:return t.abrupt("return",t.sent);case 6:return this.pageHandler.activateRewards(),t.abrupt("return",{activated:!0});case 8:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"RunQuerySelectorOnBodyWithReponse",value:(p=(0,t.Z)(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pageHandler.runQuerySelectorOnBody(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"RunQuerySelectorOnBodyWithValues",value:(h=(0,t.Z)(n().mark((function t(e,i){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pageHandler.runQuerySelectorOnBodyWithValues(e,i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"CopyCoupon",value:function(t){navigator.clipboard.writeText(t)}},{key:"DeletePwiloEntry",value:function(t){return this.pageHandler.deletePwiloEntry(t)}},{key:"OnOpenNotification",value:function(t,e){return this.pageHandler.onOpenNotification(t,e)}},{key:"AllowServerDrivenNotifications",value:function(t){return this.pageHandler.allowServerDrivenNotifications(t)}},{key:"GetProfilesData",value:(d=(0,t.Z)(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){if(!chrome||!chrome.autofillPrivate)return e("can not find profiles.");chrome.autofillPrivate.getAddressList((function(i){i?t(i):e("can not find profiles")}))})));case 1:case"end":return t.stop()}}),t)}))),function(){return d.apply(this,arguments)})},{key:"GetPaymentsData",value:(u=(0,t.Z)(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){if(!chrome||!chrome.autofillPrivate)return e("can not find payments.");chrome.autofillPrivate.getCreditCardList((function(i){i?t(i):e("can not find payments")}))})));case 1:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)})},{key:"CancelAutoDismiss",value:function(){}},{key:"RecordRenderTime",value:function(t){}},{key:"SetPackageTrackingUserConsent",value:function(t){this.CallPageHandlerFunction(this.pageHandler.setPackageTrackingUserConsent,"setPackageTrackingUserConsent",t)}},{key:"SetPackageTrackingFREShown",value:function(t){this.CallPageHandlerFunction(this.pageHandler.setPackageTrackingFREShown,"setPackageTrackingFREShown",t)}},{key:"SendMicroFeedbackVote",value:(c=(0,t.Z)(n().mark((function t(e,i,o){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.pageHandler.sendMicroFeedbackVote(e,i,o);case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t,e,i){return c.apply(this,arguments)})},{key:"SendMicroFeedbackFollowUpVote",value:function(t,e,i,n,o){try{this.CallPageHandlerFunction(this.pageHandler.sendMicroFeedbackFollowUpVote,"sendMicroFeedbackFollowUpVote",i,e,t,n,o)}catch(t){}}},{key:"OpenMicroFeedback",value:function(t){try{this.CallPageHandlerFunction(this.pageHandler.openMicroFeedback,"openMicroFeedback",t)}catch(t){}}},{key:"NavigateToUrl",value:function(t){t&&window.open(t,"_blank","noopener,noreferrer")}},{key:"GetAnid",value:(i=(0,t.Z)(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,this.pageHandler.getAnid();case 3:return t.abrupt("return",t.sent);case 6:return this.pageHandler.getAnid(),t.abrupt("return",{activated:!0});case 8:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"CallPageHandlerFunction",value:function(t,e){try{if(t&&"function"==typeof t){for(var i=arguments.length,n=new Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];n&&n.length>0?t.apply(this.pageHandler,n):t.apply(this.pageHandler)}else if(e!==this.telemetryFunctionName){var a="".concat(e," is not a function");this.SendPageHandlerErrorTelemetry(a)}}catch(t){if(e!==this.telemetryFunctionName){var r="Error calling function ".concat(e," - ").concat(t);this.SendPageHandlerErrorTelemetry(r)}}}},{key:"SendPageHandlerErrorTelemetry",value:function(t){var e=new o.Z(a.xu.ErrorPageHandlerFunction),i=new IT(a.BN.Edge,r),n=new vD(a.in.Error,a.R.EdgeFlyoutStatus,JSON.stringify(e),t,"",i);this.SendBingTelemetry(n.ToString())}}]),e}(),ED=new xD;function AD(){return(AD=(0,t.Z)(n().mark((function t(){var e,i,s,l,c,u,d,h,p,f;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(new Of).initializeComponents(),e=new cs,i=new ss(D.AS.Desktop,e),s=new SD(ED,r),l=new T,c=new Ma(ED,s,i,l),u=new mD(i,c,l),c.viewModulesUtilities.addCommonStyles(l),t.next=11,i.initializeModuleData(s,ED,i);case 11:return TD(i,c.viewModulesUtilities,l),i.experimentData.experiments&&i.experimentData.experiments.size>0&&ED.TriggerSupportedExperiments(i.experimentData.experiments),ID(i.dataStoreModule,i.common.domain,s,e),c.viewModulesUtilities.trapFlyoutFocusMac(),d=document.querySelector("#divContentWrapper"),t.next=18,u.GetFlyoutRendererModule().createModules(d);case 18:h=new x,new MutationObserver((function(){h.HandleAdditionalBody()})).observe(document,{attributes:!0,childList:!0,subtree:!0}),wD(i.common.popupOrigination,s,ED,u),DD(e,i.common.openedWith,i.common.isCheckoutPage,s),t.next=33;break;case 25:t.prev=25,t.t0=t.catch(0),p=new SD(ED,r),f=new o.Z(a.xu.OnErrorInvoked),p.setData(ya.g.Client,a.BN.Edge),p.LogErrorEvent(a.R.EdgeFlyoutStatus,"V1 initialize error ".concat(null===t.t0||void 0===t.t0?void 0:t.t0.message),f),document.querySelector("msft-edge-shopping")||OD(p,new T,new cs,"V1 Initialize");case 33:case"end":return t.stop()}}),t,null,[[0,25]])})))).apply(this,arguments)}function TD(t,e,i){var n=document.querySelector("head"),o=t.common.shopping;if(n){var a=n.querySelector("title"),r=t.strings;if(!a||a.innerText!==r.commonFixedTitle){var s=e.createElement("title");s.innerText=r.commonFixedTitle,n.appendChild(s),function(t,e){var i=document.createElement("DIV");i.innerHTML=t.getHeaderIcon(),i.slot="header-icon",e.appendChild(i)}(i,o),t.experimentData.isPCBannerUXExperimentActive()?o.fixedTitle=r.pcPriceSectionTitle:o.fixedTitle=r.commonFixedTitle}}}function ID(t,e,i,n){try{var r=n.GetLoadTimeDataValue("impressionId",""),s=t.ApiData?t.ApiData.impressionId:"",l=null!=r?r:"";i.setData(ya.g.CouponImpressionId,s),i.setData(ya.g.EdgeImpressionId,l),i.setData(ya.g.DomainName,e),i.setData(ya.g.Client,a.BN.Edge)}catch(t){var c=new o.Z(a.xu.OnErrorInvoked);i.LogErrorEvent(a.R.EdgeFlyoutStatus,"Data creation Exception at InitializeCouponsApiData",c)}}function DD(t,e,i,n){var r=e&&e===D.Te.Auto?a.xu.AutoTrigger:a.xu.UserTrigger,s=new o.Z(r);if(n.LogInfoEvent(a.R.EdgeFlyoutStatus,function(t){var e={lastCommittedUrl:t.GetLoadTimeDataValue("lastCommittedURL",""),navChain:kD(t)};return JSON.stringify(e)}(t),s),i){var l=new o.Z(a.xu.OpenedInCheckout);n.LogInfoEvent(a.R.EdgeFlyoutStatus,"",l)}}function kD(t){var e=t.GetLoadTimeDataValue("bingRedirectChainForInitialDomainNavigation",null),i="";return e&&e instanceof Array&&e.length>0&&(i=e.filter((function(t){return t.includes("bing.com")||t.includes("microsoft.com")})).join("||")),i}function wD(t,e,i,n){return RD.apply(this,arguments)}function RD(){return(RD=(0,t.Z)(n().mark((function t(e,i,r,s){var l,c,u;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,l=null,c=r.PopupOrigination,e!==(null==c?void 0:c.AUTO_SHOW_BING_SEARCH)){t.next=11;break}return t.next=8,s.GetCouponModule().ShouldRenderModule();case 8:l=t.sent,t.next=27;break;case 11:if(e!==(null==c?void 0:c.AUTO_SHOW_URL_PARAM_REBATES)){t.next=17;break}return t.next=14,s.GetCashBackModule().ShouldRenderModule();case 14:l=t.sent,t.next=27;break;case 17:if(e!==(null==c?void 0:c.AUTO_SHOW_URL_PARAM_PRICE_COMPARISON)){t.next=23;break}return t.next=20,s.GetPriceComparisonModule().ShouldRenderModule();case 20:l=t.sent,t.next=27;break;case 23:if(e!==(null==c?void 0:c.AUTO_SHOW_URL_PARAM_PRICE_HISTORY)){t.next=27;break}return t.next=26,s.GetPriceHistoryModule().ShouldRenderModule();case 26:l=t.sent;case 27:null!==l&&(u=new o.Z(a.xu.AutoOpenUsingUrlParam),i.LogInfoEvent(a.R.EdgeFlyoutStatus,"Auto open using url param - ".concat(e," - is succeeded: ").concat(l),u)),t.next=33;break;case 30:t.prev=30,t.t0=t.catch(2);case 33:case"end":return t.stop()}}),t,null,[[2,30]])})))).apply(this,arguments)}function OD(t,e,i,n){var o=new as(i),a=D.m5.LTR,r=D.Q2.Light;try{o.Create(D.AS.Desktop);var s=i.GetLoadTimeDataValue("dark_theme",!1);r=D.Q2.Light,s&&(r=D.Q2.Dark);var l=i.GetLoadTimeDataValue("is_rtl",!1);a=D.m5.LTR,l&&(a=D.m5.RTL)}catch(t){}new Mf(t,ED,o,r,a,e).renderErrorUI(n)}window.onerror=function(t,e,i,n,s){var l=new o.Z(a.xu.OnErrorInvoked),c=new SD(ED,r);return c.setData(ya.g.Client,a.BN.Edge),c.LogErrorEvent(a.R.EdgeFlyoutStatus,"v1 window on error - ".concat((null==s?void 0:s.message)||JSON.stringify(t)),l),document.querySelector("msft-edge-shopping")||OD(c,new T,new cs,"v1 window on error ".concat((null==s?void 0:s.message)||JSON.stringify(t))),!0},document.addEventListener("DOMContentLoaded",(function(){return AD.apply(this,arguments)}))}()}();